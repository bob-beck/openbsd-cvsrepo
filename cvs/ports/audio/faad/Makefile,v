head	1.59;
access;
symbols
	OPENBSD_6_1:1.59.0.2
	OPENBSD_6_1_BASE:1.59
	OPENBSD_6_0:1.57.0.6
	OPENBSD_6_0_BASE:1.57
	OPENBSD_5_9:1.57.0.2
	OPENBSD_5_9_BASE:1.57
	OPENBSD_5_8:1.57.0.4
	OPENBSD_5_8_BASE:1.57
	OPENBSD_5_7:1.55.0.4
	OPENBSD_5_7_BASE:1.55
	OPENBSD_5_6:1.55.0.2
	OPENBSD_5_6_BASE:1.55
	OPENBSD_5_5:1.54.0.2
	OPENBSD_5_5_BASE:1.54
	OPENBSD_5_4:1.53.0.2
	OPENBSD_5_4_BASE:1.53
	OPENBSD_5_3:1.51.0.2
	OPENBSD_5_3_BASE:1.51
	OPENBSD_5_2:1.50.0.2
	OPENBSD_5_2_BASE:1.50
	OPENBSD_5_1_BASE:1.49
	OPENBSD_5_1:1.49.0.2
	OPENBSD_5_0:1.48.0.2
	OPENBSD_5_0_BASE:1.48
	OPENBSD_4_9:1.46.0.2
	OPENBSD_4_9_BASE:1.46
	OPENBSD_4_8:1.43.0.2
	OPENBSD_4_8_BASE:1.43
	OPENBSD_4_7:1.39.0.2
	OPENBSD_4_7_BASE:1.39
	OPENBSD_4_6:1.38.0.4
	OPENBSD_4_6_BASE:1.38
	OPENBSD_4_5:1.38.0.2
	OPENBSD_4_5_BASE:1.38
	OPENBSD_4_4:1.37.0.2
	OPENBSD_4_4_BASE:1.37
	OPENBSD_4_3:1.36.0.2
	OPENBSD_4_3_BASE:1.36
	OPENBSD_4_2:1.33.0.2
	OPENBSD_4_2_BASE:1.33
	OPENBSD_4_1:1.31.0.2
	OPENBSD_4_1_BASE:1.31
	OPENBSD_4_0:1.28.0.2
	OPENBSD_4_0_BASE:1.28
	OPENBSD_3_9:1.24.0.2
	OPENBSD_3_9_BASE:1.24
	OPENBSD_3_8:1.17.0.4
	OPENBSD_3_8_BASE:1.17
	OPENBSD_3_7:1.17.0.2
	OPENBSD_3_7_BASE:1.17
	OPENBSD_3_6:1.12.0.2
	OPENBSD_3_6_BASE:1.12
	OPENBSD_3_5:1.10.0.2
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	bjorn:1.1.1.1
	faad:1.1.1;
locks; strict;
comment	@# @;


1.59
date	2016.08.30.12.29.17;	author jasper;	state Exp;
branches;
next	1.58;
commitid	uof9lQCfZXM1dTUz;

1.58
date	2016.08.30.10.19.51;	author jasper;	state Exp;
branches;
next	1.57;
commitid	mEMMqCy3gQrqLkrh;

1.57
date	2015.06.10.21.53.49;	author sthen;	state Exp;
branches;
next	1.56;
commitid	5C4GFl0yBmNNzD1q;

1.56
date	2015.03.19.20.25.26;	author naddy;	state Exp;
branches;
next	1.55;
commitid	zN8twHQGaJf3YJpT;

1.55
date	2014.06.04.21.37.30;	author miod;	state Exp;
branches;
next	1.54;
commitid	mL0YjRMu5xBteAJp;

1.54
date	2013.12.15.19.50.44;	author naddy;	state Exp;
branches;
next	1.53;

1.53
date	2013.03.21.08.45.12;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2013.03.10.22.55.02;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2012.08.25.17.10.58;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2012.05.22.18.38.48;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2011.10.17.10.38.41;	author espie;	state Exp;
branches;
next	1.48;

1.48
date	2011.07.06.21.30.16;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2011.07.05.17.37.33;	author jasper;	state Exp;
branches;
next	1.46;

1.46
date	2010.11.15.00.22.46;	author espie;	state Exp;
branches;
next	1.45;

1.45
date	2010.10.24.21.00.29;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2010.09.05.10.25.16;	author sthen;	state Exp;
branches;
next	1.43;

1.43
date	2010.07.01.21.12.50;	author jasper;	state Exp;
branches;
next	1.42;

1.42
date	2010.06.23.17.02.46;	author landry;	state Exp;
branches;
next	1.41;

1.41
date	2010.06.14.17.44.46;	author sebastia;	state Exp;
branches;
next	1.40;

1.40
date	2010.04.08.07.17.21;	author jasper;	state Exp;
branches;
next	1.39;

1.39
date	2009.08.10.06.29.52;	author kili;	state Exp;
branches;
next	1.38;

1.38
date	2008.09.15.21.58.19;	author jakemsr;	state Exp;
branches;
next	1.37;

1.37
date	2008.07.25.20.25.59;	author sthen;	state Exp;
branches;
next	1.36;

1.36
date	2008.01.14.01.16.37;	author jakemsr;	state Exp;
branches;
next	1.35;

1.35
date	2007.12.11.11.00.37;	author jakemsr;	state Exp;
branches;
next	1.34;

1.34
date	2007.09.15.21.26.01;	author simon;	state Exp;
branches;
next	1.33;

1.33
date	2007.06.29.06.01.42;	author jakemsr;	state Exp;
branches;
next	1.32;

1.32
date	2007.04.12.20.24.29;	author sturm;	state Exp;
branches;
next	1.31;

1.31
date	2006.11.25.17.04.32;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2006.11.11.21.04.27;	author steven;	state Exp;
branches;
next	1.29;

1.29
date	2006.10.28.10.30.41;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2006.08.01.16.20.46;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2006.08.01.11.17.56;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2006.07.03.15.55.24;	author ckuethe;	state Exp;
branches;
next	1.25;

1.25
date	2006.03.23.17.21.28;	author jolan;	state Exp;
branches;
next	1.24;

1.24
date	2006.02.08.04.54.48;	author david;	state Exp;
branches;
next	1.23;

1.23
date	2006.01.13.19.12.15;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2006.01.10.11.14.49;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2005.12.30.16.41.06;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2005.12.24.19.51.52;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2005.11.16.07.57.31;	author jakemsr;	state Exp;
branches;
next	1.18;

1.18
date	2005.09.16.09.51.26;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2005.01.11.07.16.01;	author sturm;	state Exp;
branches;
next	1.16;

1.16
date	2005.01.05.11.40.04;	author alek;	state Exp;
branches;
next	1.15;

1.15
date	2004.12.13.05.40.55;	author jcs;	state Exp;
branches;
next	1.14;

1.14
date	2004.12.09.04.57.56;	author jcs;	state Exp;
branches;
next	1.13;

1.13
date	2004.11.21.17.51.44;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2004.04.28.13.05.01;	author jolan;	state Exp;
branches;
next	1.11;

1.11
date	2004.04.28.01.30.00;	author jolan;	state Exp;
branches;
next	1.10;

1.10
date	2004.02.23.00.33.34;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2003.12.29.13.17.53;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2003.10.19.20.51.43;	author sturm;	state Exp;
branches;
next	1.7;

1.7
date	2003.08.24.21.27.30;	author sturm;	state Exp;
branches;
next	1.6;

1.6
date	2003.05.19.00.10.36;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2003.02.15.16.42.22;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2003.02.15.14.19.19;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2002.12.20.23.40.13;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2002.11.20.08.16.07;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2002.11.13.17.50.13;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.11.13.17.50.13;	author espie;	state Exp;
branches;
next	;


desc
@@


1.59
log
@drop gettext module (unused)
@
text
@# $OpenBSD: Makefile,v 1.58 2016/08/30 10:19:51 jasper Exp $

# gcc -iquote
NOT_FOR_ARCHS=	${GCC3_ARCHS}

COMMENT=	MPEG-2 and MPEG-4 AAC decoder

V=		2.7
DISTNAME=	faad2-${V}
PKGNAME=	faad-${V}
REVISION=	2
CATEGORIES=    	audio
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=faac/}
EXTRACT_SUFX=	.tar.bz2

SHARED_LIBS=	faad	3.0 \
		mp4ff	2.0

HOMEPAGE=	http://www.audiocoding.com/

# GPLv2+
PERMIT_PACKAGE_CDROM=	Patents
PERMIT_PACKAGE_FTP=	Yes

WANTLIB=	c m

# bootstrap checks for libtoolize
BUILD_DEPENDS+=	${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS} \
		devel/libtool

USE_GMAKE=	Yes
CONFIGURE_STYLE= gnu
AUTOCONF_VERSION= 2.61
AUTOMAKE_VERSION= 1.9
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"

post-extract:
	@@mv ${WRKSRC}/frontend/faad.man ${WRKSRC}/frontend/faad.1

post-patch:
	@@cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
	    AUTOMAKE_VERSION=${AUTOMAKE_VERSION} PATH=${PORTPATH} \
	    sh bootstrap

.include <bsd.port.mk>
@


1.58
log
@drop xmms subpackage (and subsequently ,-main too)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2015/06/10 21:53:49 sthen Exp $
d11 1
a11 1
REVISION=	1
a26 1
MODULES=	devel/gettext
@


1.57
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2015/03/19 20:25:26 naddy Exp $
d6 1
a6 2
COMMENT-main=	MPEG-2 and MPEG-4 AAC decoder
COMMENT-xmms=	XMMS input plugin for MP4/M4A/AAC files
d10 2
a11 4
PKGNAME-main=	faad-${V}
PKGNAME-xmms=	xmms-faad-${V}
REVISION-main=	0
REVISION-xmms=	2
d25 1
a25 3
WANTLIB-main=	c m
WANTLIB-xmms=	X11 Xau Xdmcp Xext Xi faad gdk glib gmodule gtk m mp4ff \
		pthread pthread-stubs xcb xmms>=3 ${MODGETTEXT_WANTLIB}
a32 8
LIB_DEPENDS-main=	# empty
RUN_DEPENDS-main=	# empty

LIB_DEPENDS-xmms=	${BUILD_PKGPATH} \
			${MODGETTEXT_LIB_DEPENDS} \
			audio/xmms
RUN_DEPENDS-xmms=	${MODGETTEXT_RUN_DEPENDS}

a38 12

PSEUDO_FLAVORS=	no_xmms
FLAVOR?= no_xmms

MULTI_PACKAGES=-main -xmms

.include <bsd.port.arch.mk>

.if ${BUILD_PACKAGES:M-xmms}
BUILD_DEPENDS+=	audio/id3lib
CONFIGURE_ARGS+= --with-xmms
.endif
@


1.56
log
@fold lib-only PFRAG.shared into PLIST, and some related cleanups
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2014/06/04 21:37:30 miod Exp $
d14 1
a14 1
REVISION-xmms=	1
d29 2
a30 2
WANTLIB-xmms=	X11 Xext Xi faad gdk glib gmodule gtk m mp4ff pthread \
		xcb xmms>=3 ${MODGETTEXT_WANTLIB}
@


1.55
log
@NOT_FOR_ARCHS= gcc3, as this uses -iquote
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/12/15 19:50:44 naddy Exp $
d13 1
@


1.54
log
@tweak the comment (suggested by ian@@) and the pkgname of the faad
xmms plugin to make it easier to find
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.53 2013/03/21 08:45:12 ajacoutot Exp $
@


1.53
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/03/10 22:55:02 espie Exp $
d4 1
a4 1
COMMENT-xmms=	XMMS input plugin for AAC files
d9 2
a10 2
PKGNAME-xmms=	faad-xmms-${V}
REVISION-xmms=	0
@


1.52
log
@PERMIT/REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2012/08/25 17:10:58 ajacoutot Exp $
a42 1
USE_LIBTOOL=	Yes
@


1.51
log
@sync WANTLIB after recent compiler change

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2012/05/22 18:38:48 ajacoutot Exp $
a22 2
PERMIT_DISTFILES_CDROM=	Patents
PERMIT_DISTFILES_FTP=	Yes
@


1.50
log
@Update to faad 2.7.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2011/10/17 10:38:41 espie Exp $
d10 1
d27 2
a28 2
WANTLIB-xmms=	X11 Xext Xi faad gdk glib gmodule gtk m mp4ff xcb \
		xmms>=3 ${MODGETTEXT_WANTLIB}
@


1.49
log
@use bsd.port.arch.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2011/07/06 21:30:16 ajacoutot Exp $
d6 1
a6 1
V=		2.6.1
a8 1
REVISION-main=	3
a9 1
REVISION-xmms=	2
d12 1
d14 2
a15 2
SHARED_LIBS +=	faad                 2.0      # .0.0
SHARED_LIBS +=	mp4ff                1.0      # .0.0
d25 5
d35 7
a41 1
WRKDIST=	${WRKDIR}/faad2
d49 1
a49 2
		LDFLAGS="-L${LOCALBASE}/lib" \
		LIBS="-lm"
d63 2
a64 8
LIB_DEPENDS-xmms=	audio/xmms \
			${BUILD_PKGPATH}
RUN_DEPENDS-xmms=	audio/xmms
WANTLIB-xmms=		${MODGETTEXT_WANTLIB} \
			X11 Xau Xdmcp Xext Xi glib \
			gmodule gtk gdk pthread-stubs xcb \
			xmms>=3 faad mp4ff m
WANTLIB-main=		c m
d68 2
a69 10
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} PATH=${PORTPATH} \
		sh bootstrap

post-configure:
	@@cp ${WRKSRC}/config.h ${WRKSRC}/faadconfig.h

post-install:
	${INSTALL_DATA} ${WRKSRC}/faadconfig.h ${PREFIX}/include
	${INSTALL_DATA} ${WRKSRC}/common/mp4ff/mp4ff.h ${PREFIX}/include
	${INSTALL_DATA} ${WRKSRC}/common/mp4ff/mp4ff_int_types.h ${PREFIX}/include
@


1.48
log
@Use the gettext MODULE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/07/05 17:37:33 jasper Exp $
d45 1
a45 1
MULTI_PACKAGES=-main
d47 3
a49 2
.if !${FLAVOR:L:Mno_xmms}
MULTI_PACKAGES+=-xmms
d55 1
a55 1
			audio/faad
@


1.47
log
@- Cleaning up the port a bit
- Add missing build dependency on automake
- Update the autoconf version to a more appropriate version
- Add in a fix for the automake issue that came up with newer
  GNU libtool installed which broke the build

  from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/11/15 00:22:46 espie Exp $
d9 1
a9 1
REVISION-main=	2
d11 1
a11 1
REVISION-xmms=	1
a25 2
WANTLIB=	m

d56 2
a57 2
WANTLIB-xmms=		${WANTLIB} \
			X11 Xau Xdmcp Xext Xi iconv intl glib \
d59 2
a60 2
			xmms>=3 faad mp4ff
WANTLIB-main=		${WANTLIB} c
@


1.46
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/10/24 21:00:29 ajacoutot Exp $
d5 1
d9 1
a9 1
REVISION-main=	1
d14 1
d20 1
a20 1
# GPL
d26 1
a26 1
WANTLIB=		m
d30 1
d32 3
d37 3
a39 5

WRKDIST=	${WRKDIR}/faad2
CONFIGURE_STYLE= automake
AUTOCONF_VERSION=2.59
AUTOMAKE_VERSION=1.9
d42 1
a42 3
		LIBS="-lm" \
		AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION}
d46 1
d51 1
a51 1
BUILD_DEPENDS+=		audio/id3lib
a52 2
.else
CONFIGURE_ARGS+= --without-xmms
d65 1
a65 1
	@@cd ${WRKSRC} && AUTOCONF_VERSION=${AUTOCONF_VERSION} \
d73 3
a75 3
	@@${INSTALL_DATA} ${WRKSRC}/faadconfig.h ${PREFIX}/include
	@@${INSTALL_DATA} ${WRKSRC}/common/mp4ff/mp4ff.h ${PREFIX}/include
	@@${INSTALL_DATA} ${WRKSRC}/common/mp4ff/mp4ff_int_types.h ${PREFIX}/include
@


1.45
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/09/05 10:25:16 sthen Exp $
d28 1
a28 1
		::devel/libtool
d48 1
a48 1
BUILD_DEPENDS+=		::audio/id3lib
d54 3
a56 3
LIB_DEPENDS-xmms=	::audio/xmms \
			::audio/faad
RUN_DEPENDS-xmms=	::audio/xmms
d60 1
a60 1
			xmms.>=3 faad mp4ff
@


1.44
log
@new-style LIB_DEPENDS/REVISION and sync WANTLIB where necessary
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/07/01 21:12:50 jasper Exp $
a47 1
USE_X11=	Yes
@


1.43
log
@- make the no_xmms the default, so you won't endup with xmms, glib1, gtk1, etc
when you build mpd..

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/06/23 17:02:46 landry Exp $
d7 4
a10 2
PKGNAME-main=	faad-${V}p1
PKGNAME-xmms=	faad-xmms-${V}p1
d23 1
d55 2
a56 2
LIB_DEPENDS-xmms=	xmms.>=3::audio/xmms \
			faad,mp4ff::audio/faad
d60 2
a61 1
			gmodule gtk gdk pthread-stubs xcb
a62 1

@


1.42
log
@Explicitely add libtool to BUILD_DEPENDS as bootstrap script checks for
libtoolize. Builds fine with ports libtool otherwise.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/06/14 17:44:46 sebastia Exp $
d40 1
a40 1
FLAVOR?=
@


1.41
log
@Fix build with gcc-2.95, bump pkgname
OKs from landry@@, jasper@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/04/08 07:17:21 jasper Exp $
d23 3
a25 1
BUILD_DEPENDS+=	${MODGNU_AUTOCONF_DEPENDS}
@


1.40
log
@- let faad install the mp4ff headers, as will be required by mpd
to handle aac/mp4 files.

from tobias ulmer.
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2009/08/10 06:29:52 kili Exp $
d7 2
a8 2
PKGNAME-main=	faad-${V}p0
PKGNAME-xmms=	faad-xmms-${V}p0
@


1.39
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2008/09/15 21:58:19 jakemsr Exp $
d7 1
a7 1
PKGNAME-main=	faad-${V}
d69 2
@


1.38
log
@- update to faad-2.6.1
- greatly simplify type-mismatch-correcting patches.  most of the
  mismatches actually match on size and signedness, so only fix the
  ones that don't match.  tested to work on sparc64 by naddy@@ a
  while back.
- libmp4v2 is no longer part of this package
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2008/07/25 20:25:59 sthen Exp $
d8 1
a8 1
PKGNAME-xmms=	faad-xmms-${V}
d55 1
a55 1
			gmodule gtk gdk
@


1.37
log
@shared library and PKGNAME bumps due to use of isinf/isnan/nan
following libc/libm changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2008/01/14 01:16:37 jakemsr Exp $
d3 1
a3 1
COMMENT-main=	MPEG2 and MPEG-4 AAC decoder
d5 4
a8 3
DISTNAME=	faad2-2.0
PKGNAME-main=	faad-2.0p7
PKGNAME-xmms=	faad-xmms-2.0p7
d10 3
a12 4
MASTER_SITES=	http://mirrors.protection.cx/~jolan/
SHARED_LIBS +=	faad                 1.0      # .0.0
SHARED_LIBS +=	mp4v2                2.0      # .0.0
SHARED_LIBS +=	mp4ff                0.0      # .0.0
d21 1
a21 1
WANTLIB=		m stdc++
d30 1
d34 2
a35 2
		AUTOCONF_VERSION=${AUTOCONF_VERSION}
CONFIGURE_ARGS+=--with-mp4v2
d51 1
a51 1
			faad,mp4v2::audio/faad
a62 3

pre-configure:
	@@perl -pi -e 's/--no-verify//g' ${WRKSRC}/configure
@


1.36
log
@
libxmms doesn't need libgthread.  the shn, sid, and faad xmms modules
don't need libgthread either.

ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2007/12/11 11:00:37 jakemsr Exp $
d6 1
a6 1
PKGNAME-main=	faad-2.0p6
d11 1
a11 1
SHARED_LIBS +=	mp4v2                1.0      # .0.0
@


1.35
log
@
libpthread doesn't need to be, and is no longer linked into
xmms modules.

adjust WANTLIBs, bump PKGNAMEs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2007/09/15 21:26:01 simon Exp $
d7 1
a7 1
PKGNAME-xmms=	faad-xmms-2.0p6
d54 1
a54 1
			gmodule gthread gtk gdk
@


1.34
log
@remove surrounding quotes from COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/06/29 06:01:42 jakemsr Exp $
d7 1
a7 1
PKGNAME-xmms=	faad-xmms-2.0p5
d53 2
a54 2
			X11 Xau Xdmcp Xext Xi pthread iconv intl glib \
			gmodule gtk gdk
@


1.33
log
@problem:
libfaad uses data types with machine dependent bit width in
prototypes in its public headers, but in the corresponding library
code, machine independent exact width data types are used.

solution:
change libfaad headers to use the same machine independent exact
width data types in the prototypes as in the library.  since the
prototypes in the library headers are changed, users of libfaad
likely need to be modified to use exact width data types as well.

also:
- bump libfaad major version number
- update plugin code to use exact width data types for libfaad
  interaction, as per new prototypes
- bump package version
- sync patches with update-patches


problem discovered by, solution discussed with, reviewed, tested
and OK naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/04/12 20:24:29 sturm Exp $
d3 2
a4 2
COMMENT-main=	"MPEG2 and MPEG-4 AAC decoder"
COMMENT-xmms=	"XMMS input plugin for AAC files"
d17 1
a17 1
PERMIT_PACKAGE_CDROM=	"Patents"
d19 1
a19 1
PERMIT_DISTFILES_CDROM=	"Patents"
@


1.32
log
@simple WANTLIB fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2006/11/25 17:04:32 espie Exp $
d6 2
a7 2
PKGNAME-main=	faad-2.0p5
PKGNAME-xmms=	faad-xmms-2.0p4
d10 1
a10 1
SHARED_LIBS +=	faad                 0.0      # .0.0
@


1.31
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2006/11/11 21:04:27 steven Exp $
d7 1
a7 1
PKGNAME-xmms=	faad-xmms-2.0p3
d53 2
a54 1
			X11 Xext Xi pthread iconv intl glib gmodule gtk gdk
@


1.30
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2006/10/28 10:30:41 espie Exp $
d3 1
a3 1
COMMENT=	"MPEG2 and MPEG-4 AAC decoder"
d6 1
a6 1
PKGNAME=	faad-2.0p4
d38 2
a39 1
MULTI_PACKAGES=
d43 4
d49 6
a54 1
SUBPACKAGE?=
a55 19
.if defined(PACKAGING)
. if ${SUBPACKAGE} == "-xmms"
LIB_DEPENDS=	xmms.>=3::audio/xmms \
		faad,mp4v2::audio/faad
RUN_DEPENDS=	::audio/xmms
WANTLIB+=	X11 Xext Xi pthread iconv intl glib gmodule gtk gdk
. else
WANTLIB+=	c
. endif
.else
. if ${MULTI_PACKAGES:M-xmms}
LIB_DEPENDS=	xmms.>=3::audio/xmms
BUILD_DEPENDS+=	::audio/xmms \
		::audio/id3lib
CONFIGURE_ARGS+= --with-xmms
. else
CONFIGURE_ARGS+= --without-xmms
. endif
.endif
@


1.29
log
@re-format SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2006/08/01 16:20:46 espie Exp $
d41 1
@


1.28
log
@new specs
missed audio files, and chinese.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/08/01 11:17:56 espie Exp $
d10 3
a12 3
SHARED_LIBS=	faad	0.0 \
		mp4ff	0.0 \
		mp4v2	1.0
@


1.27
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/07/03 15:55:24 ckuethe Exp $
d56 1
a56 1
LIB_DEPENDS=	xmms.3::audio/xmms
@


1.26
log
@Update HOMEPAGE, adjust license comment and bump patchlevel.
ok jolan, steven
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/03/23 17:21:28 jolan Exp $
d47 2
a48 2
LIB_DEPENDS=	xmms.3::audio/xmms \
		faad.0,mp4v2.0::audio/faad
@


1.25
log
@mirror is gone so replace it with another one, noticed by Rui Reis
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/02/08 04:54:48 david Exp $
d6 2
a7 2
PKGNAME=	faad-2.0p3
PKGNAME-xmms=	faad-xmms-2.0p2
d14 1
a14 1
HOMEPAGE=	http://faac.sourceforge.net/
d16 1
a16 1
# BSD
@


1.24
log
@move any perl or sed substitutions from post-patch to pre-configure
(fixes make update-patches)
ok sturm@@; "looks reasonable" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/01/13 19:12:15 espie Exp $
d9 1
a9 1
MASTER_SITES=	http://users.codefusionis.com/~jolan/
@


1.23
log
@Bump C++ shared libs numbers and corresponding package names,
handles a through databases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/01/10 11:14:49 espie Exp $
d69 2
@


1.22
log
@zap some MODGNU_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/12/30 16:41:06 naddy Exp $
d6 1
a6 1
PKGNAME=	faad-2.0p2
d12 1
a12 1
		mp4v2	0.0
@


1.21
log
@don't package a statically built "module"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/12/24 19:51:52 espie Exp $
a12 4

MODGNU_SHARED_LIBS=	faad	'' \
			mp4ff	'' \
			mp4v2	''
@


1.20
log
@SHARED_LIBS
fiddle a bit with xmms files so that make plist is happy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2005/11/16 07:57:31 jakemsr Exp $
d7 1
a7 1
PKGNAME-xmms=	faad-xmms-2.0p1
@


1.19
log
@- allow MODGNU_AUTOCONF_DEPENDS to be added to BUILD_DEPENDS
- fix obsolete packages-specs

OK and packages-specs hint wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/09/16 09:51:26 espie Exp $
d10 7
d64 2
@


1.18
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2005/01/11 07:16:01 sturm Exp $
d54 1
a54 1
BUILD_DEPENDS=	xmms-config::audio/xmms \
@


1.17
log
@use metaauto for automake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/01/05 11:40:04 alek Exp $
d6 1
a6 1
PKGNAME=	faad-2.0p1
@


1.16
log
@- Use internal libmp4v2 (doesn't build if external libmp4v2 is available)
- Better LIB_DEPENDS
- Fix WANTLIB
- Bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2004/12/13 05:40:55 jcs Exp $
d62 2
a63 1
		PATH=${PORTPATH} sh bootstrap
@


1.15
log
@some hackery to work around faad's system.h needing config.h
bump pkgname

"doowit" jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/12/09 04:57:56 jcs Exp $
d6 2
a7 2
PKGNAME=	faad-2.0p0
PKGNAME-xmms=	faad-xmms-2.0p0
d18 1
a18 1
WANTLIB=		c m stdc++
d45 1
a45 1
		faad::audio/faad
d47 3
a56 1
WANTLIB+=	X11 Xext Xi pthread
@


1.14
log
@enable xmms plugin as a subpackage

ok jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/11/21 17:51:44 espie Exp $
d6 2
a7 2
PKGNAME=	faad-2.0
PKGNAME-xmms=	faad-xmms-2.0
d62 6
@


1.13
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/04/28 13:05:01 jolan Exp $
d4 1
d7 1
d32 25
@


1.12
log
@the distfile makes our tar exit on error so i rerolled it but forgot
to change the master_sites, pointed out by jcs and naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/04/28 01:30:00 jolan Exp $
d16 1
@


1.11
log
@update to 2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/02/23 00:33:34 naddy Exp $
d7 1
a7 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=faac/}
@


1.10
log
@drop workarounds for gcc2.95/sparc64 bugs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/12/29 13:17:53 espie Exp $
d4 4
a8 3
DISTNAME=	faad2-1.1
PKGNAME=	faad-2.1.1
CATEGORIES=    	audio
d12 1
a12 1
PERMIT_PACKAGE_CDROM=	Patents
d14 1
a14 1
PERMIT_DISTFILES_CDROM=	Patents
d17 2
a18 5
MASTER_SITES=	http://faac.sourceforge.net/files/

LIB_DEPENDS=	sndfile:libsndfile->=1.0.1:audio/libsndfile

BUILD_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS}
d23 1
a23 1
AUTOCONF_VERSION=2.13
d28 1
a28 6

.include <bsd.own.mk>
USE_GCC3?=No
.if ${USE_GCC3:L} == "yes"
MAKE_FLAGS+=libmp4v2_la_LIBADD=-lsupc++
.endif
d33 1
@


1.9
log
@make it work with gcc3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/10/19 20:51:43 sturm Exp $
a29 4

.if ${MACHINE_ARCH} == "sparc64"
PATCH_LIST=	patch-* gcc-*
.endif
@


1.8
log
@set PATH in post-patch to find files if LOCALBASE is not part of user's PATH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2003/08/24 21:27:30 sturm Exp $
d33 6
@


1.7
log
@work around optimization bug on sparc64

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/05/19 00:10:36 naddy Exp $
d36 2
a37 1
	@@cd ${WRKSRC} && AUTOCONF_VERSION=${AUTOCONF_VERSION} sh bootstrap
@


1.6
log
@There is no reason we cannot put these up for FTP.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/02/15 16:42:22 espie Exp $
a19 1
AUTOCONF_VERSION=2.13
d30 4
@


1.5
log
@use MODGNU_AUTOCONF_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2003/02/15 14:19:19 espie Exp $
d12 1
a12 1
PERMIT_PACKAGE_FTP=	Patents
d14 1
a14 1
PERMIT_DISTFILES_FTP=	Patents
@


1.4
log
@explicit check for autoconf version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/12/20 23:40:13 naddy Exp $
d21 1
a21 1
BUILD_DEPENDS=	::devel/autoconf/${AUTOCONF_VERSION} ::devel/metaauto
d25 1
a25 1
CONFIGURE_STYLE= automake autoconf
@


1.3
log
@Fix dependencies, honor CFLAGS/CXXFLAGS throughout, general cleanup.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/11/20 08:16:07 pvalchev Exp $
d20 2
a21 1
BUILD_DEPENDS=	::devel/autoconf
d25 2
a26 1
CONFIGURE_STYLE= automake
d29 2
a30 1
		LIBS="-lm"
d33 1
a33 1
	@@cd ${WRKSRC} && sh bootstrap
@


1.2
log
@- Add USE_LIBTOOL since this port calls 'libtoolize' during its build stage
(and fails miserably if not installed)
- Enable this to build with new binutils - link with libm since
libsndfile uses fmod() and faad uses libsndfile...
ok biorn
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/11/13 17:50:13 espie Exp $
d6 1
d8 1
a8 4
HOMEPAGE=	http://faac.sourceforge.net
PKGNAME=	faad-2.1.1
WRKDIST=	${WRKDIR}/faad2
MAINTAINER=
d16 1
a16 2
CONFIGURE_ENV+= LDFLAGS="-L${LOCALBASE}/lib" CPPFLAGS="-I${LOCALBASE}/include" \
		LIBS="-lm"
d18 1
a18 1
LIB_DEPENDS=  sndfile:libsndfile->=1.0.1:audio/libsndfile
d20 2
a21 1
MASTER_SITES=	http://faac.sourceforge.net/files/
d23 1
d25 3
a27 2
USE_GMAKE=	Yes
USE_LIBTOOL=	Yes
d30 1
a30 1
	cd ${WRKSRC} && sh bootstrap
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d18 2
a19 1
CONFIGURE_ENV+= LDFLAGS="-L${LOCALBASE}/lib" CPPFLAGS="-I${LOCALBASE}/include"
d27 1
@


1.1.1.1
log
@faad 2 audio decoding library. From maintainer.
@
text
@@
