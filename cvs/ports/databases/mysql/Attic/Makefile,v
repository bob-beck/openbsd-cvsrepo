head	1.225;
access;
symbols
	OPENBSD_5_6:1.224.0.2
	OPENBSD_5_6_BASE:1.224
	OPENBSD_5_5:1.223.0.2
	OPENBSD_5_5_BASE:1.223
	OPENBSD_5_4:1.217.0.2
	OPENBSD_5_4_BASE:1.217
	OPENBSD_5_3:1.211.0.2
	OPENBSD_5_3_BASE:1.211
	OPENBSD_5_2:1.207.0.2
	OPENBSD_5_2_BASE:1.207
	OPENBSD_5_1_BASE:1.200
	OPENBSD_5_1:1.200.0.2
	OPENBSD_5_0:1.193.0.2
	OPENBSD_5_0_BASE:1.193
	OPENBSD_4_9:1.187.0.2
	OPENBSD_4_9_BASE:1.187
	OPENBSD_4_8:1.168.0.2
	OPENBSD_4_8_BASE:1.168
	OPENBSD_4_7:1.161.0.2
	OPENBSD_4_7_BASE:1.161
	OPENBSD_4_6:1.154.0.2
	OPENBSD_4_6_BASE:1.154
	OPENBSD_4_5:1.148.0.2
	OPENBSD_4_5_BASE:1.148
	OPENBSD_4_4:1.142.0.2
	OPENBSD_4_4_BASE:1.142
	OPENBSD_4_3:1.139.0.2
	OPENBSD_4_3_BASE:1.139
	OPENBSD_4_2:1.132.0.2
	OPENBSD_4_2_BASE:1.132
	OPENBSD_4_1:1.129.0.2
	OPENBSD_4_1_BASE:1.129
	OPENBSD_4_0:1.119.0.2
	OPENBSD_4_0_BASE:1.119
	OPENBSD_3_9:1.115.0.2
	OPENBSD_3_9_BASE:1.115
	OPENBSD_3_8:1.107.0.2
	OPENBSD_3_8_BASE:1.107
	OPENBSD_3_7:1.105.0.2
	OPENBSD_3_7_BASE:1.105
	OPENBSD_3_6:1.100.0.2
	OPENBSD_3_6_BASE:1.100
	OPENBSD_3_5:1.94.0.2
	OPENBSD_3_5_BASE:1.94
	OPENBSD_3_4:1.86.0.2
	OPENBSD_3_4_BASE:1.86
	OPENBSD_3_3:1.84.0.2
	OPENBSD_3_3_BASE:1.84
	OPENBSD_3_2:1.80.0.2
	OPENBSD_3_2_BASE:1.80
	OPENBSD_3_1:1.76.0.2
	OPENBSD_3_1_BASE:1.76
	OPENBSD_3_0:1.58.0.2
	OPENBSD_3_0_BASE:1.58
	OPENBSD_2_9_TRACKING_SWITCH:1.53
	OPENBSD_2_9:1.46.0.2
	OPENBSD_2_9_BASE:1.46
	OPENBSD_2_8:1.30.0.2
	OPENBSD_2_8_BASE:1.30
	OPENBSD_2_7:1.23.0.2
	OPENBSD_2_7_BASE:1.23
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	marc_1999-Mar-29:1.1.1.1
	marc:1.1.1;
locks; strict;
comment	@# @;


1.225
date	2014.10.03.10.54.55;	author brad;	state dead;
branches;
next	1.224;
commitid	l38yfxK2clf7O9UX;

1.224
date	2014.03.23.16.49.30;	author brad;	state Exp;
branches;
next	1.223;

1.223
date	2013.12.10.22.15.46;	author brad;	state Exp;
branches;
next	1.222;

1.222
date	2013.11.25.14.16.22;	author sthen;	state Exp;
branches;
next	1.221;

1.221
date	2013.10.04.07.09.17;	author giovanni;	state Exp;
branches;
next	1.220;

1.220
date	2013.09.04.19.16.59;	author brad;	state Exp;
branches;
next	1.219;

1.219
date	2013.08.07.23.38.55;	author brad;	state Exp;
branches;
next	1.218;

1.218
date	2013.08.07.15.37.08;	author naddy;	state Exp;
branches;
next	1.217;

1.217
date	2013.06.14.13.13.37;	author giovanni;	state Exp;
branches;
next	1.216;

1.216
date	2013.06.13.16.27.46;	author ajacoutot;	state Exp;
branches;
next	1.215;

1.215
date	2013.06.12.20.36.33;	author brad;	state Exp;
branches;
next	1.214;

1.214
date	2013.03.21.08.45.14;	author ajacoutot;	state Exp;
branches;
next	1.213;

1.213
date	2013.03.17.07.22.23;	author ajacoutot;	state Exp;
branches;
next	1.212;

1.212
date	2013.03.11.02.52.05;	author espie;	state Exp;
branches;
next	1.211;

1.211
date	2013.02.08.15.51.56;	author brad;	state Exp;
branches;
next	1.210;

1.210
date	2012.12.28.02.03.58;	author brad;	state Exp;
branches;
next	1.209;

1.209
date	2012.10.01.09.44.51;	author giovanni;	state Exp;
branches;
next	1.208;

1.208
date	2012.08.10.07.31.38;	author giovanni;	state Exp;
branches;
next	1.207;

1.207
date	2012.05.23.21.33.04;	author sthen;	state Exp;
branches
	1.207.2.1;
next	1.206;

1.206
date	2012.05.11.14.32.36;	author giovanni;	state Exp;
branches;
next	1.205;

1.205
date	2012.05.04.07.57.17;	author ajacoutot;	state Exp;
branches;
next	1.204;

1.204
date	2012.04.28.11.06.12;	author ajacoutot;	state Exp;
branches;
next	1.203;

1.203
date	2012.04.28.10.51.44;	author ajacoutot;	state Exp;
branches;
next	1.202;

1.202
date	2012.03.26.08.05.01;	author giovanni;	state Exp;
branches;
next	1.201;

1.201
date	2012.03.16.00.47.54;	author william;	state Exp;
branches;
next	1.200;

1.200
date	2012.01.26.22.08.26;	author naddy;	state Exp;
branches
	1.200.2.1;
next	1.199;

1.199
date	2011.12.05.16.42.07;	author naddy;	state Exp;
branches;
next	1.198;

1.198
date	2011.11.22.14.38.51;	author giovanni;	state Exp;
branches;
next	1.197;

1.197
date	2011.11.11.11.37.08;	author espie;	state Exp;
branches;
next	1.196;

1.196
date	2011.09.30.10.18.25;	author giovanni;	state Exp;
branches;
next	1.195;

1.195
date	2011.09.16.08.48.03;	author espie;	state Exp;
branches;
next	1.194;

1.194
date	2011.09.05.07.11.23;	author giovanni;	state Exp;
branches;
next	1.193;

1.193
date	2011.06.22.07.28.17;	author sthen;	state Exp;
branches;
next	1.192;

1.192
date	2011.06.02.13.41.36;	author ajacoutot;	state Exp;
branches;
next	1.191;

1.191
date	2011.05.27.21.07.00;	author sthen;	state Exp;
branches;
next	1.190;

1.190
date	2011.05.19.08.35.15;	author dcoppa;	state Exp;
branches;
next	1.189;

1.189
date	2011.03.08.10.46.31;	author ajacoutot;	state Exp;
branches;
next	1.188;

1.188
date	2011.03.06.16.54.38;	author ajacoutot;	state Exp;
branches;
next	1.187;

1.187
date	2011.01.11.11.03.03;	author ajacoutot;	state Exp;
branches;
next	1.186;

1.186
date	2011.01.05.16.05.54;	author ajacoutot;	state Exp;
branches;
next	1.185;

1.185
date	2011.01.04.16.03.00;	author ajacoutot;	state Exp;
branches;
next	1.184;

1.184
date	2010.12.27.14.50.22;	author ajacoutot;	state Exp;
branches;
next	1.183;

1.183
date	2010.12.26.08.23.17;	author ajacoutot;	state Exp;
branches;
next	1.182;

1.182
date	2010.12.24.10.40.04;	author ajacoutot;	state Exp;
branches;
next	1.181;

1.181
date	2010.12.13.16.13.04;	author ajacoutot;	state Exp;
branches;
next	1.180;

1.180
date	2010.12.12.20.18.40;	author jasper;	state Exp;
branches;
next	1.179;

1.179
date	2010.12.11.12.57.37;	author ajacoutot;	state Exp;
branches;
next	1.178;

1.178
date	2010.12.11.09.59.25;	author ajacoutot;	state Exp;
branches;
next	1.177;

1.177
date	2010.12.11.08.48.24;	author ajacoutot;	state Exp;
branches;
next	1.176;

1.176
date	2010.11.26.10.21.17;	author sthen;	state Exp;
branches;
next	1.175;

1.175
date	2010.11.15.00.22.51;	author espie;	state Exp;
branches;
next	1.174;

1.174
date	2010.11.10.21.03.03;	author sthen;	state Exp;
branches;
next	1.173;

1.173
date	2010.11.09.09.55.56;	author ajacoutot;	state Exp;
branches;
next	1.172;

1.172
date	2010.11.09.08.58.06;	author ajacoutot;	state Exp;
branches;
next	1.171;

1.171
date	2010.11.09.08.55.32;	author robert;	state Exp;
branches;
next	1.170;

1.170
date	2010.11.06.22.50.02;	author espie;	state Exp;
branches;
next	1.169;

1.169
date	2010.10.18.17.06.07;	author espie;	state Exp;
branches;
next	1.168;

1.168
date	2010.06.18.11.31.11;	author sthen;	state Exp;
branches;
next	1.167;

1.167
date	2010.06.07.21.52.34;	author sthen;	state Exp;
branches;
next	1.166;

1.166
date	2010.05.24.20.40.41;	author sthen;	state Exp;
branches;
next	1.165;

1.165
date	2010.04.27.11.03.52;	author sthen;	state Exp;
branches;
next	1.164;

1.164
date	2010.04.03.00.21.14;	author sthen;	state Exp;
branches;
next	1.163;

1.163
date	2010.03.21.09.04.10;	author sthen;	state Exp;
branches;
next	1.162;

1.162
date	2010.03.21.01.20.47;	author sthen;	state Exp;
branches;
next	1.161;

1.161
date	2010.01.01.19.54.33;	author ajacoutot;	state Exp;
branches
	1.161.2.1;
next	1.160;

1.160
date	2009.11.20.01.15.34;	author sthen;	state Exp;
branches;
next	1.159;

1.159
date	2009.10.23.08.04.50;	author giovanni;	state Exp;
branches;
next	1.158;

1.158
date	2009.09.21.13.10.18;	author sthen;	state Exp;
branches;
next	1.157;

1.157
date	2009.09.07.21.35.34;	author sthen;	state Exp;
branches;
next	1.156;

1.156
date	2009.08.05.14.24.33;	author sthen;	state Exp;
branches;
next	1.155;

1.155
date	2009.07.27.15.19.15;	author sthen;	state Exp;
branches;
next	1.154;

1.154
date	2009.06.13.21.51.30;	author sthen;	state Exp;
branches
	1.154.2.1;
next	1.153;

1.153
date	2009.05.29.08.42.06;	author sthen;	state Exp;
branches;
next	1.152;

1.152
date	2009.05.03.12.19.09;	author sthen;	state Exp;
branches;
next	1.151;

1.151
date	2009.03.19.22.51.01;	author martynas;	state Exp;
branches;
next	1.150;

1.150
date	2009.03.17.11.26.14;	author sthen;	state Exp;
branches;
next	1.149;

1.149
date	2009.03.08.10.51.32;	author sthen;	state Exp;
branches;
next	1.148;

1.148
date	2009.02.17.10.46.59;	author sthen;	state Exp;
branches
	1.148.2.1;
next	1.147;

1.147
date	2009.02.02.15.54.19;	author jasper;	state Exp;
branches;
next	1.146;

1.146
date	2009.01.07.22.54.15;	author sthen;	state Exp;
branches;
next	1.145;

1.145
date	2008.12.28.19.45.17;	author sthen;	state Exp;
branches;
next	1.144;

1.144
date	2008.09.17.13.54.54;	author ajacoutot;	state Exp;
branches;
next	1.143;

1.143
date	2008.08.24.08.40.02;	author brad;	state Exp;
branches;
next	1.142;

1.142
date	2008.07.25.20.25.59;	author sthen;	state Exp;
branches;
next	1.141;

1.141
date	2008.05.23.14.38.08;	author sthen;	state Exp;
branches;
next	1.140;

1.140
date	2008.05.23.12.05.47;	author sthen;	state Exp;
branches;
next	1.139;

1.139
date	2008.02.11.01.03.34;	author sthen;	state Exp;
branches;
next	1.138;

1.138
date	2008.01.18.20.34.14;	author merdely;	state Exp;
branches;
next	1.137;

1.137
date	2008.01.04.17.48.34;	author espie;	state Exp;
branches;
next	1.136;

1.136
date	2007.12.28.22.15.19;	author espie;	state Exp;
branches;
next	1.135;

1.135
date	2007.11.01.23.54.54;	author merdely;	state Exp;
branches;
next	1.134;

1.134
date	2007.09.15.22.27.39;	author simon;	state Exp;
branches;
next	1.133;

1.133
date	2007.09.01.20.11.21;	author kili;	state Exp;
branches;
next	1.132;

1.132
date	2007.08.08.21.33.51;	author robert;	state Exp;
branches;
next	1.131;

1.131
date	2007.06.07.20.35.35;	author ckuethe;	state Exp;
branches;
next	1.130;

1.130
date	2007.04.09.22.43.06;	author ckuethe;	state Exp;
branches;
next	1.129;

1.129
date	2007.01.25.07.41.48;	author jakob;	state Exp;
branches;
next	1.128;

1.128
date	2006.12.07.11.42.37;	author bernd;	state Exp;
branches;
next	1.127;

1.127
date	2006.11.26.11.08.32;	author espie;	state Exp;
branches;
next	1.126;

1.126
date	2006.10.29.20.28.24;	author brad;	state Exp;
branches;
next	1.125;

1.125
date	2006.10.28.15.28.35;	author brad;	state Exp;
branches;
next	1.124;

1.124
date	2006.10.28.11.19.20;	author espie;	state Exp;
branches;
next	1.123;

1.123
date	2006.10.23.03.18.09;	author brad;	state Exp;
branches;
next	1.122;

1.122
date	2006.10.18.18.35.48;	author bernd;	state Exp;
branches;
next	1.121;

1.121
date	2006.10.14.05.04.54;	author brad;	state Exp;
branches;
next	1.120;

1.120
date	2006.10.03.04.52.03;	author brad;	state Exp;
branches;
next	1.119;

1.119
date	2006.06.02.18.34.12;	author bernd;	state Exp;
branches
	1.119.2.1;
next	1.118;

1.118
date	2006.05.10.03.21.30;	author brad;	state Exp;
branches;
next	1.117;

1.117
date	2006.04.30.20.55.44;	author brad;	state Exp;
branches;
next	1.116;

1.116
date	2006.03.10.23.51.53;	author brad;	state Exp;
branches;
next	1.115;

1.115
date	2006.01.13.19.12.16;	author espie;	state Exp;
branches
	1.115.2.1;
next	1.114;

1.114
date	2006.01.06.00.13.26;	author brad;	state Exp;
branches;
next	1.113;

1.113
date	2005.12.26.21.32.01;	author sturm;	state Exp;
branches;
next	1.112;

1.112
date	2005.12.12.04.55.43;	author brad;	state Exp;
branches;
next	1.111;

1.111
date	2005.12.10.00.19.09;	author pvalchev;	state Exp;
branches;
next	1.110;

1.110
date	2005.10.16.18.16.27;	author wilfried;	state Exp;
branches;
next	1.109;

1.109
date	2005.10.07.22.48.42;	author brad;	state Exp;
branches;
next	1.108;

1.108
date	2005.09.04.22.51.24;	author brad;	state Exp;
branches;
next	1.107;

1.107
date	2005.03.30.03.07.52;	author brad;	state Exp;
branches
	1.107.2.1;
next	1.106;

1.106
date	2005.03.23.03.47.20;	author brad;	state Exp;
branches;
next	1.105;

1.105
date	2005.01.25.16.01.07;	author alek;	state Exp;
branches;
next	1.104;

1.104
date	2005.01.20.03.00.00;	author brad;	state Exp;
branches;
next	1.103;

1.103
date	2005.01.14.01.42.58;	author brad;	state Exp;
branches;
next	1.102;

1.102
date	2004.11.22.16.59.29;	author espie;	state Exp;
branches;
next	1.101;

1.101
date	2004.10.20.07.38.50;	author brad;	state Exp;
branches;
next	1.100;

1.100
date	2004.06.24.06.35.51;	author brad;	state Exp;
branches;
next	1.99;

1.99
date	2004.05.21.12.16.21;	author brad;	state Exp;
branches;
next	1.98;

1.98
date	2004.05.16.09.01.15;	author brad;	state Exp;
branches;
next	1.97;

1.97
date	2004.05.16.04.30.39;	author brad;	state Exp;
branches;
next	1.96;

1.96
date	2004.04.16.00.14.03;	author brad;	state Exp;
branches;
next	1.95;

1.95
date	2004.03.31.04.06.20;	author pvalchev;	state Exp;
branches;
next	1.94;

1.94
date	2004.03.10.20.28.07;	author pvalchev;	state Exp;
branches
	1.94.2.1;
next	1.93;

1.93
date	2004.02.25.08.21.18;	author brad;	state Exp;
branches;
next	1.92;

1.92
date	2004.02.22.01.20.11;	author brad;	state Exp;
branches;
next	1.91;

1.91
date	2004.02.04.07.39.18;	author sturm;	state Exp;
branches;
next	1.90;

1.90
date	2004.01.06.14.13.03;	author espie;	state Exp;
branches;
next	1.89;

1.89
date	2003.12.30.20.42.48;	author wilfried;	state Exp;
branches;
next	1.88;

1.88
date	2003.12.30.05.57.30;	author brad;	state Exp;
branches;
next	1.87;

1.87
date	2003.12.28.22.17.50;	author espie;	state Exp;
branches;
next	1.86;

1.86
date	2003.08.27.00.14.49;	author brad;	state Exp;
branches
	1.86.2.1;
next	1.85;

1.85
date	2003.08.26.15.37.18;	author brad;	state Exp;
branches;
next	1.84;

1.84
date	2003.01.29.16.35.55;	author brad;	state Exp;
branches
	1.84.2.1;
next	1.83;

1.83
date	2002.12.14.23.56.43;	author brad;	state Exp;
branches;
next	1.82;

1.82
date	2002.11.15.23.37.55;	author brad;	state Exp;
branches;
next	1.81;

1.81
date	2002.11.14.03.51.45;	author brad;	state Exp;
branches;
next	1.80;

1.80
date	2002.07.11.15.42.17;	author brad;	state Exp;
branches
	1.80.2.1;
next	1.79;

1.79
date	2002.05.20.03.26.27;	author brad;	state Exp;
branches;
next	1.78;

1.78
date	2002.05.13.18.50.38;	author espie;	state Exp;
branches;
next	1.77;

1.77
date	2002.05.02.03.04.14;	author brad;	state Exp;
branches;
next	1.76;

1.76
date	2002.03.19.19.11.39;	author brad;	state Exp;
branches
	1.76.2.1;
next	1.75;

1.75
date	2002.03.16.16.44.10;	author brad;	state Exp;
branches;
next	1.74;

1.74
date	2002.03.12.03.10.06;	author brad;	state Exp;
branches;
next	1.73;

1.73
date	2002.03.03.06.02.11;	author brad;	state Exp;
branches;
next	1.72;

1.72
date	2002.02.20.18.03.32;	author brad;	state Exp;
branches;
next	1.71;

1.71
date	2002.02.19.03.58.57;	author brad;	state Exp;
branches;
next	1.70;

1.70
date	2002.02.18.03.25.33;	author brad;	state Exp;
branches;
next	1.69;

1.69
date	2002.02.13.19.19.36;	author brad;	state Exp;
branches;
next	1.68;

1.68
date	2002.02.10.04.25.27;	author brad;	state Exp;
branches;
next	1.67;

1.67
date	2002.02.10.03.49.53;	author brad;	state Exp;
branches;
next	1.66;

1.66
date	2002.02.09.00.50.14;	author brad;	state Exp;
branches;
next	1.65;

1.65
date	2002.02.06.00.48.15;	author brad;	state Exp;
branches;
next	1.64;

1.64
date	2002.01.11.16.50.30;	author brad;	state Exp;
branches;
next	1.63;

1.63
date	2002.01.06.07.06.25;	author brad;	state Exp;
branches;
next	1.62;

1.62
date	2001.12.29.17.56.56;	author brad;	state Exp;
branches;
next	1.61;

1.61
date	2001.12.22.03.54.44;	author brad;	state Exp;
branches;
next	1.60;

1.60
date	2001.11.11.13.57.32;	author heko;	state Exp;
branches;
next	1.59;

1.59
date	2001.10.28.13.09.45;	author espie;	state Exp;
branches;
next	1.58;

1.58
date	2001.10.06.03.55.34;	author brad;	state Exp;
branches;
next	1.57;

1.57
date	2001.09.28.17.43.01;	author brad;	state Exp;
branches;
next	1.56;

1.56
date	2001.09.28.06.02.13;	author pvalchev;	state Exp;
branches;
next	1.55;

1.55
date	2001.09.10.02.59.35;	author brad;	state Exp;
branches;
next	1.54;

1.54
date	2001.08.30.02.10.40;	author brad;	state Exp;
branches;
next	1.53;

1.53
date	2001.08.14.02.06.29;	author brad;	state Exp;
branches;
next	1.52;

1.52
date	2001.08.12.22.48.37;	author brad;	state Exp;
branches;
next	1.51;

1.51
date	2001.07.22.22.25.51;	author brad;	state Exp;
branches;
next	1.50;

1.50
date	2001.07.22.20.35.29;	author brad;	state Exp;
branches;
next	1.49;

1.49
date	2001.06.15.19.10.11;	author brad;	state Exp;
branches;
next	1.48;

1.48
date	2001.06.03.01.20.02;	author brad;	state Exp;
branches;
next	1.47;

1.47
date	2001.06.02.20.18.43;	author brad;	state Exp;
branches;
next	1.46;

1.46
date	2001.04.20.13.49.38;	author brad;	state Exp;
branches;
next	1.45;

1.45
date	2001.04.13.18.15.46;	author brad;	state Exp;
branches;
next	1.44;

1.44
date	2001.04.07.04.09.53;	author brad;	state Exp;
branches;
next	1.43;

1.43
date	2001.04.07.03.26.49;	author brad;	state Exp;
branches;
next	1.42;

1.42
date	2001.03.28.22.12.18;	author brad;	state Exp;
branches;
next	1.41;

1.41
date	2001.03.27.00.04.28;	author brad;	state Exp;
branches;
next	1.40;

1.40
date	2001.03.24.22.07.08;	author brad;	state Exp;
branches;
next	1.39;

1.39
date	2001.03.24.21.47.12;	author brad;	state Exp;
branches;
next	1.38;

1.38
date	2001.03.17.18.26.39;	author brad;	state Exp;
branches;
next	1.37;

1.37
date	2001.03.16.21.14.42;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2001.03.12.22.30.59;	author brad;	state Exp;
branches;
next	1.35;

1.35
date	2001.03.12.00.10.26;	author brad;	state Exp;
branches;
next	1.34;

1.34
date	2001.02.14.00.55.40;	author brad;	state Exp;
branches;
next	1.33;

1.33
date	2001.02.13.21.03.42;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	2001.01.23.00.48.45;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2001.01.21.17.09.12;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2000.09.24.07.04.02;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2000.08.23.01.21.11;	author brad;	state Exp;
branches;
next	1.28;

1.28
date	2000.08.15.18.24.24;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2000.08.15.13.24.00;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2000.07.28.22.04.25;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2000.07.04.02.49.34;	author krw;	state Exp;
branches;
next	1.24;

1.24
date	2000.06.25.04.53.10;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2000.04.08.05.40.07;	author brad;	state Exp;
branches
	1.23.2.1;
next	1.22;

1.22
date	2000.04.07.19.07.20;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2000.03.31.06.10.35;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2000.03.24.22.11.38;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2000.03.03.11.32.22;	author turan;	state Exp;
branches;
next	1.18;

1.18
date	2000.02.16.19.01.20;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2000.02.15.07.36.39;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2000.02.14.22.32.08;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2000.02.14.21.28.05;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2000.02.11.07.56.30;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2000.02.11.07.42.07;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2000.01.13.20.24.57;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2000.01.05.06.13.43;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2000.01.04.17.39.42;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2000.01.03.08.36.19;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2000.01.01.05.54.12;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.12.02.03.47.36;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.06.03.14.06.32;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.05.11.21.25.17;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.04.01.06.20.05;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.04.01.03.06.51;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.04.01.00.27.02;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	99.03.30.06.42.47;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.03.30.06.42.47;	author marc;	state Exp;
branches;
next	;

1.23.2.1
date	2000.09.15.04.47.47;	author marc;	state Exp;
branches;
next	;

1.76.2.1
date	2002.12.16.17.57.07;	author brad;	state Exp;
branches;
next	1.76.2.2;

1.76.2.2
date	2003.01.30.04.45.54;	author brad;	state Exp;
branches;
next	;

1.80.2.1
date	2002.12.16.21.12.03;	author brad;	state Exp;
branches;
next	1.80.2.2;

1.80.2.2
date	2003.01.30.15.44.54;	author brad;	state Exp;
branches;
next	1.80.2.3;

1.80.2.3
date	2003.09.01.22.54.03;	author brad;	state Exp;
branches;
next	;

1.84.2.1
date	2003.09.03.00.26.22;	author brad;	state Exp;
branches;
next	1.84.2.2;

1.84.2.2
date	2003.12.30.01.18.14;	author brad;	state Exp;
branches;
next	;

1.86.2.1
date	2003.12.30.01.20.16;	author brad;	state Exp;
branches;
next	1.86.2.2;

1.86.2.2
date	2004.04.16.00.21.18;	author brad;	state Exp;
branches;
next	1.86.2.3;

1.86.2.3
date	2004.08.23.17.36.11;	author robert;	state Exp;
branches;
next	;

1.94.2.1
date	2004.05.06.00.59.30;	author brad;	state Exp;
branches;
next	1.94.2.2;

1.94.2.2
date	2004.08.23.17.34.57;	author robert;	state Exp;
branches;
next	;

1.107.2.1
date	2006.05.14.07.43.33;	author sturm;	state Exp;
branches;
next	;

1.115.2.1
date	2006.05.14.07.19.51;	author sturm;	state Exp;
branches;
next	1.115.2.2;

1.115.2.2
date	2006.06.04.20.40.26;	author sturm;	state Exp;
branches;
next	1.115.2.3;

1.115.2.3
date	2006.10.04.16.29.15;	author sturm;	state Exp;
branches;
next	;

1.119.2.1
date	2006.11.01.13.03.06;	author sturm;	state Exp;
branches;
next	;

1.148.2.1
date	2009.06.28.03.38.54;	author william;	state Exp;
branches;
next	;

1.154.2.1
date	2009.11.07.18.04.19;	author william;	state Exp;
branches;
next	1.154.2.2;

1.154.2.2
date	2009.11.21.18.00.45;	author william;	state Exp;
branches;
next	1.154.2.3;

1.154.2.3
date	2010.01.31.01.24.56;	author william;	state Exp;
branches;
next	;

1.161.2.1
date	2010.05.29.01.06.16;	author william;	state Exp;
branches;
next	;

1.200.2.1
date	2012.04.12.09.01.40;	author jasper;	state Exp;
branches;
next	1.200.2.2;

1.200.2.2
date	2012.05.04.10.29.21;	author jasper;	state Exp;
branches;
next	1.200.2.3;

1.200.2.3
date	2012.05.14.07.43.32;	author jasper;	state Exp;
branches;
next	;

1.207.2.1
date	2013.01.05.03.04.45;	author brad;	state Exp;
branches;
next	;


desc
@@


1.225
log
@So long and into the Attic you go.

ok sthen@@
@
text
@# $OpenBSD: Makefile,v 1.224 2014/03/23 16:49:30 brad Exp $

SHARED_ONLY=	Yes

COMMENT-main=	multithreaded SQL database (client)
COMMENT-server=	multithreaded SQL database (server)
COMMENT-tests=	multithreaded SQL database (regression test suite/benchmark)

VERSION=	5.1.73
DISTNAME=	mysql-${VERSION}
PKGNAME-main=	mysql-client-${VERSION}
PKGNAME-server=	mysql-server-${VERSION}
PKGNAME-tests= 	mysql-tests-${VERSION}
CATEGORIES=	databases
V=		MySQL-5.1
MASTER_SITES=	${MASTER_SITE_MYSQL:=Downloads/$V/}

REVISION-server= 0
EPOCH-main=	0
EPOCH-server=	0
EPOCH-tests=	0

SHARED_LIBS=	mysqlclient_r	23.0 \
		mysqlclient	23.0

HOMEPAGE=	http://www.mysql.com/

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes
WANTLIB=		c m pthread

LOCALSTATEDIR=	${BASELOCALSTATEDIR}/mysql
SOCKET_DIR=	/var/run/mysql
SUBST_VARS=	SOCKET_DIR

MULTI_PACKAGES=		-main -server -tests

# Suggested flags for the C compiler, needed for
# high load servers otherwise MySQL will crash.
CXX=		${CC}
CXXFLAGS=	${CFLAGS} -felide-constructors -fno-exceptions -fno-rtti

USE_GROFF=	Yes
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.63
CONFIGURE_ARGS+= ${CONFIGURE_SHARED}
CONFIGURE_ARGS+= --with-big-tables \
		 --with-client-ldflags=-lsupc++ \
		 --with-comment='OpenBSD port: ${FULLPKGNAME-server}' \
		 --with-low-memory \
		 --with-mysqld-ldflags=-lsupc++ \
		 --with-mysqld-user="_mysql" \
		 --with-plugins=max-no-ndb \
		 --with-ssl=/usr \
		 --with-unix-socket-path="${SOCKET_DIR}/mysql.sock" \
		 --without-docs \
		 --without-readline

. if ${MACHINE_ARCH} == "i386"
CONFIGURE_ARGS+= --enable-assembler
.endif

RUN_DEPENDS-server=	${BASE_PKGPATH}>=5.1v0,<5.2v0 \
			databases/p5-DBD-mysql
LIB_DEPENDS-server=	${BASE_PKGPATH}>=5.1v0,<5.2v0

WANTLIB-server=		${WANTLIB} crypto mysqlclient ssl z
WANTLIB-main=		${WANTLIB} crypto ncursesw readline ssl z
WANTLIB-tests=		${WANTLIB}

TEST_TARGET=		test-force

post-install:
	cd ${PREFIX}/lib && \
		ln -sf mysql/libmysqlclient.so.${LIBmysqlclient_VERSION} . && \
		ln -sf mysql/libmysqlclient_r.so.${LIBmysqlclient_r_VERSION} .
	${INSTALL_DATA} ${WRKSRC}/Docs/mysql.info ${PREFIX}/info

.include <bsd.port.mk>
@


1.224
log
@Disable the TCP wrappers support.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.223 2013/12/10 22:15:46 brad Exp $
@


1.223
log
@Update to MySQL 5.1.73.

ok giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.222 2013/11/25 14:16:22 sthen Exp $
d18 1
a51 1
		 --with-libwrap \
d69 1
a69 1
WANTLIB-server=		${WANTLIB} crypto mysqlclient ssl wrap z
@


1.222
log
@kill VMEM_WARNING
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.221 2013/10/04 07:09:17 giovanni Exp $
d9 1
a9 1
VERSION=	5.1.72
@


1.221
log
@
Update to 5.1.72,
some innodb related bugs has been fixed.
Full changelog available at:
http://dev.mysql.com/doc/relnotes/mysql/5.1/en/news-5-1-72.html

ok brad@@ (Mantainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.220 2013/09/04 19:16:59 brad Exp $
a42 2

VMEM_WARNING=	Yes
@


1.220
log
@- Remove some unnecessary patching
- Mention the rc script in mysql_install_db
- Move the removal of the plugins subdir to the correct PLIST

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.219 2013/08/07 23:38:55 brad Exp $
d9 1
a9 1
VERSION=	5.1.71
a17 2
REVISION-main=	0
REVISION-server= 0
@


1.219
log
@Update to MySQL 5.1.71.

ok giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.218 2013/08/07 15:37:08 naddy Exp $
d18 2
@


1.218
log
@kill direct and indirect references to GCC2_ARCHS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.217 2013/06/14 13:13:37 giovanni Exp $
d9 1
a9 1
VERSION=	5.1.70
d51 1
d55 1
d61 1
a61 3
		 --without-readline \
		 --with-client-ldflags=-lsupc++ \
		 --with-mysqld-ldflags=-lsupc++
@


1.217
log
@
Update to 5.1.70
fixes lot of memory leaks and other bugs.
Full changelog available at http://dev.mysql.com/doc/relnotes/mysql/5.1/en/news-5-1-70.html

Take care to this change:
The url columns in the mysql database help tables were too short to hold some of the URLs in the help content.
For upgrades, mysql_upgrade does not update the columns. Modify them manually using these statements:

ALTER TABLE mysql.help_category MODIFY url TEXT NOT NULL;
ALTER TABLE mysql.help_topic MODIFY url TEXT NOT NULL;

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.216 2013/06/13 16:27:46 ajacoutot Exp $
d59 2
a60 6
		 --without-readline

.include <bsd.port.arch.mk>

.if ${PROPERTIES:Mgcc[34]}
CONFIGURE_ARGS+= --with-client-ldflags=-lsupc++ \
a61 1
.endif
@


1.216
log
@Unbreak packaging, pkgspec didn't match after EPOCH was bumped.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.215 2013/06/12 20:36:33 brad Exp $
d9 1
a9 1
VERSION=	5.1.68
a16 2

REVISION-server=0
@


1.215
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.214 2013/03/21 08:45:14 ajacoutot Exp $
d18 2
d74 1
a74 1
RUN_DEPENDS-server=	${BASE_PKGPATH}>=5.1,<5.2 \
d76 1
a76 1
LIB_DEPENDS-server=	${BASE_PKGPATH}>=5.1,<5.2
@


1.214
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.213 2013/03/17 07:22:23 ajacoutot Exp $
d18 3
a20 1
REVISION-server=0
d22 2
a23 2
SHARED_LIBS=	mysqlclient_r	21.0 \
		mysqlclient	21.0
@


1.213
log
@Document accessing the MySQL socket from within a chrooted application.
(e.g. php)

ok brad@@ sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.212 2013/03/11 02:52:05 espie Exp $
a43 1
USE_LIBTOOL=	Yes
@


1.212
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.211 2013/02/08 15:51:56 brad Exp $
d17 2
@


1.211
log
@Update to MySQL 5.1.68.

ok giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.210 2012/12/28 02:03:58 brad Exp $
a26 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d77 1
a77 1
REGRESS_TARGET=		test-force
@


1.210
log
@Update to MySQL 5.1.67.

ok giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.209 2012/10/01 09:44:51 giovanni Exp $
d9 1
a9 1
VERSION=	5.1.67
@


1.209
log
@
Update to 5.1.66,
full Changelog available at http://dev.mysql.com/doc/refman/5.1/en/news-5-1-66.html
ok Brad (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.208 2012/08/10 07:31:38 giovanni Exp $
d9 1
a9 1
VERSION=	5.1.66
@


1.208
log
@
Bugfix update to 5.1.65
ok Brad (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.207 2012/05/23 21:33:04 sthen Exp $
d9 1
a9 1
VERSION=	5.1.65
@


1.207
log
@Stop recommending that people use mysqld_safe(1) directly, the rc script
is preferred. Adjust some wording in the paragraph about login classes while
there. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.206 2012/05/11 14:32:36 giovanni Exp $
d9 1
a9 1
VERSION=	5.1.63
a12 1
REVISION-server= 0
@


1.207.2.1
log
@MFC:

Update to MySQL 5.1.67.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.207 2012/05/23 21:33:04 sthen Exp $
d9 1
a9 1
VERSION=	5.1.67
d13 1
@


1.206
log
@
Update to 5.1.63
from Brad (Maintainer)
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2012/05/04 07:57:17 ajacoutot Exp $
d13 1
@


1.205
log
@SECURITY patches for bugs #64884 and #59387.
-> fixes a nasty issue where one could get access using any password by
   repeating connection attempts

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2012/04/28 11:06:12 ajacoutot Exp $
d9 1
a9 1
VERSION=	5.1.62
a17 3
REVISION-main=	1
REVISION-server=1

d34 1
a34 1
SUBST_VARS=	LOCALSTATEDIR SOCKET_DIR VERSION
@


1.204
log
@Use LOCALSTATEDIR instead of local variables.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2012/04/28 10:51:44 ajacoutot Exp $
d18 2
a19 2
REVISION-main=	0
REVISION-server=0
@


1.203
log
@Use LOCALSTATEDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2012/03/26 08:05:01 giovanni Exp $
d18 3
d35 1
a35 1
DB_DIR?=	/var/mysql
d37 1
a37 1
SUBST_VARS=	DB_DIR SOCKET_DIR VERSION
a46 2

LOCALSTATEDIR=	${DB_DIR}
@


1.202
log
@
Update to 5.1.62, fixes 2 security bugs and other things
ok Brad (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2012/03/16 00:47:54 william Exp $
d45 2
d52 1
a52 2
CONFIGURE_ARGS+= --localstatedir="${DB_DIR}" \
		 --with-big-tables \
@


1.201
log
@fix typo in readme; ok brad sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2012/01/26 22:08:26 naddy Exp $
d9 1
a9 1
VERSION=	5.1.60
a13 2
REVISION-main=	0
REVISION-server=0
d81 2
a87 3

do-regress:
	@@cd ${WRKSRC}/mysql-test && ./mysql-test-run --force
@


1.200
log
@Belatedly bump versions for libraries we know had symbol changes due
to the addition of stpcpy().  Prodded by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2011/12/05 16:42:07 naddy Exp $
d15 1
@


1.200.2.1
log
@- update to 5.1.62
includes two security fixes

ok brad (MAINTAINER) giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2012/03/26 08:05:01 giovanni Exp $
d9 1
a9 1
VERSION=	5.1.62
d14 1
a81 2
REGRESS_TARGET=		test-force

d87 3
@


1.200.2.2
log
@SECURITY patches for bugs #64884 and #59387.
-> fixes a nasty issue where one could get access using any password by
repeating connection attempts
                                                                                from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200.2.1 2012/04/12 09:01:40 jasper Exp $
a16 3

REVISION-main=	0
REVISION-server=0
@


1.200.2.3
log
@- update to 5.1.63

prompted by brad (MAINTAINER
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200.2.2 2012/05/04 10:29:21 jasper Exp $
d9 1
a9 1
VERSION=	5.1.63
d17 3
@


1.199
log
@remove obsolete workaround for alpha/gcc3; ok Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2011/11/22 14:38:51 giovanni Exp $
d14 1
d19 2
a20 2
SHARED_LIBS=	mysqlclient_r	20.0 \
		mysqlclient	20.0
@


1.198
log
@
Update to 5.1.60
hints and ok Brad (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2011/11/11 11:37:08 espie Exp $
a37 7
.include <bsd.port.arch.mk>

# XXX gcc bug, gcc/3.3.5
.if ${MACHINE_ARCH} == "alpha" && !${PROPERTIES:Mgcc4}
CFLAGS+=	-mbwx
.endif

d61 2
@


1.197
log
@switch to bsd.port.arch.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2011/09/30 10:18:25 giovanni Exp $
d9 1
a9 1
VERSION=	5.1.59
@


1.196
log
@
Update to 5.1.59
ok Brad (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2011/09/16 08:48:03 espie Exp $
d36 3
a38 1
.include <bsd.own.mk>
d41 1
a41 1
.if ${MACHINE_ARCH} == "alpha" && ${COMPILER_VERSION} != "gcc4"
d69 1
a69 1
.if ${COMPILER_VERSION:L:Mgcc[34]}
a76 2

MULTI_PACKAGES=		-main -server -tests
@


1.195
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2011/09/05 07:11:23 giovanni Exp $
d9 1
a9 1
VERSION=	5.1.58
a16 1
REVISION-server = 0
@


1.194
log
@
Update to 5.1.58
help and ok Brad (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2011/06/22 07:28:17 sthen Exp $
d17 1
@


1.193
log
@Make the cap_mkdb example test existence of login.conf.db before creating
it. Ok aja@@ landry@@, maintainer timeout.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2011/06/02 13:41:36 ajacoutot Exp $
d9 1
a9 1
VERSION=	5.1.54
a11 1
REVISION-main=	0
a12 1
REVISION-server=9
d18 2
a19 2
SHARED_LIBS=	mysqlclient_r		20.0 \
		mysqlclient		20.0
d36 2
d39 1
a39 1
.if ${MACHINE_ARCH} == "alpha"
a66 2
.include <bsd.own.mk>

d82 1
a82 1
WANTLIB-server=		${WANTLIB} crypto mysqlclient ssl stdc++ wrap z
@


1.192
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2011/05/27 21:07:00 sthen Exp $
d14 1
a14 1
REVISION-server=8
@


1.191
log
@switch to new *_DEPENDS format, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2011/05/19 08:35:15 dcoppa Exp $
d14 1
a14 1
REVISION-server=7
@


1.190
log
@Fix floating point string printing in MySQL status output
(MySQL Bug #61205)

OK Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.189 2011/03/08 10:46:31 ajacoutot Exp $
d14 1
a14 1
REVISION-server=6
d80 1
a80 1
RUN_DEPENDS-server=	mysql-client->=5.1,<5.2:${BASE_PKGPATH} \
d82 1
a82 1
LIB_DEPENDS-server=	mysql-client->=5.1,<5.2:${BASE_PKGPATH}
@


1.189
log
@Simplify: 'mysqladmin -s ping' is not good enough for rc_check because
while the daemon is shutting down, the access will be denied but the
process will still exists until it has shutdown completely.
This allows restart to work properly.

discussed with and ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2011/03/06 16:54:38 ajacoutot Exp $
d14 1
a14 1
REVISION-server=5
@


1.188
log
@No need to override rc_start() anymore, just use rc_bg.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2011/01/11 11:03:03 ajacoutot Exp $
d14 1
a14 1
REVISION-server=4
@


1.187
log
@Revert local patches that reverted a commit that broken MySQL on OpenBSD
64-bit archs and apply a patch from upstream to properly fix the
regression.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2011/01/05 16:05:54 ajacoutot Exp $
d14 1
a14 1
REVISION-server=3
@


1.186
log
@Make use of rcexec.
While here, force postgresql to quit in rc_stop, ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2011/01/04 16:03:00 ajacoutot Exp $
d12 1
d14 1
a18 2

REVISION-server=2
@


1.185
log
@Cope with recent class handling in rc.subr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2010/12/27 14:50:22 ajacoutot Exp $
d18 1
a18 1
REVISION-server=1
@


1.184
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2010/12/26 08:23:17 ajacoutot Exp $
d18 1
a18 1
REVISION-server=0
@


1.183
log
@Update to mysql-5.1.54.
More details at:
http://dev.mysql.com/doc/refman/5.1/en/news-5-1-54.html

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2010/12/24 10:40:04 ajacoutot Exp $
d17 2
@


1.182
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2010/12/13 16:13:04 ajacoutot Exp $
d9 1
a9 3
REVISION-server=5

VERSION=	5.1.53
@


1.181
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2010/12/12 20:18:40 jasper Exp $
d9 1
a9 1
REVISION-server=4
@


1.180
log
@- unbreak rc_stop()

from frantisek holop, ok brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2010/12/11 12:57:37 ajacoutot Exp $
d9 1
a9 1
REVISION-server=3
@


1.179
log
@Move these to rc_reload=NO.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2010/12/11 09:59:25 ajacoutot Exp $
d9 1
a9 1
REVISION-server=2
@


1.178
log
@Cope again with rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2010/12/11 08:48:24 ajacoutot Exp $
d9 1
a9 1
REVISION-server=1
@


1.177
log
@Adapt to new rc_start and fix RCS Id.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2010/11/26 10:21:17 sthen Exp $
d9 1
a9 1
REVISION-server=0
@


1.176
log
@update MySQL to 5.1.53; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2010/11/15 00:22:51 espie Exp $
d8 2
@


1.175
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2010/11/10 21:03:03 sthen Exp $
d9 1
a9 1
VERSION=	5.1.52
@


1.174
log
@Update MySQL to 5.1.52, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2010/11/09 09:55:56 ajacoutot Exp $
d78 3
a80 3
RUN_DEPENDS-server=	:mysql-client->=5.1,<5.2:${BASE_PKGPATH} \
			:p5-DBD-mysql-*:databases/p5-DBD-mysql
LIB_DEPENDS-server=	:mysql-client->=5.1,<5.2:${BASE_PKGPATH}
@


1.173
log
@Move to pkg-readmes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2010/11/09 08:58:06 ajacoutot Exp $
d9 1
a9 1
VERSION=	5.1.48
a14 3

REVISION-server=2

a34 1
USE_GROFF =	Yes
d49 1
d67 1
a67 1
.if ${COMPILER_VERSION:L:Mgcc[34]*}
d82 2
a83 3
WANTLIB-server=		${WANTLIB} crypto ssl stdc++ wrap z \
			mysqlclient
WANTLIB-main=		${WANTLIB} crypto ncurses readline ssl z
@


1.172
log
@Add missing RCS id. Protect variable names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2010/11/09 08:55:32 robert Exp $
d16 1
a16 1
REVISION-server=1
a90 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mysql
a93 3
	cp ${FILESDIR}/README.OpenBSD ${WRKBUILD}/README.OpenBSD
	${SUBST_CMD} ${WRKBUILD}/README.OpenBSD
	${INSTALL_DATA} ${WRKBUILD}/README.OpenBSD ${PREFIX}/share/doc/mysql
@


1.171
log
@Add an rc script for mysqld
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2010/11/06 22:50:02 espie Exp $
d16 1
a16 1
REVISION-server=0
@


1.170
log
@bye bye old LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2010/10/18 17:06:07 espie Exp $
d15 3
@


1.169
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2010/06/18 11:31:11 sthen Exp $
d80 1
a80 1
LIB_DEPENDS-server=	mysqlclient:mysql-client->=5.1,<5.2:${BASE_PKGPATH}
d82 2
a83 1
WANTLIB-server=		${WANTLIB} crypto ssl stdc++ wrap z
@


1.168
log
@- update to 5.1.48
http://dev.mysql.com/doc/refman/5.1/en/news-5-1-48.html

- remove USE_GMAKE, upstream improved their Makefiles

from Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2010/06/07 21:52:34 sthen Exp $
d35 1
@


1.167
log
@- update for COMPILER_VERSION and gcc4, from Brad
- add libstdc++ WANTLIB, ok Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2010/05/24 20:40:41 sthen Exp $
d9 1
a9 1
VERSION=	5.1.47
d11 2
a12 2
PKGNAME-main=	mysql-client-${VERSION}p0
PKGNAME-server=	mysql-server-${VERSION}p0
a47 1
USE_GMAKE=	Yes
@


1.166
log
@Update MySQL to 5.1.47. This is a security update - for more details, see
http://dev.mysql.com/doc/refman/5.1/en/news-5-1-47.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2010/04/27 11:03:52 sthen Exp $
d11 2
a12 2
PKGNAME-main=	mysql-client-${VERSION}
PKGNAME-server=	mysql-server-${VERSION}
d67 1
a67 3
USE_GCC3?= No

.if ${USE_GCC3:L} == "yes"
d82 1
a82 1
WANTLIB-server=		${WANTLIB} crypto ssl wrap z
@


1.165
log
@update to 5.1.46, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2010/04/03 00:21:14 sthen Exp $
d9 1
a9 1
VERSION=	5.1.46
@


1.164
log
@use newer autoconf, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2010/03/21 09:04:10 sthen Exp $
d9 1
a9 1
VERSION=	5.1.45
d11 3
a13 3
PKGNAME-main=	mysql-client-${VERSION}p0
PKGNAME-server=	mysql-server-${VERSION}p1
PKGNAME-tests= 	mysql-tests-${VERSION}p0
@


1.163
log
@adjust sample rc.local lines to start the server after printing
the name, as is normal with other ports and daemons started from /etc/rc,
from jcs via Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.162 2010/03/21 01:20:47 sthen Exp $
d11 3
a13 3
PKGNAME-main=	mysql-client-${VERSION}
PKGNAME-server=	mysql-server-${VERSION}p0
PKGNAME-tests= 	mysql-tests-${VERSION}
d51 1
a51 2
# Should be 2.63
AUTOCONF_VERSION= 2.61
@


1.162
log
@update to 5.1.45; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2010/01/01 19:54:33 ajacoutot Exp $
d12 1
a12 1
PKGNAME-server=	mysql-server-${VERSION}
@


1.161
log
@Bugfix update to MySQL 5.1.42.
See http://dev.mysql.com/doc/refman/5.1/en/news-5-1-42.html for details.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2009/11/20 01:15:34 sthen Exp $
d9 1
a9 1
VERSION=	5.1.42
@


1.161.2.1
log
@MFC:

SECURITY UPDATE to mysql-5.1.47

http://dev.mysql.com/doc/refman/5.1/en/news-5-1-47.html

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2010/01/01 19:54:33 ajacoutot Exp $
d9 1
a9 1
VERSION=	5.1.47
@


1.160
log
@Update to 5.1.41; SECURITY and various bug fixes. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2009/10/23 08:04:50 giovanni Exp $
d9 1
a9 1
VERSION=	5.1.41
@


1.159
log
@
Update to 5.1.40
Ok Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2009/09/21 13:10:18 sthen Exp $
d9 1
a9 1
VERSION=	5.1.40
@


1.158
log
@bugfix update to 5.1.39, from Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2009/09/07 21:35:34 sthen Exp $
d9 1
a9 1
VERSION=	5.1.39
@


1.157
log
@update to 5.1.38, from Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2009/08/05 14:24:33 sthen Exp $
d9 1
a9 1
VERSION=	5.1.38
@


1.156
log
@Update to 5.1.37 from Brad (maintainer); fixes crashes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2009/07/27 15:19:15 sthen Exp $
d9 1
a9 1
VERSION=	5.1.37
@


1.155
log
@Update MySQL to 5.1.33; from Brad.

Tested by giovanni@@ on amd64 and several ports@@ readers.
No problems found with a complete bulk build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2009/06/13 21:51:30 sthen Exp $
d9 1
a9 1
VERSION=	5.1.36
d54 1
a54 3
CONFIGURE_ARGS+= --enable-community-features \
		 --enable-profiling \
		 --localstatedir="${DB_DIR}" \
@


1.154
log
@Bug fix update to MySQL 5.0.83. From Brad (maintainer).
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.153 2009/05/29 08:42:06 sthen Exp $
d7 1
a7 1
COMMENT-tests=	multithreaded SQL database (regression test suite)
d9 1
a9 1
VERSION=	5.0.83
d15 1
a15 1
V=		MySQL-5.0
d18 2
a19 2
SHARED_LIBS=	mysqlclient_r		19.0 \
		mysqlclient		19.0
d30 1
a30 1
WANTLIB=		c crypto m pthread ssl z
d54 2
a55 1
CONFIGURE_ARGS+= --enable-thread-safe-client \
a56 1
		 --with-archive-storage-engine \
a58 1
		 --with-federated-storage-engine \
d62 2
a63 1
		 --with-openssl \
a64 2
		 --without-bench \
		 --without-debug \
a65 1
		 --without-extra-tools \
d83 1
a83 1
RUN_DEPENDS-server=	:mysql-client->=5.0,<5.1:${BASE_PKGPATH} \
d85 1
a85 5
LIB_DEPENDS-server=	mysqlclient:mysql-client->=5.0,<5.1:${BASE_PKGPATH}

WANTLIB-server=		${WANTLIB} wrap		
WANTLIB-main=		${WANTLIB} ncurses readline
WANTLIB-tests=
d87 3
a89 1
PKG_ARCH-tests=		*
d102 1
a102 1
	@@cd ${WRKSRC}/mysql-test && ./mysql-test-run-shell --force
@


1.154.2.1
log
@SECURITY and bugfix update to mysql-5.0.87

From ian@@, tweaked by Brad... thanks!

ok Brad jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2009/06/13 21:51:30 sthen Exp $
d7 1
a7 1
VERSION=	5.0.87
@


1.154.2.2
log
@SECURITY UPDATE

mysql-5.0.88, from ian@@

ok Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154.2.1 2009/11/07 18:04:19 william Exp $
d7 1
a7 1
VERSION=	5.0.88
@


1.154.2.3
log
@mysql-5.0.89; bugfixes

from ian@@ via Brad

ok jasper@@ Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154.2.2 2009/11/21 18:00:45 william Exp $
d7 1
a7 1
VERSION=	5.0.89
@


1.153
log
@bugfix update to 5.0.82, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2009/05/03 12:19:09 sthen Exp $
d7 1
a7 1
VERSION=	5.0.82
d84 1
a84 1
RUN_DEPENDS-server=	:mysql-client->=5.0,<5.1:databases/mysql \
d86 1
a86 1
LIB_DEPENDS-server=	mysqlclient:mysql-client->=5.0,<5.1:databases/mysql
@


1.152
log
@SECURITY and bugfix update to 5.0.81, from Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2009/03/19 22:51:01 martynas Exp $
d7 1
a7 1
VERSION=	5.0.81
d16 2
a17 2
SHARED_LIBS +=	mysqlclient_r		19.0
SHARED_LIBS +=	mysqlclient		19.0
a85 1

a88 1

d90 1
d92 1
a92 2
PKG_ARCH-tests=	*
WANTLIB-tests=
@


1.151
log
@follow the naming scheme.  it should be MASTER_SITE_MYSQL
"correct." fgs@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2009/03/17 11:26:14 sthen Exp $
d7 1
a7 1
VERSION=	5.0.77
d9 2
a10 2
PKGNAME-main=	mysql-client-${VERSION}p1
PKGNAME-server=	mysql-server-${VERSION}p1
@


1.150
log
@adjust lib/run_depends & bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2009/03/08 10:51:32 sthen Exp $
d14 1
a14 1
MASTER_SITES=	${MASTER_SITES_MYSQL:=Downloads/$V/}
@


1.149
log
@Use a more appropriate version of autoconf to regenerate the autoconf
script so that when the size of a char pointer is detected that the
proper define name is set which the code is expecting. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2009/02/17 10:46:59 sthen Exp $
d9 2
a10 2
PKGNAME-main=	mysql-client-${VERSION}p0
PKGNAME-server=	mysql-server-${VERSION}p0
d84 1
a84 1
RUN_DEPENDS-server=	:mysql-client-5.0.*:databases/mysql \
d87 1
a87 1
LIB_DEPENDS-server=	mysqlclient:mysql-client-5.0.*:databases/mysql
@


1.148
log
@bugfix/SECURITY update to 5.0.77, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2009/02/02 15:54:19 jasper Exp $
d9 2
a10 2
PKGNAME-main=	mysql-client-${VERSION}
PKGNAME-server=	mysql-server-${VERSION}
d50 1
a50 1
AUTOCONF_VERSION= 2.62
@


1.148.2.1
log
@SECURITY FIX

MFC:

Bug fix update to MySQL 5.0.83. From Brad (maintainer).

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2009/06/13 21:51:30 sthen Exp $
d7 1
a7 1
VERSION=	5.0.83
d14 1
a14 1
MASTER_SITES=	${MASTER_SITE_MYSQL:=Downloads/$V/}
d16 2
a17 2
SHARED_LIBS=	mysqlclient_r		19.0 \
		mysqlclient		19.0
d50 1
a50 1
AUTOCONF_VERSION= 2.61
d84 1
a84 1
RUN_DEPENDS-server=	:mysql-client->=5.0,<5.1:${BASE_PKGPATH} \
d86 2
a87 1
LIB_DEPENDS-server=	mysqlclient:mysql-client->=5.0,<5.1:${BASE_PKGPATH}
d90 1
d92 2
a94 2

PKG_ARCH-tests=		*
@


1.147
log
@- add a whole bunch of master sites for mysql as MASTER_SITES_MYSQL

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2009/01/07 22:54:15 sthen Exp $
d7 1
a7 1
VERSION=	5.0.75
d14 2
a18 2
MASTER_SITES=	${MASTER_SITES_MYSQL:=Downloads/$V/}

d49 2
a50 1
AUTOCONF_VERSION= 2.59
@


1.146
log
@garbage-collect MAKE_FLAGS line which is now set in gnu.port.mk. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2008/12/28 19:45:17 sthen Exp $
d17 1
a17 1
MASTER_SITES=	http://mysql.serenitynet.com/Downloads/$V/
@


1.145
log
@SECURITY (CVE-2008-2079) and bug fix update to 5.0.75.
http://dev.mysql.com/doc/refman/5.0/en/releasenotes-cs-5-0-75.html

from Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2008/09/17 13:54:54 ajacoutot Exp $
a93 2

MAKE_FLAGS=	mkdir_p='mkdir -p --'
@


1.144
log
@- TRUEPREFIX and LOCALBASE are already part of the default SUBST_VARS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2008/08/24 08:40:02 brad Exp $
d7 1
a7 1
VERSION=	5.0.67
@


1.143
log
@Upgrade to MySQL 5.0.67.

Tested by sthen@@ on amd64/sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2008/07/25 20:25:59 sthen Exp $
d32 1
a32 1
SUBST_VARS=	DB_DIR SOCKET_DIR TRUEPREFIX VERSION
@


1.142
log
@shared library and PKGNAME bumps due to use of isinf/isnan/nan
following libc/libm changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2008/05/23 14:38:08 sthen Exp $
d7 1
a7 1
VERSION=	5.0.51a
d9 2
a10 2
PKGNAME-main=	mysql-client-${VERSION}p0
PKGNAME-server=	mysql-server-${VERSION}p1
d14 2
a15 2
SHARED_LIBS +=	mysqlclient_r        19.0     # .15.0
SHARED_LIBS +=	mysqlclient          19.0     # .15.0
d23 1
a23 1
# GPL
d32 1
a32 1
SUBST_VARS=	DB_DIR SOCKET_DIR VERSION
d98 1
d102 2
a103 3
	sed -e s,@@PREFIX@@,${TRUEPREFIX},g ${FILESDIR}/README.OpenBSD > \
		${WRKBUILD}/README.OpenBSD
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mysql
a104 1
	${INSTALL_DATA_DIR} ${PREFIX}/info
@


1.141
log
@- enable Archive and Federated storage engines, requested by jakob@@.
(no PLIST changes).
- garbage-collect configure arg which no longer exists.

From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2008/05/23 12:05:47 sthen Exp $
d9 1
a9 1
PKGNAME-main=	mysql-client-${VERSION}
d14 2
a15 2
SHARED_LIBS +=	mysqlclient_r        18.0     # .15.0
SHARED_LIBS +=	mysqlclient          18.0     # .15.0
@


1.140
log
@Since kern.maxfiles default changed, this file has told people to lower
it from the default. Remove the section, people running systems large
enough to need a higher value should already know about the sysctl.

Diff from Brad (MAINTAINER) after a suggestion from me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2008/02/11 01:03:34 sthen Exp $
d10 1
a10 1
PKGNAME-server=	mysql-server-${VERSION}p0
d53 1
d56 1
a61 1
		 --with-vio \
@


1.139
log
@SECURITY update to mysql 5.0.51a
from Brad, also tested by Frank Denis and myself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2008/01/18 20:34:14 merdely Exp $
d10 1
a10 1
PKGNAME-server=	mysql-server-${VERSION}
@


1.138
log
@Update to MySQL 5.0.51.
(rest of diff)

From brad
ok mbalmer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2008/01/04 17:48:34 espie Exp $
d7 1
a7 1
VERSION=	5.0.51
@


1.137
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 5
# $OpenBSD: Makefile,v 1.136 2007/12/28 22:15:19 espie Exp $

.if ${MACHINE_ARCH} == "m88k"
BROKEN=		gen_lex_hash hangs
.endif
d7 1
a7 1
VERSION=	5.0.45
d9 3
a11 3
PKGNAME-main=	mysql-client-${VERSION}p0
PKGNAME-server=	mysql-server-${VERSION}p0
PKGNAME-tests= 	mysql-tests-${VERSION}p0
@


1.136
log
@fix race during parallel install
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2007/11/01 23:54:54 merdely Exp $
a98 1
FAKE_FLAGS=	${MAKE_FLAGS} DESTDIR=${WRKINST}
@


1.135
log
@Enable build for hppa & remove unnecessary comment.

From and tested by brad@@
"if it works" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2007/09/15 22:27:39 simon Exp $
d97 3
@


1.134
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.133 2007/09/01 20:11:21 kili Exp $
# Uses pthreads
d3 1
a3 1
.if ${MACHINE_ARCH} == "hppa" || ${MACHINE_ARCH} == "m88k"
@


1.133
log
@
Change Brads email address for now, so people can reach him instead of
getting bounces or 550s. Bump pkgnames. While here, remove quotes from
comments.

prompted by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2007/08/08 21:33:51 robert Exp $
d5 1
a5 1
BROKEN=		"gen_lex_hash hangs"
@


1.132
log
@update to version 5.0.45 that includes bugfixes and a couple of security
fixes too;

move to a new way of documenting the usage of mysql,
based on the documentation that can found in postgresql port

the original diff was from Brad; fixes from Stuart Henderson and me;

ok naddy@@, espie@@, pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2007/06/07 20:35:35 ckuethe Exp $
d14 3
a16 3
PKGNAME-main=	mysql-client-${VERSION}
PKGNAME-server=	mysql-server-${VERSION}
PKGNAME-tests= 	mysql-tests-${VERSION}
d26 1
a26 1
MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.131
log
@Update mysql 5.0.37 to 5.0.41, from brad
ok robert
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2007/04/09 22:43:06 ckuethe Exp $
d8 3
a10 3
COMMENT-main=	"multithreaded SQL database (client)"
COMMENT-server=	"multithreaded SQL database (server)"
COMMENT-tests=	"multithreaded SQL database (regression test suite)"
d12 1
a12 1
VERSION=	5.0.41
a98 2
DOCS=	manual.html manual.ps manual_toc.html manual.txt

d103 6
@


1.130
log
@Update to MySQL 5.0.37, from Frank Denis and Brad Smith
ok $MAINTAINER, robert
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2007/01/25 07:41:48 jakob Exp $
d12 1
a12 1
VERSION=	5.0.37
@


1.129
log
@update to 5.0.33; from maintainer (brad@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2006/12/07 11:42:37 bernd Exp $
d12 1
a12 1
VERSION=	5.0.33
@


1.128
log
@Add missing @@pkgpath after MULTI_PACKAGES conversion.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2006/11/26 11:08:32 espie Exp $
d12 1
a12 1
VERSION=	5.0.27
d14 2
a15 2
PKGNAME-main=	mysql-client-${VERSION}p1
PKGNAME-server=	mysql-server-${VERSION}p0
d107 1
a107 1
	@@cd ${WRKSRC}/mysql-test && ./mysql-test-run --force
@


1.127
log
@new MULTI_PACKAGES and a server fix (was missing some lib depends)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2006/10/29 20:28:24 brad Exp $
d14 1
a14 1
PKGNAME-main=	mysql-client-${VERSION}p0
@


1.126
log
@upgrade to MySQL 5.0.27
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2006/10/28 15:28:35 brad Exp $
d8 1
a8 1
COMMENT=	"multithreaded SQL database (client)"
d14 3
a16 3
FULLPKGNAME=	mysql-client-${VERSION}
PKGNAME-server=	mysql-server-${VERSION}
FULLPKGNAME-tests= mysql-tests-${VERSION}
d85 1
a85 2
MULTI_PACKAGES=	-server -tests
SUBPACKAGE?=
d87 8
a94 7
.if ${SUBPACKAGE} == "-server"
RUN_DEPENDS=	:mysql-client-5.0.*:databases/mysql \
		:p5-DBD-mysql-*:databases/p5-DBD-mysql
WANTLIB+=	wrap		
.elif empty(SUBPACKAGE)
WANTLIB+=	ncurses readline
.endif
d96 2
a97 4
.if defined(PACKAGING) && ${SUBPACKAGE} == "-tests"
PKG_ARCH=	*
WANTLIB=
.endif
@


1.125
log
@argh! it turns out MySQL AB screwed up and made unintended API/ABI changes
with 5.0.26 which will be reverted with the next release. bump the major
version of the client shared libs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2006/10/28 11:19:20 espie Exp $
d12 1
a12 1
VERSION=	5.0.26
d14 2
a15 2
FULLPKGNAME=	mysql-client-${VERSION}p1
PKGNAME-server=	mysql-server-${VERSION}p1
d19 2
a20 2
SHARED_LIBS +=	mysqlclient_r        17.0     # .15.0
SHARED_LIBS +=	mysqlclient          17.0     # .15.0
@


1.124
log
@a few more SHARED_LIBS reformat
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2006/10/23 03:18:09 brad Exp $
d14 1
a14 1
FULLPKGNAME=	mysql-client-${VERSION}
d19 2
a20 2
SHARED_LIBS +=	mysqlclient_r        16.0     # .15.0
SHARED_LIBS +=	mysqlclient          16.0     # .15.0
@


1.123
log
@Use the Alpha BWX instruction set as a workaround for an alignment
bug found in both gcc 2.x and gcc 3.x. This at least allows MySQL
to work on EV56 and newer CPUs.

Thanks to jason@@ for tracking down the issue and recommending a
workaround.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2006/10/18 18:35:48 bernd Exp $
d19 2
a20 2
SHARED_LIBS=	mysqlclient	16.0 \
		mysqlclient_r	16.0
@


1.122
log
@Don't install a default database with an empty root password. From now on,
the user has to create the initial database himself.

Inspired by mbalmer@@s change to postgresql-server.

Additionally: Don't remove the databases when mysql-server is deinstalled
via 'pkg_delete -c'.

ok brad@@, mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2006/10/14 05:04:54 brad Exp $
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}p0
d38 5
@


1.121
log
@upgrade to MySQL 5.0.26
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2006/10/03 04:52:03 brad Exp $
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}
@


1.120
log
@upgrade to MySQL 5.0.24a + a few patches.

http://bugs.mysql.com/22227 ulong fix
http://bugs.mysql.com/21327 OpenSSL build fix
http://bugs.mysql.com/18630 security context issue fix
http://bugs.mysql.com/17647 case-sensitive fs issue fix

CVE-2006-4226, CVE-2006-4227
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2006/06/02 18:34:12 bernd Exp $
d12 1
a12 1
VERSION=	5.0.24a
@


1.119
log
@Security update to mysql-5.0.22.

From mysql ChangeLog:

An SQL-injection security hole has been found in multi-byte encoding
processing. The bug was in the server, incorrectly parsing the string
escaped with the mysql_real_escape_string() C API function. (Bug#8378)

Detailed information:
http://dev.mysql.com/doc/refman/5.0/en/news-5-0-22.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2006/05/10 03:21:30 brad Exp $
d12 1
a12 1
VERSION=	5.0.22
d22 1
a22 1
MASTER_SITES=	http://mysql.mirrors.pair.com/Downloads/$V/
@


1.119.2.1
log
@MFC:
upgrade to MySQL 5.0.24a + a few patches.

http://bugs.mysql.com/22227 ulong fix
http://bugs.mysql.com/21327 OpenSSL build fix
http://bugs.mysql.com/18630 security context issue fix
http://bugs.mysql.com/17647 case-sensitive fs issue fix

CVE-2006-4226, CVE-2006-4227
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2006/06/02 18:34:12 bernd Exp $
d12 1
a12 1
VERSION=	5.0.24a
d22 1
a22 1
MASTER_SITES=	http://mysql.serenitynet.com/Downloads/$V/
@


1.118
log
@upgrade to MySQL 5.0.21
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2006/04/30 20:55:44 brad Exp $
d12 1
a12 1
VERSION=	5.0.21
@


1.117
log
@upgrade to MySQL 5.0.20a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2006/03/10 23:51:53 brad Exp $
d12 1
a12 1
VERSION=	5.0.20a
@


1.116
log
@upgrade to MySQL 5.0.19
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2006/01/13 19:12:16 espie Exp $
d12 1
a12 1
VERSION=	5.0.19
@


1.115
log
@Bump C++ shared libs numbers and corresponding package names,
handles a through databases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2006/01/06 00:13:26 brad Exp $
d12 1
a12 1
VERSION=	5.0.18
d14 1
a14 1
FULLPKGNAME=	mysql-client-${VERSION}p0
@


1.115.2.1
log
@update to mysql 5.0.21

CVE-2006-1518 Buffer overflow in the open_table function in
sql_base.cc in MySQL 5.0.x up to 5.0.20 might allow remote attackers
to execute arbitrary code via crafted COM_TABLE_DUMP packets with
invalid length values.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2006/01/13 19:12:16 espie Exp $
d12 1
a12 1
VERSION=	5.0.21
d14 1
a14 1
FULLPKGNAME=	mysql-client-${VERSION}
@


1.115.2.2
log
@MFC:
Security update to mysql-5.0.22.

From mysql ChangeLog:

An SQL-injection security hole has been found in multi-byte encoding
processing. The bug was in the server, incorrectly parsing the string
escaped with the mysql_real_escape_string() C API function. (Bug#8378)

Detailed information:
http://dev.mysql.com/doc/refman/5.0/en/news-5-0-22.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115.2.1 2006/05/14 07:19:51 sturm Exp $
d12 1
a12 1
VERSION=	5.0.22
@


1.115.2.3
log
@MFC:
upgrade to MySQL 5.0.24a + a few patches.

http://bugs.mysql.com/22227 ulong fix
http://bugs.mysql.com/21327 OpenSSL build fix
http://bugs.mysql.com/18630 security context issue fix
http://bugs.mysql.com/17647 case-sensitive fs issue fix

CVE-2006-4226, CVE-2006-4227
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115.2.2 2006/06/04 20:40:26 sturm Exp $
d12 1
a12 1
VERSION=	5.0.24a
d22 1
a22 1
MASTER_SITES=	http://mysql.serenitynet.com/Downloads/$V/
@


1.114
log
@upgrade to MySQL 5.0.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2005/12/26 21:32:01 sturm Exp $
d14 1
a14 1
FULLPKGNAME=	mysql-client-${VERSION}
d19 2
a20 2
SHARED_LIBS=	mysqlclient	15.0 \
		mysqlclient_r	15.0
@


1.113
log
@SHARED_LIBS, USE_LIBTOOl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2005/12/12 04:55:43 brad Exp $
d12 1
a12 1
VERSION=	4.1.15
d14 1
a14 1
FULLPKGNAME=	mysql-client-${VERSION}p0
d18 3
a20 3
V=		MySQL-4.1
SHARED_LIBS=	mysqlclient	14.0 \
		mysqlclient_r	14.0
d53 1
d84 1
a84 1
RUN_DEPENDS=	:mysql-client-4.1.*:databases/mysql \
@


1.112
log
@upgrade to MySQL 4.1.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2005/12/10 00:19:09 pvalchev Exp $
d14 1
a14 1
FULLPKGNAME=	mysql-client-${VERSION}
d19 3
d47 1
d98 3
a100 2
	cd ${PREFIX}/lib && ln -sf mysql/libmysqlclient.so.14.0 . && \
		ln -sf mysql/libmysqlclient_r.so.14.0 .
@


1.111
log
@pass --with-low-memory on ARM architectures per configure script
advice so this compiles with reasonable resources
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2005/10/16 18:16:27 wilfried Exp $
d12 1
a12 1
VERSION=	4.1.14
d14 3
a16 3
FULLPKGNAME=	mysql-client-${VERSION}p1
PKGNAME-server=	mysql-server-${VERSION}p2
FULLPKGNAME-tests= mysql-tests-${VERSION}p1
d51 1
a61 4
.if ${MACHINE_ARCH} == "arm"
CONFIGURE_ARGS+= --with-low-memory
.endif

a68 2
.else
PATCH_LIST=	gcc-* patch-*
@


1.110
log
@fix plists, ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2005/10/07 22:48:42 brad Exp $
d60 4
@


1.109
log
@bump server PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2005/09/04 22:51:24 brad Exp $
d14 3
a16 3
FULLPKGNAME=	mysql-client-${VERSION}
PKGNAME-server=	mysql-server-${VERSION}p1
FULLPKGNAME-tests= mysql-tests-${VERSION}
@


1.108
log
@upgrade to MySQL 4.1.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2005/03/30 03:07:52 brad Exp $
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}
@


1.107
log
@remove HAVE_BROKEN_REALPATH workaround now that OpenBSD's realpath()
is thread-safe.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2005/03/23 03:47:20 brad Exp $
d12 1
a12 1
VERSION=	4.0.24
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}p1
d18 1
a18 1
V=		MySQL-4.0
d80 1
a80 1
RUN_DEPENDS=	:mysql-client-4.0.*:databases/mysql \
d95 2
a96 6
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mysql/Flags
	cd ${WRKSRC}/Docs; ${INSTALL_DATA} ${DOCS} ${PREFIX}/share/doc/mysql
	${INSTALL_DATA} ${WRKSRC}/Docs/Flags/*.gif \
		${PREFIX}/share/doc/mysql/Flags
	cd ${PREFIX}/lib && ln -sf mysql/libmysqlclient.so.12.0 . && \
		ln -sf mysql/libmysqlclient_r.so.12.0 .
@


1.107.2.1
log
@update to mysql 4.0.27

Security fix: A malicious client, using specially crafted invalid login
or COM_TABLE_DUMP packets was able to read uninitialized memory, which
potentially, though unlikely in MySQL, could have led to an information
disclosure. (CVE-2006-1516, CVE-2006-1517)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2005/03/30 03:07:52 brad Exp $
d12 1
a12 1
VERSION=	4.0.27
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}
d92 2
d95 4
@


1.106
log
@upgrade to MySQL 4.0.24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2005/01/25 16:01:07 alek Exp $
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}
@


1.105
log
@Fix WANTLIB marker
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2005/01/20 03:00:00 brad Exp $
d12 1
a12 1
VERSION=	4.0.23
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}p1
@


1.104
log
@fix symlink vulnerability.

http://lists.mysql.com/internals/20600

From: Bernd Ahlers <b dot ahlers at ba-net dot org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2005/01/14 01:42:58 brad Exp $
d30 1
a30 1
WANTLIB=		c crypto m ncurses pthread readline ssl wrap z
d82 3
d89 1
@


1.103
log
@upgrade to MySQL 4.0.23

fixes some crashing issues among many other bug fixes,
seems to have resolved a crashing issue henning@@ was
experiencing on sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2004/11/22 16:59:29 espie Exp $
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}
@


1.102
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2004/10/20 07:38:50 brad Exp $
d12 1
a12 1
VERSION=	4.0.20
d14 2
a15 2
FULLPKGNAME=	mysql-client-${VERSION}p1
PKGNAME-server=	mysql-server-${VERSION}p1
d45 1
a45 1
AUTOCONF_VERSION= 2.57
@


1.101
log
@bump PKGNAME for both client and server.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2004/06/24 06:35:51 brad Exp $
d30 1
@


1.100
log
@use this workaround only with gcc2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2004/05/21 12:16:21 brad Exp $
d14 2
a15 2
FULLPKGNAME=	mysql-client-${VERSION}
PKGNAME-server=	mysql-server-${VERSION}
@


1.99
log
@upgrade to MySQL 4.0.20
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2004/05/16 09:01:15 brad Exp $
d67 2
@


1.98
log
@revert back to 4.0.18

for details http://dev.mysql.com/doc/mysql/en/News-4.0.19.html

thanks to Frank Denis for pointing this out to me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2004/04/16 00:14:03 brad Exp $
d12 1
a12 1
VERSION=	4.0.18
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}p1
@


1.97
log
@upgrade to MySQL 4.0.19
@
text
@d12 1
a12 1
VERSION=	4.0.19
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}
@


1.96
log
@Fix a tmpfile/symlink issue with mysqlbug.

http://marc.theaimsgroup.com/?l=bugtraq&m=108023246916294&w=2

Fix from MySQL BitKeeper repo via Robert Nagy <thuglife at bsd dot hu>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2004/03/31 04:06:20 pvalchev Exp $
d12 1
a12 1
VERSION=	4.0.18
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}p1
@


1.95
log
@mark as broken on m88k, same reason as hppa
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2004/03/10 20:28:07 pvalchev Exp $
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}
@


1.94
log
@mark as broken on hppa: gen_lex_hash hangs build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2004/02/25 08:21:18 brad Exp $
d4 1
a4 1
.if ${MACHINE_ARCH} == "hppa"
@


1.94.2.1
log
@Fix a tmpfile/symlink issue with mysqlbug.

http://marc.theaimsgroup.com/?l=bugtraq&m=108023246916294&w=2

Fix from MySQL BitKeeper repo via Robert Nagy <thuglife at bsd dot hu>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2004/04/16 00:14:03 brad Exp $
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}p1
@


1.94.2.2
log
@SECURITY:
Jeroen van Wolffelaar <jeroen@@wolffelaar.nl> discovered an
insecure temporary file vulnerability in the mysqlhotcopy
script when using the scp method.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94.2.1 2004/05/06 00:59:30 brad Exp $
d15 1
a15 1
PKGNAME-server=	mysql-server-${VERSION}p2
@


1.93
log
@use autoconf 2.57
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2004/02/22 01:20:11 brad Exp $
d3 4
@


1.92
log
@upgrade to MySQL 4.0.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2004/02/04 07:39:18 sturm Exp $
d40 1
a40 1
AUTOCONF_VERSION= 2.54
@


1.91
log
@mark some subpackages arch independent

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2004/01/06 14:13:03 espie Exp $
d8 1
a8 1
VERSION=	4.0.17
@


1.90
log
@fix buglet
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2003/12/30 20:42:48 wilfried Exp $
d75 4
@


1.89
log
@use p5-DBD-mysql
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2003/12/30 05:57:30 brad Exp $
d61 1
a61 1
CONFIGURE_ARGS+= --with-client-ldflags=-lsupc++
@


1.88
log
@upgrade to MySQL 4.0.17

LOTS of people have asked for this so here is my work in progress.
test as much as possible.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2003/12/28 22:17:50 espie Exp $
d74 1
a74 1
		:p5-DBD-Msql-Mysql-*:databases/p5-DBD-Msql-Mysql
@


1.87
log
@Include -lsupc++ if it's there.
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.86 2003/08/27 00:14:49 brad Exp $
# $FreeBSD: Makefile,v 1.44 1999/03/04 21:27:58 dirk Exp $
d8 1
a8 1
VERSION=	3.23.57
d11 1
a11 1
PKGNAME-server=	mysql-server-${VERSION}p1
d14 2
a15 3
V=		MySQL-3.23
MASTER_SITES=	http://mysql.secsup.org/Downloads/$V/ \
		http://mysql.mirrors.pair.com/Downloads/$V/
d31 1
a31 1
# Suggested flags to the C++ compiler, needed for
d36 2
d40 1
a40 1
AUTOCONF_NEW=	Yes
d42 1
a42 1
CONFIGURE_ARGS+= --enable-static \
d45 1
a45 2
		 --with-innodb \
		 --with-libwrap="/usr" \
d47 1
d49 1
d53 1
a53 3
		 --without-gemini \
		 --without-mit-threads \
		 --without-perl \
d57 1
d59 1
d62 1
a62 1
CONFIGURE_ARGS+= --with-mysqld-ldflags=-lsupc++
d65 3
a67 4
CONFIGURE_ENV=	HOSTNAME="/bin/hostname -s"

FLAVORS=	bdb
FLAVOR?=
a71 10
.if ${FLAVOR:L:Mbdb}
. if ${MACHINE_ARCH} != "i386"
BROKEN=		"The BerkeleyDB transaction support has not been tested on your architecture yet"
. else
CONFIGURE_ARGS+= --with-berkeley-db
. endif
.else
CONFIGURE_ARGS+= --without-berkeley-db
.endif

d73 1
a73 1
RUN_DEPENDS=	:mysql-client-3.23.*:databases/mysql \
a76 2
VMEM_WARNING=	Yes

d84 2
a85 4
	@@if [ -f ${PREFIX}/lib/mysql/libmysqlclient.so.10.0 ]; then \
	  cd ${PREFIX}/lib && ln -sf mysql/libmysqlclient.so.10.0 \
		libmysqlclient.so.10.0 ;\
	fi
@


1.86
log
@use new user/group schema
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2003/08/26 15:37:18 brad Exp $
d56 8
@


1.86.2.1
log
@remove bad dist site, has distfile with different checksum
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2003/08/27 00:14:49 brad Exp $
d16 2
a17 1
MASTER_SITES=	http://mysql.mirrors.pair.com/Downloads/$V/
@


1.86.2.2
log
@Fix a tmpfile/symlink issue with mysqlbug.

http://marc.theaimsgroup.com/?l=bugtraq&m=108023246916294&w=2

Fix from MySQL BitKeeper repo via Robert Nagy <thuglife at bsd dot hu>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86.2.1 2003/12/30 01:20:16 brad Exp $
d12 1
a12 1
PKGNAME-server=	mysql-server-${VERSION}p2
@


1.86.2.3
log
@SECURITY:
Jeroen van Wolffelaar <jeroen@@wolffelaar.nl> discovered an
insecure temporary file vulnerability in the mysqlhotcopy
script when using the scp method.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86.2.2 2004/04/16 00:21:18 brad Exp $
d12 1
a12 1
PKGNAME-server=	mysql-server-${VERSION}p3
@


1.85
log
@upgrade to MySQL 3.23.57 + patches

fixes some older security issues as well as a soon to be disclosed issue.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2003/01/29 16:35:55 brad Exp $
d12 1
a12 1
PKGNAME-server=	mysql-server-${VERSION}
d47 1
a47 1
		 --with-mysqld-user="mysql" \
@


1.84
log
@upgrade to MySQL 3.23.55

STABILITY FIX:
Fixed double free'd pointer bug in mysql_change_user() handling, that
enabled a specially hacked version of MySQL client to crash mysqld.
Note, that one needs to login to the server by using a valid user
account to be able to exploit this bug.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2002/12/14 23:56:43 brad Exp $
d9 1
a9 1
VERSION=	3.23.55
d16 2
a17 2
MASTER_SITES=	ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/Downloads/$V/ \
		ftp://ftp.shellhung.org/pub/Mirror/mysql/Downloads/$V/
@


1.84.2.1
log
@MFC:
upgrade to MySQL 3.23.57 + patches

fixes some older security issues as well as a soon to be disclosed issue.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2003/01/29 16:35:55 brad Exp $
d9 1
a9 1
VERSION=	3.23.57
d16 2
a17 2
MASTER_SITES=	http://mysql.secsup.org/Downloads/$V/ \
		http://mysql.mirrors.pair.com/Downloads/$V/
@


1.84.2.2
log
@remove bad dist site, has distfile with different checksum
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84.2.1 2003/09/03 00:26:22 brad Exp $
d16 2
a17 1
MASTER_SITES=	http://mysql.mirrors.pair.com/Downloads/$V/
@


1.83
log
@upgrade to MySQL 3.23.54
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2002/11/15 23:37:55 brad Exp $
d9 1
a9 1
VERSION=	3.23.54
@


1.82
log
@henning@@ says this seems to atleast link on alpha so I can finally
remove all the cruft at the top of the Makefile.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2002/11/14 03:51:45 brad Exp $
d9 1
a9 1
VERSION=	3.23.49
d23 1
d40 1
a40 1
MODGNU_CONFIG_GUESS_DIRS= ${WRKSRC} ${WRKSRC}/mit-pthreads/config
d44 1
a45 1
		 --with-comment='OpenBSD port: ${FULLPKGNAME-server}' \
d49 1
a49 1
		 --without-perl \
d51 2
a52 2
		 --without-readline \
		 --without-bench \
d54 2
a55 1
		 --without-gemini
a56 4

PATCH_LIST=	${PORTSDIR}/infrastructure/patches/patch-lt1.3.5-ltconfig \
		${PORTSDIR}/infrastructure/patches/patch-lt1.3.5-ltmain_sh \
		patch-*
@


1.81
log
@enable MySQL on sparc64, seems to link fine now and works no better or
worse than the other architectures that are currently enabled.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2002/07/11 15:42:17 brad Exp $
a7 11

# More architectures need testing of MySQL+native threads
# alpha, m68k - does not work
# hppa, m88k, vax - untested
WORKING_ARCHS=	i386 powerpc sparc sparc64

.for _arch in ${MACHINE_ARCH}
.  if empty(WORKING_ARCHS:M${_arch})
BROKEN=		"Support for ${MACHINE_ARCH} threads is currently broken and/or untested with MySQL"
.  endif
.endfor
@


1.80
log
@bring in a fix from newer MySQL which allows the autoconf option
--enable-local-infile to work as expected. before it didn't do anything.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2002/05/20 03:26:27 brad Exp $
d10 1
a10 1
# alpha, m68k, sparc64 - does not work
d12 1
a12 1
WORKING_ARCHS=	i386 powerpc sparc
d24 1
a24 1
FULLPKGNAME-tests=	mysql-tests-${VERSION}
a25 1
NEED_VERSION=	1.500
a105 2
# Don't try to run the join test. It always fails
# though MySQL seems to work just fine otherwise.
d107 1
a107 1
	@@cd ${WRKSRC}/mysql-test && ./mysql-test-run --skip-test=join
@


1.80.2.1
log
@upgrade to MySQL 3.23.54

Fixes multiple vulnerabilities.

http://security.e-matters.de/advisories/042002.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2002/07/11 15:42:17 brad Exp $
d20 1
a20 2

VERSION=	3.23.54
d24 1
a24 1
FULLPKGNAME-tests= mysql-tests-${VERSION}
d26 1
a34 1
# GPL
d51 1
a51 1
AUTOCONF_NEW=	Yes
d55 1
a56 1
		 --with-innodb \
d60 3
a63 3
		 --without-debug \
		 --without-docs \
		 --without-gemini \
d65 1
a65 2
		 --without-perl \
		 --without-readline
d68 4
d107 2
d110 1
a110 1
	@@cd ${WRKSRC}/mysql-test && ./mysql-test-run --force
@


1.80.2.2
log
@MFC:
upgrade to MySQL 3.23.55

STABILITY FIX:
Fixed double free'd pointer bug in mysql_change_user() handling, that
enabled a specially hacked version of MySQL client to crash mysqld.
Note, that one needs to login to the server by using a valid user
account to be able to exploit this bug.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80.2.1 2002/12/16 21:12:03 brad Exp $
d20 2
a21 1
VERSION=	3.23.55
@


1.80.2.3
log
@MFC:
upgrade to MySQL 3.23.57 + patches

fixes some older security issues as well as a soon to be disclosed issue.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80.2.2 2003/01/30 15:44:54 brad Exp $
d20 1
a20 1
VERSION=	3.23.57
d27 2
a28 2
MASTER_SITES=	http://mysql.secsup.org/Downloads/$V/ \
		http://mysql.mirrors.pair.com/Downloads/$V/
@


1.79
log
@update the list of architectures
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2002/05/13 18:50:38 espie Exp $
d49 2
a50 1
CONFIGURE_STYLE= gnu
d66 1
@


1.78
log
@Kill a few SUBDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2002/05/02 03:04:14 brad Exp $
d10 2
a11 3
# alpha - does not work
# hppa, m68k, m88k, vax - untested
# sparc64 - linker issue?
@


1.77
log
@re-enable powerpc, the previously mentioned problem is not specific
to powerpc and also affects i386/sparc. the exact conditions that
cause this to happen are unknown at the moment though this will
have to be investigated in closer detail.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2002/03/19 19:11:39 brad Exp $
d28 3
a30 3
MASTER_SITES=	ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/Downloads/%SUBDIR%/ \
		ftp://ftp.shellhung.org/pub/Mirror/mysql/Downloads/%SUBDIR%/
MASTER_SITE_SUBDIR= MySQL-3.23
@


1.76
log
@- use -p flag for mkdir in mysql_install_db
- if the socket dir does not exist then create it as part of startup in
safe_mysqld
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2002/03/16 16:44:10 brad Exp $
a11 2
# powerpc - a bug, when running (My)SQL bench the CPU utilization goes up
#	    to 100% and mysqld stops responding
d13 1
a13 1
WORKING_ARCHS=	i386 sparc
@


1.76.2.1
log
@upgrade to MySQL 3.23.54

Fixes multiple vulnerabilities.

http://security.e-matters.de/advisories/042002.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2002/03/19 19:11:39 brad Exp $
d23 1
a23 2

VERSION=	3.23.54
d27 1
a27 1
FULLPKGNAME-tests= mysql-tests-${VERSION}
d29 4
a32 3
V=		MySQL-3.23
MASTER_SITES=	ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/Downloads/$V/ \
		ftp://ftp.shellhung.org/pub/Mirror/mysql/Downloads/$V/
a37 1
# GPL
d52 2
a53 3
USE_GMAKE=	Yes
CONFIGURE_STYLE= autoconf
AUTOCONF_NEW=	Yes
d57 1
a58 1
		 --with-innodb \
d62 3
a65 3
		 --without-debug \
		 --without-docs \
		 --without-gemini \
d67 5
a71 3
		 --without-perl \
		 --without-readline
CONFIGURE_ENV=	HOSTNAME="/bin/hostname -s"
d108 2
d111 1
a111 1
	@@cd ${WRKSRC}/mysql-test && ./mysql-test-run --force
@


1.76.2.2
log
@MFC:
upgrade to MySQL 3.23.55

STABILITY FIX:
Fixed double free'd pointer bug in mysql_change_user() handling, that
enabled a specially hacked version of MySQL client to crash mysqld.
Note, that one needs to login to the server by using a valid user
account to be able to exploit this bug.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76.2.1 2002/12/16 17:57:07 brad Exp $
d23 2
a24 1
VERSION=	3.23.55
@


1.75
log
@until MySQL can pass its own bench test without going up to 100% utilization and stop responding on powerpc then it's going to be removed from the working archs list for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2002/03/12 03:10:06 brad Exp $
d12 1
a12 1
# powerpc - a bug, when running (My)SQL bench the CPU utilization goes up 
d81 1
a81 1
BROKEN=	"The BerkeleyDB transaction support has not been tested on your architecture yet"
@


1.74
log
@remove ftp.mysql.com
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2002/03/03 06:02:11 brad Exp $
d12 2
d15 1
a15 1
WORKING_ARCHS=	i386 sparc powerpc
@


1.73
log
@alpha does not work
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2002/02/20 18:03:32 brad Exp $
d28 1
a28 2
MASTER_SITES=	ftp://ftp.mysql.com/%SUBDIR%/ \
		ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/Downloads/%SUBDIR%/ \
@


1.72
log
@a few improvements here and there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2002/02/19 03:58:57 brad Exp $
d10 2
a11 1
# alpha, hppa, m68k, m88k, vax - untested
@


1.71
log
@- Move socket from the database dir to /var/run/mysql.
- Tighten perms on the database dir.
--
Suggestion of using /var/run/mysql from: Wilbern Cobb
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2002/02/18 03:25:33 brad Exp $
d7 1
a7 1
COMMENT-tests=	"multithreaded SQL database (test suite)"
d12 4
a15 1
.if ${MACHINE_ARCH} != "i386" && ${MACHINE_ARCH} != "sparc" && ${MACHINE_ARCH} != "powerpc"
d17 2
a18 1
.endif
@


1.70
log
@upgrade to MySQL 3.23.49
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2002/02/13 19:19:36 brad Exp $
d38 2
a39 1
SUBST_VARS=	DB_DIR VERSION
d55 1
a55 1
		 --with-unix-socket-path="${DB_DIR}/mysql.sock" \
@


1.69
log
@enable powerpc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2002/02/10 04:25:27 brad Exp $
d16 1
a16 1
VERSION=	3.23.48
@


1.68
log
@add another dist site
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2002/02/10 03:49:53 brad Exp $
d12 1
a12 2
# powerpc - seems to work, possible instability? needs more testing, @@pval
.if ${MACHINE_ARCH} != "i386" && ${MACHINE_ARCH} != "sparc"
@


1.67
log
@upgrade to MySQL 3.23.48
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2002/02/09 00:50:14 brad Exp $
d24 2
a25 1
MASTER_SITES=	ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/Downloads/%SUBDIR%/ \
@


1.66
log
@workaround
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2002/02/06 00:48:15 brad Exp $
d10 3
d17 1
a17 1
VERSION=	3.23.47
d84 1
a84 1
		::databases/p5-DBD-Msql-Mysql
@


1.65
log
@move BROKEN, some archs can't even build this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2002/01/11 16:50:30 brad Exp $
a83 2
REGRESS_TARGET=	test

d97 5
@


1.64
log
@remove the static linking of mysqld for now, this is the source of some
recent problems with the MySQL port.
--
Confirmed by: marc@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2002/01/06 07:06:25 brad Exp $
d9 5
a78 1
# More architectures need testing of MySQL+native threads
a79 3
. if ${MACHINE_ARCH} != "i386" && ${MACHINE_ARCH} != "sparc"
BROKEN=		"Support for ${MACHINE_ARCH} threads is currently broken and/or untested with MySQL"
. endif
d84 2
a98 3

do-regress:
	@@cd ${WRKSRC}/mysql-test && exec mysql-test-run
@


1.63
log
@- Don't mark the whole port BROKEN, only the -server subpackage. Enable
this port on sparc.
- Set CXX=${CC} to get rid of libstdc++ in order to improve stability
under heavy load; From: FreeBSD.
- Build mysqld statically by default, enable InnoDB by default too.
- Replace max FLAVOR with bdb FLAVOR and only enable it on i386 for now
until it can be tested on other archs.
- Add comment to MySQL to indicate that this install of MySQL is from the
OpenBSD port/package.
- Add RUN_DEPENDS on p5-Msql-Mysql for some of the Perl-based MySQL
scripts.
- Set the mysql account to be apart of the daemon login class.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2001/12/29 17:56:56 brad Exp $
a44 1
		 --with-mysqld-ldflags=--static \
@


1.62
log
@upgrade to MySQL 3.23.47
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2001/12/22 03:54:44 brad Exp $
a4 5
# More architectures need testing of MySQL+native threads
.if ${MACHINE_ARCH} != "i386"
BROKEN=		"Support for ${MACHINE_ARCH} threads is currently broken and/or untested with MySQL"
.endif

d34 1
d42 2
d45 1
d59 1
a59 1
FLAVORS=	max
d65 6
a70 2
.if ${FLAVOR:L:Mmax}
CONFIGURE_ARGS+= --with-berkeley-db --with-innodb
d72 1
a72 1
CONFIGURE_ARGS+= --without-berkeley-db --without-innodb
d75 1
d77 5
a81 1
RUN_DEPENDS=	:mysql-client-3.23.*:databases/mysql
@


1.61
log
@upgrade to MySQL 3.23.46
--
- The port has switched back to using native threads. Only tested and known to work on i386. For everything else the port is currently marked BROKEN until the appropriate architectures are tested. Do not even try this if you're not running -current libc_r.
- As suggested by Marc Espie, make symlink for the MySQL client library in lib/ to eliminate the need for adding lib/mysql to the shlib dir path. Porters have to be careful and ensure autoconf scripts do not arbitrarily enable MySQL support after this change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2001/11/11 13:57:32 heko Exp $
d7 1
a7 1
BROKEN=		"Support for ${MACHINE_ARCH} threads is currently broken"
d14 1
a14 1
VERSION=	3.23.46
d91 1
a91 1
	@@cd ${WRKSRC}/mysql-test && ./mysql-test-run
@


1.60
log
@o Instead of copying the "virtual memory exhausted" warning for each
individual port, introduce a new variable for bsd.port.mk, VMEM_WARNING.
By setting this variable to `Yes', the user is given a warning about the
virtual memory requirements just before the pre-build stage.
o Also give some examples for different shells for what to do about
it, and mention login.conf(5). bash, for example, has a confusing
-v flag to ulimit.
o Document this in bsd.port.mk.5
espie@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2001/10/06 03:55:34 brad Exp $
d5 5
d14 1
a14 1
VERSION=	3.23.42
d20 2
a21 6
NEED_VERSION=	1.486
MASTER_SITES=	http://www.mysql.com/Downloads/%SUBDIR%/ \
		http://www.kernelnotes.de/MySQL/Downloads/%SUBDIR%/ \
		http://www.mysql.net/Downloads/%SUBDIR%/ \
		http://mysql.he.net/Downloads/%SUBDIR%/ \
		ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/Downloads/%SUBDIR%/ \
d37 4
d42 1
a42 1
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/mit-pthreads/config
a54 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include/pth" \
		LDFLAGS="-L${LOCALBASE}/lib/pth"
d72 1
a72 4
.if !defined(PACKAGING)
LIB_DEPENDS=	lib/pth/pthread.14:pth-1.4.*:devel/pth
.elif ${SUBPACKAGE} == "-server"
LIB_DEPENDS=	lib/pth/pthread.14:pth-1.4.*:devel/pth
d76 2
a79 2
VMEM_WARNING=	Yes

a81 3
	@@sed -e s#@@PREFIX@@#${TRUEPREFIX}#g -e s#@@LOCALBASE@@#${LOCALBASE}#g \
		${FILESDIR}/startup.sh > ${WRKBUILD}/startup.sh
	${INSTALL_SCRIPT} ${WRKBUILD}/startup.sh ${PREFIX}/lib/mysql
d85 7
@


1.59
log
@lib/pth needs a path as well.
@
text
@d78 1
a78 8
pre-build:      
	@@echo ""
	@@echo "*** WARNING: you may see an error such as"
	@@echo "***       virtual memory exhausted"
	@@echo "*** when building this package.  If you do you must increase"
	@@echo "*** your limits.  See the man page for your shell and look"
	@@echo "*** for the 'limit' or 'ulimit' command."
	@@echo ""
@


1.58
log
@use ports in-tree libtool patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2001/09/28 17:43:01 brad Exp $
d15 1
a15 1
NEED_VERSION=	1.460
d70 1
a70 1
LIB_DEPENDS=	pthread.14:pth-1.4.*:devel/pth
d72 1
a72 1
LIB_DEPENDS=	pthread.14:pth-1.4.*:devel/pth
@


1.57
log
@lop off first field of RUN_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2001/09/28 06:02:13 pvalchev Exp $
d52 4
@


1.56
log
@CONFIGURE_STYLE=gnu w/ proper MODGNU_CONFIG_GUESS_DIRS
needed for the powerpc -> macppc name change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2001/09/10 02:59:35 brad Exp $
d15 1
a15 1
NEED_VERSION=	1.435
d37 1
a52 2
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/mit-pthreads/config

d69 1
a69 1
RUN_DEPENDS=	mysql:mysql-client-3.23.*:databases/mysql
@


1.55
log
@upgrade to MySQL 3.23.42
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2001/08/30 02:10:40 brad Exp $
d51 2
@


1.54
log
@add a comment to doucment a few ports which use pthreads
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2001/08/14 02:06:29 brad Exp $
d9 1
a9 1
VERSION=	3.23.41
@


1.53
log
@upgrade to MySQL 3.23.41
--
New version pointed out by: Wilbern Cobb <cobb@@vedge.com.ar>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2001/08/12 22:48:37 brad Exp $
d3 1
@


1.52
log
@- FULLPKGNAME-server -> PKGNAME-server, now that the behavior of
bsd.port.mk has been improved.
- bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2001/07/22 22:25:51 brad Exp $
d8 1
a8 1
VERSION=	3.23.40
d15 2
a16 1
MASTER_SITES=	http://www.kernelnotes.de/MySQL/Downloads/%SUBDIR%/ \
@


1.51
log
@better dependency checking
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2001/07/22 20:35:29 brad Exp $
d11 1
a11 1
FULLPKGNAME-server=	mysql-server-${VERSION}${FLAVOR_EXT}
d14 1
a14 1
NEED_VERSION=	1.413
a23 4
.if !defined(PACKAGING)
LIB_DEPENDS=	pthread.14:pth-1.4.*:devel/pth
.endif

d62 3
a64 1
.if defined(PACKAGING) && ${SUBPACKAGE} == "-server"
@


1.50
log
@upgrade to MySQL 3.23.40
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2001/06/15 19:10:11 brad Exp $
d24 3
a26 1
BUILD_DEPENDS=	${LOCALBASE}/lib/pth/libpthread.a:pth-1.4.*:devel/pth
d66 1
a66 1
.if ${SUBPACKAGE} == "-server"
@


1.49
log
@upgrade to MySQL 3.23.39
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2001/06/03 01:20:02 brad Exp $
d6 1
d8 1
a8 1
VERSION=	3.23.39
d12 1
d55 1
a55 1
MULTI_PACKAGES=	-server
@


1.48
log
@bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2001/06/02 20:18:43 brad Exp $
d7 1
a7 1
VERSION=	3.23.38
@


1.47
log
@upgrade to MySQL 3.23.38

- Also split the package into client and a server sub-package which
depends on the client portion. This allows for adding/removing the server
without needing to remove ports that might be dependent on the client
portion.
- innodb FLAVOR goes away and is replaced with the max FLAVOR like the
real MySQL distribution which gives us both Berkeley DB and InnoDB tables
for transaction support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2001/04/20 13:49:38 brad Exp $
d12 1
a12 1
NEED_VERSION=	1.402
@


1.46
log
@upgrade to MySQL 3.23.37
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2001/04/13 18:15:46 brad Exp $
d4 2
a5 1
COMMENT=	"multithreaded SQL database"
d7 1
a7 1
VERSION=	3.23.37
d9 2
a10 1
PKGNAME-innodb=	mysql-${VERSION}-innodb
d12 1
a12 1
NEED_VERSION=	1.384
d22 1
a22 1
LIB_DEPENDS=	pthread.14::devel/pth
d38 1
a38 1
		 --with-libwrap \
a45 1
		 --without-berkeley-db \
d50 1
a50 1
FLAVORS=	innodb
d53 5
a57 2
.if ${FLAVOR:L} == "innodb"
CONFIGURE_ARGS+= --with-innodb
d59 6
a64 1
CONFIGURE_ARGS+= --without-innodb
d80 1
a80 1
	@@sed -e s#@@PREFIX@@#${TRUEPREFIX}#g \
@


1.45
log
@add innodb FLAVOR to build MySQL with transaction support using InnoDB
(currently known throughout as Innobase though it will be renamed as of
MySQL 3.23.37 and up).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2001/04/07 04:09:53 brad Exp $
d6 1
a6 1
VERSION=	3.23.36
d8 1
a8 1
PKGNAME-innodb=mysql-${VERSION}-innodb
d53 1
a53 1
CONFIGURE_ARGS+= --with-innobase
d55 1
a55 1
CONFIGURE_ARGS+= --without-innobase
@


1.44
log
@same for Innobase and Gemini database(s).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2001/04/07 03:26:49 brad Exp $
d8 1
a44 1
		 --without-innobase \
d48 9
@


1.43
log
@ensure MySQL doesn't try to enable Berkeley DB transaction support by
default if it happens to be installed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2001/03/28 22:12:18 brad Exp $
d43 3
a45 1
		 --without-berkeley-db
@


1.42
log
@upgrade to MySQL 3.23.36
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2001/03/27 00:04:28 brad Exp $
d9 1
a9 1
NEED_VERSION=	1.363
d42 2
a43 1
		 --without-mit-threads
@


1.41
log
@bump Pth major rev # and change paths for headers/library.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2001/03/24 22:07:08 brad Exp $
d6 1
a6 1
VERSION=	3.23.35
@


1.40
log
@- integrate COMMENT
- remove extraneous ${INTALL_DATA_DIR}
- WRKDIR -> WRKBUILD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2001/03/24 21:47:12 brad Exp $
d19 1
a19 1
LIB_DEPENDS=	pthread.13::devel/pth
d43 2
a44 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.39
log
@add missing ending slash for shellhung.org dist site.
--
Pointed out by: Shell Hung <i@@shellhung.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2001/03/17 18:26:39 brad Exp $
d4 2
d9 1
a9 1
NEED_VERSION=	1.336
a57 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mysql
d60 2
a61 2
		${FILESDIR}/startup.sh > ${WRKDIR}/startup.sh
	${INSTALL_SCRIPT} ${WRKDIR}/startup.sh ${PREFIX}/lib/mysql
@


1.38
log
@add another dist site.
--
From & run by: Shell Hung <i@@shellhung.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2001/03/16 21:14:42 brad Exp $
d12 1
a12 1
		ftp://ftp.shellhung.org/pub/Mirror/mysql/Downloads/%SUBDIR%
@


1.37
log
@upgrade to MySQL 3.23.35
--
Availability of this version pointed out to by: fries@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2001/03/12 22:30:59 brad Exp $
d11 2
a12 1
		ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/Downloads/%SUBDIR%/
@


1.36
log
@upgrade to MySQL 3.23.34
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2001/03/12 00:10:26 brad Exp $
d4 2
a5 1
DISTNAME=	mysql-3.23.34
d26 1
a26 1
SUBST_VARS=	DB_DIR
@


1.35
log
@remove pth FLAVOR and just make it the default until our threads library is suitable for use with MySQL.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2001/02/14 00:55:40 brad Exp $
d4 1
a4 1
DISTNAME=	mysql-3.23.33
@


1.34
log
@oops, uncomment BROKEN tag.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2001/02/13 21:03:42 brad Exp $
d15 2
a38 6

FLAVORS=	pth
FLAVOR?=

.if ${FLAVOR:L} == "pth"
LIB_DEPENDS=	pthread.13::devel/pth
a40 5
.else
. if ${MACHINE_ARCH} == "sparc" || ${MACHINE_ARCH} == "powerpc"
BROKEN=		"pthreads are currently not working on the ${MACHINE_ARCH} architecture"
. endif
.endif
@


1.33
log
@upgrade to MySQL 3.23.33
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2001/01/23 00:48:45 brad Exp $
d47 1
a47 1
#BROKEN=		"pthreads are currently not working on the ${MACHINE_ARCH} architecture"
@


1.32
log
@upgrade to MySQL 3.23.32
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2001/01/21 17:09:12 brad Exp $
d4 1
a4 1
DISTNAME=	mysql-3.23.32
d7 5
a11 4
MASTER_SITES=	http://www.mysql.net/Downloads/MySQL-3.23/ \
		http://www.gina.net/mysql/Downloads/MySQL-3.23/ \
		http://mysql.pingzero.net/Downloads/MySQL-3.23/ \
		ftp://ftp.digex.net/pub/packages/database/mysql/Downloads/MySQL-3.23/
d47 1
a47 1
BROKEN=		"pthreads are currently not working on the ${MACHINE_ARCH} architecture"
@


1.31
log
@upgrade to MySQL 3.23.31
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2000/09/24 07:04:02 brad Exp $
d4 1
a4 1
DISTNAME=	mysql-3.23.31
@


1.30
log
@add name to MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2000/08/23 01:21:11 brad Exp $
d4 1
a4 1
DISTNAME=	mysql-3.22.32
d6 5
a10 9
NEED_VERSION=	1.330
MASTER_SITES=	http://web.tryc.on.ca/mysql/Downloads/MySQL-3.22/ \
		http://mysql.he.net/Downloads/MySQL-3.22/ \
		http://www.buoy.com/mysql/Downloads/MySQL-3.22/ \
		ftp://ftp.netcasting.net/pub/mysql/Downloads/MySQL-3.22/ \
		http://www.mysql.net/Downloads/MySQL-3.22/ \
		http://www.gina.net/mysql/Downloads/MySQL-3.22/ \
		http://mysql.pingzero.net/Downloads/MySQL-3.22/ \
		ftp://ftp.digex.net/pub/packages/database/mysql/Downloads/MySQL-3.22/ 
d28 3
d35 1
a35 2
		 --without-mit-threads \
		 --with-unix-socket-path="${DB_DIR}/mysql.sock"
d45 2
a46 2
. if ${MACHINE_ARCH} == "sparc"
BROKEN=		"pthreads are currently not working on the SPARC architecture"
d50 2
d63 3
a65 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mysql/Img
	@@rm -f ${WRKDIR}/startup.sh
	@@sed -e "s|@@PREFIX@@|${TRUEPREFIX}|" ${FILESDIR}/startup.sh > ${WRKDIR}/startup.sh
d67 3
a69 3
	cd ${WRKSRC}/Docs; ${INSTALL_DATA} manual.html manual.ps \
	manual_toc.html manual.txt ${PREFIX}/share/doc/mysql
	${INSTALL_DATA} ${WRKSRC}/Docs/Img/*.gif ${PREFIX}/share/doc/mysql/Img
@


1.29
log
@bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2000/08/15 18:24:24 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.320
d18 1
a18 1
MAINTAINER=	brad@@openbsd.org
@


1.28
log
@kill CFLAGS/CXXFLAGS override
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2000/08/15 13:24:00 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.310
@


1.27
log
@- re-introduce DB_DIR option
- make sure MySQL is started as user mysql from safe_mysqld.sh script
instead of the example startup.sh
- hard coded /usr/local -> ${PREFIX} in MESSAGE
- use user/group commands instead of cat/adduser in INSTALL script
- ${FOO} -> $FOO in INSTALL/DEINSTALL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2000/07/28 22:04:25 brad Exp $
a49 2
CONFIGURE_ENV=	CFLAGS="${CFLAGS} -pthread" \
		CXXFLAGS="${CXXFLAGS} -pthread"
@


1.26
log
@add a pth FLAVOR to the MySQL port which makes it use the GNU Portable
Threads port for the threads library, this is primarily intended for users
of the SPARC architecture though it will work on all other archs too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/07/04 02:49:34 krw Exp $
a3 2
#BROKEN=	installs files automatically in /etc

d25 3
d31 1
a31 1
		 --localstatedir="/var/mysql" \
d37 1
a37 1
		 --with-unix-socket-path="/var/mysql/mysql.sock"
@


1.25
log
@Change PFRAG.shared ldconfig invocation(s) to
NEWDYNLIBDIR() invocations.

Bump NEED_VERSION to 1.310 so NEWDYNLIBDIR() works.

As requested by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/06/25 04:53:10 brad Exp $
a26 4
.if ${MACHINE_ARCH} == "sparc"
BROKEN=		"pthreads are currently not working on the SPARC architecture"
.endif

d37 12
d51 1
@


1.24
log
@- add HOMEPAGE
- remove FAKE=Yes
- GNU_CONFIGURE -> CONFIGURE_STYLE
- use new framework for PLISTs
- add @@comment with RCS id to PLISTs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2000/04/08 05:40:07 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.301
@


1.23
log
@${PREFIX} -> ${TRUEPREFIX}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/04/07 19:07:20 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.234
d18 2
d31 1
a31 3
FAKE=	Yes

GNU_CONFIGURE=	Yes
@


1.23.2.1
log
@bring databases as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2000/07/28 22:04:25 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.310
a17 2
HOMEPAGE=	http://www.mysql.com/

d25 7
a31 1
CONFIGURE_STYLE= gnu
a40 12

FLAVORS=	pth
FLAVOR?=

.if ${FLAVOR:L} == "pth"
LIB_DEPENDS=	pthread.13::devel/pth
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
.else
. if ${MACHINE_ARCH} == "sparc"
BROKEN=		"pthreads are currently not working on the SPARC architecture"
. endif
a42 1
.endif
@


1.22
log
@maybe this will get some comments/feedback once it's actually in the ports
tree, Fake MySQL port
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/03/31 06:10:35 brad Exp $
d56 2
a57 1
	@@sed -e "s|@@PREFIX@@|${PREFIX}|" ${FILESDIR}/startup.sh > ${WRKDIR}/startup.sh
@


1.21
log
@- remove blank line
- remove license type
- better BROKEN message
- remove CONFIGURE_ARGS option --enable-thread-safe-client, the problems
caused by enabling it offset the good of enabling it in the first place
(programs that link agains't libmysqlclient.{a,so} should have an autoconf
test to check whether the library has support for pthreads built in or
not)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/03/24 22:11:38 espie Exp $
d4 1
a4 1
BROKEN=		installs files automatically in /etc
d8 1
a8 1
NEED_VERSION=	1.73
d29 1
a29 1
DB_DIR?=	/var/mysql
d34 1
a34 1
		 --localstatedir="${DB_DIR}" \
d40 1
a40 1
		 --with-unix-socket-path="${DB_DIR}/mysql.sock"
a52 22
pre-install:
	@@sed -e "s|@@PREFIX@@|${PREFIX}|" ${FILESDIR}/startup.sh > ${WRKDIR}/startup.sh
.if !defined(PACKAGE_BUILDING)
.if exists(${DB_DIR}) && !defined(OVERWRITE_DB)
	@@echo "You appear to already have a mysql database directory in ${DB_DIR}."
	@@echo ""
	@@echo "In order to preserve your existing data, you should:"
	@@echo "		- dump all your databases"
	@@echo "		- kill mysql if it is running"
	@@echo "		- delete the ${DB_DIR} directory"
	@@echo "		- run 'make install'"
	@@echo "		- start up mysql"
	@@echo "		- re-create all of your database"
	@@echo "		- re-load your data"
	@@echo ""
	@@echo "If you understand the consequences of this upgrade, please re-build this"
	@@echo "port with the environment variable OVERWRITE_DB defined."
	@@false
.endif
	@@PKG_PREFIX="${PREFIX}" PKG_DB_DIR="${DB_DIR}" sh ${PKGDIR}/INSTALL ${DISTNAME} PRE-INSTALL
.endif

d56 1
a60 5
	@@install-info ${PREFIX}/info/mysql.info ${PREFIX}/info/dir
	@@${LDCONFIG} -m ${PREFIX}/lib/mysql
.if !defined(PACKAGE_BUILDING)
	@@PKG_PREFIX="${PREFIX}" PKG_DB_DIR="${DB_DIR}" sh ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
.endif
@


1.20
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/03/03 11:32:22 turan Exp $
a17 1

a19 1
LICENSE_TYPE=		COPY
d26 1
a26 1
BROKEN=		"pthreads are currently not working SPARC"
a33 1
		 --enable-thread-safe-client \
@


1.19
log
@broken, installs files automatically in /etc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/02/16 19:01:20 brad Exp $
d8 1
a17 1
NEED_VERSION=	1.73
@


1.18
log
@- yes -> Yes
- turn on threads support for client programs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/02/15 07:36:39 brad Exp $
d3 2
@


1.17
log
@PERMIT_PKG_ -> PERMIT_PACKAGE_, PERMIT_DISTF_ -> PERMIT_DISTFILES_
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/02/14 22:32:08 brad Exp $
d15 2
d20 4
a23 4
PERMIT_PACKAGE_CDROM=	yes
PERMIT_PACKAGE_FTP=	yes
PERMIT_DISTFILES_CDROM=	yes
PERMIT_DISTFILES_FTP=	yes
d31 11
a41 8
GNU_CONFIGURE=	yes
CONFIGURE_ARGS=	--localstatedir="${DB_DIR}" \
		--without-perl \
		--without-debug \
		--without-readline \
		--without-bench \
		--without-mit-threads \
		--with-unix-socket-path="${DB_DIR}/mysql.sock"
@


1.16
log
@add license info
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/02/14 21:28:05 brad Exp $
d18 4
a21 4
PERMIT_PKG_CDROM=	yes
PERMIT_PKG_FTP=		yes
PERMIT_DISTF_CDROM=	yes
PERMIT_DISTF_FTP=	yes
@


1.15
log
@upgrade to MySQL 3.22.32
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/02/11 07:56:30 brad Exp $
d16 6
@


1.14
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/02/11 07:42:07 brad Exp $
d4 1
a4 1
DISTNAME=	mysql-3.22.30
a67 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/mysql/mysql
@


1.13
log
@re-add CONFIGURE_ENV junk to override CFLAGS and CXXFLAGS so that this
will compile on 2.6-RELEASE systems since there are so many people who
do not understand the concept of reading mailing lists before posting
questions which have been answered *MANY* times.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/01/13 20:24:57 brad Exp $
d32 1
a32 1
		CXXFLAGS="${CXXFLAGS -pthread"
@


1.12
log
@upgrade to MySQL 3.22.30
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/01/05 06:13:43 brad Exp $
d31 2
@


1.11
log
@change MAINTAINER, ports@@ -> brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/01/04 17:39:42 brad Exp $
d4 1
a4 1
DISTNAME=	mysql-3.22.29
d6 1
a6 2
MASTER_SITES=	http://www.mysql.org/Downloads/MySQL-3.22/ \
		http://web.tryc.on.ca/mysql/Downloads/MySQL-3.22/ \
@


1.10
log
@- forgot to run the INSTALL script again for the post-install target
- fix mysql_install_db to pickup the hostname that's used while creating
the database
- add a missing brace for DB_DIR in INSTALL script
- run mysql_install_db as user mysql to make sure the database has proper
file permissions
--
Reported by: Peter Strmberg <peter.stromberg@@commentor.se>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/01/03 08:36:19 brad Exp $
d16 1
a16 1
MAINTAINER=	ports@@openbsd.org
@


1.9
log
@upgrade to MySQL 3.22.29
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/01/01 05:54:12 brad Exp $
d74 3
@


1.8
log
@- upgrade to MySQL 3.22.27
- make the default database directory a bit easier to change with the
DB_DIR variable
- add warning about possible virtual memory limit exhaustion
- change default database directory to /var/mysql and chown it to the
user:group
- integrate check_old_version script into Makefile
- we should be able to make this into a full package now, though not
tested fully
- install user:group of mysql and make MySQL load as user mysql

Reviewed and tested by: ericj@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/12/02 03:47:36 brad Exp $
d4 1
a4 1
DISTNAME=	mysql-3.22.27
a32 2
DOCS=	manual.html manual.ps manual_toc.html manual.txt

d65 3
a67 3
	@@mkdir -p ${PREFIX}/share/doc/mysql
	@@mkdir -p ${PREFIX}/share/doc/mysql/Img
	@@mkdir -p ${PREFIX}/share/mysql/mysql
d69 2
a70 3
.for doc in ${DOCS}
	${INSTALL_DATA} ${WRKSRC}/Docs/${doc} ${PREFIX}/share/doc/mysql
.endfor
@


1.7
log
@- remove now unnecesary USE_EGCC and USE_EGXX tags
- split out startup.sh cretion from Makefile and just include it in the
  files subdir
- remove CONFIGURE_ENV, CFLAGS and CXXFLAGS do not require overriding with
  -current pthreads, the autoconf script properly detects and uses them
- cleanup Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/06/03 14:06:32 brad Exp $
d4 1
a4 2
DISTNAME=	mysql-3.22.22
PKGNAME=	mysql-3.22.22
d14 1
a14 1
		ftp://ftp.digex.net/pub/database/mysql/Downloads/MySQL-3.22/
d22 2
d25 1
a25 1
CONFIGURE_ARGS=	--localstatedir="/var/db/mysql" \
d30 2
a31 1
		--without-mit-threads
d35 9
d47 17
a63 1
	@@env ${MAKE_ENV} perl ${SCRIPTDIR}/check_old_version
d68 1
a69 3
.if !defined(PACKAGE_BUILDING)
	${PREFIX}/bin/mysql_install_db
.endif
d74 1
@


1.6
log
@back out previous commit, add in BROKEN message about pthread's
currently not working on SPARC
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/05/11 21:25:17 brad Exp $
d20 1
a20 1
BROKEN=		"pthread's are currently not working SPARC"
a22 4
PERL?=		perl

USE_EGCC=	yes
USE_EGXX=	yes
d24 1
a24 1
CONFIGURE_ARGS=	--localstatedir=/var/db/mysql \
d31 1
a31 4
CONFIGURE_ENV+=	PERL=${PERL} \
		PERL5=${PERL} \
		CFLAGS="${CFLAGS} -pthread" \
		CXXFLAGS="${CFLAGS} -pthread"
d34 1
d36 1
a36 1
	@@ ${SETENV} ${MAKE_ENV} ${PERL} ${SCRIPTDIR}/check_old_version
d40 2
a41 1
	${MKDIR} ${PREFIX}/share/mysql/mysql
d45 2
a46 13
	@@ ${ECHO} "#!/bin/sh" > ${PREFIX}/lib/mysql/startup.sh
	@@ ${ECHO} "#" >> ${PREFIX}/lib/mysql/startup.sh
	@@ ${ECHO} "" >> ${PREFIX}/lib/mysql/startup.sh
	@@ ${ECHO} "/sbin/ldconfig -m ${PREFIX}/lib/mysql" >> ${PREFIX}/lib/mysql/startup.sh
	@@ ${ECHO} "" >> ${PREFIX}/lib/mysql/startup.sh
	@@ ${ECHO} "if [ -x ${PREFIX}/bin/safe_mysqld ]" >> ${PREFIX}/lib/mysql/startup.sh
	@@ ${ECHO} "then" >> ${PREFIX}/lib/mysql/startup.sh
	@@ ${ECHO} "	${PREFIX}/bin/safe_mysqld > /dev/null & && ${ECHO} -n ' mysql'" >> ${PREFIX}/lib/mysql/startup.sh
	@@ ${ECHO} "fi" >> ${PREFIX}/lib/mysql/startup.sh
	@@ /bin/chmod 750 ${PREFIX}/lib/mysql/startup.sh

	${MKDIR} ${PREFIX}/share/doc/mysql
.for doc in manual.html manual.ps manual_toc.html manual.txt manual.texi include.texi
a48 4
	@@if [ ! -f ${PREFIX}/info/dir -a -f /usr/share/info/dir ]; then \
		${SED} -ne '1,/Menu:/p' /usr/share/info/dir > ${PREFIX}/info/dir; \
	fi
	${INSTALL_DATA} ${WRKSRC}/Docs/mysql.info ${PREFIX}/info
d50 1
a50 1
	${LDCONFIG} -m ${PREFIX}/lib/mysql
@


1.5
log
@- upgrade to mysql 3.22.22
- add a few more master dist sites
- remove @@exec of non-existant killall from PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/04/01 06:20:05 brad Exp $
d19 4
d32 2
a33 1
		--without-bench
d36 2
a37 5
		PERL5=${PERL}

.if defined(NATIVE_THREADS)
CONFIGURE_ARGS+= --without-mit-threads
CONFIGURE_ENV+=	CFLAGS="${CFLAGS} -pthread" \
a38 1
.endif
@


1.4
log
@fix dependency lists, fix email address's and remove unnecessary comments
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1999/04/01 03:06:51 brad Exp $
d4 2
a5 2
DISTNAME=	mysql-3.22.19b
PKGNAME=	mysql-3.22.19
d7 9
a18 7
MASTER_SITES=	ftp://mirror.aarnet.edu.au/mysql/Downloads/MySQL-3.22/ \
		http://www.fh-wolfenbuettel.de/ftp/pub/database/mysql/Downloads/MySQL-3.22/ \
		ftp://ftp.digex.net/pub/database/mysql/Downloads/MySQL-3.22/ \
		ftp://ftp.bse.bg/pub/Unix/database/MySQL/ \
		ftp://ftp.plig.net/pub/mysql/Downloads/MySQL-3.22/ \
		ftp://ftp.sunet.se/pub/unix/databases/relational/mysql/Downloads/MySQL-3.22/

d21 3
a23 2
USE_EGCC=	YES
GNU_CONFIGURE=	YES
d29 1
d31 6
a36 15
		PERL5=${PERL} \
		INSTALL_SCRIPT="${INSTALL_SCRIPT}" \
		CXXFLAGS="${CFLAGS} -pthread" \
		CFLAGS="${CFLAGS} -pthread"

CONFIGURE_ARGS+=	--with-mit-threads=no

.if !defined(NO_WARNINGS)
.if (${MACHINE_ARCH} != "i386")
pre-fetch:
	@@${ECHO} ""
	@@${ECHO} "*** WARNING: this port has only been tested on i386"
	@@${ECHO} "*** and may not work on other architectures"
	@@${ECHO} ""
.endif
a59 1
.if !defined(NOPORTDOCS)
a68 2
.endif

@


1.3
log
@remove FreeBSDisms
@
text
@d1 2
a2 2
# $OpenBSD: Makefile,v 1.2 1999/04/01 00:27:02 marc Exp $
# $ FreeBSD: Makefile,v 1.44 1999/03/04 21:27:58 dirk Exp $
d10 1
a10 2
MASTER_SITES=	\
		ftp://mirror.aarnet.edu.au/mysql/Downloads/MySQL-3.22/ \
@


1.2
log
@supress warning when mirroring distfiles
@
text
@d1 2
a2 3
# $OpenBSD: Makefile,v 1.1.1.1 1999/03/30 06:42:47 marc Exp $
# FreeBSD: Makefile,v 1.44 1999/03/04 21:27:58 dirk Exp
#
d78 1
a78 1
	${SETENV} OBJFORMAT=${PORTOBJFORMAT} ${LDCONFIG} -m ${PREFIX}/lib/mysql
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d36 1
d43 1
@


1.1.1.1
log
@mysql, from freebsd via d@@openbsd.org.  Uses egcc with -pthread
said to work on i386, not tested on any other architecture
@
text
@@
