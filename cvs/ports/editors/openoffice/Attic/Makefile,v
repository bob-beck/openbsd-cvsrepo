head	1.87;
access;
symbols
	OPENBSD_4_6:1.85.0.2
	OPENBSD_4_6_BASE:1.85
	OPENBSD_4_5:1.81.0.2
	OPENBSD_4_5_BASE:1.81
	OPENBSD_4_4:1.78.0.2
	OPENBSD_4_4_BASE:1.78
	OPENBSD_4_3:1.68.0.2
	OPENBSD_4_3_BASE:1.68
	OPENBSD_4_2:1.58.0.2
	OPENBSD_4_2_BASE:1.58
	OPENBSD_4_1:1.47.0.2
	OPENBSD_4_1_BASE:1.47
	OPENBSD_4_0:1.2.0.2
	OPENBSD_4_0_BASE:1.2
	robert_20060817:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.87
date	2009.11.12.15.26.26;	author sturm;	state dead;
branches;
next	1.86;

1.86
date	2009.08.10.06.31.08;	author kili;	state Exp;
branches;
next	1.85;

1.85
date	2009.04.26.11.01.04;	author ajacoutot;	state Exp;
branches;
next	1.84;

1.84
date	2009.04.26.09.38.25;	author sthen;	state Exp;
branches;
next	1.83;

1.83
date	2009.03.15.13.23.36;	author espie;	state Exp;
branches;
next	1.82;

1.82
date	2009.03.11.23.22.00;	author sthen;	state Exp;
branches;
next	1.81;

1.81
date	2008.11.21.18.35.03;	author jolan;	state Exp;
branches;
next	1.80;

1.80
date	2008.11.13.13.17.43;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2008.10.30.10.27.28;	author robert;	state Exp;
branches;
next	1.78;

1.78
date	2008.06.27.13.11.11;	author kurt;	state Exp;
branches;
next	1.77;

1.77
date	2008.06.24.02.46.21;	author kurt;	state Exp;
branches;
next	1.76;

1.76
date	2008.06.13.17.04.57;	author robert;	state Exp;
branches;
next	1.75;

1.75
date	2008.05.27.03.15.08;	author bernd;	state Exp;
branches;
next	1.74;

1.74
date	2008.05.21.06.36.58;	author bernd;	state Exp;
branches;
next	1.73;

1.73
date	2008.05.19.10.27.49;	author robert;	state Exp;
branches;
next	1.72;

1.72
date	2008.05.05.15.18.29;	author robert;	state Exp;
branches;
next	1.71;

1.71
date	2008.04.28.11.18.46;	author robert;	state Exp;
branches;
next	1.70;

1.70
date	2008.04.14.14.28.34;	author jasper;	state Exp;
branches;
next	1.69;

1.69
date	2008.03.26.13.07.04;	author sturm;	state Exp;
branches;
next	1.68;

1.68
date	2008.01.04.14.52.31;	author robert;	state Exp;
branches;
next	1.67;

1.67
date	2007.12.07.11.30.55;	author robert;	state Exp;
branches;
next	1.66;

1.66
date	2007.11.27.14.19.52;	author robert;	state Exp;
branches;
next	1.65;

1.65
date	2007.11.15.15.54.32;	author robert;	state Exp;
branches;
next	1.64;

1.64
date	2007.11.14.20.10.49;	author robert;	state Exp;
branches;
next	1.63;

1.63
date	2007.11.13.09.46.27;	author robert;	state Exp;
branches;
next	1.62;

1.62
date	2007.10.22.10.47.19;	author steven;	state Exp;
branches;
next	1.61;

1.61
date	2007.10.02.16.53.49;	author naddy;	state Exp;
branches;
next	1.60;

1.60
date	2007.09.20.10.05.19;	author robert;	state Exp;
branches;
next	1.59;

1.59
date	2007.09.16.00.44.00;	author merdely;	state Exp;
branches;
next	1.58;

1.58
date	2007.07.02.07.35.29;	author robert;	state Exp;
branches;
next	1.57;

1.57
date	2007.06.29.16.04.32;	author kurt;	state Exp;
branches;
next	1.56;

1.56
date	2007.06.15.07.42.17;	author robert;	state Exp;
branches;
next	1.55;

1.55
date	2007.06.09.10.42.56;	author steven;	state Exp;
branches;
next	1.54;

1.54
date	2007.06.01.05.00.04;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2007.05.22.17.23.53;	author naddy;	state Exp;
branches;
next	1.52;

1.52
date	2007.05.14.17.13.01;	author kurt;	state Exp;
branches;
next	1.51;

1.51
date	2007.03.29.10.53.42;	author robert;	state Exp;
branches;
next	1.50;

1.50
date	2007.03.19.13.15.30;	author robert;	state Exp;
branches;
next	1.49;

1.49
date	2007.03.18.12.49.32;	author robert;	state Exp;
branches;
next	1.48;

1.48
date	2007.03.17.15.27.44;	author robert;	state Exp;
branches;
next	1.47;

1.47
date	2007.02.09.00.50.17;	author kurt;	state Exp;
branches;
next	1.46;

1.46
date	2007.01.17.07.29.01;	author robert;	state Exp;
branches;
next	1.45;

1.45
date	2007.01.16.02.48.02;	author kurt;	state Exp;
branches;
next	1.44;

1.44
date	2007.01.04.13.50.34;	author robert;	state Exp;
branches;
next	1.43;

1.43
date	2007.01.04.09.12.33;	author robert;	state Exp;
branches;
next	1.42;

1.42
date	2006.12.16.12.22.33;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2006.12.14.20.40.28;	author robert;	state Exp;
branches;
next	1.40;

1.40
date	2006.12.14.13.12.24;	author robert;	state Exp;
branches;
next	1.39;

1.39
date	2006.12.14.08.23.54;	author robert;	state Exp;
branches;
next	1.38;

1.38
date	2006.12.13.10.25.14;	author robert;	state Exp;
branches;
next	1.37;

1.37
date	2006.11.28.09.35.27;	author robert;	state Exp;
branches;
next	1.36;

1.36
date	2006.11.26.20.59.07;	author robert;	state Exp;
branches;
next	1.35;

1.35
date	2006.11.25.12.40.14;	author robert;	state Exp;
branches;
next	1.34;

1.34
date	2006.11.25.10.30.58;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2006.11.24.10.52.33;	author robert;	state Exp;
branches;
next	1.32;

1.32
date	2006.11.23.23.19.27;	author robert;	state Exp;
branches;
next	1.31;

1.31
date	2006.11.23.09.35.52;	author robert;	state Exp;
branches;
next	1.30;

1.30
date	2006.11.21.17.11.52;	author ian;	state Exp;
branches;
next	1.29;

1.29
date	2006.11.20.09.33.02;	author robert;	state Exp;
branches;
next	1.28;

1.28
date	2006.11.18.16.11.33;	author kurt;	state Exp;
branches;
next	1.27;

1.27
date	2006.11.18.03.54.54;	author kurt;	state Exp;
branches;
next	1.26;

1.26
date	2006.11.17.14.08.40;	author kurt;	state Exp;
branches;
next	1.25;

1.25
date	2006.11.12.19.27.40;	author robert;	state Exp;
branches;
next	1.24;

1.24
date	2006.11.09.15.18.01;	author kurt;	state Exp;
branches;
next	1.23;

1.23
date	2006.11.09.08.31.29;	author robert;	state Exp;
branches;
next	1.22;

1.22
date	2006.11.08.09.34.03;	author robert;	state Exp;
branches;
next	1.21;

1.21
date	2006.11.04.12.34.18;	author kurt;	state Exp;
branches;
next	1.20;

1.20
date	2006.11.04.12.29.20;	author kurt;	state Exp;
branches;
next	1.19;

1.19
date	2006.11.03.05.11.09;	author kurt;	state Exp;
branches;
next	1.18;

1.18
date	2006.10.31.09.33.35;	author robert;	state Exp;
branches;
next	1.17;

1.17
date	2006.10.29.22.42.49;	author kurt;	state Exp;
branches;
next	1.16;

1.16
date	2006.10.27.16.02.02;	author kurt;	state Exp;
branches;
next	1.15;

1.15
date	2006.10.25.22.49.50;	author kurt;	state Exp;
branches;
next	1.14;

1.14
date	2006.10.21.22.20.50;	author kurt;	state Exp;
branches;
next	1.13;

1.13
date	2006.10.20.19.58.23;	author ian;	state Exp;
branches;
next	1.12;

1.12
date	2006.10.20.14.59.26;	author kurt;	state Exp;
branches;
next	1.11;

1.11
date	2006.10.19.15.16.50;	author kurt;	state Exp;
branches;
next	1.10;

1.10
date	2006.10.18.18.17.12;	author ian;	state Exp;
branches;
next	1.9;

1.9
date	2006.10.18.17.05.57;	author ian;	state Exp;
branches;
next	1.8;

1.8
date	2006.10.18.12.45.59;	author kurt;	state Exp;
branches;
next	1.7;

1.7
date	2006.10.14.17.33.55;	author robert;	state Exp;
branches;
next	1.6;

1.6
date	2006.10.11.11.19.55;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2006.09.30.18.47.25;	author robert;	state Exp;
branches;
next	1.4;

1.4
date	2006.09.22.07.44.09;	author jolan;	state Exp;
branches;
next	1.3;

1.3
date	2006.09.20.09.06.19;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2006.08.20.03.36.52;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2006.08.17.14.56.21;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.08.17.14.56.21;	author robert;	state Exp;
branches;
next	;


desc
@@


1.87
log
@remove OO2 which has been unlinked from builds since april

ok sthen, msf
@
text
@# $OpenBSD: Makefile,v 1.86 2009/08/10 06:31:08 kili Exp $

ONLY_FOR_ARCHS= amd64 i386

COMMENT-main=	multi-platform productivity suite
COMMENT-kde=	optional integration of OpenOffice to the KDE environment
COMMENT-java=	optional integration of OpenOffice java features

VERSION=	2.4.2
DISTNAME=	OOo_${VERSION}
WRKDIST=	${WRKDIR}/OOH680_m18
PKGNAME=	openoffice-${VERSION}
PKGNAME-main=	openoffice-${VERSION}p3
PKGNAME-kde=	openoffice-kde-${VERSION}p0
PKGNAME-java=	openoffice-java-${VERSION}p2
CATEGORIES=	editors productivity

SHARED_LIBS=	stlport_gcc	4.5

MAINTAINER=	Robert Nagy <robert@@openbsd.org>

HOMEPAGE=	http://www.openoffice.org/
MASTER_SITES=	http://ftp.linux.cz/pub/localization/OpenOffice.org/devel/build/Sources/ \
		http://humppa.hu/ooo/ \
		ftp://ftp.ussg.iu.edu/pub/openoffice/stable/${VERSION}/ \
		ftp://sunsite.informatik.rwth-aachen.de/pub/mirror/OpenOffice/stable/${VERSION}/ \
		ftp://ftp.tu-chemnitz.de/pub/openoffice/stable/${VERSION}/ \
		ftp://ftp.nluug.nl/pub/office/openoffice/stable/${VERSION}/ \
		http://vlaai.snt.utwente.nl/pub/software/openoffice/stable/${VERSION}/ \
		ftp://openoffice.mirror.cygnal.ca/openoffice/stable/${VERSION}/
MASTER_SITES0=	http://www.bsd.hu/~robert/ooo/ \
		http://humppa.hu/ooo/

DISTFILES=	ooo-desktop-0.1.tar.gz:0
.for dfile in binfilter core l10n sdk system
DISTFILES+=	${DISTNAME}_src_${dfile}.tar.bz2
.endfor

DIST_SUBDIR=	openoffice

# See http://www.openoffice.org/about.html#licenses
# and http://www.openoffice.org/license.html
# and http://www.openoffice.org/FAQs/faq-licensing.html 
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MULTI_PACKAGES=		-main -kde -java

PSEUDO_FLAVORS=	normal_build no_lang
FLAVORS=	debug
FLAVOR?=

.if !${FLAVOR:L:Mno_lang}
LANGS=			bg ca de es fa fi fr hu it ja ko \
			lt lv nl pl pt-BR ru sl sv

.for l in ${LANGS:L}
MULTI_PACKAGES+=	-i18n-$l
PKGNAME-i18n-$l=	openoffice-i18n-$l-${VERSION}
COMMENT-i18n-$l=	$l language pack for OpenOffice.Org
RUN_DEPENDS-i18n-$l=	::editors/openoffice
WANTLIB-i18n-$l=
LIB_DEPENDS-i18n-$l=
.endfor
.endif

BUILD_DEPENDS=	:zip-*:archivers/zip \
		:unzip-*:archivers/unzip \
		:bison-*:devel/bison \
		:tcsh-*:shells/tcsh \
		:p5-Archive-Zip-*:archivers/p5-Archive-Zip \
		::print/cups \
		::devel/apache-ant \
		:db-java->=4,<5:databases/db/v4,-java,java \
		::devel/boost

MODULES+=	lang/python
LIB_DEPENDS-main=gdk-x11-2.0.>=400.14,gdk_pixbuf-2.0.>=400.14,gtk-x11-2.0.>=400.14::x11/gtk+2 \
		${MODPY_LIB_DEPENDS} \
		db.>=4:db->=4,<5:databases/db/v4 \
		xslt.>=3::textproc/libxslt \
		curl.>=7::net/curl \
		neon.>=24::net/neon \
		wpd.>=8::textproc/libwpd \
		icuuc.>=0::textproc/icu4c
WANTLIB-main=	ICE SM X11 Xau Xcomposite Xdamage Xdmcp Xext Xrender Xcursor \
		Xfixes Xi Xinerama Xrandr atk-1.0 c cairo crypto expat \
		fontconfig freetype glib-2.0 glitz gmodule-2.0 gobject-2.0 \
		gthread-2.0 iconv intl jpeg m pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 png pthread stdc++ ssl util xml2 z icui18n icule \
		pthread-stubs xcb
RUN_DEPENDS-main=	::java/javaPathHelper \
			:desktop-file-utils-*:devel/desktop-file-utils

MODULES+=		x11/qt3
RUN_DEPENDS-kde=	::editors/openoffice
LIB_DEPENDS-kde=	${MODQT_LIB_DEPENDS} \
			kabc,kdecore,kdeui,kio::x11/kde/libs3
WANTLIB-kde=		X11 Xext m pthread-stubs xcb

MODULES+=		java
MODJAVA_VER=		1.4+
MODJAVA_JRERUN=		Yes
LIB_DEPENDS-java=
RUN_DEPENDS-java=	${MODJAVA_RUN_DEPENDS} \
			::editors/openoffice \
			:db-java->=4,<5:databases/db/v4,-java,java
WANTLIB-java=		c m pthread stdc++


USE_X11=	Yes
USE_GMAKE=	Yes
NO_REGRESS=	Yes
VMEM_WARNING=	Yes

PATCHFILES=	build-java-target-2.4.0.diff:0

PATCHORIG=	.orig.port
WRKCONF=	${WRKSRC}/config_office

CONFIGURE_STYLE=	autoconf no-autoheader
AUTOCONF_VERSION=	2.59
AUTOCONF_DIR=		${WRKCONF}

CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
		QTINC="${MODQT_INCDIR}" QTDIR="${MODQT_LIBDIR}"

CONFIGURE_ARGS=	--disable-gnome-vfs \
		--disable-mozilla \
		--disable-odk \
		--disable-pasf \
		--enable-cairo \
		--enable-kde \
		--with-system-jpeg \
		--with-system-python \
		--with-system-libxml \
		--with-system-stdlibs \
		--with-system-freetype \
		--with-system-curl \
		--with-system-zlib \
		--with-system-expat \
		--with-system-neon \
		--with-system-db \
		--with-system-boost \
		--with-system-libwpd \
		--with-system-openssl \
		--with-system-icu \
		--with-epm=internal \
		--with-alloc=system \
		--with-java \
		--with-java-target-version=1.4 \
		--with-jdk-home=${JAVA_HOME} \
		--with-ant-home=${LOCALBASE}/ant/lib \
		--with-db-jar=${LOCALBASE}/lib/db4/db.jar \
		--with-lang="en-US ${LANGS}"

.if ${FLAVOR:L:Mdebug}
CONFIGURE_ARGS+=	--enable-symbols \
			--enable-debug
.endif

MAKE_ENV+=	envcflags="${CFLAGS}"

# kludge
TCSH=		${LOCALBASE}/bin/tcsh

.if ${FLAVOR:L:Mnormal_build}
BUILD_CMD=	dmake && cd instsetoo_native/util && dmake ooolanguagepack
.else
BUILD_CMD=	cd instsetoo_native && build.pl --all --dlv_switch -link && \
		cd util && dmake ooolanguagepack
.endif

pre-patch:
.for arch in intel x86-64
	@@cd ${WRKSRC}/bridges/source/cpp_uno && \
		cp -R gcc3_freebsd_${arch} gcc3_openbsd_${arch} && \
		perl -pi -e "s,FREEBSD,OPENBSD,g" gcc3_openbsd_${arch}/makefile.mk
.endfor

do-build:
	@@cd ${WRKBUILD} && \
		./bootstrap && \
		${SETENV} ${MAKE_ENV} ${TCSH} -c 'limit descriptors 256 && source OpenBSDEnv.Set && ${BUILD_CMD}' 

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/openoffice
	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/48x48/apps

	cd ${WRKDIR}/ooo-desktop && \
		for DFILE in `ls -1 *.desktop`; do \
			${INSTALL_DATA} $$DFILE \
				${PREFIX}/share/applications/openoffice; \
		done && \
		for ICONS in `ls -1 *.png`; do \
			${INSTALL_DATA} $$ICONS ${PREFIX}/share/icons/hicolor/48x48/apps; \
		done

	cd ${WRKSRC}/instsetoo_native/unxobsd.pro/OpenOffice/portable/install/en-US*/openbsd-* && \
		for SW in `ls -1 *.sw`; do \
			${TAR} xf $$SW -C ${PREFIX}; \
		done

.for l in ${LANGS}
	cd ${WRKSRC}/instsetoo_native/unxobsd.pro/OpenOffice_languagepack/portable/install/$l/openbsd-* && \
		for SW in `ls -1 *.sw`; do \
			${TAR} xf $$SW -C ${PREFIX}; \
		done
.endfor

	cd ${WRKSRC}/bridges/unxobsd.pro/lib && \
		for UNOLIB in `ls -1 *.so`; do \
			${INSTALL_DATA} $$UNOLIB \
				${PREFIX}/openoffice/program; \
		done

	${INSTALL_SCRIPT} ${FILESDIR}/soffice.sh ${PREFIX}/bin/soffice
	perl -pi -e "s,%%LOCALBASE%%,${LOCALBASE},g; \
		s,%%X11BASE%%,${X11BASE},g" \
                ${PREFIX}/bin/soffice \

	cd ${PREFIX}/bin && \
	for app in sbase scalc sdraw simpress smath setofficelang spadmin swriter; do \
		ln -sf soffice $$app ; done

.include <bsd.port.mk>
@


1.86
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2009/04/26 11:01:04 ajacoutot Exp $
@


1.85
log
@CONFIGURE_ENV += PYTHON="${MODPY_BIN}" is inherited from the python module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2009/04/26 09:38:25 sthen Exp $
d13 2
a14 2
PKGNAME-main=	openoffice-${VERSION}p2
PKGNAME-kde=	openoffice-kde-${VERSION}
d92 2
a93 1
		pangoft2-1.0 png pthread stdc++ ssl util xml2 z icui18n icule 
d101 1
a101 1
WANTLIB-kde=		X11 Xext m
@


1.84
log
@pkgname bumps following java.port.mk r1.18, pointed out by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2009/03/15 13:23:36 espie Exp $
d128 1
a128 2
		QTINC="${MODQT_INCDIR}" QTDIR="${MODQT_LIBDIR}" \
		PYTHON="${MODPY_BIN}"
@


1.83
log
@fix depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2009/03/11 23:22:00 sthen Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p1
d15 1
a15 1
PKGNAME-java=	openoffice-java-${VERSION}p1
@


1.82
log
@bump pkgname following java dep change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2008/11/21 18:35:03 jolan Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p0
d15 1
a15 1
PKGNAME-java=	openoffice-java-${VERSION}p0
d76 1
a76 1
		:db-java-4.*:databases/db/v4,-java,java \
d82 1
a82 1
		db.>=4:db-4.*:databases/db/v4 \
d108 1
a108 1
			:db-java-4.*:databases/db/v4,-java,java
@


1.81
log
@kill dead mirror
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2008/11/13 13:17:43 ajacoutot Exp $
d15 1
a15 1
PKGNAME-java=	openoffice-java-${VERSION}
@


1.80
log
@* openoffice
- fix build after neon update

input from and ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2008/10/30 10:27:28 robert Exp $
d30 1
a30 2
		ftp://openoffice.mirror.cygnal.ca/openoffice/stable/${VERSION}/ \
		http://mirrors.protection.cx/~jolan/
@


1.79
log
@update to OpenOffice.Org 2.4.2, which fixes the following vulns:

* CVE-2008-2237: Manipulated WMF files can lead to heap overflows and arbitrary code execution
* CVE-2008-2238: Manipulated EMF files can lead to heap overflows and arbitrary code execution
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2008/06/27 13:11:11 kurt Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}
@


1.78
log
@- fix build failure caused by the addition of getpwnam_r(3)
- add @@bin markers to pkg lists
okay robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2008/06/24 02:46:21 kurt Exp $
d9 1
a9 1
VERSION=	2.4.1
d11 1
a11 1
WRKDIST=	${WRKDIR}/OOH680_m17
d13 3
a15 3
PKGNAME-main=	openoffice-${VERSION}p0
PKGNAME-kde=	openoffice-kde-${VERSION}p0
PKGNAME-java=	openoffice-java-${VERSION}p1
@


1.77
log
@Bump PKGNAME due to RUN_DEPENDS change caused by 1.3 and 1.4 jdk
depreciations.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2008/06/13 17:04:57 robert Exp $
d13 3
a15 3
PKGNAME-main=	openoffice-${VERSION}
PKGNAME-kde=	openoffice-kde-${VERSION}
PKGNAME-java=	openoffice-java-${VERSION}p0
@


1.76
log
@update to OpenOffice.Org 2.4.1;

fixes:
CVE-2008-2152: Different kinds of manipulated files may lead to
heap overflows and arbitrary code execution
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2008/05/27 03:15:08 bernd Exp $
d15 1
a15 1
PKGNAME-java=	openoffice-java-${VERSION}
@


1.75
log
@Fix my last commit which broke the build. Sorry!

noticed by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2008/05/21 06:36:58 bernd Exp $
d9 1
a9 1
VERSION=	2.4.0
d11 3
a13 3
WRKDIST=	${WRKDIR}/OOH680_m12
PKGNAME=	openoffice-${VERSION}p2
PKGNAME-main=	openoffice-${VERSION}p2
@


1.74
log
@Install the menu icons into the right directory and adjust .desktop files
so the icons are displayed correctly.

ok robert@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2008/05/19 10:27:49 robert Exp $
d192 1
a192 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/openoffice
@


1.73
log
@fix LIB_DEPENDS and WANTLIB; noticed by Alexey Suslikov <alexey.suslikov@@gmail.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2008/05/05 15:18:29 robert Exp $
d12 2
a13 2
PKGNAME=	openoffice-${VERSION}p1
PKGNAME-main=	openoffice-${VERSION}p1
d35 1
a35 1
DISTFILES=	ooo-desktop.tar.gz:0
d200 1
a200 1
			${INSTALL_DATA} $$ICONS ${PREFIX}/share/icons/openoffice; \
@


1.72
log
@use textproc/icu4c instead of the bundled one; bump PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2008/04/28 11:18:46 robert Exp $
d12 2
a13 2
PKGNAME=	openoffice-${VERSION}p0
PKGNAME-main=	openoffice-${VERSION}p0
d78 1
a78 2
		::devel/boost \
		::textproc/icu4c
d87 2
a88 1
		wpd.>=8::textproc/libwpd
d92 2
a93 2
		gthread-2.0 iconv intl jpeg m ossaudio pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 png pthread stdc++ ssl util xml2 z
@


1.71
log
@update to OpenOffice.org 2.4.0;
 - rename the br-pt subpackage to pt-br because of an i18n change
   in openoffice
 - regen some patches
 - fix WANTLIB and LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2008/03/26 13:07:04 sturm Exp $
d12 2
a13 2
PKGNAME=	openoffice-${VERSION}
PKGNAME-main=	openoffice-${VERSION}
d18 1
a18 5
SHARED_LIBS=	icudata		36.0 \
		icui18n		36.0 \
		icule		36.0 \
		icuuc		36.0 \
		stlport_gcc	4.5
d78 2
a79 1
		::devel/boost
d151 1
@


1.70
log
@- fix typo that prevents arguments being passed to setofficelang

ok kurt@@ robert@@
@
text
@d9 1
a9 1
VERSION=	2.3.1
d11 1
a11 1
WRKDIST=	${WRKDIR}/OOG680_m9
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p1
d15 1
a15 1
PKGNAME-java=	openoffice-java-${VERSION}p0
d61 2
a62 2
LANGS=			bg br-pt ca de es fa fi fr hu it ja ko \
			lt lv nl pl ru sl sv
d64 1
a64 1
.for l in ${LANGS}
a78 1
		::textproc/libxslt \
d88 1
d92 2
a93 2
WANTLIB-main=	ICE SM X11 Xau Xdmcp Xext Xrender Xcursor Xfixes Xi Xinerama \
		Xrandr atk-1.0 c cairo expat \
d95 4
a98 3
		gthread-2.0 iconv intl ossaudio jpeg m pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 png pthread stdc++ util xml2 z
RUN_DEPENDS-main=::java/javaPathHelper
d121 1
a121 1
PATCHFILES=	build-java-target-2.2.0.diff:0
d153 1
@


1.69
log
@missing PKGNAME bumps after java.port.mk changes

noticed by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2008/01/04 14:52:31 robert Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p0
@


1.68
log
@disable broken pasf support (audio) until there is a better fix because it utterly
breaks the build in most of the cases and bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2007/12/07 11:30:55 robert Exp $
d15 1
a15 1
PKGNAME-java=	openoffice-java-${VERSION}
@


1.67
log
@update to version 2.3.1;

This is a minor bug fix release with no new features for users.
However, as this release also fixes a security vulnerability with
database files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2007/11/27 14:19:52 robert Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}
a90 1
		sndfile.>=1::audio/libsndfile \
d137 1
a149 1
		--with-system-sndfile \
@


1.66
log
@move some files to their correct place and bump PKGNAMEs
from Mikolaj Kucharski <mikolaj@@kucharski.name>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2007/11/15 15:54:32 robert Exp $
d9 1
a9 1
VERSION=	2.3.0
d11 1
a11 1
WRKDIST=	${WRKDIR}/OOG680_m5
d66 1
a66 1
PKGNAME-i18n-$l=	openoffice-i18n-$l-${VERSION}p0
@


1.65
log
@- remove the linkobj flavor and use the same method for
the default build process
- add a PSEUDO_FLAVOR named normal_build for doing a build
w/o harlinking object files. this takes much more disk space

requested by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2007/11/14 20:10:49 robert Exp $
d66 1
a66 1
PKGNAME-i18n-$l=	openoffice-i18n-$l-${VERSION}
@


1.64
log
@replace the cleanobj flavor which is utterly broken
with the linkobj flavor, which uses hardlinks instead
of copying all files to the deliver dir.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2007/11/13 09:46:27 robert Exp $
d56 1
a56 1
PSEUDO_FLAVORS=	linkobj no_lang
d172 3
a174 1
.if ${FLAVOR:L:Mlinkobj}
a176 2
.else
BUILD_CMD=	dmake && cd instsetoo_native/util && dmake ooolanguagepack
@


1.63
log
@- update to openoffice 2.3 that has many new features
  and a lot of speedup.
- fix the debug flavor
- rearrange the PLISTs so the no_lang flavor won't try to
  include some language files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2007/10/22 10:47:19 steven Exp $
d56 1
a56 1
PSEUDO_FLAVORS=	cleanobj no_lang
d172 2
a173 2
.if ${FLAVOR:L:Mcleanobj}
BUILD_CMD=	cd instsetoo_native && build.pl --all --dlv_switch -deloutput && \
@


1.62
log
@bump pkgname after switch to python 2.5
use MODPY_LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2007/10/02 16:53:49 naddy Exp $
d9 1
a9 1
VERSION=	2.2.1
d11 1
a11 1
WRKDIST=	${WRKDIR}/OOF680_m18
d13 3
a15 3
PKGNAME-main=	openoffice-${VERSION}p2
PKGNAME-kde=	openoffice-kde-${VERSION}p0
PKGNAME-java=	openoffice-java-${VERSION}p0
d121 1
a121 2
PATCHFILES=	go_oo_src680_20061105.diff:0 \
		build-java-target-2.2.0.diff:0
d163 2
a164 1
CONFIGURE_ARGS+=	--enable-symbols
d204 1
a204 1
	cd ${WRKSRC}/instsetoo_native/unxobsd.pro/OpenOffice/portable/install/en-US/openbsd-* && \
d215 6
@


1.61
log
@fix build with curl 7.17.0; ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2007/09/20 10:05:19 robert Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p1
d85 1
a85 1
MODULES+=	python
d87 1
a87 1
		python${MODPY_VERSION}:python-${MODPY_VERSION}*:lang/python/${MODPY_VERSION} \
@


1.60
log
@Add Persian (Farsi) language support. Requested by Lucie Goga <lucie.goga@@gmx.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2007/09/16 00:44:00 merdely Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p0
d89 1
a89 1
		curl.>=2::net/curl \
@


1.59
log
@Removed surrounding quotes in COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2007/07/02 07:35:29 robert Exp $
d61 1
a61 1
LANGS=			bg br-pt ca de es fi fr hu it ja ko \
@


1.58
log
@add catalan language support; requested by Pau Amaro-Seoane <pau@@aei.mpg.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2007/06/29 16:04:32 kurt Exp $
d5 3
a7 3
COMMENT-main=	"multi-platform productivity suite"
COMMENT-kde=	"optional integration of OpenOffice to the KDE environment"
COMMENT-java=	"optional integration of OpenOffice java features"
@


1.57
log
@fix an amd64 segfault see while testing the java subpackage (File ->
Wizards -> Fax). patch objtained from OOo bug report:
http://www.openoffice.org/issues/show_bug.cgi?id=71815
okay robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2007/06/15 07:42:17 robert Exp $
d61 1
a61 1
LANGS=			bg br-pt de es fi fr hu it ja ko \
@


1.56
log
@update to version 2.2.1; mainly a bugfix release

for more information please read the release notes:
http://development.openoffice.org/releases/2.2.1.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2007/06/09 10:42:56 steven Exp $
d13 3
a15 3
PKGNAME-main=	openoffice-${VERSION}
PKGNAME-kde=	openoffice-kde-${VERSION}
PKGNAME-java=	openoffice-java-${VERSION}
@


1.55
log
@apply this patch from redhat
https://www.redhat.com/archives/fedora-cvs-commits/2007-March/msg00245.html

which fixes a crash on amd64 in the recently used file stuff when opening
MS office documents.

fix WANTLIB while here.

help, test, and okay kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2007/06/01 05:00:04 ajacoutot Exp $
d9 1
a9 1
VERSION=	2.2.0
d11 1
a11 1
WRKDIST=	${WRKDIR}/OOF680_m14
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p2
@


1.54
log
@- small hack to make OpenOffice.org be able to open files with special
characters in their name

"commit" robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2007/05/22 17:23:53 naddy Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p1
d93 2
a94 1
WANTLIB-main=	ICE SM X11 Xau Xdmcp Xext Xrender atk-1.0 c cairo expat \
@


1.53
log
@remove leading "a " from COMMENT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2007/05/14 17:13:01 kurt Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p0
@


1.52
log
@Save a chunk of time and disk space by preventing the OOo build from
building a complete epm package for each lang. We only need a full
package for en-US and langpacks for the rest. Also add a US based
mirror to the list of master sites. okay robi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2007/03/29 10:53:42 robert Exp $
d5 1
a5 1
COMMENT-main=	"a multi-platform productivity suite"
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}
@


1.51
log
@update to version 2.2.0 and fix WANTLIB-main
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2007/03/19 13:15:30 robert Exp $
d29 1
d172 2
a173 1
BUILD_CMD=	cd instsetoo_native && build.pl --all --dlv_switch -deloutput
d175 1
a175 1
BUILD_CMD=	dmake
d203 7
a209 2
.for l in en-US ${LANGS}
	cd ${WRKSRC}/instsetoo_native/unxobsd.pro/OpenOffice/portable/install/$l/openbsd-* && \
@


1.50
log
@update to openoffice-2.2.0m13 and move the finnish license
files to the correct place. (noticed by steven@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2007/03/18 12:49:32 robert Exp $
d9 1
a9 1
VERSION=	2.2.0m13
d11 1
a11 1
WRKDIST=	${WRKDIR}/ooo_OOF680_m13_src
d38 4
a41 6
#DISTFILES=	${DISTNAME}_src.tar.bz2 ooo-desktop.tar.gz:0
#.for dfile in binfilter l10n sdk system
#DISTFILES+=	${DISTNAME}_src_${dfile}.tar.bz2
#.endfor

DISTFILES=	OOo_OOF680_m13_source.tar.gz ooo-desktop.tar.gz:0
d92 2
a93 2
WANTLIB-main=	ICE SM X11 Xau Xext Xrender atk-1.0 c cairo expat fontconfig \
		freetype glib-2.0 glitz gmodule-2.0 gobject-2.0 \
@


1.49
log
@add another master site for the distfile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2007/03/17 15:27:44 robert Exp $
d9 1
a9 1
VERSION=	2.2.0m12
d11 1
a11 1
WRKDIST=	${WRKDIR}/ooo_OOF680_m12_src
d43 1
a43 1
DISTFILES=	OOo_OOF680_m12_source.tar.gz ooo-desktop.tar.gz:0
@


1.48
log
@update to version 2.2.0m18;

- fix the PLIST of the bg, de and es and language so they
can be used again: from Daniel Gruber <daniel@@tydirium.org>

this has been tested by many people.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2007/02/09 00:50:17 kurt Exp $
d28 1
@


1.47
log
@use javaPathHelper to set JAVA_HOME so java subpackage works without
manual config.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2007/01/17 07:29:01 robert Exp $
d9 1
a9 1
VERSION=	2.1.0
d11 1
a11 1
WRKDIST=	${WRKDIR}/OOE680_m6
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p4
d15 1
a15 1
PKGNAME-java=	openoffice-java-${VERSION}p0
d18 4
a21 4
SHARED_LIBS=	icudata		26.0 \
		icui18n		26.0 \
		icule		26.0 \
		icuuc		26.0 \
d27 2
a28 1
MASTER_SITES=	ftp://sunsite.informatik.rwth-aachen.de/pub/mirror/OpenOffice/stable/${VERSION}/ \
d37 6
a42 4
DISTFILES=	${DISTNAME}_src.tar.bz2 ooo-desktop.tar.gz:0
.for dfile in binfilter l10n sdk system
DISTFILES+=	${DISTNAME}_src_${dfile}.tar.bz2
.endfor
d66 1
a66 1
PKGNAME-i18n-$l=	openoffice-i18n-$l-${VERSION}p0
d93 1
a93 1
WANTLIB-main=	ICE SM X11 Xext Xrender atk-1.0 c cairo expat fontconfig \
d103 1
a103 1
WANTLIB-kde=		X11 m
d121 1
a121 1
		build-java-target-${VERSION}.diff:0
@


1.46
log
@fix some crazy crashes in Calc by using the same __DLLEXTENSION everywhere;
bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/01/16 02:48:02 kurt Exp $
d12 2
a13 2
PKGNAME=	openoffice-${VERSION}p3
PKGNAME-main=	openoffice-${VERSION}p3
d94 1
a94 1
RUN_DEPENDS-main=
@


1.45
log
@bump pkg due to java.port.mk change in RUN_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2007/01/04 13:50:34 robert Exp $
d12 2
a13 2
PKGNAME=	openoffice-${VERSION}p2
PKGNAME-main=	openoffice-${VERSION}p2
@


1.44
log
@bump PKGNAME of language packs too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2007/01/04 09:12:33 robert Exp $
d15 1
a15 1
PKGNAME-java=	openoffice-java-${VERSION}
@


1.43
log
@do not use the system sablotron because it breaks the help system
badly and openoffice won't use sablotron in next releases anyways.
bump PKGNAME;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2006/12/16 12:22:33 espie Exp $
d63 1
a63 1
PKGNAME-i18n-$l=	openoffice-i18n-$l-${VERSION}
@


1.42
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/12/14 20:40:28 robert Exp $
d12 2
a13 2
PKGNAME=	openoffice-${VERSION}p1
PKGNAME-main=	openoffice-${VERSION}p1
d89 1
a89 2
		wpd.>=8::textproc/libwpd \
		sablot.>=101::textproc/sablotron
a149 1
		--with-system-sablot \
@


1.41
log
@move the desktop icons to the proper location; bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/12/14 13:12:24 robert Exp $
a73 1
		:pkgconfig-*:devel/pkgconfig \
@


1.40
log
@do not create downloadable install sets because we do not use them
at all. this saves like 2G of disk space. resync patches while i am here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/12/14 08:23:54 robert Exp $
d13 1
a13 1
PKGNAME-main=	openoffice-${VERSION}p0
d191 1
a191 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/icons
d199 1
a199 1
			${INSTALL_DATA} $$ICONS ${PREFIX}/share/icons; \
@


1.39
log
@add glitz and png to WANTLIB-main; bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/12/13 10:25:14 robert Exp $
d12 1
a12 1
PKGNAME=	openoffice-${VERSION}p0
@


1.38
log
@- update to version 2.1.0 which includes many bugfixes and improvements

- remove some unnecessary patches and add a no_lang
pseudo flavor which allows people to do a build w/o language packs
(requested by kurt@@)

- from now on we set the file descriptor limit to a higher value (256)
in the OpenOffice build environment to prevent build failures

- point explicitly to the licensing FAQ instead of pointing to the contents
of the FAQ
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/11/28 09:35:27 robert Exp $
d12 2
a13 2
PKGNAME=	openoffice-${VERSION}
PKGNAME-main=	openoffice-${VERSION}
d93 1
a93 1
		freetype glib-2.0 gmodule-2.0 gobject-2.0 \
d95 1
a95 1
		pangocairo-1.0 pangoft2-1.0 pthread stdc++ util xml2 z
@


1.37
log
@- add Swedish (sv) lanaguage support;
- install icons and desktop files for base, calc, draw, impress and math;
(from now on these entries should pop up in kde's menu)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/11/26 20:59:07 robert Exp $
d9 7
a15 7
VERSION=	2.0.4
DISTNAME=	OOo_${VERSION}_src
WRKDIST=	${WRKDIR}/OOD680_m5
PKGNAME=	openoffice-${VERSION}p20
PKGNAME-main=	openoffice-${VERSION}p20
PKGNAME-kde=	openoffice-kde-${VERSION}p16
PKGNAME-java=	openoffice-java-${VERSION}p16
d36 5
a40 1
DISTFILES=	${DISTNAME}.tar.gz ooo-desktop.tar.gz:0
d45 1
a45 1
# and http://www.openoffice.org/FAQs/faq-questions.html#licensing
d53 5
d69 1
d120 1
a120 1
		build-java-target.diff:0
a161 4
PSEUDO_FLAVORS=	cleanobj
FLAVORS=	debug
FLAVOR?=

d187 1
a187 1
		${SETENV} ${MAKE_ENV} ${TCSH} -c 'source OpenBSDEnv.Set && ${BUILD_CMD}' 
@


1.36
log
@- remove some unused kludge from the Makefile;
- add Latvian language support; requested by nikns <nikns@@secure.lv>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/11/25 12:40:14 robert Exp $
d12 2
a13 2
PKGNAME=	openoffice-${VERSION}p19
PKGNAME-main=	openoffice-${VERSION}p19
d36 1
d50 1
a50 1
			lt lv nl pl ru sl
d184 12
@


1.35
log
@- add PKGNAME because of the new MULTI_PACKAGES;
- add Litvanian (lt) language support; requested by
Martynas Venckus <martynas@@altroot.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2006/11/25 10:30:58 espie Exp $
d49 1
a49 1
			lt nl pl ru sl
a161 1
OOARCH=		OPENBSDGCCI
@


1.34
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2006/11/24 10:52:33 robert Exp $
d12 1
d49 1
a49 1
			nl pl ru sl
@


1.33
log
@add Dutch (nl) support; requested by Joachim Schipper <j.schipper@@math.uu.nl>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2006/11/23 23:19:27 robert Exp $
d5 1
a5 1
COMMENT=	"a multi-platform productivity suite"
d12 1
a12 1
PKGNAME=	openoffice-${VERSION}p18
d45 1
a45 1
MULTI_PACKAGES=		-kde -java
d54 3
a58 2
SUBPACKAGE?=

d71 2
a72 1
BASE_LIBS=	gdk-x11-2.0.>=400.14,gdk_pixbuf-2.0.>=400.14,gtk-x11-2.0.>=400.14::x11/gtk+2 \
d80 1
a80 22

KDE_LIBS=	kabc,kdecore,kdeui,kio::x11/kde/libs3

.if defined(PACKAGING)
. if ${SUBPACKAGE} == "-kde"
RUN_DEPENDS=	::editors/openoffice
LIB_DEPENDS=	${KDE_LIBS}
WANTLIB=	X11 m
MODULES=	x11/qt3
. elif ${SUBPACKAGE} == "-java"
RUN_DEPENDS=	::editors/openoffice \
		:db-java-4.*:databases/db/v4,-java,java
WANTLIB=	c m pthread stdc++
MODULES=	java
MODJAVA_VER=	1.4+
MODJAVA_JRERUN=	Yes
. elif ${SUBPACKAGE:M-i18n*}
RUN_DEPENDS=	::editors//openoffice
. else
MODULES=	python
LIB_DEPENDS=	${BASE_LIBS}
WANTLIB=	ICE SM X11 Xext Xrender atk-1.0 c cairo expat fontconfig \
d84 17
a100 6
. endif
.else
MODULES=	x11/qt3 java python
MODJAVA_VER=	1.4+
LIB_DEPENDS=	${BASE_LIBS} ${KDE_LIBS}
.endif
@


1.32
log
@add slovenian language pack; requested by Mitja Mu¾eniè <mitja@@muzenic.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2006/11/23 09:35:52 robert Exp $
d47 2
a48 1
LANGS=			bg br-pt de es fi fr hu it ja ko pl ru sl
@


1.31
log
@add br-pt (Brasilian Portugese) support;
requested by Eduardo Alvarenga
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2006/11/21 17:11:52 ian Exp $
d47 1
a47 1
LANGS=			bg br-pt de es fi fr hu it ja ko pl ru
@


1.30
log
@... and bump pkgname, thx bernd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2006/11/20 09:33:02 robert Exp $
d47 1
a47 1
LANGS=			bg de es fi fr hu it ja ko pl ru
@


1.29
log
@- add i18n support including 11 languages for now (if you need more, tell us)

- add a pseudo flavor called cleanobj that reduces the disk space needed
to build openoffice by cleaning up all unneeded object directories.
(idea from kurt@@)

- do not run checkdeliver.pl because it will fail if we use the cleanobj
flavor because it can't check the object dirs that we remove.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2006/11/18 16:11:33 kurt Exp $
d12 1
a12 1
PKGNAME=	openoffice-${VERSION}p17
@


1.28
log
@revert. more is needed to do this right. noticed by robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/11/18 03:54:54 kurt Exp $
d12 1
a12 1
PKGNAME=	openoffice-${VERSION}p16
d46 9
d93 2
d154 2
a155 1
		--with-db-jar=${LOCALBASE}/lib/db4/db.jar
d157 1
d171 6
d187 1
a187 1
		${SETENV} ${MAKE_ENV} ${TCSH} -c 'source OpenBSDEnv.Set && dmake'
d190 2
a191 1
	cd ${WRKSRC}/instsetoo_native/unxobsd.pro/OpenOffice/portable/install/en-US/openbsd-* && \
d195 1
@


1.27
log
@remove tcsh as a build depend since it has been a source of build
instability and its not needed. no pkg bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/11/17 14:08:40 kurt Exp $
d52 1
d156 1
d168 1
a168 1
		${SETENV} ${MAKE_ENV} ${SH} -c '. ./OpenBSDEnv.Set.sh; dmake'
@


1.26
log
@build with python MODULE and use MODPY_VERSION (2.4). fixes breakage caused
by recent python 2.3 update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/11/12 19:27:40 robert Exp $
a51 1
		:tcsh-*:shells/tcsh \
a154 1
TCSH=		${LOCALBASE}/bin/tcsh
d166 1
a166 1
		${SETENV} ${MAKE_ENV} ${TCSH} -c 'source OpenBSDEnv.Set && dmake'
@


1.25
log
@- use system sablotron and libwpd instead of the bundled ones
- mark myself as the MAINTAINER
- bump PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/11/09 15:18:01 kurt Exp $
d12 3
a14 3
PKGNAME=	openoffice-${VERSION}p15
PKGNAME-kde=	openoffice-kde-${VERSION}p15
PKGNAME-java=	openoffice-java-${VERSION}p15
d61 1
a61 1
		python2.3:python-2.3.*:lang/python/2.3 \
d85 1
d93 1
a93 1
MODULES=	x11/qt3 java
d105 1
d115 2
a116 1
		QTINC="${MODQT_INCDIR}" QTDIR="${MODQT_LIBDIR}"
@


1.24
log
@- apply go-ooo patch build-java-target.diff (adjusted to apply cleanly).
this patch enables javac arguments -source & -target which will allow us to
build with 1.5 but run with 1.4 or 1.5. building with 1.5 will be enabled
in java.port.mk later.
- sync patches (line numbers/-p)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/11/09 08:31:29 robert Exp $
d12 3
a14 3
PKGNAME=	openoffice-${VERSION}p14
PKGNAME-kde=	openoffice-kde-${VERSION}p14
PKGNAME-java=	openoffice-java-${VERSION}p14
d23 2
d65 3
a67 1
		sndfile.>=1::audio/libsndfile
d132 2
@


1.23
log
@- use the jdk server vm on amd64 because it does not have a client
- re-enable the library check for bean now that the server vm is used
- fix an if statement (OPEBBSD->OPENBSD)

jdk problem noticed by kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/11/08 09:34:03 robert Exp $
d12 3
a14 3
PKGNAME=	openoffice-${VERSION}p13
PKGNAME-kde=	openoffice-kde-${VERSION}p13
PKGNAME-java=	openoffice-java-${VERSION}p13
d98 2
a99 1
PATCHFILES=	go_oo_src680_20061105.diff:0
d131 1
@


1.22
log
@- add amd64 support
- use unxobsd.mk instead of different makefiles for every
  architecture
- use devel/boost now that we have it instead of the bundled
  one. (this is also needed to build openoffice on amd64)
- start using some patches from http://go-ooo.org/.
  (disable the startup wizard and some online registration menu points)
  (the patch is generated by my after applying the patches that's why
   i provide the mirror for it.)
- allow the openoffice build infrastructure to override our CFLAGS in
  some cases. this is needed because some of the files have to be compiled
  with -O0 instead of -02 which we use by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2006/11/04 12:34:18 kurt Exp $
d12 3
a14 3
PKGNAME=	openoffice-${VERSION}p12
PKGNAME-kde=	openoffice-kde-${VERSION}p12
PKGNAME-java=	openoffice-java-${VERSION}p12
@


1.21
log
@actually since the RUN_DEPEND changed a pkg bump is needed for at least
the java subpackage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/11/04 12:29:20 kurt Exp $
d3 1
a3 1
ONLY_FOR_ARCHS= i386
d12 3
a14 3
PKGNAME=	openoffice-${VERSION}p11
PKGNAME-kde=	openoffice-kde-${VERSION}p11
PKGNAME-java=	openoffice-java-${VERSION}p11
d30 4
d55 2
a56 1
		:db-java-4.*:databases/db/v4,-java,java
d98 1
d126 1
d148 1
d150 3
a152 2
		cp -R gcc3_freebsd_intel gcc3_openbsd_intel && \
		perl -pi -e "s,FREEBSD,OPENBSD,g" gcc3_openbsd_intel/makefile.mk
@


1.20
log
@need to use the java pseudo flavor to enable the db4 java subpackage now.
no pkg bumps. as discussed with naddy@@, pval@@ & nikolay@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/11/03 05:11:09 kurt Exp $
d12 3
a14 3
PKGNAME=	openoffice-${VERSION}p10
PKGNAME-kde=	openoffice-kde-${VERSION}p10
PKGNAME-java=	openoffice-java-${VERSION}p10
@


1.19
log
@- enable KDE integration and add openoffice-kde subpackge for this
optional feature
- enable building with java and add openoffice-java subpackage for this
optional feature. this corrects the "save as" problem and provides help
files in the base package. so now java is needed to build OOo but not to
run it. some OOo features require java to run, so install the
openoffice-java subpackage for that.
- make sbase, smath, setofficelang and spadmin applications available
via wrapper script.
- tweak configure to find versioned Qt shared libs.
- adjust include and lib search order again - sigh. put /usr/local
before jdk but after OOo dirs. this allows system libjpeg to be used
over jdk libjpeg and still avoids build conflicts with things like cppunit.
- remove extra patch to readlicense_oo/util/makefile.pmk

some testing and input ian@@ okay robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/10/31 09:33:35 robert Exp $
d51 1
a51 1
		:db-java-4.*:databases/db/v4,-java
d70 1
a70 1
		:db-java-4.*:databases/db/v4,-java
@


1.18
log
@use sysconf(_SC_PAGESIZE) instead of getpagesize() and fix
the lib dependency for db4 to avoid the pickup of db3 in some
cases; both problems were noticed by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/10/29 22:42:49 kurt Exp $
d6 2
d12 3
a14 1
PKGNAME=	openoffice-${VERSION}p9
d39 3
d49 3
a51 1
		::print/cups
d53 1
a53 1
LIB_DEPENDS=	gdk-x11-2.0.>=400.14,gdk_pixbuf-2.0.>=400.14,gtk-x11-2.0.>=400.14::x11/gtk+2 \
d60 17
d81 6
d101 2
a102 1
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
d108 1
d122 4
a125 1
		--without-java
d162 1
a162 1
	for app in scalc sdraw simpress swriter; do \
@


1.17
log
@- enable cups support
- increase thread stack size to accommodate stupid 32k stack buffer in cups
- disable building odk - saves 15% build time and we're not packaging it
now anyway.
- remove duplicate python config arg noted by Mikolaj Kucharski
- disable crashdump in debug FLAVOR (I haven't found this useful - maybe
I'm missing something)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/10/27 16:02:02 kurt Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}p8
d46 1
a46 1
		db.>=4::databases/db/v4 \
@


1.16
log
@- libxslt is a BUILD_DEPEND not a LIB_DEPEND
- enable cairo support
- enable portaudio/sendfile - audio not working yet, revisit later
- adjust include and lib search order again. put /usr/local before
/usr/X11R6 so we link to ports expat and not the one that comes with X11R6
- add -pthread to PTHREAD_CFLAGS in odk subproject
- integrate audacity portaudio patches and link to ossaudio
- strip Linux shlib major version numbers from dlopen()'ed lib names
- link stlport with stdc++ to resolve some undefined symbols
- remove getpwuid_r workaround in sal/osl/unx/security.c since a suitable
one already exits in sal/osl/unx/system.c
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/10/25 22:49:50 kurt Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}p7
d41 2
a42 1
		::textproc/libxslt
d73 1
a73 1
		--disable-cups \
a83 1
		--with-system-python \
d94 1
a94 1
CONFIGURE_ARGS+=	--enable-crashdump --enable-symbols
@


1.15
log
@- protect against null pointer dereference in hi_ary.cxx
- use new style C++ includes
- clean up some patches
- use __alignof__ for OpenBSD too
- fix destpath in packagelist.txt for sdkoo and ure
- don't generate core file on intentional segfault test in typesconfig.c
- add missing unxobsdi section in stand.lst
- num_put_float.cpp fix in STLport
- add sysconfig.get_config_var('LIBS') to PYTHON_LIBS
- don't hardcode Linux path to 'sum' let path find it

All corrections submitted by or inspired by patches from Fritz Elfert
<fritz at fritz-elfert.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/10/21 22:20:50 kurt Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}p6
d40 2
a41 1
		:p5-Archive-Zip-*:archivers/p5-Archive-Zip
a47 1
		xslt.>=2::textproc/libxslt \
d50 1
a50 1
WANTLIB=	ICE SM X11 Xext atk-1.0 c cairo expat fontconfig \
d52 1
a52 1
		gthread-2.0 iconv intl jpeg m pango-1.0 \
a71 1
		--disable-pasf \
d73 1
@


1.14
log
@kill "AC_CONFIG_HEADERS not found in configure.in" message with
CONFIGURE_STYLE=autoconf no-autoheader. no pkg bump since no change
in package.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/10/20 19:58:23 ian Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}p5
d53 1
a53 1
		pangocairo-1.0 pangoft2-1.0 pthread stdc++ xml2 z 
a86 1
		--with-package-format=portable \
@


1.13
log
@Remove use of Linux-specific "pagein" program (presumably worked around
Linux paging issues) from startup script.
Requested by & OK kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/10/20 14:59:26 kurt Exp $
d63 1
a63 1
CONFIGURE_STYLE=	autoconf
@


1.12
log
@- pass MAKE_ENV along in do-build target
- respect CFLAGS
- remove LIBS from CONFIGURE_ARGS and correct fall out in configure.in
- move -I$(LOCALBASE)/include to end of include search dirs and move
  -L$(LOCALBASE)/lib to end of library search dirs to avoid build conflicts
  with other installed packages such as cppunit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/10/19 15:16:50 kurt Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}p4
@


1.11
log
@- sync patches
- no need to patch and search and replace on packagelist.txt when a
simple patch will do
- fix name of the epm patch
- disable parallel builds. Our user-land pthreads lib converts fd's to be
non-blocking which causes intermittent build failures when a parallel
process can't deal with non-blocking fd's. For example cat and stdout.
parallel builds will need to wait for rthreads.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2006/10/18 18:17:12 ian Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}p3
d68 1
a68 2
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
		LIBS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
d98 2
a108 7
pre-configure:
	perl -pi -e "s,%%LOCALBASE%%,${LOCALBASE},g; \
		s,%%X11BASE%%,${X11BASE},g; \
		s,%%TMPDIR%%,${TMPDIR},g" \
		${WRKCONF}/set_soenv.in \
		${WRKSRC}/solenv/inc/unxobsdi.mk

d112 1
a112 1
		${TCSH} -c 'source OpenBSDEnv.Set && dmake'
@


1.10
log
@use exec here so the sh process isn't sitting around
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/10/18 17:05:57 ian Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}p2
a98 2
NCPU=		`sysctl -n hw.ncpu`

a113 2
	perl -pi -e "s,/opt/%UNIXPRODUCTNAME%PRODUCTVERSION,openoffice,g" \
		${WRKSRC}/instsetoo_native/inc_openoffice/unix/packagelist.txt
d118 1
a118 2
		${TCSH} -c 'source OpenBSDEnv.Set && cd instsetoo_native && \
			build.pl -P${NCPU} --all'
@


1.9
log
@pass filenames to program from front-end script, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/10/18 12:45:59 kurt Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}p1
@


1.8
log
@- fix glaring startup deadlocks by properly setting PTHREAD_CFLAGS. The
deadlocks were caused by the inconsistent detection of pthreads by the
boost headers in different parts of the OOo build which resulted in an
uninitialized mutex.
- fix a few compile errors in the nas sub-project build.

General testing and patches from the community are encouraged.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/10/14 17:33:55 robert Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}p0
@


1.7
log
@update to 2.0.4 which is now the stable version of openoffice;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/10/11 11:19:55 robert Exp $
d10 1
a10 1
PKGNAME=	openoffice-${VERSION}
@


1.6
log
@update to version 2.0.4rc3; use offical master sites and use -O2 optimizations
istead of -Os
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/09/30 18:47:25 robert Exp $
d7 2
a8 2
VERSION=	2.0.4rc3
DISTNAME=	OOo_${VERSION}_061002_src
d20 5
a24 5
MASTER_SITES=	ftp://sunsite.informatik.rwth-aachen.de/pub/mirror/OpenOffice/contrib/rc/2.0.4rc3/ \
		ftp://ftp.tu-chemnitz.de/pub/openoffice/contrib/rc/${VERSION}/ \
		ftp://ftp.nluug.nl/pub/office/openoffice/contrib/rc/${VERSION}/ \
		http://vlaai.snt.utwente.nl/pub/software/openoffice/contrib/rc/${VERSION}/ \
		ftp://openoffice.mirror.cygnal.ca/openoffice/contrib/rc/${VERSION}/ \
@


1.5
log
@enable odk, binfilter, qadevooo and use our malloc(3) instead
of using OOo's own allocation system;

add an OpenBSD ifdef to epm to use the correct tar(1) arguments;

bump PKGNAME;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/09/22 07:44:09 jolan Exp $
d7 4
a10 5
M=		m4
VERSION=	OOD680_${M}
DISTNAME=	OOo_${VERSION}_source
WRKDIST=	${WRKDIR}/ooo_${VERSION}_src
PKGNAME=	openoffice-2.0.4${M}p0
d20 6
a25 3
MASTER_SITES=	http://mirrors.protection.cx/~jolan/ \
		http://humppa.hu/ \
		http://ftp.linux.cz/pub/localization/OpenOffice.org/devel/build/Sources/
@


1.4
log
@add a faster distfile mirror, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/09/20 09:06:19 robert Exp $
d11 1
a11 1
PKGNAME=	openoffice-2.0.4${M}
a70 1
		--disable-qadevooo \
a71 2
		--disable-binfilter \
		--disable-odk \
d87 1
@


1.3
log
@update to version 2.0.4m4;

- more optimizations;
- use autoconf;
- remove hardcoded paths from unxobsdi.mk;
- zap .0.0 from WANTLIB;
- add a new MASTER_SITE;
- enable sndfile support;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/08/20 03:36:52 kurt Exp $
d21 2
a22 1
MASTER_SITES=	http://humppa.hu/ \
@


1.2
log
@Fix debug FLAVOR so it builds and installs binaries with symbols:
- add -dontstrip to packaging script to get useful debug binaries
installed
- remove --enable-debug since that makes the debug build too big (>18G)
for me to build. Add back later as a possible verbose_debug flavor.

Use PATCHORIG so that update-patches doesn't pickup internal .orig files.
Idea from espie@@

Add a mutex to make the call to getpwuid thread safe.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/08/17 14:56:21 robert Exp $
d7 2
a8 2
M=		179
VERSION=	SRC680_m${M}
d11 1
a11 1
PKGNAME=	openoffice-2.0.3m${M}p0
d21 2
a22 1
MASTER_SITES=	http://humppa.hu/
d39 2
a40 2
LIB_DEPENDS=	gdk-x11-2.0.0.0,gdk_pixbuf-2.0.0.0,gtk-x11-2.0.0.0::x11/gtk+2 \
		python2.3.0.0:python-2.3.*:lang/python/2.3 \
d44 2
a45 1
		xslt.>=2::textproc/libxslt
d47 4
a50 4
WANTLIB=	ICE SM X11 Xext atk-1.0.0.0 c cairo expat fontconfig \
		freetype glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 \
		gthread-2.0.0.0 iconv intl jpeg m pango-1.0.0.0 \
		pangocairo-1.0.0.0 pangoft2-1.0.0.0 pthread stdc++ xml2 z 
d60 4
a63 1
CONFIGURE_STYLE=gnu
d86 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d11 1
a11 1
PKGNAME=	openoffice-2.0.3m${M}
d55 1
d89 1
a89 1
CONFIGURE_ARGS+=	--enable-debug --enable-crashdump=yes --enable-symbols
d115 1
a115 1
		 ${TCSH} -c 'source OpenBSDEnv.Set && cd instsetoo_native && \
@


1.1.1.1
log
@Import of OpenOffice.Org version 2.0.3m179.  
 
OpenOffice is an Open Source, community-developed, multi-platform office
productivity suite. It includes the key desktop applications, such as a
word processor, spreadsheet, presentation manager, and drawing program,
with a user interface and feature set similar to other office suites.
 
I would like to thank everyone who helped porting:
Peter Valchev, Kurt Miller, Dale Rahn, Ian Darwin and the OpenOffice.Org team.
 
This import is an explicit request by pvalchev@@ and espie@@.
This means that the current ports lock is still in effect and this import
is only a planned exception by the release managers.

This port is not yet connected to the builds.
 
okay pvalchev@@, espie@@
@
text
@@
