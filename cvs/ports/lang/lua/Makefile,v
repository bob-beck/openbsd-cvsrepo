head	1.47;
access;
symbols
	OPENBSD_6_0:1.47.0.8
	OPENBSD_6_0_BASE:1.47
	OPENBSD_5_9:1.47.0.4
	OPENBSD_5_9_BASE:1.47
	OPENBSD_5_8:1.47.0.6
	OPENBSD_5_8_BASE:1.47
	OPENBSD_5_7:1.47.0.2
	OPENBSD_5_7_BASE:1.47
	OPENBSD_5_6:1.46.0.10
	OPENBSD_5_6_BASE:1.46
	OPENBSD_5_5:1.46.0.8
	OPENBSD_5_5_BASE:1.46
	OPENBSD_5_4:1.46.0.6
	OPENBSD_5_4_BASE:1.46
	OPENBSD_5_3:1.46.0.4
	OPENBSD_5_3_BASE:1.46
	OPENBSD_5_2:1.46.0.2
	OPENBSD_5_2_BASE:1.46
	OPENBSD_5_1_BASE:1.43
	OPENBSD_5_1:1.43.0.2
	OPENBSD_5_0:1.40.0.4
	OPENBSD_5_0_BASE:1.40
	OPENBSD_4_9:1.40.0.2
	OPENBSD_4_9_BASE:1.40
	OPENBSD_4_8:1.38.0.2
	OPENBSD_4_8_BASE:1.38
	OPENBSD_4_7:1.36.0.4
	OPENBSD_4_7_BASE:1.36
	OPENBSD_4_6:1.36.0.2
	OPENBSD_4_6_BASE:1.36
	OPENBSD_4_5:1.35.0.2
	OPENBSD_4_5_BASE:1.35
	OPENBSD_4_4:1.34.0.2
	OPENBSD_4_4_BASE:1.34
	OPENBSD_4_3:1.33.0.2
	OPENBSD_4_3_BASE:1.33
	OPENBSD_4_2:1.30.0.2
	OPENBSD_4_2_BASE:1.30
	OPENBSD_4_1:1.27.0.2
	OPENBSD_4_1_BASE:1.27
	OPENBSD_4_0:1.24.0.2
	OPENBSD_4_0_BASE:1.24
	OPENBSD_3_9:1.21.0.2
	OPENBSD_3_9_BASE:1.21
	OPENBSD_3_8:1.15.0.2
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.14.0.2
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.13.0.2
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.9.0.2
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.8.0.4
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.8.0.2
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.7.0.4
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.2
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.6.0.2
	OPENBSD_3_0_BASE:1.6
	OPENBSD_2_9_TRACKING_SWITCH:1.6
	OPENBSD_2_9:1.5.0.2
	OPENBSD_2_9_BASE:1.5
	lua-40:1.1.1.2
	dbt:1.1.1
	OPENBSD_2_8:1.2.0.2
	OPENBSD_2_8_BASE:1.2
	kevlo_2000-Aug-16:1.1.1.1
	kevlo:1.1.1;
locks; strict;
comment	@# @;


1.47
date	2015.01.14.20.07.45;	author jturner;	state Exp;
branches;
next	1.46;
commitid	Jfb7ijkE0wmH1E2W;

1.46
date	2012.07.10.15.09.25;	author jasper;	state Exp;
branches;
next	1.45;

1.45
date	2012.03.29.08.51.26;	author dcoppa;	state Exp;
branches;
next	1.44;

1.44
date	2012.03.07.13.14.26;	author sthen;	state Exp;
branches;
next	1.43;

1.43
date	2011.12.04.21.12.19;	author sthen;	state Exp;
branches;
next	1.42;

1.42
date	2011.12.04.14.16.44;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2011.08.25.07.02.42;	author jasper;	state Exp;
branches;
next	1.40;

1.40
date	2010.10.24.21.06.28;	author sthen;	state Exp;
branches;
next	1.39;

1.39
date	2010.10.18.19.20.42;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2010.06.15.20.27.23;	author jasper;	state Exp;
branches;
next	1.37;

1.37
date	2010.05.17.08.18.59;	author dcoppa;	state Exp;
branches;
next	1.36;

1.36
date	2009.06.24.14.19.06;	author jolan;	state Exp;
branches;
next	1.35;

1.35
date	2008.11.07.12.23.12;	author jsg;	state Exp;
branches;
next	1.34;

1.34
date	2008.04.19.17.59.32;	author okan;	state Exp;
branches;
next	1.33;

1.33
date	2007.10.29.22.38.42;	author jolan;	state Exp;
branches;
next	1.32;

1.32
date	2007.09.16.00.27.06;	author merdely;	state Exp;
branches;
next	1.31;

1.31
date	2007.09.15.09.42.57;	author jolan;	state Exp;
branches;
next	1.30;

1.30
date	2007.08.05.12.34.33;	author mbalmer;	state Exp;
branches;
next	1.29;

1.29
date	2007.04.03.07.05.06;	author pedro;	state Exp;
branches;
next	1.28;

1.28
date	2007.03.15.22.03.37;	author pedro;	state Exp;
branches;
next	1.27;

1.27
date	2007.01.07.17.31.53;	author pedro;	state Exp;
branches;
next	1.26;

1.26
date	2006.10.29.19.45.54;	author pedro;	state Exp;
branches;
next	1.25;

1.25
date	2006.09.25.02.39.06;	author pedro;	state Exp;
branches;
next	1.24;

1.24
date	2006.08.01.15.50.27;	author pedro;	state Exp;
branches;
next	1.23;

1.23
date	2006.07.30.04.25.41;	author pedro;	state Exp;
branches;
next	1.22;

1.22
date	2006.06.27.03.43.19;	author pedro;	state Exp;
branches;
next	1.21;

1.21
date	2006.02.08.04.54.49;	author david;	state Exp;
branches;
next	1.20;

1.20
date	2006.01.26.16.17.40;	author pedro;	state Exp;
branches;
next	1.19;

1.19
date	2006.01.21.01.29.40;	author jolan;	state Exp;
branches;
next	1.18;

1.18
date	2006.01.18.11.17.03;	author pedro;	state Exp;
branches;
next	1.17;

1.17
date	2006.01.03.23.00.31;	author alek;	state Exp;
branches;
next	1.16;

1.16
date	2005.12.10.23.02.05;	author pedro;	state Exp;
branches;
next	1.15;

1.15
date	2005.04.27.16.41.11;	author pedro;	state Exp;
branches;
next	1.14;

1.14
date	2004.12.16.13.04.07;	author pedro;	state Exp;
branches;
next	1.13;

1.13
date	2004.07.04.23.34.36;	author pedro;	state Exp;
branches;
next	1.12;

1.12
date	2004.07.03.14.23.32;	author pedro;	state Exp;
branches;
next	1.11;

1.11
date	2004.05.25.12.14.30;	author pedro;	state Exp;
branches;
next	1.10;

1.10
date	2004.04.08.01.44.41;	author jolan;	state Exp;
branches;
next	1.9;

1.9
date	2003.12.03.00.56.43;	author jolan;	state Exp;
branches;
next	1.8;

1.8
date	2002.10.27.14.12.48;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2002.03.21.21.09.17;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2001.05.06.01.28.00;	author lebel;	state Exp;
branches;
next	1.5;

1.5
date	2001.03.26.08.49.09;	author wilfried;	state Exp;
branches;
next	1.4;

1.4
date	2001.01.19.01.16.51;	author dbt;	state Exp;
branches;
next	1.3;

1.3
date	2000.12.19.06.49.59;	author dbt;	state Exp;
branches;
next	1.2;

1.2
date	2000.10.22.22.56.05;	author dbt;	state Exp;
branches;
next	1.1;

1.1
date	2000.08.16.03.15.41;	author kevlo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.08.16.03.15.41;	author kevlo;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2000.12.19.06.58.46;	author dbt;	state Exp;
branches;
next	;


desc
@@


1.47
log
@Hook up Lua 5.3. ok jasper@@
@
text
@# $OpenBSD: Makefile,v 1.46 2012/07/10 15:09:25 jasper Exp $

    SUBDIR =
    SUBDIR += 5.1
    SUBDIR += 5.2
    SUBDIR += 5.3

.include <bsd.port.subdir.mk>

@


1.46
log
@- rewrite lua.port.mk to support multiple lua versions.

written and rewritten above and in budapest, with some help from sthen@@ (and his cider)
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@


1.45
log
@Bugfix update to lua-5.1.5 (it's just lua-5.1.4 plus the distribution patch)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2012/03/07 13:14:26 sthen Exp $
d3 3
a5 1
COMMENT=	powerful, light-weight programming language
d7 1
a7 2
DISTNAME=	lua-5.1.5
CATEGORIES=	lang
a8 29
MASTER_SITES=	http://www.lua.org/ftp/ \
		http://www.tecgraf.puc-rio.br/lua/ftp/ \
		http://ftp.gwdg.de/pub/languages/lua/ \
		http://ftp.ntua.gr/pub/lang/lua/ \
		http://ftp.chg.ru/pub/lang/lua/

HOMEPAGE=	http://www.lua.org/

# MIT
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

SHARED_ONLY=	Yes
SHARED_LIBS=	lua 5.1
MAKE_FLAGS+=	LIBlua_VERSION="${LIBlua_VERSION}" CC="${CC}"
WANTLIB=	c m edit curses
USE_GROFF =	Yes
NO_REGRESS=	Yes

pre-configure:
	${SUBST_CMD} ${WRKSRC}/etc/lua.pc

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pkgconfig
	${INSTALL_DATA} ${WRKSRC}/etc/lua.pc ${PREFIX}/lib/pkgconfig

.include <bsd.port.mk>
@


1.44
log
@Remove local strlcpy/etc patches, we aren't generally patching these in
ports any more (they should be addressed upstream instead) and at least
some of them are wrong. This fixes a bug found by Piotr Sikora:
http://permalink.gmane.org/gmane.os.openbsd.ports/53993
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/12/04 21:12:19 sthen Exp $
d5 1
a5 2
DISTNAME=	lua-5.1.4
REVISION=	4
a12 3

PATCHFILES=	patch-${DISTNAME}-4
PATCH_DIST_ARGS=-z .bak.orig -d ${WRKSRC}/src
@


1.43
log
@honour CC
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/12/04 14:16:44 sthen Exp $
d6 1
a6 1
REVISION=	3
@


1.42
log
@update to Lua 5.1.4 patch 4, from James Turner
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/08/25 07:02:42 jasper Exp $
d28 1
a28 1
MAKE_FLAGS+=	LIBlua_VERSION="${LIBlua_VERSION}"
@


1.41
log
@Add latest patch from upstream, 5.1.4-3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/10/24 21:06:28 sthen Exp $
d6 1
a6 1
REVISION=	2
d15 1
a15 1
PATCHFILES=	patch-${DISTNAME}-3
@


1.40
log
@new lib_depends/revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/10/18 19:20:42 espie Exp $
d6 1
a6 1
REVISION=	1
d15 1
a15 1
PATCHFILES=	patch-${DISTNAME}-2
@


1.39
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/06/15 20:27:23 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.38
log
@- zap dead master site
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/05/17 08:18:59 dcoppa Exp $
d30 1
@


1.37
log
@Merge patches from upstream errata page.
While here, adjust PKGNAME and use SUBST_CMD instead of the usual
"perl dance".

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2009/06/24 14:19:06 jolan Exp $
a11 1
		http://mirrors.sunsite.dk/lua/ \
@


1.36
log
@remove patch that causes math.randomseed() to not function

reported/debugged by M Joonas Pihlaja in pr 6176
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2008/11/07 12:23:12 jsg Exp $
d6 1
a6 1
PKGNAME=	lua-5.1.4p0
d16 3
d34 1
a34 1
	@@perl -pi -e 's:\@@prefix@@:${PREFIX}/:g;' ${WRKSRC}/etc/lua.pc
@


1.35
log
@Update to 5.1.4 a bugfix release, see
http://www.lua.org/bugs.html for more information.

tested by a bunch of people,
'looks correct' mbalmer@@, ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2008/04/19 17:59:32 okan Exp $
d6 1
@


1.34
log
@update to 5.1.3 from Christian Rueger - thanks!

ok merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/10/29 22:38:42 jolan Exp $
d5 1
a5 1
DISTNAME=	lua-5.1.3
@


1.33
log
@re-unhardcode /usr/local
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/09/16 00:27:06 merdely Exp $
d5 1
a5 2
DISTNAME=	lua-5.1.2
PKGNAME=	${DISTNAME}p1
d25 1
@


1.32
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/09/15 09:42:57 jolan Exp $
a29 1
	@@perl -pi -e 's:\@@prefix@@:${PREFIX}/:g;' ${WRKSRC}/src/luaconf.h
@


1.31
log
@prevent lua from blowing up the c stack

from lua author roberto ierusalimschy via pedro martelletto
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/08/05 12:34:33 mbalmer Exp $
d3 1
a3 1
COMMENT=	"powerful, light-weight programming language"
@


1.30
log
@Remove Pedro Martelleto as MAINTAINER per his own request.

ok espie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2007/04/03 07:05:06 pedro Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.29
log
@Lua 5.1.2, okay sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2007/03/15 22:03:37 pedro Exp $
d6 1
a16 2

MAINTAINER=	Pedro Martelletto <pedro@@openbsd.org>
@


1.28
log
@Use arc4random(3) for math.random(), okay jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2007/01/07 17:31:53 pedro Exp $
d5 1
a5 2
DISTNAME=	lua-5.1.1
PKGNAME=	${DISTNAME}p3
@


1.27
log
@With the recent GCC change, there is no need to manually ignore
__attribute__((visibility)) anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/10/29 19:45:54 pedro Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.26
log
@Install lua.pc, okay jolan@@ fgsch@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/09/25 02:39:06 pedro Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.25
log
@Also provide a shared version of the Lua library
Discussed with and okay jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/08/01 15:50:27 pedro Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d33 5
@


1.24
log
@Upgrade to Lua 5.1.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/07/30 04:25:41 pedro Exp $
d6 1
d26 2
d31 1
a31 1
post-patch:
@


1.23
log
@Update to Lua 5.1, okay jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/06/27 03:43:19 pedro Exp $
d5 1
a5 1
DISTNAME=	lua-5.1
@


1.22
log
@Update to Lua 5.0.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2006/02/08 04:54:49 david Exp $
d5 2
a6 4
DISTNAME=	lua-5.0.3
SHARED_LIBS=	lua 5.0 \
		lualib 5.0
CATEGORIES=     lang
a27 17
FLAVORS=fixedpoint
FLAVOR?=

.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
CFLAGS+=	-fPIC
ALL_TARGET+=	all so sobin
.endif

MAKE_FLAGS+=	LIBlua_VERSION=${LIBlua_VERSION} \
		LIBlualib_VERSION=${LIBlualib_VERSION}

post-extract:
.for f in init luapkg packages
	@@sed -e "s:@@pkgconf@@:${SYSCONFDIR}/lua/packages.lua:g" \
		${FILESDIR}/${f}.lua > ${WRKSRC}/$f.lua
.endfor

d29 1
a29 30
	@@touch ${WRKSRC}/include/luser.h
.if ${FLAVOR:L:Mfixedpoint}
	@@cp -p ${FILESDIR}/luser_fixedpoint.h ${WRKSRC}/include
	@@echo '#include "luser_fixedpoint.h"' >> ${WRKSRC}/include/luser.h
.endif

pre-configure:
	@@perl -pi -e 's:\@@initconf@@:${SYSCONFDIR}/lua/init.lua:g;' \
		${WRKSRC}/src/lua/lua.c

post-build:
	cd ${WRKDIST} && ${CC} ${CFLAGS} -o bin/bin2c etc/bin2c.c

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/include
	${INSTALL_DATA} ${WRKDIST}/include/*.h ${PREFIX}/include
	${INSTALL_DATA} ${WRKDIST}/lib/* ${PREFIX}/lib
	${INSTALL_PROGRAM} ${WRKDIST}/bin/lua ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKDIST}/bin/luac ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKDIST}/bin/bin2c ${PREFIX}/bin
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/lua
	${INSTALL_DATA} ${WRKDIST}/doc/*.html ${WRKDIST}/doc/*.gif \
		${PREFIX}/share/doc/lua
	${INSTALL_MAN_DIR} ${PREFIX}/man/man1
	${INSTALL_MAN} ${WRKDIST}/doc/*.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/lua
	${INSTALL_DATA} ${WRKSRC}/init.lua ${PREFIX}/share/examples/lua
	${INSTALL_DATA} ${WRKSRC}/luapkg.lua ${PREFIX}/share/examples/lua
	${INSTALL_DATA} ${WRKSRC}/packages.lua \
		${PREFIX}/share/examples/lua/packages.lua
@


1.21
log
@move any perl or sed substitutions from post-patch to pre-configure
(fixes make update-patches)
ok sturm@@; "looks reasonable" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/01/26 16:17:40 pedro Exp $
d5 1
a5 2
DISTNAME=	lua-5.0.2
PKGNAME=	${DISTNAME}p6
@


1.20
log
@Fix collection of weak tables, from Roberto Ierusalimschy, okay jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/01/21 01:29:40 jolan Exp $
a48 2
	@@perl -pi -e 's:\@@initconf@@:${SYSCONFDIR}/lua/init.lua:g;' \
		${WRKSRC}/src/lua/lua.c
d54 4
@


1.19
log
@add fixedpoint flavor, uses int instead of double to represent numbers
in lua.  mostly just an academic exercise, but is 300% faster on zaurus
when doing simple arithmetic

ok pedro@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/01/18 11:17:03 pedro Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
@


1.18
log
@Replace the very few uses of strcpy(), strcat() and sprintf() by their
safe counterparts, okay jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/01/03 23:00:31 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
d31 3
d39 1
a39 1
MAKE_FLAGS=	LIBlua_VERSION=${LIBlua_VERSION} \
d51 5
@


1.17
log
@- SHARED_LIBS
- Regen PFRAG.shared
- Bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/12/10 23:02:05 pedro Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
@


1.16
log
@Use local variables as to not leak them to user context
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/04/27 16:41:11 pedro Exp $
d6 3
a8 1
PKGNAME=	${DISTNAME}p2
d35 3
@


1.15
log
@enable line-editing support, bump package name, okay jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/12/16 13:04:07 pedro Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.14
log
@introduce a simple package management facility for lua, by permitting
each package to have an initialization file, and keeping a table of
'<package> = <file>' entries in a known place. these files are loaded
upon lua's activation, and should normally be small, quick pieces of
code responsible for preparing the environment (luapath, cpath) for
the packages they represent.

also, make it possible for every user to have her/his own lua
initialization routines under ~/.lua/init.lua, so that the system-wide
mechanism described above can be replicated to user-specific cases.

prodding, all sorts of ports tutoring and ok jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/07/04 23:34:36 pedro Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d26 1
a26 1
WANTLIB=	c m
@


1.13
log
@correctly deal with architectures that have no shared libs
spotted, tutoring and ok'd by jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/07/03 14:23:32 pedro Exp $
d6 1
d26 1
d34 10
d55 9
a63 3
	${INSTALL_DATA} ${WRKDIST}/doc/*.html ${WRKDIST}/doc/*.gif ${PREFIX}/share/doc/lua
	${INSTALL_DATA_DIR} ${PREFIX}/man/man1
	${INSTALL_DATA} ${WRKDIST}/doc/*.1 ${PREFIX}/man/man1
@


1.12
log
@forgot to change these to openbsd.org as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/05/25 12:14:30 pedro Exp $
d27 1
a27 1
.if !defined(NO_SHARED_LIBS)
@


1.11
log
@enable lua on sparc64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/04/08 01:44:41 jolan Exp $
d17 1
a17 1
MAINTAINER=	Pedro Martelletto <pbastos@@inf.puc-rio.br>
@


1.10
log
@update to 5.0.2, from pedro martelletto (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/12/03 00:56:43 jolan Exp $
d27 5
a33 2
#	and recompile with shared libs
	${BUILD_SHARED}
a45 9

.if defined(NO_SHARED_LIBS)
BUILD_SHARED=:
.else
BUILD_SHARED=cd ${WRKDIST} && \
	${CC} ${LDFLAGS} -shared -fPIC -o lib/liblua.so.5.0 src/*.o && \
	${CC} ${LDFLAGS} -shared -fPIC -o lib/liblualib.so.5.0 src/lib/*.o && \
	rm bin/lua && ${MAKE}
.endif
@


1.9
log
@update to 5.0, maintainer timeout.

from new maintainer Pedro Martelletto and myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/10/27 14:12:48 naddy Exp $
d5 1
a5 1
DISTNAME=	lua-5.0
d9 1
d12 1
d17 1
a17 1
MAINTAINER=	Pedro Martelletto <pbastos@@rdc.puc-rio.br>
@


1.8
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/03/21 21:09:17 espie Exp $
d5 1
a5 1
DISTNAME=	lua-4.0
d8 4
a11 11
MASTER_SITES=	ftp://ftp.tecgraf.puc-rio.br/pub/lua/ \
		ftp://csg.uwaterloo.ca/pub/lhf/lua/ \
		ftp://ftp.freesoftware.com/pub/languages/lua/ \
		ftp://ftp.ntua.gr/pub/lang/lua/ \
		ftp://ftp.uni-trier.de/pub/languages/lua/ \
		ftp://ftp.gwdg.de/pub/languages/lua/ \
		ftp://ftp.u-aizu.ac.jp/pub/lang/lua/ \
		ftp://ftp.ucore.com/lua/dist/ \
		http://www.tecgraf.puc-rio.br/lua/ftp/ \
		http://csg.uwaterloo.ca/~lhf/lua/ftp/ \
		http://ftp.gwdg.de/pub/languages/lua/
d13 1
a13 1
HOMEPAGE=	http://www.tecgraf.puc-rio.br/lua/
d15 1
a15 1
MAINTAINER=	David Terrell <dbt@@openbsd.org>
d17 1
d23 1
a23 1
WRKDIST=	${WRKDIR}/lua
a29 2
NO_REGRESS=	Yes

a41 2
.include <bsd.port.mk>

d46 2
a47 2
	${CC} ${LDFLAGS} -shared -fPIC -o lib/liblua.so.4.0 src/*.o && \
	${CC} ${LDFLAGS} -shared -fPIC -o lib/liblualib.so.4.0 src/lib/*.o && \
d50 2
@


1.7
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/05/06 01:28:00 lebel Exp $
d7 1
a7 1
NEED_VERSION=	1.515
d35 2
@


1.6
log
@lang: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/03/26 08:49:09 wilfried Exp $
d7 1
a7 1
NEED_VERSION=	1.402
@


1.5
log
@respect CC/CFLAGS, ok naddy@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.4 2001/01/19 01:16:51 dbt Exp $
d7 1
a7 1
NEED_VERSION=	1.310
@


1.4
log
@Oh look, cvs dropped a makefile commit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/12/19 06:49:59 dbt Exp $
d30 1
a30 1
	cd ${WRKDIST} && gcc -o bin/bin2c etc/bin2c.c
d52 2
a53 2
	gcc -shared -fpic -o lib/liblua.so.4.0 src/*.o && \
	gcc -shared -fpic -o lib/liblualib.so.4.0 src/lib/*.o && \
@


1.3
log
@Update to lua 4.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/10/22 22:56:05 dbt Exp $
d41 4
a44 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/lua/docs
	${INSTALL_DATA} ${WRKDIST}/doc/* ${PREFIX}/share/lua/docs
@


1.2
log
@Should build on alpha now, update MAINTAINER
ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/08/16 03:15:41 kevlo Exp $
d3 1
a3 1
DISTNAME=	lua-3.2
d35 1
d50 2
a51 2
	gcc -shared -fpic -o lib/liblua.so.3.2 src/*.o && \
	gcc -shared -fpic -o lib/liblualib.so.3.2 src/lib/*.o && \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d20 1
a20 1
MAINTAINER=	dbt@@meat.net
d30 1
a30 1
	(cd ${WRKDIST} && gcc -o bin/bin2c etc/bin2c.c)
d32 2
a33 3
	(cd ${WRKDIST} && gcc -shared -o lib/liblua.so.3.2 src/*.o)
	(cd ${WRKDIST} && gcc -shared -o lib/liblualib.so.3.2 src/lib/*.o)
	(cd ${WRKDIST} && rm bin/lua && make )
d44 9
@


1.1.1.1
log
@Initial import of lua-3.2
lua ia a powerful, light-weight programming language.

Submitted by:	David Terrell <dbt@@meat.net> 
@
text
@@


1.1.1.2
log
@lua 4.0 port.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/12/19 06:49:59 dbt Exp $
d3 1
a3 1
DISTNAME=	lua-4.0
d20 1
a20 1
MAINTAINER=	David Terrell <dbt@@openbsd.org>
d30 1
a30 1
	cd ${WRKDIST} && gcc -o bin/bin2c etc/bin2c.c
d32 3
a34 2
	${BUILD_SHARED}

a35 1
	${INSTALL_DATA_DIR} ${PREFIX}/include
a44 9

.if defined(NO_SHARED_LIBS)
BUILD_SHARED=:
.else
BUILD_SHARED=cd ${WRKDIST} && \
	gcc -shared -fpic -o lib/liblua.so.4.0 src/*.o && \
	gcc -shared -fpic -o lib/liblualib.so.4.0 src/lib/*.o && \
	rm bin/lua && ${MAKE}
.endif
@

