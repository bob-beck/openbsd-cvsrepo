head	1.98;
access;
symbols
	OPENBSD_6_1:1.98.0.4
	OPENBSD_6_1_BASE:1.98
	OPENBSD_6_0:1.98.0.2
	OPENBSD_6_0_BASE:1.98
	OPENBSD_5_9:1.96.0.2
	OPENBSD_5_9_BASE:1.96
	OPENBSD_5_8:1.95.0.4
	OPENBSD_5_8_BASE:1.95
	OPENBSD_5_7:1.93.0.2
	OPENBSD_5_7_BASE:1.93
	OPENBSD_5_6:1.88.0.2
	OPENBSD_5_6_BASE:1.88
	OPENBSD_5_5:1.81.0.4
	OPENBSD_5_5_BASE:1.81
	OPENBSD_5_4:1.81.0.2
	OPENBSD_5_4_BASE:1.81
	OPENBSD_5_3:1.80.0.4
	OPENBSD_5_3_BASE:1.80
	OPENBSD_5_2:1.80.0.2
	OPENBSD_5_2_BASE:1.80
	OPENBSD_5_1_BASE:1.77
	OPENBSD_5_1:1.77.0.2
	OPENBSD_5_0:1.74.0.2
	OPENBSD_5_0_BASE:1.74
	OPENBSD_4_9:1.70.0.2
	OPENBSD_4_9_BASE:1.70
	OPENBSD_4_8:1.61.0.2
	OPENBSD_4_8_BASE:1.61
	OPENBSD_4_7:1.59.0.2
	OPENBSD_4_7_BASE:1.59
	OPENBSD_4_6:1.56.0.4
	OPENBSD_4_6_BASE:1.56
	OPENBSD_4_5:1.56.0.2
	OPENBSD_4_5_BASE:1.56
	OPENBSD_4_4:1.53.0.4
	OPENBSD_4_4_BASE:1.53
	OPENBSD_4_3:1.53.0.2
	OPENBSD_4_3_BASE:1.53
	OPENBSD_4_2:1.50.0.2
	OPENBSD_4_2_BASE:1.50
	OPENBSD_4_1:1.45.0.2
	OPENBSD_4_1_BASE:1.45
	OPENBSD_4_0:1.41.0.2
	OPENBSD_4_0_BASE:1.41
	OPENBSD_3_9:1.37.0.2
	OPENBSD_3_9_BASE:1.37
	OPENBSD_3_8:1.34.0.2
	OPENBSD_3_8_BASE:1.34
	OPENBSD_3_7:1.33.0.2
	OPENBSD_3_7_BASE:1.33
	OPENBSD_3_6:1.30.0.2
	OPENBSD_3_6_BASE:1.30
	OPENBSD_3_5:1.29.0.2
	OPENBSD_3_5_BASE:1.29
	OPENBSD_3_4:1.25.0.2
	OPENBSD_3_4_BASE:1.25
	OPENBSD_3_3:1.19.0.2
	OPENBSD_3_3_BASE:1.19
	OPENBSD_3_2:1.9.0.2
	OPENBSD_3_2_BASE:1.9
	wilfried_2002-04-19:1.1.1.1
	wilfried:1.1.1;
locks; strict;
comment	@# @;


1.98
date	2016.03.04.00.05.35;	author sthen;	state Exp;
branches;
next	1.97;
commitid	e2U6QP8GWvgaUDaT;

1.97
date	2016.03.03.23.27.50;	author sthen;	state Exp;
branches;
next	1.96;
commitid	FFHkeV7q62i28VHX;

1.96
date	2015.08.26.13.28.54;	author sthen;	state Exp;
branches
	1.96.2.1;
next	1.95;
commitid	ZE1WrC6TIp2D2uq2;

1.95
date	2015.05.23.14.18.55;	author bluhm;	state Exp;
branches;
next	1.94;
commitid	mcds7eG2YFSTzUFe;

1.94
date	2015.04.30.14.41.53;	author sthen;	state Exp;
branches;
next	1.93;
commitid	kHKHyO0mSGhFhTYF;

1.93
date	2015.01.19.20.20.59;	author sthen;	state Exp;
branches;
next	1.92;
commitid	qfSJr3Rg19waUyno;

1.92
date	2014.12.17.00.15.24;	author bluhm;	state Exp;
branches;
next	1.91;
commitid	Du77f61rOxBKIaTp;

1.91
date	2014.09.30.13.06.24;	author okan;	state Exp;
branches;
next	1.90;
commitid	PQaTUBKLc42fwI61;

1.90
date	2014.09.16.16.24.02;	author sthen;	state Exp;
branches;
next	1.89;
commitid	XEq2y1dCpA7M5DIf;

1.89
date	2014.09.16.09.07.03;	author espie;	state Exp;
branches;
next	1.88;
commitid	RMOje3pTBXZOKU4I;

1.88
date	2014.07.12.11.25.00;	author sthen;	state Exp;
branches
	1.88.2.1;
next	1.87;
commitid	76ij4rO0HAnPaXZj;

1.87
date	2014.04.30.14.01.29;	author naddy;	state Exp;
branches;
next	1.86;

1.86
date	2014.04.26.21.10.39;	author bluhm;	state Exp;
branches;
next	1.85;

1.85
date	2014.04.25.09.20.27;	author bluhm;	state Exp;
branches;
next	1.84;

1.84
date	2014.04.15.08.53.04;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2014.03.25.21.05.26;	author sthen;	state Exp;
branches;
next	1.82;

1.82
date	2014.03.16.12.39.22;	author sthen;	state Exp;
branches;
next	1.81;

1.81
date	2013.03.11.11.23.53;	author espie;	state Exp;
branches;
next	1.80;

1.80
date	2012.06.25.22.12.30;	author sthen;	state Exp;
branches;
next	1.79;

1.79
date	2012.04.22.11.41.55;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2012.04.16.21.41.07;	author sthen;	state Exp;
branches;
next	1.77;

1.77
date	2012.01.05.17.25.24;	author sthen;	state Exp;
branches;
next	1.76;

1.76
date	2011.12.17.22.01.13;	author sthen;	state Exp;
branches;
next	1.75;

1.75
date	2011.09.21.08.02.07;	author sthen;	state Exp;
branches;
next	1.74;

1.74
date	2011.07.01.06.39.17;	author giovanni;	state Exp;
branches;
next	1.73;

1.73
date	2011.06.23.17.32.46;	author sthen;	state Exp;
branches;
next	1.72;

1.72
date	2011.05.04.10.17.53;	author sthen;	state Exp;
branches;
next	1.71;

1.71
date	2011.03.20.06.46.50;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2010.12.24.10.40.06;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2010.11.30.08.34.27;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2010.11.26.07.51.00;	author espie;	state Exp;
branches;
next	1.66;

1.66
date	2010.11.19.07.23.08;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2010.11.04.12.07.09;	author sthen;	state Exp;
branches;
next	1.64;

1.64
date	2010.10.18.19.59.18;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2010.09.27.19.59.39;	author sthen;	state Exp;
branches;
next	1.62;

1.62
date	2010.08.25.06.34.50;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2010.05.23.21.33.28;	author sthen;	state Exp;
branches;
next	1.60;

1.60
date	2010.03.24.23.56.04;	author sthen;	state Exp;
branches;
next	1.59;

1.59
date	2010.01.01.22.41.15;	author sthen;	state Exp;
branches;
next	1.58;

1.58
date	2009.10.23.10.26.17;	author sthen;	state Exp;
branches;
next	1.57;

1.57
date	2009.09.15.17.37.21;	author jasper;	state Exp;
branches;
next	1.56;

1.56
date	2009.01.01.15.23.41;	author bluhm;	state Exp;
branches
	1.56.4.1;
next	1.55;

1.55
date	2008.10.01.19.30.39;	author sthen;	state Exp;
branches;
next	1.54;

1.54
date	2008.09.04.06.42.12;	author brad;	state Exp;
branches;
next	1.53;

1.53
date	2008.01.07.17.52.48;	author mbalmer;	state Exp;
branches;
next	1.52;

1.52
date	2007.10.11.17.20.06;	author sthen;	state Exp;
branches;
next	1.51;

1.51
date	2007.09.16.00.17.06;	author merdely;	state Exp;
branches;
next	1.50;

1.50
date	2007.07.26.05.57.50;	author mbalmer;	state Exp;
branches;
next	1.49;

1.49
date	2007.07.02.10.32.43;	author steven;	state Exp;
branches;
next	1.48;

1.48
date	2007.05.30.17.39.14;	author aanriot;	state Exp;
branches;
next	1.47;

1.47
date	2007.05.07.19.53.42;	author mbalmer;	state Exp;
branches;
next	1.46;

1.46
date	2007.05.06.13.28.30;	author mbalmer;	state Exp;
branches;
next	1.45;

1.45
date	2007.02.15.19.57.48;	author mbalmer;	state Exp;
branches
	1.45.2.1;
next	1.44;

1.44
date	2006.10.28.07.35.41;	author mbalmer;	state Exp;
branches;
next	1.43;

1.43
date	2006.10.27.10.12.44;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2006.10.21.19.26.14;	author aanriot;	state Exp;
branches;
next	1.41;

1.41
date	2006.08.10.18.24.45;	author steven;	state Exp;
branches
	1.41.2.1;
next	1.40;

1.40
date	2006.08.09.07.21.07;	author robert;	state Exp;
branches;
next	1.39;

1.39
date	2006.06.06.17.33.41;	author steven;	state Exp;
branches;
next	1.38;

1.38
date	2006.03.20.20.18.29;	author steven;	state Exp;
branches;
next	1.37;

1.37
date	2006.02.08.04.54.49;	author david;	state Exp;
branches
	1.37.2.1;
next	1.36;

1.36
date	2006.01.28.21.27.17;	author steven;	state Exp;
branches;
next	1.35;

1.35
date	2005.10.09.09.05.43;	author mbalmer;	state Exp;
branches;
next	1.34;

1.34
date	2005.07.10.09.34.52;	author sturm;	state Exp;
branches
	1.34.2.1;
next	1.33;

1.33
date	2005.01.02.01.07.48;	author alek;	state Exp;
branches
	1.33.2.1;
next	1.32;

1.32
date	2004.12.28.21.03.51;	author sturm;	state Exp;
branches;
next	1.31;

1.31
date	2004.10.31.08.44.44;	author sturm;	state Exp;
branches;
next	1.30;

1.30
date	2004.08.06.01.39.09;	author ian;	state Exp;
branches;
next	1.29;

1.29
date	2004.01.21.08.01.59;	author brad;	state Exp;
branches
	1.29.2.1;
next	1.28;

1.28
date	2004.01.19.11.20.07;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2003.12.27.04.17.01;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2003.12.07.23.15.19;	author naddy;	state Exp;
branches;
next	1.25;

1.25
date	2003.08.07.07.51.20;	author jolan;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2003.06.17.16.33.04;	author avsm;	state Exp;
branches;
next	1.23;

1.23
date	2003.05.23.23.36.31;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2003.05.14.14.19.20;	author lebel;	state Exp;
branches;
next	1.21;

1.21
date	2003.04.06.15.42.07;	author lebel;	state Exp;
branches;
next	1.20;

1.20
date	2003.03.27.14.51.29;	author lebel;	state Exp;
branches;
next	1.19;

1.19
date	2003.03.06.21.23.47;	author sturm;	state Exp;
branches;
next	1.18;

1.18
date	2003.02.22.14.55.51;	author lebel;	state Exp;
branches;
next	1.17;

1.17
date	2003.02.03.20.28.24;	author lebel;	state Exp;
branches;
next	1.16;

1.16
date	2003.01.26.16.43.45;	author lebel;	state Exp;
branches;
next	1.15;

1.15
date	2002.12.03.07.10.06;	author wcobb;	state Exp;
branches;
next	1.14;

1.14
date	2002.10.30.04.38.13;	author pvalchev;	state Exp;
branches;
next	1.13;

1.13
date	2002.10.17.17.46.31;	author lebel;	state Exp;
branches;
next	1.12;

1.12
date	2002.10.10.13.00.23;	author lebel;	state Exp;
branches;
next	1.11;

1.11
date	2002.10.07.14.32.33;	author lebel;	state Exp;
branches;
next	1.10;

1.10
date	2002.10.06.23.34.26;	author lebel;	state Exp;
branches;
next	1.9;

1.9
date	2002.09.05.19.29.29;	author lebel;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2002.09.03.12.17.57;	author lebel;	state Exp;
branches;
next	1.7;

1.7
date	2002.09.02.21.16.16;	author lebel;	state Exp;
branches;
next	1.6;

1.6
date	2002.07.07.15.07.20;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2002.06.20.21.46.13;	author lebel;	state Exp;
branches;
next	1.4;

1.4
date	2002.06.17.22.08.59;	author lebel;	state Exp;
branches;
next	1.3;

1.3
date	2002.05.13.23.31.25;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.02.15.26.36;	author wilfried;	state Exp;
branches;
next	1.1;

1.1
date	2002.04.19.21.39.20;	author wilfried;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.04.19.21.39.20;	author wilfried;	state Exp;
branches;
next	;

1.9.2.1
date	2003.01.26.16.54.39;	author lebel;	state Exp;
branches;
next	;

1.25.2.1
date	2004.08.08.00.21.40;	author robert;	state Exp;
branches;
next	;

1.29.2.1
date	2004.08.06.18.24.14;	author robert;	state Exp;
branches;
next	;

1.33.2.1
date	2005.07.14.19.43.51;	author sturm;	state Exp;
branches;
next	;

1.34.2.1
date	2006.06.08.18.41.19;	author sturm;	state Exp;
branches;
next	;

1.37.2.1
date	2006.06.08.20.23.36;	author sturm;	state Exp;
branches;
next	1.37.2.2;

1.37.2.2
date	2007.03.16.17.56.14;	author sturm;	state Exp;
branches;
next	;

1.41.2.1
date	2007.03.09.06.20.10;	author sturm;	state Exp;
branches;
next	1.41.2.2;

1.41.2.2
date	2007.07.06.13.13.11;	author sturm;	state Exp;
branches;
next	;

1.45.2.1
date	2007.07.06.13.13.31;	author sturm;	state Exp;
branches;
next	;

1.56.4.1
date	2010.01.03.00.49.24;	author sthen;	state Exp;
branches;
next	;

1.88.2.1
date	2014.09.30.13.15.12;	author sthen;	state Exp;
branches;
next	;
commitid	amDQJgKEPDTmeYQy;

1.96.2.1
date	2016.03.19.12.17.45;	author sthen;	state Exp;
branches;
next	;
commitid	QqSlUJQlEUimQhXQ;


desc
@@


1.98
log
@pull back more patches from spamassassin 3.4 branch, again mostly coping
with Net::DNS API changes not documented in their changelog
@
text
@# $OpenBSD: Makefile,v 1.97 2016/03/03 23:27:50 sthen Exp $

COMMENT=		mailfilter to identify and mark spam

VER=			3.4.1
DISTNAME=		Mail-SpamAssassin-${VER}
PKGNAME=		p5-${DISTNAME}
REVISION=		4
RULESNAME=		Mail-SpamAssassin-rules-${VER}.r1675274.tgz
CATEGORIES=		mail perl5

DISTFILES=		${DISTNAME}${EXTRACT_SUFX} ${RULESNAME}
EXTRACT_SUFX=		.tar.bz2
EXTRACT_ONLY=		${DISTNAME}${EXTRACT_SUFX}

MAINTAINER=		Stuart Henderson <sthen@@openbsd.org>

HOMEPAGE=		http://spamassassin.apache.org/

# Apache Software License (v2)
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		c crypto ssl z

MASTER_SITES=		${MASTER_SITE_APACHE:=spamassassin/source/}

COMMON_DEPENDS=		www/p5-HTML-Parser>=3.31 \
			mail/p5-Mail-DKIM>=0.31 \
			net/p5-Net-DNS>=0.34 \
			net/p5-NetAddr-IP \
			security/p5-IO-Socket-SSL

BUILD_DEPENDS=		${COMMON_DEPENDS}
RUN_DEPENDS=		${COMMON_DEPENDS} \
			devel/re2c \
			p5-Mail-SPF-*|p5-Mail-SPF-Query-*:mail/p5-Mail-SPF \
			net/p5-Geo-IP \
			net/p5-Net-Patricia \
			security/gnupg \
			textproc/p5-Encode-Detect \
			curl-*|p5-libwww-*:net/curl \
			www/p5-HTTP-Date
TEST_DEPENDS=		${RUN_DEPENDS}

MAKE_ENV+=		CC="${CC}"

CONFIGURE_STYLE=	perl
CONFIGURE_ARGS+=	DESTDIR=${WRKINST} \
			SYSCONFDIR=${SYSCONFDIR} \
			LOCALSTATEDIR=${LOCALSTATEDIR} \
			CONTACT_ADDRESS="the administrator of this system" \
			ENABLE_SSL="yes"

CONFDIR=		${SYSCONFDIR}/mail/spamassassin
LOCALSTATEDIR=		/var/db/spamassassin
SAMPLE_CONFDIR=		${PREFIX}/share/examples/SpamAssassin

SUBST_VARS=		CONFDIR

# test insists on creating files in $HOME
PORTHOME=		${WRKDIR}/temp-home

DOCS=		CREDITS NOTICE README UPGRADE USAGE LICENSE TRADEMARK \
		procmailrc.example sample-nonspam.txt sample-spam.txt

# handling this in the extract stage (rather than untarring directly under
# PREFIX in post-install) allows us to patch the rules if necessary.
_R=		${WRKSRC}/_dist_rules
post-extract:
	mkdir ${_R} && cd ${_R} && tar xzf ${FULLDISTDIR}/${RULESNAME}

pre-configure:
	${SUBST_CMD} ${WRKSRC}/lib/Mail/SpamAssassin/Util.pm

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/SpamAssassin
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/SpamAssassin/sql
	${INSTALL_DATA_DIR} ${SAMPLE_CONFDIR}
	${INSTALL_DATA} ${WRKSRC}/rules/local.cf ${WRKSRC}/rules/*.pre \
		${SAMPLE_CONFDIR}
.for i in ${DOCS}
	${INSTALL_DATA} ${WRKSRC}/${i} ${PREFIX}/share/doc/SpamAssassin
.endfor
	${INSTALL_DATA} ${WRKSRC}/sql/* ${PREFIX}/share/doc/SpamAssassin/sql
	cp -r ${_R}/* ${PREFIX}/share/spamassassin/
	chown ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/spamassassin/*

pre-test:
	mkdir -p ${PORTHOME}

.include <bsd.port.mk>
@


1.97
log
@Set RD properly on DNS queries. Broken by Net::DNS 1.01+
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2015/08/26 13:28:54 sthen Exp $
d8 1
a8 1
REVISION=		3
@


1.96
log
@explicitly search ${LOCALBASE}/bin and sbin when looking for gpg etc.,
fixing a problem seen by wesley at e-solutions.re where /usr/local is not
in the path for cronjobs running sa-update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2015/05/23 14:18:55 bluhm Exp $
d8 1
a8 1
REVISION=		2
@


1.96.2.1
log
@MFC: backport SpamAssassin fixes to cope with p5-Net-DNS API breaks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2016/03/04 00:05:35 sthen Exp $
d8 1
a8 1
REVISION=		4
@


1.95
log
@Make the regression tests of p5-Mail-SpamAssassin pass.
- Replace SSLv3_client_method() with  SSLv23_client_method() in spamc.
- Do not choose a specific SSL version, let IO::Socket::SSL decide.
- Print SSL error messages to make debugging easier.
- Fix search path in test.
input and OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2015/04/30 14:41:53 sthen Exp $
d8 1
a8 1
REVISION=		1
d71 3
@


1.94
log
@update to p5-Mail-SpamAssassin 3.4.1
http://svn.apache.org/repos/asf/spamassassin/branches/3.4/build/announcements/3.4.1.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2015/01/19 20:20:59 sthen Exp $
d8 1
@


1.93
log
@switch SpamAssassin's forced p5-libwww dependency for one which can accept
either p5-libwww or curl (possible now that libwww is updated and HTTP::Date
is split off).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2014/12/17 00:15:24 bluhm Exp $
d5 1
a5 2
VER=			3.4.0
REVISION=		6
d8 1
a8 1
RULESNAME=		Mail-SpamAssassin-rules-${VER}.r1565117.tgz
@


1.92
log
@Do not depend on net/p5-IO-Socket-IP.  The module IO::Socket::IP
0.29 is included in Perl 5.20.1 and installed in base.  The port
will be removed soon.
OK giovanni@@ nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2014/09/30 13:06:24 okan Exp $
d6 1
a6 1
REVISION=		5
d41 2
a42 3
			www/p5-libwww
# SpamAssassin can use curl instead of LWP (lighter dep chain), but it needs
# a separate HTTP::Date, our LWP pre-dates this being split off.
@


1.91
log
@Backport r1603518 from upstream to fix issues with recent Net::DNS
updates (>= 0.76).

OK sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2014/09/16 16:24:02 sthen Exp $
d6 1
a6 1
REVISION=		4
a30 1
			net/p5-IO-Socket-IP \
@


1.90
log
@fix FAKE_AS_ROOT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2014/09/16 09:07:03 espie Exp $
d6 1
a6 1
REVISION=		3
@


1.89
log
@explicitly mark the few ports that don't build with FAKE_AS_ROOT=No
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2014/07/12 11:25:00 sthen Exp $
a3 1
FAKE_AS_ROOT = 		Yes
a77 2
	pod2man --section=1 ${WRKSRC}/spamc/spamc.pod > \
		${PREFIX}/man/man1/spamc.1
@


1.88
log
@don't use "echo 'pkg_scripts="${pkg_scripts} icinga' >> /etc/rc.conf.local"
examples
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2014/04/30 14:01:29 naddy Exp $
d4 1
@


1.88.2.1
log
@MFC SpamAssassin fix, unbreak DNS-based checks following the update of
p5-Net-DNS to 0.76.

https://issues.apache.org/SpamAssassin/show_bug.cgi?id=7057
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2014/09/30 13:06:24 okan Exp $
d6 1
a6 1
REVISION=		4
d78 2
@


1.87
log
@drop workarounds for missing AI_ADDRCONFIG
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2014/04/26 21:10:39 bluhm Exp $
d6 1
a6 1
REVISION=		2
@


1.86
log
@The regression tests of p5-Mail-SpamAssassin failed if devel/re2c
is installed.  If the package is not installed, the sa_compile
subtest is skipped.
- Set the TEST_DEPENDS to RUN_DEPENDS to make the test results reliable.
- Create the test config directory before putting the config file
  into it.
OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2014/04/25 09:20:27 bluhm Exp $
d6 1
a6 1
REVISION=		1
@


1.85
log
@OpenBSD does not support AI_ADDRCONFIG so SpamAssassin did not use
getaddrinfo.  This caused a lot of warnings and the regression tests
failed.  Remove the check for AI_ADDRCONFIG from the eval that
imports Socket.pm.
OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2014/04/15 08:53:04 ajacoutot Exp $
d45 1
@


1.84
log
@No need to explicitely SUBST_VARS LOCALSTATEDIR anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2014/03/25 21:05:26 sthen Exp $
d6 1
a6 1
REVISION=		0
@


1.83
log
@missed cvs rm's, pointed out by brad@@ (not a problem, but no need to keep
them any more).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2014/03/16 12:39:22 sthen Exp $
d59 1
a59 1
SUBST_VARS=		CONFDIR LOCALSTATEDIR
@


1.82
log
@update to SpamAssassin 3.4.0, with input from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2013/03/11 11:23:53 espie Exp $
d6 1
@


1.81
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2012/06/25 22:12:30 sthen Exp $
d5 1
a5 1
VER=			3.3.2
d7 2
a8 3
PKGNAME=		p5-${DISTNAME:S/-rc/rc/}
REVISION=		6
RULESNAME=		Mail-SpamAssassin-rules-${VER}-r1104058.tar.gz
a13 1
WRKDIST=		${WRKDIR}/${DISTNAME:C/-rc.*//}
d30 2
a31 3
			net/p5-IO-Socket-INET6 \
			security/p5-IO-Socket-SSL \
			www/p5-libwww
d35 1
d37 2
a38 1
			net/p5-IP-Country \
d40 4
a43 1
			devel/re2c
d66 6
d84 1
a84 1
	cd ${PREFIX}/share/spamassassin; tar xzf ${FULLDISTDIR}/${RULESNAME}
@


1.80
log
@let SpamAssassin work if sslv2 is disabled, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2012/04/22 11:41:55 ajacoutot Exp $
a22 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d58 1
a58 1
# regress insists on creating files in $HOME
d79 1
a79 1
pre-regress:
@


1.79
log
@Use RCDIR instead of /etc/rc.d when refering to packages rc scripts.

discussed with espie and sthen
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2012/04/16 21:41:07 sthen Exp $
d8 1
a8 1
REVISION=		5
@


1.78
log
@add dep on p5-IP-Country
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2012/01/05 17:25:24 sthen Exp $
d8 1
a8 1
REVISION=		4
@


1.77
log
@don't use groff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2011/12/17 22:01:13 sthen Exp $
d8 1
a8 1
REVISION=		3
d42 1
@


1.76
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2011/09/21 08:02:07 sthen Exp $
d8 1
a8 1
REVISION=		2
a56 1
USE_GROFF =	Yes
@


1.75
log
@- add p5-Mail-SPF-*|p5-Mail-SPF-Query-* as a run dep for SpamAssassin (two
options; either can be used but they conflict, so allow both as suggested
by giovanni@@).

- install a few more doc files.

- move html mini-howto to a README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2011/07/01 06:39:17 giovanni Exp $
d8 1
a8 1
REVISION=		1
@


1.74
log
@
Install sql files
ok sthen@@ (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2011/06/23 17:32:46 sthen Exp $
d8 1
a8 1
REVISION=		0
d41 1
d64 2
a65 3
FAQ=		OpenBSD-SpamAssassin-mini-howto.html
DOCS=		README UPGRADE LICENSE procmailrc.example \
		sample-nonspam.txt sample-spam.txt
a70 1
	${SUBST_CMD} -c ${FILESDIR}/${FAQ} ${WRKSRC}/${FAQ}
d75 1
a75 1
.for i in ${FAQ} ${DOCS}
@


1.73
log
@update SpamAssassin to 3.3.2, thanks Brad and pea@@ for testing. ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/05/04 10:17:53 sthen Exp $
d8 1
d69 1
d79 1
@


1.72
log
@fix a spamassassin --lint warning, from upstream, suggested by Armin Wolfermann
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/03/20 06:46:50 ajacoutot Exp $
d5 1
a5 1
VER=			3.3.1
d8 1
a8 2
REVISION=		8
RULESNAME=		Mail-SpamAssassin-rules-${VER}.r923114
d11 1
a11 1
DISTFILES=		${DISTNAME}${EXTRACT_SUFX} ${RULESNAME}.tgz
d77 1
a77 1
	cd ${PREFIX}/share/spamassassin; tar xzf ${FULLDISTDIR}/${RULESNAME}.tgz
@


1.71
log
@Better pexp in rc script.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2010/12/27 14:50:23 ajacoutot Exp $
d8 1
a8 1
REVISION=		7
@


1.70
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2010/12/24 10:40:06 ajacoutot Exp $
d8 1
a8 1
REVISION=		6
@


1.69
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2010/11/30 08:34:27 ajacoutot Exp $
d8 1
a8 1
REVISION=		5
@


1.68
log
@Kill 2 very annoying warnings when running spamd, merged from upstream.

ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2010/11/26 07:51:00 espie Exp $
d8 1
a8 1
REVISION=		4
@


1.67
log
@make use of PKGSPEC to simplify depends, requires most recent security/gnupg
to compile correctly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2010/11/19 07:23:08 espie Exp $
d8 1
a8 1
REVISION=		3
@


1.66
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2010/11/04 12:07:09 sthen Exp $
d41 1
a41 1
			security/gnupg<2 \
@


1.65
log
@rc script for spamassassin; suggestions and ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2010/10/18 19:59:18 espie Exp $
d31 7
a37 7
COMMON_DEPENDS=		:p5-HTML-Parser->=3.31:www/p5-HTML-Parser \
			:p5-Mail-DKIM->=0.31:mail/p5-Mail-DKIM \
			:p5-Net-DNS->=0.34:net/p5-Net-DNS \
			:p5-NetAddr-IP-*:net/p5-NetAddr-IP \
			:p5-IO-Socket-INET6-*:net/p5-IO-Socket-INET6 \
			:p5-IO-Socket-SSL-*:security/p5-IO-Socket-SSL \
			:p5-libwww-*:www/p5-libwww
d41 2
a42 2
			:gnupg-<2:security/gnupg \
			::devel/re2c
@


1.64
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2010/09/27 19:59:39 sthen Exp $
d8 1
a8 1
REVISION=		2
@


1.63
log
@perl 5.12.2 fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/08/25 06:34:50 ajacoutot Exp $
d56 1
@


1.62
log
@Force dependency on gnupg1 since gnupg2 has the same PKGNAME, it can
create some depency mess.
The long term solution is to update+merge gnupg2 into gnupg1 but for now
at least we have a clean dependency chain.

looks ok to jasper@@ and pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/05/23 21:33:28 sthen Exp $
d8 1
a8 1
REVISION=		1
@


1.61
log
@@@sample v330.pre and bump PKGNAME-main.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/03/24 23:56:04 sthen Exp $
d7 2
a8 1
PKGNAME=		p5-${DISTNAME:S/-rc/rc/}p0
d41 1
a41 1
			:gnupg-*:security/gnupg \
@


1.60
log
@update to 3.3.1; thanks pea@@ for testing and comments
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2009/10/23 10:26:17 sthen Exp $
d7 1
a7 1
PKGNAME=		p5-${DISTNAME:S/-rc/rc/}
@


1.59
log
@Adjust FH_DATE_PAST_20XX rule so it doesn't trigger on all dates from 2010.
From upstream repository.
@
text
@d5 4
a8 2
DISTNAME=		Mail-SpamAssassin-3.2.5
PKGNAME=		p5-${DISTNAME}p4
d11 5
d25 1
d31 1
a31 1
			:p5-Digest-SHA1-*:security/p5-Digest-SHA1 \
d33 1
a33 1
			:p5-Mail-SPF-Query-*:mail/p5-Mail-SPF-Query \
d68 1
a68 3
	@@sed -e "s|@@SYSCONFDIR@@|${SYSCONFDIR}|" \
		-e "s|@@PREFIX@@|${TRUEPREFIX}|" \
		${FILESDIR}/${FAQ} > ${WRKSRC}/${FAQ}
d76 2
@


1.58
log
@- unbreak with perl 5.10.1 (don't rely on an internal MakeMaker api
which changed).

- take MAINTAINER.

looks ok to jasper.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2009/09/15 17:37:21 jasper Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}p3
@


1.57
log
@remove marc balmer as maintainer of all of his ports, to take away the
illusion marc still maintains them. as requested by himself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/01/01 15:23:41 bluhm Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}p2
d8 2
@


1.56
log
@Replace p5-IO-INET6 with p5-IO-Socket-INET6 as the upstream cpan
package has been renamed.  Unfortunately there is no smooth upgrade
path.  Packages have to be deleted and added manually.

discussed with bernd@@ and sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2008/10/01 19:30:39 sthen Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}p1
a7 2

MAINTAINER=		Marc Balmer <mbalmer@@openbsd.org>
@


1.56.4.1
log
@MFC:
Adjust FH_DATE_PAST_20XX rule so it doesn't trigger on all dates from 2010.
From upstream repository.

ok jasper@@ william@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/01/01 15:23:41 bluhm Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}p2
d9 1
a9 1
MAINTAINER=		Stuart Henderson <sthen@@openbsd.org>
@


1.55
log
@Adjust dependencies for IO::Zlib and Archive::Tar which now come
as part of base Perl. Regen PLIST while there, some manpages missed.

ok simon@@ "commitski" mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2008/09/04 06:42:12 brad Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}p0
d26 1
a26 1
			:p5-IO-INET6-*:net/p5-IO-INET6 \
@


1.54
log
@Update to SpamAssassin 3.2.5; minor bug fix update.

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2008/01/07 17:52:48 mbalmer Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}
d28 1
a28 3
			:p5-libwww-*:www/p5-libwww \
			:p5-Archive-Tar->=1.23:archivers/p5-Archive-Tar \
			:p5-IO-Zlib->=1.04:archivers/p5-IO-Zlib
@


1.53
log
@Maintenance update of SpamAssassin to version 3.2.4.
This is a major bug-fix release, with a few minor new features.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2007/10/11 17:20:06 sthen Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.2.4
@


1.52
log
@add RUN_DEPENDS=::devel/re2c so you can compile your ruleset to
native code with sa-compile(1).

"committ it" mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2007/09/16 00:17:06 merdely Exp $
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-3.2.2
PKGNAME=		p5-${DISTNAME}p0
@


1.51
log
@Remove surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2007/07/26 05:57:50 mbalmer Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}
d34 2
a35 1
			:gnupg-*:security/gnupg
@


1.50
log
@Minor bugfix update to SpamAssassin 3.2.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2007/07/02 10:32:43 steven Exp $
d3 1
a3 1
COMMENT=		"mailfilter to identify and mark spam"
@


1.49
log
@SECURITY update to 3.2.1
fixes a local user symlink-attack DoS vulnerability; more details at
http://spamassassin.apache.org/advisories/cve-2007-2873.txt

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2007/05/30 17:39:14 aanriot Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.2.1
@


1.48
log
@get ride of RUN_DEPENDS=${BUILD_DEPENDS} construct.

checked by naddy@@, ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2007/05/07 19:53:42 mbalmer Exp $
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-3.2.0
PKGNAME=		p5-${DISTNAME}p1
d18 1
a18 1
WANTLIB=		c crypto ssl
@


1.47
log
@Fix a problem with the last update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2007/05/06 13:28:30 mbalmer Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}p0
d22 1
a22 1
BUILD_DEPENDS=		:p5-HTML-Parser->=3.31:www/p5-HTML-Parser \
d32 2
a33 1
RUN_DEPENDS=		${BUILD_DEPENDS} \
@


1.46
log
@Update to SpamAssassin 3.2.0

ok simon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/02/15 19:57:48 mbalmer Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}
@


1.45
log
@3.1.8 is a major bug-fix release, including a potential DoS.  The major
highlights are:

- bug 5318: fix for CVE-2007-0451: possible DoS due to incredibly
  long URIs found in the message content.
- bug 5240: disable perl module usage in update channels unless
  --allowplugins is specified
- bug 5288: files with names starting/ending in whitespace weren't usable
- bug 5056: remove Text::Wrap related code due to upstream issues
- bug 5145: update spamassassin and sa-learn to better deal with STDIN
- bug 5140 and 5179: improvements and bug fixes related to DomainKeys
  and DKIM support
- several updates for Received header parsing
- several documentation updates and random taint-variable related issues

A more detailed change log can be read here:

  http://svn.apache.org/repos/asf/spamassassin/branches/3.1/Changes

ok nikolay
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2006/10/28 07:35:41 mbalmer Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.1.8
@


1.45.2.1
log
@MFC:
SECURITY update to 3.2.1
fixes a local user symlink-attack DoS vulnerability; more details at
http://spamassassin.apache.org/advisories/cve-2007-2873.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/02/15 19:57:48 mbalmer Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.2.1
d18 1
a18 1
WANTLIB=		c crypto ssl z
d22 1
a22 1
COMMON_DEPENDS=		:p5-HTML-Parser->=3.31:www/p5-HTML-Parser \
d32 1
a32 2
BUILD_DEPENDS=		${COMMON_DEPENDS}
RUN_DEPENDS=		${COMMON_DEPENDS} \
@


1.44
log
@Maintainer change.  Bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2006/10/27 10:12:44 ajacoutot Exp $
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-3.1.7
PKGNAME=		p5-${DISTNAME}p0
@


1.43
log
@- update to version 3.1.7 (by Andreas Vögele, with some cleanings)
- use /var/db/spamassassin as homedir for _spamdaemon user
- does _not_ remove /var/db/spamassassin when using `pkg_delete -c`

"go ahead" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2006/10/21 19:26:14 aanriot Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}
d9 1
a9 1
MAINTAINER=		Andreas Voegele <andreas@@altroot.de>
@


1.42
log
@- remove 'noauto' and install _spamdaemon user by default.
- bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/08/10 18:24:45 steven Exp $
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-3.1.4
PKGNAME=		p5-${DISTNAME}p1
d30 3
a32 1
			:p5-IO-Zlib->=1.04:archivers/p5-IO-Zlib \
a34 2
RUN_DEPENDS=		${BUILD_DEPENDS}

d38 1
a38 1
CONFIGURE_ARGS+=	RUN_NET_TESTS="no" \
d40 1
a40 1
			LOCALSTATEDIR=/var/db \
d45 1
a45 1
RULES_DIR=		${PREFIX}/share/spamassassin
d48 1
a48 5
SUBST_VARS=		CONFDIR SAMPLE_CONFDIR

FAKE_FLAGS=		${DESTDIRNAME}=${WRKINST} \
			DEFRULESDIR=${WRKINST}${RULES_DIR} \
			LOCALRULESDIR=${WRKINST}${SAMPLE_CONFDIR}
a55 4
LOCALCF=	local.cf init.pre v310.pre v312.pre

pre-configure:
	@@perl -pi -e "s#\@@\@@LOCAL_RULES_DIR\@@\@@#${CONFDIR}#" ${WRKSRC}/rules/*
d61 9
a69 17
	    -e "s|@@PREFIX@@|${TRUEPREFIX}|" \
	    ${FILESDIR}/${FAQ} > ${WRKSRC}/${FAQ}
	cd ${WRKSRC} && ${INSTALL_DATA} ${FAQ} ${DOCS} \
		${PREFIX}/share/doc/SpamAssassin
	cd ${WRKSRC}/rules && ${INSTALL_DATA} ${LOCALCF} ${SAMPLE_CONFDIR}
	cd ${WRKSRC} && pod2man --section=1 spamc/spamc.pod > \
	    ${PREFIX}/man/man1/spamc.1
	cd ${WRKSRC} && pod2man --section=8 spamd/spamd > \
	    ${PREFIX}/man/man8/spamd.8
	# Extract the default GnuPG keys for sa-update.  The keys will
	# be installed as config files in ${CONFDIR}/sa-update-keys.
	# Otherwise, sa-update would install the keys on its first
	# invocation.  The sa-update utility also creates the directory
	# /var/db/spamassassin.
	${INSTALL_DATA_DIR} ${SAMPLE_CONFDIR}/sa-update-keys
	${LOCALBASE}/bin/gpg --homedir=${SAMPLE_CONFDIR}/sa-update-keys --batch --import ${WRKSRC}/rules/sa-update-pubkey.txt
	rm -f ${SAMPLE_CONFDIR}/sa-update-keys/pubring.gpg~
@


1.41
log
@Some tweaks to accomodate sa-update:
- Add gnupg dependency.
- Better location for the updates: /var/db/spamassassin
- Install sa-update's default GnuPG keys as config files, so that they
  will be removed upon pkg_delete.
- Remove /var/db/spamassassin using @@extraunexec.
Specify minimum versions for some dependencies while here.

from maintainer Andreas Vogele <andreas at altroot.de>

looks fine naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/08/09 07:21:07 robert Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}p0
@


1.41.2.1
log
@MFC:
3.1.8 is a major bug-fix release, including a potential DoS.  The major
highlights are:

- bug 5318: fix for CVE-2007-0451: possible DoS due to incredibly
long URIs found in the message content.
- bug 5240: disable perl module usage in update channels unless
--allowplugins is specified
- bug 5288: files with names starting/ending in whitespace weren't usable
- bug 5056: remove Text::Wrap related code due to upstream issues
- bug 5145: update spamassassin and sa-learn to better deal with STDIN
- bug 5140 and 5179: improvements and bug fixes related to DomainKeys
and DKIM support
- several updates for Received header parsing
- several documentation updates and random taint-variable related issues

A more detailed change log can be read here:

http://svn.apache.org/repos/asf/spamassassin/branches/3.1/Changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/08/10 18:24:45 steven Exp $
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-3.1.8
PKGNAME=		p5-${DISTNAME}
d30 2
a31 1
			:p5-IO-Zlib->=1.04:archivers/p5-IO-Zlib
d33 1
a33 2
RUN_DEPENDS=		${BUILD_DEPENDS} \
			:gnupg-*:security/gnupg
d38 1
a38 1
CONFIGURE_ARGS+=	DESTDIR=${WRKINST} \
d40 1
a40 1
			LOCALSTATEDIR=${LOCALSTATEDIR} \
d45 1
a45 1
LOCALSTATEDIR=		/var/db/spamassassin
d48 5
a52 1
SUBST_VARS=		CONFDIR LOCALSTATEDIR
d60 4
d71 15
a85 7
	pod2man --section=1 ${WRKSRC}/spamc/spamc.pod > \
		${PREFIX}/man/man1/spamc.1
	${INSTALL_DATA} ${WRKSRC}/rules/local.cf ${WRKSRC}/rules/*.pre \
		${SAMPLE_CONFDIR}
.for i in ${FAQ} ${DOCS}
	${INSTALL_DATA} ${WRKSRC}/${i} ${PREFIX}/share/doc/SpamAssassin
.endfor
@


1.41.2.2
log
@SECURITY update to 3.2.1
fixes a local user symlink-attack DoS vulnerability; more details at
http://spamassassin.apache.org/advisories/cve-2007-2873.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41.2.1 2007/03/09 06:20:10 sturm Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.2.1
d18 1
a18 1
WANTLIB=		c crypto ssl z
d22 1
a22 1
COMMON_DEPENDS=		:p5-HTML-Parser->=3.31:www/p5-HTML-Parser \
d32 1
a32 2
BUILD_DEPENDS=		${COMMON_DEPENDS}
RUN_DEPENDS=		${COMMON_DEPENDS} \
@


1.40
log
@update to version 3.1.4 which fixes a memleak and other smaller bugs;

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/06/06 17:33:41 steven Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}
d22 1
a22 1
BUILD_DEPENDS=		:p5-HTML-Parser-*:www/p5-HTML-Parser \
d24 1
a24 1
			:p5-Net-DNS-*:net/p5-Net-DNS \
d29 3
a31 2
			:p5-Archive-Tar-*:archivers/p5-Archive-Tar \
			:p5-IO-Zlib-*:archivers/p5-IO-Zlib
d40 1
d78 8
@


1.39
log
@update to SpamAssassin 3.1.3

ok maintainer Andreas Voegele
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/03/20 20:18:29 steven Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.1.3
@


1.38
log
@maintenance update to 3.1.1

from: new maintainer Andreas Voegele (voegelas at gmx dot net)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/02/08 04:54:49 david Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.1.1
d9 1
a9 1
MAINTAINER=		Andreas Voegele <voegelas@@gmx.net>
d58 1
a58 1
LOCALCF=	local.cf init.pre v310.pre
@


1.37
log
@move any perl or sed substitutions from post-patch to pre-configure
(fixes make update-patches)
ok sturm@@; "looks reasonable" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/01/28 21:27:17 steven Exp $
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-3.1.0
PKGNAME=		p5-${DISTNAME}p0
d9 1
a9 1
MAINTAINER=		Ben Lovett <ben@@tilderoot.com>
@


1.37.2.1
log
@security update to p5-Mail-SpamAssassin 3.1.3

fixes CVE 2006-2447
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/02/08 04:54:49 david Exp $
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-3.1.3
PKGNAME=		p5-${DISTNAME}
d58 1
a58 1
LOCALCF=	local.cf init.pre v310.pre v312.pre
@


1.37.2.2
log
@MFC:
3.1.8 is a major bug-fix release, including a potential DoS.  The major
highlights are:

- bug 5318: fix for CVE-2007-0451: possible DoS due to incredibly
long URIs found in the message content.
- bug 5240: disable perl module usage in update channels unless
--allowplugins is specified
- bug 5288: files with names starting/ending in whitespace weren't usable
- bug 5056: remove Text::Wrap related code due to upstream issues
- bug 5145: update spamassassin and sa-learn to better deal with STDIN
- bug 5140 and 5179: improvements and bug fixes related to DomainKeys
and DKIM support
- several updates for Received header parsing
- several documentation updates and random taint-variable related issues

A more detailed change log can be read here:

http://svn.apache.org/repos/asf/spamassassin/branches/3.1/Changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37.2.1 2006/06/08 20:23:36 sturm Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.1.8
d22 1
a22 1
BUILD_DEPENDS=		:p5-HTML-Parser->=3.31:www/p5-HTML-Parser \
d24 1
a24 1
			:p5-Net-DNS->=0.34:net/p5-Net-DNS \
d29 2
a30 2
			:p5-Archive-Tar->=1.23:archivers/p5-Archive-Tar \
			:p5-IO-Zlib->=1.04:archivers/p5-IO-Zlib
d32 1
a32 2
RUN_DEPENDS=		${BUILD_DEPENDS} \
			:gnupg-*:security/gnupg
d37 1
a37 1
CONFIGURE_ARGS+=	DESTDIR=${WRKINST} \
a38 1
			LOCALSTATEDIR=${LOCALSTATEDIR} \
d43 1
a43 1
LOCALSTATEDIR=		/var/db/spamassassin
d46 5
a50 1
SUBST_VARS=		CONFDIR LOCALSTATEDIR
d58 4
d67 9
a75 9
		-e "s|@@PREFIX@@|${TRUEPREFIX}|" \
		${FILESDIR}/${FAQ} > ${WRKSRC}/${FAQ}
	pod2man --section=1 ${WRKSRC}/spamc/spamc.pod > \
		${PREFIX}/man/man1/spamc.1
	${INSTALL_DATA} ${WRKSRC}/rules/local.cf ${WRKSRC}/rules/*.pre \
		${SAMPLE_CONFDIR}
.for i in ${FAQ} ${DOCS}
	${INSTALL_DATA} ${WRKSRC}/${i} ${PREFIX}/share/doc/SpamAssassin
.endfor
@


1.36
log
@- add missing init.pre and v310.pre configuration files.
- depend on p5-Mail-SPF-Query, since the SPF plugin is loaded by default.

based on diff from Andreas Voegele <voegelas at gmx.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2005/10/09 09:05:43 mbalmer Exp $
d60 1
a60 1
post-patch:
@


1.35
log
@Update to SpamAssassin 3.1.0.

Release notes available:
http://marc.theaimsgroup.com/?l=spamassassin-announce&m=112674318914008&w=2

From Ben Lovett <ben at tilderoot dot com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/07/10 09:34:52 sturm Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}
d25 1
a25 1
			:p5-HTML-Parser-*:www/p5-HTML-Parser \
d55 4
a58 4
FAQ=	OpenBSD-SpamAssassin-mini-howto.html
DOCS=	README UPGRADE LICENSE procmailrc.example \
	sample-nonspam.txt sample-spam.txt
LOCALCF=	rules/local.cf
d69 3
a71 3
	cd ${WRKSRC} && ${INSTALL_DATA} ${FAQ} ${PREFIX}/share/doc/SpamAssassin
	cd ${WRKSRC} && ${INSTALL_DATA} ${LOCALCF} ${SAMPLE_CONFDIR}
	cd ${WRKSRC} && ${INSTALL_DATA} ${DOCS} ${PREFIX}/share/doc/SpamAssassin
@


1.34
log
@SECURITY update to SpamAssassin 3.0.4
fixes CAN-2005-1266

from maintainer Ben Lovett <ben at tilderoot.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/01/02 01:07:48 alek Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.0.4
d18 1
a18 1
WANTLIB=		c
d23 10
a32 3
			:p5-Digest-SHA1-*:security/p5-Digest-SHA1
RUN_DEPENDS=		:p5-Net-DNS-*:net/p5-Net-DNS \
			:p5-HTML-Parser-*:www/p5-HTML-Parser
d39 2
a40 1
			CONTACT_ADDRESS="the administrator of this system"
@


1.34.2.1
log
@security update to p5-Mail-SpamAssassin 3.0.6

fixes CVE 2006-2447
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/07/10 09:34:52 sturm Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.0.6
@


1.33
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2004/12/28 21:03:51 sturm Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.0.2
d20 1
a20 1
MASTER_SITES=		${MASTER_SITE_APACHE:=spamassassin/}
@


1.33.2.1
log
@MFC:
SECURITY update to SpamAssassin 3.0.4
fixes CAN-2005-1266

from maintainer Ben Lovett <ben at tilderoot.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/01/02 01:07:48 alek Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.0.4
d20 1
a20 1
MASTER_SITES=		${MASTER_SITE_APACHE:=spamassassin/source/}
@


1.32
log
@update to SpamAssassin 3.0.2

from Ben Lovett <ben at tilderoot.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/10/31 08:44:44 sturm Exp $
d18 1
@


1.31
log
@update to SpamAssassin 3.01

from maintainer Ben Lovett <ben at tilderoot.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/08/06 01:39:09 ian Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-3.0.1
d46 1
a46 1
FAQS=	${FILESDIR}/OpenBSD-SpamAssassin-mini-howto.html
d57 4
a60 1
	${INSTALL_DATA} ${FAQS} ${PREFIX}/share/doc/SpamAssassin
@


1.30
log
@Security update to 2.64.  From release notice:
  - Security fix prevents a denial of service attack open to certain
    malformed messages; this DoS affects all SpamAssassin 2.5x
    and 2.6x versions to date.
  - Backported several very reliable rules from the SpamAssassin 3.0.0
    codebase.

From MAINTAINER. OK nagy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/01/21 08:01:59 brad Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.64
d13 1
a13 1
# Artistic License
d19 1
a19 2
MASTER_SITES=		http://old.spamassassin.org/released/ \
			${MASTER_SITE_PERL_CPAN:=Mail/}
d21 2
a22 1
BUILD_DEPENDS=		:p5-HTML-Parser-*:www/p5-HTML-Parser
d29 1
a29 1
CONFIGURE_ARGS+=	RUN_RAZOR_TESTS="no" \
d31 1
a31 1
			CONTACT_ADDRESS="the administrator of that system"
d40 2
a41 2
			PKG_DEF_RULES_DIR=${WRKINST}${RULES_DIR} \
			PKG_LOCAL_RULES_DIR=${WRKINST}${SAMPLE_CONFDIR}
d47 1
a47 1
DOCS=	README procmailrc.example \
d60 1
a60 1
	cd ${WRKSRC} && pod2man --section=1 spamd/spamc.pod > \
@


1.29
log
@upgrade p5-Mail-SpamAssassin to 2.63
--
From: MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/01/19 11:20:07 brad Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.63
d11 1
a11 1
HOMEPAGE=		http://spamassassin.org/
d19 1
a19 1
MASTER_SITES=		${HOMEPAGE}released/ \
@


1.29.2.1
log
@SECURITY:
upgrade to 2.64
- prevents a denial of service attack open to certain
malformed messages;

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/01/21 08:01:59 brad Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.64
d19 1
a19 1
MASTER_SITES=		http://old.spamassassin.org/released/ \
@


1.28
log
@upgrade p5-Mail-SpamAssassin to 2.62
--
From: MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2003/12/27 04:17:01 brad Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.62
@


1.27
log
@upgrade p5-Mail-SpamAssassin to 2.61
--
From: new MAINTAINER Ben Lovett <ben at tilderoot dot com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2003/12/07 23:15:19 naddy Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.61
d22 1
d26 2
d52 1
a52 1
	perl -pi -e "s#\@@\@@LOCAL_RULES_DIR\@@\@@#${CONFDIR}#" ${WRKSRC}/rules/*
@


1.26
log
@fix install after DESTDIR change in perl 5.8.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2003/08/07 07:51:20 jolan Exp $
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-2.55
PKGNAME=		p5-${DISTNAME}p2
d9 2
d26 3
a28 1
CONFIGURE_ARGS=		RUN_RAZOR1_TESTS=n RUN_RAZOR2_TESTS=n
d30 1
a30 2
SAMPLE_CONFIG_DIR=	${PREFIX}/share/examples/SpamAssassin
CONFIG_DIR=		${SYSCONFDIR}/mail/spamassassin
d32 3
d38 1
a38 1
			PKG_LOCAL_RULES_DIR=${WRKINST}${SAMPLE_CONFIG_DIR}
d46 1
d49 1
a49 1
	perl -pi -e "s#\@@\@@LOCAL_RULES_DIR\@@\@@#${CONFIG_DIR}#" ${WRKSRC}/rules/*
d53 1
d55 1
@


1.25
log
@remove procmail dependency, MAINTAINER does not use this software
anymore, so release it to ports@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2003/06/17 16:33:04 avsm Exp $
d24 1
a24 1
CONFIGURE_ARGS+=	RUN_RAZOR1_TESTS=n RUN_RAZOR2_TESTS=n
d28 5
a32 1
INSTALL_TARGET=		PKG_LOCAL_RULES_DIR=${WRKINST}${SAMPLE_CONFIG_DIR} install
@


1.25.2.1
log
@SECURITY:
upgrade to 2.64
- prevents a denial of service attack open to certain
malformed messages;

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD$
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-2.64
PKGNAME=		p5-${DISTNAME}
d17 1
a17 1
MASTER_SITES=		http://old.spamassassin.org/released/ \
a19 1
BUILD_DEPENDS=		:p5-HTML-Parser-*:www/p5-HTML-Parser
d23 2
a24 1
MAKE_ENV+=		CC="${CC}"
d26 3
a28 14
CONFIGURE_STYLE=	perl
CONFIGURE_ARGS+=	RUN_RAZOR_TESTS="no" \
			SYSCONFDIR=${SYSCONFDIR} \
			CONTACT_ADDRESS="the administrator of that system"

CONFDIR=		${SYSCONFDIR}/mail/spamassassin
RULES_DIR=		${PREFIX}/share/spamassassin
SAMPLE_CONFDIR=		${PREFIX}/share/examples/SpamAssassin

SUBST_VARS=		CONFDIR SAMPLE_CONFDIR

FAKE_FLAGS=		${DESTDIRNAME}=${WRKINST} \
			PKG_DEF_RULES_DIR=${WRKINST}${RULES_DIR} \
			PKG_LOCAL_RULES_DIR=${WRKINST}${SAMPLE_CONFDIR}
a35 1
LOCALCF=	rules/local.cf
d38 1
a38 1
	@@perl -pi -e "s#\@@\@@LOCAL_RULES_DIR\@@\@@#${CONFDIR}#" ${WRKSRC}/rules/*
a41 1
	${INSTALL_DATA_DIR} ${SAMPLE_CONFDIR}
a42 1
	cd ${WRKSRC} && ${INSTALL_DATA} ${LOCALCF} ${SAMPLE_CONFDIR}
@


1.24
log
@fix a couple of off-by-one in spamc->spamd communication
submitted upstream, bugzilla #2074 in their bug db
bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2003/05/23 23:36:31 brad Exp $
d5 2
a6 3
V=			2.55
DISTNAME=		Mail-SpamAssassin-${V}
PKGNAME=		p5-${DISTNAME}p1
d9 1
a9 3
HOMEPAGE=		http://spamassassin.org

MAINTAINER=		Han Boetes <han@@mijncomputer.nl>
d17 1
a17 1
MASTER_SITES=		${HOMEPAGE}/released/ \
d21 1
a21 2
			:p5-HTML-Parser-*:www/p5-HTML-Parser \
			:procmail-*:mail/procmail
@


1.23
log
@upgrade p5-Mail-SpamAssassin to 2.55
--
MAINTAINER ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2003/05/14 14:19:20 lebel Exp $
d5 3
a7 2
DISTNAME=		Mail-SpamAssassin-2.55
PKGNAME=		p5-${DISTNAME}
@


1.22
log
@update p5-Mail-SpamAssassin to 2.53; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2003/04/06 15:42:07 lebel Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.54
@


1.21
log
@upgrade p5-Mail-SpamAssassin to 2.53; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2003/03/27 14:51:29 lebel Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.53
@


1.20
log
@update p5-Mail-SpamAssassin to 2.52; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2003/03/06 21:23:47 sturm Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.52
@


1.19
log
@disable razor tests (done in "make regress") by default
otherwise "make configure" would ask, if it found razor-agent installed

OK pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/02/22 14:55:51 lebel Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.50
@


1.18
log
@update p5-Mail-SpamAssassin to 2.50; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2003/02/03 20:28:24 lebel Exp $
d27 1
@


1.17
log
@update p5-Mail-SpamAssassin to 2.44; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2003/01/26 16:43:45 lebel Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.44
@


1.16
log
@Added patch from Timo Sirainen <tss@@iki.fi> to fix exploit.

---cut---
Well, I was going to wait until 2.50 release, but it seems to be taking and
this likely affects only few installations. Besides, it's been in their
public bugzilla for over a month. So:

Attacker may be able to execute arbitrary code by sending a specially
crafted e-mail to a system using SpamAssassin's spamc program in BSMTP mode
(-B option). Versions from 2.40 to 2.43 are affected.

Exim users especially should check if they're affected, the -B option is
used in several Exim+SpamAssassin HOWTOs.

The problem is with escaping '.' characters at the beginning of lines.
Off-by-one bounds checking error allows writing '.' character past a
buffer, overwriting the stack frame address. Depending on system this may
be exploitable. Pre-built Debian unstable/x86 package wasn't vulnerable, my
self compiled was.
---cut---
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/12/03 07:10:06 wcobb Exp $
d5 2
a6 2
DISTNAME=		Mail-SpamAssassin-2.43
PKGNAME=		p5-${DISTNAME}p1
@


1.15
log
@Install the man pages for spamd/spamc, move spamd to section 8.
ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/10/30 04:38:13 pvalchev Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}
@


1.14
log
@Remove p5-Test-Simple and p5-Time-HiRes depends; now in stock perl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/10/17 17:46:31 lebel Exp $
d46 4
@


1.13
log
@update mail/p5-Mail-SpamAssassin to 2.43; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/10/10 13:00:23 lebel Exp $
a22 1
			:p5-Time-HiRes-*:devel/p5-Time-HiRes \
@


1.12
log
@seems like the fake path sneak into the installed rule files;
from MAINTAINER with heads up by Andrey Smagin (andrey@@smagin.com)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/10/07 14:32:33 lebel Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.42
d31 1
a31 1
INSTALL_TARGET=		LOCAL_RULES_DIR=${WRKINST}${SAMPLE_CONFIG_DIR} install
@


1.11
log
@update p5-Mail-SpamAssassin to version 2.42; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/10/06 23:34:26 lebel Exp $
d30 1
d39 3
@


1.10
log
@p5-Mail-SpamAssassin tries to install files outside the fake area.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/09/05 19:29:29 lebel Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.41
@


1.9
log
@update mail/p5-Mail-SpamAssassin to 2.41; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/09/03 12:17:57 lebel Exp $
d28 3
@


1.9.2.1
log
@MFC: Added patch from Timo Sirainen <tss@@iki.fi> to fix exploit.

---cut---
Well, I was going to wait until 2.50 release, but it seems to be taking and
this likely affects only few installations. Besides, it's been in their
public bugzilla for over a month. So:

Attacker may be able to execute arbitrary code by sending a specially
crafted e-mail to a system using SpamAssassin's spamc program in BSMTP mode
(-B option). Versions from 2.40 to 2.43 are affected.

Exim users especially should check if they're affected, the -B option is
used in several Exim+SpamAssassin HOWTOs.

The problem is with escaping '.' characters at the beginning of lines.
Off-by-one bounds checking error allows writing '.' character past a
buffer, overwriting the stack frame address. Depending on system this may
be exploitable. Pre-built Debian unstable/x86 package wasn't vulnerable, my
self compiled was.
---cut---
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/09/05 19:29:29 lebel Exp $
d6 1
a6 1
PKGNAME=		p5-${DISTNAME}p1
@


1.8
log
@add dependency to www/p5-HTML-Parser; from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/09/02 21:16:16 lebel Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.40
@


1.7
log
@update mail/p5-Mail-SpamAssassin to 2.40:
--
The #1 big change:

- SpamAssassin now *REQUIRES* procmail  for  local  delivery  support;
  -P  option  is  now  the  default.  Unless   you   use   procmail,
  Mail::Audit, KMail, or an  MTA-level  integration,  do  not  upgrade

From maintainer, Han Boetes <han@@boetes.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/07/07 15:07:20 jakob Exp $
d24 1
@


1.6
log
@remove no_procmail flavour and procmail dependecy; from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/06/20 21:46:13 lebel Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.31
d23 2
a24 1
			:p5-Time-HiRes-*:devel/p5-Time-HiRes
@


1.5
log
@update mail/p5-Mail-SpamAssassin to 2.31; this is maintainer approved!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/06/17 22:08:59 lebel Exp $
a7 1
NEED_VERSION=		1.515
a26 3
FLAVORS=		no_procmail
FLAVOR?=

a28 4

.if ! ${FLAVOR:L:Mno_procmail}
RUN_DEPENDS+=		:procmail-*:mail/procmail
.endif
@


1.4
log
@update mail/p5-Mail-SpamAssassin to 2.30; maintainer OK'ed the update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/05/13 23:31:25 espie Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.30
@


1.3
log
@More MASTER_SITES_SUBDIR out
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/05/02 15:26:36 wilfried Exp $
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.20
d23 2
a24 1
RUN_DEPENDS=		:p5-Net-DNS-*:net/p5-Net-DNS
@


1.2
log
@Update to p5-Mail-SpamAssassin-2.20, from maintainer Han Boetes <han@@mijncomputer.nl>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/04/19 21:39:20 wilfried Exp $
d21 1
a21 2
			${MASTER_SITE_PERL_CPAN}
MASTER_SITE_SUBDIR=	Mail
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
DISTNAME=		Mail-SpamAssassin-2.11
@


1.1.1.1
log
@Import of p5-Mail-SpamAssassin-2.11, from maintainer Han Boetes <han@@mijncomputer.nl>

SpamAssassin is a mail filter to identify spam.

Using its rule base, it uses a wide range of heuristic tests on
mail headers and body text to identify "spam", also known as
unsolicited commercial email.
@
text
@@
