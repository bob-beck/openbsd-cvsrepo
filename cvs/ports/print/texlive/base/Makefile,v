head	1.90;
access;
symbols
	OPENBSD_6_1:1.85.0.2
	OPENBSD_6_1_BASE:1.85
	OPENBSD_6_0:1.83.0.2
	OPENBSD_6_0_BASE:1.83
	OPENBSD_5_9:1.80.0.2
	OPENBSD_5_9_BASE:1.80
	OPENBSD_5_8:1.79.0.4
	OPENBSD_5_8_BASE:1.79
	OPENBSD_5_7:1.76.0.2
	OPENBSD_5_7_BASE:1.76
	OPENBSD_5_6:1.74.0.2
	OPENBSD_5_6_BASE:1.74
	OPENBSD_5_5:1.73.0.2
	OPENBSD_5_5_BASE:1.73
	OPENBSD_5_4:1.68.0.2
	OPENBSD_5_4_BASE:1.68
	OPENBSD_5_3:1.63.0.2
	OPENBSD_5_3_BASE:1.63
	OPENBSD_5_2:1.58.0.2
	OPENBSD_5_2_BASE:1.58
	OPENBSD_5_1_BASE:1.56
	OPENBSD_5_1:1.56.0.2
	OPENBSD_5_0:1.50.0.2
	OPENBSD_5_0_BASE:1.50
	OPENBSD_4_9:1.44.0.2
	OPENBSD_4_9_BASE:1.44
	OPENBSD_4_8:1.33.0.2
	OPENBSD_4_8_BASE:1.33
	OPENBSD_4_7:1.31.0.2
	OPENBSD_4_7_BASE:1.31
	OPENBSD_4_6:1.24.0.2
	OPENBSD_4_6_BASE:1.24
	OPENBSD_4_5:1.22.0.2
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.10.0.2
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	jasper_20070717:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.90
date	2017.07.26.22.45.29;	author sthen;	state Exp;
branches;
next	1.89;
commitid	tD4MFrpYYDDL2UFT;

1.89
date	2017.07.16.19.19.01;	author espie;	state Exp;
branches;
next	1.88;
commitid	tt0GhWK5c4uf9ILG;

1.88
date	2017.05.21.11.57.45;	author edd;	state Exp;
branches;
next	1.87;
commitid	6829722ST2lvZoCG;

1.87
date	2017.05.15.19.56.03;	author rsadowski;	state Exp;
branches;
next	1.86;
commitid	9o62ZeM7dBsDrb2c;

1.86
date	2017.04.10.11.46.33;	author sthen;	state Exp;
branches;
next	1.85;
commitid	HY6VNZxjJWzKQFDV;

1.85
date	2016.12.17.20.40.29;	author zhuk;	state Exp;
branches;
next	1.84;
commitid	umTNxdqUqvUmzIxL;

1.84
date	2016.09.13.18.52.05;	author naddy;	state Exp;
branches;
next	1.83;
commitid	4Y8Q5bKBOfIWFq5Y;

1.83
date	2016.06.01.12.46.35;	author edd;	state Exp;
branches;
next	1.82;
commitid	UV6MIj5ViZWo7hqx;

1.82
date	2016.04.19.21.37.16;	author edd;	state Exp;
branches;
next	1.81;
commitid	kEvFLz5bWuR665Mh;

1.81
date	2016.04.04.22.57.45;	author naddy;	state Exp;
branches;
next	1.80;
commitid	FILF1LJRoZlYu0JV;

1.80
date	2015.09.25.12.13.46;	author dcoppa;	state Exp;
branches;
next	1.79;
commitid	ZwUNVFHN81gLPnvx;

1.79
date	2015.05.28.15.01.28;	author edd;	state Exp;
branches;
next	1.78;
commitid	JRO5ixOqxQcDgj81;

1.78
date	2015.05.18.21.37.28;	author edd;	state Exp;
branches;
next	1.77;
commitid	lX1CFagn8LDeCaRV;

1.77
date	2015.03.19.12.12.20;	author naddy;	state Exp;
branches;
next	1.76;
commitid	SNpBhh910kaH34mE;

1.76
date	2015.01.10.13.06.29;	author edd;	state Exp;
branches;
next	1.75;
commitid	vTQfPbsUe4g6fIRu;

1.75
date	2014.10.30.15.33.00;	author edd;	state Exp;
branches;
next	1.74;
commitid	QmqnxxMKwkEGbepq;

1.74
date	2014.03.17.23.22.02;	author sthen;	state Exp;
branches;
next	1.73;

1.73
date	2014.02.17.19.31.10;	author jasper;	state Exp;
branches;
next	1.72;

1.72
date	2014.01.14.14.42.00;	author edd;	state Exp;
branches;
next	1.71;

1.71
date	2014.01.11.18.46.52;	author edd;	state Exp;
branches;
next	1.70;

1.70
date	2014.01.11.12.56.41;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2013.11.09.18.22.02;	author zhuk;	state Exp;
branches;
next	1.68;

1.68
date	2013.06.04.18.41.57;	author naddy;	state Exp;
branches;
next	1.67;

1.67
date	2013.05.29.20.04.13;	author zhuk;	state Exp;
branches;
next	1.66;

1.66
date	2013.03.21.08.46.36;	author ajacoutot;	state Exp;
branches;
next	1.65;

1.65
date	2013.03.20.19.13.50;	author jeremy;	state Exp;
branches;
next	1.64;

1.64
date	2013.03.11.11.37.54;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2012.12.20.22.44.37;	author edd;	state Exp;
branches;
next	1.62;

1.62
date	2012.12.17.20.28.04;	author edd;	state Exp;
branches;
next	1.61;

1.61
date	2012.10.18.21.23.51;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2012.08.07.15.15.09;	author edd;	state Exp;
branches;
next	1.59;

1.59
date	2012.08.06.11.14.39;	author naddy;	state Exp;
branches;
next	1.58;

1.58
date	2012.07.13.15.17.41;	author kili;	state Exp;
branches;
next	1.57;

1.57
date	2012.02.17.13.41.33;	author nigel;	state Exp;
branches;
next	1.56;

1.56
date	2012.01.31.14.15.57;	author sthen;	state Exp;
branches;
next	1.55;

1.55
date	2012.01.22.18.52.01;	author edd;	state Exp;
branches;
next	1.54;

1.54
date	2012.01.10.18.04.31;	author edd;	state Exp;
branches;
next	1.53;

1.53
date	2011.11.26.19.50.50;	author kili;	state Exp;
branches;
next	1.52;

1.52
date	2011.11.23.12.00.45;	author edd;	state Exp;
branches;
next	1.51;

1.51
date	2011.09.16.11.13.41;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2011.06.14.21.11.24;	author edd;	state Exp;
branches;
next	1.49;

1.49
date	2011.06.13.16.40.51;	author edd;	state Exp;
branches;
next	1.48;

1.48
date	2011.05.21.17.37.06;	author espie;	state Exp;
branches;
next	1.47;

1.47
date	2011.05.11.07.45.53;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2011.03.09.14.43.59;	author edd;	state Exp;
branches;
next	1.45;

1.45
date	2011.03.08.00.09.42;	author edd;	state Exp;
branches;
next	1.44;

1.44
date	2010.11.22.10.16.08;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2010.11.20.09.48.40;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2010.11.14.19.53.51;	author edd;	state Exp;
branches;
next	1.41;

1.41
date	2010.11.14.17.47.59;	author jasper;	state Exp;
branches;
next	1.40;

1.40
date	2010.11.14.16.58.39;	author edd;	state Exp;
branches;
next	1.39;

1.39
date	2010.11.11.18.34.59;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2010.10.24.21.32.39;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2010.10.18.21.25.09;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2010.09.24.20.00.51;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2010.09.24.19.35.27;	author edd;	state Exp;
branches;
next	1.34;

1.34
date	2010.09.14.20.29.56;	author edd;	state Exp;
branches;
next	1.33;

1.33
date	2010.07.17.16.37.33;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2010.03.21.13.22.55;	author edd;	state Exp;
branches;
next	1.31;

1.31
date	2010.01.10.16.43.36;	author edd;	state Exp;
branches;
next	1.30;

1.30
date	2010.01.10.13.06.36;	author kili;	state Exp;
branches;
next	1.29;

1.29
date	2010.01.07.10.57.17;	author edd;	state Exp;
branches;
next	1.28;

1.28
date	2009.12.15.18.01.57;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2009.12.12.17.48.34;	author edd;	state Exp;
branches;
next	1.26;

1.26
date	2009.09.10.15.30.21;	author naddy;	state Exp;
branches;
next	1.25;

1.25
date	2009.08.10.06.34.09;	author kili;	state Exp;
branches;
next	1.24;

1.24
date	2009.05.25.17.19.12;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2009.04.23.00.18.17;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2009.02.22.19.05.17;	author kili;	state Exp;
branches;
next	1.21;

1.21
date	2008.12.27.18.22.36;	author steven;	state Exp;
branches;
next	1.20;

1.20
date	2008.12.27.16.01.44;	author steven;	state Exp;
branches;
next	1.19;

1.19
date	2008.12.27.12.17.40;	author steven;	state Exp;
branches;
next	1.18;

1.18
date	2008.12.15.08.08.05;	author sturm;	state Exp;
branches;
next	1.17;

1.17
date	2008.12.04.22.29.06;	author steven;	state Exp;
branches;
next	1.16;

1.16
date	2008.11.30.18.45.27;	author steven;	state Exp;
branches;
next	1.15;

1.15
date	2008.11.15.20.08.53;	author sturm;	state Exp;
branches;
next	1.14;

1.14
date	2008.11.14.10.43.11;	author sturm;	state Exp;
branches;
next	1.13;

1.13
date	2008.11.03.21.30.53;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2008.10.29.09.26.20;	author steven;	state Exp;
branches;
next	1.11;

1.11
date	2008.10.21.20.57.57;	author steven;	state Exp;
branches;
next	1.10;

1.10
date	2008.06.30.21.38.28;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2008.05.04.20.45.30;	author okan;	state Exp;
branches;
next	1.8;

1.8
date	2008.04.22.23.55.09;	author kili;	state Exp;
branches;
next	1.7;

1.7
date	2007.12.09.10.49.34;	author steven;	state Exp;
branches;
next	1.6;

1.6
date	2007.11.06.06.33.51;	author bernd;	state Exp;
branches;
next	1.5;

1.5
date	2007.10.19.22.14.13;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2007.09.10.13.37.26;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2007.09.07.21.59.53;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2007.09.07.15.26.18;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.17.21.53.25;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.17.21.53.25;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.90
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.89 2017/07/16 19:19:01 espie Exp $

COMMENT =		base binaries for TeXLive typesetting distribution

# This year they used a different datestamp on the -source tarball.
DISTNAME =		texlive-${DIST_V}b-source
PKGNAME =		texlive_base-${V}
WRKDIST =		${WRKDIR}/texlive-${DIST_V}-source
REVISION =		0

DISTFILES =		${DISTNAME}${EXTRACT_SUFX} \
			texlive-${DIST_V}-extra${EXTRACT_SUFX}

SHARED_LIBS =		kpathsea	8.1 # 8.2
SHARED_LIBS +=		ptexenc		5.1 # 4.4
SHARED_LIBS +=		synctex		1.0 # 19.0
SHARED_LIBS +=		texlua52	0.0 # 7.4

WANTLIB += ICE SM X11 Xau Xaw Xdmcp Xext Xi Xmu Xpm Xrender Xt
WANTLIB += c cairo expat fontconfig freetype gd glib-2.0 graphite2
WANTLIB += harfbuzz harfbuzz-icu iconv icudata icui18n icuio icuuc intl
WANTLIB += jpeg lcms2 m openjp2 paper pcre pixman-1 png poppler
WANTLIB += potrace pthread pthread-stubs ${COMPILER_LIBCXX} tiff webp xcb
WANTLIB += xcb-render xcb-shm z zzip

RUN_DEPENDS =		print/ghostscript/gnu \
			print/detex \
			print/dvi2tty \
			print/ps2eps \
			print/psutils \
			print/t1utils \
			texlive_texmf-buildset-${V}:print/texlive/texmf,-buildset

LIB_DEPENDS =		converters/libiconv \
			graphics/png \
			graphics/gd \
			print/poppler \
			graphics/cairo \
			textproc/icu4c \
			graphics/graphite2 \
			devel/harfbuzz,-icu \
			print/libpaper \
			archivers/zziplib \
			graphics/potrace

MODULES =		textproc/intltool perl

# Never set SEPARATE_BUILD
CONFIGURE_STYLE =	gnu

CPPFLAGS =	-I${X11BASE}/include \
		-I${LOCALBASE}/include \
		-I${LOCALBASE}/include/poppler

LDFLAGS =	-L${LOCALBASE}/lib \
		-L${X11BASE}/lib

CONFIGURE_ENV +=	TL_MAKE=${GMAKE} \
			CPPFLAGS="${CPPFLAGS}" \
			LDFLAGS="${LDFLAGS}"

# Can't build in same dir
WRKBUILD =              ${WRKSRC}/Work
CONFIGURE_SCRIPT =      ../configure
MAKE_ENV =		${CONFIGURE_ENV}
# Not worth the effort.
NO_TEST =		Yes

USE_GMAKE =	Yes

.if ${MACHINE_ARCH} == "sparc64"
CFLAGS +=	-fPIC
.endif

# clisp limits which arches we can use xindy on
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "amd64" || \
	${MACHINE} == "powerpc" || ${MACHINE} == "sparc64"
BUILD_DEPENDS +=	lang/clisp
RUN_DEPENDS +=		lang/clisp
CONFIGURE_ARGS +=	--enable-xindy \
			--disable-xindy-rules
PKG_ARGS +=		-Dxindy=1
.else
PKG_ARGS +=		-Dxindy=0
.endif

CONFIGURE_ARGS +=	--mandir=${PREFIX}/man \
			--with-system-freetype2 \
			--with-system-gd \
			--with-system-libpng \
			--with-system-ncurses \
			--with-system-pnglib \
			--with-system-zlib \
			--enable-texinfo=no \
			--with-xdvi-x-toolkit=xaw \
			--enable-texi2html=no \
			--enable-detex=no \
			--enable-dvi2tty=no \
			--enable-ps2eps=no \
			--enable-psutils=no \
			--enable-t1utils=no \
			--disable-threads \
			--with-old-mac-fonts \
			--disable-multiplatform \
			--disable-native-texlive-build \
			--with-banner-add="-OpenBSD_Ports" \
			--disable-luajittex \
			--disable-mfluajit \
			--with-system-xpdf \
			--with-system-icu \
			--with-system-cairo \
			--with-system-harfbuzz \
			--with-system-graphite2 \
			--with-system-poppler \
			--with-system-libpaper \
			--with-system-zziplib \
			--with-system-potrace

SUBST_VARS +=		TRUEPREFIX LOCALBASE

# just to silence error - never used
pre-install:
	mkdir -p ${WRKSRC}/inst

# Symlinks that would have been installed by texlinks.
# texlinks can not do this itself in the fake dir, as it requires
# a fully hashed texmf tree and working kpse configuration.
# Run 'texlinks -u' and then observe the output of
# 'texlinks -v'. Don't forget to check the links are in the PLIST.
ALEPH_LN =	lamed
LUATEX_LN =	dvilualatex dviluatex lualatex
PDFTEX_LN =	amstex cslatex csplain eplain etex jadetex latex mex mllatex mltex \
		pdfcslatex pdfcsplain pdfetex pdfjadetex pdflatex pdfmex \
		pdfxmltex texsis utf8mex xmltex
EPTEX_LN =	platex
EUPTEX_LN =	uplatex
XETEX_LN =	xelatex
TEX_LN =	lollipop

EXTRA_ROOT =	${WRKDIR}/texlive-${DIST_V}-extra

post-install:
	rm -Rf ${WRKSRC}/inst

	# Following upstream's process, we don't install any texmf
	# files from texlive_base. These will be installed from the
	# texlive_temxf-* ports. Similarly for manuals and infos.
	rm -Rf ${PREFIX}/share/texmf-dist/
	rm -Rf ${PREFIX}/{man,info}

	# Users should not use tlmgr (tex live package manager)
	rm ${PREFIX}/bin/tlmgr

	# translate some sylinks from ../texmf* to ../share/texmf*
	for link in `find ${PREFIX}/bin -type l`; do \
		dest=`stat -f %Y $${link}`; \
		if ! [ -z "`echo $${dest} | grep -e '^\.\.\/texmf'`" ]; then \
			newdest=`echo $${dest} | sed -e 's/\.\.\/texmf/\.\.\/share\/texmf/g'`; \
			ln -sf $${newdest} $${link}; \
		fi \
	done

	# Updmap needs these perl bits from the extra tarball
	${INSTALL} -d ${PREFIX}/libdata/perl5/site_perl/TeXLive/
	${INSTALL} ${EXTRA_ROOT}/tlpkg/TeXLive/TLUtils.pm \
		${PREFIX}/libdata/perl5/site_perl/TeXLive/
	${INSTALL} ${EXTRA_ROOT}/tlpkg/TeXLive/TLConfig.pm \
		${PREFIX}/libdata/perl5/site_perl/TeXLive/

	# emulate texlinks
	for i in ${ALEPH_LN}; do \
		ln -s ${TRUEPREFIX}/bin/aleph ${PREFIX}/bin/$$i; \
	done
	for i in ${LUATEX_LN}; do \
		ln -s ${TRUEPREFIX}/bin/luatex ${PREFIX}/bin/$$i; \
	done
	for i in ${MPOST_LN}; do \
		ln -s ${TRUEPREFIX}/bin/mpost ${PREFIX}/bin/$$i; \
	done
	for i in ${PDFTEX_LN}; do \
		ln -s ${TRUEPREFIX}/bin/pdftex ${PREFIX}/bin/$$i; \
	done
	for i in ${EPTEX_LN}; do \
		ln -s ${TRUEPREFIX}/bin/eptex ${PREFIX}/bin/$$i; \
	done
	for i in ${XETEX_LN}; do \
		ln -s ${TRUEPREFIX}/bin/xetex ${PREFIX}/bin/$$i; \
	done
	for i in ${EUPTEX_LN}; do \
		ln -s ${TRUEPREFIX}/bin/euptex ${PREFIX}/bin/$$i; \
	done

.include <bsd.port.mk>

@


1.89
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2017/05/21 11:57:45 edd Exp $
d9 1
@


1.88
log
@Update TeX Live to 2016.

Testing and input from:
 * sthen@@
 * Nicola Tomasone
 * pirofti@@
 * giovanni@@
 * Ze Loff
 * rsadowski@@

OK pirofti@@

Many thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2017/05/15 19:56:03 rsadowski Exp $
d22 1
a22 1
WANTLIB += potrace pthread pthread-stubs ${LIBCXX} tiff webp xcb
@


1.87
log
@Bump REVISION and adjust WANTLIB after gd update

ok sthen@@, "looks okay" @@landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2017/04/10 11:46:33 sthen Exp $
d6 1
a6 2
DIST_V_SOURCE =		${V}0521
DISTNAME =		texlive-${DIST_V_SOURCE}-source
d8 1
a8 1
REVISION =		1
d13 3
a15 3
SHARED_LIBS =		kpathsea	8.0 # 8.1
SHARED_LIBS +=		ptexenc		5.0 # 4.3
SHARED_LIBS +=		synctex		0.0 # 18.0
d107 1
d130 2
a131 2
LUATEX_LN =	dvilualatex dviluatex lualatex lualollipop
PDFTEX_LN =	amstex cslatex csplain eplain etex jadetex latex lollipop mex mllatex mltex \
a134 1
XETEX_LN =	xelatex xelollipop
d136 2
@


1.86
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2016/12/17 20:40:29 zhuk Exp $
d9 1
a9 1
REVISION =		0
d23 1
a23 1
WANTLIB += potrace pthread pthread-stubs ${LIBCXX} tiff vpx xcb
@


1.85
log
@Unbreak after poppler switch from openjpeg to openjp2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2016/09/13 18:52:05 naddy Exp $
d23 1
a23 1
WANTLIB += potrace pthread pthread-stubs stdc++ tiff vpx xcb
@


1.84
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2016/06/01 12:46:35 edd Exp $
d9 1
d22 1
a22 1
WANTLIB += jpeg lcms2 m openjpeg paper pcre pixman-1 png poppler
@


1.83
log
@print/texlive: Update to 2015.

OK abieber@@, schwarze@@.

Additional testing by Caspar Schutijser.

Thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2015/09/25 12:13:46 dcoppa Exp $
d20 1
a20 1
WANTLIB += harfbuzz harfbuzz-icu icudata icui18n icuio icuuc intl
d33 2
a34 1
LIB_DEPENDS =		graphics/png \
d45 1
a45 1
MODULES =		textproc/intltool converters/libiconv perl
@


1.82
log
@print/texlive: dynamically link potrace.

Also remove a bogus comment and update a broken conflict marker while we are in
here.

Looks OK kili@@, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2016/04/04 22:57:45 naddy Exp $
d5 3
a7 1
DISTNAME =		texlive-${DIST_V}-source
a8 1
REVISION =		3
d13 4
a16 2
SHARED_LIBS =		kpathsea	7.0
SHARED_LIBS +=		ptexenc		4.0
d31 1
a31 1
			texlive_texmf-buildset-${V}p0:print/texlive/texmf,-buildset
@


1.81
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2015/09/25 12:13:46 dcoppa Exp $
d7 1
a7 1
REVISION =		2
d19 2
a20 2
WANTLIB += pthread pthread-stubs stdc++ tiff vpx xcb xcb-render
WANTLIB += xcb-shm z zzip
d38 2
a39 1
			archivers/zziplib
a81 1
# Do not link with system icu. TeXLive ICU is not vanilla (Yet)!
d110 2
a111 5
			--with-system-zziplib
# XXX need to hack graphics/potrace to emit a library and header.
# Looks like you add --with-libpotrace to its CONFIGURE_ARGS. Then add a
# LIB_DEPENDS obviously.
#--with-system-potrace
@


1.80
log
@
Move the "inconsolata" package from texlive_texmf-full to
texlive_texmf-buildset, so we can build all the documentation
(vignettes, html, etc.) for math/R.

Much help and ok edd@@ (aka "the TeXmeister")
OK and help from sthen@@ too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2015/05/28 15:01:28 edd Exp $
d7 1
a7 1
REVISION =		1
@


1.79
log
@texlive_base: Remove bogus symlink.

Although latexmk is included in texlive, we omit it in favour of our
separate port. texlive_base should not install a symlink.

There was also confusion between latex-mk and latexmk. We have both in
ports, but the latter is the one related to texlive. Let's mark is as a soft
dependency.

Upgrade path is currently leaving a partial package behind due to the bogus
symlink. A quirk will probably be required, which we can commit later.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2015/05/18 21:37:28 edd Exp $
d7 1
a7 1
REVISION =		0
d28 1
a28 1
			texlive_texmf-buildset-${V}:print/texlive/texmf,-buildset
@


1.78
log
@Update to TeX Live 2014.

OK sthen@@, dcoppa@@, giovanni@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2014/03/17 23:22:02 sthen Exp $
d7 1
a27 1
			print/latex-mk \
@


1.77
log
@fold lib-only PFRAG.shared into PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2015/01/10 13:06:29 edd Exp $
a6 1
REVISION =		4
d11 2
a12 8
SHARED_LIBS =		kpathsea	6.0
SHARED_LIBS +=		ptexenc		3.0

WANTLIB += ICE SM X11 Xau Xaw Xdmcp Xext Xmu Xpm Xrender Xt c
WANTLIB += cairo expat fontconfig freetype gd glib-2.0 graphite2
WANTLIB += harfbuzz icudata icui18n icuio icuuc intl jpeg lcms2
WANTLIB += m openjpeg pcre pixman-1 png>=3 poppler pthread pthread-stubs
WANTLIB += stdc++ t1>=4 tiff ttf vpx xcb xcb-render xcb-shm z
d14 6
d30 1
a30 2
LIB_DEPENDS =		devel/t1lib \
			graphics/png \
a31 1
			print/freetype \
d36 3
a38 13
			devel/harfbuzz

# Needs the header, but does not actually link with the lib
BUILD_DEPENDS +=	devel/harfbuzz,-icu

MODULES =		textproc/intltool converters/libiconv
# These following modules are mostly for variable substitution in patches
# They are not real dependencies of _base, but of _texmf-full
MODULES +=		lang/ruby x11/tk
MODRUBY_REV =		1.8
MODRUBY_BUILDDEP =	No
MODRUBY_RUNDEP =	No
SUBST_VARS +=		MODRUBY_BINREV MODTK_VERSION
d40 1
d47 1
a47 2
		-I${LOCALBASE}/include/poppler \
		-I${LOCALBASE}/include/freetype1/freetype
d53 2
a54 1
			CPPFLAGS="${CPPFLAGS}"
d81 1
a83 1
			--with-system-freetype \
a88 1
			--with-system-t1lib \
d102 1
d108 7
a114 1
			--with-system-poppler
d125 1
a125 1
# Run 'texlinks -u' and then observe the output of 
d128 4
a131 4
LUATEX_LN =	dvilualatex dviluatex lualatex
PDFTEX_LN =	amstex cslatex pdfcslatex csplain pdfcsplain eplain jadetex \
		pdfjadetex latex pdflatex mex pdfmex utf8mex mllatex mltex \
		etex pdfetex texsis xmltex pdfxmltex
d133 1
a133 1
XETEX_LN =	xelatex
d140 9
@


1.76
log
@FIx texlive interpreter paths.

OK ajacoutot@@, tested in a bulk by kili@@, thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2014/10/30 15:33:00 edd Exp $
d7 1
a7 1
REVISION =		3
@


1.75
log
@print/texlive: Remove a load of internal libraries, fix readme.

This started as a fix (arm, ppc) for the internal icu in texlive. It turns
out a custom icu is not needed anymore, so we can use the icu in the ports
tree. This makes handling of header files much simpler since there is no
longer the possibility of picking up the wrong icu headers. Should also fix
PPC and ARM builds of texlive.

Also noticed a few other libraries being built into texlive. Fixed.

Finally, readme was not being installed. Fixed.

Reported by landry@@

OK dcoppa@@, landry@@, and with input and testing from kili@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2014/03/17 23:22:02 sthen Exp $
d7 1
a7 1
REVISION =		2
d47 1
a47 2
MODULES +=		lang/lua lang/ruby lang/python x11/tk perl
MODLUA_RUNDEP =		No
d51 1
a51 80
MODPY_BUILDDEP =	No
MODPY_RUNDEP =		No
SUBST_VARS +=		MODRUBY_BINREV MODPY_VERSION MODTK_VERSION

MODPY_ADJ_FILES =	texk/texlive/linked_scripts/de-macro/de-macro \
			texk/texlive/linked_scripts/dviasm/dviasm.py \
			texk/texlive/linked_scripts/ebong/ebong.py \
			texk/texlive/linked_scripts/texliveonfly/texliveonfly.py

MODRUBY_ADJ_FILES =	convbkmk.rb \
			match_parens

MODPERL_ADJ_FILES =	texk/texlive/linked_scripts/texlive/updmap.pl \
			texk/tetex/updmap-single.pl \
			texk/tex4htk/mk4ht.pl \
			texk/texlive/linked_scripts/authorindex/authorindex \
			texk/texlive/linked_scripts/bundledoc/arlatex \
			texk/texlive/linked_scripts/bundledoc/bundledoc \
			texk/texlive/linked_scripts/ctanify/ctanify \
			texk/texlive/linked_scripts/dosepsbin/dosepsbin.pl \
			texk/texlive/linked_scripts/epstopdf/epstopdf.pl \
			texk/texlive/linked_scripts/fig4latex/fig4latex \
			texk/texlive/linked_scripts/fontools/afm2afm \
			texk/texlive/linked_scripts/fontools/autoinst \
			texk/texlive/linked_scripts/fontools/ot2kpx \
			texk/texlive/linked_scripts/glossaries/makeglossaries \
			texk/texlive/linked_scripts/jfontmaps/updmap-setup-kanji.pl \
			texk/texlive/linked_scripts/latex2man/latex2man \
			texk/texlive/linked_scripts/latexmk/latexmk.pl \
			texk/texlive/linked_scripts/mkgrkindex/mkgrkindex \
			texk/texlive/linked_scripts/mkjobtexmf/mkjobtexmf.pl \
			texk/texlive/linked_scripts/oberdiek/pdfatfi.pl \
			texk/texlive/linked_scripts/pax/pdfannotextractor.pl \
			texk/texlive/linked_scripts/pdfcrop/pdfcrop.pl \
			texk/texlive/linked_scripts/pedigree-perl/pedigree.pl \
			texk/texlive/linked_scripts/perltex/perltex.pl \
			texk/texlive/linked_scripts/pkfix-helper/pkfix-helper \
			texk/texlive/linked_scripts/purifyeps/purifyeps \
			texk/texlive/linked_scripts/sty2dtx/sty2dtx.pl \
			texk/texlive/linked_scripts/tetex/e2pall.pl \
			utils/texdoctk/texdoctk.pl \
			texk/texlive/linked_scripts/texcount/texcount.pl \
			texk/texlive/linked_scripts/texdef/texdef.pl \
			texk/texlive/linked_scripts/texdiff/texdiff \
			texk/texlive/linked_scripts/texlive/tlmgr.pl \
			texk/texlive/tl_scripts/e2pall.pl \
			texk/texlive/linked_scripts/texloganalyser/texloganalyser \
			utils/xindy/xindy-2.4/user-commands/texindy.in \
			utils/xindy/xindy-2.4/user-commands/xindy.in \
			texk/texlive/linked_scripts/jfontmaps/kanji-fontmap-creator.pl \
			texk/texlive/linked_scripts/jfontmaps/kanji-config-updmap.pl \
			texk/texlive/linked_scripts/latexdiff/latexdiff.pl \
			texk/texlive/linked_scripts/latexdiff/latexdiff-vc.pl \
			texk/texlive/linked_scripts/latexdiff/latexrevise.pl

# None this year, but there have been in the past.
LUA_ADJ_SCRIPTS =

TEXLUA_ADJ_SCRIPTS =	texk/texlive/linked_scripts/cachepic/cachepic.tlu \
			texk/texlive/linked_scripts/checkcites/checkcites.lua \
			texk/texlive/linked_scripts/context/stubs/unix/mtxrun \
			texk/texlive/linked_scripts/epspdf/epspdf.tlu \
			texk/texlive/linked_scripts/luaotfload/luaotfload-tool.lua \
			texk/texlive/linked_scripts/luaotfload/mkluatexfontdb.lua \
			texk/texlive/linked_scripts/musixtex/musixflx.lua \
			texk/texlive/linked_scripts/musixtex/musixtex.lua \
			texk/texlive/linked_scripts/pfarrei/a5toa4.tlu \
			texk/texlive/linked_scripts/pfarrei/pfarrei.tlu \
			texk/texlive/linked_scripts/pmx/pmx2pdf.lua \
			texk/texlive/linked_scripts/ptex2pdf/ptex2pdf.lua \
			texk/texlive/linked_scripts/texdoc/texdoc.tlu \
			texk/texlive/linked_scripts/texlive/rungs.tlu \
			utils/pmx/pmx2pdf.lua \

SH_ADJ_SCRIPTS =	texk/texlive/linked_scripts/typeoutfileinfo/typeoutfileinfo.sh \
			texk/texlive/linked_scripts/lua2dox/lua2dox_filter \
			texk/texlive/linked_scripts/ltxfileinfo/ltxfileinfo \
			texk/texlive/linked_scripts/arara/arara.sh \
			texk/texlive/linked_scripts/dtxgen/dtxgen \
			texk/texlive/linked_scripts/listbib/listbib
a122 17

# substitute paths to script interpreters
pre-configure:
	${MODTCL_WISH_ADJ} ${WRKSRC}/texk/texlive/linked_scripts/epspdf/epspdftk.tcl
	cd ${WRKSRC} && \
	    for F in ${LUA_ADJ_SCRIPTS}; do \
	        perl -pi -e '($$. == 1) && s@@^.*$$@@#!${MODLUA_BIN}@@' $$F; \
	    done
	cd ${WRKSRC} && \
	    for F in ${TEXLUA_ADJ_SCRIPTS}; do \
	        perl -pi -e '($$. == 1) && s@@^.*$$@@#!${PREFIX}/bin/texlua@@' $$F; \
	    done
	cd ${WRKSRC} && \
	    for F in ${SH_ADJ_SCRIPTS}; do \
	        perl -pi -e '($$. == 1) && s@@^.*$$@@#!/bin/sh@@' $$F; \
	    done
	${SUBST_CMD} ${WRKSRC}/texk/texlive/linked_scripts/context/stubs/unix/mtxrun
@


1.74
log
@sync follow graphics/gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2014/02/17 19:31:10 jasper Exp $
d7 1
a7 1
REVISION =		1
d15 6
a20 4
WANTLIB +=		ICE SM X11 Xau Xaw Xdmcp Xext Xmu Xpm Xt c expat
WANTLIB +=		fontconfig freetype gd jpeg lcms2 m
WANTLIB +=		openjpeg png>=3 poppler pthread pthread-stubs stdc++
WANTLIB +=		t1>=4 tiff ttf vpx xcb z
d35 8
a42 1
			print/poppler
a136 2
# Don't put ${PREFIX}/include in CPPFLAGS or system icu .h's are picked up
# TeX Live uses a modified version of icu.
d138 3
a140 1
		-I${TRUEPREFIX}/include/poppler
d142 2
a143 7
# Big endian ICU bug
# http://tug.org/pipermail/tlbuild/2012q2/002266.html
# XXX still needed
.include <bsd.port.arch.mk>
.if ${PROPERTIES:Mbe}
CPPFLAGS +=	-DU_IS_BIG_ENDIAN=1
.endif
a172 1
# Do not link with system icu. TeXLive ICU is not vanilla (Yet)!
a173 2
			--x-includes=${X11BASE}/include \
			--x-libraries=${X11BASE}/lib \
a175 2
			--with-freetype-includes=${LOCALBASE}/include/freetype1/freetype \
			--with-freetype-libdir=${LOCALBASE}/lib \
a176 1
			--with-gd-libdir=${LOCALBASE}/lib \
a177 2
			--with-libpng-includes=${LOCALBASE}/include \
			--with-libpng-libdir=${LOCALBASE}/lib \
a179 2
			--with-pnglib-libdir=${LOCALBASE}/lib \
			--with-pnglib-include=${LOCALBASE}/include \
a181 4
			--with-t1lib-libdir=${LOCALBASE}/lib \
			--with-t1lib-includes=${LOCALBASE}/include \
			--with-xpdf-includes=${LOCALBASE}/include/poppler \
			--with-xpdf-libdir=${LOCALBASE}/lib \
d195 6
a200 1
			--with-system-xpdf #link poppler
@


1.73
log
@re-enable the big endian quirk which is still needed at least for mips64.
also tested on sparc64

ok edd@@ (MAINTAINER) aja@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2014/01/14 14:42:00 edd Exp $
d7 1
a7 1
REVISION =		0
d18 1
a18 1
WANTLIB +=		t1>=4 tiff ttf xcb z
@


1.72
log
@Move courier and times tex packages into the texlive buildset.

This allows www/yaws to build using only the buildset texmf.

OK naddy@@, jasper@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2014/01/11 18:46:52 edd Exp $
d135 5
a139 5
# XXX still needed?
#.include <bsd.port.arch.mk>
#.if ${PROPERTIES:Mbe}
#CPPFLAGS +=	-DU_IS_BIG_ENDIAN=1
#.endif
@


1.71
log
@Update to TeX Live 2013.

This incudes the new buildset texmf -- a smaller texmf tree used for
BUILD_DEPENDS. See the package README for more info on this.

OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2013/06/04 18:41:57 naddy Exp $
d7 1
@


1.70
log
@Do not hardcode /usr/local.
Do not use SYSCONFDIR for base system etc files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2013/11/09 18:22:02 zhuk Exp $
a6 1
REVISION =		2
d11 2
a12 2
SHARED_LIBS =		kpathsea	5.0
SHARED_LIBS +=		ptexenc		2.0
d26 1
a26 1
			texlive_texmf-minimal-${V}:print/texlive/texmf,-main
a51 1
			epspdf.rb \
d54 1
a54 1
MODPERL_ADJ_FILES =	texk/tetex/updmap.pl \
d82 1
a82 1
			texk/texlive/linked_scripts/tetex/texdoctk.pl \
d87 1
d90 6
a95 1
			utils/xindy/xindy-2.4/user-commands/xindy.in
d97 2
a98 1
LUA_ADJ_SCRIPTS =	utils/mtx/m-tx.lua
d100 1
a100 1
TEXLUA_ADJ_SCRIPTS =	texk/texlive/context/mtxrun \
d102 3
a104 1
			texk/texlive/linked_scripts/cachepic/cachepic.tlu \
d108 4
d114 8
a121 1
			utils/pmx/pmx2pdf.lua
a122 1
SH_ADJ_SCRIPTS =	texk/texlive/linked_scripts/typeoutfileinfo/typeoutfileinfo.sh
a131 4
# Bug in ICU build system
# http://tug.org/pipermail/tlbuild/2012q2/002348.html
CPPFLAGS +=	-DU_PLATFORM=U_PF_BSD

d134 5
a138 4
.include <bsd.port.arch.mk>
.if ${PROPERTIES:Mbe}
CPPFLAGS +=	-DU_IS_BIG_ENDIAN=1
.endif
d223 1
a223 1
	${SUBST_CMD} ${WRKSRC}/texk/texlive/context/mtxrun
d229 1
a229 1
# symlinks that would have been installed by texlinks.
d232 2
d236 3
a238 4
PDFTEX_LN =	amstex cslatex csplain eplain etex jadetex latex mex \
		mllatex mltex pdfcslatex pdfcsplain pdfetex pdfjadetex \
		pdflatex pdfmex pdfxmltex physe phyzzx texsis utf8mex \
		xmltex
a285 1

@


1.69
log
@Fix MODTCL_TCLSH_ADJ and MODTCL_WISH_ADJ.

Review, input, okay and prodding to commit by stu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2013/06/04 18:41:57 naddy Exp $
d7 1
a7 1
REVISION =		1
@


1.68
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2013/05/29 20:04:13 zhuk Exp $
d7 1
a7 1
REVISION =		0
@


1.67
log
@Big shebang update for TeXlive. Unbreaks a lot of bundled scripts.
So many iterations that I forgot, what upcoming port was broken with
old version.

Tested by and okay kili@@, and also edd@@ for earlier version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2013/03/21 08:46:36 ajacoutot Exp $
d165 1
a165 1
			--with-libpng-includes=${LOCALBASE}/include/libpng \
d170 1
a170 1
			--with-pnglib-include=${LOCALBASE}/include/libpng \
@


1.66
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2013/03/20 19:13:50 jeremy Exp $
d7 1
d36 1
a36 1
# These following two modules are just for variable substitution in patches
d38 2
a39 1
MODULES +=		lang/ruby lang/python
d45 61
a105 1
SUBST_VARS +=		MODRUBY_BINREV MODPY_VERSION
d194 1
a194 1
# substitute ruby and python binary names
d196 13
@


1.65
log
@Make ruby 1.9 the default ruby for non-gem/extconf ports,
for consistency with the gem/extconf ports.

Update non-gem/extconf ports that relied on the previous
default of ruby 1.8 to explicitly specify it.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2013/03/11 11:37:54 espie Exp $
a74 1
USE_LIBTOOL =	Yes
@


1.64
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2012/12/20 22:44:37 edd Exp $
d38 1
@


1.63
log
@Unbreak build on big endian arches. This fix was supposed to be in the
big update, but went missing somewhere.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2012/12/17 20:28:04 edd Exp $
d71 1
a71 1
NO_REGRESS =		Yes
@


1.62
log
@Update to TeX Live 2012.

Many people have mailed me successful test reports and matthieu tells me he
has been running this for some time now.

Thanks to those that tested.

OK matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2012/08/07 15:15:09 edd Exp $
d58 5
d65 1
@


1.61
log
@zap spaces at end of variables (posix make compliance minor issue)
@
text
@a6 1
REVISION =		6
d8 5
a12 2
SHARED_LIBS =		kpathsea	4.0
SHARED_LIBS +=		ptexenc		1.0
d15 1
a15 1
WANTLIB +=		fontconfig freetype gd jpeg lcms2 m ncurses
d32 1
a32 2
			print/poppler \
			textproc/libxml
d49 9
d59 3
a61 3
			CPPFLAGS="-I${TRUEPREFIX}/include/poppler -I${X11BASE}/include"

WRKBUILD =              ${WRKSRC}/Work# Can't build in same dir
d64 2
a65 1
NO_REGRESS =		Yes # not worth the effort.
d81 1
a81 1
PKG_ARGS +=		-Dxindy=1 # Note. texmf-full required for xindy
d122 1
a122 1
			--with-system-xpdf # link poppler instead of internal xpdf
d145 3
a151 4
	# following tradition, texmf is in ${PREFIX}/share
	mv ${PREFIX}/texmf ${PREFIX}/share/texmf
	mv ${PREFIX}/texmf-dist ${PREFIX}/share/texmf-dist

d161 7
d187 4
@


1.60
log
@Fix a broken shellout to which(1) in minted.sty and mention the soft
dependency upon py-pygments.

Breakage spotted by Luís Rosa. Thanks.

OK dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2012/08/06 11:14:39 naddy Exp $
d51 1
a51 1
WRKBUILD =              ${WRKSRC}/Work # Can't build in same dir
@


1.59
log
@remove USE_GROFF from ports that don't install any man pages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2012/07/13 15:17:41 kili Exp $
d7 1
a7 1
REVISION =		5
@


1.58
log
@Fix build for poppler-0.20.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2012/02/17 13:41:33 nigel Exp $
a57 1
USE_GROFF=	Yes
@


1.57
log
@bump revision after psutil letter FLAVOR removed.

ok ajc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2012/01/31 14:15:57 sthen Exp $
d7 1
a7 1
REVISION =		4
d13 1
a13 1
WANTLIB +=		fontconfig freetype gd jpeg lcms m ncurses
@


1.56
log
@- pdfjam and texlive base conflict because texlive now includes the pdfjam
scripts. add @@conflict marker to texlive and remove/unlink pdfjam.

- add missing @@man annotation in texmf

conflict noted by naddy@@. ok ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2012/01/22 18:52:01 edd Exp $
d7 1
a7 1
REVISION =		3
@


1.55
log
@make pkg_check happier with texlive, OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2012/01/10 18:04:31 edd Exp $
d5 1
a5 1
DISTNAME = 		texlive-${DIST_V}-source
d7 1
a7 1
REVISION =		2
d15 1
a15 1
WANTLIB +=		t1>=4 ttf xcb xml2 z
d25 1
a25 1
			
d50 1
a50 1
			
d53 1
a53 1
MAKE_ENV = 		${CONFIGURE_ENV}
d67 1
a67 1
BUILD_DEPENDS += 	lang/clisp
d127 1
a127 1
ALEPH_LN =	lamed 
@


1.54
log
@* Fixes conTeXt found in TeX Live 2011.
* Separates conTeXt into it's own sub-package (texlive_texmf-context).
* Patches in correct paths for texmfcnf.lua
* Creates the luatex cache at install time of texlive_texmf-context.
* Updates documentation relating to the above.
* Use %D in all hashing @@exec/@@unexec.
* Fix a bogus LOCALBASE, which should have been a TRUEPREFIX.
* Small tidy ups.

OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2011/11/26 19:50:50 kili Exp $
d7 1
a7 1
REVISION =		1
@


1.53
log
@Fix LIB_DEPENDS for poppler-0.18.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2011/11/23 12:00:45 edd Exp $
d7 1
a7 1
REVISION =		0
@


1.52
log
@update to texlive-2011, OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2011/09/16 11:13:41 espie Exp $
d7 1
d30 2
a31 1
			print/poppler
@


1.51
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2011/06/14 21:11:24 edd Exp $
a6 1
REVISION =		4
d8 2
a9 2
SHARED_LIBS =		kpathsea	3.0
SHARED_LIBS +=		ptexenc		0.0
d22 2
a23 2
			texlive_texmf-minimal-${V}:print/texlive/texmf,-main \
			print/latex-mk
d32 8
d45 1
d63 2
a64 1
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "amd64"
d66 1
a66 1
LIB_DEPENDS +=		devel/ffcall	# XXX still needed? try build on fresh sys
d69 1
a69 1
PKG_ARGS +=		-Dxindy=1
d114 4
a126 1
MPOST_LN =	metafun mfplain
d131 1
a131 1
PTEX_LN =	platex
d140 1
d163 2
a164 2
	for i in ${PTEX_LN}; do \
		ln -s ${TRUEPREFIX}/bin/ptex ${PREFIX}/bin/$$i; \
@


1.50
log
@Alter style of README to match the README.template. Also add a paragraph about
package updates.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2011/06/13 16:40:51 edd Exp $
d7 1
a7 1
REVISION =		3
@


1.49
log
@Fix broken font maps, as reported by Richard Bonichon and Laurence Tratt.
Emulate texlinks, so that those pesky symlinks are now in the packing list.
Minor plist tidy-ups that help fix the upgrade (see recent quirks commit).

OK kili@@, espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2011/05/21 17:37:06 espie Exp $
d7 1
a7 1
REVISION =		2
@


1.48
log
@fix interrupted builds
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/05/11 07:45:53 ajacoutot Exp $
d7 1
a7 1
REVISION =		1
d109 13
d137 20
d158 1
@


1.47
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/03/09 14:43:59 edd Exp $
d107 1
a107 1
	mkdir ${WRKSRC}/inst
@


1.46
log
@fix texmf-local path.
fix bogus dependency path - notced by Markus Lude, cheers.

OK Landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/03/08 00:09:42 edd Exp $
d7 1
a7 1
REVISION =		0
@


1.45
log
@Update to TeX Live 2010.

This year we pre-generate format and maps as requested by kili.

Started adding test cases in the tests/ dir.

Upgrades from 2009 will cause a harmless warning regarding texlinks. Espie is
aware of this, it was not easily fixable.

Uninstalls of texlive 2010 which were previously upgraded from 2009 will make
lots of noise regarding non-empty directories which can not be deleted. This
is due to unregistered package directories in the old texlive 2009 pacakage and
has been fixed in the 2010 package (rblatter script was modified to register
*all* parent dirs in PLISTs).

Installs/uninstalls of texlive 2010 on a fresh system (which has never
seen texlive 2009) are squeaky clean.

This has been in use for a number of months on my work machine, so should be
pretty stable, but I am sure someone will find some obscure bugs. These can be
fixed in tree.

OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/12/01 18:16:21 edd Exp $
d7 1
d23 1
a23 1
			texlive_texmf-minimal-${V}:print/texlive2010/texmf,-main \
@


1.44
log
@remaining WANTLIB go .>=   to >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/11/20 09:48:40 espie Exp $
a6 2
REVISION =		9
SHARED_LIBS =		kpathsea	2.0
d8 7
a14 4
WANTLIB =		m X11 ICE freetype Xt c Xext fontconfig Xpm SM Xmu gd \
			ncurses openjpeg Xaw Xau Xdmcp expat iconv jpeg lcms \
			png>=3	poppler pthread pthread-stubs stdc++ t1>=4 \
			ttf xcb	xml2 z
d22 2
a23 1
			texlive_texmf-minimal-${V}:print/texlive/texmf,-main
d31 2
d38 1
a38 1
			CPPFLAGS=-I${LOCALBASE}/include/poppler
d47 1
a47 1
USE_GROFF =	Yes
d56 3
a58 4
LIB_DEPENDS +=		devel/libsigsegv \
			devel/ffcall
WANTLIB +=		sigsegv avcall callback
CONFIGURE_ARGS +=	--enable-xindy
a59 2
WANTLIB +=		readline
MODULES +=		devel/gettext
d65 2
a66 1
CONFIGURE_ARGS +=	--x-includes=${X11BASE}/include \
a96 1
			--with-tex-banner=PuffTeX-2009 \
d99 2
a100 1
			--with-system-xpdf # link poppler, yay :)
a103 7
# clear upstreams .orig files, so update-patches is not confused
post-extract:
	find ${WRKDIST} -name '*.orig' | xargs rm

post-patch:
	${SUBST_CMD} ${WRKSRC}/utils/xindy/rte/ordrules/Makefile.in

d109 13
a121 5
	${INSTALL_SCRIPT} ${FILESDIR}/tl-link-config ${PREFIX}/bin
	${SUBST_CMD} ${PREFIX}/bin/tl-link-config
	${INSTALL_DATA_DIR} ${PREFIX}/share/texmf/web2c
	${INSTALL_DATA} -c ${FILESDIR}/fmtutil.cnf-minimal \
		${PREFIX}/share/texmf/web2c
@


1.43
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/11/14 19:53:51 edd Exp $
d12 1
a12 1
			png.>=3	poppler pthread pthread-stubs stdc++ t1.>=4 \
@


1.42
log
@fix formatting of ruler in README at aja's request

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/11/14 17:47:59 jasper Exp $
d15 7
a21 7
RUN_DEPENDS =		:ghostscript-*:print/ghostscript/gnu \
			:detex-*:print/detex \
			:dvi2tty-*:print/dvi2tty \
			:ps2eps-*:print/ps2eps \
			:psutils-*:print/psutils \
			:t1utils-*:print/t1utils \
			:texlive_texmf-minimal-${V}:print/texlive/texmf,-main
d23 5
a27 5
LIB_DEPENDS =		::devel/t1lib \
			::graphics/png \
			::graphics/gd \
			::print/freetype \
			::print/poppler
d51 3
a53 3
BUILD_DEPENDS += 	:clisp-*:lang/clisp
LIB_DEPENDS +=		::devel/libsigsegv \
			::devel/ffcall
@


1.41
log
@- remove MESSAGE with over-obvious info
- tweak README's rcs id
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/11/14 16:58:39 edd Exp $
d7 1
a7 1
REVISION =		8
@


1.40
log
@Fix WANTLIB, new style README, fix typo in README (noticed by Nicholas
Fleisher).

OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/11/11 18:34:59 espie Exp $
d7 1
a7 1
REVISION =		7
@


1.39
log
@more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/10/24 21:32:39 ajacoutot Exp $
d7 1
a7 1
REVISION =		6
d10 4
a13 4
WANTLIB =		m X11 ICE freetype Xt c Xext fontconfig Xpm SM Xmu z \
			ncurses Xaw Xau Xdmcp expat iconv jpeg lcms pthread \
			pthread-stubs stdc++ xcb xml2 t1.>=4 png.>=3 gd ttf \
			poppler
a113 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/texlive
	${INSTALL_DATA} ${FILESDIR}/README.OpenBSD \
		${PREFIX}/share/doc/texlive
@


1.38
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/10/18 21:25:09 espie Exp $
d12 2
a13 1
			pthread-stubs stdc++ xcb xml2
d23 5
a27 5
LIB_DEPENDS =		t1.>=4::devel/t1lib \
			png.>=3::graphics/png \
			gd::graphics/gd \
			ttf::print/freetype \
			poppler::print/poppler
@


1.37
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/09/24 20:00:51 ajacoutot Exp $
a39 1
USE_X11 =	Yes
@


1.36
log
@Bump after previous.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/09/24 19:35:27 edd Exp $
d43 1
@


1.35
log
@fix a naughty hard-coded path. OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/09/14 20:29:56 edd Exp $
d7 1
a7 1
REVISION =		5
@


1.34
log
@Don't link pthread and libm globally.
OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/07/17 16:37:33 espie Exp $
d33 1
a33 1
			CPPFLAGS=-I/usr/local/include/poppler
@


1.33
log
@REVISION, new WANTLIB. No changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/03/21 13:22:55 edd Exp $
d7 1
a7 1
REVISION =		4
d32 1
a32 1
CONFIGURE_ENV +=	TL_MAKE=${GMAKE} LDFLAGS="-lm -lpthread" \
@


1.32
log
@Remove 'tlmgr' script. It is not intended to be used with the OpenBSD
packakges and if it were to work it would screw up package checksums.

OK, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/01/10 16:43:36 edd Exp $
d6 2
a7 1
PKGNAME =		texlive_base-${V}p4
d51 3
a53 2
LIB_DEPENDS +=		sigsegv::devel/libsigsegv \
			avcall,callback::devel/ffcall
@


1.31
log
@Fix the xindy module path in TeX Live.

OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/01/10 13:06:36 kili Exp $
d6 1
a6 1
PKGNAME =		texlive_base-${V}p3
@


1.30
log
@Only xindy depends on ffcall (which is horribly broken on arm).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/01/07 10:57:17 edd Exp $
d6 1
a6 1
PKGNAME =		texlive_base-${V}p2
@


1.29
log
@fix build for the new version of clisp, which has new syntax for clisp-link.

OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/12/15 18:01:57 espie Exp $
d6 1
a6 1
PKGNAME =		texlive_base-${V}p1
d25 1
a25 2
			poppler::print/poppler \
			avcall,callback::devel/ffcall
d50 2
a51 1
LIB_DEPENDS +=		sigsegv::devel/libsigsegv # xindy is based upon clisp
@


1.28
log
@upgrade path from teTeX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/12/12 17:48:34 edd Exp $
d6 1
a6 1
PKGNAME =		texlive_base-${V}p0
d25 2
a26 3
			poppler::print/poppler


@


1.27
log
@Update to TeX Live 2009.

Requires newest pacakge tools for upgrading from 2008.

OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/05/25 17:19:12 sthen Exp $
d6 1
a6 1
PKGNAME =		texlive_base-${V}
@


1.26
log
@switch dependencies from lzma to xz
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/08/10 06:34:09 kili Exp $
d5 7
a11 8
DIST_V = 		20080816
DISTNAME =		texlive-${DIST_V}-source
PKGNAME =		texlive_base-${V}p12
SHARED_LIBS =		kpathsea	1.0

WANTLIB =		m X11 ICE freetype Xt pthread c Xext fontconfig \
			Xp Xpm SM Xmu z ncurses Xaw Xau Xdmcp stdc++ expat \
			pthread-stubs xcb
a12 3
EXTRACT_SUFX =		.tar.lzma

BUILD_DEPENDS =		::archivers/xz
d19 1
a19 1
			:texlive_texmf-minimal-*:print/texlive/texmf,-main
d22 6
a27 1
			png.>=3::graphics/png
d31 7
a37 3
CONFIGURE_ENV =		GNUMAKE=${GMAKE}
WRKBUILD =		${WRKSRC}/work # Can't build in same dir
CONFIGURE_SCRIPT = 	../configure
d39 1
a39 1
NO_REGRESS =		Yes # does not listen to DESTDIR, not worth the effort.
d49 12
d62 2
a63 2
# Xindy not ready yet
CONFIGURE_ARGS +=	--with-fontconfig=${X11BASE} \
d65 8
a72 2
			--with-freetype2-libdir=${X11BASE}/lib \
			--with-freetype2-include=${X11BASE}/include \
d80 4
a83 2
			--with-t1lib-include=${LOCALBASE}/include \
			--without-texinfo \
d85 6
a90 7
			--without-texi2html \
			--disable-multiplatform \
			--without-detex \
			--without-dvi2tty \
			--without-ps2eps \
			--without-psutils \
			--without-t1utils \
d93 4
a96 1
			--without-xindy
d98 1
a98 1
SUBST_VARS +=		TRUEPREFIX
d100 2
a101 5
# Could do with bsd.port.mk understanding lzma
# Also annoyingly loads of .orig files confuse update-patches
do-extract:
	cd ${WRKDIR} && \
	xz -dc ${FULLDISTDIR}/${DISTNAME}${EXTRACT_SUFX} | ${TAR} xf -
d104 7
a111 2
	${INSTALL_DATA} ${FILESDIR}/fmtutil.cnf-minimal \
		${PREFIX}/share/texmf/web2c
d115 1
a115 2
	${INSTALL_SCRIPT} ${FILESDIR}/tl-link-config \
		${PREFIX}/bin
d117 3
@


1.25
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/05/25 17:19:12 sthen Exp $
d16 1
a16 1
BUILD_DEPENDS =		:lzma-*:archivers/lzma
d77 1
a77 1
	lzma -dc ${FULLDISTDIR}/${DISTNAME}${EXTRACT_SUFX} | ${TAR} xf -
@


1.24
log
@remove comment about a known issue that's already been fixed; bump PKGNAME
from Edd Barrett (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/04/23 00:18:17 sthen Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p11
d11 2
a12 1
			Xp Xpm SM Xmu z ncurses Xaw Xau Xdmcp stdc++ expat
@


1.23
log
@- Fix USE_SYSTRACE=Yes builds.

- LOCALBASE -> TRUEPREFIX

- Add a separate script (tl-link-config) to decide which config to
symlink. Fixes the situation where -base gets bumped and so the minimal
fmtutil.cnf gets incorrectly linked when really the -full config is
needed.

from maintainer Edd Barrett.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/02/22 19:05:17 kili Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p10
@


1.22
log
@
Add @@pkgpath and @@conflict markers to let pkg_add -u correctly
update the texlive packages. Bump all pkgnames.

"looks good to me" espie@@, "please commit" naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/12/27 18:22:36 steven Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p9
d70 2
a81 2
	${INSTALL_DATA} ${FILESDIR}/fmtutil.cnf-full \
		${PREFIX}/share/texmf/web2c
d85 3
@


1.21
log
@another typo

from Edd Barrett
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/12/27 16:01:44 steven Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p8
@


1.20
log
@don't use -O3

from maintainer Edd Barrett some time ago
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/12/27 12:17:40 steven Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p7
@


1.19
log
@fix typo

from maintainer Edd Barrett
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/12/04 22:29:06 steven Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p6
@


1.18
log
@unbreak creation of fmt files, fixes jadetex und should fix sbcl

from maintainer Edd Barrett
@
text
@d7 1
a7 1
PKGNAME =		texlive_base-${V}p5
@


1.17
log
@enable luatex, which also makes texdoc work

from maintainer Edd Barrett
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/11/30 18:45:27 steven Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p4
@


1.16
log
@reorganize packaging: remove -tetex package, this is now all included in
the main -minimal texmf package. this now allows using latex without the
need to install extra packages.

from maintainer Edd Barrett, requested by sturm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/11/14 10:43:11 sturm Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p3
d68 1
a68 2
			--without-xindy \
			--without-luatex
@


1.15
log
@revert due to circular dependencies, a correct fix is being worked on

noticed by markus lude
@
text
@d7 1
a7 1
PKGNAME =		texlive_base-${V}p2
a78 2
	#mv ${PREFIX}/share/texmf/web2c/fmtutil.cnf \
	#	${PREFIX}/share/texmf/web2c/fmtutil.cnf-full
a79 2
		${PREFIX}/share/texmf/web2c
	${INSTALL_DATA} ${FILESDIR}/fmtutil.cnf-tetex \
@


1.14
log
@depend on texmf,-tetex so this package actually becomes useable
this should unbreak all those ports just depending on texlive/base

ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/11/03 21:30:53 steven Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p1
d22 1
a22 1
			:texlive_texmf-tetex-*:print/texlive/texmf,-tetex
@


1.13
log
@don't link libstdc++ statically
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/06/30 21:38:28 ajacoutot Exp $
d7 1
a7 1
PKGNAME =		texlive_base-${V}p0
d22 1
a22 1
			:texlive_texmf-minimal-*:print/texlive/texmf,-main
@


1.12
log
@needs -fPIC to build on sparc64.

confirmed by sturm@@
@
text
@d7 1
a7 1
PKGNAME =		texlive_base-${V}
@


1.11
log
@update to texlive 2008
reorganize port structure

all from maintainer Edd Barrett
@
text
@d39 4
@


1.10
log
@- include dir is LOCALBASE, not TRUEPREFIX
Edd Barrett (MAINTAINER) agrees

"yep, change that" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/05/04 20:45:30 okan Exp $
d3 1
a3 1
COMMENT=		base TeXLive LaTeX distribution
d5 4
a8 4
V=			2007
DISTNAME=		texlive_base-${V}-src
PKGNAME=		texlive_base-${V}p6
SHARED_LIBS=		kpathsea	0.0
d10 1
a10 1
WANTLIB=		m X11 ICE freetype Xt pthread c Xext fontconfig \
d13 1
a13 1
EXTRACT_SUFX=		.tar.bz2
d15 2
a16 4
BUILD_DEPENDS=		:texlive_texmf-minimal-${V}*:print/texlive/texmf-minimal
RUN_DEPENDS=		:texlive_texmf-minimal-${V}*:print/texlive/texmf-minimal \
			:ruby-*:lang/ruby \
			:ghostscript-*:print/ghostscript/gnu \
d21 4
a24 2
			:t1utils-*:print/t1utils
LIB_DEPENDS=		t1.>=4::devel/t1lib \
d27 11
a37 9
WRKDIST=		${WRKDIR}/texlive_base-${V}

SEPARATE_BUILD=	simple
USE_X11=	Yes
USE_GMAKE=	Yes
USE_LIBTOOL=	Yes
NO_REGRESS=	Yes # Regress does not listen to DESTDIR, not worth the effort.

CONFIGURE_STYLE=	gnu
d40 2
a41 1
CONFIGURE_ARGS+=	--with-fontconfig=${X11BASE} \
d61 25
a85 6
			--without-t1utils

post-build:
	@@# Fix for broken metapost
	mv ${WRKBUILD}/texk/web2c/mpware/.libs/makempx \
		${WRKBUILD}/texk/web2c/mpware/makempx
@


1.9
log
@ht conflict now only exists for older ht ports.

feedback and ok merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/04/22 23:55:09 kili Exp $
d7 1
a7 1
PKGNAME=		texlive_base-${V}p5
d44 2
a45 2
			--with-pnglib-libdir=${TRUEPREFIX}/lib \
			--with-pnglib-include=${TRUEPREFIX}/include/libpng \
d48 2
a49 2
			--with-t1lib-libdir=${TRUEPREFIX}/lib \
			--with-t1lib-include=${TRUEPREFIX}/include \
@


1.8
log
@
CVE-2008-1693 (adapted from the xpdf patch from debian).

ok naddy, bernd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/12/09 10:49:34 steven Exp $
d7 1
a7 1
PKGNAME=		texlive_base-${V}p4
@


1.7
log
@clean up some more on pkg_delete, and adapt messages a bit.

mostly from maintainer Edd Barrett, with some tweaks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/11/06 06:33:51 bernd Exp $
d7 1
a7 1
PKGNAME=		texlive_base-${V}p3
@


1.6
log
@ht and texlive_base both install ${LOCALBASE}/bin/ht.
Add @@conflict markers.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/10/19 22:14:13 steven Exp $
d7 1
a7 1
PKGNAME=		texlive_base-${V}p2
@


1.5
log
@remove a bunch of symlinks when the package gets deleted.

from maintainer Edd Barrett
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/09/10 13:37:26 steven Exp $
d7 1
a7 1
PKGNAME=		texlive_base-${V}p1
@


1.4
log
@add a fix for metapost, plus some minor wording changes

from maintainer Edd Barrett
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/09/07 21:59:53 steven Exp $
d7 1
a7 1
PKGNAME=		texlive_base-${V}p0
@


1.3
log
@do not use PKGNAME to construct WRKDIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/09/07 15:26:18 steven Exp $
d7 1
a7 2
PKGNAME=		texlive_base-${V}
WRKDIST=		${WRKDIR}/texlive_base-${V}
d15 2
a16 2
BUILD_DEPENDS=		:texlive_texmf-minimal-${V}:print/texlive/texmf-minimal
RUN_DEPENDS=		:texlive_texmf-minimal-${V}:print/texlive/texmf-minimal \
d27 2
d59 5
a63 7
post-install:
	@@# Set SYSCONFDIR properly so that updmap-sys works
	mv ${PREFIX}/share/texmf/web2c/texmf.cnf \
                ${PREFIX}/share/texmf/web2c/texmf.cnf-dist
	sed -e 's/^TEXMFSYSCONFIG = .*/TEXMFSYSCONFIG = $$TEXMFMAIN/g' \
		${PREFIX}/share/texmf/web2c/texmf.cnf-dist > \
		${PREFIX}/share/texmf/web2c/texmf.cnf
@


1.2
log
@put common stuff in one place

looks good to maintainer Edd Barrett
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/07/17 21:53:25 jasper Exp $
d6 1
d8 1
a8 2
DISTNAME=		texlive_base-${V}-src
WRKDIST=		${WRKDIR}/${PKGNAME}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a10 11
CATEGORIES=		print

HOMEPAGE=		http://tug.org/texlive/	

MAINTAINER=		Edd Barrett <vext01@@gmail.com>

# http://tug.org/texlive/LICENSE.TL
PERMIT_PACKAGE_CDROM=  Yes
PERMIT_PACKAGE_FTP=    Yes
PERMIT_DISTFILES_CDROM=Yes
PERMIT_DISTFILES_FTP=  Yes
a13 1
MASTER_SITES=		http://students.dec.bournemouth.ac.uk/ebarrett/texlive/distfiles/
@


1.1.1.1
log
@import texlive 2007

TeXLive is an easy way to get up and running with TeX. It provides a
comprehensive TeX system which includes all the major TeX-related
programs, macro packages, and fonts that are free software, including
support for many languages around the world.

from Edd Barrett <vext01@@gmail.com>, with a lot of tweaks by me
input from kili@@
feedback and ok simon@@
@
text
@@
