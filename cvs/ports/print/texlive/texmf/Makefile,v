head	1.46;
access;
symbols
	OPENBSD_6_1:1.46.0.4
	OPENBSD_6_1_BASE:1.46
	OPENBSD_6_0:1.46.0.2
	OPENBSD_6_0_BASE:1.46
	OPENBSD_5_9:1.44.0.2
	OPENBSD_5_9_BASE:1.44
	OPENBSD_5_8:1.41.0.4
	OPENBSD_5_8_BASE:1.41
	OPENBSD_5_7:1.40.0.2
	OPENBSD_5_7_BASE:1.40
	OPENBSD_5_6:1.39.0.4
	OPENBSD_5_6_BASE:1.39
	OPENBSD_5_5:1.39.0.2
	OPENBSD_5_5_BASE:1.39
	OPENBSD_5_4:1.34.0.2
	OPENBSD_5_4_BASE:1.34
	OPENBSD_5_3:1.31.0.2
	OPENBSD_5_3_BASE:1.31
	OPENBSD_5_2:1.29.0.2
	OPENBSD_5_2_BASE:1.29
	OPENBSD_5_1_BASE:1.27
	OPENBSD_5_1:1.27.0.2
	OPENBSD_5_0:1.21.0.2
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.13.0.2
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.6.0.2
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5;
locks; strict;
comment	@# @;


1.46
date	2016.06.01.12.47.30;	author edd;	state Exp;
branches;
next	1.45;
commitid	UV6MIj5ViZWo7hqx;

1.45
date	2016.05.04.22.52.19;	author edd;	state Exp;
branches;
next	1.44;
commitid	IFGjXkVnZW5MM1yT;

1.44
date	2015.12.03.21.24.31;	author sthen;	state Exp;
branches;
next	1.43;
commitid	qh8BBe4z9PLvLPKf;

1.43
date	2015.09.25.12.13.47;	author dcoppa;	state Exp;
branches;
next	1.42;
commitid	ZwUNVFHN81gLPnvx;

1.42
date	2015.09.22.20.00.14;	author edd;	state Exp;
branches;
next	1.41;
commitid	JOrTTLK5TXU9ftAR;

1.41
date	2015.05.18.21.37.58;	author edd;	state Exp;
branches;
next	1.40;
commitid	lX1CFagn8LDeCaRV;

1.40
date	2015.01.10.13.06.29;	author edd;	state Exp;
branches;
next	1.39;
commitid	vTQfPbsUe4g6fIRu;

1.39
date	2014.02.08.17.46.18;	author edd;	state Exp;
branches;
next	1.38;

1.38
date	2014.01.20.21.34.44;	author edd;	state Exp;
branches;
next	1.37;

1.37
date	2014.01.14.14.42.00;	author edd;	state Exp;
branches;
next	1.36;

1.36
date	2014.01.11.18.46.52;	author edd;	state Exp;
branches;
next	1.35;

1.35
date	2013.10.12.10.23.25;	author sthen;	state Exp;
branches;
next	1.34;

1.34
date	2013.04.16.05.21.19;	author bentley;	state Exp;
branches;
next	1.33;

1.33
date	2013.03.20.19.13.50;	author jeremy;	state Exp;
branches;
next	1.32;

1.32
date	2013.03.11.11.37.54;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2012.12.17.20.28.04;	author edd;	state Exp;
branches;
next	1.30;

1.30
date	2012.08.07.15.15.09;	author edd;	state Exp;
branches;
next	1.29;

1.29
date	2012.03.17.21.25.37;	author kili;	state Exp;
branches;
next	1.28;

1.28
date	2012.03.17.20.50.14;	author kili;	state Exp;
branches;
next	1.27;

1.27
date	2012.01.31.14.15.57;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2012.01.22.18.52.01;	author edd;	state Exp;
branches;
next	1.25;

1.25
date	2012.01.10.18.04.31;	author edd;	state Exp;
branches;
next	1.24;

1.24
date	2011.12.05.23.22.39;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2011.11.23.12.00.45;	author edd;	state Exp;
branches;
next	1.22;

1.22
date	2011.09.16.11.13.41;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2011.07.26.18.04.57;	author edd;	state Exp;
branches;
next	1.20;

1.20
date	2011.06.18.10.30.14;	author edd;	state Exp;
branches;
next	1.19;

1.19
date	2011.06.13.16.40.52;	author edd;	state Exp;
branches;
next	1.18;

1.18
date	2011.03.09.14.43.59;	author edd;	state Exp;
branches;
next	1.17;

1.17
date	2011.03.08.00.09.42;	author edd;	state Exp;
branches;
next	1.16;

1.16
date	2011.01.17.18.20.08;	author edd;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.20.09.48.40;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2010.08.20.11.06.29;	author edd;	state Exp;
branches;
next	1.13;

1.13
date	2010.07.18.09.05.32;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.07.17.16.37.33;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.04.12.12.49.24;	author edd;	state Exp;
branches;
next	1.10;

1.10
date	2010.02.17.10.19.08;	author jsg;	state Exp;
branches;
next	1.9;

1.9
date	2009.12.15.18.01.57;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2009.12.12.17.48.34;	author edd;	state Exp;
branches;
next	1.7;

1.7
date	2009.09.10.15.30.21;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.23.00.18.18;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.02.22.19.05.17;	author kili;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.30.18.45.27;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2008.10.12.22.00.36;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.08.05.22.45;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.07.20.54.35;	author steven;	state Exp;
branches;
next	;


desc
@@


1.46
log
@print/texlive: Update to 2015.

OK abieber@@, schwarze@@.

Additional testing by Caspar Schutijser.

Thanks
@
text
@# $OpenBSD: Makefile,v 1.44 2015/12/03 21:24:31 sthen Exp $

COMMENT-context =	texlive texmf for conTeXt
COMMENT-docs =		texlive documentation
COMMENT-full =		texlive texmf for extra macros
COMMENT-main =		texlive texmf for basic functionality
COMMENT-buildset =	smallest texlive texmf for building ports

# If you move things out of another texmf into the buildset, don't forget to:
#   * Update the buildset conflict markers in PLIST-buildset.
#   * Add a more restrictive RUN_DEPEND upon the buildset.

DISTNAME =		texlive-${DIST_V}-texmf
MASTER_SITES0 =		https://spacehopper.org/mirrors/
DISTFILES =		${DISTNAME}${EXTRACT_SUFX} \
			texlive-${DIST_V}-extra${EXTRACT_SUFX} \
			texmf-var-pregen-${V}${EXTRACT_SUFX}:0

PKGNAME-main =		texlive_texmf-minimal-${V}
PKGNAME-full =		texlive_texmf-full-${V}
PKGNAME-docs =		texlive_texmf-docs-${V}
PKGNAME-context =	texlive_texmf-context-${V}
PKGNAME-buildset =	texlive_texmf-buildset-${V}

NO_BUILD =		Yes
NO_TEST =		Yes
PKG_ARCH =		*

BUILD_DEPENDS =		archivers/xz

# We dont use auto module deps for these, as MODULES is not per SUBPACKAGE
.include "adj.mk"
MODULES +=		lang/ruby lang/python
MODRUBY_REV =		1.8
MODRUBY_BUILDDEP =	No
MODRUBY_RUNDEP =	No
MODPY_BUILDDEP =	No
MODPY_RUNDEP =		No

RUN_DEPENDS-main +=	texlive_base-${V}:print/texlive/base \
			texlive_texmf-buildset-${V}:print/texlive/texmf,-buildset

RUN_DEPENDS-full =	texlive_texmf-minimal-${V}:print/texlive/texmf,-main \
			${MODPY_RUN_DEPENDS} \
			${_MODLUA_RUNDEPENDS}
RUN_DEPENDS-context +=	texlive_texmf-full-${V}:print/texlive/texmf,-full \
			${MODRUBY_RUNDEPENDS}
RUN_DEPENDS-docs +=	texlive_base-${V}:print/texlive/base \
			x11/p5-Tk

MULTI_PACKAGES =	-context -docs -full -main -buildset

MODULES +=		lang/lua lang/ruby lang/python x11/tk perl
MODLUA_RUNDEP =		No
MODLUA_BUILDDEP =	No
MODRUBY_REV =		1.8
MODRUBY_BUILDDEP =	No
MODRUBY_RUNDEP =	No
MODPY_BUILDDEP =	No
MODPY_RUNDEP =		No

SUBST_VARS +=		RUBY

# Substitute correct interpreter paths into scripts.
# Some are done automatically by MODULES
pre-configure:
	@@# Don't use builtin ruby.port.mk substitution. It uses
	@@# find, which takes an age on such a large directory.
	for F in ${RUBY_ADJ_FILES}; do \
	    perl -pi -e '($$. == 1) && s@@^.*$$@@#!${RUBY}@@' ${WRKSRC}/$$F; \
	done
	for F in ${WISH_ADJ_FILES}; do \
	    ${MODTCL_WISH_ADJ} ${WRKSRC}/$$F; \
	done
	for F in ${TEXLUA_ADJ_FILES}; do \
	    perl -pi -e '($$. == 1) && s@@^.*$$@@#!${PREFIX}/bin/texlua@@' \
	    ${WRKSRC}/$$F; \
	done
	for F in ${LUA_ADJ_FILES}; do \
	    perl -pi -e '($$. == 1) && s@@^.*$$@@#!${MODLUA_BIN}@@' ${WRKSRC}/$$F; \
	done
	for F in ${BASH_ADJ_FILES}; do \
	    perl -pi -e '($$. == 1) && s@@^.*$$@@#!${LOCALBASE}/bin/bash@@' \
	    ${WRKSRC}/$$F; \
	done
	${SUBST_CMD} ${WRKSRC}/texmf-dist/scripts/context/stubs/unix/mtxrun

do-install:
	mv ${WRKDIST}/texmf-dist ${PREFIX}/share

	# plug in my pregenerated map and formats
	#
	# These are created (as root) with:
	#   updmap-sys
	#   fmtutil-sys --all
	#   context --make
	mv ${WRKDIR}/texmf-var ${PREFIX}/share

	# Put manuals in the right place.
	#
	# The rest of share/texmf-dist/doc/man does not appear
	# in the packing list, so the PDF versions will not be installed.
	#
	# I am told by upstream that any manual page not under
	# texmf-dist/doc/man is intentionally this way and should not be
	# moved into the system manual path. So be it.
	mv ${PREFIX}/share/texmf-dist/doc/man/man1/*.1 ${PREFIX}/man/man1/
	mv ${PREFIX}/share/texmf-dist/doc/man/man5/*.5 ${PREFIX}/man/man5/

	# Info pages
	mv ${PREFIX}/share/texmf-dist/doc/info/*.info \
		${PREFIX}/info/

	# adjust permissions
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/{share/texmf*,man/man*/*,info/*}

# selfauto does not work with our legacy texmf paths, patch in paths.
post-install:
	${SUBST_CMD} ${PREFIX}/share/texmf-dist/web2c/texmf.cnf
	${SUBST_CMD} ${PREFIX}/share/texmf-dist/web2c/texmfcnf.lua

# Generating PLISTs is special for texlive.
# This target requires py-texscythe.
update-plist: plist
plist:
	cd ${FILESDIR} && ${MODPY_BIN} mk_plists.py \
		${TRUEPREFIX}/share/examples/py-texscythe/texlive2015.tlpdb.gz


.include <bsd.port.mk>
@


1.45
log
@TeX Live: Update PLIST generation code in light of new py-texscythe.

OK abieber@@, thanks.
@
text
@a24 4
REVISION-main =		0
REVISION-full =		0
REVISION-buildset =	0

d41 1
a41 1
			texlive_texmf-buildset-${V}p0:print/texlive/texmf,-buildset
d92 5
d127 2
a128 1
		${TRUEPREFIX}/share/examples/py-texscythe/texlive2014.tlpdb.gz
@


1.44
log
@switch my distfiles mirror to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/09/25 12:13:47 dcoppa Exp $
d125 2
a126 3
	cd ${FILESDIR} && ${LOCALBASE}/bin/texscyther --initdb \
		-t ${LOCALBASE}//share/examples/py-texscythe/texlive2014.tlpdb.gz && \
		${MODPY_BIN} mk_plists.py
@


1.43
log
@
Move the "inconsolata" package from texlive_texmf-full to
texlive_texmf-buildset, so we can build all the documentation
(vignettes, html, etc.) for math/R.

Much help and ok edd@@ (aka "the TeXmeister")
OK and help from sthen@@ too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2015/09/22 20:00:14 edd Exp $
d14 1
a14 1
MASTER_SITES0 =		http://spacehopper.org/mirrors/
@


1.42
log
@Custom plist target for generating tex live PLISTs with texscythe.

This makes it easier for other developers to move things between the texmf
subsets. For example when adding things to the buildset.

OK landry@@, Thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/05/18 21:37:58 edd Exp $
d25 4
d45 1
a45 1
			texlive_texmf-buildset-${V}:print/texlive/texmf,-buildset
@


1.41
log
@Update to TeX Live 2014.

OK sthen@@, dcoppa@@, giovanni@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/02/08 17:46:18 edd Exp $
d116 8
@


1.40
log
@FIx texlive interpreter paths.

OK ajacoutot@@, tested in a bulk by kili@@, thanks.
@
text
@a11 4
REVISION-buildset =	3
REVISION-main =		2
REVISION-full =		0
REVISION-context =	0
d14 1
a14 3
MASTER_SITES0 =		http://spacehopper.org/mirrors/ \
			http://theunixzoo.co.uk/distfiles/
MASTER_SITES0 =		http://theunixzoo.co.uk/distfiles/
d33 1
a33 1
MODULES +=		lang/ruby lang/python x11/tk perl
d40 2
a41 3
RUN_DEPENDS-main =	texlive_base-${V}:print/texlive/base
# Some fonts moved from PLIST-main to PLIST-buildset
RUN_DEPENDS-main +=	texlive_texmf-buildset->=2013p2:print/texlive/texmf,-buildset
d44 2
a45 1
			lang/python/${MODPY_VERSION}
d47 1
a47 1
			lang/ruby/${MODRUBY_REV}
d53 9
d79 3
d98 1
a98 1
	# 
d102 2
a103 4
	mv ${PREFIX}/share/texmf-dist/doc/man/man1/*.1 \
		${PREFIX}/man/man1/
	mv ${PREFIX}/share/texmf-dist/doc/man/man5/*.5 \
		${PREFIX}/man/man5/
@


1.39
log
@Fix a couple of edge cases in the TeX Live Update.

1) If the user updates only the buildset, ensure hashing occurs.
2) When I moved stuff from PLIST-main to PLIST-buildset, I should have
   updated a conflict marker and added a tighter RUN_DEPEND. This ensures
   that the two packages affected are updated together.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2014/01/20 21:34:44 edd Exp $
d12 4
a15 2
REVISION-buildset =	2
REVISION-main =		1
d38 2
a39 1
MODULES +=		lang/ruby lang/python
d58 23
@


1.38
log
@Remove TEXMFMAIN from our TeX configuration.

Now that the last of the ports which was installing in the deprecated
TEXMFMAIN have been fixed, the TEXMFMAIN texmf tree can dissappear. We do
this by falling in line with the upstream configurations.

OK naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2014/01/14 14:42:00 edd Exp $
d9 5
a13 4
# Also bump print/texlive/base if you change the contents of the buildset.
# This ensures correct hashing in an update situation.
REVISION-buildset =	1
REVISION-main =		0
d44 3
@


1.37
log
@Move courier and times tex packages into the texlive buildset.

This allows www/yaws to build using only the buildset texmf.

OK naddy@@, jasper@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/01/11 18:46:52 edd Exp $
d11 1
a11 1
REVISION-buildset =	0
@


1.36
log
@Update to TeX Live 2013.

This incudes the new buildset texmf -- a smaller texmf tree used for
BUILD_DEPENDS. See the package README for more info on this.

OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/04/16 05:21:19 bentley Exp $
d8 5
@


1.35
log
@De-conflict by @@comment'ing manpages which are present in other packages;
many were in pre-formatted form in other packages so they didn't actually
conflict previously even though the PLIST entry was identical - recently
a number of these are now installed as unformatted pages which has caused
a real conflict. No substantial diff between texmf's versions and the
other preformatted pages (minor whitespace changes due to groff/mandoc
differences, that's all).
@
text
@d7 1
d10 2
a11 2
#MASTER_SITES0 =	http://spacehopper.org/mirrors/ \
#			http://theunixzoo.co.uk/distfiles/
a15 1
REVISION-main =		1
d21 1
d28 1
a28 2
RUN_DEPENDS-full =	texlive_texmf-minimal-${V}:print/texlive/texmf,-main \
			texlive_base-${V}:print/texlive/base
a35 1
RUN_DEPENDS-full +=	lang/python/${MODPY_VERSION}
d37 4
a40 1
RUN_DEPENDS-context +=	texlive_base-${V}:print/texlive/base \
a41 1
RUN_DEPENDS-context +=	lang/ruby/${MODRUBY_REV}
a43 3
RUN_DEPENDS-docs +=	x11/p5-Tk

MULTI_PACKAGES =	-context -docs -full -main
d45 1
a45 32
# Files which are named *.[1-9] which are not manuals. This list
# is shorter than the list of files which *are* manuals scattered
# all over the texmf.
# The BEGIN/END ensure that each real entry has a space either side
# of it. Grep uses this to ensure we don't accidentally pick up
# a path which is a subset of one of the following:
NOT_A_MANUAL = BEGIN \
	${PREFIX}/share/texmf-dist/tex/latex/tabvar/tabvar.1 \
	${PREFIX}/share/texmf-dist/tex/latex/tabvar/tabvar.2 \
	${PREFIX}/share/texmf-dist/tex/latex/tabvar/tabvar.3 \
	${PREFIX}/share/texmf-dist/doc/metapost/base/source-manual/figs.1 \
	${PREFIX}/share/texmf-dist/doc/latex/feynmf/manpics.1 \
	${PREFIX}/share/texmf-dist/doc/pdftex/manual/samplepdf/samplepdf.1 \
	${PREFIX}/share/texmf-dist/doc/latex/tablor/Figures/tablor_Tab.1 \
	${PREFIX}/share/texmf-dist/doc/latex/tablor/Figures/tablor_Tab.2 \
	${PREFIX}/share/texmf-dist/doc/latex/tablor/Figures/tablor_Tab.3 \
	${PREFIX}/share/texmf-dist/doc/latex/tablor/Figures/tablor_Tab.4 \
	${PREFIX}/share/texmf-dist/doc/latex/tablor/Figures/tablor_Tab.5 \
	${PREFIX}/share/texmf-dist/doc/latex/tablor/Figures/tablor_Tab.6 \
	${PREFIX}/share/texmf-dist/doc/latex/tablor/Figures/tablor_Tab.7 \
	${PREFIX}/share/texmf-dist/doc/latex/tablor/Figures/tablor_Tab.8 \
	${PREFIX}/share/texmf-dist/doc/latex/tablor/Figures/tablor_Tab.9 \
	${PREFIX}/share/texmf-dist/doc/latex/flashmovie/flv-player-license/MPL-1.1 \
	${PREFIX}/share/texmf-dist/doc/fonts/wasy/wasyfont.2 \
	${PREFIX}/share/texmf-dist/doc/latex/acmconf/THIS-IS-VERSION-1.3 \
	${PREFIX}/share/texmf-dist/doc/latex/rcsinfo/README-1.9 \
	${PREFIX}/share/texmf-dist/doc/pdftex/Announcement-1.40.2 \
	${PREFIX}/share/texmf-dist/source/latex/koma-script/ChangeLog.2 \
	${PREFIX}/share/texmf-dist/doc/latex/feynmf/manpics.2 \
	${PREFIX}/share/texmf-dist/doc/latex/feynmf/manpics.3 \
	${PREFIX}/share/texmf-dist/doc/latex/webguide/expeg.6 \
	END
a47 3

	# The rest goes in share/texmf*
	mv ${WRKDIST}/texmf ${PREFIX}/share
a49 9
	# Collect all the manual pages that are *everywhere* for
	# some reason. I wanted to use file(1) to detect if files
	# are manual pages, but it gets it wrong (sigh).
	for i in `find  ${PREFIX} -type f | grep -e '.*\.[1-9]$$'`; do \
		if [ "`echo ${NOT_A_MANUAL} | grep -e \" $$i "`" = "" ]; then \
			mv $$i ${PREFIX}/man/man$${i#$${i%?}}/ ; \
		fi \
	done

d53 17
d71 1
a71 1
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/{share/texmf*,man/man*/*}
d75 2
a76 2
	${SUBST_CMD} ${PREFIX}/share/texmf/web2c/texmf.cnf
	${SUBST_CMD} ${PREFIX}/share/texmf/web2c/texmfcnf.lua
@


1.34
log
@Pull in an upstream bugfix that lets beamer work with verbatim again.

ok edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/03/20 19:13:50 jeremy Exp $
d15 1
a15 1
REVISION-main =		0
@


1.33
log
@Make ruby 1.9 the default ruby for non-gem/extconf ports,
for consistency with the gem/extconf ports.

Update non-gem/extconf ports that relied on the previous
default of ruby 1.8 to explicitly specify it.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/03/11 11:37:54 espie Exp $
d15 1
@


1.32
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/12/17 20:28:04 edd Exp $
d30 1
@


1.31
log
@Update to TeX Live 2012.

Many people have mailed me successful test reports and matthieu tells me he
has been running this for some time now.

Thanks to those that tested.

OK matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/08/07 15:15:09 edd Exp $
d22 1
a22 1
NO_REGRESS =		Yes
@


1.30
log
@Fix a broken shellout to which(1) in minted.sty and mention the soft
dependency upon py-pygments.

Breakage spotted by Luís Rosa. Thanks.

OK dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/03/17 21:25:37 kili Exp $
d9 3
a11 2
MASTER_SITES0 =		http://spacehopper.org/mirrors/ \
			http://theunixzoo.co.uk/distfiles/
d13 2
a14 1
			texmf-var-pregen-2011${EXTRACT_SUFX}:0
a20 5
REVISION-docs =		2
REVISION-full =		1
REVISION-main =		4
REVISION-context =	1

d38 1
d41 1
d45 33
a78 17
	chown -R ${SHAREOWN}:${SHAREGRP} ${WRKDIST}
	# manuals in the right place
	mv ${WRKDIST}/texmf/doc/man/man1/*.1 ${PREFIX}/man/man1/
	mv ${WRKDIST}/texmf/doc/man/man5/*.5 ${PREFIX}/man/man5/
	
	# they really are scattered all over the place
	for i in texmf-dist/doc/context/scripts/perl/texshow.1 \
		texmf-dist/doc/latex/changebar/chbar.1 \
		texmf-dist/doc/latex/eepic/fig2eepic/fig2epic.1 \
		texmf-dist/doc/latex/mathspic/mathspic.1 \
		texmf-dist/doc/latex/vxu/vxusymbol.1 \
		texmf-dist/doc/otherformats/jadetex/base/jadetex.1 \
		texmf-dist/doc/otherformats/jadetex/base/pdfjadetex.1 \
		texmf-dist/doc/otherformats/texsis/base/texsis.1 \
		texmf-dist/scripts/musixtex/doc/musixflx.1 \
		texmf-dist/scripts/musixtex/doc/musixtex.1; do \
		mv ${WRKDIST}/$$i ${PREFIX}/man/man1/; done
d83 11
a93 8
	# Some perl mods needed for updmap, but not included, silly
	${INSTALL} -d ${PREFIX}/libdata/perl5/site_perl/TeXLive/
	${INSTALL} ${FILESDIR}/TLUtils.pm \
		${PREFIX}/libdata/perl5/site_perl/TeXLive/
	${INSTALL} ${FILESDIR}/TLConfig.pm \
		${PREFIX}/libdata/perl5/site_perl/TeXLive/
# plug in my pregenerated map and formats
	chown -R ${SHAREOWN}:${SHAREGRP} ${WRKDIR}/texmf-var
d95 3
@


1.29
log
@Missed disdvi.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/03/17 20:50:14 kili Exp $
d20 1
a20 1
REVISION-full =		0
@


1.28
log
@texlive doesn't contain dvi2tty. @@comment related documentation
to avoid a conflict with print/dvi2tty.

noticed and ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/01/31 14:15:57 sthen Exp $
d19 1
a19 1
REVISION-docs =		1
d21 1
a21 1
REVISION-main =		3
@


1.27
log
@- pdfjam and texlive base conflict because texlive now includes the pdfjam
scripts. add @@conflict marker to texlive and remove/unlink pdfjam.

- add missing @@man annotation in texmf

conflict noted by naddy@@. ok ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/01/22 18:52:01 edd Exp $
d19 1
a19 1
REVISION-docs =		0
d21 1
a21 1
REVISION-main =		2
@


1.26
log
@make pkg_check happier with texlive, OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/01/10 18:04:31 edd Exp $
d21 2
a22 2
REVISION-main =		1
REVISION-context =	0
@


1.25
log
@* Fixes conTeXt found in TeX Live 2011.
* Separates conTeXt into it's own sub-package (texlive_texmf-context).
* Patches in correct paths for texmfcnf.lua
* Creates the luatex cache at install time of texlive_texmf-context.
* Updates documentation relating to the above.
* Use %D in all hashing @@exec/@@unexec.
* Fix a bogus LOCALBASE, which should have been a TRUEPREFIX.
* Small tidy ups.

OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/12/05 23:22:39 sthen Exp $
d22 1
@


1.24
log
@@@comment manpages also installed by t1utils to avoid conflicts.
Spotted by nigel@@ kili@@. Zap some stray whitespace while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/11/23 12:00:45 edd Exp $
d3 1
a3 2
COMMENT-main =		texlive texmf for laTeX/PdfTeX
COMMENT-full =		texlive texmf for XeTeX/ConTeXt and extra macros
d5 2
d17 5
a21 1
REVISION-main =		0
d36 3
a38 1
RUN_DEPENDS-full +=	lang/python/${MODPY_VERSION} \
d40 1
a40 2

RUN_DEPENDS-docs =	texlive_base-${V}:print/texlive/base \
d43 1
a43 3
MULTI_PACKAGES =	-main -full -docs

SUBST_VARS +=		LOCALBASE
d77 1
d80 1
@


1.23
log
@update to texlive-2011, OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/09/16 11:13:41 espie Exp $
d3 1
a3 1
COMMENT-main =		texlive texmf for laTeX/PdfTeX 
d13 4
a16 3
PKGNAME-main = 		texlive_texmf-minimal-${V}
PKGNAME-full = 		texlive_texmf-full-${V}
PKGNAME-docs =	 	texlive_texmf-docs-${V}
d34 1
a34 1
RUN_DEPENDS-docs = 	texlive_base-${V}:print/texlive/base \
d37 1
a37 1
MULTI_PACKAGES = 	-main -full -docs
@


1.22
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/07/26 18:04:57 edd Exp $
d11 1
a11 1
			texmf-var-pregen-2010.1${EXTRACT_SUFX}:0
a16 4
REVISION-main =		1
REVISION-full =		1
REVISION-docs =		0

d24 9
d41 19
d62 6
d69 1
a70 1
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/*
@


1.21
log
@prevent graphics/asymptote conflict. we do not build asymptote inside texlive, so there is no need to install the support files into the texmf. Instead we allow graphics/asymtote to do so itself.

OK naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/06/18 10:30:14 edd Exp $
d19 1
@


1.20
log
@add mirror from sthen@@ for texmf-pregen distfile

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/06/13 16:40:52 edd Exp $
d18 1
a18 1
REVISION-full =		0
@


1.19
log
@Fix broken font maps, as reported by Richard Bonichon and Laurence Tratt.
Emulate texlinks, so that those pesky symlinks are now in the packing list.
Minor plist tidy-ups that help fix the upgrade (see recent quirks commit).

OK kili@@, espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/03/09 14:43:59 edd Exp $
d8 2
a9 1
MASTER_SITES0 =		http://theunixzoo.co.uk/distfiles/
@


1.18
log
@fix texmf-local path.
fix bogus dependency path - notced by Markus Lude, cheers.

OK Landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/03/08 00:09:42 edd Exp $
d10 1
a10 1
			texmf-var-pregen-2010${EXTRACT_SUFX}:0
d16 2
a17 1
REVISION-main =		0
@


1.17
log
@Update to TeX Live 2010.

This year we pre-generate format and maps as requested by kili.

Started adding test cases in the tests/ dir.

Upgrades from 2009 will cause a harmless warning regarding texlinks. Espie is
aware of this, it was not easily fixable.

Uninstalls of texlive 2010 which were previously upgraded from 2009 will make
lots of noise regarding non-empty directories which can not be deleted. This
is due to unregistered package directories in the old texlive 2009 pacakage and
has been fixed in the 2010 package (rblatter script was modified to register
*all* parent dirs in PLISTs).

Installs/uninstalls of texlive 2010 on a fresh system (which has never
seen texlive 2009) are squeaky clean.

This has been in use for a number of months on my work machine, so should be
pretty stable, but I am sure someone will find some obscure bugs. These can be
fixed in tree.

OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/11/20 09:48:40 espie Exp $
d15 2
@


1.16
log
@comment files that conflict with asymptote port. we don't build asymptote as a
part of texlive anyway, so these files are not needed.

Reported by and OK from naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/20 09:48:40 espie Exp $
d8 3
a15 4
REVISION-main =		2
REVISION-full =		4
REVISION-docs =		2

d23 2
a24 1
RUN_DEPENDS-docs = 	texlive_base-${V}:print/texlive/base
d33 2
a37 2
	mv ${PREFIX}/share/texmf/web2c/updmap.cfg \
		${PREFIX}/share/texmf/web2c/updmap.cfg-dist
a38 2
	mv  ${PREFIX}/share/texmf/web2c/fmtutil.cnf \
		${PREFIX}/share/texmf/web2c/fmtutil.cnf-full
@


1.15
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/08/20 11:06:29 edd Exp $
d14 1
a14 1
REVISION-full =		3
@


1.14
log
@sort texlive texmf packing lists at espie's request.
OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/07/18 09:05:32 espie Exp $
d21 4
a24 4
BUILD_DEPENDS =		::archivers/xz
RUN_DEPENDS-full =	:texlive_texmf-minimal-${V}:print/texlive/texmf,-main \
			:texlive_base-${V}:print/texlive/base
RUN_DEPENDS-docs = 	:texlive_base-${V}:print/texlive/base
@


1.13
log
@use @@unexec-delete where applicable (discussed with edd@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/07/17 16:37:33 espie Exp $
d13 3
a15 3
REVISION-main =		1
REVISION-full =		2
REVISION-docs =		1
@


1.12
log
@REVISION, new WANTLIB. No changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/04/12 12:49:24 edd Exp $
d14 2
a15 2
REVISION-full =		1
REVISION-docs =		0
@


1.11
log
@fix texmf-local indexing. OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/02/17 10:19:08 jsg Exp $
d9 7
a15 3
PKGNAME-main = 		texlive_texmf-minimal-${V}p1
PKGNAME-full = 		texlive_texmf-full-${V}p1
PKGNAME-docs =	 	texlive_texmf-docs-${V}p0
@


1.10
log
@Bring in pdfjadetex.ini from TeX Live svn revision 16978
by Karl Berry, which unbreaks jadetex with TeX Live 2009.

ok edd@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/12/15 18:01:57 espie Exp $
d9 1
a9 1
PKGNAME-main = 		texlive_texmf-minimal-${V}p0
@


1.9
log
@upgrade path from teTeX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/12/12 17:48:34 edd Exp $
d10 1
a10 1
PKGNAME-full = 		texlive_texmf-full-${V}p0
@


1.8
log
@Update to TeX Live 2009.

Requires newest pacakge tools for upgrading from 2008.

OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/04/23 00:18:18 sthen Exp $
d9 3
a11 3
PKGNAME-main = 		texlive_texmf-minimal-${V}
PKGNAME-full = 		texlive_texmf-full-${V}
PKGNAME-docs =	 	texlive_texmf-docs-${V}
@


1.7
log
@switch dependencies from lzma to xz
@
text
@a6 1
DIST_V = 		20080822
a7 1
PKGNAME =		texlive_texmf-${V}
d9 3
a11 3
PKGNAME-main = 		texlive_texmf-minimal-${V}p1
PKGNAME-full = 		texlive_texmf-full-${V}p2
PKGNAME-docs =	 	texlive_texmf-docs-${V}p1
a12 1
EXTRACT_SUFX = 		.tar.lzma
d24 1
a24 4
# Could do with bsd.port.mk understanding lzma
do-extract:
	cd ${WRKDIR} && \
	xz -dc ${FULLDISTDIR}/${DISTNAME}${EXTRACT_SUFX} | ${TAR} xf -
a28 1
	mv ${WRKDIST}/texmf-doc ${PREFIX}/share
d34 3
a36 2
	${INSTALL_DATA} ${FILESDIR}/fmtutil.cnf-full \
		${PREFIX}/share/texmf/web2c   
@


1.6
log
@- Fix USE_SYSTRACE=Yes builds.

- LOCALBASE -> TRUEPREFIX

- Add a separate script (tl-link-config) to decide which config to
symlink. Fixes the situation where -base gets bumped and so the minimal
fmtutil.cnf gets incorrectly linked when really the -full config is
needed.

from maintainer Edd Barrett.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/02/22 19:05:17 kili Exp $
d20 1
a20 1
BUILD_DEPENDS =		::archivers/lzma
d30 1
a30 1
	lzma -dc ${FULLDISTDIR}/${DISTNAME}${EXTRACT_SUFX} | ${TAR} xf -
@


1.5
log
@
Add @@pkgpath and @@conflict markers to let pkg_add -u correctly
update the texlive packages. Bump all pkgnames.

"looks good to me" espie@@, "please commit" naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/11/30 18:45:27 steven Exp $
d12 1
a12 1
PKGNAME-full = 		texlive_texmf-full-${V}p1
a27 1
# Also annoyingly loads of .orig files confuse update-patches
d41 2
@


1.4
log
@reorganize packaging: remove -tetex package, this is now all included in
the main -minimal texmf package. this now allows using latex without the
need to install extra packages.

from maintainer Edd Barrett, requested by sturm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/10/12 22:00:36 steven Exp $
d11 3
a13 3
PKGNAME-main = 		texlive_texmf-minimal-${V}p0
PKGNAME-full = 		texlive_texmf-full-${V}p0
PKGNAME-docs =	 	texlive_texmf-docs-${V}p0
@


1.3
log
@move some stuff between subpackages, sort plists
(no pkg bumps since it's not hooked to builds yet)

from maintainer Edd Barrett
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/10/08 05:22:45 steven Exp $
d3 1
a3 2
COMMENT-main =		texlive texmf for plain TeX only
COMMENT-tetex =		texlive texmf for laTeX/PdfTeX 
d11 3
a13 4
PKGNAME-main = 		texlive_texmf-minimal-${V}
PKGNAME-tetex = 	texlive_texmf-tetex-${V}
PKGNAME-full = 		texlive_texmf-full-${V}
PKGNAME-docs =	 	texlive_texmf-docs-${V}
d21 2
a22 2
RUN_DEPENDS-tetex = 	:texlive_base-${V}:print/texlive/base
RUN_DEPENDS-full =	:texlive_texmf-tetex-${V}:print/texlive/texmf,-tetex
d25 1
a25 1
MULTI_PACKAGES = 	-main -tetex -full -docs
@


1.2
log
@fix pkgnames in rundepends
not bumping since we're not building it yet
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2008/10/07 20:54:35 steven Exp $
d38 1
@


1.1
log
@import texlive 2008, texmf part
reorganized port uses subpackages now instead of separate ports
easier to work on in tree; not linked to builds yet.

from maintainer Edd Barrett
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/01/26 13:07:23 steven Exp $
d23 1
a23 1
RUN_DEPENDS-tetex = 	:texlive_texmf-base-${V}:print/texlive/base
d25 1
a25 1
RUN_DEPENDS-docs = 	:texlive_texmf-base-${V}:print/texlive/base
@

