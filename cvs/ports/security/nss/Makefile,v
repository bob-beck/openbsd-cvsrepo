head	1.80;
access;
symbols
	OPENBSD_6_1:1.72.0.2
	OPENBSD_6_1_BASE:1.72
	OPENBSD_6_0:1.63.0.2
	OPENBSD_6_0_BASE:1.63
	OPENBSD_5_9:1.59.0.2
	OPENBSD_5_9_BASE:1.59
	OPENBSD_5_8:1.54.0.4
	OPENBSD_5_8_BASE:1.54
	OPENBSD_5_7:1.48.0.2
	OPENBSD_5_7_BASE:1.48
	OPENBSD_5_6:1.44.0.2
	OPENBSD_5_6_BASE:1.44
	OPENBSD_5_5:1.41.0.2
	OPENBSD_5_5_BASE:1.41
	OPENBSD_5_4:1.38.0.2
	OPENBSD_5_4_BASE:1.38
	OPENBSD_5_3:1.33.0.2
	OPENBSD_5_3_BASE:1.33
	OPENBSD_5_2:1.29.0.2
	OPENBSD_5_2_BASE:1.29
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.2
	OPENBSD_5_0:1.21.0.4
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.21.0.2
	OPENBSD_4_9_BASE:1.21
	OPENBSD_4_8:1.18.0.2
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.16.0.2
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.11.0.2
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.10.0.4
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.2
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	kurt_nss:1.1.1.1
	kurt:1.1.1;
locks; strict;
comment	@# @;


1.80
date	2017.09.27.06.45.19;	author landry;	state Exp;
branches;
next	1.79;
commitid	kDKAp3wcmNjNJgAL;

1.79
date	2017.09.12.19.01.16;	author landry;	state Exp;
branches;
next	1.78;
commitid	DQJ9lqp2ZBzG0n4X;

1.78
date	2017.08.07.18.48.22;	author landry;	state Exp;
branches;
next	1.77;
commitid	EPxufF0D826d8DeR;

1.77
date	2017.06.19.04.48.49;	author landry;	state Exp;
branches;
next	1.76;
commitid	jZqaNz9vPPhumaRp;

1.76
date	2017.05.30.18.57.01;	author ajacoutot;	state Exp;
branches;
next	1.75;
commitid	EDjCIPQ45eWdNFm8;

1.75
date	2017.04.22.11.57.39;	author landry;	state Exp;
branches;
next	1.74;
commitid	c4VS31VlBGl6W8iK;

1.74
date	2017.04.07.11.55.43;	author landry;	state Exp;
branches;
next	1.73;
commitid	1lYwRISu2R1A9625;

1.73
date	2017.04.06.11.42.21;	author landry;	state Exp;
branches;
next	1.72;
commitid	QEOd4aMp1aGM8GB9;

1.72
date	2017.03.12.15.09.43;	author landry;	state Exp;
branches;
next	1.71;
commitid	PGhH12YSnfVuomFE;

1.71
date	2017.02.20.19.33.13;	author landry;	state Exp;
branches;
next	1.70;
commitid	dAuKrMm3C4eYed8t;

1.70
date	2017.01.05.20.41.43;	author landry;	state Exp;
branches;
next	1.69;
commitid	YNCMauLCdh7Mxtgn;

1.69
date	2017.01.04.12.17.48;	author landry;	state Exp;
branches;
next	1.68;
commitid	io1AA17gwQsKknvU;

1.68
date	2016.12.15.10.15.53;	author landry;	state Exp;
branches;
next	1.67;
commitid	7DwTZvMtHcTiFGy7;

1.67
date	2016.10.06.12.10.22;	author landry;	state Exp;
branches;
next	1.66;
commitid	B59cCEzPF3NvaiDL;

1.66
date	2016.09.23.09.16.57;	author sthen;	state Exp;
branches;
next	1.65;
commitid	XLnI6AbHAmyVU5mO;

1.65
date	2016.09.04.08.55.13;	author landry;	state Exp;
branches;
next	1.64;
commitid	HLU4BCAFcA9CAC7m;

1.64
date	2016.08.05.06.56.58;	author landry;	state Exp;
branches;
next	1.63;
commitid	P8zgw7VnDHp655kg;

1.63
date	2016.06.14.14.48.51;	author landry;	state Exp;
branches;
next	1.62;
commitid	o58xeFtQKNpog0FA;

1.62
date	2016.03.16.16.46.33;	author naddy;	state Exp;
branches;
next	1.61;
commitid	4Ekn8nPgVVHWLTwe;

1.61
date	2016.03.10.19.29.25;	author naddy;	state Exp;
branches;
next	1.60;
commitid	YT9lDPJATGOUfwSO;

1.60
date	2016.03.04.16.29.24;	author landry;	state Exp;
branches;
next	1.59;
commitid	sTPAUP7WKQu0cL9Y;

1.59
date	2016.02.22.19.56.50;	author landry;	state Exp;
branches;
next	1.58;
commitid	3otaMLf3quSWvipq;

1.58
date	2016.01.06.20.08.19;	author landry;	state Exp;
branches;
next	1.57;
commitid	AFau2pGBZdBSXqLk;

1.57
date	2016.01.06.18.41.42;	author ajacoutot;	state Exp;
branches;
next	1.56;
commitid	nhclumLwABQoXW2D;

1.56
date	2015.11.23.11.32.12;	author landry;	state Exp;
branches;
next	1.55;
commitid	0Mm7c0lx9CLx686V;

1.55
date	2015.10.30.07.59.39;	author landry;	state Exp;
branches;
next	1.54;
commitid	KtdcVdPhjppdzhT5;

1.54
date	2015.06.26.07.42.27;	author landry;	state Exp;
branches
	1.54.4.1;
next	1.53;
commitid	KQee09Kmh84o1TDv;

1.53
date	2015.05.30.21.33.59;	author landry;	state Exp;
branches;
next	1.52;
commitid	bgkzqTMf1qFI0o8a;

1.52
date	2015.05.08.09.08.44;	author espie;	state Exp;
branches;
next	1.51;
commitid	8WaxsMNN6opOzn9t;

1.51
date	2015.04.27.19.15.10;	author landry;	state Exp;
branches;
next	1.50;
commitid	sdJM9cli05GAJPKp;

1.50
date	2015.04.04.08.57.41;	author landry;	state Exp;
branches;
next	1.49;
commitid	isjLvT6lpVj8bhTY;

1.49
date	2015.03.16.19.15.44;	author landry;	state Exp;
branches;
next	1.48;
commitid	xZfVCycxpO33yvqy;

1.48
date	2014.12.06.08.33.29;	author landry;	state Exp;
branches;
next	1.47;
commitid	mpGJlBhfJofwk7eT;

1.47
date	2014.10.13.09.39.34;	author landry;	state Exp;
branches;
next	1.46;
commitid	Gwt03EDlWlkTEWl6;

1.46
date	2014.09.29.08.52.30;	author landry;	state Exp;
branches;
next	1.45;
commitid	kLkGuCbcpK58dEcj;

1.45
date	2014.09.24.18.47.08;	author landry;	state Exp;
branches;
next	1.44;
commitid	gO4Nf3klrj6FO3ci;

1.44
date	2014.07.08.20.07.53;	author landry;	state Exp;
branches
	1.44.2.1;
next	1.43;
commitid	sTvuQRKpqtVjj4w9;

1.43
date	2014.04.29.12.01.54;	author landry;	state Exp;
branches;
next	1.42;

1.42
date	2014.04.16.09.07.38;	author landry;	state Exp;
branches;
next	1.41;

1.41
date	2014.01.09.20.09.44;	author landry;	state Exp;
branches
	1.41.2.1;
next	1.40;

1.40
date	2013.12.10.11.17.05;	author landry;	state Exp;
branches;
next	1.39;

1.39
date	2013.11.13.10.02.47;	author landry;	state Exp;
branches;
next	1.38;

1.38
date	2013.07.04.08.36.55;	author landry;	state Exp;
branches
	1.38.2.1;
next	1.37;

1.37
date	2013.06.23.18.40.01;	author landry;	state Exp;
branches;
next	1.36;

1.36
date	2013.03.21.12.49.42;	author landry;	state Exp;
branches;
next	1.35;

1.35
date	2013.03.18.20.38.13;	author landry;	state Exp;
branches;
next	1.34;

1.34
date	2013.03.11.11.41.26;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2012.12.31.08.41.27;	author landry;	state Exp;
branches;
next	1.32;

1.32
date	2012.12.29.20.03.17;	author landry;	state Exp;
branches;
next	1.31;

1.31
date	2012.11.12.20.43.09;	author landry;	state Exp;
branches;
next	1.30;

1.30
date	2012.09.17.20.01.22;	author landry;	state Exp;
branches;
next	1.29;

1.29
date	2012.04.23.17.15.18;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2012.03.08.12.13.01;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2012.02.22.20.00.55;	author landry;	state Exp;
branches;
next	1.26;

1.26
date	2012.02.20.09.18.05;	author landry;	state Exp;
branches;
next	1.25;

1.25
date	2011.11.18.12.32.37;	author nigel;	state Exp;
branches;
next	1.24;

1.24
date	2011.09.16.11.41.39;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2011.09.06.19.39.34;	author landry;	state Exp;
branches;
next	1.22;

1.22
date	2011.08.23.20.07.50;	author landry;	state Exp;
branches;
next	1.21;

1.21
date	2011.01.15.16.59.37;	author landry;	state Exp;
branches;
next	1.20;

1.20
date	2010.11.20.17.22.44;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.22.19.14.56;	author landry;	state Exp;
branches;
next	1.18;

1.18
date	2010.06.07.17.40.28;	author landry;	state Exp;
branches;
next	1.17;

1.17
date	2010.04.03.09.21.00;	author landry;	state Exp;
branches;
next	1.16;

1.16
date	2009.11.14.16.31.06;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.09.10.21.38.26;	author martynas;	state Exp;
branches;
next	1.14;

1.14
date	2009.08.08.12.57.17;	author martynas;	state Exp;
branches;
next	1.13;

1.13
date	2009.08.04.15.13.02;	author martynas;	state Exp;
branches;
next	1.12;

1.12
date	2009.08.04.14.00.21;	author martynas;	state Exp;
branches;
next	1.11;

1.11
date	2009.03.23.07.50.47;	author jakemsr;	state Exp;
branches;
next	1.10;

1.10
date	2008.07.25.00.46.59;	author martynas;	state Exp;
branches;
next	1.9;

1.9
date	2008.02.12.23.26.31;	author martynas;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.15.23.29.59;	author merdely;	state Exp;
branches;
next	1.7;

1.7
date	2007.08.01.21.16.10;	author kurt;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.22.13.37.58;	author kurt;	state Exp;
branches;
next	1.5;

1.5
date	2007.03.26.20.45.44;	author martynas;	state Exp;
branches;
next	1.4;

1.4
date	2007.02.13.17.11.05;	author naddy;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2007.01.10.19.26.28;	author kurt;	state Exp;
branches;
next	1.2;

1.2
date	2006.12.08.19.21.30;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2006.12.04.17.19.54;	author kurt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.12.04.17.19.54;	author kurt;	state Exp;
branches;
next	;

1.4.2.1
date	2007.07.04.14.38.24;	author sturm;	state Exp;
branches;
next	;

1.38.2.1
date	2013.11.13.17.34.55;	author jasper;	state Exp;
branches;
next	1.38.2.2;

1.38.2.2
date	2013.12.15.20.18.07;	author jasper;	state Exp;
branches;
next	;

1.41.2.1
date	2014.09.30.13.59.23;	author jasper;	state Exp;
branches;
next	;
commitid	Hxt7gPx2BK9v2Ftf;

1.44.2.1
date	2014.09.30.14.01.09;	author jasper;	state Exp;
branches;
next	1.44.2.2;
commitid	xVPaFwEm3iaLymwt;

1.44.2.2
date	2014.12.16.13.35.41;	author jasper;	state Exp;
branches;
next	;
commitid	7D7g4nVUWsWu6Ynm;

1.54.4.1
date	2016.03.01.08.20.25;	author jasper;	state Exp;
branches;
next	;
commitid	jJ9Ka80HDAW03taV;


desc
@@


1.80
log
@Update to nss 3.33.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.33_release_notes

Will be required by gecko 57 branch, so might make things easier for the
upcoming -stable branch.
@
text
@# $OpenBSD: Makefile,v 1.79 2017/09/12 19:01:16 landry Exp $

COMMENT=		libraries to support development of security-enabled apps

VERSION=		3.33
DISTNAME=		nss-${VERSION}

SO_VERSION=		49.1
.for _lib in freebl3 nss3 nssckbi nssdbm3 nssutil3 smime3 softokn3 ssl3
SHARED_LIBS+=		${_lib} ${SO_VERSION}
.endfor
CATEGORIES=		security

MAINTAINER=		Landry Breuil <landry@@openbsd.org>
HOMEPAGE=		https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS

# mozilla public license
PERMIT_PACKAGE_CDROM=	Yes

#for regular releases
MASTER_SITES=		https://ftp.mozilla.org/pub/mozilla.org/security/nss/releases/${DISTNAME:U:C/[-.]/_/g}_RTM/src/

LIB_DEPENDS=		databases/sqlite3 \
			devel/nspr>=4.12
WANTLIB += c pthread z nspr4 plc4 plds4 sqlite3>=22

MAKE_ENV=		BUILD_OPT=1 \
			LOCALBASE="${LOCALBASE}" \
			NSS_ENABLE_ECC=1 \
			NSS_ENABLE_TLS_1_3=1 \
			NSS_DISABLE_GTESTS=1 \
			NSS_USE_SYSTEM_SQLITE=1 \
			SO_VERSION="${SO_VERSION}" \
			XCFLAGS="-I${LOCALBASE}/include ${CFLAGS}" \
			NSPR_INCLUDE_DIR="${LOCALBASE}/include/nspr" \
			NSPR_LIB_DIR="${LOCALBASE}/lib"

USE_GMAKE=		Yes

WRKSRC=			${WRKDIST}/nss
NSSDIST=		${WRKDIST}/dist
NSSOBJ=			${NSSDIST}/OpenBSD`uname -r`${OBJ64}_OPT.OBJ

ALL_TARGET=		nss_build_all
SUBST_VARS +=		VERSION

# Don't forget to sync these with http://wiki.mozilla.org/NSS:ToolsToShip
MAIN_TOOLS=		certutil modutil pk12util signtool ssltap crlutil \
			cmsutil signver

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/include/nss
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pkgconfig
	${INSTALL_DATA} ${NSSDIST}/public/nss/*.{h,api} ${PREFIX}/include/nss/
	${INSTALL_DATA} ${NSSOBJ}/lib/*.so.${SO_VERSION} ${PREFIX}/lib/
	${INSTALL_DATA} ${NSSOBJ}/lib/{libcrmf.a,*.chk} ${PREFIX}/lib/
	cd ${NSSOBJ}/bin && ${INSTALL_PROGRAM} ${MAIN_TOOLS} ${PREFIX}/bin/
	${SUBST_CMD} -m 0644 -c ${FILESDIR}/nss.pc \
		${PREFIX}/lib/pkgconfig/nss.pc \
		${FILESDIR}/nss-config ${PREFIX}/bin/nss-config
	chown ${BINOWN}:${BINGRP} ${PREFIX}/{bin/nss-config,lib/pkgconfig/nss.pc}
	chmod +x ${PREFIX}/bin/nss-config

do-test:
	cd ${WRKSRC}/tests && ${SETENV} ${MAKE_ENV} \
		PATH="${NSSOBJ}/bin:${PATH}" \
		LD_LIBRARY_PATH="${NSSOBJ}/lib" /bin/sh ./all.sh

.include <bsd.port.arch.mk>

.if ${PROPERTIES:Mlp64}
MAKE_ENV+=		USE_64=1
OBJ64=			_64
.endif

.include <bsd.port.mk>
@


1.79
log
@(potentially security) update nss to 3.32.1 for bug #1377618
(sec-restricted) - required by fx 56.0b11.

Relnotes might appear at https://developer.mozilla.org/fr/docs/Mozilla/Projects/NSS/NSS_3.32.1_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2017/08/07 18:48:22 landry Exp $
d5 1
a5 1
VERSION=		3.32.1
d8 1
a8 1
SO_VERSION=		49.0
@


1.78
log
@Update to nss 3.32, will be required by upcoming gecko 56 releases.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.32_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2017/06/19 04:48:49 landry Exp $
d5 1
a5 1
VERSION=		3.32
@


1.77
log
@Update to nss 3.31, required by gecko 55.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.31_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2017/05/30 18:57:01 ajacoutot Exp $
d5 1
a5 1
VERSION=		3.31
d8 1
a8 1
SO_VERSION=		48.0
@


1.76
log
@Define HMAC_Update to NSS_HMAC_Update to prevent clashing symbol with libcrypto.

input from landry@@ and miod@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2017/04/22 11:57:39 landry Exp $
d5 1
a5 1
VERSION=		3.30.2
a6 1
REVISION=		0
d8 1
a8 1
SO_VERSION=		47.0
d21 1
a21 1
MASTER_SITES=		http://ftp.mozilla.org/pub/mozilla.org/security/nss/releases/${DISTNAME:U:C/[-.]/_/g}_RTM/src/
@


1.75
log
@Update to nss 3.30.2, 3.30.1 is required by firefox 54.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.30_release_notes
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.30.1_release_notes
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.30.2_release_notes
Bump shlib major for many symbols addition/removal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2017/04/07 11:55:43 landry Exp $
d7 1
@


1.74
log
@Update to 3.29.5: '3.29.4 has been deleted, because it identified itself
with an incorrect version number'

prodded by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2017/04/06 11:42:21 landry Exp $
d5 1
a5 1
VERSION=		3.29.5
d8 1
a8 1
SO_VERSION=		46.0
@


1.73
log
@Bugfix update to nss 3.29.4.

https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.29.4_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2017/03/12 15:09:43 landry Exp $
d5 1
a5 1
VERSION=		3.29.4
@


1.72
log
@Bugfix update to NSS 3.29.3.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.29.2_release_notes
and
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.29.3_release_notes

Fixes mostly #1342358 and #1340841
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2017/02/20 19:33:13 landry Exp $
d5 1
a5 1
VERSION=		3.29.3
@


1.71
log
@Update to nss 3.29.1.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.29_release_notes
and
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.29.1_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2017/01/05 20:41:43 landry Exp $
d5 1
a5 1
VERSION=		3.29.1
@


1.70
log
@Update to nss 3.28.1, because perfection is never attained.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.28.1_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2017/01/04 12:17:48 landry Exp $
d5 1
a5 1
VERSION=		3.28.1
d8 1
a8 1
SO_VERSION=		45.0
@


1.69
log
@Update to nss 3.28, will be required by upcoming firefox 51.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.28_release_notes

Enable TLS 1.3 (draft) support per
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.28_release_notes#Request_to_test_and_prepare_for_TLS_1.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2016/12/15 10:15:53 landry Exp $
d5 1
a5 1
VERSION=		3.28
@


1.68
log
@Update to nss 3.27.2.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.27.2_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2016/10/06 12:10:22 landry Exp $
d5 1
a5 1
VERSION=		3.27.2
d8 1
a8 1
SO_VERSION=		44.0
d30 1
@


1.67
log
@Update to nss 3.27, required by gecko 50.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.27_release_notes

Note that a bunch of CA's were removed, but not WoSign, because it owns
StartSSL/StartCOM.. see
https://docs.google.com/document/d/1C6BlmbeQfn4a9zydVi2UvjBGv6szuSB4sMYUcVrR8vQ/preview
and https://wiki.mozilla.org/CA:WoSign_Issues for details. Anyway, we
know the CA model is broken, right ?

Bump major, functions added/removed...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2016/09/23 09:16:57 sthen Exp $
d5 1
a5 1
VERSION=		3.27
@


1.66
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2016/09/04 08:55:13 landry Exp $
d5 1
a5 2
VERSION=		3.26
REVISION=		0
d8 1
a8 1
SO_VERSION=		43.0
@


1.65
log
@Update to nss 3.26.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.26_release_notes,
notables changes:

- the letsencrypt CA (ISRG Root X1) root certificate was added
- NPN is disabled and ALPN is enabled by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2016/08/05 06:56:58 landry Exp $
d6 1
d24 2
a25 1
LIB_DEPENDS=		devel/nspr>=4.12
@


1.64
log
@Update to NSS 3.25, will be required by firefox 49.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.25_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2016/06/14 14:48:51 landry Exp $
d5 1
a5 1
VERSION=		3.25
d8 1
a8 1
SO_VERSION=		42.0
@


1.63
log
@Update to nss 3.24, requirement of firefox 48.

- Remove patch-nss_lib_util_verref_h, merged upstream (#1226179)
- Remove useless patch-nss_coreconf_UNIX_mk, our -O2 takes precedence
- Remove chunk of patch-nss_coreconf_OpenBSD_mk, was merged upstream in
  #1250891. While here remove the addition of -Wl,Bsymbolic to MKSHLIB
which was here since forever for no justified reason.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2016/03/16 16:46:33 naddy Exp $
d5 1
a5 1
VERSION=		3.24
d8 1
a8 1
SO_VERSION=		41.0
@


1.62
log
@remove SHARED_ONLY from ports that don't use any MODULES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2016/03/10 19:29:25 naddy Exp $
d5 1
a5 1
VERSION=		3.23
d8 1
a8 1
SO_VERSION=		40.0
@


1.61
log
@replace after-bsd.port.mk hack with PROPERTIES check
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.60 2016/03/04 16:29:24 landry Exp $

SHARED_ONLY=		Yes
@


1.60
log
@Update to nss 3.23.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.23_release_notes
for details.

Remove c++-comments patch, now that we remove -ansi from the build flags it
is allowed in C99. (see https://bugzilla.mozilla.org/show_bug.cgi?id=1250891)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2016/02/22 19:56:50 landry Exp $
d69 1
a69 1
.include <bsd.port.mk>
d71 1
a71 2
.for _m in ${MACHINE_ARCH}
. if !empty(LP64_ARCHS:M${_m})
d74 3
a76 2
. endif
.endfor
@


1.59
log
@Security update to nss 3.21.1.

No CVE or MFSA (yet?), bug #1245528 (details undisclosed), commit
https://hg.mozilla.org/projects/nss/rev/b9a31471759d says "fix bugs in
ASN.1 decoding" adding overflow checks.

discussed with naddy@@ & sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2016/01/06 20:08:19 landry Exp $
d7 1
a7 1
VERSION=		3.21.1
d10 1
a10 1
SO_VERSION=		39.0
d25 1
a25 1
LIB_DEPENDS=		devel/nspr>=4.10
@


1.58
log
@well, take maintainership since its somewhere in the moz stack...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2016/01/06 18:41:42 ajacoutot Exp $
d7 1
a7 1
VERSION=		3.21
a8 1
REVISION=		1
@


1.57
log
@Remove martynas@@ from here as well.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2015/11/23 11:32:12 landry Exp $
d9 1
a9 1
REVISION=		0
d17 1
@


1.56
log
@Update to nss 3.21.

Tested in a bulk and ok ajacoutot@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2015/10/30 07:59:39 landry Exp $
d8 2
a9 1
DISTNAME =		nss-${VERSION}
a17 2

MAINTAINER=		Martynas Venckus <martynas@@openbsd.org>
@


1.55
log
@Update to nss 3.20.1.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.20_release_notes
for 3.20 relnotes.

nss & nspr were tested in a bulk build by ajacoutot@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2015/06/26 07:42:27 landry Exp $
d7 1
a7 1
VERSION=		3.20.1
d10 1
a10 1
SO_VERSION=		38.0
d32 1
@


1.54
log
@Update to nss 3.19.2 - will be required by upcoming fx 39, now at rc4.

Fixes a regression introduced in 3.19.1, see
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.19.2_release_notes
and https://bugzilla.mozilla.org/show_bug.cgi?id=1172128
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2015/05/30 21:33:59 landry Exp $
d7 1
a7 1
VERSION=		3.19.2
d10 1
a10 1
SO_VERSION=		37.1
@


1.54.4.1
log
@- security update to nss-3.19.2.3, rolling in a whole bunch of security fixes

as discussed with landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2015/06/26 07:42:27 landry Exp $
d7 1
a7 1
VERSION=		3.19.2.3
@


1.53
log
@Update to nss 3.19.1, will be required by firefox 39 anyway. Bump minor.

Fixes for logjam attack, among other things, see
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.19.1_release_notes
and https://bugzilla.mozilla.org/show_bug.cgi?id=1138554

Commited over urndis0 in a hytte in Å, Lofoten :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2015/05/08 09:08:44 espie Exp $
d7 1
a7 1
VERSION=		3.19.1
@


1.52
log
@don't depend on modes in the ports tree being what we want installed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2015/04/27 19:15:10 landry Exp $
d7 1
a7 1
VERSION=		3.18.1
d10 1
a10 1
SO_VERSION=		37.0
@


1.51
log
@Bugfix update to nss 3.18.1, required by upcoming firefox 38.

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.18.1_release_notes
for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/04/04 08:57:41 landry Exp $
d58 2
a59 1
	${SUBST_CMD} -c ${FILESDIR}/nss.pc ${PREFIX}/lib/pkgconfig/nss.pc \
@


1.50
log
@Update to nss 3.18, required by firefox 38.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.18_release_notes
for details. Bump major since CERT_FindCertURLExtension was removed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2015/03/16 19:15:44 landry Exp $
d7 1
a7 1
VERSION=		3.18
@


1.49
log
@Bugfix update to nss 3.17.4.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.17.4_release_notes
for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2014/12/06 08:33:29 landry Exp $
d7 1
a7 1
VERSION=		3.17.4
d10 1
a10 1
SO_VERSION=		36.0
@


1.48
log
@bugfix update to nss 3.17.3

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.17.3_release_notes
Passes all regress tests on amd64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/10/13 09:39:34 landry Exp $
d7 1
a7 1
VERSION=		3.17.3
@


1.47
log
@Update to nss 3.17.2, will be required by gecko 35 anyway (see #1075686)..

See
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.17_release_notes
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.17.1_release_notes
https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.17.2_release_notes
For the changes (note that 3.16.2.1 had the same fixes as 3.17.1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/09/29 08:52:30 landry Exp $
d7 1
a7 1
VERSION=		3.17.2
@


1.46
log
@shlib Minor bump + PLIST update, i actually missed that pkcs1sig.h was
supposed to be installed.. noted by and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/09/24 18:47:08 landry Exp $
d7 1
a7 1
VERSION=		3.16.2.1
a8 1
REVISION=		0
d10 1
a10 1
SO_VERSION=		35.1
@


1.45
log
@Security update to NSS 3.16.2.1.

Fixes bug #1064636 / CVE-2014-1568: RSA signature malleability in NSS
(sorry, that's all the information i could find)

We'll update to 3.17.1 later..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/07/08 20:07:53 landry Exp $
d9 1
d11 1
a11 1
SO_VERSION=		35.0
@


1.44
log
@Bugfix update to 3.16.2, required by upcoming gecko 31 releases.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.16.2_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2014/04/29 12:01:54 landry Exp $
d7 1
a7 1
VERSION=		3.16.2
@


1.44.2.1
log
@Security update to 3.16.2.1 addressing CVE-2014-1568

as discussed with sthen@@ and landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/07/08 20:07:53 landry Exp $
d7 1
a7 1
VERSION=		3.16.2.1
d10 1
a10 1
SO_VERSION=		35.1
@


1.44.2.2
log
@- update to nss-3.16.2.3
* https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.16.2.3_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44.2.1 2014/09/30 14:01:09 jasper Exp $
d7 1
a7 1
VERSION=		3.16.2.3
d10 1
a10 1
SO_VERSION=		35.2
@


1.43
log
@Remove the patch adding CACert, which has strict requirements on redistribution
(http://www.cacert.org/policy/RootDistributionLicense.php) which we don't meet.

Following what was done in src/lib/libssl/cert.pem r1.24 3 weeks ago.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/04/16 09:07:38 landry Exp $
d7 1
a7 2
VERSION=		3.16
REVISION=		0
d10 1
a10 1
SO_VERSION=		34.1
d16 1
a16 1
HOMEPAGE=		http://www.mozilla.org/projects/security/pki/nss/
@


1.42
log
@Update to nss 3.16, will be needed by gecko 29.

See https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSS/NSS_3.16_release_notes

Tested on ppc/amd64/sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2014/01/09 20:09:44 landry Exp $
d8 1
@


1.41
log
@Update to nss 3.15.4, needed by gecko 27.

Contains a fix for (CVE-2013-1740): When false start is enabled, libssl
will sometimes return unencrypted, unauthenticated data from PR_Recv
(https://bugzilla.mozilla.org/show_bug.cgi?id=919877)

See https://developer.mozilla.org/en-US/docs/NSS/NSS_3.15.4_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/12/10 11:17:05 landry Exp $
d7 1
a7 1
VERSION=		3.15.4
d10 1
a10 1
SO_VERSION=		34.0
@


1.41.2.1
log
@Security fixes for CVE-2014-1492 and CVE-2014-1568

as discussed with sthen@@ and landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2014/01/09 20:09:44 landry Exp $
a8 1
REVISION =		0
d10 1
a10 1
SO_VERSION=		34.1
@


1.40
log
@SECURITY update to nss 3.15.3.1.

Bug 946351 - Misissued Google certificates from DCSSI
https://developer.mozilla.org/en-US/docs/NSS/NSS_3.15.3.1_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/11/13 10:02:47 landry Exp $
d7 1
a7 1
VERSION=		3.15.3.1
d10 1
a10 1
SO_VERSION=		33.3
@


1.39
log
@SECURITY (f34r!) update to nss 3.15.3.

Fixes CVE-2013-1739 (bug #894370) & CVE-2013-5605 (bug #934016)
Adds support for AES-GCM ciphersuites in 3.15.2 (#bug 880543)

See for more details:
https://developer.mozilla.org/en-US/docs/NSS/NSS_3.15.2_release_notes
https://developer.mozilla.org/en-US/docs/NSS/NSS_3.15.3_release_notes
(the latter is not yet complete..)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/07/04 08:36:55 landry Exp $
d7 1
a7 1
VERSION=		3.15.3
@


1.38
log
@Update to nss 3.15.1, adds support for TLS 1.2. Will be required at some
point by newer geckos...

see https://developer.mozilla.org/en-US/docs/NSS/NSS_3.15.1_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/06/23 18:40:01 landry Exp $
d7 1
a7 1
VERSION=		3.15.1
@


1.38.2.1
log
@Security update of nss to 3.15.3, which among others addresses CVE-2013-1739
and CVE-2013-5605.

ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/07/04 08:36:55 landry Exp $
d7 1
a7 1
VERSION=		3.15.3
@


1.38.2.2
log
@SECURITY update to nss 3.15.3.1.

Bug 946351 - Misissued Google certificates from DCSSI
https://developer.mozilla.org/en-US/docs/NSS/NSS_3.15.3.1_release_notes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38.2.1 2013/11/13 17:34:55 jasper Exp $
d7 1
a7 1
VERSION=		3.15.3.1
@


1.37
log
@Update to nss 3.15.

https://developer.mozilla.org/en-US/docs/NSS/NSS_3.15_release_notes

After years of sticking to CVS, upstream finally switched to hg,
changing its directory layout while here. All our patches are actually
unchanged, but got renamed/moved. CVS doesn't handle moves :)

Tested in an amd64 bulk build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/03/21 12:49:42 landry Exp $
d7 1
a7 1
VERSION=		3.15
d10 1
a10 1
SO_VERSION=		33.2
@


1.36
log
@Security update to nss 3.14.3.

Fixes CVE-2013-1620 / bug #822365 (Lucky Thirteen attack)
Required by firefox 20 & later anyway.. and tested to work fine with 20.0b6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/03/18 20:38:13 landry Exp $
d7 1
a7 1
VERSION=		3.14.3
d24 1
a24 2
MASTER_SITES=		http://ftp.eu.mozilla.org/pub/mozilla.org/security/nss/releases/${DISTNAME:U:C/[-.]/_/g}_RTM/src/ \
			http://ftp.mozilla.org/pub/mozilla.org/security/nss/releases/${DISTNAME:U:C/[-.]/_/g}_RTM/src/
d26 1
a26 1
LIB_DEPENDS=		devel/nspr>=4.9.4
d40 2
a41 2
WRKSRC=			${WRKDIST}/mozilla/security/nss
NSSDIST=		${WRKDIST}/mozilla/dist
@


1.35
log
@Update to nss 3.14.2.

Remove a useless patch, unix_rand.c uses /dev/urandom on OpenBSD since
bug #174993 was fixed more that 5 years ago in nss 3.5.
Enforce dependency on sqlite 3.7.15.2.
Went in a handful of bulk builds.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/03/11 11:41:26 espie Exp $
d7 1
a7 1
VERSION=		3.14.2
d10 1
a10 1
SO_VERSION=		33.1
@


1.34
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/12/31 08:41:27 landry Exp $
d7 2
a8 5
VERSION=		3.14.1
DISTNAME=		nss-${VERSION}.with.ckbi.1.93
WRKDIST =		${WRKDIR}/nss-${VERSION}
PKGNAME =		nss-${VERSION}
REVISION =		0
d10 1
a10 1
SO_VERSION=		33.0
a21 1
WANTLIB += c pthread z nspr4 plc4 plds4 sqlite3
d28 1
@


1.33
log
@Update to nss-3.14.1.with.ckbi.1.93, which explicitely distrusts
"TURKTRUST Mis-issued Intermediate CA 1" & "TURKTRUST Mis-issued
Intermediate CA 2".
(added in #768547, removed in #825022)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/12/29 20:03:17 landry Exp $
a24 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d67 1
a67 1
do-regress:
@


1.32
log
@Update to nss 3.14.1, required by upcoming fx 18.
Tested on sparc64 & hppa, and went into an amd64 bulk build.

Node that builtins/certdata.c patch goes to the attic since it's
autogenerated at build time from builtins/certdata.txt (which we patch
too for CACert roots) since bug #683266.

There might be a chemspill for a TURKTRUST CA distrust soon (bug
#825022, sg-only) but let's get this in now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/11/12 20:43:09 landry Exp $
d8 5
a12 1
DISTNAME=		nss-${VERSION}
@


1.31
log
@Update to nss 3.14.

- use ${SUBST_CMD} instead of old-style perl -pi -e commands
- update nss-config from debian's nss-config.in, since apparently it
comes from there.. needed to fix detection by mozillas, otherwise the
current script returns 3.14 for --version while configure scripts
expect 3.14.0... grab version via awk on nss.h at runtime.

Tested on amd64/i386/powerpc and in an amd64 bulk build. Needed by
firefox 18.

ok sthen@@ ajacoutot@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/09/17 20:01:22 landry Exp $
d7 1
a7 1
VERSION=		3.14
d9 1
a9 1
SO_VERSION=		32.0
d30 1
a30 1
LIB_DEPENDS=		devel/nspr>=4.9
@


1.30
log
@Update to nss 3.13.6.

Needed by upcoming Mozilla 16 releases.
Been in a bunch of amd64 bulks, tested on ppc/sparc64 too.
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/04/23 17:15:18 espie Exp $
d7 1
a7 1
VERSION=		3.13.6
d9 1
a9 1
SO_VERSION=		31.0
d48 1
d61 4
a64 4
	${INSTALL_SCRIPT} ${FILESDIR}/nss-config ${PREFIX}/bin/
	${INSTALL_DATA} ${FILESDIR}/nss.pc ${PREFIX}/lib/pkgconfig/
	@@perl -pi -e 's|!!PREFIX!!|${TRUEPREFIX}|g; s|!!VERSION!!|${VERSION}|g' \
		${PREFIX}/bin/nss-config ${PREFIX}/lib/pkgconfig/nss.pc
@


1.29
log
@first pass at handling sqlite3 move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/03/08 12:13:01 ajacoutot Exp $
d7 1
a7 1
VERSION=		3.13.3
d9 1
a9 2
REVISION=		1
SO_VERSION=		30.0
@


1.28
log
@Garbage collect the /dev/arandom patches.

from Brad
ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/02/22 20:00:55 landry Exp $
d9 1
a9 1
REVISION=		0
d31 1
a31 2
LIB_DEPENDS=		devel/nspr>=4.9 \
			databases/sqlite3>=3.6.13
@


1.27
log
@Update to nss 3.13.3.

This release actively distrusts the MITM subCA issued by TrustWave, see
details at https://bugzilla.mozilla.org/show_bug.cgi?id=724929 (also
#727167 & #728617). While here, depend on nspr 4.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/02/20 09:18:05 landry Exp $
d9 1
d39 1
a39 1
			XCFLAGS="-I${LOCALBASE}/include -DRAND_DEV=\\\"/dev/arandom\\\" ${CFLAGS}" \
@


1.26
log
@Update to nss 3.12.2, needed by mozilla 11+.
Tested on alpha amd64 hppa i386 powerpc sparc64, no change in regress
output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/11/18 12:32:37 nigel Exp $
d7 1
a7 1
VERSION=		3.13.2
d30 1
a30 1
LIB_DEPENDS=		devel/nspr>=4.8 \
@


1.25
log
@Update to 3.13.1 with ckbi 1.88 changes include

SSL 2.0 is disabled by default.

A defense against the SSL 3.0 and TLS 1.0 CBC chosen plaintext attack
demonstrated by Rizzo and Duong (CVE-2011-3389) is enabled by default.

SHA-224 is supported.

additional blacklist CA's.  Malaysia-based DigiCert Sdn. Bhd

Ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/09/16 11:41:39 espie Exp $
d7 3
a9 5
VERSION=		3.13.1
DISTNAME=		nss-${VERSION}.with.ckbi.1.88
WRKDIST=		${WRKDIR}/nss-${VERSION}
PKGNAME =		nss-${VERSION}
SO_VERSION=		29.0
@


1.24
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/09/06 19:39:34 landry Exp $
d7 2
a8 2
VERSION=		3.12.11
DISTNAME=		nss-${VERSION}.with.ckbi.1.87
d11 1
a11 1
SO_VERSION=		28.0
a15 1
REVISION=		1
a27 1
MASTER_SITES =		ftp://ftp.mozilla.org/pub/mozilla.org/security/nss/releases/NSS_3_12_11_WITH_CKBI_1_87_RTM/src/
d29 2
a30 2
#MASTER_SITES=		http://ftp.eu.mozilla.org/pub/mozilla.org/security/nss/releases/NSS_${VERSION:S/./_/g}_RTM/src/ \
#			http://ftp.mozilla.org/pub/mozilla.org/security/nss/releases/NSS_${VERSION:S/./_/g}_RTM/src/
@


1.23
log
@Update to nss 3.12.11p0 with ckbi 1.87, ckbi being the internal builtin CA
root/certificate database. This special release (along incoming mozilla
releases) fixes the DigiNotar mess, for which more info is available at
http://blog.gerv.net/2011/09/diginotar-compromise/, MFSA2011-34 and
http://blog.mozilla.com/security/2011/09/02/diginotar-removal-follow-up/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/08/23 20:07:50 landry Exp $
d16 1
a16 1
REVISION=		0
@


1.22
log
@Update to nss 3.12.10, needed by upcoming mozilla updates.
ok martynas@@ rpointel@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/01/15 16:59:37 landry Exp $
d8 3
a10 1
DISTNAME=		nss-${VERSION}
d16 1
d29 4
a32 2
MASTER_SITES=		http://ftp.eu.mozilla.org/pub/mozilla.org/security/nss/releases/NSS_${VERSION:S/./_/g}_RTM/src/ \
			http://ftp.mozilla.org/pub/mozilla.org/security/nss/releases/NSS_${VERSION:S/./_/g}_RTM/src/
@


1.21
log
@Update to nss 3.12.9, required by ffx4.0b8 and later,and
soon-to-be-required by stable releases in other mozilla branches.
ok sthen@@ martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/11/20 17:22:44 espie Exp $
d7 1
a7 1
VERSION=		3.12.9
d9 1
a9 1
SO_VERSION=		27.0
@


1.20
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/10/22 19:14:56 landry Exp $
d7 1
a7 1
VERSION=		3.12.8
d9 1
a9 1
SO_VERSION=		26.0
@


1.19
log
@Update to nss 3.12.8, required by upcoming moz* updates. Bump major and
switch to newer lib_depends while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/06/07 17:40:28 landry Exp $
d29 2
a30 2
LIB_DEPENDS=		:nspr->=4.8:devel/nspr \
			:sqlite3->=3.6.13:databases/sqlite3
@


1.18
log
@Oops, fix subtle typo in patch.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/04/03 09:21:00 landry Exp $
d7 1
a7 1
VERSION=		3.12.6
d9 1
a9 2
PKGNAME=		${DISTNAME}p0
SO_VERSION=		25.0
d24 1
a24 1
WANTLIB += c pthread z
d29 2
a30 2
LIB_DEPENDS=		nspr4.>=20.1,plc4.>=20.1,plds4.>=20.1:nspr->=4.8:devel/nspr \
			sqlite3.>=13.3:sqlite3->=3.6.13:databases/sqlite3
@


1.17
log
@Update to nss 3.12.6, tested by jasper@@ in a bulk, thanks!
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/11/14 16:31:06 ajacoutot Exp $
d9 1
@


1.16
log
@SHA1_Update conflicts with openssl which may be dynamically loaded
at runtime via other libs (cups, kerberos...) so causing a crash due to
using the wrong binding.
Rename here to avoid conflict.

from pkgsrc

ok sthen@@ jasper@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/09/10 21:38:26 martynas Exp $
d7 1
a7 1
VERSION=		3.12.3.1
d9 1
a9 2
PKGNAME=		${DISTNAME}p2
SO_VERSION=		24.0
d56 2
a57 8
	@@cd ${NSSDIST}/public && ${TAR} -chf - nss/ | \
		find . -type d \
			-exec ${INSTALL_DATA_DIR} ${PREFIX}/include/{} \; && \
		find . ! -type d \
			-exec ${INSTALL_DATA} {} ${PREFIX}/include/{} \;
	@@cd ${NSSOBJ}/lib && ${TAR} -chf - *.so.${SO_VERSION} | \
		${TAR} -xf - -C ${PREFIX}/lib
	@@chmod 444 ${PREFIX}/lib/*.so.${SO_VERSION}
d59 1
a59 1
	@@cd ${NSSOBJ}/bin && ${INSTALL_PROGRAM} ${MAIN_TOOLS} ${PREFIX}/bin/
d66 1
a66 1
	cd ${WRKSRC}/tests && ${SETENV} BUILD_OPT=1 \
d68 1
a68 1
		LD_LIBRARY_PATH="${NSSOBJ}/lib" ./all.sh
@


1.15
log
@new nss ships tarball with weird permission modes.  fix modes for
header files in the install target.  reported & ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/08/08 12:57:17 martynas Exp $
d9 2
a10 2
PKGNAME=		${DISTNAME}p1
SO_VERSION=		23.2
@


1.14
log
@add cacert class 1 & class 3 to ckfw builtins;  so the older mozilla
friends could use it too.  bumped minor.  ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/08/04 15:13:02 martynas Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
d58 4
a61 1
		${TAR} -xf - -C ${PREFIX}/include
@


1.13
log
@update to nss-3.12.3.1 which was released while nss-3.12.3 was still
sitting in my tree.  changes for openbsd: couple of certs got added.
bump minor, since ckfw symbols were added.  looks good to sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/08/04 14:00:21 martynas Exp $
d9 2
a10 1
SO_VERSION=		23.1
@


1.12
log
@update to nss-3.12.3.  security.  please note, this will be needed
in stable for further mozilla-firefox security updates.
bulk build done by sthen@@.  thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/03/23 07:50:47 jakemsr Exp $
d7 1
a7 1
VERSION=		3.12.3
d9 1
a9 1
SO_VERSION=		23.0
a27 1
EXTRACT_SUFX=		.tar.bz2
@


1.11
log
@use /dev/arandom instead of /dev/urandom.  /dev/urandom is too slow.

ok martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/07/25 00:46:59 martynas Exp $
d7 1
a7 1
VERSION=		3.12
d9 1
a9 2
PKGNAME=		${DISTNAME}p0
SO_VERSION=		22.0
d28 1
d30 2
a31 2
LIB_DEPENDS=		nspr4.>=20,plc4.>=20,plds4.>=20:nspr->=4.7:devel/nspr \
			sqlite3.>=10.0:sqlite3->=3.5:databases/sqlite3
d46 1
a46 1
NSSOBJ=			${NSSDIST}/OpenBSD`uname -r`_OPT.OBJ
d75 7
@


1.10
log
@update to nss-3.12.  also needed by firefox 3.0
tested by many, both w/ mozilla 1.8 branch projects, and mozilla 1.9
"nspr and nss should go in" naddy@@
ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/02/12 23:26:31 martynas Exp $
d9 1
d38 1
a38 1
			XCFLAGS="-I${LOCALBASE}/include ${CFLAGS}" \
@


1.9
log
@update to 3.11.9.  bump SO_VERSION major.  pass BUILD_OPT so that
correct OBJDIR is detected.  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/09/15 23:29:59 merdely Exp $
d7 1
a7 1
VERSION=		3.11.9
d9 2
a10 2
SO_VERSION=		21.0
.for _lib in freebl3 nss3 nssckbi smime3 softokn3 ssl3
d29 2
a30 1
LIB_DEPENDS=		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr
d35 1
d37 3
a39 3
			XCFLAGS="${CFLAGS}" \
			NSPR_INCLUDE_DIR=${LOCALBASE}/include/nspr \
			NSPR_LIB_DIR=${LOCALBASE}/lib
@


1.8
log
@Remove surrounding quotes in NO_REGRESS/COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/08/01 21:16:10 kurt Exp $
d7 1
a7 1
VERSION=		3.11.7
d9 1
a9 1
SO_VERSION=		20.0
d67 2
a68 1
	cd ${WRKSRC}/tests && ${SETENV} PATH="${NSSOBJ}/bin:${PATH}" \
@


1.7
log
@- update to 3.11.7
- major bump due to function removal
- use NSPR_INCLUDE_DIR/NSPR_LIB_DIR
- remove patches no longer needed
okay martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/06/22 13:37:58 kurt Exp $
d5 1
a5 1
COMMENT=		"libraries to support development of security-enabled apps"
@


1.6
log
@Fix a deadlock seen in thunderbird w/engimail caused by safe_pclose()
returning without waiting for the child process to complete which causes
a deadlock between nspr's WaitPidDaemonThread() and PR_WaitProcess().
Reported upstream w/more details:
https://bugzilla.mozilla.org/show_bug.cgi?id=385465
okay martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/03/26 20:45:44 martynas Exp $
d7 1
a7 1
VERSION=		3.11.5
d9 1
a9 2
PKGNAME=		${DISTNAME}p0
SO_VERSION=		19.0
d35 3
a37 3
			XCFLAGS="${CFLAGS}"

CFLAGS+=		-I${LOCALBASE}/include/nspr
@


1.5
log
@update to nss-3.11.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/02/13 17:11:05 naddy Exp $
d9 1
@


1.4
log
@- Install only the main tools.
- Fix build on alpha.

From maintainer Martynas Venckus; ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/01/10 19:26:28 kurt Exp $
d7 1
a7 1
VERSION=		3.11.4
a8 1
PKGNAME=		${DISTNAME}p2
d17 1
a17 1
MAINTAINER=		Martynas Venckus <martynas@@altroot.org>
@


1.4.2.1
log
@MFC:
update to nss 3.11.5
----
Fix a deadlock seen in thunderbird w/engimail caused by safe_pclose()
returning without waiting for the child process to complete which causes
a deadlock between nspr's WaitPidDaemonThread() and PR_WaitProcess().
Reported upstream w/more details:
https://bugzilla.mozilla.org/show_bug.cgi?id=385465
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/02/13 17:11:05 naddy Exp $
d7 1
a7 1
VERSION=		3.11.5
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
@


1.3
log
@bump SO_VERSION to be one more then mozilla-firefox so that the transition
to system nss goes smoothly. discussed with Martynas Venckus and steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/12/08 19:21:30 kili Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p1
d35 2
a36 1
			SO_VERSION="${SO_VERSION}"
d48 4
d61 1
a61 1
	${INSTALL_PROGRAM} ${NSSOBJ}/bin/* ${PREFIX}/bin/
@


1.2
log
@
Remove all static libraries except libcrmf.a, since some of them conflict
with libraries in /usr/lib. Mark the port SHARED_ONLY.

From maintainer, after some discussions with kurt@@ and me.

ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/12/04 17:19:54 kurt Exp $
d9 2
a10 2
PKGNAME=		${DISTNAME}p0
SO_VERSION=		18.0
@


1.1
log
@Initial revision
@
text
@d1 3
a3 1
# $OpenBSD$
d9 1
d55 1
a55 1
	${INSTALL_DATA} ${NSSOBJ}/lib/*.{chk,a} ${PREFIX}/lib/
a60 3
#	unknown manpage type
#	${INSTALL_MAN} ${WRKSRC}/cmd/symkeyutil/symkey.man \
#		${PREFIX}/man/man1/symkeyutil.1
@


1.1.1.1
log
@import nss 3.11.4

Network Security Services (NSS) is a set of libraries designed to
support cross-platform development of security-enabled client and
server applications.

Applications built with NSS can support SSL v2 and v3, TLS, PKCS #5,
PKCS #7, PKCS #11, PKCS #12, S/MIME, X.509 v3 certificates, and other
security standards.

from MAINTAINER Martynas Venckus <martynas at altroot.org>. okay jolan@@
@
text
@@
