head	1.59;
access;
symbols
	OPENBSD_6_2:1.59.0.4
	OPENBSD_6_2_BASE:1.59
	OPENBSD_6_1:1.59.0.2
	OPENBSD_6_1_BASE:1.59
	OPENBSD_6_0:1.58.0.6
	OPENBSD_6_0_BASE:1.58
	OPENBSD_5_9:1.58.0.2
	OPENBSD_5_9_BASE:1.58
	OPENBSD_5_8:1.58.0.4
	OPENBSD_5_8_BASE:1.58
	OPENBSD_5_7:1.57.0.2
	OPENBSD_5_7_BASE:1.57
	OPENBSD_5_6:1.56.0.2
	OPENBSD_5_6_BASE:1.56
	OPENBSD_5_5:1.55.0.4
	OPENBSD_5_5_BASE:1.55
	OPENBSD_5_4:1.55.0.2
	OPENBSD_5_4_BASE:1.55
	OPENBSD_5_3:1.53.0.10
	OPENBSD_5_3_BASE:1.53
	OPENBSD_5_2:1.53.0.8
	OPENBSD_5_2_BASE:1.53
	OPENBSD_5_1_BASE:1.53
	OPENBSD_5_1:1.53.0.6
	OPENBSD_5_0:1.53.0.4
	OPENBSD_5_0_BASE:1.53
	OPENBSD_4_9:1.53.0.2
	OPENBSD_4_9_BASE:1.53
	OPENBSD_4_8:1.51.0.6
	OPENBSD_4_8_BASE:1.51
	OPENBSD_4_7:1.51.0.4
	OPENBSD_4_7_BASE:1.51
	OPENBSD_4_6:1.51.0.2
	OPENBSD_4_6_BASE:1.51
	OPENBSD_4_5:1.50.0.6
	OPENBSD_4_5_BASE:1.50
	OPENBSD_4_4:1.50.0.4
	OPENBSD_4_4_BASE:1.50
	OPENBSD_4_3:1.50.0.2
	OPENBSD_4_3_BASE:1.50
	OPENBSD_4_2:1.49.0.2
	OPENBSD_4_2_BASE:1.49
	OPENBSD_4_1:1.48.0.4
	OPENBSD_4_1_BASE:1.48
	OPENBSD_4_0:1.48.0.2
	OPENBSD_4_0_BASE:1.48
	OPENBSD_3_9:1.47.0.2
	OPENBSD_3_9_BASE:1.47
	OPENBSD_3_8:1.43.0.2
	OPENBSD_3_8_BASE:1.43
	OPENBSD_3_7:1.40.0.2
	OPENBSD_3_7_BASE:1.40
	OPENBSD_3_6:1.38.0.4
	OPENBSD_3_6_BASE:1.38
	OPENBSD_3_5:1.38.0.2
	OPENBSD_3_5_BASE:1.38
	OPENBSD_3_4:1.37.0.2
	OPENBSD_3_4_BASE:1.37
	OPENBSD_3_3:1.36.0.2
	OPENBSD_3_3_BASE:1.36
	OPENBSD_3_2:1.35.0.2
	OPENBSD_3_2_BASE:1.35
	OPENBSD_3_1:1.32.0.2
	OPENBSD_3_1_BASE:1.32
	OPENBSD_3_0:1.28.0.2
	OPENBSD_3_0_BASE:1.28
	OPENBSD_2_9_TRACKING_SWITCH:1.28
	OPENBSD_2_9:1.25.0.2
	OPENBSD_2_9_BASE:1.25
	OPENBSD_2_8:1.20.0.2
	OPENBSD_2_8_BASE:1.20
	OPENBSD_2_7:1.16.0.2
	OPENBSD_2_7_BASE:1.16
	OPENBSD_2_6:1.7.0.2
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	form_980811:1.1.1.1
	form:1.1.1;
locks; strict;
comment	@# @;


1.59
date	2016.09.13.19.15.03;	author naddy;	state Exp;
branches;
next	1.58;
commitid	jaf8mxJOKaqyTZtO;

1.58
date	2015.06.15.08.32.15;	author bentley;	state Exp;
branches;
next	1.57;
commitid	YbuFyjnmZy1L4WNH;

1.57
date	2014.12.11.12.43.50;	author otto;	state Exp;
branches;
next	1.56;
commitid	A1HajlCZc0QjaqHM;

1.56
date	2014.03.17.23.22.21;	author sthen;	state Exp;
branches;
next	1.55;

1.55
date	2013.07.05.09.37.26;	author jasper;	state Exp;
branches;
next	1.54;

1.54
date	2013.03.11.11.44.40;	author espie;	state Exp;
branches;
next	1.53;

1.53
date	2010.11.22.08.36.47;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2010.11.11.12.35.09;	author sthen;	state Exp;
branches;
next	1.51;

1.51
date	2009.03.23.20.09.51;	author naddy;	state Exp;
branches;
next	1.50;

1.50
date	2007.09.15.20.38.20;	author merdely;	state Exp;
branches;
next	1.49;

1.49
date	2007.05.30.22.33.11;	author naddy;	state Exp;
branches;
next	1.48;

1.48
date	2006.08.04.00.10.42;	author espie;	state Exp;
branches;
next	1.47;

1.47
date	2006.02.08.04.54.50;	author david;	state Exp;
branches;
next	1.46;

1.46
date	2005.12.05.18.04.17;	author fgsch;	state Exp;
branches;
next	1.45;

1.45
date	2005.10.24.05.08.11;	author fgsch;	state Exp;
branches;
next	1.44;

1.44
date	2005.10.12.05.42.31;	author fgsch;	state Exp;
branches;
next	1.43;

1.43
date	2005.07.05.14.28.40;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2005.05.26.21.37.07;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2005.04.18.22.32.36;	author naddy;	state Exp;
branches;
next	1.40;

1.40
date	2004.12.11.13.29.21;	author alek;	state Exp;
branches;
next	1.39;

1.39
date	2004.11.28.17.07.43;	author alek;	state Exp;
branches;
next	1.38;

1.38
date	2003.10.18.19.44.41;	author sturm;	state Exp;
branches;
next	1.37;

1.37
date	2003.06.22.21.29.24;	author naddy;	state Exp;
branches;
next	1.36;

1.36
date	2002.10.29.01.30.41;	author naddy;	state Exp;
branches;
next	1.35;

1.35
date	2002.09.01.18.49.01;	author mpech;	state Exp;
branches;
next	1.34;

1.34
date	2002.06.26.04.07.16;	author form;	state Exp;
branches;
next	1.33;

1.33
date	2002.05.15.02.14.19;	author form;	state Exp;
branches;
next	1.32;

1.32
date	2002.03.21.21.25.54;	author espie;	state Exp;
branches
	1.32.2.1;
next	1.31;

1.31
date	2002.03.20.13.09.29;	author form;	state Exp;
branches;
next	1.30;

1.30
date	2002.03.01.10.07.25;	author form;	state Exp;
branches;
next	1.29;

1.29
date	2001.11.22.11.10.39;	author form;	state Exp;
branches;
next	1.28;

1.28
date	2001.08.13.03.44.39;	author form;	state Exp;
branches
	1.28.2.1;
next	1.27;

1.27
date	2001.07.03.02.24.13;	author form;	state Exp;
branches;
next	1.26;

1.26
date	2001.05.20.05.56.36;	author form;	state Exp;
branches;
next	1.25;

1.25
date	2001.03.29.09.56.40;	author form;	state Exp;
branches;
next	1.24;

1.24
date	2001.02.27.03.46.23;	author form;	state Exp;
branches;
next	1.23;

1.23
date	2001.02.25.08.04.05;	author form;	state Exp;
branches;
next	1.22;

1.22
date	2001.01.23.11.37.44;	author form;	state Exp;
branches;
next	1.21;

1.21
date	2000.12.22.10.55.03;	author form;	state Exp;
branches;
next	1.20;

1.20
date	2000.10.09.06.50.25;	author form;	state Exp;
branches
	1.20.2.1;
next	1.19;

1.19
date	2000.06.16.03.32.24;	author form;	state Exp;
branches;
next	1.18;

1.18
date	2000.06.15.05.37.11;	author form;	state Exp;
branches;
next	1.17;

1.17
date	2000.05.31.18.48.37;	author form;	state Exp;
branches;
next	1.16;

1.16
date	2000.04.01.17.23.54;	author form;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2000.03.22.10.37.15;	author form;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.20.11.04.48;	author form;	state Exp;
branches;
next	1.13;

1.13
date	2000.03.03.12.43.46;	author turan;	state Exp;
branches;
next	1.12;

1.12
date	2000.03.03.11.26.00;	author turan;	state Exp;
branches;
next	1.11;

1.11
date	2000.02.16.20.10.32;	author form;	state Exp;
branches;
next	1.10;

1.10
date	2000.02.16.10.52.14;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	99.12.20.03.04.44;	author form;	state Exp;
branches;
next	1.8;

1.8
date	99.12.13.17.26.55;	author form;	state Exp;
branches;
next	1.7;

1.7
date	99.09.16.14.09.25;	author form;	state Exp;
branches;
next	1.6;

1.6
date	99.07.05.19.35.57;	author form;	state Exp;
branches;
next	1.5;

1.5
date	99.04.09.04.11.58;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.02.24.06.07.26;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	98.11.10.05.06.35;	author form;	state Exp;
branches;
next	1.2;

1.2
date	98.10.20.08.39.49;	author form;	state Exp;
branches;
next	1.1;

1.1
date	98.08.11.09.14.46;	author form;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.08.11.09.14.46;	author form;	state Exp;
branches;
next	;

1.16.2.1
date	2000.09.15.05.21.31;	author marc;	state Exp;
branches;
next	;

1.20.2.1
date	2001.02.26.13.28.37;	author naddy;	state Exp;
branches;
next	;

1.28.2.1
date	2002.05.18.02.31.15;	author form;	state Exp;
branches;
next	;

1.32.2.1
date	2002.05.18.02.23.10;	author form;	state Exp;
branches;
next	;


desc
@@


1.59
log
@replace libiconv module
@
text
@# $OpenBSD: Makefile,v 1.58 2015/06/15 08:32:15 bentley Exp $

COMMENT=	extremely fast program for analysing WWW logfiles

DISTNAME=	analog-6.0
REVISION=	4
CATEGORIES=	www

MASTER_SITES=	http://analog.gsp.com/ \
		http://redmoon.reverse.net/analog/analog-6.0.tar.gz

HOMEPAGE=	http://analog.gsp.com/

# GPLv2 only
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c iconv m jpeg png z gd>=18 pcre pthread

LIB_DEPENDS=	converters/libiconv \
		graphics/gd \
		devel/pcre

ANALOGDIR=	${PREFIX}/share/analog
CONFIGFILE=	${SYSCONFDIR}/analog.cfg
DOCDIR=		${PREFIX}/share/doc/analog
HTTPDIR=	${VARBASE}/www
IMAGEDIR=	/analog-images

CFLAGS+=	-I${LOCALBASE}/include \
		-DANALOGDIR=\"${ANALOGDIR}/\" \
		-DDEFAULTCONFIGFILE=\"${CONFIGFILE}\" \
		-DHTTPDIR=\"${HTTPDIR}/\" \
		-DIMAGEDIR=\"${IMAGEDIR}/\" \
		-DLANGDIR=\"${ANALOGDIR}/lang/\" \
		-DANALOG=\"${PREFIX}/bin/analog\" \
		-DHAVE_GD -DHAVE_ZLIB -DHAVE_PCRE -DHAVE_ADDR_T

ALL_TARGET=	analog
MAKE_FLAGS=	CC='${CC}' CFLAGS='${CFLAGS}' \
		LIBS="-L${LOCALBASE}/lib -L${X11BASE}/lib -lgd -lpng -lm -ljpeg -lz -lpcre -liconv"

pre-configure:
	@@mv ${WRKSRC}/anlgform.pl ${WRKSRC}/anlgform.pl.src
	@@sed -e "s,@@PREFIX@@,${PREFIX},g" < ${WRKSRC}/anlgform.pl.src \
		> ${WRKSRC}/anlgform.pl

NO_TEST=	Yes

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/analog
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/analog
	${INSTALL_DATA_DIR} ${ANALOGDIR}/lang ${ANALOGDIR}/images
	${INSTALL_PROGRAM} ${WRKBUILD}/analog ${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/docs/* ${PREFIX}/share/doc/analog
	${INSTALL_DATA} ${WRKSRC}/examples/*.cfg \
	    ${PREFIX}/share/examples/analog
	${INSTALL_DATA} ${WRKSRC}/images/* ${ANALOGDIR}/images
	${INSTALL_DATA} ${WRKSRC}/lang/* ${ANALOGDIR}/lang
	cd ${WRKSRC} && ${INSTALL_DATA} anlgform.html anlgform.pl \
	    ${ANALOGDIR}

.include <bsd.port.mk>
@


1.58
log
@Update HOMEPAGE, prune mirrors, and use more specific license marker.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2014/12/11 12:43:50 otto Exp $
d17 1
a17 1
WANTLIB += c m jpeg png z gd>=18 pcre pthread
d19 2
a20 1
LIB_DEPENDS=	graphics/gd \
a21 2

MODULES=	converters/libiconv
@


1.57
log
@overlapping memcpy -> memmove; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2014/03/17 23:22:21 sthen Exp $
d6 1
a6 1
REVISION=	3
d9 2
a10 11
MASTER_SITES=	http://www.analog.cx/ \
		http://www.statslab.cam.ac.uk/~sret1/analog/ \
		http://www.magma.ca/~brendanr/analog/ \
		http://brendanr.simplenet.com/analog/ \
		http://analog.gsp.com/ \
		http://redmoon.reverse.net/analog/ \
		http://www.rge.com/pub/infosystems/statistics/analog/ \
		http://blip.cetlink.net/analog/ \
		http://analog.technomancer.com/ \
		http://analog.wizard.net/ \
		ftp://ftp.netcasting.net/pub/packages/analog/
d12 1
a12 1
HOMEPAGE=	http://www.analog.cx/
d14 1
a14 1
# GPL
@


1.56
log
@sync follow graphics/gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/07/05 09:37:26 jasper Exp $
d6 1
a6 1
REVISION=	2
@


1.55
log
@use ${VARBASE} instead of hardcoding /var
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/03/11 11:44:40 espie Exp $
d6 1
a6 1
REVISION=	1
d26 1
a26 1
WANTLIB += c m jpeg png z gd>=18 pcre
@


1.54
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/11/22 08:36:47 espie Exp $
d36 1
a36 1
HTTPDIR=	/var/www
@


1.53
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/11/11 12:35:09 sthen Exp $
a24 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d57 1
a57 1
NO_REGRESS=	Yes
@


1.52
log
@new-style LIB_DEPENDS/REVISION/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2009/03/23 20:09:51 naddy Exp $
d29 1
a29 1
WANTLIB += c m jpeg png z gd.>=18 pcre
d31 2
a32 2
LIB_DEPENDS=	::graphics/gd \
		::devel/pcre
@


1.51
log
@fix library order for static linking
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2007/09/15 20:38:20 merdely Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d29 4
a32 3
LIB_DEPENDS=	gd.>=18::graphics/gd \
		pcre::devel/pcre
WANTLIB=	c m jpeg png z
@


1.50
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2007/05/30 22:33:11 naddy Exp $
d52 1
a52 1
		LIBS="-L${LOCALBASE}/lib -L${X11BASE}/lib -lm -lgd -lpng -ljpeg -lz -lpcre -liconv"
@


1.49
log
@* recognize MS Windows Vista; from stephan.rickauer@@ini.phys.ethz.ch
* fix PREFIX substitution
* regen patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2006/08/04 00:10:42 espie Exp $
d3 1
a3 1
COMMENT=	"extremely fast program for analysing WWW logfiles"
@


1.48
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2006/02/08 04:54:50 david Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.47
log
@move any perl or sed substitutions from post-patch to pre-configure
(fixes make update-patches)
ok sturm@@; "looks reasonable" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2005/12/05 18:04:17 fgsch Exp $
d29 2
a30 2
LIB_DEPENDS=	gd.18::graphics/gd \
		pcre.0::devel/pcre
@


1.46
log
@license is GPL now; from Toni Mueller ( support at oeko dot net ).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2005/10/24 05:08:11 fgsch Exp $
d54 1
a54 1
post-patch:
@


1.45
log
@sync with gd update. sturm@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2005/10/12 05:42:31 fgsch Exp $
d23 1
a23 1
# custom/BSD-like, badly worded
@


1.44
log
@update to analog 6.0 mainly to cope with gd update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2005/07/05 14:28:40 naddy Exp $
d6 1
d31 1
a31 1
WANTLIB=	c m jpeg png ttf z
d52 1
a52 1
		LIBS="-L${LOCALBASE}/lib -L${X11BASE}/lib -lm -lgd -lpng -ljpeg -lttf -lz -lpcre -liconv"
@


1.43
log
@use existing ports rather than building private copies of libgd, libpng, etc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2005/05/26 21:37:07 naddy Exp $
d5 1
a5 2
DISTNAME=	analog-5.32
PKGNAME=	${DISTNAME}p3
d30 3
a32 1
WANTLIB=	jpeg png ttf c m z
d51 1
a51 1
		LIBS="-L${LOCALBASE}/lib -lm -lgd -lpng -ljpeg -lttf -lz -lpcre"
d63 1
a63 2
	${INSTALL_DATA_DIR} ${ANALOGDIR}/lang
	${INSTALL_DATA_DIR} ${ANALOGDIR}/images
d67 1
a67 1
		${PREFIX}/share/examples/analog
d70 2
a71 2
	${INSTALL_DATA} ${WRKSRC}/anlgform.html ${ANALOGDIR}
	${INSTALL_DATA} ${WRKSRC}/anlgform.pl ${ANALOGDIR}
@


1.42
log
@fix DNS lookups on 64-bit archs; from James Strandboge <jamie@@tpptraining.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2005/04/18 22:32:36 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
d28 4
a31 1
WANTLIB=		c m
d39 2
a40 1
CFLAGS+=	-DANALOGDIR=\"${ANALOGDIR}/\" \
d46 1
a46 1
		-DHAVE_ADDR_T
d49 2
@


1.41
log
@Fix several out of bounds accesses.
Parts from Wolfgang S. Rupprecht via PR 4175; testing by Sam Smith.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2004/12/11 13:29:21 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d41 2
a42 1
		-DANALOG=\"${PREFIX}/bin/analog\"
@


1.40
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2004/11/28 17:07:43 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.39
log
@- Kill DEINSTALL
- Replace INSTALL with @@samples
- Remove @@extra
- Bump PKGNAME

looks ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2003/10/18 19:44:41 sturm Exp $
d28 1
@


1.38
log
@license markers and some corrections
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2003/06/22 21:29:24 naddy Exp $
d6 1
@


1.37
log
@update to 5.32; from Stoyan Zhekov <zhware@@saku2.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2002/10/29 01:30:41 naddy Exp $
d22 1
@


1.36
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2002/09/01 18:49:01 mpech Exp $
d5 1
a5 1
DISTNAME=	analog-5.24
@


1.35
log
@Remove Oleg Safiullin from MAINTAINERS.

form@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2002/06/26 04:07:16 form Exp $
d7 1
a7 1
NEED_VERSION=	1.515
d46 2
@


1.34
log
@update to 5.24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2002/05/15 02:14:19 form Exp $
a20 2

MAINTAINER=	Oleg Safiullin <form@@openbsd.org>
@


1.33
log
@Upgrade to 5.23 (form interface security fix).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2002/03/21 21:25:54 espie Exp $
d5 1
a5 1
DISTNAME=	analog-5.23
@


1.32
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2002/03/20 13:09:29 form Exp $
d5 1
a5 1
DISTNAME=	analog-5.22
@


1.32.2.1
log
@Upgrade to 5.23 (from interface security fix); brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2002/03/21 21:25:54 espie Exp $
d5 1
a5 1
DISTNAME=	analog-5.23
@


1.31
log
@upgrade to 5.22

SECURITY ADVISORY                                      20th March 2002
----------------------------------------------------------------------
Program: analog
Versions: all versions prior to 5.22
Operating systems: all
----------------------------------------------------------------------
Yuji Takahashi discovered a bug in analog which allows a cross-site
scripting type attack.

It is easy for an attacker to insert arbitrary strings into any web
server logfile. If these strings are then analysed by analog, they can
appear in the report. By this means an attacker can introduce
arbitrary Javascript code, for example, into an analog report produced
by someone else and read by a third person. Analog already attempted
to encode unsafe characters to avoid this type of attack, but the
conversion was incomplete.

Although it is not known that this bug has been exploited, it is easy
to exploit, and all users are advised to upgrade to version 5.22 of
analog immediately. The URL for analog is http://www.analog.cx/
I apologise for the inconvenience.

Thank you to Yuji Takahashi, Motonobu Takahashi and Takayuki Matsuki
for their help with this bug.

                                                        Stephen Turner
                                         analog-author@@lists.isite.net
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2002/03/01 10:07:25 form Exp $
d7 1
@


1.30
log
@upgrade to 5.21
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2001/11/22 11:10:39 form Exp $
d5 1
a5 1
DISTNAME=	analog-5.21
@


1.29
log
@upgrade to 5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2001/08/13 03:44:39 form Exp $
d5 1
a5 1
DISTNAME=	analog-5.1
@


1.28
log
@upgrade to 5.03
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2001/07/03 02:24:13 form Exp $
d5 1
a5 1
DISTNAME=	analog-5.03
@


1.28.2.1
log
@Upgrade to 5.23 (from interface security fix); brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2001/08/13 03:44:39 form Exp $
d5 1
a5 1
DISTNAME=	analog-5.23
@


1.27
log
@upgrade to 5.02
http://www.reverse.net/analog/ -> http://redmoon.reverse.net/analog/
There seems to be a problem with analog.cx's website, so
put mirrors ahead and temporarily change HOMEPAGE.

Thanks to Jeff Bachtel <Jeff.Bachtel@@isc.tamu.edu>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2001/05/20 05:56:36 form Exp $
d5 1
a5 1
DISTNAME=	analog-5.02
d7 2
a8 1
MASTER_SITES=	http://www.statslab.cam.ac.uk/~sret1/analog/ \
d17 1
a17 2
		ftp://ftp.netcasting.net/pub/packages/analog/ \
		http://www.analog.cx/
d19 1
a19 2
#HOMEPAGE=	http://www.analog.cx/
HOMEPAGE=	http://www.statslab.cam.ac.uk/~sret1/analog/
@


1.26
log
@upgrade to 5.01
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/03/29 09:56:40 form Exp $
d5 1
a5 1
DISTNAME=	analog-5.01
d7 1
a7 2
MASTER_SITES=	http://www.analog.cx/ \
		http://www.statslab.cam.ac.uk/~sret1/analog/ \
d11 1
a11 1
		http://www.reverse.net/analog/ \
d16 2
a17 1
		ftp://ftp.netcasting.net/pub/packages/analog/
d19 2
a20 1
HOMEPAGE=	http://www.analog.cx/
@


1.25
log
@move COMMENT to Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2001/02/27 03:46:23 form Exp $
d5 1
a5 1
DISTNAME=	analog-4.16
d38 1
d53 1
a53 1
	${INSTALL_PROGRAM} ${WRKSRC}/analog ${PREFIX}/bin
d55 2
a56 1
	${INSTALL_DATA} ${WRKSRC}/examples/* ${PREFIX}/share/examples/analog
a58 1
	${INSTALL_DATA} ${WRKSRC}/analog.cfg ${ANALOGDIR}
@


1.24
log
@Use SYSCONFDIR instead of hardcoded /etc; naddy@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.23 2001/02/25 08:04:05 form Exp $
@


1.23
log
@Update to 4.16.
Fixed buffer overflow.

>SECURITY ADVISORY                                   13th February 2001
>----------------------------------------------------------------------
>Program: analog
>Versions: all versions except 4.16 and 4.90beta3
>Operating systems: all
>----------------------------------------------------------------------
>There is a buffer overflow bug in all versions of analog released
>prior to today. A malicious user could use an ALIAS command to
>construct very long strings which were not checked for length.
>
>This bug is particularly dangerous if the form interface (which allows
>unknown users to run the program via a CGI script) has been installed.
>
>This bug was discovered by the program author, and there is no known
>exploit. However, users are advised to upgrade to one of the two safe
>versions immediately, especially if they have installed the form
>interface. The URL is http://www.analog.cx/
>
>I apologise for the inconvenience.
>                                                        Stephen Turner
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/01/23 11:37:44 form Exp $
a25 1
ETCDIR=		/etc
d27 1
a27 1
CONFIGFILE=	${ETCDIR}/analog.cfg
@


1.22
log
@upgrade to 4.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/12/22 10:55:03 form Exp $
d3 1
a3 1
DISTNAME=	analog-4.14
@


1.21
log
@Upgrade to 4.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/10/09 06:50:25 form Exp $
d3 1
a3 1
DISTNAME=	analog-4.13
@


1.20
log
@add full name to MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/06/16 03:32:24 form Exp $
d3 1
a3 1
DISTNAME=	analog-4.11
@


1.20.2.1
log
@MFC:
Update to 4.16.
Fixed buffer overflow.

>SECURITY ADVISORY                                   13th February 2001
>----------------------------------------------------------------------
>Program: analog
>Versions: all versions except 4.16 and 4.90beta3
>Operating systems: all
>----------------------------------------------------------------------
>There is a buffer overflow bug in all versions of analog released
>prior to today. A malicious user could use an ALIAS command to
>construct very long strings which were not checked for length.
>
>This bug is particularly dangerous if the form interface (which allows
>unknown users to run the program via a CGI script) has been installed.
>
>This bug was discovered by the program author, and there is no known
>exploit. However, users are advised to upgrade to one of the two safe
>versions immediately, especially if they have installed the form
>interface. The URL is http://www.analog.cx/
>
>I apologise for the inconvenience.
>                                                        Stephen Turner
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/02/25 08:04:05 form Exp $
d3 1
a3 1
DISTNAME=	analog-4.16
@


1.19
log
@fix compiling; turan@@
add HOMEPAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/06/15 05:37:11 form Exp $
d19 1
a19 1
MAINTAINER=	form@@OpenBSD.ORG
@


1.18
log
@remove FAKE=yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/05/31 18:48:37 form Exp $
d5 2
a6 1
MASTER_SITES=	http://www.statslab.cam.ac.uk/~sret1/analog/ \
d17 2
d33 5
a37 5
CFLAGS+=	-DANALOGDIR=\\\"${ANALOGDIR}/\\\" \
		-DDEFAULTCONFIGFILE=\\\"${CONFIGFILE}\\\" \
		-DHTTPDIR=\\\"${HTTPDIR}/\\\" \
		-DIMAGEDIR=\\\"${IMAGEDIR}/\\\" \
		-DANALOG=\\\"${PREFIX}/bin/analog\\\"
@


1.17
log
@upgrade to 4.11
install examples
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/04/01 17:23:54 form Exp $
a21 2

FAKE=		Yes
@


1.16
log
@upgrade to 4.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/03/22 10:37:15 form Exp $
d3 1
a3 1
DISTNAME=	analog-4.1
d26 1
a26 1
ANALOGDIR=	${PREFIX}/lib/analog
d38 2
d46 4
a49 4
	@@${INSTALL_DATA_DIR} ${DOCDIR}
	@@${INSTALL_DATA_DIR} ${ANALOGDIR}/lang
	@@${INSTALL_DATA_DIR} ${ANALOGDIR}/images
	@@${INSTALL_DATA_DIR} ${HTTPDIR}/htdocs${IMAGEDIR}
d51 2
a52 1
	${INSTALL_DATA} ${WRKSRC}/docs/* ${DOCDIR}
@


1.16.2.1
log
@bring www as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/06/16 03:32:24 form Exp $
d3 1
a3 1
DISTNAME=	analog-4.11
d5 1
a5 2
MASTER_SITES=	http://www.analog.cx/ \
		http://www.statslab.cam.ac.uk/~sret1/analog/ \
a15 2
HOMEPAGE=	http://www.analog.cx/

d23 2
d26 1
a26 1
ANALOGDIR=	${PREFIX}/share/analog
d32 5
a36 7
CFLAGS+=	-DANALOGDIR=\"${ANALOGDIR}/\" \
		-DDEFAULTCONFIGFILE=\"${CONFIGFILE}\" \
		-DHTTPDIR=\"${HTTPDIR}/\" \
		-DIMAGEDIR=\"${IMAGEDIR}/\" \
		-DANALOG=\"${PREFIX}/bin/analog\"

ALL_TARGET=	analog
d44 4
a47 4
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/analog
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/analog
	${INSTALL_DATA_DIR} ${ANALOGDIR}/lang
	${INSTALL_DATA_DIR} ${ANALOGDIR}/images
d49 1
a49 2
	${INSTALL_DATA} ${WRKSRC}/docs/* ${PREFIX}/share/doc/analog
	${INSTALL_DATA} ${WRKSRC}/examples/* ${PREFIX}/share/examples/analog
@


1.15
log
@Upgrade 4.04.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/03/20 11:04:48 form Exp $
d3 1
a3 1
DISTNAME=	analog-4.04
@


1.14
log
@Upgrade to 4.03.
Fake.
PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/03/03 12:43:46 turan Exp $
d3 1
a3 2
DISTNAME=	analog4.03
PKGNAME=	analog-4.03
@


1.13
log
@again
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/03/03 11:26:00 turan Exp $
d3 2
a4 2
DISTNAME=	analog4.02
PKGNAME=	analog-4.02
d19 7
a55 3

post-install:
	@@PKG_PREFIX="${PREFIX}" ${SH} ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.12
log
@broken, installs files automatically in /etc
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.11 2000/02/16 20:10:32 form Exp $

BROKEN=		installs files automatically in /etc
@


1.11
log
@update to 4.02
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.10 2000/02/16 10:52:14 espie Exp $
@


1.10
log
@All the Makefiles cvs missed first time around...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/12/20 03:04:44 form Exp $
d3 2
a4 2
DISTNAME=	analog4.01
PKGNAME=	analog-4.01
@


1.9
log
@Update to 4.01.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/12/13 17:26:55 form Exp $
d33 2
a34 2
	@@${MV} ${WRKSRC}/anlgform.pl ${WRKSRC}/anlgform.pl.src
	@@${SED} -e "s,@@PREFIX@@,${PREFIX},g" < ${WRKSRC}/anlgform.pl.src \
@


1.8
log
@update to 4.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/09/16 14:09:25 form Exp $
d3 2
a4 2
DISTNAME=	analog4.0
PKGNAME=	analog-4.0
@


1.7
log
@update to 3.32
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/07/05 19:35:57 form Exp $
d3 2
a4 2
DISTNAME=	analog3.32
PKGNAME=	analog-3.32
d32 5
d48 1
a48 1
	${INSTALL_DATA} ${WRKSRC}/anlgform.cgi ${ANALOGDIR}
@


1.6
log
@Update to 3.31.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/04/09 04:11:58 brad Exp $
d3 2
a4 2
DISTNAME=	analog3.31
PKGNAME=	analog-3.31
@


1.5
log
@- change email addresses, form@@ to ports@@
- remove unnecessary comments
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/02/24 06:07:26 fgsch Exp $
d3 2
a4 2
DISTNAME=	analog3.11
PKGNAME=	analog-3.11
d17 1
a17 1
MAINTAINER=	ports@@openbsd.org
d21 1
d24 1
d27 3
a29 1
		-DHTTPDIR=\\\"${HTTPDIR}/\\\" -DETCDIR=\\\"${ETCDIR}/\\\" \
d33 5
a37 3
	@@${MKDIR} ${DOCDIR}
	@@${MKDIR} ${ANALOGDIR}/lang
	@@${MKDIR} ${HTTPDIR}/htdocs/images
d39 1
a39 1
	${INSTALL_DATA} ${WRKSRC}/images/* ${HTTPDIR}/htdocs/images
a40 1
	${INSTALL_PROGRAM} ${WRKSRC}/analog ${PREFIX}/bin
d42 5
a46 6
.if !exists(${ETCDIR}/analog.cfg)
	${INSTALL_DATA} ${WRKSRC}/analog.cfg ${ETCDIR}
.endif
	${INSTALL_DATA} ${WRKSRC}/domains.tab ${ANALOGDIR}
	${INSTALL_PROGRAM} ${WRKSRC}/anlgform.cgi ${ANALOGDIR}
	${INSTALL_PROGRAM} ${WRKSRC}/anlgform.cgi ${HTTPDIR}/cgi-bin
@


1.4
log
@Update to 3.11. Change master sites.
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.3 1998/11/10 05:06:35 form Exp $
#
d17 1
a17 1
MAINTAINER=	form@@OpenBSD.ORG
@


1.3
log
@update to 3.1
@
text
@d1 1
a1 6
# Ports makefile for:	analog
# Version required:	3.0
# Date created:		11 Aug 1998
# Whom:			Oleg Safiullin <form@@OpenBSD.ORG>
#
# $OpenBSD: Makefile,v 1.2 1998/10/20 08:39:49 form Exp $
d4 2
a5 2
DISTNAME=	analog3.1
PKGNAME=	analog-3.1
d8 9
a16 6
		http://www.lightside.net/analog/ \
		http://www.gamesdomain.com/analog/ \
		http://www.monash.edu.au/mirror/analog/ \
		http://www.gamesdomain.co.uk/analog/ \
		ftp://download.netvision.net.il/pub/mirrors/analog/ \
		ftp://mabuse.phil.uni-passau.de/pub/mirrors/analog/
@


1.2
log
@form@@vs.itam.nsc.ru -> form@@openbsd.org
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1998/08/11 09:14:46 form Exp $
d9 2
a10 2
DISTNAME=	analog3.0
PKGNAME=	analog-3.0
@


1.1
log
@Initial revision
@
text
@d4 1
a4 1
# Whom:			Oleg Safiullin <form@@vs.itam.nsc.ru>
d6 1
a6 1
# $OpenBSD: Makefile,v 1.0 1998/08/11 12:49:01 form Exp $
d20 1
a20 1
MAINTAINER=	form@@vs.itam.nsc.ru
@


1.1.1.1
log
@analog 3.0, powerful httpd log analyzer with CGI.
@
text
@@
