head	1.73;
access;
symbols
	OPENBSD_4_3:1.72.0.20
	OPENBSD_4_3_BASE:1.72
	OPENBSD_4_2:1.72.0.18
	OPENBSD_4_2_BASE:1.72
	OPENBSD_4_1:1.72.0.16
	OPENBSD_4_1_BASE:1.72
	OPENBSD_4_0:1.72.0.14
	OPENBSD_4_0_BASE:1.72
	OPENBSD_3_9:1.72.0.12
	OPENBSD_3_9_BASE:1.72
	OPENBSD_3_8:1.72.0.10
	OPENBSD_3_8_BASE:1.72
	OPENBSD_3_7:1.72.0.8
	OPENBSD_3_7_BASE:1.72
	OPENBSD_3_6:1.72.0.6
	OPENBSD_3_6_BASE:1.72
	OPENBSD_3_5:1.72.0.4
	OPENBSD_3_5_BASE:1.72
	OPENBSD_3_4:1.72.0.2
	OPENBSD_3_4_BASE:1.72
	OPENBSD_3_3:1.71.0.4
	OPENBSD_3_3_BASE:1.71
	OPENBSD_3_2:1.71.0.2
	OPENBSD_3_2_BASE:1.71
	OPENBSD_3_1:1.66.0.2
	OPENBSD_3_1_BASE:1.66
	OPENBSD_3_0:1.55.0.2
	OPENBSD_3_0_BASE:1.55
	OPENBSD_2_9_TRACKING_SWITCH:1.47
	OPENBSD_2_9:1.37.0.2
	OPENBSD_2_9_BASE:1.37
	OPENBSD_2_8:1.10.0.2
	OPENBSD_2_8_BASE:1.10
	jakob_20000903:1.1.1.1
	jakob:1.1.1;
locks; strict;
comment	@# @;


1.73
date	2008.05.27.07.07.28;	author jasper;	state dead;
branches;
next	1.72;

1.72
date	2003.05.23.20.08.20;	author avsm;	state Exp;
branches;
next	1.71;

1.71
date	2002.06.24.19.33.05;	author avsm;	state Exp;
branches;
next	1.70;

1.70
date	2002.06.24.19.17.49;	author avsm;	state Exp;
branches;
next	1.69;

1.69
date	2002.06.17.07.55.29;	author avsm;	state Exp;
branches;
next	1.68;

1.68
date	2002.06.16.23.26.20;	author jcs;	state Exp;
branches;
next	1.67;

1.67
date	2002.06.16.15.47.29;	author avsm;	state Exp;
branches;
next	1.66;

1.66
date	2002.04.06.23.12.17;	author brad;	state Exp;
branches
	1.66.2.1;
next	1.65;

1.65
date	2002.03.17.04.55.03;	author brad;	state Exp;
branches;
next	1.64;

1.64
date	2002.03.03.12.13.29;	author avsm;	state Exp;
branches;
next	1.63;

1.63
date	2002.01.09.16.00.51;	author jcs;	state Exp;
branches;
next	1.62;

1.62
date	2001.12.27.22.09.32;	author avsm;	state Exp;
branches;
next	1.61;

1.61
date	2001.12.18.12.48.32;	author avsm;	state Exp;
branches;
next	1.60;

1.60
date	2001.12.18.01.40.48;	author avsm;	state Exp;
branches;
next	1.59;

1.59
date	2001.11.19.01.50.34;	author brad;	state Exp;
branches;
next	1.58;

1.58
date	2001.11.17.00.12.23;	author naddy;	state Exp;
branches;
next	1.57;

1.57
date	2001.10.25.02.34.11;	author brad;	state Exp;
branches;
next	1.56;

1.56
date	2001.10.24.12.38.46;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2001.10.15.00.56.53;	author avsm;	state Exp;
branches
	1.55.2.1;
next	1.54;

1.54
date	2001.10.13.23.22.29;	author avsm;	state Exp;
branches;
next	1.53;

1.53
date	2001.10.04.21.53.04;	author avsm;	state Exp;
branches;
next	1.52;

1.52
date	2001.10.04.21.27.44;	author avsm;	state Exp;
branches;
next	1.51;

1.51
date	2001.09.28.19.06.30;	author jakob;	state Exp;
branches;
next	1.50;

1.50
date	2001.09.16.20.48.15;	author avsm;	state Exp;
branches;
next	1.49;

1.49
date	2001.08.29.07.03.48;	author jakob;	state Exp;
branches;
next	1.48;

1.48
date	2001.08.17.19.34.51;	author brad;	state Exp;
branches;
next	1.47;

1.47
date	2001.07.18.10.59.01;	author naddy;	state Exp;
branches;
next	1.46;

1.46
date	2001.07.17.15.32.04;	author avsm;	state Exp;
branches;
next	1.45;

1.45
date	2001.07.16.09.35.57;	author avsm;	state Exp;
branches;
next	1.44;

1.44
date	2001.07.05.22.55.38;	author avsm;	state Exp;
branches;
next	1.43;

1.43
date	2001.06.23.23.36.35;	author avsm;	state Exp;
branches;
next	1.42;

1.42
date	2001.06.18.16.27.41;	author avsm;	state Exp;
branches;
next	1.41;

1.41
date	2001.06.12.15.07.29;	author avsm;	state Exp;
branches;
next	1.40;

1.40
date	2001.06.03.05.32.17;	author brad;	state Exp;
branches;
next	1.39;

1.39
date	2001.05.10.22.58.06;	author avsm;	state Exp;
branches;
next	1.38;

1.38
date	2001.05.06.04.22.57;	author lebel;	state Exp;
branches;
next	1.37;

1.37
date	2001.04.23.23.58.52;	author avsm;	state Exp;
branches;
next	1.36;

1.36
date	2001.04.22.16.07.12;	author avsm;	state Exp;
branches;
next	1.35;

1.35
date	2001.03.28.21.32.24;	author avsm;	state Exp;
branches;
next	1.34;

1.34
date	2001.03.09.03.44.26;	author avsm;	state Exp;
branches;
next	1.33;

1.33
date	2001.03.07.19.05.34;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	2001.03.06.09.04.30;	author avsm;	state Exp;
branches;
next	1.31;

1.31
date	2001.02.28.15.05.54;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2001.02.27.20.01.07;	author avsm;	state Exp;
branches;
next	1.29;

1.29
date	2001.02.22.20.03.47;	author avsm;	state Exp;
branches;
next	1.28;

1.28
date	2001.02.22.19.56.31;	author avsm;	state Exp;
branches;
next	1.27;

1.27
date	2001.01.28.14.54.59;	author avsm;	state Exp;
branches;
next	1.26;

1.26
date	2001.01.28.14.39.39;	author avsm;	state Exp;
branches;
next	1.25;

1.25
date	2001.01.28.14.38.30;	author avsm;	state Exp;
branches;
next	1.24;

1.24
date	2001.01.28.13.31.28;	author jakob;	state Exp;
branches;
next	1.23;

1.23
date	2001.01.12.23.06.36;	author avsm;	state Exp;
branches;
next	1.22;

1.22
date	2001.01.07.21.08.11;	author avsm;	state Exp;
branches;
next	1.21;

1.21
date	2001.01.06.14.17.33;	author avsm;	state Exp;
branches;
next	1.20;

1.20
date	2001.01.05.22.47.21;	author avsm;	state Exp;
branches;
next	1.19;

1.19
date	2001.01.04.00.51.23;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2001.01.03.00.33.38;	author avsm;	state Exp;
branches;
next	1.17;

1.17
date	2000.12.28.23.37.22;	author avsm;	state Exp;
branches;
next	1.16;

1.16
date	2000.12.28.17.53.16;	author avsm;	state Exp;
branches;
next	1.15;

1.15
date	2000.12.26.23.35.43;	author avsm;	state Exp;
branches;
next	1.14;

1.14
date	2000.12.18.20.29.25;	author dugsong;	state Exp;
branches;
next	1.13;

1.13
date	2000.12.15.21.36.09;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2000.12.14.15.25.20;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2000.11.28.15.44.31;	author jakob;	state Exp;
branches;
next	1.10;

1.10
date	2000.10.17.20.33.39;	author jakob;	state Exp;
branches
	1.10.2.1;
next	1.9;

1.9
date	2000.10.15.14.50.16;	author jakob;	state Exp;
branches;
next	1.8;

1.8
date	2000.10.12.16.23.08;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2000.10.05.21.25.36;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2000.10.04.21.54.05;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2000.10.04.21.19.13;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2000.09.28.20.39.24;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2000.09.25.20.03.49;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2000.09.04.21.15.40;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2000.09.03.11.55.00;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.09.03.11.55.00;	author jakob;	state Exp;
branches;
next	;

1.10.2.1
date	2000.11.28.15.46.25;	author jakob;	state Exp;
branches;
next	1.10.2.2;

1.10.2.2
date	2000.12.15.18.32.55;	author naddy;	state Exp;
branches;
next	1.10.2.3;

1.10.2.3
date	2000.12.15.20.13.29;	author naddy;	state Exp;
branches;
next	;

1.55.2.1
date	2002.01.16.23.52.07;	author brad;	state Exp;
branches;
next	1.55.2.2;

1.55.2.2
date	2002.02.28.17.29.04;	author brad;	state Exp;
branches;
next	;

1.66.2.1
date	2002.09.21.22.16.01;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.73
log
@it's a sunny day....and the right time to kill php4.

it has been unlinked from the builds for some monthts now, and everybody
should've upgraded to php5 a long time ago.

from brad@@, ok robert@@
@
text
@# $OpenBSD: Makefile,v 1.72 2003/05/23 20:08:20 avsm Exp $

SUBDIR += core
SUBDIR += extensions
SUBDIR += extensions,no_x11

.include <bsd.port.subdir.mk>
@


1.72
log
@remove pear subdir, its now built by core
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2002/06/24 19:33:05 avsm Exp $
@


1.71
log
@add no_x11 flavor to the list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2002/06/24 19:17:49 avsm Exp $
a5 1
SUBDIR += pear
@


1.70
log
@delete the existing php4 port in preparation for the new, hopefully
improved one.
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
@


1.69
log
@Add 'xslt' flavour using the sablotron backend after numerous requests.

Don't worry, this explosion of flavours will end very soon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2002/06/16 23:26:20 jcs Exp $
d3 3
a5 2
MULTI_PACKAGES=	-pear
SUBPACKAGE?=
d7 1
a7 227
COMMENT=	"server-side HTML-embedded scripting language"
COMMENT-pear=	"collection of base classes for common PHP tasks"

# This port currently only works with archs supporting dynamic loading
# and has Apache that supports DSO's.
ONLY_FOR_ARCHS=	alpha i386 m68k powerpc sparc sparc64

V=		4.2.1
DISTNAME=	php-${V}
PKGNAME=	php4-${V}
FULLPKGNAME-pear= php4-pear-${V}

CATEGORIES=	www lang
NEED_VERSION=	1.502

MAINTAINER=     Anil Madhavapeddy <avsm@@openbsd.org>

HOMEPAGE=	http://www.php.net/

MASTER_SITES=	http://www.php.net/distributions/ \
		http://se.php.net/distributions/ \
		http://no.php.net/distributions/ \
		http://uk.php.net/distributions/

PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes

CONFIGURE_STYLE=	autoconf
CONFIGURE_ARGS+=	--with-apxs=/usr/sbin/apxs \
			--with-config-file-path=/var/www/conf \
			--enable-calendar \
			--enable-bcmath \
			--enable-trans-sid \
			--with-yp \
			--with-pcre-regex \
			--enable-ftp \
			--with-xml \
			--with-openssl \
			--with-zlib \
			--enable-sysvsem \
			--enable-sysvshm \
			--enable-inline-optimization \
			--enable-sockets \
			--disable-debug

USE_LIBTOOL=	Yes

FLAVORS+=	gdbm gettext imap ldap mhash mm recode snmp
FLAVORS+=	gd no_x11 pdflib mcrypt curl xslt
FLAVORS+=	dbase filepro mysql mysql_bundled postgresql iodbc freetds

FLAVOR?= 

.if ${FLAVOR:L:Mcurl}
CONFIGURE_ARGS+=	--with-curl=${LOCALBASE}
LIB_DEPENDS+=		curl.2::net/curl
.else
CONFIGURE_ARGS+=	--without-curl
.endif

.if ${FLAVOR:L:Mxslt}
CONFIGURE_ARGS+=	--enable-xslt --with-xslt-sablot=${LOCALBASE}
LIB_DEPENDS+=		sablot.90::textproc/sablotron
.else
CONFIGURE_ARGS+=	--disable-xslt
.endif

.if ${FLAVOR:L:Mgdbm}
CONFIGURE_ARGS+=	--with-gdbm=${LOCALBASE}
LIB_DEPENDS+=		gdbm.2::databases/gdbm
.else
CONFIGURE_ARGS+=	--without-gdbm
.endif

.if ${FLAVOR:L:Mgettext}
CONFIGURE_ARGS+=	--with-gettext=${LOCALBASE}
MODULES=		gettext
.else
CONFIGURE_ARGS+=	--without-gettext
.endif

.if ${FLAVOR:L:Mimap}
CONFIGURE_ARGS+=	--with-imap=${LOCALBASE} --with-imap-ssl=${LOCALBASE} --with-kerberos
LIB_DEPENDS+=		c-client.3:c-client->=4.40p1:mail/c-client
.else
CONFIGURE_ARGS+=	--without-imap
.endif

.if ${FLAVOR:L:Mldap}
CONFIGURE_ARGS+=	--with-ldap=${LOCALBASE}
LIB_DEPENDS+=		ldap.2,lber:openldap-client-2.*:databases/openldap
.else
CONFIGURE_ARGS+=	--without-ldap
.endif

.if ${FLAVOR:L:Mmcrypt}
CONFIGURE_ARGS+=	--with-mcrypt=${LOCALBASE}
LIB_DEPENDS+=		mcrypt::security/libmcrypt
.else
CONFIGURE_ARGS+=	--without-mcrypt
.endif

.if ${FLAVOR:L:Mmhash}
CONFIGURE_ARGS+=	--with-mhash=${LOCALBASE}
LIB_DEPENDS+=		mhash.2::security/mhash
.else
CONFIGURE_ARGS+=	--without-mhash
.endif

.if ${FLAVOR:L:Mmm}
CONFIGURE_ARGS+=	--with-mm=${LOCALBASE}
LIB_DEPENDS+=		mm.11::devel/mm
.else
CONFIGURE_ARGS+=	--without-mm
.endif

.if ${FLAVOR:L:Mrecode}
CONFIGURE_ARGS+=	--with-recode=${LOCALBASE}
LIB_DEPENDS+=		recode::converters/recode
.else
CONFIGURE_ARGS+=	--without-recode
.endif

.if ${FLAVOR:L:Msnmp}
CONFIGURE_ARGS+=	--with-snmp=${LOCALBASE} --enable-ucd-snmp-hack
LIB_DEPENDS+=		snmp.42::net/ucd-snmp
.else
CONFIGURE_ARGS+=	--without-snmp
.endif

.if ${FLAVOR:L:Mgd}
CFLAGS+=		-I${LOCALBASE}/include
MAKE_FLAGS+=		CFLAGS='${CFLAGS}'
LIB_DEPENDS+=		gd.18::graphics/gd \
			tiff.35::graphics/tiff \
			png.2::graphics/png
CONFIGURE_ARGS+=	--with-gd \
			--with-jpeg-dir=${LOCALBASE} \
			--with-tiff-dir=${LOCALBASE} \
			--with-png-dir=${LOCALBASE} \
			--with-ttf
.if !${FLAVOR:L:Mno_x11}
USE_X11=		yes
CONFIGURE_ARGS+=	--with-xpm-dir=${X11BASE}
.endif
.else
CONFIGURE_ARGS+=	--without-gd
.endif

.if ${FLAVOR:L:Mpdflib}
.if !${FLAVOR:L:Mgd}
ERRORS+= "Fatal: pdflib flavor requires the gd flavor also"
.endif
CONFIGURE_ARGS+=	--with-pdflib=${LOCALBASE}
LIB_DEPENDS+=		pdf.2::print/pdflib
.else
CONFIGURE_ARGS+=	--without-pdflib
.endif

.if ${FLAVOR:L:Mdbase}
CONFIGURE_ARGS+=	--enable-dbase
.else
CONFIGURE_ARGS+=	--disable-dbase
.endif

.if ${FLAVOR:L:Mfilepro}
CONFIGURE_ARGS+=	--enable-filepro
.else
CONFIGURE_ARGS+=	--disable-filepro
.endif

.if ${FLAVOR:L:Mmysql}
CONFIGURE_ARGS+=	--with-mysql=${LOCALBASE}
LIB_DEPENDS+=		lib/mysql/mysqlclient.10:mysql-client-3.23.*:databases/mysql
.if ${FLAVOR:L:Mmysql_bundled}
ERRORS+= "Fatal: Conflicting flavor: ${FLAVOR}"
.endif
.elif ${FLAVOR:L:Mmysql_bundled}
CONFIGURE_ARGS+=	--with-mysql
.else
CONFIGURE_ARGS+=	--without-mysql
.endif

.if ${FLAVOR:L:Mpostgresql}
CONFIGURE_ARGS+=	--with-pgsql=${LOCALBASE}/lib
CFLAGS+=		-I${LOCALBASE}/include/postgresql 
MAKE_FLAGS+=		CFLAGS='${CFLAGS}'
LIB_DEPENDS+=		pq.2::databases/postgresql
.else
CONFIGURE_ARGS+=	--without-pgsql
.endif

.if ${FLAVOR:L:Miodbc}
CONFIGURE_ARGS+=        --with-iodbc
LIB_DEPENDS+=		iodbc.2::databases/iodbc
.else
CONFIGURE_ARGS+=        --without-iodbc
.endif        

.if ${FLAVOR:L:Mfreetds}
CONFIGURE_ARGS+=        --with-sybase-ct=${LOCALBASE}
LIB_DEPENDS+=		tds.0,ct.0::databases/freetds
.else
CONFIGURE_ARGS+=        --without-sybase-ct
.endif        

.if ${SUBPACKAGE} == "-pear"
LIB_DEPENDS=
RUN_DEPENDS=
.endif

do-install:
	${INSTALL_DATA} ${WRKBUILD}/.libs/libphp4.so \
		${PREFIX}/lib/libphp4.so
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/php4
	${INSTALL_DATA} ${WRKSRC}/php.ini-dist ${PREFIX}/share/doc/php4
	${INSTALL_DATA} ${WRKSRC}/php.ini-recommended ${PREFIX}/share/doc/php4
	@@sed 's,y0y0y0,${TRUEPREFIX},' \
		<${FILESDIR}/php4-enable >${PREFIX}/sbin/php4-enable
	@@chown ${BINOWN}:${BINGRP} ${PREFIX}/sbin/php4-enable
	@@chmod ${BINMODE} ${PREFIX}/sbin/php4-enable
	cd ${WRKSRC}/pear && env INSTALL_ROOT=${DESTDIR} make install
	cd ${PREFIX}/lib && tar -zxvf ${FILESDIR}/pear-412-421.tgz

.include <bsd.port.mk>
@


1.68
log
@re-enable freetds flavor
ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2002/06/16 15:47:29 avsm Exp $
d56 1
a56 1
FLAVORS+=	gd no_x11 pdflib mcrypt curl
d66 7
@


1.67
log
@Upgrade to php-4.2.1

A few PEAR modules have disappeared completely during the PECL transition
so they are temporarily included here to avoid breaking dependencies
within the ports tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2002/04/06 23:12:17 brad Exp $
d57 1
a57 2
FLAVORS+=	dbase filepro mysql mysql_bundled postgresql iodbc
# FLAVORS+=	freetds
d200 6
a205 6
# .if ${FLAVOR:L:Mfreetds}
# CONFIGURE_ARGS+=        --with-sybase-ct=${LOCALBASE}
# LIB_DEPENDS+=		tds.0,ct.0::databases/freetds
# .else
# CONFIGURE_ARGS+=        --without-sybase-ct
# .endif        
@


1.66
log
@some more Kerberos libs to fix the imap FLAVOR on ELF systems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2002/03/17 04:55:03 brad Exp $
d13 1
a13 1
V=		4.1.2
d224 1
@


1.66.2.1
log
@Apply a patch that filters url handling for control characters which
could get passed through to the application.  Bump PKGNAME.

This is not an issue in the default OpenBSD install since allow_url_fopen
is off.  It will only affect you if:

1) You have altered allow_url_fopen to be on
2) Your PHP applications are brain-dead and do not sanitise user input
before using it.

Tested by Søren Thing Andersen <soeren@@thing.dk> and todd@@
Patch from php-cvs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2002/04/06 23:12:17 brad Exp $
d15 1
a15 1
PKGNAME=	php4-${V}p1
@


1.65
log
@Enable these modules on alpha, powerpc and sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2002/03/03 12:13:29 avsm Exp $
d35 1
a35 1
CONFIGURE_STYLE=	gnu
@


1.64
log
@upgrade to php-4.1.2

closes a security issue in multipart form handling (buffer overflow)

temporarily disable the freetds flavour, since the m4 patch cannot
seem to be regenerated
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2002/01/09 16:00:51 jcs Exp $
d11 1
a11 1
ONLY_FOR_ARCHS=	i386 m68k sparc
@


1.63
log
@Add "freetds" flavor
ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2001/12/27 22:09:32 avsm Exp $
d13 1
a13 1
V=		4.1.1
d57 3
a59 1
FLAVORS+=	dbase filepro mysql mysql_bundled postgresql iodbc freetds
d201 6
a206 6
.if ${FLAVOR:L:Mfreetds}
CONFIGURE_ARGS+=        --with-sybase-ct=${LOCALBASE}
LIB_DEPENDS+=		tds.0,ct.0::databases/freetds
.else
CONFIGURE_ARGS+=        --without-sybase-ct
.endif        
@


1.62
log
@Update to php4-4.1.1

Just a bugfix release on the 4.1 branch, no new features
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2001/12/18 12:48:32 avsm Exp $
d57 1
a57 1
FLAVORS+=	dbase filepro mysql mysql_bundled postgresql iodbc
d197 7
@


1.61
log
@enable sockets support; prodded by jcs@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2001/12/18 01:40:48 avsm Exp $
d13 1
a13 1
V=		4.1.0
@


1.60
log
@Update to php4-4.1.0

Not much response to my post to ports@@ asking for testing, so there
will probably be some breakage in the more obscure flavors and
non-x86 arches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2001/11/19 01:50:34 brad Exp $
d50 1
@


1.59
log
@- bump NEED_VERSION
- add pkgspec for c-client
- rename checksums file
- link with libcom_err_pic vs. libcom_err
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2001/11/17 00:12:23 naddy Exp $
d13 1
a13 1
V=		4.0.6
d15 2
a16 2
PKGNAME=	php4-${V}p1
FULLPKGNAME-pear= php4-pear-${V}p1
d19 1
a19 1
NEED_VERSION=	1.489
d25 1
a25 1
MASTER_SITES=	http://www.php.net:8000/distributions/ \
d208 1
a208 1
	${INSTALL_DATA} ${WRKSRC}/php.ini-optimized ${PREFIX}/share/doc/php4
@


1.58
log
@add lib/mysql path to library dependencies
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2001/10/25 02:34:11 brad Exp $
d19 1
a19 1
NEED_VERSION=	1.474
d82 1
a82 1
LIB_DEPENDS+=		c-client.3::mail/c-client
@


1.57
log
@use gettext module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2001/10/24 12:38:46 espie Exp $
d172 1
a172 1
LIB_DEPENDS+=		mysqlclient.10:mysql-client-3.23.*:databases/mysql
@


1.56
log
@Full lib-depends.
Note that, even --without-gdbm, php3 does pick an installed gdbm...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2001/10/15 00:56:53 avsm Exp $
d75 1
a75 1
LIB_DEPENDS+=		intl.1::devel/gettext
@


1.55
log
@Switch recode, pdflib and iodbc from BUILD to LIB_DEPENDS;
this fixes the relevant binary package dependencies

From Jacob Meuser <jakemsr@@clipper.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2001/10/13 23:22:29 avsm Exp $
d19 1
a19 1
NEED_VERSION=	1.435
d89 1
a89 1
LIB_DEPENDS+=		ldap.2:openldap-client-2.*:databases/openldap
@


1.55.2.1
log
@Upgrade Pine to 4.44 which requires newer c-client.
This also fixes dependency entries for c-client and brings in some other
minor fixes from the -current ports tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2001/10/15 00:56:53 avsm Exp $
d15 2
a16 2
PKGNAME=	php4-${V}p2
FULLPKGNAME-pear= php4-pear-${V}p2
d19 1
a19 1
NEED_VERSION=	1.475
d82 1
a82 1
LIB_DEPENDS+=		c-client.4:c-client->=4.41:mail/c-client
@


1.55.2.2
log
@security fix

PHP supports multipart/form-data POST requests (as described in RFC1867)
known as POST fileuploads. Unfourtunately there are several flaws in the
php_mime_split function that could be used by an attacker to execute
arbitrary code.
- broken boundary check
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55.2.1 2002/01/16 23:52:07 brad Exp $
d15 2
a16 2
PKGNAME=	php4-${V}p3
FULLPKGNAME-pear= php4-pear-${V}p3
@


1.54
log
@update snmp LIB_DEPENDS from 4 -> 42

Jacob Meuser <jakemsr@@clipper.net> and chris@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2001/10/04 21:53:04 avsm Exp $
d117 1
a117 1
BUILD_DEPENDS+=		${LOCALBASE}/lib/librecode.a::converters/recode
d153 1
a153 1
BUILD_DEPENDS+=		${LOCALBASE}/lib/libpdf.a::print/pdflib
d193 1
a193 1
BUILD_DEPENDS+=         ${LOCALBASE}/lib/libiodbc.a::databases/iodbc
@


1.53
log
@- remove sendmail path from php.ini (not needed)
- add in similar fopen disable patch for php.ini-optimized
- bump version to php-4.0.6p1 to reflect all the backports
  and bugfixes in the last two commits
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2001/10/04 21:27:44 avsm Exp $
d124 1
a124 1
LIB_DEPENDS+=		snmp.4::net/ucd-snmp
@


1.52
log
@- fix imap flavor build, enable kerberos support as well
  (checked by heko, naddy)
- work with any LOCALBASE for most flavors (heko)
- turn off url_fopen by default for better security, most people
  never use it
- correctly detect the crypt function as part of libc,
  not a separate library
- unbreak curl, since 7.9 is now present in our tree
- more informative INSTALL script (naddy, heko)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2001/09/28 19:06:30 jakob Exp $
d15 2
a16 2
PKGNAME=	php4-${V}
FULLPKGNAME-pear= php4-pear-${V}
@


1.51
log
@depend on openldap-client
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2001/09/16 20:48:15 avsm Exp $
d60 1
a60 1
CONFIGURE_ARGS+=	--with-curl
a61 1
BROKEN= 	"sorry, curl flavor is broken until net/curl is upgraded to 7.8"
d67 1
a67 1
CONFIGURE_ARGS+=	--with-gdbm
d74 1
a74 1
CONFIGURE_ARGS+=	--with-gettext
d81 2
a82 2
CONFIGURE_ARGS+=	--with-imap=${LOCALBASE} --with-imap-ssl=${LOCALBASE}
LIB_DEPENDS+=		c-client.2::mail/c-client
d95 1
a95 1
CONFIGURE_ARGS+=	--with-mcrypt
d102 1
a102 1
CONFIGURE_ARGS+=	--with-mhash
d109 1
a109 1
CONFIGURE_ARGS+=	--with-mm
d116 1
a116 1
CONFIGURE_ARGS+=	--with-recode
d123 1
a123 1
CONFIGURE_ARGS+=	--with-snmp --enable-ucd-snmp-hack
d130 2
a131 1
MAKE_FLAGS+=		CFLAGS='${CFLAGS} -I${LOCALBASE}/include'
d184 2
@


1.50
log
@fix the packaging; stop the complaints while working on 4.0.7 (coming soon)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2001/08/29 07:03:48 jakob Exp $
d90 1
a90 1
LIB_DEPENDS+=		ldap.2::databases/openldap
@


1.49
log
@retire myself as maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2001/08/17 19:34:51 brad Exp $
d202 1
a202 1
	${INSTALL_DATA} ${WRKBUILD}/.libs/libphp4.so.0.0 \
@


1.48
log
@add to comment about dynamic loading and mention the need for Apache to
support DSO's.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2001/07/18 10:59:01 naddy Exp $
d21 1
a21 1
MAINTAINER=     Anil Madhavapeddy <avsm@@openbsd.org>, Jakob Schlyter <jakob@@openbsd.org>
@


1.47
log
@- Make use of new bsd.port.mk feature and replace error reporting through
  .BEGIN with ERRORS.
- Sync NEED_VERSION accordingly.
ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2001/07/17 15:32:04 avsm Exp $
d9 2
a10 1
# This port current only works with archs supporting dynamic loading
d19 1
a19 1
NEED_VERSION=	1.422
@


1.46
log
@... and yet another dependency for PHP.  This time on libpng
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2001/07/16 09:35:57 avsm Exp $
d18 1
a18 1
NEED_VERSION=	1.402
d149 1
a149 3
.BEGIN:
	@@echo "pdflib FLAVOR requires the gd FLAVOR also"
	@@exit 1
d173 1
a173 3
.BEGIN:
	@@echo "Conflicting flavor: ${FLAVOR}"
	@@exit 1
@


1.45
log
@- pdflib flavor now requires the gd flavor to be included also
- compile in tiff support with gd

problem with pdflib noticed by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2001/07/05 22:55:38 avsm Exp $
d132 2
a133 1
			tiff.35::graphics/tiff
d137 1
@


1.44
log
@Wasn't faking correctly before, fixed now (spotted by wilfried@@)

Also, install more components of PEAR.  This still isn't complete
(we don't install the CGI in addition to the APXS module)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2001/06/23 23:36:35 avsm Exp $
d131 2
a132 2
LIB_DEPENDS+=		gd.18::graphics/gd
.if ${FLAVOR:L:Mno_x11}
d135 1
d137 1
a137 1
.else
d139 1
a139 4
CONFIGURE_ARGS+=	--with-gd \
			--with-jpeg-dir=${LOCALBASE} \
			--with-xpm-dir=${X11BASE} \
			--with-ttf
d146 5
@


1.43
log
@Update to php-4.0.6

- curl flavor is broken until it is updated to 7.8
- better optimisation in the configure args
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2001/06/18 16:27:41 avsm Exp $
d209 1
a209 1
	cd ${WRKSRC}/pear && make install
@


1.42
log
@the php-pear subpackage shouldnt have any dependencies, so
explicitly clear them out

thanks danh@@ !
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2001/06/12 15:07:29 avsm Exp $
d12 1
a12 1
V=		4.0.5
d24 1
a24 1
MASTER_SITES=	http://www.php.net:8000/ \
d47 3
a49 1
			--enable-sysvshm
d61 1
@


1.41
log
@PHP4 now creates a subpackage: php4-pear-4.0.5, which installs the
PEAR base classes into /usr/local/lib/php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2001/06/03 05:32:17 brad Exp $
d4 1
d190 5
@


1.40
log
@update dependency entries for MySQL.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.39 2001/05/10 22:58:06 avsm Exp $
d6 1
d11 5
a15 2
DISTNAME=	php-4.0.5
PKGNAME=	php4-4.0.5
d200 1
@


1.39
log
@Upgrade to PHP-4.0.5

- update MASTER_SITES to account for some wierdness on php.net
- all the old patches have been merged into the source tree now
- add a minor patch to improve the randomness of php temporary files

Upgrade is recommended.  Contains a vast array of bugfixes over
previous PHP4 releases (read the NEWS file)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2001/05/06 04:22:57 lebel Exp $
d158 1
a158 1
LIB_DEPENDS+=		mysqlclient::databases/mysql
@


1.38
log
@www: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2001/04/23 23:58:52 avsm Exp $
d8 2
a9 2
DISTNAME=	php-4.0.4pl1
PKGNAME=	php4-4.0.4pl1
d17 1
a17 2
MASTER_SITES=	http://www.php.net/distributions/ \
		http://us.php.net/distributions/ \
d20 1
a20 1
		http://uk.php.net/distributions/ 
@


1.37
log
@correct curl LIB_DEPENDS from curl.1 -> curl.2 to reflect whats in our
tree; noted by Diana Eichert <deichert@@wrench.com>
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.36 2001/04/22 16:07:12 avsm Exp $
d11 1
a11 1
NEED_VERSION=	1.346
@


1.36
log
@update pgsql configure args for 7.1; from peter@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2001/03/28 21:32:24 avsm Exp $
d50 1
a50 1
LIB_DEPENDS+=		curl.1::net/curl
@


1.35
log
@This needs to have libltdl present for some modules, so add a libtool dependency

Thanks to Pete Fritchman <petef@@databits.net> for help testing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2001/03/09 03:44:26 avsm Exp $
d170 1
a170 1
CONFIGURE_ARGS+=	--with-pgsql=${LOCALBASE}/lib/pgsql
@


1.34
log
@add shared memory functions
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2001/03/07 19:05:34 brad Exp $
d40 2
@


1.33
log
@remove major rev for mysqlclient dependency entry.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2001/03/06 09:04:30 avsm Exp $
d37 3
a39 1
			--with-zlib
@


1.32
log
@- Add a patch to correctly link in the c-client SSL authenticator,
  so that [IMAP|POP3]-SSL works
- PREFIX -> LOCALBASE where appropriate in Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2001/02/28 15:05:54 brad Exp $
d153 1
a153 1
LIB_DEPENDS+=		mysqlclient.10::databases/mysql
@


1.31
log
@mysql client library major rev #
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2001/02/27 20:01:07 avsm Exp $
d66 1
a66 1
CONFIGURE_ARGS+=	--with-imap=${PREFIX}
d73 1
a73 1
CONFIGURE_ARGS+=	--with-ldap=${PREFIX}
d102 1
a102 1
BUILD_DEPENDS+=		${PREFIX}/lib/librecode.a::converters/recode
d119 1
a119 1
			--with-jpeg-dir=${PREFIX} \
d124 1
a124 1
			--with-jpeg-dir=${PREFIX} \
d133 2
a134 2
CONFIGURE_ARGS+=	--with-pdflib=${PREFIX}
BUILD_DEPENDS+=		${PREFIX}/lib/libpdf.a::print/pdflib
d152 1
a152 1
CONFIGURE_ARGS+=	--with-mysql=${PREFIX}
d174 1
a174 1
BUILD_DEPENDS+=         ${PREFIX}/lib/libiodbc.a::databases/iodbc
@


1.30
log
@PHP4 is pretty liberal about what version of libmcrypt is installed,
so relax the dependency in LIB_DEPENDS for the mcrypt flavour.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2001/02/22 20:03:47 avsm Exp $
d153 1
a153 1
LIB_DEPENDS+=		mysqlclient::databases/mysql
@


1.29
log
@use LOCALBASE, not PREFIX in the pgsql configure.  Also add this to the
php3 port.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2001/02/22 19:56:31 avsm Exp $
d81 1
a81 1
LIB_DEPENDS+=		mcrypt.4::security/libmcrypt
@


1.28
log
@upgrade postgresql dependency for new 7.0.3 port layout (danh@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2001/01/28 14:54:59 avsm Exp $
d166 1
a166 1
CONFIGURE_ARGS+=	--with-pgsql=${PREFIX}/lib/pgsql
@


1.27
log
@Remove the 'ftp' flavour and fold it into the default options, to reduce
the proliferation of options this port has.  This needs no external
libraries, so it doesn't introduce any dependencies (jakob@@ ok)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2001/01/28 14:39:39 avsm Exp $
d166 1
a166 1
CONFIGURE_ARGS+=	--with-pgsql=${PREFIX}/pgsql
@


1.26
log
@Relax the mysqlclient restriction; php4 still works with the old 3.22.x
mysqlclient library
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/01/28 14:38:30 avsm Exp $
d34 1
d39 1
a39 1
FLAVORS+=	gdbm gettext ftp imap ldap mhash mm recode snmp
a62 6
.endif

.if ${FLAVOR:L:Mftp}
CONFIGURE_ARGS+=	--enable-ftp
.else
CONFIGURE_ARGS+=	--disable-ftp
@


1.25
log
@Always include the OpenSSL extension, since it now works with both
0.9.5 and 0.9.6; noticed by Neil Darlow <neil@@darlow.co.uk>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2001/01/28 13:31:28 jakob Exp $
d158 1
a158 1
LIB_DEPENDS+=		mysqlclient.10::databases/mysql
@


1.24
log
@update mysql depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/01/12 23:06:36 avsm Exp $
d113 1
a113 1
CONFIGURE_ARGS+=	--with-snmp --enable-ucd-snmp-hack --with-openssl
d116 1
a116 1
CONFIGURE_ARGS+=	--without-snmp --without-openssl
@


1.23
log
@- update to php-4.0.4pl1

Changelog:
- Fixed the various pdf_open_*() functions (Daniel)
- Fixed a bug that could cause invalid INI entries to be used under certain
  circumstances (Zeev)
- Fixed a bug in the Apache module that could cause invalid INI values to
  propogate to different virtual hosts, if one or more of the virtual
  hosts was configured with engine=Off (Zeev)
- Fixed possible crash bugs in the session module (Sascha)
- Fixed the ODBC module to build properly with Solid 3.0 and OpenLink (Dan
  Kalowsky)
- Fixed possible corruption of line number information in PHP scripts (Zeev,
  Zend Engine)
- Fixed a few possible crashes in functions that use user-defined callbacks
  (Zeev, Zend Engine)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/01/07 21:08:11 avsm Exp $
d158 1
a158 1
LIB_DEPENDS+=		mysqlclient.6::databases/mysql
@


1.22
log
@Add a couple of patches from venaas@@php.net to allow PHP-4.0.4 to work
with OpenSSL 0.9.5a, instead of requiring only OpenSSL 0.9.6
These patches detect the revelant version and use the additional return
values in 0.9.6 only if present.

This also unbreaks the SNMP flavor on 2.8-stable, which requires SSL
support, since our UCD-SNMP daemon has OpenSSL compiled into it
(wierd, but thats how the PHP snmp-config.m4 works)

- Add OpenSSL patches
- Add note crypt.c patch that its now in 4.0.5-dev and can be removed soon
- Add --with-openssl to the standard set of configure options
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/01/06 14:17:33 avsm Exp $
d6 2
a7 2
DISTNAME=	php-4.0.4
PKGNAME=	php4-4.0.4
@


1.21
log
@Add a curl FLAVOR (for the Client URL library) to retrieve stuff via
gopher, dict, ldap, telnet, http(s), etc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/01/05 22:47:21 avsm Exp $
d35 1
@


1.20
log
@update snmp flavor libdepends - from danh@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/01/04 00:51:23 brad Exp $
d38 1
a38 1
FLAVORS+=	gd no_x11 pdflib mcrypt
d41 7
@


1.19
log
@remove mips and powerpc from ONLY_FOR_ARCHS, these platforms do not even
ship with an Apache compiled with DSO support yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2001/01/03 00:33:38 avsm Exp $
d106 1
a106 1
LIB_DEPENDS+=		snmp.41::net/ucd-snmp
@


1.18
log
@PHP4 should work fine on the powerpc now.
Confirmed by Nicholas Merill <lists@@mojo.calyx.net>
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.17 2000/12/28 23:37:22 avsm Exp $
a25 3
# This port current only works with archs supporting dynamic loading
ONLY_FOR_ARCHS=		i386 m68k sparc mips powerpc

d182 1
a182 1
	sed 's,y0y0y0,${TRUEPREFIX},' \
d184 2
a185 2
	chown ${BINOWN}:${BINGRP} ${PREFIX}/sbin/php4-enable
	chmod ${BINMODE} ${PREFIX}/sbin/php4-enable
@


1.17
log
@- remove MASTER_SITES0 as its not needed anymore
- add UK master site
- take joint MAINTAINER (jakob@@ ok)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/12/28 17:53:16 avsm Exp $
d24 1
a24 1
ONLY_FOR_ARCHS=		i386 m68k sparc mips
@


1.16
log
@Add in a flavor for mcrypt, an interface to block and stream
encryption algorithms.

The patches are a backport from PHP-CVS to the mcrypt m4 script, which
didn't pick up the right version of libmcrypt.  I've included the
m4 patch also, since the outputted configure script patch will make no
sense to anyone who looks at it in the future.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/12/26 23:35:43 avsm Exp $
d8 1
a8 1
MAINTAINER=     Jakob Schlyter <jakob@@openbsd.org>
d15 2
a16 6
		http://no.php.net/distributions/

MASTER_SITES0=	http://www.php.net/extra/ \
		http://us.php.net/extra/ \
		http://se.php.net/extra/ \
		http://no.php.net/extra/
@


1.15
log
@- update to php-4.0.4
- bump NEED_VERSION
- no longer need extra distfile number4.tar.gz since it has
  been integrated into the main distribution
- ltconfig, mysql socket patches are in main distribution now,
  so they are removed.  Note that the ltconfig patch was only
  applied to the 4_0_4 branch by the PHP team, so we will have
  to resubmit it for the next version, unless libtool-cvs has
  been updated with our information.
- Since php3/4 conflict with each other anyway, versioning is
  not needed.

ok jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/12/18 20:29:25 dugsong Exp $
d42 1
a42 1
FLAVORS+=	gd no_x11 pdflib
d78 7
@


1.14
log
@add iodbc flavor; from <polandj@@arbornetworks.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/12/15 21:36:09 brad Exp $
d3 2
a4 2
DISTNAME=	php-4.0.3pl1
PKGNAME=	php4-4.0.3pl1p1
d6 1
a6 1
NEED_VERSION=	1.319
a21 4
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} number4.tar.gz:0
EXTRACT_ONLY=	${DISTNAME}${EXTRACT_SUFX}
DIST_SUBDIR=	php4

a35 1
			--enable-versioning \
a171 3

post-extract:
	@@(cd ${WRKSRC}; tar xzf ${FULLDISTDIR}/number4.tar.gz)
@


1.13
log
@sync PKGNAME with -STABLE branch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/12/14 15:25:20 brad Exp $
d48 1
a48 1
FLAVORS+=	dbase filepro mysql mysql_bundled postgresql
d171 6
@


1.12
log
@a few BUILD_DEPENDS -> LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/11/28 15:44:31 jakob Exp $
d4 1
a4 1
PKGNAME=	php4-4.0.3pl1
@


1.11
log
@fix build problem with gd flavour; noted by <dwarf@@wizeazz.dhs.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/10/17 20:33:39 jakob Exp $
d49 1
a49 1
FLAVOR?=
d53 1
a53 1
BUILD_DEPENDS+=		${PREFIX}/lib/libgdbm.a::databases/gdbm
d60 1
a60 1
BUILD_DEPENDS+=		${PREFIX}/lib/libintl.a::devel/gettext
d73 1
a73 1
BUILD_DEPENDS+=		${PREFIX}/lib/libc-client.a::mail/c-client
d80 1
a80 1
BUILD_DEPENDS+=		${PREFIX}/lib/libldap.a::databases/openldap
d87 1
a87 1
BUILD_DEPENDS+=		${PREFIX}/lib/libmhash.a::security/mhash
d94 1
a94 1
BUILD_DEPENDS+=		${PREFIX}/lib/libmm.a::devel/mm
d108 1
a108 1
BUILD_DEPENDS+=		${PREFIX}/lib/libsnmp.a::net/ucd-snmp
d115 1
d118 2
a119 2
			--with-jpeg-dir=${PREFIX} 
BUILD_DEPENDS+=		${PREFIX}/lib/libgd.a::graphics/gd
a125 2
BUILD_DEPENDS+=		${PREFIX}/lib/libgd.a::graphics/gd \
			${PREFIX}/lib/libttf.a::print/freetype
d152 1
a152 1
BUILD_DEPENDS+=		${PREFIX}/lib/mysql/libmysqlclient.a::databases/mysql
d166 1
a166 1
BUILD_DEPENDS+=		${PREFIX}/pgsql/lib/libpq.a::databases/postgresql
@


1.10
log
@mhash flavour dependency fix; avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/10/15 14:50:16 jakob Exp $
d114 1
@


1.10.2.1
log
@fix build problem with gd flavour; noted by <dwarf@@wizeazz.dhs.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/11/28 15:44:31 jakob Exp $
a113 1
MAKE_FLAGS+=		CFLAGS='${CFLAGS} -I${LOCALBASE}/include'
@


1.10.2.2
log
@MFC:
BUILD_DEPENDS -> LIB_DEPENDS
Use customary framework for INSTALL/DEINSTALL scripts; fixes INSTALL.

requested by brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10.2.1 2000/11/28 15:46:25 jakob Exp $
d49 1
a49 1
FLAVOR?= 
d53 1
a53 1
LIB_DEPENDS+=		gdbm.2::databases/gdbm
d60 1
a60 1
LIB_DEPENDS+=		intl.1::devel/gettext
d73 1
a73 1
LIB_DEPENDS+=		c-client.2::mail/c-client
d80 1
a80 1
LIB_DEPENDS+=		ldap.2::databases/openldap
d87 1
a87 1
LIB_DEPENDS+=		mhash.2::security/mhash
d94 1
a94 1
LIB_DEPENDS+=		mm.11::devel/mm
d108 1
a108 1
LIB_DEPENDS+=		snmp.41::net/ucd-snmp
a114 1
LIB_DEPENDS+=		gd.18::graphics/gd
d117 2
a118 2
			--with-jpeg-dir=${PREFIX} \
			--with-ttf
d125 2
d153 1
a153 1
LIB_DEPENDS+=		mysqlclient.6::databases/mysql
d167 1
a167 1
LIB_DEPENDS+=		pq.2::databases/postgresql
@


1.10.2.3
log
@Increment package version after fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10.2.2 2000/12/15 18:32:55 naddy Exp $
d4 1
a4 1
PKGNAME=	php4-4.0.3pl1p1
@


1.9
log
@update to 4.0.3pl1; fixes memory leak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/10/12 16:23:08 jakob Exp $
d87 1
a87 1
BUILD_DEPENDS+=		${PREFIX}/lib/libmhash.a::devel/mhash
@


1.8
log
@security fix upgrade to v4.0.3, ok turan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/10/05 21:25:36 jakob Exp $
d3 2
a4 2
DISTNAME=	php-4.0.3
PKGNAME=	php4-4.0.3
@


1.7
log
@add ldap flavour (untested)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/10/04 21:54:05 jakob Exp $
d3 2
a4 2
DISTNAME=	php-4.0.2
PKGNAME=	php4-4.0.2
@


1.6
log
@add fullname to MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/10/04 21:19:13 jakob Exp $
d46 2
a47 1
FLAVORS+=	gdbm gettext ftp imap mhash mm recode snmp gd no_x11 pdflib
d76 7
@


1.5
log
@add mhash flavour
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2000/09/28 20:39:24 jakob Exp $
d8 1
a8 1
MAINTAINER=     jakob@@openbsd.org
@


1.4
log
@add pdflib flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/09/25 20:03:49 jakob Exp $
d46 1
a46 1
FLAVORS+=	gdbm gettext ftp imap mm recode snmp gd no_x11 pdflib
d75 7
@


1.3
log
@flavourize most options.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/09/04 21:15:40 jakob Exp $
d46 1
a46 1
FLAVORS+=	gdbm gettext ftp imap mm recode snmp gd no_x11
d114 7
@


1.2
log
@remove USE_LIBTOOL as php4 always uses its own libtool; Evan Champion <evanc@@concer.to>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/09/03 11:55:00 jakob Exp $
a38 1
			--disable-ftp \
d46 5
a50 1
# gdbm
d53 3
d57 1
a57 1
# gettext
d60 3
d64 7
a70 1
# imap
d73 3
d77 1
a77 1
# mm
d80 3
d84 1
a84 1
# recode
d87 3
d91 1
a91 1
# snmp
d94 3
d98 1
a98 3
FLAVORS=	dbase filepro mysql mysql_bundled postgresql no_x11
FLAVOR?=

d111 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/04/17 19:29:47 jakob Exp $
a45 2

USE_LIBTOOL=		yes
@


1.1.1.1
log
@server-side HTML-embedded scripting language
@
text
@@
