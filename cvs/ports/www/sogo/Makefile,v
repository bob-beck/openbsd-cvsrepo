head	1.73;
access;
symbols
	OPENBSD_6_1:1.67.0.2
	OPENBSD_6_1_BASE:1.67
	OPENBSD_6_0:1.62.0.2
	OPENBSD_6_0_BASE:1.62
	OPENBSD_5_9:1.54.0.2
	OPENBSD_5_9_BASE:1.54
	OPENBSD_5_8:1.47.0.4
	OPENBSD_5_8_BASE:1.47
	OPENBSD_5_7:1.44.0.2
	OPENBSD_5_7_BASE:1.44
	OPENBSD_5_6:1.40.0.2
	OPENBSD_5_6_BASE:1.40
	OPENBSD_5_5:1.37.0.2
	OPENBSD_5_5_BASE:1.37
	OPENBSD_5_4:1.31.0.2
	OPENBSD_5_4_BASE:1.31
	OPENBSD_5_3:1.28.0.2
	OPENBSD_5_3_BASE:1.28
	OPENBSD_5_2:1.19.0.2
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.2
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	sebastia_20101124:1.1.1.1
	sebastia:1.1.1;
locks; strict;
comment	@# @;


1.73
date	2017.07.27.10.05.20;	author sthen;	state Exp;
branches;
next	1.72;
commitid	GaeX7RvWvJNgCIJE;

1.72
date	2017.07.07.10.41.05;	author sebastia;	state Exp;
branches;
next	1.71;
commitid	Lmj8FHSBOIJ48js6;

1.71
date	2017.07.05.21.11.50;	author sebastia;	state Exp;
branches;
next	1.70;
commitid	xDJ5dNQ2kLEz4mt1;

1.70
date	2017.06.20.19.28.25;	author giovanni;	state Exp;
branches;
next	1.69;
commitid	y7mSyY73KBEHkleG;

1.69
date	2017.05.09.20.50.06;	author sebastia;	state Exp;
branches;
next	1.68;
commitid	HdXtGnJo1ui72wU8;

1.68
date	2017.04.21.17.27.38;	author sebastia;	state Exp;
branches;
next	1.67;
commitid	wRsBVHNaVjoI6IkR;

1.67
date	2017.02.02.21.34.34;	author sebastia;	state Exp;
branches;
next	1.66;
commitid	dyiyb6ka5ueyGDj3;

1.66
date	2016.12.05.21.48.35;	author sebastia;	state Exp;
branches;
next	1.65;
commitid	PqcKCyLj338hrvCj;

1.65
date	2016.11.03.21.52.59;	author sebastia;	state Exp;
branches;
next	1.64;
commitid	nD64TQj08ETC7Kev;

1.64
date	2016.11.02.21.34.08;	author sebastia;	state Exp;
branches;
next	1.63;
commitid	MVfaVopY0tgFBX2G;

1.63
date	2016.11.02.10.16.20;	author giovanni;	state Exp;
branches;
next	1.62;
commitid	K1Roh4Ycnr5EcHH0;

1.62
date	2016.06.15.14.03.20;	author sebastia;	state Exp;
branches
	1.62.2.1;
next	1.61;
commitid	8jJ8E3xzh9mwt5Qc;

1.61
date	2016.06.03.13.57.47;	author sebastia;	state Exp;
branches;
next	1.60;
commitid	p8cExF1QXv74qgO2;

1.60
date	2016.06.03.11.58.27;	author sebastia;	state Exp;
branches;
next	1.59;
commitid	9SEj9QRLeDniDOfu;

1.59
date	2016.05.02.10.38.27;	author sebastia;	state Exp;
branches;
next	1.58;
commitid	47bXbd6W59aexb2J;

1.58
date	2016.04.13.21.32.20;	author sebastia;	state Exp;
branches;
next	1.57;
commitid	JcHULIY2uvHzUQXu;

1.57
date	2016.03.31.09.00.29;	author sebastia;	state Exp;
branches;
next	1.56;
commitid	CWWlNFCnnnsChpmy;

1.56
date	2016.03.13.22.22.15;	author sebastia;	state Exp;
branches;
next	1.55;
commitid	YdCzzUZ7LKCH3Jwr;

1.55
date	2016.03.05.16.04.06;	author pascal;	state Exp;
branches;
next	1.54;
commitid	EJSWd5DpdfEFGBlM;

1.54
date	2016.01.27.18.44.51;	author sebastia;	state Exp;
branches;
next	1.53;
commitid	utkMXmTF6eKi2SSU;

1.53
date	2016.01.25.21.33.50;	author sebastia;	state Exp;
branches;
next	1.52;
commitid	otzonBHX2qLI0x3z;

1.52
date	2016.01.12.17.29.58;	author sebastia;	state Exp;
branches;
next	1.51;
commitid	6cb86jMgk7OzLQ6G;

1.51
date	2016.01.10.18.45.10;	author sebastia;	state Exp;
branches;
next	1.50;
commitid	Af1iGTpbfGq6uL7B;

1.50
date	2015.10.26.11.55.36;	author sebastia;	state Exp;
branches;
next	1.49;
commitid	1nFEoNl0ihViUnNl;

1.49
date	2015.10.23.07.53.46;	author sebastia;	state Exp;
branches;
next	1.48;
commitid	iZSF3or5d1Vzyt9t;

1.48
date	2015.09.26.14.29.22;	author sebastia;	state Exp;
branches;
next	1.47;
commitid	S9Qb6uAlmCorHjCl;

1.47
date	2015.07.17.21.23.08;	author ajacoutot;	state Exp;
branches;
next	1.46;
commitid	IE03QX0iL1TlY87a;

1.46
date	2015.05.10.11.41.12;	author sebastia;	state Exp;
branches;
next	1.45;
commitid	H9smtIUxMTQxeQKt;

1.45
date	2015.04.29.09.15.28;	author giovanni;	state Exp;
branches;
next	1.44;
commitid	X9rbtCnXJNcAoito;

1.44
date	2015.01.16.09.51.18;	author sebastia;	state Exp;
branches;
next	1.43;
commitid	2WfMwxW9XZnM7OLC;

1.43
date	2014.12.14.17.04.50;	author sebastia;	state Exp;
branches;
next	1.42;
commitid	KNcT1mLpzkUKL7sF;

1.42
date	2014.11.21.18.23.45;	author sebastia;	state Exp;
branches;
next	1.41;
commitid	BmXNO3LCxjFWNlWp;

1.41
date	2014.10.17.09.20.03;	author sebastia;	state Exp;
branches;
next	1.40;
commitid	m39TR434mSdwYjbW;

1.40
date	2014.06.12.06.16.35;	author sebastia;	state Exp;
branches;
next	1.39;
commitid	fBoWwCqEIjkHAE8J;

1.39
date	2014.05.22.09.50.07;	author sebastia;	state Exp;
branches;
next	1.38;

1.38
date	2014.05.16.17.00.21;	author sebastia;	state Exp;
branches;
next	1.37;

1.37
date	2014.01.11.12.56.41;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2014.01.08.20.28.54;	author brad;	state Exp;
branches;
next	1.35;

1.35
date	2014.01.03.18.39.51;	author sebastia;	state Exp;
branches;
next	1.34;

1.34
date	2013.10.19.13.26.21;	author sebastia;	state Exp;
branches;
next	1.33;

1.33
date	2013.10.19.09.49.16;	author sebastia;	state Exp;
branches;
next	1.32;

1.32
date	2013.08.24.11.16.04;	author sebastia;	state Exp;
branches;
next	1.31;

1.31
date	2013.07.20.17.39.17;	author sebastia;	state Exp;
branches
	1.31.2.1;
next	1.30;

1.30
date	2013.04.25.16.43.05;	author sebastia;	state Exp;
branches;
next	1.29;

1.29
date	2013.03.11.11.44.49;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2013.02.06.17.36.11;	author sebastia;	state Exp;
branches
	1.28.2.1;
next	1.27;

1.27
date	2013.02.01.09.28.46;	author giovanni;	state Exp;
branches;
next	1.26;

1.26
date	2013.01.30.18.28.46;	author sebastia;	state Exp;
branches;
next	1.25;

1.25
date	2012.12.16.16.36.26;	author sebastia;	state Exp;
branches;
next	1.24;

1.24
date	2012.11.20.09.51.06;	author sebastia;	state Exp;
branches;
next	1.23;

1.23
date	2012.11.15.10.25.50;	author giovanni;	state Exp;
branches;
next	1.22;

1.22
date	2012.10.30.15.09.53;	author sebastia;	state Exp;
branches;
next	1.21;

1.21
date	2012.08.22.07.16.37;	author sebastia;	state Exp;
branches;
next	1.20;

1.20
date	2012.08.17.09.59.08;	author sebastia;	state Exp;
branches;
next	1.19;

1.19
date	2012.07.08.14.21.02;	author sebastia;	state Exp;
branches;
next	1.18;

1.18
date	2012.03.31.17.02.23;	author sebastia;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.18.11.15.13;	author sebastia;	state Exp;
branches;
next	1.16;

1.16
date	2011.09.16.12.00.09;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2011.07.28.11.25.22;	author sebastia;	state Exp;
branches;
next	1.14;

1.14
date	2011.07.21.06.30.44;	author sebastia;	state Exp;
branches;
next	1.13;

1.13
date	2011.06.07.11.29.55;	author sebastia;	state Exp;
branches;
next	1.12;

1.12
date	2011.06.02.13.41.41;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.05.11.10.55.53;	author sebastia;	state Exp;
branches;
next	1.10;

1.10
date	2011.05.05.23.00.20;	author sebastia;	state Exp;
branches;
next	1.9;

1.9
date	2011.04.22.05.36.12;	author sebastia;	state Exp;
branches;
next	1.8;

1.8
date	2011.04.18.12.48.29;	author sebastia;	state Exp;
branches;
next	1.7;

1.7
date	2010.12.27.14.50.24;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.12.24.10.40.06;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.12.22.09.23.01;	author sebastia;	state Exp;
branches;
next	1.4;

1.4
date	2010.12.13.18.30.10;	author sebastia;	state Exp;
branches;
next	1.3;

1.3
date	2010.12.11.14.21.08;	author sebastia;	state Exp;
branches;
next	1.2;

1.2
date	2010.11.25.02.16.12;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2010.11.24.18.16.03;	author sebastia;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.11.24.18.16.03;	author sebastia;	state Exp;
branches;
next	;

1.28.2.1
date	2013.07.22.16.04.09;	author sebastia;	state Exp;
branches;
next	;

1.31.2.1
date	2013.11.17.14.53.49;	author sebastia;	state Exp;
branches;
next	;

1.62.2.1
date	2016.11.04.15.01.10;	author giovanni;	state Exp;
branches;
next	;
commitid	gcDabtnkROrgsYiv;


desc
@@


1.73
log
@add COMPILER_LIBCXX to WANTLIB and bump
@
text
@# $OpenBSD: Makefile,v 1.72 2017/07/07 10:41:05 sebastia Exp $

COMMENT = 	web based groupware server

VERSION =	3.2.10
DISTNAME =	SOGo-${VERSION}
PKGNAME =	sogo-${VERSION}
REVISION =	0

SHARED_LIBS +=	GDLContentStore 3.0
SHARED_LIBS +=	NGCards		3.0
SHARED_LIBS +=	SOGo		4.1
SHARED_LIBS +=	SOGoUI		2.1

CATEGORIES =	www
HOMEPAGE =	http://www.sogo.nu/
MASTER_SITES =	${HOMEPAGE}/files/downloads/SOGo/Sources/
MAINTAINER =	Sebastian Reitenbach <sebastia@@openbsd.org>

# LGPLv2/GPLv2
PERMIT_PACKAGE_CDROM =		Yes

MODULES =		x11/gnustep
MODGNUSTEP_NEEDS_GUI =	No

WANTLIB +=		c m pthread crypto memcached SBJson
WANTLIB +=		DOM EOControl GDLAccess NGExtensions NGLdap
WANTLIB +=		NGMime NGObjWeb NGStreams SaxObjC WEExtensions
WANTLIB +=		objc2 gnustep-base curl
WANTLIB += ${COMPILER_LIBCXX}

LIB_DEPENDS +=		devel/libmemcached \
			net/curl \
			www/sope>=${VERSION}
RUN_DEPENDS +=		sope-postgres-*|sope-mysql-*:www/sope,-postgres \
			archivers/zip

.if ${MACHINE_ARCH} == "powerpc"
PATCH_LIST =		patch-* gcc-*
.endif

CONFIGURE_STYLE =	simple dest
CONFIGURE_ARGS +=	--gsmake=`gnustep-config --variable=GNUSTEP_MAKEFILES` \
			--with-ssl=ssl
MAKE_FLAGS +=		libGDLContentStore_INTERFACE_VERSION=${LIBGDLContentStore_VERSION} \
			libNGCards_INTERFACE_VERSION=${LIBNGCards_VERSION} \
			libOGoContentStore_INTERFACE_VERSION=${LIBOGoContentStore_VERSION} \
			libSOGoUI_INTERFACE_VERSION=${LIBSOGoUI_VERSION} \
			SOGo_INTERFACE_VERSION=${LIBSOGo_VERSION}

SOGOLIBDIR =	lib/GNUstep/Frameworks/SOGo.framework/Versions/${LIBSOGo_VERSION}
SUBST_VARS +=	SOGOLIBDIR VARBASE

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/sogo
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/cas-proxy-validate.py \
		${PREFIX}/share/doc/sogo/cas-proxy-validate.py
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/sql-update-1.3.11_to_1.3.12.sh \
		${PREFIX}/share/doc/sogo/sql-update-1.3.11_to_1.3.12-postgres.sh
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/sql-update-1.3.11_to_1.3.12-mysql.sh \
		${PREFIX}/share/doc/sogo/sql-update-1.3.11_to_1.3.12-mysql.sh
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/sql-update-1.3.16_to_1.3.17.sh \
		${PREFIX}/share/doc/sogo/sql-update-1.3.16_to_1.3.17-postgres.sh
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/sql-update-1.3.16_to_1.3.17-mysql.sh \
		${PREFIX}/share/doc/sogo/sql-update-1.3.16_to_1.3.17-mysql.sh
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/sql-update-2.2.17_to_2.3.0.sh \
		${PREFIX}/share/doc/sogo/sql-update-2.2.17_to_2.3.0-postgres.sh
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/sql-update-2.2.17_to_2.3.0-mysql.sh \
		${PREFIX}/share/doc/sogo/sql-update-2.2.17_to_2.3.0-mysql.sh
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/sql-update-3.0.0-to-combined.sh \
		${PREFIX}/share/doc/sogo/sql-update-3.0.0-to-combined.sh
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/sql-update-3.0.0-to-combined-mysql.sh \
		${PREFIX}/share/doc/sogo/sql-update-3.0.0-to-combined-mysql.sh
	${INSTALL_SCRIPT} -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${WRKSRC}/Scripts/updates.php \
		${PREFIX}/share/doc/sogo/updates.php

do-test:
	cd ${WRKSRC}/Tests/Integration && ${MAKE_PROGRAM} && ./teststrings.sh
	cd ${WRKSRC}/Tests/Unit && ${MAKE_PROGRAM} && obj/sogo-tests

.include <bsd.port.mk>
@


1.72
log
@update to 3.2.10

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2017/07/05 21:11:50 sebastia Exp $
d8 1
d30 1
@


1.71
log
@Update to 3.2.9, needed for the SOGo update over the major release.

Under the hood, it's compatible to the legacy 2.X version, and no
DB upgrade etc. needed. On the frontent side, it provides a new,
shiny web interface.

Tests, feedback and OK giovanni@@, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2017/06/20 19:28:25 giovanni Exp $
d5 1
a5 1
VERSION =	3.2.9
d11 1
a11 1
SHARED_LIBS +=	SOGo		4.0
@


1.70
log
@update to 2.3.21
ok sebastia@@ (maintainer)
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.69 2017/05/09 20:50:06 sebastia Exp $

PORTROACH+=	limit:^2
d5 1
a5 1
VERSION =	2.3.21
d9 4
a12 4
SHARED_LIBS +=	GDLContentStore 2.0
SHARED_LIBS +=	NGCards		2.0
SHARED_LIBS +=	SOGo		3.0
SHARED_LIBS +=	SOGoUI		2.0
d75 6
@


1.69
log
@simple update to 2.3.20, mostly bux fixes, few new features/enhancements
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2017/04/21 17:27:38 sebastia Exp $
d7 1
a7 1
VERSION =	2.3.20
@


1.68
log
@Bump REVISION after update of gnustep-make

The symlink of the shared library in lib doesn't point to
GNUstep/Frameworks/$FRAMEWORK.framework/Versions/Current/libnetclasses.so.${SHLIB_VERSION}
anymore but now to
GNUstep/Frameworks/netclasses.framework/Versions/${SHLIB_VERSION}/libnetclasses.so.${SHLIB_VERSION}

It's not easily visible in pkg/PLIST, but on package creation plistdb catched it

problem pointed out by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2017/02/02 21:34:34 sebastia Exp $
d7 1
a7 2
REVISION =	0
VERSION =	2.3.19
@


1.67
log
@Minor update to 2.3.19, also works for Davide Gerhard rainbow at irh it
Tighten version dependency to www/sope, as proposed by and discussed by Davide
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2016/12/05 21:48:35 sebastia Exp $
d7 1
@


1.66
log
@Update to 2.3.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2016/11/03 21:52:59 sebastia Exp $
d7 1
a7 1
VERSION =	2.3.18
d34 1
a34 1
			www/sope
@


1.65
log
@Really add the patch to fix the empty calendar, and bump again.

yesterday really wasn't my day, as pointed out by giovanni@@ ;)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2016/11/02 21:34:08 sebastia Exp $
d7 1
a7 2
VERSION =	2.3.17
REVISION =	1
@


1.64
log
@Fix crasher rendering the calendar web interface, as pointed out
by giovanni@@ seems NSNull doesn't like to receive messages it doesn't understand
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2016/11/02 10:16:20 giovanni Exp $
d8 1
a8 1
REVISION =	0
@


1.63
log
@Update to 2.3.17
similar diff and ok sebastia@@ (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2016/06/15 14:03:20 sebastia Exp $
d8 1
@


1.62
log
@Update to 2.3.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2016/06/03 13:57:47 sebastia Exp $
d7 1
a7 1
VERSION =	2.3.12
@


1.62.2.1
log
@Fix empty calendar in web gui
patch and ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2016/06/15 14:03:20 sebastia Exp $
a9 1
REVISION =	0
@


1.61
log
@Update to 2.3.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2016/06/03 11:58:27 sebastia Exp $
d7 1
a7 1
VERSION =	2.3.11
@


1.60
log
@bump after gnustep make/base update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2016/05/02 10:38:27 sebastia Exp $
d7 1
a7 2
REVISION =	1
VERSION =	2.3.10
@


1.59
log
@Update README now that apache-httpd-openbsd is gone, and refer to the
apache-httpd package. Simplify the README, since that setup is described
in the manual.
Further enhance some other wording.

pointed out by ajacoutot.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2016/04/13 21:32:20 sebastia Exp $
d7 1
a7 1
REVISION =	0
@


1.58
log
@Minor update to 2.3.10

http://sogo.nu/news/2016/article/sogo-v2310-released.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2016/03/31 09:00:29 sebastia Exp $
d7 1
@


1.57
log
@Update to 2.3.9

https://www.mail-archive.com/users@@sogo.nu/msg23844.html

Add PORTROACH marker to stick to the 2.X versions for the time being
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2016/03/13 22:22:15 sebastia Exp $
d7 1
a7 1
VERSION =	2.3.9
@


1.56
log
@Update to 2.3.8
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.55 2016/03/05 16:04:06 pascal Exp $
d7 1
a7 1
VERSION =	2.3.8
@


1.55
log
@Bump REVISION for lang/clang MODULE changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2016/01/27 18:44:51 sebastia Exp $
d5 3
a7 4
VERSION =	2.3.7
DISTNAME =	SOGo-${VERSION}a
PKGNAME =	sogo-${VERSION}.0
REVISION =	0
@


1.54
log
@Update to 2.3.7a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/01/25 21:33:50 sebastia Exp $
d8 1
@


1.53
log
@Update to 2.3.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2016/01/12 17:29:58 sebastia Exp $
d5 3
a7 3
VERSION =	2.3.6
DISTNAME =	SOGo-${VERSION}
PKGNAME =	sogo-${VERSION}
@


1.52
log
@Update to 2.3.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2016/01/10 18:45:10 sebastia Exp $
d5 1
a5 1
VERSION =	2.3.5
@


1.51
log
@Update to 2.3.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/10/26 11:55:36 sebastia Exp $
d5 1
a5 1
VERSION =	2.3.4
@


1.50
log
@Bump after gnustep module update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2015/10/23 07:53:46 sebastia Exp $
d5 1
a5 2
VERSION =	2.3.2
REVISION =	1
@


1.49
log
@Fix the DB schema update scripts, that somehow got lost with the
update to 2.3.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2015/09/26 14:29:22 sebastia Exp $
d6 1
a6 1
REVISION =	0
@


1.48
log
@Update to 2.3.2

Major verion jump, on upgrade, which includes a DB schema change.
For additional upgrade instructions to the usual ones, check the README.

Enable a couple of tests that don't require a configuration, and DB etc.
Thought 3 are failing.

OK giovanni@@ (who also gave OK for www/sogo)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2015/07/17 21:23:08 ajacoutot Exp $
d6 1
@


1.47
log
@sudo(8) -> su(1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2015/05/10 11:41:12 sebastia Exp $
d5 3
a7 4
VERSION =	2.2.17
DISTNAME =	SOGo-${VERSION}a
PKGNAME =	sogo-${VERSION}.0
REVISION =	0
d11 1
a11 1
SHARED_LIBS +=	SOGo		2.3
d70 6
d78 4
@


1.46
log
@Update to 2.2.17a

With 2.2.17 or 2.2.16, the default build against gnutls got broken,
so "fix" configure to allow correct detection of availability of
openssl, or better libressl, and use that instead.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/04/29 09:15:28 giovanni Exp $
d8 1
@


1.45
log
@"proxy_http_version 1.1;" is needed in nginx.conf to support some third party
webdav plugins
fix readme: sendmail and nginx are no more in base
ok sebastia@@ (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/01/16 09:51:18 sebastia Exp $
d5 3
a7 4
VERSION =	2.2.13
REVISION =	0
DISTNAME =	SOGo-${VERSION}
PKGNAME =	sogo-${VERSION}
d28 1
a28 1
WANTLIB +=		objc2 gnustep-base curl gnutls
d42 1
a42 1
			--with-ssl=gnutls
@


1.44
log
@update to 2.2.13
having it running on my test box since a while without issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2014/12/14 17:04:50 sebastia Exp $
d6 1
@


1.43
log
@Update to 2.2.11a

as usual, lots of bugs fixed, and enhancements
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/11/21 18:23:45 sebastia Exp $
d5 3
a7 3
VERSION =	2.2.11
DISTNAME =	SOGo-${VERSION}a
PKGNAME =	sogo-${VERSION}.0
d11 1
a11 1
SHARED_LIBS +=	SOGo		2.2
@


1.42
log
@bump revision after gnustep-base update, while there, change mysql-server
-> mariadb-server, as pointed out to me some time ago from Marcus MERIGHI
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2014/10/17 09:20:03 sebastia Exp $
d5 1
a5 2
VERSION =	2.2.9
REVISION =	0
@


1.41
log
@Update sogo to 2.2.9a

had most or even all intermediate versions running, some of them
introduced problems, that were fixed in following version, introducing
new problems, ...
Have this now running since a few weeks without issues
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2014/06/12 06:16:35 sebastia Exp $
d6 1
@


1.40
log
@Make the nginx configuration match the apache configuration example
in the README, incl. some minor style nits.

feedback and OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/05/22 09:50:07 sebastia Exp $
d5 3
a7 4
VERSION =	2.1.1
DISTNAME =	SOGo-${VERSION}b
PKGNAME =	sogo-${VERSION}.1
REVISION =	3
d11 1
a11 2
SHARED_LIBS +=	OGoContentStore	2.0
SHARED_LIBS +=	SOGo		2.1
a51 6
pre-configure:
.for f in SOGo_Installation_Guide SOGo_Mobile_Devices_Configuration \
    SOGo_Mozilla_Thunderbird_Configuration SOGo_Native_Microsoft_Outlook_Configuration
	cd ${WRKSRC}/Documentation; mv "${f:S/_/ /g}.odt" "$f.odt"
.endfor

a53 1
	${INSTALL_DATA} ${WRKSRC}/Documentation/* ${PREFIX}/share/doc/sogo
@


1.39
log
@bump revision due to gnustep.port.mk overhaul and portcheck fixes

feedback and OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2014/05/16 17:00:21 sebastia Exp $
d8 1
a8 1
REVISION =	2
@


1.38
log
@Add nginx configuration example to pkg README, from giovanni@@, with
minor tweak from me.

Feel free to commit, giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2014/01/11 12:56:41 ajacoutot Exp $
d8 1
a8 1
REVISION =	1
d52 1
a52 1
SUBST_VARS +=	SOGOLIBDIR
@


1.37
log
@Do not hardcode /usr/local.
Do not use SYSCONFDIR for base system etc files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/01/08 20:28:54 brad Exp $
d8 1
a8 1
REVISION =	0
@


1.36
log
@Move this patch so it will only be applied on PowerPC since the command
line parameter being added in the patch has no relevance for LLVM.

ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/01/03 18:39:51 sebastia Exp $
d8 1
@


1.35
log
@update SOGo to 2.1.1b

the default changed where the SOGo daemon listens on: now on 127.0.0.1:20000
If needed, to get back the old behaviour listening on *:20000 follow instructions in the
pkg README.

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/10/19 13:26:21 sebastia Exp $
d36 4
@


1.34
log
@bump due to building with clang and using non-fragile-abi on i386 and amd64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/10/19 09:49:16 sebastia Exp $
d5 3
a7 4
VERSION =	2.0.7
REVISION =	1
DISTNAME =	SOGo-${VERSION}
PKGNAME =	sogo-${VERSION}
d12 1
a12 1
SHARED_LIBS +=	SOGo		2.0
@


1.33
log
@prepare sogo for upcoming libobjc2 update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/08/24 11:16:04 sebastia Exp $
d6 1
a6 1
REVISION =	0
@


1.32
log
@update sogo to 2.0.7
tested by Jean Gerard Pailloncy and giovanni@@

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/07/20 17:39:17 sebastia Exp $
d6 1
@


1.31
log
@security fix two XSS vulnerabilities
http://www.sogo.nu/bugs/view.php?id=2368
http://www.sogo.nu/bugs/view.php?id=2369

OK sthen@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/04/25 16:43:05 sebastia Exp $
d5 3
a7 4
VERSION =	2.0.5
REVISION =	0
DISTNAME =	SOGo-${VERSION}a
PKGNAME =	sogo-${VERSION}.0
d38 2
a39 1
CONFIGURE_ARGS +=	--gsmake=`gnustep-config --variable=GNUSTEP_MAKEFILES`
@


1.31.2.1
log
@fix running sogo, had patch since short after unlock, but forgot
 about it. Problem noted by Martijn Rijkeboer

OK aja@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/07/20 17:39:17 sebastia Exp $
d6 1
a6 1
REVISION =	1
@


1.30
log
@update sogo to 2.0.5a

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/03/11 11:44:49 espie Exp $
d6 1
@


1.29
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/02/06 17:36:11 sebastia Exp $
d5 3
a7 3
VERSION =	2.0.4
DISTNAME =	SOGo-${VERSION}b
PKGNAME =	sogo-${VERSION}.1
@


1.28
log
@Update to 2.0.4b, bugfix update to the bugfix update

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/02/01 09:28:46 giovanni Exp $
a21 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
@


1.28.2.1
log
@backport security fix to the 5.3 ports tree.
fixing two XSS vulnerabilities:
http://www.sogo.nu/bugs/view.php?id=2368
http://www.sogo.nu/bugs/view.php?id=2369

tested by giovanni@@

OK jasper@@, giovanni@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/02/06 17:36:11 sebastia Exp $
a5 1
REVISION =	0
@


1.27
log
@
Bugfix update to 2.0.4a
ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/01/30 18:28:46 sebastia Exp $
d6 2
a7 2
DISTNAME =	SOGo-${VERSION}a
PKGNAME =	sogo-${VERSION}.0
@


1.26
log
@Update to 2.0.4

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/12/16 16:36:26 sebastia Exp $
d6 2
a7 2
DISTNAME =	SOGo-${VERSION}
PKGNAME =	sogo-${VERSION}
@


1.25
log
@update to 2.0.3a
based on initial patch, testing and ideas from giovanni@@

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/11/20 09:51:06 sebastia Exp $
d5 3
a7 3
VERSION =	2.0.3
DISTNAME =	SOGo-${VERSION}a
PKGNAME =	sogo-${VERSION}.0
@


1.24
log
@Minor bugfix update to 2.0.2a

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/11/15 10:25:50 giovanni Exp $
d5 1
a5 1
VERSION =	2.0.2
@


1.23
log
@
Install updates.php script and tell people how to configure it
together with Thinderbird Integrator plugin.
ok sebastia@@ (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/10/30 15:09:53 sebastia Exp $
d6 2
a7 3
DISTNAME =	SOGo-${VERSION}
PKGNAME =	sogo-${VERSION}
REVISION =	0
@


1.22
log
@Major update to SOGo 2.0.2, essentially unfucking it on amd64.

Problem reported and tests from giovann@@ and Jean Gerard
(jg at rilk.com).

finally OK giovanni@@
same applies to the just updated SOPE, where I hit the go button
just too fast ;)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/08/22 07:16:37 sebastia Exp $
d8 1
d76 3
@


1.21
log
@Bump revision, since we now link against libobjc2

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/08/17 09:59:08 sebastia Exp $
d5 1
a5 2
VERSION =	1.3.17
REVISION =	0
d9 5
a13 5
SHARED_LIBS +=	GDLContentStore 1.1
SHARED_LIBS +=	NGCards		1.1
SHARED_LIBS +=	OGoContentStore	1.1
SHARED_LIBS +=	SOGo		1.3
SHARED_LIBS +=	SOGoUI		1.1
d29 2
a30 2
WANTLIB +=		c m pthread crypto memcached WOExtensions SBJson
WANTLIB +=		DOM EOControl GDLAccess NGExtensions NGLdap XmlRpc
d32 1
a32 1
WANTLIB +=		objc gnustep-base curl
@


1.20
log
@update sogo to latest release.

feedback and OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/07/08 14:21:02 sebastia Exp $
d6 1
@


1.19
log
@update SOGo to 1.3.16
minor SHLIB bump
introduce SOGOLIBDIR variable to be used in PLIST, update hint from README:

Upgrade SOGo from < 1.3.16
=======================================
New password schemes were introduced. You may want to set the
userPasswordAlgorithm default, i.e.:

$ defaults write sogod userPasswordAlgorithm ssha
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/03/31 17:02:23 sebastia Exp $
d5 1
a5 1
VERSION =	1.3.16
d69 6
@


1.18
log
@Update SOGo to 1.3.14, many new features. To allow large images in vCards,
people should upgrade the database schema. More info in the README.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/11/18 11:15:13 sebastia Exp $
d5 1
a5 1
VERSION =	1.3.14
d12 1
a12 1
SHARED_LIBS +=	SOGo		1.2
d47 3
@


1.17
log
@update to sogo 1.3.9

=== Changes from the previous release ===

New Features

* possibility to specify which calendar is used when creating an event or a task (selected, personal, first enabled)
* possibility to specify if off-hours should be automatically added to the free-busy information
* new indicator in the link banner when a vacation message (auto-reply) is active
* new snooze function for events alarms in Web interface
* new "Remember login" checkbox on the login page
* authentication with SQL sources can now be performed on any database column

Enhancements

* added support for the CalDAV move operation
* phone numbers in the contacts web module are now links (tel:)
* revamp of the modules link banner (15-pixel taller)
* updated CKEditor to version 3.6.2
* updated unread and flagged icons in Webmail module
* new dependency on GNUstep 1.23

Bug Fixes

* fixed support for Apple iOS 5
* fixed handling of untagged IMAP responses
* fixed handling of commas in email addresses when composing a message
* fixed creation of clickable links for URLs surrounded by square brackets
* fixed behaviour of combo box for contacts categories
* fixed Swedish translation classes
* fixed bug when setting no ACL on a calendar

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/09/16 12:00:09 espie Exp $
d5 1
a5 1
VERSION =	1.3.9
d9 5
a13 5
SHLIB_VERSION =	1.1
.for _lib in GDLContentStore NGCards OGoContentStore \
		SOGo SOGoUI
SHARED_LIBS +=	${_lib} ${SHLIB_VERSION}
.endfor
d32 1
a32 1
WANTLIB +=		objc gnustep-base
d35 1
d42 5
a46 5
MAKE_FLAGS +=		libGDLContentStore_INTERFACE_VERSION=${SHLIB_VERSION} \
			libNGCards_INTERFACE_VERSION=${SHLIB_VERSION} \
			libOGoContentStore_INTERFACE_VERSION=${SHLIB_VERSION} \
			libSOGoUI_INTERFACE_VERSION=${SHLIB_VERSION} \
			SOGo_INTERFACE_VERSION=${SHLIB_VERSION}
d60 6
@


1.16
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/07/28 11:25:22 sebastia Exp $
d5 3
a7 4
VERSION =	1.3.8
DISTNAME =	SOGo-${VERSION}b
PKGNAME =	sogo-${VERSION}.1
REVISION=	0
d49 1
a49 1
    SOGo_Mozilla_Thunderbird_Configuration
@


1.15
log
@Minor update to fix problem with multi domain setup in sope, introduced with 1.3.8

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/07/21 06:30:44 sebastia Exp $
d8 1
@


1.14
log
@update SOGo to 1.3.8a, also here zapping patches that made it upstream.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/06/07 11:29:55 sebastia Exp $
d6 2
a7 2
DISTNAME =	SOGo-${VERSION}a
PKGNAME =	sogo-${VERSION}.0
@


1.13
log
@gnustep-base made the -[NSString stringByDeletingLastPathComponent] more compatible with MAC OS X, which now breaks SOGo creation of new users since it relied on a side effect from the incompatibility.
Pointed out and patch from Andreas VÃ¶gele, many thanks.
While there, remove hard dependency to www/sope having the same version as sogo

sure landry@@, OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/06/02 13:41:41 ajacoutot Exp $
d5 1
a5 1
VERSION =	1.3.7
a7 1
REVISION =	1
d9 1
a9 1
SHLIB_VERSION =	1.0
d46 1
a46 1
			
@


1.12
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/05/11 10:55:53 sebastia Exp $
d8 1
a8 1
REVISION =		0
d36 1
a36 1
			www/sope=${VERSION}
@


1.11
log
@Bugfix update to sogo 1.3.7.0, fixes a bug with dovecot imap server.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/05/05 23:00:20 sebastia Exp $
d8 1
@


1.10
log
@minor update to sogo 1.3.7

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/04/22 05:36:12 sebastia Exp $
d6 2
a7 2
DISTNAME =	SOGo-${VERSION}
PKGNAME =	sogo-${VERSION}
@


1.9
log
@Update SOGo to 1.3.6.
People upgrading from 1.3.4 or earlier need a new configuration default called
OCSSessionsFolderURL. See the packages README for more details.

OK jasper@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/04/18 12:48:29 sebastia Exp $
d5 1
a5 1
VERSION =	1.3.6
@


1.8
log
@bump, got rid of some patches, PLIst changes due to framework, and set
rc_reload=NO in the rc script

OK landry@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/12/27 14:50:24 ajacoutot Exp $
d5 1
a5 2
REVISION =	4
VERSION =	1.3.4
d9 1
a9 1
SHLIB_VERSION =	0.0
@


1.7
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/12/24 10:40:06 ajacoutot Exp $
d5 1
a5 1
REVISION =	3
@


1.6
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/12/22 09:23:01 sebastia Exp $
d5 1
a5 1
REVISION =	2
@


1.5
log
@update WANTLIB and PLIST after gnustep.port.mk and bundles changes.

OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/12/13 18:30:10 sebastia Exp $
d5 1
a5 1
REVISION =	1
@


1.4
log
@fix PLIST for the README file, should use FULLPKGNAME.
remove unused SUBST_VARS from Makefile.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/12/11 14:21:08 sebastia Exp $
d5 1
a5 1
REVISION =	0
d33 1
@


1.3
log
@cleanup PLIST and some patches, fix hostname of build machine in about dialog,

was OK sthen@@
additionally update rc script to latest changes (patch and OK from ajacoutot@@).
Will be enabled after I find time to test on a clean system.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/11/25 02:16:12 sthen Exp $
a46 2
SUBST_VARS =		VERSION

@


1.2
log
@Fix documentation renaming, reported by Hugo Osvaldo Barrera on ports@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/11/24 18:16:03 sebastia Exp $
d4 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d48 4
a51 6
	for f in 'SOGo Installation Guide.odt' \
		'SOGo Mobile Devices Configuration.odt' \
		'SOGo Mozilla Thunderbird Configuration.odt';do \
			mv "${WRKSRC}/Documentation/$${f}" \
			${WRKSRC}/Documentation/${f:S/ /_/}; \
	done
@


1.1.1.1
log
@Import SOGo: web based groupware server

DESCR:
SOGo is a groupware server built around OpenGroupware.org (OGo) and the
SOPE application server, with a focus on scalability. It provides the
usual groupware functionality as E-Mail, Calendaring, and Contacts
management.


Not yet linking it to the build, fixing last few things in the tree.

OK landry@@, sthen@@


@
text
@@
