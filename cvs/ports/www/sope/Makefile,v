head	1.65;
access;
symbols
	OPENBSD_6_1:1.65.0.2
	OPENBSD_6_1_BASE:1.65
	OPENBSD_6_0:1.61.0.2
	OPENBSD_6_0_BASE:1.61
	OPENBSD_5_9:1.54.0.2
	OPENBSD_5_9_BASE:1.54
	OPENBSD_5_8:1.48.0.4
	OPENBSD_5_8_BASE:1.48
	OPENBSD_5_7:1.47.0.2
	OPENBSD_5_7_BASE:1.47
	OPENBSD_5_6:1.41.0.2
	OPENBSD_5_6_BASE:1.41
	OPENBSD_5_5:1.37.0.2
	OPENBSD_5_5_BASE:1.37
	OPENBSD_5_4:1.33.0.2
	OPENBSD_5_4_BASE:1.33
	OPENBSD_5_3:1.29.0.2
	OPENBSD_5_3_BASE:1.29
	OPENBSD_5_2:1.21.0.2
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.2
	OPENBSD_5_0:1.17.0.2
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	sebastia_20101006:1.1.1.1
	sebastia:1.1.1;
locks; strict;
comment	@# @;


1.65
date	2017.02.02.21.32.52;	author sebastia;	state Exp;
branches;
next	1.64;
commitid	HoWcNQCABjkEXi5h;

1.64
date	2016.12.05.21.48.15;	author sebastia;	state Exp;
branches;
next	1.63;
commitid	jOY6HMbQQMgyi1SE;

1.63
date	2016.11.02.10.14.14;	author giovanni;	state Exp;
branches;
next	1.62;
commitid	My6fcAwnIIMknVFa;

1.62
date	2016.09.12.11.45.58;	author naddy;	state Exp;
branches;
next	1.61;
commitid	Cnalk1Ujct5ZDcli;

1.61
date	2016.06.15.14.02.34;	author sebastia;	state Exp;
branches;
next	1.60;
commitid	71SEg8NXZ9N70Xf2;

1.60
date	2016.06.03.13.57.20;	author sebastia;	state Exp;
branches;
next	1.59;
commitid	ylagr1MT8FPPSt1G;

1.59
date	2016.06.03.11.58.27;	author sebastia;	state Exp;
branches;
next	1.58;
commitid	9SEj9QRLeDniDOfu;

1.58
date	2016.04.13.21.31.39;	author sebastia;	state Exp;
branches;
next	1.57;
commitid	LqVvDBCyXSnnZXqf;

1.57
date	2016.03.31.08.59.53;	author sebastia;	state Exp;
branches;
next	1.56;
commitid	nC5Jjoz6y7XHdk1t;

1.56
date	2016.03.13.22.21.44;	author sebastia;	state Exp;
branches;
next	1.55;
commitid	3aVZA2pm9CQVpyiU;

1.55
date	2016.03.05.16.04.07;	author pascal;	state Exp;
branches;
next	1.54;
commitid	EJSWd5DpdfEFGBlM;

1.54
date	2016.01.27.18.43.52;	author sebastia;	state Exp;
branches;
next	1.53;
commitid	YFAFcc09dIYq0Jto;

1.53
date	2016.01.25.21.33.15;	author sebastia;	state Exp;
branches;
next	1.52;
commitid	62uhvUZS5LdzLJzT;

1.52
date	2016.01.12.17.29.34;	author sebastia;	state Exp;
branches;
next	1.51;
commitid	h4IWDCXPn24H0Idh;

1.51
date	2016.01.10.18.44.29;	author sebastia;	state Exp;
branches;
next	1.50;
commitid	lVpnr2dHDO0fmmpZ;

1.50
date	2015.10.26.11.55.01;	author sebastia;	state Exp;
branches;
next	1.49;
commitid	au7AwD62U6ojcD8J;

1.49
date	2015.09.26.14.26.35;	author sebastia;	state Exp;
branches;
next	1.48;
commitid	28JszuxsjA6ljM3p;

1.48
date	2015.05.10.11.39.49;	author sebastia;	state Exp;
branches;
next	1.47;
commitid	QJGXX8hFwbsiNUPB;

1.47
date	2015.01.16.09.50.30;	author sebastia;	state Exp;
branches;
next	1.46;
commitid	gbtqC7f56FpfOEI2;

1.46
date	2014.12.14.17.03.15;	author sebastia;	state Exp;
branches;
next	1.45;
commitid	hoJt53YhxRuyibVj;

1.45
date	2014.11.21.18.22.53;	author sebastia;	state Exp;
branches;
next	1.44;
commitid	SVEQQhRlMOc3FzUl;

1.44
date	2014.10.25.10.26.33;	author sebastia;	state Exp;
branches;
next	1.43;
commitid	045si719Phlp2bLC;

1.43
date	2014.10.17.09.19.32;	author sebastia;	state Exp;
branches;
next	1.42;
commitid	03L8WiYUX7RAenY5;

1.42
date	2014.09.13.18.09.22;	author brad;	state Exp;
branches;
next	1.41;
commitid	PpbRjVZdAmlrmi8q;

1.41
date	2014.07.22.18.46.43;	author sebastia;	state Exp;
branches;
next	1.40;
commitid	hVyyKEL3TGHuYZFL;

1.40
date	2014.05.23.22.25.50;	author kili;	state Exp;
branches;
next	1.39;

1.39
date	2014.05.22.09.49.51;	author sebastia;	state Exp;
branches;
next	1.38;

1.38
date	2014.05.16.14.54.16;	author giovanni;	state Exp;
branches;
next	1.37;

1.37
date	2014.01.03.18.37.48;	author sebastia;	state Exp;
branches;
next	1.36;

1.36
date	2013.10.19.13.26.21;	author sebastia;	state Exp;
branches;
next	1.35;

1.35
date	2013.10.19.09.48.22;	author sebastia;	state Exp;
branches;
next	1.34;

1.34
date	2013.08.24.11.09.07;	author sebastia;	state Exp;
branches;
next	1.33;

1.33
date	2013.06.12.20.36.34;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	2013.05.25.00.33.10;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2013.04.25.16.41.50;	author sebastia;	state Exp;
branches;
next	1.30;

1.30
date	2013.03.11.11.44.49;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2013.02.06.17.35.51;	author sebastia;	state Exp;
branches;
next	1.28;

1.28
date	2013.02.01.09.27.36;	author giovanni;	state Exp;
branches;
next	1.27;

1.27
date	2013.01.30.18.27.17;	author sebastia;	state Exp;
branches;
next	1.26;

1.26
date	2012.12.16.16.35.32;	author sebastia;	state Exp;
branches;
next	1.25;

1.25
date	2012.11.20.09.50.18;	author sebastia;	state Exp;
branches;
next	1.24;

1.24
date	2012.10.30.14.57.18;	author sebastia;	state Exp;
branches;
next	1.23;

1.23
date	2012.08.22.07.16.37;	author sebastia;	state Exp;
branches;
next	1.22;

1.22
date	2012.08.17.09.57.30;	author sebastia;	state Exp;
branches;
next	1.21;

1.21
date	2012.07.08.14.18.18;	author sebastia;	state Exp;
branches;
next	1.20;

1.20
date	2012.03.31.16.55.57;	author sebastia;	state Exp;
branches;
next	1.19;

1.19
date	2011.11.18.11.12.44;	author sebastia;	state Exp;
branches;
next	1.18;

1.18
date	2011.09.16.12.00.09;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2011.07.28.11.22.30;	author sebastia;	state Exp;
branches;
next	1.16;

1.16
date	2011.07.21.06.27.21;	author sebastia;	state Exp;
branches;
next	1.15;

1.15
date	2011.07.07.00.44.18;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.05.09.16.06.11;	author sebastia;	state Exp;
branches;
next	1.13;

1.13
date	2011.05.05.22.58.02;	author sebastia;	state Exp;
branches;
next	1.12;

1.12
date	2011.04.22.05.34.13;	author sebastia;	state Exp;
branches;
next	1.11;

1.11
date	2011.04.18.12.47.37;	author sebastia;	state Exp;
branches;
next	1.10;

1.10
date	2010.12.22.09.21.44;	author sebastia;	state Exp;
branches;
next	1.9;

1.9
date	2010.12.11.14.10.32;	author sebastia;	state Exp;
branches;
next	1.8;

1.8
date	2010.12.02.14.56.11;	author sebastia;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.24.18.07.45;	author sebastia;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.22.08.36.54;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.06.10.18.38;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.10.26.12.43.41;	author sebastia;	state Exp;
branches;
next	1.3;

1.3
date	2010.10.25.09.59.02;	author sebastia;	state Exp;
branches;
next	1.2;

1.2
date	2010.10.06.13.53.07;	author sebastia;	state Exp;
branches;
next	1.1;

1.1
date	2010.10.06.11.05.41;	author sebastia;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.10.06.11.05.41;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.65
log
@Minor update to 2.3.19, also works for Davide Gerhard rainbow at irh it
@
text
@# $OpenBSD: Makefile,v 1.64 2016/12/05 21:48:15 sebastia Exp $

PORTROACH+=		limit:^2

COMMENT-main=		Skyrix Object Publishing Environment
COMMENT-mysql=		SOPE MySQL adaptor
COMMENT-postgres=	SOPE PostgreSQL adaptor

VERSION =		2.3.19
DISTNAME =		SOPE-${VERSION}
PKGNAME-main =		sope-${VERSION}
PKGNAME-mysql =		sope-mysql-${VERSION}
PKGNAME-postgres =	sope-postgres-${VERSION}

SO_MAJOR=	3
SO_MINOR=	0
.for _lib in DOM EOControl GDLAccess NGExtensions NGLdap NGMime \
		NGObjWeb NGStreams SaxObjC WEExtensions \
		WOExtensions XmlRpc SBJson
SHARED_LIBS+=   ${_lib} ${SO_MAJOR}.${SO_MINOR}
.endfor

CATEGORIES=	www
HOMEPAGE=	http://www.sogo.nu
MASTER_SITES=	${HOMEPAGE}/files/downloads/SOGo/Sources/
MAINTAINER=	Sebastian Reitenbach <sebastia@@openbsd.org>

# LGPLv2 or later
PERMIT_PACKAGE_CDROM=   Yes

MULTI_PACKAGES=	-main -mysql -postgres

MODULES=	x11/gnustep
MODGNUSTEP_NEEDS_GUI=	No

BUILD_DEPENDS =		shells/bash

WANTLIB-main = 		c crypto ssl iconv lber ldap lzma xml2 z \
			${MODGNUSTEP_WANTLIB}
WANTLIB-mysql = 	GDLAccess mysqlclient crypto ssl z \
			${MODGNUSTEP_WANTLIB}
WANTLIB-postgres = 	GDLAccess EOControl pq ${MODGNUSTEP_WANTLIB}

LIB_DEPENDS-main=	x11/gnustep/base \
			databases/openldap \
			x11/gnustep/libobjc2 \
			converters/libiconv
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION} \
			databases/mariadb,-main
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION} \
			databases/postgresql,-main

CONFIGURE_STYLE=simple dest
CONFIGURE_ARGS+=--prefix=${PREFIX} \
		--gsmake=`gnustep-config --variable=GNUSTEP_MAKEFILES`
MAKE_ENV+=	OBJC_INCLUDE_PATH="${LOCALBASE}/include/postgresql;${LOCALBASE}/include" \
		LIBRARY_PATH="${LOCALBASE}/lib/postgresql;${LOCALBASE}/lib" \
		SBJson_INTERFACE_VERSION=${LIBSBJson_VERSION}
MAKE_FLAGS+=	MAJOR_VERSION=${SO_MAJOR} MINOR_VERSION=${SO_MINOR}
MAKE_FLAGS+=	SOPE_MAJOR_VERSION=4 SOPE_MINOR_VERSION=9
CONFIGURE_ENV+=	${MAKE_ENV}
NO_TEST=	Yes

WRKDIST =	${WRKDIR}/SOPE

post-extract:
	# those fhs.make files are not needed and may cause harm if they exist
	@@find ${WRKSRC} -name fhs.make -exec rm {} \;

post-patch:
	${SUBST_CMD} ${WRKSRC}/configure

.include <bsd.port.mk>
@


1.64
log
@Update to 2.3.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2016/11/02 10:14:14 giovanni Exp $
d9 1
a9 1
VERSION =		2.3.18
@


1.63
log
@Update to 2.3.17
similar diff and ok sebastia@@ (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2016/09/12 11:45:58 naddy Exp $
d9 1
a9 1
VERSION =		2.3.17
@


1.62
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2016/06/15 14:02:34 sebastia Exp $
d9 1
a9 1
VERSION =		2.3.12
a13 2
REVISION-mysql =	0
REVISION-postgres =	0
d36 3
a38 1
WANTLIB-main = 		c crypto ssl iconv lber ldap xml2 z \
d69 3
@


1.61
log
@Update to 2.3.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2016/06/03 13:57:20 sebastia Exp $
d14 2
d35 1
a35 1
MODULES=	converters/libiconv x11/gnustep
d38 1
a38 2
WANTLIB-main = 		c crypto ssl lber ldap xml2 z \
			${MODLIBICONV_WANTLIB} \
d47 1
a47 1
			${MODLIBICONV_LIB_DEPENDS}
@


1.60
log
@Update to 2.3.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2016/06/03 11:58:27 sebastia Exp $
d9 1
a9 1
VERSION =		2.3.11
@


1.59
log
@bump after gnustep make/base update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2016/04/13 21:31:39 sebastia Exp $
d9 1
a9 2
VERSION =		2.3.10
REVISION =		0
@


1.58
log
@Minor update to 2.3.10:

http://sogo.nu/news/2016/article/sogo-v2310-released.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2016/03/31 08:59:53 sebastia Exp $
d10 1
@


1.57
log
@Update to 2.3.9

https://www.mail-archive.com/users@@sogo.nu/msg23844.html

Add PORTROACH marker to stick to the 2.X versions for the time being
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2016/03/13 22:21:44 sebastia Exp $
d9 1
a9 1
VERSION =		2.3.9
@


1.56
log
@Update to 2.3.8
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.55 2016/03/05 16:04:07 pascal Exp $
d9 1
a9 1
VERSION =		2.3.8
@


1.55
log
@Bump REVISION for lang/clang MODULE changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2016/01/27 18:43:52 sebastia Exp $
d7 5
a11 8
VERSION =		2.3.7
DISTNAME =		SOPE-${VERSION}a
PKGNAME-main =		sope-${VERSION}.0
PKGNAME-mysql =		sope-mysql-${VERSION}.0
PKGNAME-postgres =	sope-postgres-${VERSION}.0
REVISION-main =		0
REVISION-mysql =	0
REVISION-postgres =	0
d45 1
a45 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.0 \
d47 1
a47 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.0 \
@


1.54
log
@Update to 2.3.7a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/01/25 21:33:15 sebastia Exp $
d12 3
@


1.53
log
@Update to 2.3.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2016/01/12 17:29:34 sebastia Exp $
d7 5
a11 5
VERSION =		2.3.6
DISTNAME =		SOPE-${VERSION}
PKGNAME-main =		sope-${VERSION}
PKGNAME-mysql =		sope-mysql-${VERSION}
PKGNAME-postgres =	sope-postgres-${VERSION}
d45 1
a45 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION} \
d47 1
a47 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION} \
@


1.52
log
@Update to 2.3.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2016/01/10 18:44:29 sebastia Exp $
d7 1
a7 1
VERSION =		2.3.5
@


1.51
log
@Update to 2.3.4

getting rid of lots of patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/10/26 11:55:01 sebastia Exp $
d7 1
a7 1
VERSION =		2.3.4
@


1.50
log
@Bump after gnustep module update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2015/09/26 14:26:35 sebastia Exp $
d7 1
a7 2
VERSION =		2.3.2
REVISION =		0
@


1.49
log
@Update to 2.3.2 following versions of www/sogo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2015/05/10 11:39:49 sebastia Exp $
d8 1
@


1.48
log
@Update to 2.2.17a

jumping over a bunch of releases, meanwhile one of the patches
got merged upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2015/01/16 09:50:30 sebastia Exp $
d7 5
a11 5
VERSION =		2.2.17
DISTNAME =		SOPE-${VERSION}a
PKGNAME-main =		sope-${VERSION}.0
PKGNAME-mysql =		sope-mysql-${VERSION}.0
PKGNAME-postgres =	sope-postgres-${VERSION}.0
d45 1
a45 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.0 \
d47 1
a47 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.0 \
@


1.47
log
@update to 2.2.13
having it running on my test box since a while without issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/12/14 17:03:15 sebastia Exp $
d7 5
a11 5
VERSION =		2.2.13
DISTNAME =		SOPE-${VERSION}
PKGNAME-main =		sope-${VERSION}
PKGNAME-mysql =		sope-mysql-${VERSION}
PKGNAME-postgres =	sope-postgres-${VERSION}
d13 2
a14 2
SO_MAJOR=	2
SO_MINOR=	3
d45 1
a45 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION} \
d47 1
a47 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION} \
@


1.46
log
@Update to 2.2.11a

as usual, lots of bugs fixed, and enhancements
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/11/21 18:22:53 sebastia Exp $
d7 5
a11 5
VERSION =		2.2.11
DISTNAME =		SOPE-${VERSION}a
PKGNAME-main =		sope-${VERSION}.0
PKGNAME-mysql =		sope-mysql-${VERSION}.0
PKGNAME-postgres =	sope-postgres-${VERSION}.0
d14 1
a14 1
SO_MINOR=	2
d45 1
a45 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.0 \
d47 1
a47 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.0 \
@


1.45
log
@Adapt WANTLIB after gnustep-base update, and bump REVISION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/10/25 10:26:33 sebastia Exp $
d7 1
a7 2
VERSION =		2.2.9
REVISION =		1
@


1.44
log
@add patch to prevent exception in opengroupware.
bug reported upstream, see comment in patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2014/10/17 09:19:32 sebastia Exp $
d8 1
a10 1
REVISION-main =		0
d32 1
a32 1
MODULES=	x11/gnustep
d35 2
a36 1
WANTLIB-main = 		c crypto ssl lber ldap xml2 \
@


1.43
log
@Update sope to 2.2.9a

had most or even all intermediate versions running, some of them
introduced problems, that were fixed in following version, introducing
new problems, ...
Have this now running since a few weeks without issues
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/09/13 18:09:22 brad Exp $
d10 1
@


1.42
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2014/07/22 18:46:43 sebastia Exp $
d7 5
a11 8
VERSION =		2.1.1
DISTNAME =		SOPE-${VERSION}b
PKGNAME-main =		sope-${VERSION}.1
REVISION-main =		2
PKGNAME-mysql =		sope-mysql-${VERSION}.1
REVISION-mysql =	1
PKGNAME-postgres =	sope-postgres-${VERSION}.1
REVISION-postgres =	0
d14 1
a14 1
SO_MINOR=	1
d44 1
a44 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.1 \
d46 1
a46 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.1 \
@


1.41
log
@Fix accessing the calendar on i386, bug introduced when i386 was switched to use clang.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2014/05/23 22:25:50 kili Exp $
d12 1
a12 1
REVISION-mysql =	0
d48 1
a48 1
			databases/mysql,-main
@


1.40
log
@More bumps needed after the gnustep.port.mk changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/05/22 09:49:51 sebastia Exp $
d10 1
a10 1
REVISION-main =		1
@


1.39
log
@bump revision due to gnustep.port.mk overhaul and portcheck fixes

feedback and OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2014/05/16 14:54:16 giovanni Exp $
d12 1
d14 1
@


1.38
log
@
Fixed fd leak where files were unlinked w/o being closed first.
patch from upstream
ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2014/01/03 18:37:48 sebastia Exp $
d10 1
a10 1
REVISION-main =		0
d32 1
a32 1
MODULES=	converters/libiconv x11/gnustep
d35 5
a39 6
WANTLIB-main = 		gnustep-base m objc2 c pthread crypto ssl z lber ldap xml2 \
			${MODLIBICONV_WANTLIB}

WANTLIB-mysql = 	gnustep-base m objc2 pthread GDLAccess \
			mysqlclient crypto ssl z
WANTLIB-postgres = 	gnustep-base m objc2 pthread GDLAccess EOControl pq
@


1.37
log
@update SOPE to 2.1.1b

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/10/19 13:26:21 sebastia Exp $
d10 1
@


1.36
log
@bump due to building with clang and using non-fragile-abi on i386 and amd64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/10/19 09:48:22 sebastia Exp $
d7 5
a11 8
VERSION =		2.0.7
DISTNAME =		SOPE-${VERSION}
PKGNAME-main =		sope-${VERSION}
PKGNAME-mysql =		sope-mysql-${VERSION}
PKGNAME-postgres =	sope-postgres-${VERSION}
REVISION-main =		1
REVISION-mysql =	1
REVISION-postgres =	1
d14 1
a14 1
SO_MINOR=	0
d45 1
a45 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION} \
d47 1
a47 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION} \
@


1.35
log
@prepare sope to build with upcoming libobjc2 update

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/08/24 11:09:07 sebastia Exp $
d12 3
a14 3
REVISION-main =		0
REVISION-mysql =	0
REVISION-postgres =	0
@


1.34
log
@update sope to 2.0.7
tested by Jean-Gérard Pailloncy, giovanni@@ and myself

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/06/12 20:36:34 brad Exp $
d12 3
@


1.33
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/05/25 00:33:10 brad Exp $
d7 5
a11 7
VERSION =		2.0.5
DISTNAME =		SOPE-${VERSION}a
PKGNAME-main =		sope-${VERSION}.0
PKGNAME-mysql =		sope-mysql-${VERSION}.0
PKGNAME-postgres =	sope-postgres-${VERSION}.0

REVISION-mysql =	1
d45 1
a45 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.0 \
d47 1
a47 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.0 \
@


1.32
log
@Switch from using MySQL to using MariaDB. MariaDB is a drop-in replacement.


ok sthen aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/04/25 16:41:50 sebastia Exp $
d13 1
a13 1
REVISION-mysql =	0
d48 1
a48 1
			databases/mariadb,-main
@


1.31
log
@update sope to 2.0.5a

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/03/11 11:44:49 espie Exp $
d13 2
d48 1
a48 1
			databases/mysql,-main
@


1.30
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/02/06 17:35:51 sebastia Exp $
d7 5
a11 5
VERSION =		2.0.4
DISTNAME =		SOPE-${VERSION}b
PKGNAME-main =		sope-${VERSION}.1
PKGNAME-mysql =		sope-mysql-${VERSION}.1
PKGNAME-postgres =	sope-postgres-${VERSION}.1
d45 1
a45 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.1 \
d47 1
a47 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.1 \
@


1.29
log
@Update to 2.0.4b, bugfix update to the bugfix update

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/02/01 09:27:36 giovanni Exp $
a27 3
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
d59 1
a59 1
NO_REGRESS=	Yes
@


1.28
log
@
Bugfix update to 2.0.4a
ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/01/30 18:27:17 sebastia Exp $
d8 4
a11 4
DISTNAME =		SOPE-${VERSION}a
PKGNAME-main =		sope-${VERSION}.0
PKGNAME-mysql =		sope-mysql-${VERSION}.0
PKGNAME-postgres =	sope-postgres-${VERSION}.0
d48 1
a48 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.0 \
d50 1
a50 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.0 \
@


1.27
log
@Update to 2.0.4

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/12/16 16:35:32 sebastia Exp $
d8 4
a11 4
DISTNAME =		SOPE-${VERSION}
PKGNAME-main =		sope-${VERSION}
PKGNAME-mysql =		sope-mysql-${VERSION}
PKGNAME-postgres =	sope-postgres-${VERSION}
d48 1
a48 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION} \
d50 1
a50 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION} \
@


1.26
log
@update to 2.0.3a
based on initial patch from giovanni@@

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/11/20 09:50:18 sebastia Exp $
d7 5
a11 5
VERSION =		2.0.3
DISTNAME =		SOPE-${VERSION}a
PKGNAME-main =		sope-${VERSION}.0
PKGNAME-mysql =		sope-mysql-${VERSION}.0
PKGNAME-postgres =	sope-postgres-${VERSION}.0
d48 1
a48 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.0 \
d50 1
a50 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.0 \
@


1.25
log
@Minor bugfix update to 2.0.2a

OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/10/30 14:57:18 sebastia Exp $
d7 1
a7 1
VERSION =		2.0.2
@


1.24
log
@Major update to SOPE-2.0.2, especially unfucking it on amd64, since the
introduction of libobjc2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/08/22 07:16:37 sebastia Exp $
d8 4
a11 4
DISTNAME =		SOPE-${VERSION}
PKGNAME-main =		sope-${VERSION}
PKGNAME-mysql =		sope-mysql-${VERSION}
PKGNAME-postgres =	sope-postgres-${VERSION}
d48 1
a48 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION} \
d50 1
a50 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION} \
d63 2
@


1.23
log
@Bump revision, since we now link against libobjc2

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/08/17 09:57:30 sebastia Exp $
d7 1
a7 2
VERSION =		1.3.17
REVISION =		0
d13 2
a14 2
SO_MAJOR=	1
SO_MINOR=	1
d17 1
a17 1
		WOExtensions XmlRpc
a19 1
SHARED_LIBS +=	SBJson	0.1
d37 1
a37 1
WANTLIB-main = 		gnustep-base m objc c pthread crypto ssl z lber ldap xml2 \
d40 1
a40 1
WANTLIB-mysql = 	gnustep-base m objc GDLAccess EOControl \
d42 1
a42 1
WANTLIB-postgres = 	gnustep-base m objc GDLAccess EOControl pq
d46 1
d49 1
a49 1
			databases/mysql
d51 1
a51 3
			databases/postgresql

WRKDIST =		${WRKDIR}/SOPE
@


1.22
log
@Update sope to latest release.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/07/08 14:18:18 sebastia Exp $
d8 1
@


1.21
log
@Update SOPE to 1.3.16
bump minor shlib version
this version has a lot of 64Bit fixes after the gnustep-base update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/03/31 16:55:57 sebastia Exp $
d7 1
a7 1
VERSION =		1.3.16
@


1.20
log
@Update SOPE to 1.3.14

OK, aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/11/18 11:12:44 sebastia Exp $
d7 1
a7 1
VERSION =		1.3.14
d14 1
a14 1
SO_MINOR=	0
@


1.19
log
@update sope to 1.3.9

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/09/16 12:00:09 espie Exp $
d7 1
a7 1
VERSION =		1.3.9
d52 2
@


1.18
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/07/28 11:22:30 sebastia Exp $
d7 5
a11 6
VERSION =		1.3.8
DISTNAME =		SOPE-${VERSION}b
PKGNAME-main =		sope-${VERSION}.1
PKGNAME-mysql =		sope-mysql-${VERSION}.1
PKGNAME-postgres =	sope-postgres-${VERSION}.1
REVISION =		0
d13 2
a14 2
SO_MAJOR=	0
SO_MINOR=	1
d16 2
a17 2
		NGObjWeb NGStreams NGXmlRpc SaxObjC SoOFS WEExtensions \
		WEPrototype WOExtensions WOXML XmlRpc SBJson
d20 1
d48 1
a48 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.1 \
d50 1
a50 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.1 \
a52 1
WRKDIST=	${WRKDIR}/${DISTNAME}
@


1.17
log
@Minor update to sope, to fix problem with multi domain setup in sope, introduced with 1.3.8

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/07/21 06:27:21 sebastia Exp $
d12 1
@


1.16
log
@Update SOPE to 1.3.8a, zap a couple of patches that made it upstream.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/07/07 00:44:18 ajacoutot Exp $
d8 4
a11 4
DISTNAME =		SOPE-${VERSION}a
PKGNAME-main =		sope-${VERSION}.0
PKGNAME-mysql =		sope-mysql-${VERSION}.0
PKGNAME-postgres =	sope-postgres-${VERSION}.0
d47 1
a47 1
LIB_DEPENDS-mysql =	${BASE_PKGPATH}=${VERSION}.0 \
d49 1
a49 1
LIB_DEPENDS-postgres =	${BASE_PKGPATH}=${VERSION}.0 \
@


1.15
log
@Use MODLIBICONV_WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/05/09 16:06:11 sebastia Exp $
d7 5
a11 9
VERSION=		1.3.7
DISTNAME=		SOPE-${VERSION}
PKGNAME-main=		sope-${VERSION}
PKGNAME-mysql=		sope-mysql-${VERSION}
PKGNAME-postgres=	sope-postgres-${VERSION}

REVISION-main =		1
REVISION-mysql =	0
REVISION-postgres =	0
d47 1
a47 1
LIB_DEPENDS-mysql=	${BASE_PKGPATH}=${VERSION} \
d49 1
a49 1
LIB_DEPENDS-postgres=	${BASE_PKGPATH}=${VERSION} \
d63 1
a63 1
		  
@


1.14
log
@OpenBSD has strndup(3), so use it, and fix a "random" crasher in the webmail interface.

OK sthen@@, and to a prior version OK landry@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/05/05 22:58:02 sebastia Exp $
a7 1
REVISION =		0
d13 4
d42 1
a42 1
			iconv
@


1.13
log
@minor update for sope to 1.3.7.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/04/22 05:34:13 sebastia Exp $
d8 1
@


1.12
log
@Update sope to 1.3.6

OK jasper@@, stuart@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/04/18 12:47:37 sebastia Exp $
d7 1
a7 1
VERSION=		1.3.6
@


1.11
log
@bump, do not install the mod_ngobjwe.so apache module anymore, not needed for
sogo, and will be installed with opengroupware (which would need it)

OK landry@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/12/22 09:21:44 sebastia Exp $
d7 1
a7 2
VERSION=		1.3.4
REVISION =		3
d14 1
a14 1
SO_MINOR=	0
@


1.10
log
@Update WANTLIB and PLIST after gnustep.port.mk and gnustep bundles changes

OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/12/11 14:10:32 sebastia Exp $
d8 1
a8 1
REVISION =		2
d35 1
a35 1
MODULES=	converters/libiconv x11/gnustep apache-module
a52 3
MODAPACHE_NAME= ngobjweb
MODAPACHE_FILE= ${MODAPACHE_LOCATION}/sope-appserver/mod_ngobjweb/${MODAPACHE_MODULE}

a67 6

post-build:
	@@${MODAPACHE_CREATE_ENABLE_SCRIPT}

post-install:
	${MODAPACHE_INSTALL}
@


1.9
log
@Fix an abort() in sogo, and bump.

was OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/12/02 14:56:11 sebastia Exp $
d8 1
a8 1
REVISION =		1
d38 2
a39 2
WANTLIB =		m
WANTLIB-main = 		${WANTLIB} c pthread crypto ssl z lber ldap xml2
d41 1
a41 1
WANTLIB-mysql = 	${MODGNUSTEP_WANTLIB} m GDLAccess EOControl \
d43 1
a43 1
WANTLIB-postgres = 	${MODGNUSTEP_WANTLIB} m GDLAccess EOControl pq
@


1.8
log
@Include missing headers to get rid of compiler warnings, and bump.

OK sthen@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/11/24 18:07:45 sebastia Exp $
d8 1
a8 1
REVISION =		0
@


1.7
log
@Update sope to 1.3.4

OK sthen@@, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/11/22 08:36:54 espie Exp $
d8 1
@


1.6
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/06 10:18:38 espie Exp $
d7 1
a7 1
VERSION=		1.3.3
d17 1
a17 1
		WEPrototype WOExtensions WOXML XmlRpc
d47 1
a47 1
LIB_DEPENDS-mysql=	${BASE_PKGPATH} \
d49 1
a49 1
LIB_DEPENDS-postgres=	${BASE_PKGPATH} \
d60 2
a61 1
		LIBRARY_PATH="${LOCALBASE}/lib/postgresql;${LOCALBASE}/lib"
@


1.5
log
@convert libiconv to new wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/10/26 12:43:41 sebastia Exp $
d44 2
a45 2
LIB_DEPENDS-main=	::x11/gnustep/base \
			::databases/openldap \
d47 4
a50 4
LIB_DEPENDS-mysql=	::${BASE_PKGPATH} \
			::databases/mysql
LIB_DEPENDS-postgres=	::${BASE_PKGPATH} \
			::databases/postgresql
@


1.4
log
@Use new features from the gnustep module.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/10/25 09:59:02 sebastia Exp $
d37 2
a38 2
WANTLIB +=	m
WANTLIB-main += ${WANTLIB} c pthread crypto ssl z lber ldap xml2
d40 3
a42 2
WANTLIB-mysql += ${WANTLIB} GDLAccess EOControl mysqlclient crypto ssl z
WANTLIB-postgres += ${WANTLIB} GDLAccess EOControl pq
@


1.3
log
@Update sope to 1.3.3, and add patch from naddy to fix build with new gmake

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/10/06 13:53:07 sebastia Exp $
d35 4
a38 2
WANTLIB += m objc gnustep-base
WANTLIB-main += ${WANTLIB} c crypto m ssl z pthread lber ldap xml2
@


1.2
log
@The original import was not OKed by landry, I checked in the wrong stuff, bad mistake on my side.
Now fixing it with even some more enhancements pointed out by ajacoutot@@

OK landry@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/10/06 11:05:41 sebastia Exp $
d7 1
a7 2
VERSION=		1.3.2
REVISION=		0
d61 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
d18 1
a18 1
		WEPrototype WOExtensions WOXML XmlRpc NGiCal
d24 1
a24 1
MASTER_SITES=	http://www.sogo.nu/files/downloads/SOGo/Sources/
d35 1
a35 1
MODULES=	x11/gnustep apache-module
d37 1
a37 1
WANTLIB-main += ${WANTLIB} c crypto iconv m ssl z pthread lber ldap xml2
d43 2
a44 1
			::databases/openldap
@


1.1.1.1
log
@import SOPE: Skyrix Object Publishing Environment

The SOPE package is an extensive set of frameworks (16 frameworks, ~1500
classes) which form a complete Web application server environment.
Besides the Apple WebObjects compatible appserver extended with Zope
concepts, it contains a large set of reusable classes: XML processing
(SAX2, DOM, XML-RPC), MIME/IMAP4 processing, LDAP connectivity, RDBMS
connectivity, and iCalendar parsing.

already some days ago, OK landry@@

@
text
@@
