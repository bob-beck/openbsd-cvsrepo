head	1.275;
access;
symbols
	OPENBSD_6_1:1.273.0.2
	OPENBSD_6_1_BASE:1.273
	OPENBSD_6_0:1.264.0.2
	OPENBSD_6_0_BASE:1.264
	OPENBSD_5_9:1.259.0.2
	OPENBSD_5_9_BASE:1.259
	OPENBSD_5_8:1.253.0.4
	OPENBSD_5_8_BASE:1.253
	OPENBSD_5_7:1.248.0.2
	OPENBSD_5_7_BASE:1.248
	OPENBSD_5_6:1.238.0.2
	OPENBSD_5_6_BASE:1.238
	OPENBSD_5_5:1.235.0.2
	OPENBSD_5_5_BASE:1.235
	OPENBSD_5_4:1.222.0.2
	OPENBSD_5_4_BASE:1.222
	OPENBSD_5_3:1.214.0.2
	OPENBSD_5_3_BASE:1.214
	OPENBSD_5_2:1.207.0.2
	OPENBSD_5_2_BASE:1.207
	OPENBSD_5_1_BASE:1.198
	OPENBSD_5_1:1.198.0.2
	OPENBSD_5_0:1.193.0.2
	OPENBSD_5_0_BASE:1.193
	OPENBSD_4_9:1.181.0.2
	OPENBSD_4_9_BASE:1.181
	OPENBSD_4_8:1.170.0.2
	OPENBSD_4_8_BASE:1.170
	OPENBSD_4_7:1.163.0.2
	OPENBSD_4_7_BASE:1.163
	OPENBSD_4_6:1.150.0.2
	OPENBSD_4_6_BASE:1.150
	OPENBSD_4_5:1.145.0.2
	OPENBSD_4_5_BASE:1.145
	OPENBSD_4_4:1.133.0.2
	OPENBSD_4_4_BASE:1.133
	OPENBSD_4_3:1.127.0.2
	OPENBSD_4_3_BASE:1.127
	OPENBSD_4_2:1.119.0.2
	OPENBSD_4_2_BASE:1.119
	OPENBSD_4_1:1.113.0.2
	OPENBSD_4_1_BASE:1.113
	OPENBSD_4_0:1.102.0.2
	OPENBSD_4_0_BASE:1.102
	OPENBSD_3_9:1.97.0.2
	OPENBSD_3_9_BASE:1.97
	OPENBSD_3_8:1.89.0.2
	OPENBSD_3_8_BASE:1.89
	OPENBSD_3_7:1.80.0.2
	OPENBSD_3_7_BASE:1.80
	OPENBSD_3_6:1.74.0.2
	OPENBSD_3_6_BASE:1.74
	OPENBSD_3_5:1.67.0.2
	OPENBSD_3_5_BASE:1.67
	OPENBSD_3_4:1.58.0.2
	OPENBSD_3_4_BASE:1.58
	OPENBSD_3_3:1.50.0.2
	OPENBSD_3_3_BASE:1.50
	OPENBSD_3_2:1.32.0.2
	OPENBSD_3_2_BASE:1.32
	biorn_20020508:1.1.1.1
	pvalchev:1.1.1;
locks; strict;
comment	@# @;


1.275
date	2017.06.15.11.33.50;	author ajacoutot;	state Exp;
branches;
next	1.274;
commitid	gUERtKOUW1DYIUV6;

1.274
date	2017.04.10.11.46.36;	author sthen;	state Exp;
branches;
next	1.273;
commitid	HY6VNZxjJWzKQFDV;

1.273
date	2017.02.17.09.05.09;	author ajacoutot;	state Exp;
branches;
next	1.272;
commitid	IuQSZtsKEQnGwzid;

1.272
date	2017.02.09.12.58.39;	author ajacoutot;	state Exp;
branches;
next	1.271;
commitid	pCdvrE514UdyPohj;

1.271
date	2017.02.01.20.59.41;	author sthen;	state Exp;
branches;
next	1.270;
commitid	K9AmUG9rTXppX7Sn;

1.270
date	2016.12.11.09.28.20;	author ajacoutot;	state Exp;
branches;
next	1.269;
commitid	zlXRmFkaRbEYrQcD;

1.269
date	2016.12.05.09.03.09;	author ajacoutot;	state Exp;
branches;
next	1.268;
commitid	wEwYq7hsfuTJG3sK;

1.268
date	2016.10.08.20.14.06;	author ajacoutot;	state Exp;
branches;
next	1.267;
commitid	YbWVo3dl0aAWXN48;

1.267
date	2016.10.08.17.51.30;	author ajacoutot;	state Exp;
branches;
next	1.266;
commitid	UjnSW2RGGedpnWF0;

1.266
date	2016.09.12.21.14.09;	author naddy;	state Exp;
branches;
next	1.265;
commitid	kiBVIroBVy3k4Tx7;

1.265
date	2016.09.06.12.37.52;	author ajacoutot;	state Exp;
branches;
next	1.264;
commitid	U30rhN7ChTB0uAcP;

1.264
date	2016.07.05.06.59.29;	author jasper;	state Exp;
branches;
next	1.263;
commitid	12t7BEXBWmQu2Rlu;

1.263
date	2016.05.03.06.06.26;	author ajacoutot;	state Exp;
branches;
next	1.262;
commitid	TBDs56ReTvZNde5Q;

1.262
date	2016.04.04.12.44.08;	author espie;	state Exp;
branches;
next	1.261;
commitid	WZuLHc4lmftRADty;

1.261
date	2016.03.18.23.12.21;	author naddy;	state Exp;
branches;
next	1.260;
commitid	KZAl4KEiw6a3Jixw;

1.260
date	2016.03.14.19.50.13;	author ajacoutot;	state Exp;
branches;
next	1.259;
commitid	qy3kOZbBj36dlQSa;

1.259
date	2016.01.14.06.10.19;	author ajacoutot;	state Exp;
branches
	1.259.2.1;
next	1.258;
commitid	jkFtaAYjxmpg2Ohx;

1.258
date	2015.12.21.01.08.16;	author sthen;	state Exp;
branches;
next	1.257;
commitid	uDm0oakXIZbL1jnv;

1.257
date	2015.11.16.06.37.35;	author ajacoutot;	state Exp;
branches;
next	1.256;
commitid	BDjuU8e68Wv1RAPN;

1.256
date	2015.10.06.21.39.50;	author ajacoutot;	state Exp;
branches;
next	1.255;
commitid	RNgQYoEcnIqyoBOz;

1.255
date	2015.09.10.08.31.36;	author ajacoutot;	state Exp;
branches;
next	1.254;
commitid	tgPTt6WZnPJoMIlp;

1.254
date	2015.09.10.07.10.42;	author ajacoutot;	state Exp;
branches;
next	1.253;
commitid	RS7busqtjr765Ydo;

1.253
date	2015.07.26.07.22.53;	author ajacoutot;	state Exp;
branches;
next	1.252;
commitid	vVYOIYNFMfUD9HTu;

1.252
date	2015.06.10.06.35.17;	author ajacoutot;	state Exp;
branches;
next	1.251;
commitid	eHZVQPRHWpNym2oR;

1.251
date	2015.05.23.07.19.44;	author ajacoutot;	state Exp;
branches;
next	1.250;
commitid	67tmlJA22lbUBunp;

1.250
date	2015.05.11.23.23.17;	author ajacoutot;	state Exp;
branches;
next	1.249;
commitid	5cFsLxpaTZF16MGL;

1.249
date	2015.04.28.06.35.06;	author ajacoutot;	state Exp;
branches;
next	1.248;
commitid	tr3XsOq5EJv6iti7;

1.248
date	2015.02.17.01.23.11;	author brad;	state Exp;
branches;
next	1.247;
commitid	yPkggCxZ5USm0enL;

1.247
date	2015.01.11.02.44.44;	author brad;	state Exp;
branches;
next	1.246;
commitid	6DsejCiSt0sAFA05;

1.246
date	2015.01.10.23.13.29;	author brad;	state Exp;
branches;
next	1.245;
commitid	qscq7l6lzNATubim;

1.245
date	2015.01.10.11.06.13;	author brad;	state Exp;
branches;
next	1.244;
commitid	dBkn3s9AcAfEAS4A;

1.244
date	2014.11.29.06.53.25;	author brad;	state Exp;
branches;
next	1.243;
commitid	SLKsd4XHVvohAux0;

1.243
date	2014.11.14.06.18.42;	author brad;	state Exp;
branches;
next	1.242;
commitid	MO3F9wGuewRw1ml3;

1.242
date	2014.10.19.23.14.24;	author brad;	state Exp;
branches;
next	1.241;
commitid	jAX6LQxB4XzyAjyo;

1.241
date	2014.10.15.17.33.51;	author jasper;	state Exp;
branches;
next	1.240;
commitid	OQNQxUz9Z5La8jxd;

1.240
date	2014.09.03.06.43.28;	author brad;	state Exp;
branches;
next	1.239;
commitid	DRtyxBukVzaSLVkq;

1.239
date	2014.08.14.08.20.27;	author brad;	state Exp;
branches;
next	1.238;
commitid	pSVHmwDct53IFfXl;

1.238
date	2014.07.12.22.01.53;	author brad;	state Exp;
branches;
next	1.237;
commitid	0ELc8mz8YNsgDzkW;

1.237
date	2014.05.16.01.34.50;	author brad;	state Exp;
branches;
next	1.236;

1.236
date	2014.05.15.20.01.38;	author espie;	state Exp;
branches;
next	1.235;

1.235
date	2014.02.19.19.12.42;	author ratchov;	state Exp;
branches;
next	1.234;

1.234
date	2014.02.16.19.50.52;	author pascal;	state Exp;
branches;
next	1.233;

1.233
date	2014.02.07.09.37.05;	author yasuoka;	state Exp;
branches;
next	1.232;

1.232
date	2014.01.31.10.44.56;	author ratchov;	state Exp;
branches;
next	1.231;

1.231
date	2014.01.10.21.52.29;	author brad;	state Exp;
branches;
next	1.230;

1.230
date	2014.01.02.12.21.49;	author sthen;	state Exp;
branches;
next	1.229;

1.229
date	2013.12.24.15.22.55;	author brad;	state Exp;
branches;
next	1.228;

1.228
date	2013.12.12.21.41.54;	author brad;	state Exp;
branches;
next	1.227;

1.227
date	2013.09.25.07.58.50;	author sthen;	state Exp;
branches;
next	1.226;

1.226
date	2013.09.17.05.25.39;	author mlarkin;	state Exp;
branches;
next	1.225;

1.225
date	2013.09.17.05.18.15;	author mlarkin;	state Exp;
branches;
next	1.224;

1.224
date	2013.09.06.23.14.39;	author brad;	state Exp;
branches;
next	1.223;

1.223
date	2013.08.19.14.40.21;	author brad;	state Exp;
branches;
next	1.222;

1.222
date	2013.06.04.18.41.59;	author naddy;	state Exp;
branches;
next	1.221;

1.221
date	2013.05.05.21.11.32;	author brad;	state Exp;
branches;
next	1.220;

1.220
date	2013.04.30.00.46.56;	author brad;	state Exp;
branches;
next	1.219;

1.219
date	2013.04.17.23.03.23;	author ratchov;	state Exp;
branches;
next	1.218;

1.218
date	2013.04.08.23.43.32;	author brad;	state Exp;
branches;
next	1.217;

1.217
date	2013.04.08.17.08.36;	author brad;	state Exp;
branches;
next	1.216;

1.216
date	2013.03.13.02.28.11;	author brad;	state Exp;
branches;
next	1.215;

1.215
date	2013.03.11.11.46.14;	author espie;	state Exp;
branches;
next	1.214;

1.214
date	2013.02.09.14.49.54;	author sthen;	state Exp;
branches;
next	1.213;

1.213
date	2013.01.21.16.23.05;	author brad;	state Exp;
branches;
next	1.212;

1.212
date	2013.01.14.17.02.15;	author brad;	state Exp;
branches;
next	1.211;

1.211
date	2013.01.14.02.17.15;	author brad;	state Exp;
branches;
next	1.210;

1.210
date	2012.09.27.17.26.05;	author ajacoutot;	state Exp;
branches;
next	1.209;

1.209
date	2012.08.27.06.19.48;	author ajacoutot;	state Exp;
branches;
next	1.208;

1.208
date	2012.08.25.15.05.51;	author ratchov;	state Exp;
branches;
next	1.207;

1.207
date	2012.06.20.12.20.37;	author jasper;	state Exp;
branches;
next	1.206;

1.206
date	2012.06.18.16.45.11;	author jasper;	state Exp;
branches;
next	1.205;

1.205
date	2012.06.09.23.06.24;	author sthen;	state Exp;
branches;
next	1.204;

1.204
date	2012.05.03.06.51.24;	author ajacoutot;	state Exp;
branches;
next	1.203;

1.203
date	2012.04.28.08.42.07;	author ajacoutot;	state Exp;
branches;
next	1.202;

1.202
date	2012.03.30.13.23.03;	author phessler;	state Exp;
branches;
next	1.201;

1.201
date	2012.02.28.19.48.41;	author sthen;	state Exp;
branches;
next	1.200;

1.200
date	2012.02.28.17.56.53;	author stsp;	state Exp;
branches;
next	1.199;

1.199
date	2012.02.28.02.22.13;	author jsg;	state Exp;
branches;
next	1.198;

1.198
date	2012.01.26.20.21.31;	author ratchov;	state Exp;
branches;
next	1.197;

1.197
date	2011.12.30.17.40.40;	author edd;	state Exp;
branches;
next	1.196;

1.196
date	2011.09.19.14.24.44;	author jasper;	state Exp;
branches;
next	1.195;

1.195
date	2011.09.19.13.48.15;	author jasper;	state Exp;
branches;
next	1.194;

1.194
date	2011.08.17.15.12.15;	author edd;	state Exp;
branches;
next	1.193;

1.193
date	2011.07.10.13.31.55;	author jasper;	state Exp;
branches;
next	1.192;

1.192
date	2011.07.02.23.10.25;	author edd;	state Exp;
branches;
next	1.191;

1.191
date	2011.06.30.15.31.15;	author edd;	state Exp;
branches;
next	1.190;

1.190
date	2011.06.27.23.29.20;	author edd;	state Exp;
branches;
next	1.189;

1.189
date	2011.06.25.14.15.42;	author edd;	state Exp;
branches;
next	1.188;

1.188
date	2011.06.02.13.41.42;	author ajacoutot;	state Exp;
branches;
next	1.187;

1.187
date	2011.05.11.21.24.59;	author ajacoutot;	state Exp;
branches;
next	1.186;

1.186
date	2011.05.11.08.03.22;	author ajacoutot;	state Exp;
branches;
next	1.185;

1.185
date	2011.05.03.09.37.12;	author edd;	state Exp;
branches;
next	1.184;

1.184
date	2011.04.18.23.39.20;	author sthen;	state Exp;
branches;
next	1.183;

1.183
date	2011.04.12.23.23.54;	author sthen;	state Exp;
branches;
next	1.182;

1.182
date	2011.03.29.20.04.41;	author edd;	state Exp;
branches;
next	1.181;

1.181
date	2011.02.12.10.49.36;	author jasper;	state Exp;
branches;
next	1.180;

1.180
date	2010.11.23.10.05.48;	author edd;	state Exp;
branches;
next	1.179;

1.179
date	2010.11.22.10.16.09;	author espie;	state Exp;
branches;
next	1.178;

1.178
date	2010.11.22.09.02.49;	author espie;	state Exp;
branches;
next	1.177;

1.177
date	2010.11.22.08.37.03;	author espie;	state Exp;
branches;
next	1.176;

1.176
date	2010.11.19.09.00.00;	author jasper;	state Exp;
branches;
next	1.175;

1.175
date	2010.11.08.21.25.44;	author edd;	state Exp;
branches;
next	1.174;

1.174
date	2010.10.24.21.15.33;	author ajacoutot;	state Exp;
branches;
next	1.173;

1.173
date	2010.10.19.08.13.58;	author espie;	state Exp;
branches;
next	1.172;

1.172
date	2010.08.25.23.27.21;	author sthen;	state Exp;
branches;
next	1.171;

1.171
date	2010.08.24.14.55.30;	author naddy;	state Exp;
branches;
next	1.170;

1.170
date	2010.08.06.20.05.18;	author naddy;	state Exp;
branches;
next	1.169;

1.169
date	2010.07.14.18.15.37;	author edd;	state Exp;
branches;
next	1.168;

1.168
date	2010.07.03.00.28.40;	author espie;	state Exp;
branches;
next	1.167;

1.167
date	2010.06.30.07.59.53;	author jakemsr;	state Exp;
branches;
next	1.166;

1.166
date	2010.06.14.15.06.49;	author edd;	state Exp;
branches;
next	1.165;

1.165
date	2010.05.26.21.29.56;	author jakemsr;	state Exp;
branches;
next	1.164;

1.164
date	2010.05.18.05.14.17;	author dcoppa;	state Exp;
branches;
next	1.163;

1.163
date	2010.02.23.19.59.13;	author phessler;	state Exp;
branches
	1.163.2.1;
next	1.162;

1.162
date	2009.12.26.19.23.12;	author naddy;	state Exp;
branches;
next	1.161;

1.161
date	2009.12.21.20.46.02;	author ajacoutot;	state Exp;
branches;
next	1.160;

1.160
date	2009.11.18.21.20.15;	author jakemsr;	state Exp;
branches;
next	1.159;

1.159
date	2009.10.13.20.52.55;	author edd;	state Exp;
branches;
next	1.158;

1.158
date	2009.10.13.01.36.49;	author jakemsr;	state Exp;
branches;
next	1.157;

1.157
date	2009.10.11.15.25.04;	author edd;	state Exp;
branches;
next	1.156;

1.156
date	2009.10.11.13.36.23;	author edd;	state Exp;
branches;
next	1.155;

1.155
date	2009.09.13.18.20.55;	author martynas;	state Exp;
branches;
next	1.154;

1.154
date	2009.08.11.08.42.08;	author ajacoutot;	state Exp;
branches;
next	1.153;

1.153
date	2009.08.06.10.46.42;	author mglocker;	state Exp;
branches;
next	1.152;

1.152
date	2009.07.14.19.43.07;	author naddy;	state Exp;
branches;
next	1.151;

1.151
date	2009.07.13.19.35.58;	author naddy;	state Exp;
branches;
next	1.150;

1.150
date	2009.05.05.11.40.08;	author sthen;	state Exp;
branches;
next	1.149;

1.149
date	2009.04.15.09.54.45;	author kili;	state Exp;
branches;
next	1.148;

1.148
date	2009.04.14.19.52.08;	author kili;	state Exp;
branches;
next	1.147;

1.147
date	2009.03.17.08.24.33;	author sthen;	state Exp;
branches;
next	1.146;

1.146
date	2009.03.08.22.45.16;	author jasper;	state Exp;
branches;
next	1.145;

1.145
date	2009.02.08.20.25.09;	author naddy;	state Exp;
branches;
next	1.144;

1.144
date	2009.01.29.17.28.13;	author sthen;	state Exp;
branches;
next	1.143;

1.143
date	2009.01.16.02.39.53;	author jakemsr;	state Exp;
branches;
next	1.142;

1.142
date	2008.12.28.19.09.13;	author ratchov;	state Exp;
branches;
next	1.141;

1.141
date	2008.12.15.21.30.07;	author naddy;	state Exp;
branches;
next	1.140;

1.140
date	2008.11.01.12.03.41;	author jakemsr;	state Exp;
branches;
next	1.139;

1.139
date	2008.10.31.07.12.45;	author jakemsr;	state Exp;
branches;
next	1.138;

1.138
date	2008.10.30.18.33.42;	author ratchov;	state Exp;
branches;
next	1.137;

1.137
date	2008.10.11.11.07.32;	author ajacoutot;	state Exp;
branches;
next	1.136;

1.136
date	2008.10.01.16.01.51;	author naddy;	state Exp;
branches;
next	1.135;

1.135
date	2008.09.15.22.13.02;	author jakemsr;	state Exp;
branches;
next	1.134;

1.134
date	2008.09.03.12.20.52;	author brad;	state Exp;
branches;
next	1.133;

1.133
date	2008.07.09.02.19.36;	author jakemsr;	state Exp;
branches;
next	1.132;

1.132
date	2008.05.01.13.52.19;	author sthen;	state Exp;
branches;
next	1.131;

1.131
date	2008.04.16.01.43.12;	author jakemsr;	state Exp;
branches;
next	1.130;

1.130
date	2008.03.30.20.39.41;	author fgsch;	state Exp;
branches;
next	1.129;

1.129
date	2008.03.25.17.29.57;	author fgsch;	state Exp;
branches;
next	1.128;

1.128
date	2008.03.19.22.35.35;	author jasper;	state Exp;
branches;
next	1.127;

1.127
date	2008.02.18.16.37.38;	author espie;	state Exp;
branches;
next	1.126;

1.126
date	2008.02.12.11.33.16;	author jakemsr;	state Exp;
branches;
next	1.125;

1.125
date	2008.02.11.00.22.03;	author jakemsr;	state Exp;
branches;
next	1.124;

1.124
date	2008.02.08.17.32.41;	author jakemsr;	state Exp;
branches;
next	1.123;

1.123
date	2007.11.15.07.50.27;	author jakemsr;	state Exp;
branches;
next	1.122;

1.122
date	2007.11.12.07.08.24;	author ajacoutot;	state Exp;
branches;
next	1.121;

1.121
date	2007.11.09.15.49.12;	author ajacoutot;	state Exp;
branches;
next	1.120;

1.120
date	2007.09.15.20.04.23;	author merdely;	state Exp;
branches;
next	1.119;

1.119
date	2007.06.07.07.28.36;	author robert;	state Exp;
branches;
next	1.118;

1.118
date	2007.04.28.11.09.51;	author kili;	state Exp;
branches;
next	1.117;

1.117
date	2007.04.19.08.37.09;	author ajacoutot;	state Exp;
branches;
next	1.116;

1.116
date	2007.04.13.23.13.21;	author robert;	state Exp;
branches;
next	1.115;

1.115
date	2007.04.08.17.33.39;	author ajacoutot;	state Exp;
branches;
next	1.114;

1.114
date	2007.04.05.16.20.02;	author kili;	state Exp;
branches;
next	1.113;

1.113
date	2007.02.15.11.49.03;	author biorn;	state Exp;
branches
	1.113.2.1;
next	1.112;

1.112
date	2007.02.12.14.47.11;	author biorn;	state Exp;
branches;
next	1.111;

1.111
date	2007.02.08.18.58.22;	author mglocker;	state Exp;
branches;
next	1.110;

1.110
date	2007.01.22.15.04.04;	author espie;	state Exp;
branches;
next	1.109;

1.109
date	2007.01.04.20.19.54;	author steven;	state Exp;
branches;
next	1.108;

1.108
date	2007.01.02.09.01.58;	author robert;	state Exp;
branches;
next	1.107;

1.107
date	2006.12.28.02.23.17;	author pvalchev;	state Exp;
branches;
next	1.106;

1.106
date	2006.12.16.12.22.36;	author espie;	state Exp;
branches;
next	1.105;

1.105
date	2006.11.29.19.49.33;	author robert;	state Exp;
branches;
next	1.104;

1.104
date	2006.09.25.17.11.37;	author steven;	state Exp;
branches;
next	1.103;

1.103
date	2006.09.18.12.19.41;	author espie;	state Exp;
branches;
next	1.102;

1.102
date	2006.08.16.15.17.15;	author biorn;	state Exp;
branches
	1.102.2.1;
next	1.101;

1.101
date	2006.08.09.08.15.24;	author biorn;	state Exp;
branches;
next	1.100;

1.100
date	2006.08.02.08.24.34;	author alek;	state Exp;
branches;
next	1.99;

1.99
date	2006.07.19.21.40.47;	author robert;	state Exp;
branches;
next	1.98;

1.98
date	2006.04.06.21.47.43;	author biorn;	state Exp;
branches;
next	1.97;

1.97
date	2006.02.23.11.34.54;	author biorn;	state Exp;
branches
	1.97.2.1;
next	1.96;

1.96
date	2006.01.22.06.28.25;	author biorn;	state Exp;
branches;
next	1.95;

1.95
date	2006.01.17.07.41.58;	author jakemsr;	state Exp;
branches;
next	1.94;

1.94
date	2005.10.16.21.29.30;	author espie;	state Exp;
branches;
next	1.93;

1.93
date	2005.10.10.15.37.24;	author espie;	state Exp;
branches;
next	1.92;

1.92
date	2005.10.01.13.40.35;	author espie;	state Exp;
branches;
next	1.91;

1.91
date	2005.09.08.16.35.00;	author fgsch;	state Exp;
branches;
next	1.90;

1.90
date	2005.09.04.23.51.51;	author espie;	state Exp;
branches;
next	1.89;

1.89
date	2005.08.29.06.53.54;	author biorn;	state Exp;
branches
	1.89.2.1;
next	1.88;

1.88
date	2005.08.27.21.11.49;	author espie;	state Exp;
branches;
next	1.87;

1.87
date	2005.08.12.22.59.15;	author espie;	state Exp;
branches;
next	1.86;

1.86
date	2005.08.04.22.43.18;	author robert;	state Exp;
branches;
next	1.85;

1.85
date	2005.07.27.11.56.01;	author biorn;	state Exp;
branches;
next	1.84;

1.84
date	2005.07.25.17.10.09;	author biorn;	state Exp;
branches;
next	1.83;

1.83
date	2005.05.09.12.24.38;	author biorn;	state Exp;
branches;
next	1.82;

1.82
date	2005.04.01.06.28.57;	author biorn;	state Exp;
branches;
next	1.81;

1.81
date	2005.03.27.04.10.51;	author pvalchev;	state Exp;
branches;
next	1.80;

1.80
date	2005.03.16.12.33.35;	author biorn;	state Exp;
branches
	1.80.2.1;
next	1.79;

1.79
date	2005.03.09.16.07.29;	author biorn;	state Exp;
branches;
next	1.78;

1.78
date	2005.01.06.21.33.28;	author biorn;	state Exp;
branches;
next	1.77;

1.77
date	2004.12.22.22.22.13;	author biorn;	state Exp;
branches;
next	1.76;

1.76
date	2004.12.19.12.56.26;	author alek;	state Exp;
branches;
next	1.75;

1.75
date	2004.10.18.06.48.08;	author biorn;	state Exp;
branches;
next	1.74;

1.74
date	2004.08.09.11.09.10;	author espie;	state Exp;
branches
	1.74.2.1;
next	1.73;

1.73
date	2004.07.03.02.10.26;	author robert;	state Exp;
branches;
next	1.72;

1.72
date	2004.06.22.20.34.09;	author naddy;	state Exp;
branches;
next	1.71;

1.71
date	2004.06.22.08.13.11;	author brad;	state Exp;
branches;
next	1.70;

1.70
date	2004.06.15.02.19.56;	author brad;	state Exp;
branches;
next	1.69;

1.69
date	2004.05.06.07.27.36;	author biorn;	state Exp;
branches;
next	1.68;

1.68
date	2004.03.30.21.05.57;	author biorn;	state Exp;
branches;
next	1.67;

1.67
date	2004.03.15.22.42.28;	author pvalchev;	state Exp;
branches
	1.67.2.1;
next	1.66;

1.66
date	2004.03.04.12.57.45;	author avsm;	state Exp;
branches;
next	1.65;

1.65
date	2003.12.16.17.17.14;	author biorn;	state Exp;
branches;
next	1.64;

1.64
date	2003.12.11.08.09.21;	author biorn;	state Exp;
branches;
next	1.63;

1.63
date	2003.12.04.22.05.09;	author biorn;	state Exp;
branches;
next	1.62;

1.62
date	2003.11.12.07.02.07;	author david;	state Exp;
branches;
next	1.61;

1.61
date	2003.11.02.23.30.27;	author brad;	state Exp;
branches;
next	1.60;

1.60
date	2003.10.26.19.54.46;	author brad;	state Exp;
branches;
next	1.59;

1.59
date	2003.09.25.20.59.01;	author sturm;	state Exp;
branches;
next	1.58;

1.58
date	2003.06.18.14.03.36;	author avsm;	state Exp;
branches
	1.58.2.1;
next	1.57;

1.57
date	2003.05.31.00.03.22;	author brad;	state Exp;
branches;
next	1.56;

1.56
date	2003.05.26.16.53.05;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2003.05.18.11.49.55;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2003.04.17.22.16.18;	author wilfried;	state Exp;
branches;
next	1.53;

1.53
date	2003.04.17.10.35.07;	author wilfried;	state Exp;
branches;
next	1.52;

1.52
date	2003.04.06.22.56.28;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2003.03.30.12.27.58;	author miod;	state Exp;
branches;
next	1.50;

1.50
date	2003.02.19.01.06.03;	author pvalchev;	state Exp;
branches
	1.50.2.1;
next	1.49;

1.49
date	2003.02.18.17.17.44;	author espie;	state Exp;
branches;
next	1.48;

1.48
date	2003.02.18.16.40.38;	author brad;	state Exp;
branches;
next	1.47;

1.47
date	2003.02.17.14.55.34;	author brad;	state Exp;
branches;
next	1.46;

1.46
date	2003.02.16.07.25.18;	author brad;	state Exp;
branches;
next	1.45;

1.45
date	2003.01.21.23.07.38;	author sturm;	state Exp;
branches;
next	1.44;

1.44
date	2003.01.06.20.20.20;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2003.01.06.17.33.01;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2003.01.04.00.58.43;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2003.01.03.23.06.35;	author brad;	state Exp;
branches;
next	1.40;

1.40
date	2002.12.22.14.19.47;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2002.11.13.17.54.35;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2002.11.12.08.52.08;	author pvalchev;	state Exp;
branches;
next	1.37;

1.37
date	2002.11.12.06.16.09;	author pvalchev;	state Exp;
branches;
next	1.36;

1.36
date	2002.10.29.23.05.44;	author pvalchev;	state Exp;
branches;
next	1.35;

1.35
date	2002.10.29.19.48.58;	author naddy;	state Exp;
branches;
next	1.34;

1.34
date	2002.10.28.17.56.08;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2002.10.14.09.50.48;	author pvalchev;	state Exp;
branches;
next	1.32;

1.32
date	2002.09.14.12.19.15;	author naddy;	state Exp;
branches;
next	1.31;

1.31
date	2002.09.04.05.40.21;	author pvalchev;	state Exp;
branches;
next	1.30;

1.30
date	2002.08.18.13.17.50;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2002.08.18.12.02.31;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2002.08.18.11.26.48;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2002.08.16.19.20.54;	author pvalchev;	state Exp;
branches;
next	1.26;

1.26
date	2002.08.15.19.00.40;	author mark;	state Exp;
branches;
next	1.25;

1.25
date	2002.06.29.11.51.22;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2002.06.29.11.36.57;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2002.06.29.11.36.07;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2002.06.29.07.24.10;	author pvalchev;	state Exp;
branches;
next	1.21;

1.21
date	2002.06.27.22.03.49;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2002.06.15.05.11.31;	author pvalchev;	state Exp;
branches;
next	1.19;

1.19
date	2002.06.10.03.18.35;	author wilfried;	state Exp;
branches;
next	1.18;

1.18
date	2002.06.08.00.48.26;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2002.06.04.11.26.17;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2002.05.17.02.00.29;	author pvalchev;	state Exp;
branches;
next	1.15;

1.15
date	2002.05.16.14.00.23;	author art;	state Exp;
branches;
next	1.14;

1.14
date	2002.05.16.13.57.49;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2002.05.15.23.16.59;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2002.05.15.22.27.00;	author pvalchev;	state Exp;
branches;
next	1.11;

1.11
date	2002.05.14.03.10.19;	author pvalchev;	state Exp;
branches;
next	1.10;

1.10
date	2002.05.12.18.50.46;	author niklas;	state Exp;
branches;
next	1.9;

1.9
date	2002.05.12.08.25.56;	author pvalchev;	state Exp;
branches;
next	1.8;

1.8
date	2002.05.12.08.16.24;	author pvalchev;	state Exp;
branches;
next	1.7;

1.7
date	2002.05.10.19.50.31;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2002.05.10.19.42.25;	author pvalchev;	state Exp;
branches;
next	1.5;

1.5
date	2002.05.10.19.40.09;	author pvalchev;	state Exp;
branches;
next	1.4;

1.4
date	2002.05.10.19.26.14;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2002.05.09.20.03.18;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.09.14.01.42;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2002.05.09.05.19.10;	author pvalchev;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.05.09.05.19.10;	author pvalchev;	state Exp;
branches;
next	;

1.50.2.1
date	2003.11.08.00.27.58;	author margarida;	state Exp;
branches;
next	;

1.58.2.1
date	2003.11.08.00.23.06;	author margarida;	state Exp;
branches;
next	1.58.2.2;

1.58.2.2
date	2004.04.16.00.48.45;	author brad;	state Exp;
branches;
next	1.58.2.3;

1.58.2.3
date	2004.07.06.22.26.17;	author robert;	state Exp;
branches;
next	;

1.67.2.1
date	2004.05.08.13.10.54;	author biorn;	state Exp;
branches;
next	1.67.2.2;

1.67.2.2
date	2004.07.04.12.15.58;	author robert;	state Exp;
branches;
next	1.67.2.3;

1.67.2.3
date	2005.01.22.10.50.59;	author robert;	state Exp;
branches;
next	;

1.74.2.1
date	2005.01.22.10.44.54;	author robert;	state Exp;
branches;
next	1.74.2.2;

1.74.2.2
date	2005.09.12.19.22.18;	author sturm;	state Exp;
branches;
next	1.74.2.3;

1.74.2.3
date	2005.09.22.20.46.25;	author robert;	state Exp;
branches;
next	;

1.80.2.1
date	2005.09.12.19.27.58;	author sturm;	state Exp;
branches;
next	1.80.2.2;

1.80.2.2
date	2005.09.22.20.43.25;	author robert;	state Exp;
branches;
next	1.80.2.3;

1.80.2.3
date	2006.02.28.08.22.44;	author sturm;	state Exp;
branches;
next	1.80.2.4;

1.80.2.4
date	2006.04.08.14.33.43;	author sturm;	state Exp;
branches;
next	;

1.89.2.1
date	2006.02.28.08.23.49;	author sturm;	state Exp;
branches;
next	1.89.2.2;

1.89.2.2
date	2006.04.08.14.34.26;	author sturm;	state Exp;
branches;
next	;

1.97.2.1
date	2006.05.01.17.53.42;	author sturm;	state Exp;
branches;
next	1.97.2.2;

1.97.2.2
date	2007.01.04.20.18.57;	author sturm;	state Exp;
branches;
next	1.97.2.3;

1.97.2.3
date	2007.04.19.13.20.44;	author sturm;	state Exp;
branches;
next	;

1.102.2.1
date	2007.01.03.21.20.26;	author sturm;	state Exp;
branches;
next	1.102.2.2;

1.102.2.2
date	2007.04.19.14.15.51;	author sturm;	state Exp;
branches;
next	1.102.2.3;

1.102.2.3
date	2007.06.17.09.29.23;	author sturm;	state Exp;
branches;
next	;

1.113.2.1
date	2007.05.01.16.43.14;	author sturm;	state Exp;
branches;
next	1.113.2.2;

1.113.2.2
date	2007.06.17.09.29.08;	author sturm;	state Exp;
branches;
next	;

1.163.2.1
date	2010.07.25.23.58.20;	author william;	state Exp;
branches;
next	;

1.259.2.1
date	2016.07.05.07.00.10;	author jasper;	state Exp;
branches;
next	;
commitid	Ne08o07KIIgR4Epx;


desc
@@


1.275
log
@Sync FFMPEG_V with graphics/ffmpeg.

from Brad (maintainer)
@
text
@# $OpenBSD: Makefile,v 1.274 2017/04/10 11:46:36 sthen Exp $

COMMENT=	movie player supporting many formats

V=		20161008
FFMPEG_V=	20170610
DISTNAME=	mplayer-${V}
REVISION=	4
CATEGORIES=	x11 multimedia
MASTER_SITES=	http://comstyle.com/source/
EXTRACT_SUFX=	.tar.xz

HOMEPAGE=	http://www.mplayerhq.hu/

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# GPLv2
PERMIT_PACKAGE_CDROM=	patents
PERMIT_PACKAGE_FTP=	Yes

WANTLIB=	EGL GL SDL X11 Xext Xinerama Xss Xv Xxf86dga Xxf86vm ass \
		avcodec avformat avutil bluray bs2b bz2 c cdda_interface \
		cdda_paranoia crypto dv dvdnav dvdread enca fontconfig \
		freetype fribidi gif iconv jpeg m mng mp3lame ncurses png \
		postproc pthread sndio ssl ${LIBCXX} swscale swresample util \
		x264 xvidcore z

MODULES+=	lang/clang

MODCLANG_ARCHS=	amd64 i386

LIB_DEPENDS=	archivers/bzip2 \
		audio/cdparanoia \
		audio/lame \
		audio/libbs2b \
		converters/enca \
		converters/libiconv \
		devel/fribidi \
		devel/sdl \
		devel/libdvdread \
		graphics/ffmpeg>=${FFMPEG_V} \
		graphics/giflib \
		graphics/jpeg \
		graphics/libmng \
		graphics/png \
		multimedia/libass \
		multimedia/libbluray>=0.8.0 \
		multimedia/libdv \
		multimedia/libdvdnav \
		multimedia/x264

BUILD_DEPENDS=	audio/ladspa \
		audio/rtunes \
		net/livemedia \
		textproc/docbook-xsl
# MPlayer uses non-public interfaces to FFmpeg, so we still need
# the FFmpeg source in the MPlayer tree at build time.
BUILD_DEPENDS+=	graphics/ffmpeg:patch

.if ${MACHINE_ARCH:Mamd64} || ${MACHINE_ARCH:Mi386}
BUILD_DEPENDS+=	devel/yasm
.endif

CONFDIR=	${SYSCONFDIR}/mplayer

MAKE_ENV=	V=1
SUBST_VARS+=	PREFIX CONFDIR

.if ${MACHINE_ARCH:Marm}
# uses ARM EABI
MPLAYER_ARCH=	generic
.else
MPLAYER_ARCH=	${MACHINE_ARCH}
.endif

# Add back fast math flag since we override CFLAGS
CFLAGS+=	-ffast-math

# PIE doesn't leave sufficient registers
.if ${MACHINE_ARCH:Mi386}
CFLAGS+=	-fomit-frame-pointer
.endif

USE_GMAKE=	Yes
CONFIGURE_STYLE= simple

# CONFIGURE_ARGS for misc stuff
CONFIGURE_ARGS+=--confdir=${CONFDIR} \
		--extra-cflags="-I${LOCALBASE}/include" \
		--extra-ldflags="-L${LOCALBASE}/lib -ffast-math" \
		--extra-libs-mplayer="-lrtunes -lcrypto" \
		--mandir=${LOCALBASE}/man \
		--target="${MPLAYER_ARCH}-openbsd"

# CONFIGURE_ARGS that disable internal stuff
CONFIGURE_ARGS+=--disable-alsa \
		--disable-arts \
		--disable-esd \
		--disable-ffmpeg_a \
		--disable-gui \
		--disable-libcdio \
		--disable-libmpeg2-internal \
		--disable-ossaudio \
		--disable-select \
		--disable-sunaudio \
		--disable-vidix

# CONFIGURE_ARGS that enable internal stuff
CONFIGURE_ARGS+=--enable-menu

# CONFIGURE_ARGS that enable external stuff
CONFIGURE_ARGS+=--enable-openssl-nondistributable \
		--with-sdl-config=${LOCALBASE}/bin/sdl-config

# CONFIGURE_ARGS that disable external stuff
CONFIGURE_ARGS+=--disable-caca \
		--disable-faac \
		--disable-faad \
		--disable-faac-lavc \
		--disable-ggi \
		--disable-gnutls \
		--disable-langinfo \
		--disable-liba52 \
		--disable-libdca \
		--disable-libilbc \
		--disable-liblzo \
		--disable-libmpeg2 \
		--disable-libopencore_amrnb \
		--disable-libopencore_amrwb \
		--disable-libopenjpeg \
		--disable-libopus \
		--disable-librtmp \
		--disable-libvorbis \
		--disable-mad \
		--disable-mpg123 \
		--disable-nas \
		--disable-openal \
		--disable-pulse \
		--disable-relocatable \
		--disable-smb \
		--disable-speex \
		--disable-theora \
		--disable-toolame \
		--disable-twolame \
		--disable-win32dll

.if ${MACHINE_ARCH:Marm}
WANTLIB+=	ogg vorbisidec
LIB_DEPENDS+=	audio/tremor
.else
CONFIGURE_ARGS+=--disable-tremor
.endif

.if ${MACHINE_ARCH:Mamd64} || ${MACHINE_ARCH:Mi386}
CONFIGURE_ARGS+=--enable-runtime-cpudetection
.endif

# binutils 2.15 assembler missing opcode support
.if ${MACHINE_ARCH:Mpowerpc}
CONFIGURE_ARGS+=--disable-altivec \
		--enable-runtime-cpudetection
.endif

.if ${MACHINE_ARCH:Marm}
# disable common floating point decoders that have integer alternatives
CONFIGURE_ARGS+=--disable-decoder=mp2float \
		--disable-decoder=mp3adufloat \
		--disable-decoder=mp3float \
		--disable-decoder=mp3on4float \
		--disable-decoder=vorbis
.endif

CONFIGURE_ENV+=	LOCALBASE="${LOCALBASE}" TMPDIR="${WRKBUILD}"

FLAVORS=	debug aa jack
FLAVOR?=

.if ${FLAVOR:Mdebug}
CONFIGURE_ARGS+=--enable-debug=3 \
		--disable-sighandler
.endif

.if ${FLAVOR:Maa}
LIB_DEPENDS+=	graphics/aalib
WANTLIB+=	aa
.else
CONFIGURE_ARGS+=--disable-aa
.endif

.if ${FLAVOR:Mjack}
LIB_DEPENDS+=	audio/jack
WANTLIB+=	jack
.else
CONFIGURE_ARGS+=--disable-jack
.endif

NO_TEST=	Yes

DOCDIR=		${PREFIX}/share/doc/mplayer
EXAMPLEDIR=	${PREFIX}/share/examples/mplayer

EXAMPLES=	input.conf menu.conf codecs.conf

post-extract:
	@@cp ${FILESDIR}/ao_rtunes.c ${WRKSRC}/libao2
	@@cp ${FILESDIR}/ai_sndio.c ${WRKSRC}/stream

pre-patch:
	@@ln -s ${WRKDIR}/graphics/ffmpeg/ffmpeg-git-${FFMPEG_V} ${WRKSRC}/ffmpeg

post-build:
	@@cd ${WRKSRC} && ${MAKE_PROGRAM} doc

post-install:
	${INSTALL_DATA_DIR} ${DOCDIR}
	${INSTALL_DATA_DIR} ${EXAMPLEDIR}
	cd ${WRKDIST}/etc; ${INSTALL_DATA} ${EXAMPLES} ${EXAMPLEDIR}
	${INSTALL_DATA} ${WRKDIST}/etc/example.conf ${EXAMPLEDIR}/mplayer.conf
	${INSTALL_DATA} ${WRKDIST}/DOCS/HTML/en/*.html ${DOCDIR}

.include <bsd.port.mk>
@


1.274
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.273 2017/02/17 09:05:09 ajacoutot Exp $
d6 1
a6 1
FFMPEG_V=	20170208
d8 1
a8 1
REVISION=	3
@


1.273
log
@Remove ONLY_FOR_ARCHS; we're building almost everywhere and CLANG_ARCHS
now exists.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.272 2017/02/09 12:58:39 ajacoutot Exp $
d25 1
a25 1
		postproc pthread sndio ssl stdc++ swscale swresample util \
@


1.272
log
@Bump FFMPEG_V to 20170208.

from Brad (maintainer)
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.271 2017/02/01 20:59:41 sthen Exp $

# May not be hard to add more.
ONLY_FOR_ARCHS=	${GCC4_ARCHS}
@


1.271
log
@As spotted by jmc@@ and someone else who I forgot, mplayer has a hidden dep
on libbs2b; add it as a proper dependency to avoid periodic package breakage.
ok Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.270 2016/12/11 09:28:20 ajacoutot Exp $
d9 1
a9 1
FFMPEG_V=	20161210
d11 1
a11 1
REVISION=	2
@


1.270
log
@Sync FFMPEG_V.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.269 2016/12/05 09:03:09 ajacoutot Exp $
d11 1
a11 1
REVISION=	1
d25 1
a25 1
		avcodec avformat avutil bluray bz2 c cdda_interface \
d38 1
@


1.269
log
@Sync with new FFMPEG version

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.268 2016/10/08 20:14:06 ajacoutot Exp $
d9 1
a9 1
FFMPEG_V=	20161203
d11 1
a11 1
REVISION=	0
@


1.268
log
@Update to mplayer-20161008.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.267 2016/10/08 17:51:30 ajacoutot Exp $
d9 1
a9 1
FFMPEG_V=	20161008
d11 1
@


1.267
log
@New FFmpeg version.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.266 2016/09/12 21:14:09 naddy Exp $
d8 1
a8 1
V=		20160306
a10 1
REVISION=	4
@


1.266
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.265 2016/09/06 12:37:52 ajacoutot Exp $
d9 1
a9 1
FFMPEG_V=	20160903
d11 1
a11 1
REVISION=	3
@


1.265
log
@Sync FFMPEG_V.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.264 2016/07/05 06:59:29 jasper Exp $
d27 3
a29 3
		freetype fribidi gif jpeg m mng mp3lame ncurses png postproc \
		pthread sndio ssl stdc++ swscale swresample util x264 xvidcore \
		z
d31 1
a31 2
MODULES+=	converters/libiconv \
		lang/clang
d39 1
@


1.264
log
@Fix for CVE-2016-4352, from upstream

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.263 2016/05/03 06:06:26 ajacoutot Exp $
d9 1
a9 1
FFMPEG_V=	20160502
d11 1
a11 1
REVISION=	2
@


1.263
log
@Sync with new ffmpeg version.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.262 2016/04/04 12:44:08 espie Exp $
d11 1
a11 1
REVISION=	1
@


1.262
log
@something changed in latest mplayer, it no longer plays animated gifs
without burping.

turns out the extra info stuff gets corrupted/badly loaded, with sizes
such that this tries to allocate huge amounts of memory.

Work around by not copying stuff over if the malloc fails.

okay aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.261 2016/03/18 23:12:21 naddy Exp $
d9 1
a9 1
FFMPEG_V=	20160113
d11 1
a11 1
REVISION=	0
@


1.261
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.260 2016/03/14 19:50:13 ajacoutot Exp $
d11 1
@


1.260
log
@Update to mplayer-20160306.

from Brad (maintainer)
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.259 2016/01/14 06:10:19 ajacoutot Exp $

SHARED_ONLY=	Yes
@


1.259
log
@Bump FFMpeg version.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.258 2015/12/21 01:08:16 sthen Exp $
d10 1
a10 1
V=		20150910
a12 1
REVISION=	3
d29 2
a30 1
		pthread sndio stdc++ swscale swresample util x264 xvidcore z
d115 2
a116 1
CONFIGURE_ARGS+=--with-sdl-config=${LOCALBASE}/bin/sdl-config
@


1.259.2.1
log
@commit from right directory to get the bump also
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.259 2016/01/14 06:10:19 ajacoutot Exp $
d13 1
a13 1
REVISION=	4
@


1.258
log
@Use srand_deterministic() in mplayer noise filter; not doing this breaks
2-pass encoding with -vf noise which expects the same noise on each pass.
Reported by Rich Felker, ok Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.257 2015/11/16 06:37:35 ajacoutot Exp $
d11 1
a11 1
FFMPEG_V=	20151112
d13 1
a13 1
REVISION=	2
@


1.257
log
@New FFmpeg version.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.256 2015/10/06 21:39:50 ajacoutot Exp $
d13 1
a13 1
REVISION=	1
@


1.256
log
@Missing dep.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.255 2015/09/10 08:31:36 ajacoutot Exp $
d11 1
a11 1
FFMPEG_V=	20150909
d13 1
a13 1
REVISION=	0
@


1.255
log
@Update to mplayer-20150910.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.254 2015/09/10 07:10:42 ajacoutot Exp $
d13 1
d40 1
@


1.254
log
@Sync with newer FFMpeg version.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.253 2015/07/26 07:22:53 ajacoutot Exp $
d10 1
a10 1
V=		20150510
a12 1
REVISION=	3
d29 1
a29 1
		pthread sndio stdc++ swscale util x264 xvidcore z
@


1.253
log
@Bump FFmpeg version.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.252 2015/06/10 06:35:17 ajacoutot Exp $
d11 1
a11 1
FFMPEG_V=	20150723
d13 1
a13 1
REVISION=	2
@


1.252
log
@Sync FFMPEG_V for new FFmpeg.

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.251 2015/05/23 07:19:44 ajacoutot Exp $
d11 1
a11 1
FFMPEG_V=	20150609
d13 1
a13 1
REVISION=	1
@


1.251
log
@Tighten up dependency on libbluray.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.250 2015/05/11 23:23:17 ajacoutot Exp $
d11 1
a11 1
FFMPEG_V=	20150412
d13 1
a13 1
REVISION=	0
@


1.250
log
@Update to mplayer-20150510.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.249 2015/04/28 06:35:06 ajacoutot Exp $
d13 1
d42 1
a42 1
		devel/libdvdread>=4.2.0 \
d49 1
a49 1
		multimedia/libbluray \
d51 1
a51 1
		multimedia/libdvdnav>=4.2.0 \
@


1.249
log
@Cope with FFmpeg 20150412.

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.248 2015/02/17 01:23:11 brad Exp $
d10 1
a10 1
V=		20141103
a12 1
REVISION=	4
@


1.248
log
@Fix the example of using a different DVD drive other than the
default for OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.247 2015/01/11 02:44:44 brad Exp $
d11 1
a11 1
FFMPEG_V=	20150107
d13 1
a13 1
REVISION=	3
@


1.247
log
@Remove USE_GROFF. naddy@@ says its basically just whitespace differences
and the pages look more than readable to me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.246 2015/01/10 23:13:29 brad Exp $
d8 1
a8 1
COMMENT =	movie player supporting many formats
d13 1
a13 1
REVISION=	2
@


1.246
log
@Tidy up the Makefile so my eyes don't bleed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.244 2014/11/29 06:53:25 brad Exp $
a86 1
USE_GROFF=	Yes
@


1.245
log
@Bump for FFmpeg 20150107.
@
text
@d3 1
a3 1
SHARED_ONLY=		Yes
d6 1
a6 1
ONLY_FOR_ARCHS =	${GCC4_ARCHS}
d8 1
a8 1
COMMENT =		movie player supporting many formats
d10 7
a16 2
V =			20141103
FFMPEG_V =		20150107
d18 1
a18 1
SUBST_VARS += 		PREFIX CONFDIR
d20 1
a20 9
# Distfiles must be hand-rolled, see README
N =			mplayer
DISTNAME =		mplayer-${V}
REVISION =		1
EXTRACT_SUFX =		.tar.xz

CATEGORIES =		x11 multimedia

HOMEPAGE =		http://www.mplayerhq.hu/
d23 2
a24 2
PERMIT_PACKAGE_CDROM =		patents
PERMIT_PACKAGE_FTP =		Yes
d26 5
a30 5
WANTLIB =	EGL GL X11 Xext Xinerama Xss Xv Xxf86dga Xxf86vm ass avcodec \
		avformat avutil bluray bz2 c cdda_interface cdda_paranoia \
		crypto dv dvdnav dvdread enca fontconfig freetype \
		fribidi jpeg m mng mp3lame ncurses png postproc pthread \
		SDL sndio stdc++ swscale gif util x264>=5 xvidcore z
d32 2
a33 2
# we use a snapshot
MASTER_SITES =	http://comstyle.com/source/
d35 1
a35 1
MAINTAINER =	Brad Smith <brad@@comstyle.com>
d37 2
a38 8
MODULES +=	converters/libiconv \
		lang/clang

LIB_DEPENDS =	graphics/png \
		graphics/jpeg \
		graphics/giflib \
		graphics/ffmpeg>=${FFMPEG_V} \
		audio/cdparanoia>=3.a9.8 \
a39 2
		multimedia/libbluray \
		multimedia/libdv \
d41 5
d47 1
a47 3
		archivers/bzip2 \
		multimedia/x264>=20101023 \
		devel/sdl>=1.2.5 \
d49 4
a52 2
		devel/libdvdread>=4.2.0 \
		multimedia/libdvdnav>=4.2.0
d54 4
a57 4
BUILD_DEPENDS =	net/livemedia \
		audio/rtunes>=0.8 \
		textproc/docbook-xsl \
		audio/ladspa
d60 1
a60 1
BUILD_DEPENDS +=graphics/ffmpeg:patch
d63 1
a63 1
BUILD_DEPENDS += devel/yasm
d66 1
a66 1
MODCLANG_ARCHS=	amd64 i386
d68 2
a69 1
CONFDIR =	${SYSCONFDIR}/mplayer
d73 1
a73 1
MPLAYER_ARCH =	generic
d75 1
a75 1
MPLAYER_ARCH =	${MACHINE_ARCH}
d79 1
a79 1
CFLAGS +=	-ffast-math
d83 1
a83 1
CFLAGS +=	-fomit-frame-pointer
d86 3
a88 4
USE_GMAKE =	Yes
USE_GROFF =	Yes
MAKE_ENV =	V=1 	# turn on verbose FFmpeg build
CONFIGURE_STYLE = simple
d91 1
a91 3
CONFIGURE_ARGS += --target="${MPLAYER_ARCH}-openbsd" \
		--confdir=${CONFDIR} \
		--mandir=${LOCALBASE}/man \
d94 3
a96 1
		--extra-libs-mplayer="-lrtunes -lcrypto"
d99 1
a99 2
# gui is not supported anymore and we have better ones in ports
CONFIGURE_ARGS += --disable-alsa \
d102 4
d107 1
d109 1
a109 6
		--disable-vidix \
		--disable-select \
		--disable-libcdio \
		--disable-libmpeg2-internal \
		--disable-gui \
		--disable-ffmpeg_a	# link FFmpeg .so (graphics/ffmpeg)
d112 1
a112 1
CONFIGURE_ARGS += --enable-menu
d115 1
a115 1
CONFIGURE_ARGS += --with-sdl-config=${LOCALBASE}/bin/sdl-config
d118 6
a123 4
CONFIGURE_ARGS += --disable-smb \
		--disable-liblzo \
		--disable-nas \
		--disable-caca \
d125 1
a125 2
		--disable-mad \
		--disable-openal \
a126 1
		--disable-liba52 \
d128 1
a129 4
		--disable-toolame \
		--disable-twolame \
		--disable-win32dll \
		--disable-ggi \
d133 4
d138 2
a139 5
		--disable-librtmp \
		--disable-faac \
		--disable-faac-lavc \
		--disable-faad \
		--disable-theora \
d142 1
d144 4
a147 3
		--disable-libopus \
		--disable-libvorbis \
		--disable-gnutls
d150 2
a151 2
WANTLIB +=	ogg vorbisidec
LIB_DEPENDS +=	audio/tremor
d153 1
a153 1
CONFIGURE_ARGS += --disable-tremor
a155 2
CONFIGURE_ENV += LOCALBASE="${LOCALBASE}" TMPDIR="${WRKBUILD}"

d157 1
a157 1
CONFIGURE_ARGS += --enable-runtime-cpudetection
d162 2
a163 2
CONFIGURE_ARGS += --disable-altivec
CONFIGURE_ARGS += --enable-runtime-cpudetection
d168 1
a168 1
CONFIGURE_ARGS += --disable-decoder=mp3on4float \
d171 1
a171 1
		--disable-decoder=mp2float \
d175 4
a178 2
FLAVORS =	debug aa jack
FLAVOR ?=
d181 1
a181 1
CONFIGURE_ARGS += --enable-debug=3 \
d186 2
a187 2
LIB_DEPENDS +=	graphics/aalib
WANTLIB +=	aa>=1.3
d189 1
a189 1
CONFIGURE_ARGS += --disable-aa
d193 2
a194 2
LIB_DEPENDS +=	audio/jack
WANTLIB +=	jack
d196 1
a196 1
CONFIGURE_ARGS += --disable-jack
d199 4
a202 1
NO_TEST =	Yes
d204 1
a204 2
DOCDIR =	${PREFIX}/share/doc/mplayer
EXAMPLEDIR =	${PREFIX}/share/examples/mplayer
a205 1
# copy in rtunes and sndio backends
a209 1
# link FFmpeg sources to where build expects
d211 1
a211 1
	ln -s ${WRKDIR}/graphics/ffmpeg/ffmpeg-git-${FFMPEG_V} ${WRKSRC}/ffmpeg
a215 1
# install docs
d219 1
a219 2
	cd ${WRKDIST}/etc; ${INSTALL_DATA} input.conf menu.conf codecs.conf \
		${EXAMPLEDIR}
@


1.244
log
@Disable a completely bogus test that was added to try and add
HTTPS support layered on top of FFmpeg.

Pointed out by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.243 2014/11/14 06:18:42 brad Exp $
d11 1
a11 1
FFMPEG_V =		20141010
d18 1
a18 1
REVISION =		0
@


1.243
log
@Update to MPlayer 20141103 snapshot.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.242 2014/10/19 23:14:24 brad Exp $
d18 1
d153 2
a154 1
		--disable-libvorbis
@


1.242
log
@Update to FFmpeg 20141010 snapshot. From 2.4 branch.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.241 2014/10/15 17:33:51 jasper Exp $
d10 1
a10 1
V =			20140824
a17 1
REVISION =		0
d28 1
a28 1
WANTLIB =	GL X11 Xext Xinerama Xss Xv Xxf86dga Xxf86vm ass avcodec \
d30 1
a30 1
		crypto dv dvdnavmini dvdread enca fontconfig freetype \
a113 2
		--disable-dvdread-internal \
		--disable-libdvdcss-internal \
@


1.241
log
@remove instances of MODCLANG_LANGS=c as 'c' is already the default.
nb: it leaves cases where multiple languages (such as 'c' and 'c++') to make
it clear what the full list is.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.240 2014/09/03 06:43:28 brad Exp $
d11 1
a11 1
FFMPEG_V =		20140810
d18 1
@


1.240
log
@Update to MPlayer 20140824 snapshot.

ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.239 2014/08/14 08:20:27 brad Exp $
a71 1
MODCLANG_LANGS=	c
@


1.239
log
@Update to FFmpeg 20140810 snapshot. From master branch.

ok ajacoutot@@ zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.238 2014/07/12 22:01:53 brad Exp $
d10 1
a10 1
V =			20140412
a17 1
REVISION =		1
d28 1
a28 1
WANTLIB =	EGL GL X11 Xext Xinerama Xss Xv Xxf86dga Xxf86vm ass avcodec \
@


1.238
log
@Reduce the external dependencies for MPlayer by disabling
the Opus and Speex decoders in favour of using FFmpeg for
decoding; also fix the Vorbis handling.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.237 2014/05/16 01:34:50 brad Exp $
d11 1
a11 1
FFMPEG_V =		20140412
d18 1
a18 1
REVISION =		0
@


1.237
log
@Update to FFmpeg 20140412 snapshot. From 2.2 branch.

Update to MPlayer 20140412 snapshot.

Take MAINTAINER for MPlayer. ok edd@@

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.236 2014/05/15 20:01:38 espie Exp $
d18 1
d32 2
a33 3
		fribidi jpeg m mng mp3lame ncurses ogg>=5 opus png postproc \
		pthread SDL sndio speex stdc++ swscale gif util x264>=5 \
		xvidcore z
a47 2
		audio/speex \
		audio/libogg \
a48 1
		audio/opus \
d153 4
a156 1
		--disable-relocatable
a157 3
# internal tremor, external tremor, external libvorbis all conflict
# we choose libvorbis to enable encoding to vorbis
CONFIGURE_ARGS += --disable-tremor
d159 2
a160 2
# ... except on arm, which has no floating point hardware
CONFIGURE_ARGS += --disable-libvorbis
d162 1
a162 2
LIB_DEPENDS +=	audio/libvorbis
WANTLIB +=	vorbisenc vorbis
@


1.236
log
@fix real demuxer, patch cherry-picked from upstream, after brad@@ reported
the issue to them.

so the patch is going to be in the next update, which may break some other
things. So let's go forward and provide something strictly better than
the current port. :)

okay edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.235 2014/02/19 19:12:42 ratchov Exp $
d10 2
a11 2
V =			20140106
FFMPEG_V =		20131216
a17 1
REVISION =		4
d38 1
a38 1
MAINTAINER =	Edd Barrett <edd@@openbsd.org>
d40 2
a41 1
MODULES +=	converters/libiconv
d75 3
a170 1
# binutils 2.15 does not support SSSE3 / SSE4 for amd64 / i386
a172 2
CONFIGURE_ARGS += --disable-ssse3
CONFIGURE_ARGS += --disable-sse4
@


1.235
log
@Fix playback of s24le audio. Tested by edd@@, yasuoka@@ and brad@@

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234 2014/02/16 19:50:52 pascal Exp $
d18 1
a18 1
REVISION =		3
@


1.234
log
@Merge upstream commit r36845:
Fix probe bug losing video packets.

ds_fill_buffer will actually lose any data from previous
ds_fill_buffer calls.
Use demux_fill_buffer instead to get the intended behaviour.

This fixes mplayer -nosound with DVDs, as used by multimedia/ogmrip.

ok sthen@@ aja@@ espie@@, no objection jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.233 2014/02/07 09:37:05 yasuoka Exp $
d18 1
a18 1
REVISION =		2
@


1.233
log
@Specify `msb' field properly.  This is required to play {s,u}24be
audio.

ok sthen ratchov
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.232 2014/01/31 10:44:56 ratchov Exp $
d18 1
a18 1
REVISION =		1
@


1.232
log
@Mplayer requires the byte-order flag to be set for 8-bit formats
as well. Fixes playback of 8-bit audio files.
ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.231 2014/01/10 21:52:29 brad Exp $
d18 1
a18 1
REVISION =		0
@


1.231
log
@Update to MPlayer 20140106 snapshot.

ok edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.230 2014/01/02 12:21:49 sthen Exp $
d18 1
@


1.230
log
@Fix some of the ports broken by the move to PIE on i386. This fixes those
ports where there are now insufficient registers, for which using
-fomit-frame-pointer (to free up ebp) is enough to get them building
again. Regen distinfo while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.229 2013/12/24 15:22:55 brad Exp $
d10 1
a10 1
V =			20130819
a11 1
REVISION =		2
d28 1
a28 1
WANTLIB =	GL X11 Xext Xinerama Xss Xv Xxf86dga Xxf86vm ass avcodec \
d78 1
a78 1
MPLAYER_ARCH=	generic
d80 1
a80 1
MPLAYER_ARCH=	${MACHINE_ARCH}
d83 3
d88 1
a88 1
CFLAGS += -fomit-frame-pointer
d101 1
a101 1
		--extra-ldflags="-L${LOCALBASE}/lib" \
d151 2
a152 1
		--disable-pulse
d218 1
a218 1
	@@cp ${FILESDIR}/ao_rtunes.c ${FILESDIR}/ao_sndio.c ${WRKSRC}/libao2
@


1.229
log
@Update to FFmpeg 20131216 snapshot. From 1.2 branch.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.228 2013/12/12 21:41:54 brad Exp $
d12 1
a12 1
REVISION =		1
d82 5
@


1.228
log
@Use MPlayer configure's --target option to pass in the systems machine arch
and eliminate a chunk of the configure patch to recognize some of the MIPS
ports.

ok edd@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.227 2013/09/25 07:58:50 sthen Exp $
d11 2
a12 2
FFMPEG_V =		20130718
REVISION =		0
@


1.227
log
@libungif->giflib and patch where necessary, ok jasper@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.226 2013/09/17 05:25:39 mlarkin Exp $
d77 7
d90 2
a91 1
CONFIGURE_ARGS += --confdir=${CONFDIR} \
a178 2
# ARM native target code wants eABI ABI
CONFIGURE_ARGS += --target=generic-openbsd
@


1.226
log
@

Revert previous, apparently we really did mean SSSE3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.225 2013/09/17 05:18:15 mlarkin Exp $
d12 1
d33 1
a33 1
		pthread SDL sndio speex stdc++ swscale ungif util x264>=5 \
d45 1
a45 1
		graphics/libungif \
@


1.225
log
@

Typo in comment: SSSE3 -> SSE3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.224 2013/09/06 23:14:39 brad Exp $
d150 1
a150 1
# binutils 2.15 does not support SSE3 / SSE4 for amd64 / i386
@


1.224
log
@Update to MPlayer 20130819 snapshot.

ok gonzalo@@ sthen@@ edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.223 2013/08/19 14:40:21 brad Exp $
d150 1
a150 1
# binutils 2.15 does not support SSSE3 / SSE4 for amd64 / i386
@


1.223
log
@Update after FFmpeg 20130718 update plus remove some unnecessary patching.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.222 2013/06/04 18:41:59 naddy Exp $
d10 1
a10 1
V =			20130214
a11 1
REVISION =		5
@


1.222
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.221 2013/05/05 21:11:32 brad Exp $
d11 2
a12 2
FFMPEG_V =		20130319
REVISION =		4
@


1.221
log
@- Simplify sndio configure check based on feedback from upstream
- Remove X LP64 patch as the bug was fixed upstream awhile ago

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.220 2013/04/30 00:46:56 brad Exp $
d85 1
a85 1
		--extra-cflags="-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
@


1.220
log
@Tweak some of the Makefile comments and remove some hacks in the
configure script which are no longer necessary.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.219 2013/04/17 23:03:23 ratchov Exp $
d12 1
a12 1
REVISION =		3
@


1.219
log
@allocate the right number of pollfd structures
ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.218 2013/04/08 23:43:32 brad Exp $
d12 1
a12 1
REVISION =		2
d151 1
a151 1
# binutils 2.15 does not do SSSE3 for amd64/i386
d158 1
a158 1
# again binutils 2.15 limits what we can do here too
d171 1
a171 1
# again old binutils...
@


1.218
log
@Partially revert previous commit and commit the proper fix for the FFmpeg update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.217 2013/04/08 17:08:36 brad Exp $
d12 1
a18 1
REVISION =		1
@


1.217
log
@Update after FFmpeg 20130319 update.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.216 2013/03/13 02:28:11 brad Exp $
d11 1
a11 1
FFMPEG_V =		20130214
d18 1
a18 1
REVISION =		0
d151 1
a151 1
# binutils 2.17 does not support SSE4
d154 1
d158 1
a158 1
# binutils 2.15 limits what we can do here too
@


1.216
log
@Update to MPlayer 20130214 snapshot.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.215 2013/03/11 11:46:14 espie Exp $
d18 1
d151 2
a152 2
# binutils 2.15 does not do sse3 for i386/amd64
.if ${MACHINE_ARCH:Mi386} || ${MACHINE_ARCH:Mamd64}
a153 1
CONFIGURE_ARGS += --disable-ssse3
d157 1
a157 1
# again binutils 2.15 limits what we can do here too
@


1.215
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.214 2013/02/09 14:49:54 sthen Exp $
d10 2
a11 2
V =			20120725
FFMPEG_V =		20121026
d120 1
a145 1
CONFIGURE_ARGS += --disable-tremor-internal
d154 1
d165 1
a165 2
CONFIGURE_ARGS += --disable-mp3lib \
		--disable-decoder=mp3on4float \
@


1.214
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.213 2013/01/21 16:23:05 brad Exp $
a26 2
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
d196 1
a196 1
NO_REGRESS =	Yes
@


1.213
log
@Update to MPlayer 20120725 snapshot.

Testing by naddy@@ sthen@@ landry@@ dcoppa@@
OK naddy@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.212 2013/01/14 17:02:15 brad Exp $
d179 1
a179 1
.if ${FLAVOR:L:Mdebug}
d184 1
a184 1
.if ${FLAVOR:L:Maa}
d191 1
a191 1
.if ${FLAVOR:L:Mjack}
@


1.212
log
@Correct capitalization of MPlayer and FFmpeg.

ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.211 2013/01/14 02:17:15 brad Exp $
d10 1
a10 1
V =			20110309
d18 1
a18 1
REVISION =		22
d33 2
a34 3
		fribidi gsm jpeg lcms m mng mp3lame ncurses ogg>=5 orc-0.4 \
		png postproc pthread SDL schroedinger-1.0>=2.0 sndio speex \
		stdc++ swscale theoradec theoraenc ungif util vpx x264>=5 \
d38 1
a38 1
MASTER_SITES =	http://theunixzoo.co.uk/distfiles/
d52 1
a57 1
		multimedia/schroedinger>=1.0.10 \
d150 1
a150 1
CONFIGURE_ENV += TMPDIR="${WRKBUILD}"
d200 3
a207 10
# subst PREFIX in a patch, careful with update-patches!
pre-configure:
	${SUBST_CMD} ${WRKSRC}/DOCS/xml/configure

post-build:
	@@cd ${WRKSRC}/DOCS/xml && ${MAKE_PROGRAM}

DOCDIR =	${PREFIX}/share/doc/mplayer
EXAMPLEDIR = 	${PREFIX}/share/examples/mplayer

d211 3
@


1.211
log
@Update after FFmpeg 20121026 update.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.210 2012/09/27 17:26:05 ajacoutot Exp $
d69 2
a70 2
# mplayer uses non-public interfaces to ffmpeg, so we still need
# the ffmpeg source in the mplayer tree at build time.
d81 1
a81 1
MAKE_ENV =	V=1 	# turn on verbose ffmpeg build
d105 1
a105 1
		--disable-ffmpeg_a	# link ffmpeg .so (graphics/ffmpeg)
d216 1
a216 1
# link ffmpeg sources to where build expects
@


1.210
log
@docbook-xsl already comes with libxslt.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.209 2012/08/27 06:19:48 ajacoutot Exp $
d11 1
a11 1
FFMPEG_V =		20120610
d18 1
a18 1
REVISION =		21
@


1.209
log
@Remove -pthread patching.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.208 2012/08/25 15:05:51 ratchov Exp $
a64 3
		textproc/libxml \
		textproc/libxslt \
		textproc/docbook \
@


1.208
log
@Use a lookup table for supported audio parameters, remove
hacks from first sndio days that aren't necessary any longer.
Suggested by Reimar Doeffinger. Tweaks from Tim van der Molen
and naddy@@. Tested by many, ok dcoppa
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.207 2012/06/20 12:20:37 jasper Exp $
d16 1
a16 1
REVISION =		20
@


1.207
log
@- remove lcms from LIB_DEPENDS, it's already pulled in by other ports

from brad
ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.206 2012/06/18 16:45:11 jasper Exp $
d16 1
a16 1
REVISION =		19
@


1.206
log
@sync after ffmpeg update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2012/06/09 23:06:24 sthen Exp $
d16 1
a16 1
REVISION =		18
a53 1
		graphics/lcms \
@


1.205
log
@sync with FFmpeg update, from Brad with a tweak suggested by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2012/05/03 06:51:24 ajacoutot Exp $
d9 1
a9 1
FFMPEG_V =		20120609
d16 1
a16 1
REVISION =		17
@


1.204
log
@Adjust after libdvdcss/libdvdnav/libdvdread updates.

from Brad, ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2012/04/28 08:42:07 ajacoutot Exp $
d9 1
a9 1
FFMPEG_V =		20120422
d16 1
a16 1
REVISION =		16
d46 1
a46 1
		graphics/ffmpeg>=20120422 \
@


1.203
log
@Cope with recent ffmpeg update.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2012/03/30 13:23:03 phessler Exp $
d16 1
a16 1
REVISION =		15
d30 4
a33 4
		crypto dv enca fontconfig freetype fribidi gsm jpeg lcms \
		m mng mp3lame ncurses ogg>=5 orc-0.4 png postproc \
		pthread SDL schroedinger-1.0>=2.0 sndio speex stdc++ \
		swscale theoradec theoraenc ungif util vpx x264>=5 \
d60 3
a62 1
		multimedia/libass
d94 1
d103 4
a106 11
		--disable-libmpeg2-internal
# seems stable dvdnav does not work with a new mplayer.
# if they make a release in the future, maybe we can pull that in,
# but for now we have to use the internal one.
#		--disable-dvdread-internal \
#		--disable-libdvdcss-internal \
# If re-adding external libdvd*, don't forget the LIB_DEPENDS:
#		multimedia/libdvdnav>=4.1.3 \
#		devel/libdvdread \
# gui is not supported anymore and we have better ones in ports
CONFIGURE_ARGS += --disable-gui \
d127 1
@


1.202
log
@allow mplayer to play (non-encrypted) bluray discs.

reviewed by Brad, edd@@ and sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2012/02/28 19:48:41 sthen Exp $
d9 1
a9 1
FFMPEG_V =		20111126
d16 1
a16 1
REVISION =		14
d34 1
a34 1
		z
d46 1
a46 1
		graphics/ffmpeg>=20111126 \
a141 2
		--disable-xvid \
		--disable-xvid-lavc \
@


1.201
log
@fix typo in comment (not COMMENT), no pkg change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2012/02/28 17:56:53 stsp Exp $
d16 1
a16 1
REVISION =		13
d29 1
a29 1
		avformat avutil bz2 c cdda_interface cdda_paranoia \
d51 1
@


1.200
log
@Revision bump for net/livemedia update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2012/02/28 02:22:13 jsg Exp $
d68 1
a68 1
# mplayer uses non-public interfaces to ffmepg, so we still need
@


1.199
log
@mplayer builds and works on hppa so switch the arch list to
GCC4_ARCHS. ok sthen@@ edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2012/01/26 20:21:31 ratchov Exp $
d16 1
a16 1
REVISION =		12
@


1.198
log
@Use sndio volume knob if available (consumes less CPU), rather than
chaining two soft volume knobs. Stop audio during pause to consume
less CPU. Honour AOPLAY_FINAL_CHUNK flag which fixes playback of very
short files.

ok & tweaks stsp@@, ok sthen@@, dcoppa@@, go ahead edd@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2011/12/30 17:40:40 edd Exp $
d4 1
a4 1
ONLY_FOR_ARCHS =	alpha amd64 arm i386 mips64 mips64el powerpc sparc64
@


1.197
log
@Make mplayer build with Brad's ffmpeg update.
From brad, OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2011/09/19 14:24:44 jasper Exp $
d16 1
a16 1
REVISION =		11
@


1.196
log
@- fix a bad line continuation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2011/09/19 13:48:15 jasper Exp $
d9 1
a9 1
FFMPEG_V =		20110408
d16 1
a16 1
REVISION =		10
d46 1
a46 1
		graphics/ffmpeg>=20110408p5 \
d99 1
a99 2
		--disable-libmpeg2-internal \
		--disable-pulse
d142 2
a143 1
		--disable-xvid-lavc
@


1.195
log
@explicitly disable pulseaudio in these ports so they won't pick it up
when it becomes available.

thanks to sthen@@ for grepping the sources
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2011/08/17 15:12:15 edd Exp $
d99 2
a100 2
		--disable-libmpeg2-internal
		--disable-pulse \
@


1.194
log
@Now that the OGG demuxer bug is gone, we remove reference to it in the READMEs.

From brad, OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2011/07/10 13:31:55 jasper Exp $
d100 1
@


1.193
log
@- remove unneeded NULL casts

from brad
maintainer timed-out
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2011/07/02 23:10:25 edd Exp $
d16 1
a16 1
REVISION =		9
d46 1
a46 1
		graphics/ffmpeg>=20110408 \
@


1.192
log
@Disable some more libs where the default FFmpeg implementations will suffice.
Cleanups in README.

From brad. OK sthen@@ and dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2011/06/30 15:31:15 edd Exp $
d16 1
a16 1
REVISION =		8
@


1.191
log
@bogus '\' noticed by dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2011/06/27 23:29:20 edd Exp $
d16 1
a16 1
REVISION =		7
d34 1
a34 1
		xvidcore z
a49 1
		multimedia/xvidcore \
d98 2
a99 1
		--disable-libcdio
d128 1
d132 2
d140 3
a142 1
		--disable-theora
@


1.190
log
@Remove FAAC linkage due to license conflicts.
Remove a patch for FAAD which is already disabled.

From brad with a note in README from myself.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.189 2011/06/25 14:15:42 edd Exp $
d99 1
a99 1
		--disable-libcdio \
@


1.189
log
@make mplayer build with thew new libass.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2011/06/02 13:41:42 ajacoutot Exp $
d16 1
a16 1
REVISION =		6
d30 1
a30 1
		crypto dv enca faac fontconfig freetype fribidi gsm jpeg lcms \
a57 1
		audio/faac \
d134 2
@


1.188
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2011/05/11 21:24:59 ajacoutot Exp $
d16 1
a16 1
REVISION =		5
d28 3
a30 3
WANTLIB =	GL X11 Xext Xinerama Xss Xv Xxf86dga Xxf86vm avcodec avformat \
		avutil bz2 c cdda_interface cdda_paranoia \
		crypto dv faac fontconfig freetype fribidi gsm jpeg lcms \
d60 2
a61 1
		devel/sdl>=1.2.5
@


1.187
log
@Typo, my bad. Spotted by Markus Lude.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2011/05/11 08:03:22 ajacoutot Exp $
d16 1
a16 1
REVISION =		4
@


1.186
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2011/05/03 09:37:12 edd Exp $
d16 1
a16 1
REVISION =		3
@


1.185
log
@Use ffmpeg for decoding theora (from brad) and remove unnecessary dependencies
(as noticed by fgsch).

OK fgsch@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2011/04/18 23:39:20 sthen Exp $
d16 1
a16 1
REVISION =		2
@


1.184
log
@sync WANTLIB (re: ffmpeg update), from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2011/04/12 23:23:54 sthen Exp $
d16 1
a16 1
REVISION =		1
d33 1
a33 1
		swscale theora theoradec theoraenc ungif util vpx x264>=5 \
a47 1
		multimedia/libtheora \
a48 1
		audio/libmpcdec \
a52 2
		multimedia/libdvdnav>=4.1.3 \
		devel/libdvdread \
d105 3
d134 2
a135 1
		--disable-faad
@


1.183
log
@bump snapshot dates for last FFmpeg commit, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2011/03/29 20:04:41 edd Exp $
d16 1
a16 1
REVISION =		0
d33 2
a34 1
		swscale theora ungif util x264>=5 xvidcore z
@


1.182
log
@Update mplayer to a newer snapshot, this time with dynamic linking of ffmpeg!
With help from and OK landry@@, jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2011/02/12 10:49:36 jasper Exp $
d9 1
a9 1
FFMPEG_V =              20110306
d16 1
d45 1
a45 1
		graphics/ffmpeg>=20110306 \
@


1.181
log
@Security fixes for CVE-2010-4704, CVE-2010-4705 and CVE-2011-0480.

ok naddy@@
looks fine to brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2010/11/23 10:05:48 edd Exp $
d8 2
a9 2
V =			20101024
V_DASHED =		2010-10-24
d13 1
d15 2
a16 3
DISTNAME =		mplayer-export-snapshot-${V}
PKGNAME =		${N}-${V}
REVISION =		2
a17 3
EXTRACT_SUFX =		.tar.bz2

WRKDIST = 		${WRKDIR}/mplayer-export-${V_DASHED}
d27 6
a32 5
WANTLIB =	bz2 c cdda_interface cdda_paranoia crypto \
		dv dvdnavmini dvdread faac faad fribidi jpeg lcms \
		m mng mp3lame mpcdec ncurses ogg>=5 orc-0.4 png \
		pthread schroedinger-1.0>=2.0 sndio speex stdc++ \
		theora ungif util vpx x264>=5 xvidcore z
d44 1
a59 1
		audio/faad \
d62 1
a62 1
		multimedia/libvpx
d71 3
d102 5
a106 3
		--disable-dvdread-internal \
		--disable-libdvdcss-internal \
		--disable-faad-internal
d108 2
a109 1
CONFIGURE_ARGS += --disable-gui
d114 3
d132 2
a133 1
		--disable-librtmp
d173 1
a173 1
FLAVORS =	sdl debug no_x11 aa jack
a175 20
.if ${FLAVOR:L:Mno_x11}
CONFIGURE_ARGS += --disable-gl \
		--disable-xv \
		--disable-x11 \
		--disable-fontconfig \
		--disable-freetype
.else
WANTLIB +=	GL X11 Xext Xinerama Xss Xv Xxf86dga Xxf86vm fontconfig \
		freetype 
RUN_DEPENDS +=	devel/desktop-file-utils
.endif

.if ${FLAVOR:L:Msdl}
CONFIGURE_ARGS += --with-sdl-config=${LOCALBASE}/bin/sdl-config
LIB_DEPENDS +=	devel/sdl>=1.2.5
WANTLIB +=	SDL
.else
CONFIGURE_ARGS += --disable-sdl
.endif

a181 4
.if ${FLAVOR:L:Mno_x11}
LIB_DEPENDS +=	aalib-*-no_x11:graphics/aalib,no_x11
WANTLIB +=	aa>=1.3
.else
a183 1
.endif
a205 6

# Put a version.h in place so svn is not a BUILD_DEPEND
# (see version.sh for how this was supposed to work).
post-configure:
	cp ${FILESDIR}/version.h ${WRKDIST}/version.h

d211 4
@


1.180
log
@sort ONLY_FOR_ARCHES, noticed by brad.

OK phessler@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2010/11/22 10:16:09 espie Exp $
d16 1
a16 1
REVISION =		1
@


1.179
log
@remaining WANTLIB go .>=   to >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2010/11/22 09:02:49 espie Exp $
d4 1
a4 1
ONLY_FOR_ARCHS =	amd64 arm i386 mips64 mips64el powerpc sparc64 alpha
@


1.178
log
@fix build, do not pick rtdump if it's not intended
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2010/11/22 08:37:03 espie Exp $
d32 3
a34 3
		m mng mp3lame mpcdec ncurses ogg.>=5 orc-0.4 png \
		pthread schroedinger-1.0.>=2.0 sndio speex stdc++ \
		theora ungif util vpx x264.>=5 xvidcore z
@


1.177
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2010/11/19 09:00:00 jasper Exp $
d16 1
a16 1
REVISION =		0
d124 2
a125 1
		--disable-mpg123
@


1.176
log
@- adjust after recent schroedinger update

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2010/11/08 21:25:44 edd Exp $
d43 30
a72 30
LIB_DEPENDS =	::graphics/png \
		::graphics/jpeg \
		::graphics/libungif \
		:cdparanoia->=3.a9.8:audio/cdparanoia \
		::multimedia/libtheora \
		::audio/speex \
		::audio/libmpcdec \
		::audio/libogg \
		::multimedia/xvidcore \
		::audio/lame \
		::multimedia/libdv \
		:libdvdnav->=4.1.3:multimedia/libdvdnav \
		::devel/libdvdread \
		::devel/fribidi \
		::graphics/lcms \
		::graphics/libmng \
		::archivers/bzip2 \
		:schroedinger->=1.0.10:multimedia/schroedinger \
		::audio/faad \
		::audio/faac \
		:x264->=20101023:multimedia/x264 \
		::multimedia/libvpx

BUILD_DEPENDS =	::net/livemedia \
		:rtunes->=0.8:audio/rtunes \
		:libxml-*:textproc/libxml \
		:libxslt-*:textproc/libxslt \
		::textproc/docbook \
		::textproc/docbook-xsl \
		::audio/ladspa
d75 1
a75 1
BUILD_DEPENDS += ::devel/yasm
d133 1
a133 1
LIB_DEPENDS +=	::audio/libvorbis
d176 1
a176 1
RUN_DEPENDS +=	:desktop-file-utils-*:devel/desktop-file-utils
d181 1
a181 1
LIB_DEPENDS +=	:sdl->=1.2.5:devel/sdl
d194 2
a195 2
LIB_DEPENDS +=	:aalib-*-no_x11:graphics/aalib,no_x11
WANTLIB +=	aa.>=1.3
d197 2
a198 2
LIB_DEPENDS +=	:aalib-*:graphics/aalib
WANTLIB +=	aa.>=1.3
d205 1
a205 1
LIB_DEPENDS +=	::audio/jack
@


1.175
log
@Update to mplayer-20101024. Noteworthy improvements include vpx
(webm) support and alpha support. This work is a joint effort from
myself, naddy@@ and jakemsr@@. Cheers.

OK jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2010/10/24 21:15:33 ajacoutot Exp $
d16 1
d33 2
a34 2
		pthread schroedinger-1.0 sndio speex stdc++ theora \
		ungif util vpx x264.>=5 xvidcore z
d60 1
a60 1
		::multimedia/schroedinger \
@


1.174
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2010/10/19 08:13:58 espie Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		amd64 i386 powerpc sparc64 arm mips64 mips64el
d6 1
a6 1
COMMENT=		movie player supporting many formats
d8 2
a9 2
V=			20100308
V_DASHED=		2010-03-08
d11 1
a11 1
SUBST_VARS+= 		PREFIX CONFDIR
d13 5
a17 6
N=			mplayer
DISTNAME=		mplayer-export-snapshot-${V}
PKGNAME=		${N}-${V}
REVISION=		5
CATEGORIES=		x11 multimedia
EXTRACT_SUFX=		.tar.bz2
d21 1
a21 1
HOMEPAGE=		http://www.mplayerhq.hu/
d24 10
a33 9
PERMIT_PACKAGE_CDROM=	patents
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		a52 bz2 c cdda_interface cdda_paranoia crypto dca \
			dv dvdnavmini dvdread faac faad fribidi jpeg lcms \
			m mng mp3lame mpcdec ncurses ogg.>=5 orc-0.4 png \
			pthread schroedinger-1.0 sndio speex stdc++ theora \
			ungif util x264.>=3 xvidcore z
d36 1
a36 1
MASTER_SITES=	http://theunixzoo.co.uk/distfiles/
d38 1
a38 1
MAINTAINER=	Edd Barrett <edd@@openbsd.org>
d40 1
a40 1
DISTFILES=	${DISTNAME}${EXTRACT_SUFX}
d42 1
a42 3
MODULES+=	converters/libiconv

LIB_DEPENDS=	::graphics/png \
a57 1
		::audio/libdca \
d62 2
a63 2
		::audio/liba52 \
		::multimedia/x264
d65 1
a65 1
BUILD_DEPENDS=	::net/livemedia \
d74 1
a74 1
BUILD_DEPENDS+=	::devel/yasm
d77 1
a77 1
CONFDIR=	${SYSCONFDIR}/mplayer
d79 1
a79 1
USE_GMAKE=	Yes
d81 12
a92 2
CONFIGURE_STYLE=simple
CONFIGURE_ARGS+=--disable-alsa \
d96 16
a112 1
		--disable-liblzo \
a113 3
		--disable-vidix \
		--disable-smb \
		--disable-select \
d115 1
d117 2
a118 4
		--disable-libvorbis \
		--disable-tremor \
		--disable-mad \
		--disable-libcdio \
a119 4
		--disable-dvdread-internal \
		--disable-libdvdcss-internal \
		--disable-faad-internal \
		--disable-gui \
d123 13
a135 6
		--enable-menu \
		--confdir=${CONFDIR} \
		--mandir=${LOCALBASE}/man \
		--extra-cflags="-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
		--extra-ldflags="-L${LOCALBASE}/lib" \
		--extra-libs-mplayer="-lrtunes -lcrypto"
d137 1
a137 1
CONFIGURE_ENV+=	TMPDIR="${WRKBUILD}"
d139 1
a139 1
# bintools 2.15 does not do sse3 for i386/amd64
d141 2
a142 2
CONFIGURE_ARGS+=--enable-runtime-cpudetection
CONFIGURE_ARGS+=--disable-ssse3
d145 1
a145 1
# again bintools 2.15 limits what we can do here too
d147 2
a148 2
CONFIGURE_ARGS+=--disable-altivec
CONFIGURE_ARGS+=--enable-runtime-cpudetection
d151 8
a158 3
FLAVORS=	sdl debug no_x11 aa jack
FLAVOR?=

d160 1
a160 3
.if ${MACHINE_ARCH:Marm}
CONFIGURE_ARGS+=--disable-mp3lib
CONFIGURE_ARGS+=--target=generic-openbsd
d163 3
d167 1
a167 1
CONFIGURE_ARGS+=--disable-gl \
d173 1
a173 1
WANTLIB+=	GL X11 Xext Xinerama Xss Xv Xxf86dga Xxf86vm fontconfig \
d175 1
a175 1
RUN_DEPENDS+=	:desktop-file-utils-*:devel/desktop-file-utils
d179 3
a181 3
CONFIGURE_ARGS+=--with-sdl-config=${LOCALBASE}/bin/sdl-config
LIB_DEPENDS+=	:sdl->=1.2.5:devel/sdl
WANTLIB+=	SDL
d183 1
a183 1
CONFIGURE_ARGS+=--disable-sdl
d187 2
a188 1
CONFIGURE_ARGS+=--enable-debug=3
d193 2
a194 2
LIB_DEPENDS+=	:aalib-*-no_x11:graphics/aalib,no_x11
WANTLIB+=	aa.>=1.3
d196 2
a197 2
LIB_DEPENDS+=	:aalib-*:graphics/aalib
WANTLIB+=	aa.>=1.3
d200 1
a200 1
CONFIGURE_ARGS+=--disable-aa
d204 2
a205 2
LIB_DEPENDS+=	::audio/jack
WANTLIB+=	jack
d207 1
a207 1
CONFIGURE_ARGS+=--disable-jack
d210 1
a210 1
NO_REGRESS=	Yes
d212 1
d221 3
a224 2
	# Put a version.h in place so svn is not a BUILD_DEPEND
	# (see version.sh for how this was supposed to work).
d233 1
a240 1
	${INSTALL_DATA} ${FILESDIR}/README.OpenBSD ${DOCDIR}
@


1.173
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2010/08/25 23:27:21 sthen Exp $
a145 1
USE_X11=	Yes
@


1.172
log
@- chase the library change in multimedia/schroedinger; oil->orc
- add various other missing WANTLIB (and LIB_DEPENDS in some cases)
- while there move PKGNAME=..pX to REVISION, and move some ports
to new-style LIB_DEPENDS

original diff from Brad, extensive checking by me (clean build of everything
related to liboil).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2010/08/24 14:55:30 naddy Exp $
d83 1
@


1.171
log
@restore AC3/DTS pass-through over S/PDIF; ok edd@@ jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2010/08/06 20:05:18 naddy Exp $
d16 1
a16 1
REVISION=		4
d31 1
a31 1
			m mng mp3lame mpcdec ncurses ogg.>=5 oil-0.3 png \
@


1.170
log
@Fix Ogg demuxing by using internal Tremor implementation.

Remove pointless "mad" flavor.  On arm, we now default to the
internal ffmp3 integer decoder.

Clean up README and DESCR.

Various contributions from edd@@, jakemsr@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2010/07/14 18:15:37 edd Exp $
d16 1
a16 1
REVISION=		3
@


1.169
log
@remove redundant GCC4 stuff for PPC (from brad) and update to new libs style.
OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2010/07/03 00:28:40 espie Exp $
d16 1
a16 1
REVISION=		2
d33 1
a33 1
			ungif util vorbisidec x264.>=3 xvidcore z
a59 1
		::audio/tremor \
d97 2
a103 1
		--disable-tremor-internal \
d129 1
a129 1
FLAVORS=	sdl debug mad no_x11 aa jack
a135 1
FLAVOR+=	mad
a160 7
.endif

.if ${FLAVOR:L:Mmad}
LIB_DEPENDS+=	::audio/libmad
WANTLIB+=	mad.>=2
.else
CONFIGURE_ARGS+=--disable-mad
@


1.168
log
@better when stuff match, isn't it ?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2010/06/30 07:59:53 jakemsr Exp $
d6 1
a6 1
COMMENT=		movie player supporting MPEG, DivX, AVI, ASF, MOV & more
d15 2
a16 1
PKGNAME=		${N}-${V}p1
d29 5
a33 1
WANTLIB=		c crypto m ncurses oil-0.3 pthread stdc++ util sndio z 
d35 1
a35 1
# snapshot - mplayer don't do releases
d38 1
a38 1
MAINTAINER=     Edd Barrett <edd@@openbsd.org>
a41 3
MODULES=        gcc4
MODGCC4_ARCHES= powerpc

d44 24
a67 26
.include <bsd.own.mk>

LIB_DEPENDS=	png::graphics/png \
		jpeg::graphics/jpeg \
		ungif::graphics/libungif \
		cdda_paranoia,cdda_interface:cdparanoia->=3.a9.8:audio/cdparanoia \
		theora::multimedia/libtheora \
		speex::audio/speex \
		mpcdec::audio/libmpcdec \
		ogg.>=5::audio/libogg \
		xvidcore::multimedia/xvidcore \
		mp3lame:lame-*:audio/lame \
		dv::multimedia/libdv \
		dvdnavmini:libdvdnav->=4.1.3:multimedia/libdvdnav \
		dvdread::devel/libdvdread \
		fribidi::devel/fribidi \
		lcms::graphics/lcms \
		mng::graphics/libmng \
		vorbisidec::audio/tremor \
		dca::audio/libdca \
		bz2::archivers/bzip2 \
		schroedinger-1.0::multimedia/schroedinger \
		faad::audio/faad \
		faac::audio/faac \
		a52::audio/liba52 \
		x264.>=3::multimedia/x264
d154 2
a155 1
LIB_DEPENDS+=	SDL:sdl->=1.2.5:devel/sdl
d165 2
a166 1
LIB_DEPENDS+=	mad.>=2::audio/libmad
d173 2
a174 1
LIB_DEPENDS+=	aa.>=1.3:aalib-*-no_x11:graphics/aalib,no_x11
d176 2
a177 1
LIB_DEPENDS+=	aa.>=1.3:aalib-*:graphics/aalib
d184 2
a185 1
LIB_DEPENDS+=	jack::audio/jack
@


1.167
log
@support 24-bit audio formats
ok ratchov
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2010/06/14 15:06:49 edd Exp $
d64 2
a65 2
		faac::audio/faad \
		faad::audio/faac \
@


1.166
log
@yasm is only used on x86/x64. Also fix a typo. OK dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2010/05/26 21:29:56 jakemsr Exp $
d15 1
a15 1
PKGNAME=		${N}-${V}p0
@


1.165
log
@update to mplayer-export-snapshot-20100308

locally:
* fix audio when using bsdbt848 video driver (problems noted by simon@@)
* allow 24-bit audio output formats in the sndio backend (from ratchov@@)

mostly from edd@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2010/05/18 05:14:17 dcoppa Exp $
d15 1
a15 1
PKGNAME=		${N}-${V}
a74 1
		::devel/yasm \
d77 4
d113 1
a113 1
		--extra-libs-mplayer="-lrtunes -lcrypto" \
@


1.164
log
@mention x11/smplayer in README.OpenBSD

OK edd@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2010/02/23 19:59:13 phessler Exp $
d6 4
a9 1
SUBST_VARS += 		PREFIX
d11 1
a11 1
COMMENT=		movie player supporting MPEG, DivX, AVI, ASF, MOV & more
a12 1
V=			20090708
d15 1
a15 1
PKGNAME=		${N}-${V}p5
d19 1
a19 1
WRKDIST = 		${WRKDIR}/mplayer-export-2009-07-08
d30 2
a31 3
# snapshot
#MASTER_SITES = 	http://www.mplayerhq.hu/MPlayer/releases/
MASTER_SITES =		http://students.dec.bmth.ac.uk/ebarrett/distfiles/
a52 1
		x264.>=3::multimedia/x264 \
d65 3
a67 1
		faad::audio/faac
a78 1
SUBST_VARS=	CONFDIR
d81 1
a81 1
CONFIGURE_STYLE= simple
d101 4
d110 1
a110 3
		--disable-gui \
		--disable-win32dll \
		--disable-ggi
d184 4
d192 4
a195 3
post-patch:
	@@cp ${FILESDIR}/ao_rtunes.c ${FILESDIR}/ao_sndio.c ${WRKSRC}/libao2
	@@cp ${FILESDIR}/ai_sndio.c ${WRKSRC}/stream
@


1.163
log
@enable building on loongson

OK jasper@@

ports is unlocked for a while only for those who have been informed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.162 2009/12/26 19:23:12 naddy Exp $
d13 1
a13 1
PKGNAME=		${N}-${V}p4
@


1.163.2.1
log
@MFC:

"fix audio when using bsdbt848 video driver"

"looks ok" to edd@@, ok jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2010/02/23 19:59:13 phessler Exp $
d13 1
a13 1
PKGNAME=		${N}-${V}p5
@


1.162
log
@* add support for 32-bit audio; from jakemsr@@
* enable AC3/DTS pass-through over S/PDIF
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2009/12/21 20:46:02 ajacoutot Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		amd64 i386 powerpc sparc64 arm mips64
@


1.161
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2009/11/18 21:20:15 jakemsr Exp $
d13 1
a13 1
PKGNAME=		${N}-${V}p3
@


1.160
log
@* simple patch to make it work on mips64
* audio/tremor is a LIB_DEPENDS, no need to also be a BUILD_DEPENDS

ok edd@@, jasper@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2009/10/13 20:52:55 edd Exp $
d13 1
a13 1
PKGNAME=		${N}-${V}p2
@


1.159
log
@bump PKGNAME for DESCR changes. Thanks jasper@@ and phessler@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2009/10/13 01:36:49 jakemsr Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		amd64 i386 powerpc sparc64 arm
a72 1
		::audio/tremor \
@


1.158
log
@user ldt not needed without win32 codec support

ok many in budapest
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2009/10/11 15:25:04 edd Exp $
d13 1
a13 1
PKGNAME=		${N}-${V}p1
@


1.157
log
@Maintainer timeout. I guess I can take this.

OK pirofti@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2009/10/11 13:36:23 edd Exp $
d13 1
a13 1
PKGNAME=		${N}-${V}p0
@


1.156
log
@New version of mplayer based upon a snapshot (20090708).
  * fixes some flv playback
  * removed ggi output - broken i386/sparc64.
  * removed gui (deprecated) - use gnome-mplayer instead.
  * removed win32 codecs - opensource codecs are good quality.

OK, naddy@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2009/05/05 11:40:08 sthen Exp $
d13 1
a13 1
PKGNAME=		${N}-${V}
d32 1
a32 1
MAINTAINER=     Bjorn Sandell <biorn@@chalmers.se>
@


1.155
log
@make gmplayer work after xcb import.  ok matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2009/08/11 08:42:08 ajacoutot Exp $
d6 2
d10 1
a10 1
V=			1.0rc2
d12 2
a13 3
DISTNAME=		MPlayer-${V}
DIST_SUBDIR=		${N}
PKGNAME=		${N}-${V}p28
d17 2
d21 1
a21 1
# GPL
d26 5
d32 1
a32 1
WANTLIB=		c m ncurses pthread stdc++ util sndio z
d34 1
a34 9
MASTER_SITES=		http://www1.mplayerhq.hu/MPlayer/releases/ \
			http://www2.mplayerhq.hu/MPlayer/releases/ \
			http://www.mplayerhq.hu/MPlayer/releases/ \
			http://ftp.lug.udel.edu/MPlayer/releases/

# The skins tarball changes on a daily basis so it is mirrored
# locally, do NOT change this.
#MASTER_SITES0=		http://www2.mplayerhq.hu/MPlayer/Skin/
MASTER_SITES0=		${MASTER_SITE_BACKUP}
d36 2
a37 1
MAINTAINER=     Bjorn Sandell <biorn@@chalmers.se>
d39 1
a39 3
SKIN=		default
SKINVER=	1.7
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} ${SKIN}-${SKINVER}${EXTRACT_SUFX}:0
a52 2
		faad.>=2::audio/faad \
		dca.>=0::audio/libdca \
d54 12
a65 1
		dv::multimedia/libdv
d68 8
a75 1
		:rtunes->=0.8:audio/rtunes
d89 1
a89 3
		--disable-vidix-internal \
		--disable-vidix-external \
		--enable-libdv \
a90 3
		--disable-tremor-external \
		--enable-tremor-internal \
		--disable-faac \
d92 9
a100 2
		--enable-theora \
		--enable-libdca \
a101 8
		--enable-iconv \
		--enable-cdparanoia \
		--enable-x264 \
		--enable-tv-v4l2 \
		--with-extraincdir=${LOCALBASE}/include/libpng:${LOCALBASE}/include \
		--with-extralibdir=${LOCALBASE}/lib \
		--extra-libs-mplayer="$$(pkg-config --libs x264)" \
		--extra-libs-mencoder="$$(pkg-config --libs x264)" \
d104 5
a108 7
		--disable-langinfo \
		--disable-fribidi \
		--disable-openal \
		--disable-faad-internal \
		--enable-faad-external \
		--disable-libvorbis \
		--disable-libcdio
d112 2
a113 1
.if ${MACHINE_ARCH:Mi386}
d118 1
d121 1
d124 1
a124 1
FLAVORS=	sdl ggi debug mad no_x11 aa jack
d127 1
d130 1
d135 1
a135 6
MODULES=	converters/libiconv
.  if ${FLAVOR:L:Msdl} || ${FLAVOR:L:Mggi}
ERRORS+="Fatal: nonsense combination of flavors"
.  else
CONFIGURE_ARGS+=--disable-gui \
		--disable-gl \
a139 1
.  endif
a140 2
CONFIGURE_ARGS+=--enable-gui \
		--enable-gl
d142 3
a144 7
LIB_DEPENDS+=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2
WANTLIB+=	GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext \
		Xfixes Xi Xinerama Xrandr Xrender Xv Xxf86dga Xxf86vm \
		atk-1.0 cairo expat fontconfig freetype gio-2.0 \
		glib-2.0 glitz gmodule-2.0 gobject-2.0 pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pixman-1 pthread-stubs xcb
MODULES=	devel/gettext
d148 1
a148 2
CONFIGURE_ARGS+=--enable-sdl \
		--with-sdl-config=${LOCALBASE}/bin/sdl-config
a153 7
.if ${FLAVOR:L:Mggi}
CONFIGURE_ARGS+=--enable-ggi
LIB_DEPENDS+=	ggi::graphics/ggi
.else
CONFIGURE_ARGS+=--disable-ggi
.endif

a158 1
CONFIGURE_ARGS+=--enable-mad
a163 10
.if ${MACHINE_ARCH:Mi386}
CONFIGURE_ARGS+=--win32codecsdir=${LOCALBASE}/lib/win32 \
		--enable-qtx \
		--realcodecsdir=${LOCALBASE}/lib/win32
.else
CONFIGURE_ARGS+=--disable-win32dll \
		--disable-qtx \
		--disable-real
.endif

a164 1
CONFIGURE_ARGS+=--enable-aa
a174 1
CONFIGURE_ARGS+=--enable-jack
d182 4
d187 8
a194 1
	@@cp ${FILESDIR}/ao_rtunes.c ${FILESDIR}/ao_libsndio.c ${WRKSRC}/libao2
d197 2
a198 4
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mplayer
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mplayer
	${INSTALL_DATA_DIR} ${PREFIX}/share/mplayer/skins/${SKIN}
	${INSTALL_DATA} ${WRKDIR}/${SKIN}/* ${PREFIX}/share/mplayer/skins/${SKIN}
d200 4
a203 4
		${PREFIX}/share/examples/mplayer
	${INSTALL_DATA} ${WRKDIST}/etc/example.conf \
		${PREFIX}/share/examples/mplayer/mplayer.conf
	${INSTALL_DATA} ${WRKDIST}/DOCS/HTML/en/*.html ${PREFIX}/share/doc/mplayer
@


1.154
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2009/08/06 10:46:42 mglocker Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p27
@


1.153
log
@Update to rtunes-0.8.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2009/07/14 19:43:07 naddy Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p26
d23 1
d143 1
a143 1
		pangocairo-1.0 pangoft2-1.0 pixman-1
@


1.152
log
@Use libdca for DTS support (-ac dts).  This allows playing DTS audio tracks
on DVDs.  ok biorn@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2009/07/13 19:35:58 naddy Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p25
d59 1
a59 1
		:rtunes->=0.7:audio/rtunes
@


1.151
log
@don't pick up libdca if installed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2009/05/05 11:40:08 sthen Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p24
d54 1
d82 1
a82 1
		--disable-libdca \
@


1.150
log
@make FLAVOR=DEBUG work better (the upstream configure script adds -O2
with DEBUG so that SSE can build; only -O1 is actually needed though,
and is cleaner in GDB. -O0 builds fail with SSE; disabling SSE is
not helpful for debugging real problems).

from Valery Masiutsin with feedback from myself and Bjrn Sandell
(maintainer, who is ok with the diff).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2009/04/15 09:54:45 kili Exp $
d81 1
@


1.149
log
@
Explicitely mention x264's major version and bump.

From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2009/04/14 19:52:08 kili Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p23
@


1.148
log
@
Some fixes after the x264 update.

From Brad.

"theoretically ok" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2009/03/17 08:24:33 sthen Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p22
d52 1
a52 1
		x264::multimedia/x264 \
@


1.147
log
@fix pkgspec for FLAVOR=sdl, reported by and based on a patch from David Coppa.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2009/03/08 22:45:16 jasper Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p21
@


1.146
log
@- enable .dv support in mplayer, seems to be working fine here
low impact on the port other than a new dependency

agreed by landry@@ and biorn@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2009/02/08 20:25:09 naddy Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p20
d147 1
a147 1
LIB_DEPENDS+=	SDL:sdl-1.2.4p1,>=1.2.5:devel/sdl
@


1.145
log
@Switch default CD/DVD device to /dev/rcd0c because rcd0a doesn't work for
audio CDs.  Document the device in the man page.  ok biorn@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2009/01/29 17:28:13 sthen Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p19
d54 2
a55 1
		mp3lame:lame-*:audio/lame
d74 1
a74 1
		--disable-libdv \
@


1.144
log
@- SECURITY; fix http://www.trapkit.de/advisories/TKADV2009-004.txt
for the internal ffmpeg.  From Brad.

- sync WANTLIB (gio)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2009/01/16 02:39:53 jakemsr Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p18
@


1.143
log
@- remove artsd and esd support and related patches
- update DESCR to reflect reality
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2008/12/28 19:09:13 ratchov Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p17
d137 3
a139 3
		atk-1.0 cairo expat fontconfig freetype glib-2.0 glitz \
		gmodule-2.0 gobject-2.0 pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pixman-1
@


1.142
log
@set ``appbufsz'' to the required buffer size, rather than setting
``bufsz'' which is deprecated and doesn't work in all cases. This
allows mplayer to work without underruns whatever the the buffer
size used by aucat is.

set the block size to 10ms, otherwise depending on the defaults,
the blocksize may be too large for mplayer, causing video to
stutter.

move "-ao libsndio" to "-ao sndio", suggested by naddy@@

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2008/12/15 21:30:07 naddy Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p16
d65 2
d110 1
a110 1
FLAVORS=	arts esd sdl ggi debug mad no_x11 aa jack
a115 16
.endif

.if ${FLAVOR:L:Marts}
CONFIGURE_ARGS+=--enable-arts
LIB_DEPENDS+=	artsc::x11/kde/arts3
WANTLIB+=	glib-2.0 gmodule-2.0 gthread-2.0
.else
CONFIGURE_ARGS+=--disable-arts
.endif

.if ${FLAVOR:L:Mesd}
CONFIGURE_ARGS+=--enable-esd
LIB_DEPENDS+=	esd::audio/esound
WANTLIB+=	audiofile
.else
CONFIGURE_ARGS+=--disable-esd
@


1.141
log
@SECURITY:
Fix for stack buffer overflow vulnerability while parsing malformed
TwinVQ media files.  From upstream SVN.  ok biorn@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2008/11/01 12:03:41 jakemsr Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p15
@


1.140
log
@
* tweak previous: always keep frame alignment
* if the sample rate returned in sio_getpar is within 3% of the rate
  requested in sio_setpar, tell mplayer we're using the requested
  rate so it doesn't try to resample.  however, use the returned
  sample rate to calculate bitrate, so A/V sync continues to work.
* use a variable to represent bytes per frame
* remove unused variables

ok ratchov@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2008/10/31 07:12:45 jakemsr Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p14
@


1.139
log
@work around what appears to be a bug in mplayer.

ok ratchov@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2008/10/30 18:33:42 ratchov Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p13
@


1.138
log
@add libsndio backend to mplayer
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2008/10/11 11:07:32 ajacoutot Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p12
@


1.137
log
@- add the jack FLAVOR to DESCR
- bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2008/10/01 16:01:51 naddy Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p11
d23 1
a23 1
WANTLIB=		c m ncurses pthread stdc++ util z
d214 1
a214 1
	@@cp ${FILESDIR}/ao_rtunes.c ${WRKSRC}/libao2
@


1.136
log
@SECURITY fix for Real demuxer heap overflow (CVE-2008-3827).
ok biorn@@, robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2008/09/15 22:13:02 jakemsr Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p10
@


1.135
log
@
- simpler faad related patching
- in MESSAGE, end sentence with a period
- bump PKGNAME

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2008/09/03 12:20:52 brad Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p9
@


1.134
log
@Enable V4L2 input support.

.e.g. mplayer tv:// -tv driver=v4l2:device=/dev/video0

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2008/07/09 02:19:36 jakemsr Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p8
d53 1
a53 1
		faad::audio/faad \
@


1.133
log
@
* stop mplayer from picking up installed FFmpeg headers
* update WANTLIB
* add @@bin markers
* bump PKGNAME

feedback/ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2008/05/01 13:52:19 sthen Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p7
d82 1
d214 1
a214 1
	cp ${FILESDIR}/ao_rtunes.c ${WRKSRC}/libao2/
@


1.132
log
@fix the test for jack in configure, so that --disable-jack is
correctly honoured. unbreaks bulk build packages.

ok jakemsr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2008/04/16 01:43:12 jakemsr Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p6
d152 1
a152 1
		pangoft2-1.0
@


1.131
log
@
add jack support as a FLAVOR

"no objections" MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2008/03/30 20:39:41 fgsch Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p5
@


1.130
log
@fix tremor on archs where sizeof(int) != sizeof(int *) by adding the missing
prototypes. fix from mplayer svn via biorn@@ (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2008/03/25 17:29:57 fgsch Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p4
a90 1
		--disable-jack \
d107 1
a107 1
FLAVORS=	arts esd sdl ggi debug mad no_x11 aa
d201 7
@


1.129
log
@no need for lame's no_x11 flavor anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2008/03/19 22:35:35 jasper Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p3
@


1.128
log
@- explicitly disable libcdio, it can always later be enabled.

ok biorn@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2008/02/18 16:37:38 espie Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p2
d53 2
a54 1
		faad::audio/faad
a142 1
LIB_DEPENDS+=	mp3lame:lame-*:audio/lame,no_x11
d148 1
a148 2
LIB_DEPENDS+=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
		mp3lame:lame-*:audio/lame
@


1.127
log
@very sloppy update, restore realplayer support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2008/02/12 11:33:16 jakemsr Exp $
d93 2
a94 1
		--disable-libvorbis
@


1.126
log
@
add support for librtunes-0.7.  this allows one to stream audio output
from mplayer to AirPort Express devices.  supports both IPv4 and IPv6.

example:

$ mplayer -ao rtunes:device=192.168.0.10:af=inet music.mp3

requested/tested/ok mglocker@@ (librtunes author)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2008/02/11 00:22:03 jakemsr Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p1
@


1.125
log
@security patches for
- buffer overflow in stream_cddb.c
- buffer overflow in url.c
- buffer overflow in demux_mov.c
- stack overflow in demux_audio.c

from brad@@, ok maintainer

also remove reference to rtunes_ao.diff from distinfo.  this patch is
not used now because it does not apply.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2008/02/08 17:32:41 jakemsr Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}p0
d55 2
a56 1
BUILD_DEPENDS=	::net/livemedia
d205 3
@


1.124
log
@
maintenence update to mplayer-1.0rc2

ok biorn@@ (MAINTAINER), ajacoutot@@, brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2007/11/15 07:50:27 jakemsr Exp $
d12 1
a12 1
PKGNAME=		${N}-${V}
@


1.123
log
@- quit using select() for audio playback.  we end up counting bytes
in the playback buffer and waiting until there's enough space anyway.
- use -pthread instead of -lpthread for pthreads linkage
- don't even try to use the "real time sample counter" on *BSD, since
it's not that same as with Sun audio.
- use the audio(4) interface to the mixer "master" volume control
- actually mute the audio when output volume is '0'
- set the audio(4) blocksize to match size of chunks to be written
- provide *BSD equivilents to some Sun functionality
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2007/11/12 07:08:24 ajacoutot Exp $
d8 6
a13 4
DISTNAME=		MPlayer-1.0pre8
DIST_SUBDIR=		mplayer
PKGNAME=		${DISTNAME:L}p17
CATEGORIES=		x11
d23 1
a23 1
WANTLIB=		c m ncurses pthread stdc++ util z crypto
a33 1
MASTER_SITES1=		http://www.nazgul.ch/dev/
d52 2
a53 1
		x264::multimedia/x264
d55 1
a55 4
BUILD_DEPENDS=	:rtunes->=0.6:audio/rtunes \
		::net/livemedia

PATCHFILES=     rtunes_ao.diff:1
d67 2
a68 2
		--disable-internal-vidix \
		--disable-external-vidix \
d71 2
a72 1
		--disable-external-tremor \
d74 1
a75 2
		--disable-select \
		--enable-vorbis \
d82 2
a83 1
		--with-livelibdir=${LOCALBASE}/live \
d85 1
d87 6
a92 1
		--disable-fribidi
d98 1
a159 1
WANTLIB+=	usbhid 
d183 1
a183 2
PATCH_LIST=	patch-* i386-patch-postproc_Makefile
CONFIGURE_ARGS+=--with-win32libdir=${LOCALBASE}/lib/win32 \
d185 1
a185 1
		--with-reallibdir=${LOCALBASE}/lib/win32
d187 1
a187 1
CONFIGURE_ARGS+=--disable-win32 \
@


1.122
log
@- add a workaround to prevent mencoder crashing in several places

ok biorn@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2007/11/09 15:49:12 ajacoutot Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p16
d75 1
a75 1
		--enable-select \
@


1.121
log
@- fix WANTLIB and lowercase COMMENT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2007/09/15 20:04:23 merdely Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p15
d177 1
@


1.120
log
@Remove surrounding quotes in COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2007/06/07 07:28:36 robert Exp $
d6 1
a6 1
COMMENT=		Movie player supporting MPEG, DivX, AVI, ASF, MOV & more
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p14
d141 5
a145 4
WANTLIB+=	GL X11 Xau Xcursor Xdmcp Xext Xfixes Xi Xinerama Xrandr \
		Xrender Xv Xxf86dga Xxf86vm atk-1.0 cairo expat fontconfig \
		freetype glib-2.0 glitz gmodule-2.0 gobject-2.0 pango-1.0 \
		pangocairo-1.0 pangoft2-1.0
@


1.119
log
@fix a buffer overflow in mplayer's CDDB parsing code;
http://secunia.com/advisories/24302/

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2007/04/28 11:09:51 kili Exp $
d6 1
a6 1
COMMENT=		"Movie player supporting MPEG, DivX, AVI, ASF, MOV & more"
d17 1
a17 1
PERMIT_PACKAGE_CDROM=	"patents"
@


1.118
log
@
WANTLIB fix (Xcursor Xfixes Xi Xrandr).

Veryfied by bernd@@ with a recent xenocara.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2007/04/19 08:37:09 ajacoutot Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p13
@


1.117
log
@- add live555 support
- regen patches while here

from brad
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2007/04/13 23:13:21 robert Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p12
d141 4
a144 4
WANTLIB+=	GL X11 Xau Xdmcp Xext Xrender Xinerama Xv Xxf86dga \
		Xxf86vm atk-1.0 cairo expat freetype fontconfig glib-2.0 \
		gmodule-2.0 gobject-2.0 glitz pango-1.0 pangocairo-1.0 \
		pangoft2-1.0
@


1.116
log
@- Fix heap overflow in DMO loader. (CVE-2007-1246)
- regen patches while here

pulled from MPlayer SVN by Brad <brad@@comstyle.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2007/04/08 17:33:39 ajacoutot Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p11
d53 2
a54 1
BUILD_DEPENDS=	:rtunes->=0.6:audio/rtunes
d83 1
@


1.115
log
@- add support for x264
- regen patches while here

"go for it" naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2007/04/05 16:20:02 kili Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p10
@


1.114
log
@
Fix WANTLIB (+Xau Xdmcp expat).
Adjust MODULES (converters/libiconv for no_x11, devel/gettext else)
and drop intl from WANTLIB (spotted by ajacoutot@@).

ok, ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2007/02/15 11:49:03 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p9
d50 2
a51 1
		xvidcore::multimedia/xvidcore
d79 1
@


1.113
log
@
mplayer uses an internal vorbis so LIB_DEPEND on ogg instead of vorbis.
Noted by Moritz Grimm.

Add SHA256.

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2007/02/12 14:47:11 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p8
a41 2
MODULES=	converters/libiconv

d119 1
d137 3
a139 3
WANTLIB+=	GL X11 Xext Xrender Xinerama Xv Xxf86dga Xxf86vm atk-1.0 \
		cairo freetype fontconfig glib-2.0 gmodule-2.0 \
		gobject-2.0 glitz intl pango-1.0 pangocairo-1.0 \
d141 1
@


1.113.2.1
log
@MFC:
- Fix heap overflow in DMO loader. (CVE-2007-1246)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2007/02/15 11:49:03 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p11
@


1.113.2.2
log
@MFC:
fix a buffer overflow in mplayer's CDDB parsing code;
http://secunia.com/advisories/24302/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113.2.1 2007/05/01 16:43:14 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p14
@


1.112
log
@
Put rtunes in BUILD_DEPENDS rather than LIB_DEPENDS, noted
by Moritz Grimm, and fix WANTLIB.

ok sturm@@, espie@@, mglocker@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2007/02/08 18:58:22 mglocker Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p7
d21 1
a21 1
WANTLIB=		c m ncurses ogg pthread stdc++ util z crypto
d51 1
a51 1
		vorbis::audio/libvorbis \
@


1.111
log
@Add rtunes support via the Audio Output (-ao) interface.  This makes
mplayer capable to stream audio to the Airport Express device.

help and ok robert@@ mbalmer@@ Bjorn Sandell
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2007/01/22 15:04:04 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p6
d21 1
a21 1
WANTLIB=		c m ncurses ogg pthread stdc++ util z 
d52 3
a54 2
		xvidcore::multimedia/xvidcore \
		rtunes.>=0.6::audio/rtunes
@


1.110
log
@enable xvidcore
tweak default dvd device to match OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2007/01/04 20:19:54 steven Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p5
d32 1
d34 1
a34 1
MAINTAINER=     Bjorn Sandell <biorn@@dce.chalmers.se>
d52 4
a55 1
		xvidcore::multimedia/xvidcore
@


1.109
log
@fix WANTLIB of ports using gtk, needed after switch to our own pkg-config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2007/01/02 09:01:58 robert Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p4
d50 2
a51 1
		vorbis::audio/libvorbis
a64 1
		--disable-xvid \
@


1.108
log
@fix a buffer overflow found in the code used to handle RealMedia RTSP
streams by applying the patches provided by the MPlayer team;

from Brad <brad@@comstyle.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2006/12/28 02:23:17 pvalchev Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p3
d133 1
a133 1
WANTLIB+=	GL X11 Xext Xinerama Xv Xxf86dga Xxf86vm atk-1.0 \
d135 1
a135 1
		gobject-2.0 intl pango-1.0 pangocairo-1.0 \
@


1.107
log
@switch skins master site to MASTER_SITE_BACKUP since we carry that
distfile now.  no change in pkg.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2006/12/16 12:22:36 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p2
@


1.106
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2006/11/29 19:49:33 robert Exp $
d31 1
a31 1
MASTER_SITES0=		http://www.sightly.net/mplayer/
@


1.105
log
@Using the mad and no_x11 flavors together is not a nonsense combination.
This change also fixes the builds on arm because there the mad flavor
is on by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2006/09/25 17:11:37 steven Exp $
a132 1
BUILD_DEPENDS+=	:pkgconfig->=0.15.0p0:devel/pkgconfig
@


1.104
log
@convert to new lib specs.

spotted by Matthias Kilian <kili at outback.escape.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2006/09/18 12:19:41 espie Exp $
d116 1
a116 1
.  if ${FLAVOR:L:Msdl} || ${FLAVOR:L:Mggi} || ${FLAVOR:L:Mmad}
@


1.103
log
@zap .0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2006/08/16 15:17:15 biorn Exp $
d162 1
a162 1
LIB_DEPENDS+=	mad.2::audio/libmad
d180 1
a180 1
LIB_DEPENDS+=	aa.1.3:aalib-*-no_x11:graphics/aalib,no_x11
d182 1
a182 1
LIB_DEPENDS+=	aa.1.3:aalib-*:graphics/aalib
@


1.102
log
@
Bring back CPU extentions on amd64.

"lock ok" sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2006/08/09 08:15:24 biorn Exp $
d102 1
a102 1
WANTLIB+=	glib-2.0.0.0 gmodule-2.0.0.0 gthread-2.0.0.0
d131 1
a131 1
LIB_DEPENDS+=	gdk-x11-2.0.0.0,gdk_pixbuf-2.0.0.0,gtk-x11-2.0.0.0::x11/gtk+2 \
d134 4
a137 4
WANTLIB+=	GL X11 Xext Xinerama Xv Xxf86dga Xxf86vm atk-1.0.0.0 \
		cairo freetype fontconfig glib-2.0.0.0 gmodule-2.0.0.0 \
		gobject-2.0.0.0 intl pango-1.0.0.0 pangocairo-1.0.0.0 \
		pangoft2-1.0.0.0
@


1.102.2.1
log
@MFC:
fix a buffer overflow found in the code used to handle RealMedia RTSP
streams by applying the patches provided by the MPlayer team;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2006/08/16 15:17:15 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p3
@


1.102.2.2
log
@MFC:
- Fix heap overflow in DMO loader. (CVE-2007-1246)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102.2.1 2007/01/03 21:20:26 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p11
@


1.102.2.3
log
@MFC:
fix a buffer overflow in mplayer's CDDB parsing code;
http://secunia.com/advisories/24302/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102.2.2 2007/04/19 14:15:51 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p14
@


1.101
log
@- bring back internal tremor
- aviod picking up audio/faac

ok sturm@@ pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2006/08/02 08:24:34 alek Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
@


1.100
log
@- Don't pickup audio/tremor if it's installed as mplayer doesn't build
  with it; from Frank Denis <obsd-ports@@pureftpd.org>
- Add audio/libvoribs do LIB_DEPENDS as it's being used
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2006/07/19 21:40:47 robert Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p0
d68 1
a68 1
		--disable-internal-tremor \
@


1.99
log
@update to versio 1.0pre8; include the speex and mpcdec codecs by default;
this version of mplayer now uses gtk2;

ok biorn@@ and tested by many
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2006/04/06 21:47:43 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}
d41 1
a41 1
MODULES= converters/libiconv
d49 2
a50 1
		mpcdec::audio/libmpcdec
d67 2
@


1.98
log
@Protect from integer overflows. See CVE-2006-1502
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2006/02/23 11:34:54 biorn Exp $
d8 1
a8 1
DISTNAME=		MPlayer-1.0pre7
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p15
d21 6
a26 1
WANTLIB=		c m ogg pthread stdc++ termcap util z 
a27 3
MASTER_SITES=		http://www2.mplayerhq.hu/MPlayer/releases/
MASTER_SITES+=		http://www.mplayerhq.hu/MPlayer/releases/
MASTER_SITES+=		http://ftp.lug.udel.edu/MPlayer/releases/
d47 3
a49 1
		theora::multimedia/libtheora
d61 2
a62 1
		--disable-vidix \
d74 4
a77 1
		--confdir=${CONFDIR}
d128 1
a128 1
LIB_DEPENDS+= 	gtk,gdk::x11/gtk+ \
d131 4
a134 2
WANTLIB+=	GL X11 Xext Xi Xinerama Xv Xxf86dga Xxf86vm glib gmodule intl 
WANTLIB+=	freetype fontconfig
d190 2
a191 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/mplayer/Skin/${SKIN}
	${INSTALL_DATA} ${WRKDIR}/${SKIN}/* ${PREFIX}/share/mplayer/Skin/${SKIN}
@


1.97
log
@Fix a potential buffer overflow in the ASF demuxer.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2006/01/22 06:28:25 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p14
@


1.97.2.1
log
@MFC:
Protect from integer overflows. See CVE-2006-1502
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97.2.1 2006/05/01 17:48:17 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p15
@


1.97.2.2
log
@MFC:
fix a buffer overflow found in the code used to handle RealMedia RTSP
streams by applying the patches provided by the MPlayer team;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97.2.1 2006/05/01 17:53:42 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p16
@


1.97.2.3
log
@MFC:
- Fix heap overflow in DMO loader. (CVE-2007-1246)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97.2.2 2007/01/04 20:18:57 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p17
@


1.96
log
@Add support for
- version 2 audio atoms in QuickTime containers, from mplayer cvs requested by
   David Hill (dhill at mindcry org)
- setting volumem via /dev/mixer, from Mike Belopuhov (mkb at crypt org ru)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2006/01/17 07:41:58 jakemsr Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p13
@


1.95
log
@enable bktr(4) support, and enhance the bktr(4) support by:
- adding support for setting the channel set
- making it use audio(4) instead of ossaudio(3)
- making it explicitly mute the tuner on exit
- use the tuner as default video source, as opposed to RCA

ok biorn@@, robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2005/10/16 21:29:30 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p12
@


1.94
log
@continue gracefully if we don't manage to find an audio stream in some
cases.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2005/10/10 15:37:24 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p11
@


1.93
log
@copy aspect ratio over if we have it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2005/10/01 13:40:35 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p10
@


1.92
log
@the combination of unaligned acces and inline swap32 does not work on
i386. This fixes at least two videos for me...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2005/09/08 16:35:00 fgsch Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p8
@


1.91
log
@fix a crash when playing some wmv files; maintainer ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2005/09/04 23:51:51 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p7
@


1.90
log
@fix a few more obvious coredumps and bad dereferences.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2005/08/29 06:53:54 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p6
@


1.89
log
@
Fix a potential heap overflow when playing uncompressed pcm audio.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2005/08/27 21:11:49 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p5
@


1.89.2.1
log
@MFC:
Fix a potential buffer overflow in the ASF demuxer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2005/08/29 06:53:54 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p14
@


1.89.2.2
log
@MFC:
Protect from integer overflows. See CVE-2006-1502
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89.2.1 2006/02/28 08:23:49 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p15
@


1.88
log
@Two bug-fixes.
- allows realmedia streams to work.
- fix af resample=wrongvalue.

Okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2005/08/12 22:59:15 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p4
@


1.87
log
@the linux realmedia codec can't work: our dlopen won't load them correctly.
More annoyingly, it abort()s the current process (thanks dale),
so comment them out, add the win32 codecs, and use them instead.

For some strange reason, the audio codec insists on being launched
from its own directory.

With this change, realmedia playing works.

okay sturm@@, okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2005/08/04 22:43:18 robert Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p3
@


1.86
log
@Disalble the internal mp3lib (mpg123) on arm, because it relies on the FPU.
Instead of using that let's enable the mad flavor by default on this arch.
This way you can watch movies on the Zaurus. A little description is added
to the DESCR file for people who want to use mplayer on the Zaurus.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2005/07/27 11:56:01 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p2
@


1.85
log
@
Depend on no_x11 flavors of lame and aalib when building with FLAVOR=no_x11

With help from sturm@@ and espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2005/07/25 17:10:09 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
d82 5
@


1.84
log
@
theora seems to be popular these days, so enable it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2005/05/09 12:24:38 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p0
a42 1
		mp3lame::audio/lame \
d109 1
d115 2
a116 1
LIB_DEPENDS+= 	gtk,gdk::x11/gtk+
d161 5
a165 1
LIB_DEPENDS+=  aa.1.3::graphics/aalib
@


1.83
log
@Update to 1.0pre7
Don't depend on ogg/vorbis as it's built in now
Put fontconfig and freetype in WANTLIB and BUILD_DEPEND on pkgconfig if
 FLAVOR is not no_x11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2005/04/01 06:28:57 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}
d21 1
a21 1
WANTLIB=		c m pthread stdc++ termcap util z 
d45 2
a46 1
		cdda_paranoia,cdda_interface:cdparanoia->=3.a9.8:audio/cdparanoia
d62 1
@


1.82
log
@
- Make amd64 use MMX and friends. Tested by niallo and naddy.
- Avoid picking up libdv and libsmb

Looks fine, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2005/03/27 04:10:51 pvalchev Exp $
d8 1
a8 1
DISTNAME=		MPlayer-1.0pre6a
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
d21 1
a21 1
WANTLIB=		c freetype m ogg pthread stdc++ termcap util z 
a44 1
		vorbis.0::audio/libvorbis \
d105 3
a107 1
		--disable-x11
d114 1
d116 1
@


1.81
log
@this was reported to work on zaurus; enable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2005/03/16 12:33:35 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p0
d60 2
@


1.80
log
@Avoid picking up the xvidcore library
Bump PKGNAME

From espie@@, ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2005/03/09 16:07:29 biorn Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		amd64 i386 powerpc sparc64
@


1.80.2.1
log
@MFC:
Fix a potential heap overflow when playing uncompressed pcm audio.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2005/03/16 12:33:35 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
@


1.80.2.2
log
@SECURITY:
finally fix the RTSP & MMST heap overflows. from biorn@@

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80.2.1 2005/09/12 19:27:58 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p2
@


1.80.2.3
log
@MFC:
Fix a potential buffer overflow in the ASF demuxer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80.2.2 2005/09/22 20:43:25 robert Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p3
@


1.80.2.4
log
@MFC:
Protect from integer overflows. See CVE-2006-1502
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80.2.3 2006/02/28 08:22:44 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p4
@


1.79
log
@
Finally take it to 1.0pre6a

Prodded by espi@@, ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2005/01/06 21:33:28 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}
d59 1
@


1.78
log
@fix LIB_DEPENDS
prod and ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2004/12/22 22:22:13 biorn Exp $
d8 1
a8 1
DISTNAME=		MPlayer-1.0pre5try2
@


1.77
log
@Security: Upgrade to 1.0pre5try2 (see http://www.mplayerhq.hu/)

Also unbreak arts FLAVOR (from Stephan Tesch) and fix up DESCR
(from Michael Knudsen and joshua stein).

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2004/12/19 12:56:26 alek Exp $
d44 2
a45 2
		ungif,gif::graphics/libungif \
		vorbis.0,vorbisfile.1::audio/libvorbis \
@


1.76
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2004/10/18 06:48:08 biorn Exp $
d8 1
a8 1
DISTNAME=		MPlayer-1.0pre5
@


1.75
log
@update to 1.0pre5
ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2004/08/09 11:09:10 espie Exp $
d21 1
d83 1
d91 1
d110 1
d117 1
@


1.74
log
@more new plists.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2004/07/03 02:10:26 robert Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		amd64 i386 powerpc
d8 1
a8 1
DISTNAME=		MPlayer-1.0pre4
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
a29 2
MASTER_SITES1=		${MASTER_SITES:S,releases,patches,}

a34 1
PATCHFILES+=	vuln04-fix.diff:1
d76 1
a76 1
FLAVORS=	arts esd sdl ggi debug mad win32 no_x11 aa
d135 1
a135 5
.if ${FLAVOR:L:Mwin32}
ONLY_FOR_ARCHS=i386

RUN_DEPENDS+=	:win32-codecs-*:graphics/win32-codecs
BUILD_DEPENDS+=	:win32-codecs-*:graphics/win32-codecs
@


1.74.2.1
log
@SECURITY:
fix multiple overflow vulnerabilties; bump PKGNAME;
http://www.vuxml.org/openbsd/4a667f60-5468-11d9-a47f-00065bd5b0b6.html

ok bra@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2004/08/09 11:09:10 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p2
@


1.74.2.2
log
@MFC:
Fix a potential heap overflow when playing uncompressed pcm audio.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74.2.1 2005/01/22 10:44:54 robert Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p3
@


1.74.2.3
log
@SECURITY:
finally fix the RTSP & MMST heap overflows. from biorn@@

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74.2.2 2005/09/12 19:22:18 sturm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p4
@


1.73
log
@SECURITY:

The added distribution patch fixes several vulnerabilities in MPlayer's GUI.
http://www.mplayerhq.hu/homepage/design7/news.html

ok biorn@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2004/06/22 20:34:09 naddy Exp $
d41 1
a41 1
MODULES= iconv
@


1.72
log
@unbreak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2004/06/22 08:13:11 brad Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}
d30 2
d37 1
@


1.71
log
@- disable the Vidix support
- instead of passing --target for powerpc just make the configure
script recognize macppc as another name for a powerpc system

ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2004/06/15 02:19:56 brad Exp $
d74 1
a74 1
 .endif
@


1.70
log
@don't try to use AltiVec if gcc3 is detected since gcc3 (3.3.x) has broken
AltiVec support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2004/05/06 07:27:36 biorn Exp $
d57 1
a58 1
		--enable-vidix \
d66 1
a66 1
CONFIGURE_ENV+="TMPDIR=${WRKBUILD}"
d73 2
a74 3
CONFIGURE_ARGS+=--target=ppc-openbsd \
		--disable-altivec
.endif
@


1.69
log
@Take it to 1.0pre4

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2004/03/30 21:05:57 biorn Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		i386 macppc amd64
a56 1
		--enable-runtime-cpudetection \
d68 4
d73 2
a74 1
CONFIGURE_ARGS+=--target=ppc-openbsd
@


1.68
log
@Plug remote buffer overflow and bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2004/03/15 22:42:28 pvalchev Exp $
d8 1
a8 1
DISTNAME=		MPlayer-1.0pre3
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p0
d56 1
@


1.67
log
@enable runtime cpu detection by default; tested and ok'ed by many
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2004/03/04 12:57:45 avsm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}
@


1.67.2.1
log
@Plug two remote exploits, streaming over http and rtsp
Bump PKGNAME

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2004/03/15 22:42:28 pvalchev Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
@


1.67.2.2
log
@SECURITY:

Fix several vulnerabilities in MPlayer's GUI.
http://www.mplayerhq.hu/homepage/design7/news.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67.2.1 2004/05/08 13:10:54 biorn Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p2
@


1.67.2.3
log
@SECURITY:
fix multiple overflow vulnerabilties; bump PKGNAME;
http://www.vuxml.org/openbsd/4a667f60-5468-11d9-a47f-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67.2.2 2004/07/04 12:15:58 robert Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p3
@


1.66
log
@support amd64, ok and tweaks maintainer, pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2003/12/16 17:17:14 biorn Exp $
d56 1
@


1.65
log
@Update to 1.0pre3
Ok espie@@ pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2003/12/11 08:09:21 biorn Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		i386 macppc
@


1.64
log
@Fix dependency audio/mad -> audio/libmad
Ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2003/12/04 22:05:09 biorn Exp $
d8 1
a8 1
DISTNAME=		MPlayer-1.0pre2
d162 1
a162 1
	${INSTALL_DATA} ${WRKDIST}/DOCS/en/*.html ${PREFIX}/share/doc/mplayer
@


1.63
log
@Clean up flavors: drop lzo, always use cdda and document those that
were missing.
ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2003/11/12 07:02:07 david Exp $
d125 1
a125 1
LIB_DEPENDS+=	mad::audio/mad
@


1.62
log
@stop configure from trying to exec things in /tmp
better fix from MAINTAINER
ok pvalchev@@ henning@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2003/11/02 23:30:27 brad Exp $
d44 2
a45 1
		vorbis.0,vorbisfile.1::audio/libvorbis
d55 1
d61 1
d71 1
a71 1
FLAVORS=	arts esd sdl ggi debug mad win32 no_x11 cdda aa lzo
a87 7
.if ${FLAVOR:L:Mlzo}
CONFIGURE_ARGS+=--enable-liblzo
LIB_DEPENDS+=lzo::archivers/lzo
.else
CONFIGURE_ARGS+=--disable-liblzo
.endif

a141 7
.endif

.if ${FLAVOR:L:Mcdda}
CONFIGURE_ARGS+=--enable-cdparanoia
BUILD_DEPENDS+= cdda_paranoia,cdda_interface:cdparanoia->=3.a9.8:audio/cdparanoia
.else
CONFIGURE_ARGS+=--disable-cdparanoia
@


1.61
log
@upgrade to mplayer 1.0pre2

based on diff from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2003/10/26 19:54:46 brad Exp $
d62 1
@


1.60
log
@- move global config files from LOCALBASE/share/mplayer (bad enough no one
noticed it wasn't using SYSCONFDIR nevermind LOCALBASE) to SYSCONFDIR/mplayer
- move install time message via @@exec's in the PLIST to MESSAGE
- add @@extra stuff
- remove WWW: from DESCR
--
ok jolan@@ pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2003/09/25 20:59:01 sturm Exp $
d8 1
a8 1
DISTNAME=		MPlayer-0.92
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
d67 1
a67 1
FLAVORS=	arts esd sdl ggi debug mad win32 no_x11 cdda faad aa lzo
a69 7
.if ${FLAVOR:L:Mfaad}
CONFIGURE_ARGS+=--enable-faad
LIB_DEPENDS+=   faad::audio/faad
.else
CONFIGURE_ARGS+=--disable-faad
.endif

d172 1
a172 1
	${INSTALL_DATA} ${WRKDIST}/DOCS/*.html ${PREFIX}/share/doc/mplayer
@


1.59
log
@SECURITY UPDATE to 0.92

fixes a remotely exploitable buffer overflow in ASX headers that could
be used to make mplayer run arbitrary code

from maintainer Bjoern Sandell
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2003/06/18 14:03:36 avsm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}
d46 3
d61 1
a61 1
		--confdir=${LOCALBASE}/share/mplayer
d171 2
d175 4
a178 3
	cd ${WRKDIST}/etc; ${INSTALL_DATA} input.conf menu.conf \
			${PREFIX}/share/mplayer
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mplayer
@


1.58
log
@backport a patch from mplayer-cvs to plug a bad buffer boundary
pointed out by Bjorn Sandell <biorn@@dce.chalmers.se>
bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2003/05/31 00:03:22 brad Exp $
d8 1
a8 1
DISTNAME=		MPlayer-0.90
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
d143 1
a143 1
		--enable-qtx-codecs \
d147 1
a147 1
		--disable-qtx-codecs \
@


1.58.2.1
log
@SECURITY fix:

A remotely exploitable buffer overflow vulnerability was found in MPlayer.
A malicious host can craft a harmful ASX header, and trick MPlayer into
executing arbitrary code upon parsing that header.
http://www.mplayerhq.hu/homepage/design6/news.html#vuln01
Bump package name.

ok pvalchev@@, Bjorn Sandell (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2003/06/18 14:03:36 avsm Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p2
d22 1
a22 3
MASTER_SITES=		http://www2.mplayerhq.hu/MPlayer/releases/ \
			ftp://ftp.freebsd.org/pub/FreeBSD/distfiles/ \
			http://www.devilness.org/mplayer/
@


1.58.2.2
log
@Plug remote buffer overflow and bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58.2.1 2003/11/08 00:23:06 margarida Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p3
@


1.58.2.3
log
@SECURITY:

Fix several vulnerabilities in MPlayer's GUI.
http://www.mplayerhq.hu/homepage/design7/news.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58.2.2 2004/04/16 00:48:45 brad Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p4
@


1.57
log
@- use iconv MODULE
- don't need binutils anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2003/05/26 16:53:05 espie Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}
@


1.56
log
@remove real flavor, fold it into win32, now that the win32 codecs package
also includes real video stuff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2003/05/18 11:49:55 espie Exp $
d26 1
a26 1
# locally, do NOT change this
d38 3
a40 6
.if ${ELF_TOOLCHAIN:L} == "no"
BUILD_DEPENDS+=	:binutils->=2.11.2:devel/binutils/stable
MAKE_ENV+=	AR=${LOCALBASE}/${MACHINE_ARCH}-unknown-openbsd${OPSYS_VER}/bin/ar
CONFIGURE_ARGS+=--as=${LOCALBASE}/${MACHINE_ARCH}-unknown-openbsd${OPSYS_VER}/bin/as
.endif
LIB_DEPENDS+=	png::graphics/png \
d44 1
a44 2
		vorbis.0,vorbisfile.1::audio/libvorbis \
		iconv::converters/libiconv
d141 1
a141 1
BUILD_DEPENDS+=	${RUN_DEPENDS}
a162 5
.endif

.if ${ELF_TOOLCHAIN:L} == "no"
post-patch:
	@@ln -s ${LOCALBASE}/${MACHINE_ARCH}-unknown-openbsd${OPSYS_VER}/bin/as ${WRKDIR}/bin/as
@


1.55
log
@Partial real video support. Need manual installation of the codecs.
mplayer was already working, but if linked with g++, mencoder also
works, so one can convert stuff from realvideo into other more palateable
formats.

With help from Bjorn, who suggested linking with g++.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2003/04/17 22:16:18 wilfried Exp $
d68 1
a68 1
FLAVORS=	arts esd sdl ggi debug mad win32 no_x11 cdda faad aa lzo real
d147 2
a148 1
		--enable-qtx-codecs
d151 2
a152 8
		--disable-qtx-codecs
.endif

.if ${FLAVOR:L:Mreal}
CONFIGURE_ARGS+=--with-reallibdir=${LOCALBASE}/lib/real
CONFIGURE_ARGS+=--enable-real
.else
CONFIGURE_ARGS+=--disable-real
@


1.54
log
@update from maintainer Bjorn Sandell <biorn@@dce.chalmers.se>

* Make mplayer compile on i386/elf
* Some whitespace and "=" -> "+=" in Makefile (from Thorsten Glaser)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2003/04/17 10:35:07 wilfried Exp $
d68 1
a68 1
FLAVORS=	arts esd sdl ggi debug mad win32 no_x11 cdda faad aa lzo
d151 7
@


1.53
log
@update to 0.90; from maintainer Bjorn Sandell <biorn@@dce.chalmers.se>

No big changes; iconv flavor is gone, remove sparc64 from supported
architectures
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2003/04/06 22:56:28 espie Exp $
d14 1
a14 1
HOMEPAGE=		http://www.mplayerhq.hu
d39 2
a40 2
BUILD_DEPENDS=	:binutils->=2.11.2:devel/binutils/stable
MAKE_ENV=	AR=${LOCALBASE}/${MACHINE_ARCH}-unknown-openbsd${OPSYS_VER}/bin/ar
d43 1
a43 1
LIB_DEPENDS=	png::graphics/png \
d104 3
a106 3
	--disable-gl \
	--disable-xv \
	--disable-x11
d110 1
a110 1
	--enable-gl
@


1.52
log
@--disable-iconv is not enough, --disable-freetype as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2003/03/30 12:27:58 miod Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		i386 macppc sparc64
d8 1
a8 1
DISTNAME=		MPlayer-0.90rc4
d47 2
a48 1
		vorbis.0,vorbisfile.1::audio/libvorbis
d59 1
d68 1
a68 1
FLAVORS=	arts esd sdl ggi debug mad win32 iconv no_x11 cdda faad aa lzo
d106 1
a106 2
	--disable-x11 \
	--disable-sunaudio
d114 1
a138 8
.endif

.if ${FLAVOR:L:Miconv}
CONFIGURE_ARGS+=--enable-iconv
LIB_DEPENDS+=	iconv::converters/libiconv
.else
CONFIGURE_ARGS+=--disable-iconv
CONFIGURE_ARGS+=--disable-freetype
@


1.51
log
@Update the USER_LDT blurb to match reality; some feedback from espie@@,
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2003/02/19 01:06:03 pvalchev Exp $
d144 1
@


1.50
log
@Brad, I had mirrored the skins package locally for a reason!
These people change the file on an daily basis (no comment)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2003/02/18 17:17:44 espie Exp $
a147 9

.  if !defined(NO_WARNINGS)
pre-fetch:
	@@echo
	@@echo "  WARNING: This application requires a kernel compiled with"
	@@echo "           'option USER_LDT' for proper operation. The GENERIC"
	@@echo "           kernel does not have this option enabled by default."
	@@echo
.  endif
@


1.50.2.1
log
@SECURITY fix:

A remotely exploitable buffer overflow vulnerability was found in MPlayer.
A malicious host can craft a harmful ASX header, and trick MPlayer into
executing arbitrary code upon parsing that header.
http://www.mplayerhq.hu/homepage/design6/news.html#vuln01
Bump package name.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2003/02/19 01:06:03 pvalchev Exp $
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
d22 1
a22 3
MASTER_SITES=		http://www2.mplayerhq.hu/MPlayer/releases/ \
			ftp://ftp.freebsd.org/pub/FreeBSD/distfiles/ \
			http://www.devilness.org/mplayer/
@


1.49
log
@Fix bad checksum for skin.
Add esd and arts flavors (unbreak package building, thanks to
auto-detection)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2003/02/18 16:40:38 brad Exp $
d25 4
a28 1
MASTER_SITES0=		http://www2.mplayerhq.hu/MPlayer/Skin/
@


1.48
log
@use :L variable modifier with ELF_TOOLCHAIN check
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2003/02/17 14:55:34 brad Exp $
a49 1
		--disable-arts \
d63 1
a63 1
FLAVORS=	sdl ggi debug mad win32 iconv no_x11 cdda faad aa lzo
d71 14
@


1.47
log
@- new version of default skin
- add message to PLIST which mentions the possibility of needing additional setup
- mention the use of sysctl(8) to modify shared memory settings in DESCR
--
From: MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2003/02/16 07:25:18 brad Exp $
d35 1
a35 1
.if ${ELF_TOOLCHAIN} == "no"
d165 1
a165 1
.if ${ELF_TOOLCHAIN} == "no"
@


1.46
log
@upgrade to mplayer 0.90rc4

based on diff from MAINTAINER for 0.90rc3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2003/01/21 23:07:38 sturm Exp $
d25 1
a25 2
#MASTER_SITES0=		http://www2.mplayerhq.hu/MPlayer/Skin/
MASTER_SITES0=		http://www.sightly.net/mplayer/
d30 1
a30 1
SKINVER=	1.1
d37 2
a45 4
.if ${ELF_TOOLCHAIN} == "no"
MAKE_ENV=	AR=${LOCALBASE}/${MACHINE_ARCH}-unknown-openbsd${OPSYS_VER}/bin/ar
.endif

d48 1
a48 2
CONFIGURE_ARGS+=--as=${LOCALBASE}/${MACHINE_ARCH}-unknown-openbsd${OPSYS_VER}/bin/as \
		--disable-alsa \
@


1.45
log
@- propolice reports a stack overflow on Athlons, this patch seems to fix it
- bump package version

from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2003/01/06 20:20:20 espie Exp $
d7 2
a8 1
DISTNAME=		MPlayer-0.90rc2
d10 1
a10 1
PKGNAME=		${DISTNAME:L}p1
d55 1
a55 1
		--disable-dvdnav \
d146 1
a146 1
RUN_DEPENDS+=	win32/divx.dll:win32-codecs-*:graphics/win32-codecs
d148 2
a149 1
CONFIGURE_ARGS+=--with-win32libdir=${LOCALBASE}/lib/win32
d151 2
a152 1
CONFIGURE_ARGS+=--disable-win32
d178 5
a182 1
	${INSTALL_DATA} ${WRKDIR}/${SKIN}/* ${PREFIX}/share/mplayer/Skin/${SKIN}/
@


1.44
log
@too early
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2003/01/06 17:33:01 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME:L}
@


1.43
log
@-* is not the way to specify any flavors. By default, flavors are transparent.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2003/01/04 00:58:43 espie Exp $
d61 1
a61 2
		--confdir=${LOCALBASE}/share/mplayer \
		--with-reallibdir=/usr/local/lib/win32
@


1.42
log
@mplayer now detects and use liblzo. Make a flavor for it for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2003/01/03 23:06:35 brad Exp $
d61 2
a62 1
		--confdir=${LOCALBASE}/share/mplayer
d104 1
a104 1
LIB_DEPENDS+=	SDL:sdl-1.2.4p1,>=1.2.5-*:devel/sdl
@


1.41
log
@upgrade to mplayer 0.90rc2
- with PLIST changes from me
--
From: MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2002/12/22 14:19:47 espie Exp $
d67 1
a67 1
FLAVORS=	sdl ggi debug mad win32 iconv no_x11 cdda faad aa
d75 7
@


1.40
log
@Update to 0.90rc1.
From maintainer, Bjorn.

PP fix from niklas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2002/11/13 17:54:35 espie Exp $
d6 2
a7 2
COMMENT=		"Movie player supporting MPEG, DIVX, AVI, ASF, MOV & more"
DISTNAME=		MPlayer-0.90rc1
d15 1
d58 1
a85 1
PLIST=pkg/PLIST-no_x11
@


1.39
log
@update to mplayer 0.90pre10, from maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2002/11/12 08:52:08 pvalchev Exp $
d7 1
a7 1
DISTNAME=		MPlayer-0.90pre10
d65 1
a65 1
FLAVORS=	sdl ggi debug mad win32 iconv no_x11 cdda faad
d151 4
d156 1
a156 1

@


1.38
log
@Mention "DIVX" in comment too; from maintainer Bjrn Sandell
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2002/11/12 06:16:09 pvalchev Exp $
d7 1
a7 1
DISTNAME=		MPlayer-0.90pre9
d22 1
d26 1
a26 1
MAINTAINER=     Bjrn Sandell <biorn@@dce.chalmers.se>
a50 1
		--disable-aa \
d65 1
a65 1
FLAVORS=	sdl ggi debug mad win32 iconv no_x11 cdda
d68 7
d150 3
@


1.37
log
@a bit more revealing comment, lackage pointed out by millert
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2002/10/29 23:05:44 pvalchev Exp $
d6 1
a6 1
COMMENT=		"Movie player supporting MPEG-1/2/4, AVI, ASF, MOV & more"
@


1.36
log
@Enable redistribution on FTP; per discussion with deraadt, beck and others
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2002/10/29 19:48:58 naddy Exp $
d6 1
a6 1
COMMENT=		"Movie player"
@


1.35
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2002/10/28 17:56:08 espie Exp $
d16 1
a16 1
PERMIT_PACKAGE_FTP=	"patents"
@


1.34
log
@0.90pre9, update from Bjorn Sandell, and fix mplayer-fontmaker shadows.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2002/10/14 09:50:48 pvalchev Exp $
d148 2
@


1.33
log
@Update to mplayer-0.90pre8; from biorn@@dce.chalmers.se
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2002/09/14 12:19:15 naddy Exp $
d7 1
a7 1
DISTNAME=		MPlayer-0.90pre8
@


1.32
log
@Add missing library dependencies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2002/09/04 05:40:21 pvalchev Exp $
d7 1
a7 1
DISTNAME=		MPlayer-0.90pre6
a37 1
		dvdread.::devel/libdvdread \
d58 2
a59 1
		--with-extralibdir=${LOCALBASE}/lib
a137 1
CFLAGS+=-Dsize32=int -Dsize16=short
d139 1
a139 1
LIB_DEPENDS+= cdda_paranoia,cdda_interface::audio/cdparanoia
@


1.31
log
@Update default skin off mplayer's site.  Added our own versioning of the
distfile (now 1.1) since they have not done so and continue mirroring it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2002/08/18 13:17:50 espie Exp $
d40 1
a40 1
		ungif::graphics/libungif \
@


1.30
log
@cdparanoia support, actually needs correct cddb support for OpenBSD...
(seems it's not quite used yet, as it insists on going thru a cache)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2002/08/18 12:02:31 espie Exp $
d28 2
a29 1
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} ${SKIN}${EXTRACT_SUFX}:0
@


1.29
log
@you're lost in a maze of dependencies, all looking alike...

Fix png header path, explicitly disable cdparanoia and libdvdnav for
safety.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2002/08/18 11:26:48 espie Exp $
a53 1
		--disable-cdparanoia \
d64 1
a64 1
FLAVORS=	sdl ggi debug mad win32 iconv no_x11
d120 1
a120 1
.if !defined(NO_WARNINGS)
d127 1
a127 1
.endif
d134 8
@


1.28
log
@Update to 0.90pre6, mostly from maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2002/08/16 19:20:54 pvalchev Exp $
d53 2
d58 1
a58 1
		--with-extraincdir="${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
@


1.27
log
@Build vorbis support in by default and remove the flavor.
It is not clear when vorbis is needed to play some files, so to
pertain the full player functionality, this is required.
ok wcobb, mark
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2002/08/15 19:00:40 mark Exp $
d7 2
a8 1
DISTNAME=		MPlayer-0.90pre5
d21 1
d75 1
@


1.26
log
@added vorbis flavor

Prior to this patch, mplayer is incompatible of recognizing an AVI/MPEG4
(DivX) encoded with oggvorbis audio codec.  It will refuse to play the
movie, as it is unrecognized.  This patch allows these types of AVIs to
play.

ok maintainer, pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2002/06/29 11:51:22 espie Exp $
a9 1
NEED_VERSION=		1.527
d37 2
a38 1
		ungif::graphics/libungif
d53 1
d61 1
a61 1
FLAVORS=	sdl ggi debug mad vorbis win32 iconv no_x11
a103 7
.endif

.if ${FLAVOR:L:Mvorbis}
CONFIGURE_ARGS+=--enable-vorbis
LIB_DEPENDS+=	vorbis.0,vorbisfile.1::audio/libvorbis
.else
CONFIGURE_ARGS+=--disable-vorbis
@


1.25
log
@+no_x11 flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2002/06/29 11:36:57 espie Exp $
a47 1
		--disable-vorbis \
d60 1
a60 1
FLAVORS=	sdl ggi debug mad win32 iconv no_x11
d103 7
@


1.24
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2002/06/29 11:36:07 espie Exp $
a35 1
		gtk,gdk::x11/gtk+ \
a43 1
USE_X11=	Yes
a52 2
		--enable-gl \
		--enable-gui \
d61 1
a61 1
FLAVORS=	sdl ggi debug mad win32 iconv
d64 16
@


1.23
log
@simplify FLAVOR=win32 handling
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2002/06/29 07:24:10 pvalchev Exp $
a115 1
.endif
@


1.22
log
@Bring back a LIB_DEPENDS fix I made which got lost in the last commit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2002/06/27 22:03:49 espie Exp $
d102 3
a105 8
.if ${MACHINE_ARCH} != i386
	@@echo
	@@echo "Sorry, this CPU does not support Win32 codec DLLs,"
	@@echo "and you cannot use the win32 flavor.
	@@echo
	@@exit 1
.else
.if !defined(NO_WARNINGS)
d112 1
@


1.21
log
@Update to 0.90pre5
Most work by Biorn, some testing by pval and me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2002/06/10 03:18:35 wilfried Exp $
d71 1
a71 1
LIB_DEPENDS+=	SDL:sdl>=1.2.4p1:devel/sdl
@


1.20
log
@fix SDL lib-depends entry and a missing quote; caught by seb@@todesplanet.de
@
text
@d7 1
a7 1
DISTNAME=		MPlayer-0.90pre4
d24 2
d53 1
d71 1
a71 1
LIB_DEPENDS+=	SDL:sdl-1.2.4p1,>=1.2.5-*:devel/sdl
d106 1
a106 1
	@@echo "and you cannot use the win32 flavor."
@


1.19
log
@add specifier to RUN_DEPENDS and BUILD_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2002/06/08 00:48:26 espie Exp $
d68 1
a68 1
LIB_DEPENDS+=	SDL:sdl>=1.2.4p1:devel/sdl
d103 1
a103 1
	@@echo "and you cannot use the win32 flavor.
@


1.18
log
@revert unwanted change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/05/17 02:00:29 pvalchev Exp $
d30 1
a30 1
BUILD_DEPENDS=	::devel/binutils/stable
d114 1
a114 1
RUN_DEPENDS+=	win32/divx.dll::graphics/win32-codecs
@


1.17
log
@blech, close file descriptors.
@
text
@a23 1
COPTS=-O4 -fomit-frame-pointer -march=i686 -mcpu=i686
d49 1
d62 2
a63 2
FLAVORS=	sdl ggi debug mad win32 iconv aa
FLAVOR?=	
a70 7
.endif

.if ${FLAVOR:L:Maa}
CONFIGURE_ARGS+=--enable-aa
LIB_DEPENDS+=	aa::graphics/aalib
.else
CONFIGURE_ARGS+=--disable-aa
@


1.16
log
@Conditionalize binutils port usage upon ELF_TOOLCHAIN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/05/16 14:00:23 art Exp $
d24 1
a49 1
		--disable-aa \
d62 2
a63 2
FLAVORS=	sdl ggi debug mad win32 iconv
FLAVOR?=
d71 7
@


1.15
log
@Enable sparc64 (it works with a few more diffs) and make the
binutils dependency i386-only.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/05/16 13:57:49 espie Exp $
d27 3
a29 1
.if ${MACHINE_ARCH:Mi386}
d39 1
a39 1
.if ${MACHINE_ARCH:Mi386}
d122 1
a122 1
.if ${MACHINE_ARCH:Mi386}
@


1.14
log
@Add libiconv flavor for subtitles
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/05/15 23:16:59 espie Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		i386 macppc
d27 1
d29 1
d37 1
d39 1
d120 1
d123 1
@


1.13
log
@mplayer currently picks up mp3lame and ungif. So record them, until
someone deactivates the test, or figure out where they're needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/05/15 22:27:00 pvalchev Exp $
d56 1
a56 1
FLAVORS=	sdl ggi debug mad win32
d83 7
@


1.12
log
@MPlayer-0.90pre4; from Bjrn Sandell <biorn@@dce.chalmers.se>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/05/14 03:10:19 pvalchev Exp $
d31 3
a33 1
		dvdread.::devel/libdvdread
@


1.11
log
@enable libdvdread by default since it is small enough; espie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/05/12 18:50:46 niklas Exp $
d7 1
a7 1
DISTNAME=		MPlayer-0.90pre3
@


1.10
log
@shut off oss completely; ok pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/05/12 08:25:56 pvalchev Exp $
d30 2
a31 1
		gtk,gdk::x11/gtk+
d54 1
a54 1
FLAVORS=	sdl ggi debug mad win32 dvd
a104 6
.endif

.if ${FLAVOR:L:Mdvd}
LIB_DEPENDS+=	dvdread.::devel/libdvdread
.else
CONFIGURE_ARGS+=--disable-dvdread
@


1.9
log
@- Drop OSS flavor as there is enough better choices.
- Fix bogus configure check which would link mplayed with -lossaudio
  unconditionally on i386.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/05/12 08:16:24 pvalchev Exp $
d41 1
a41 1
		--disable-oss \
@


1.8
log
@First cut at macppc support.  (Some things may not work yet)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/05/10 19:50:31 pvalchev Exp $
d41 1
d53 1
a53 1
FLAVORS=	sdl ggi debug mad oss win32 dvd
d82 8
a89 2
.if ${FLAVOR:L:Moss}
CONFIGURE_ARGS+=--enable-ossaudio
a90 4
CONFIGURE_ARGS+=--disable-ossaudio
.endif

.if ${FLAVOR:L:Mwin32}
a91 1
pre-fetch:
d101 1
@


1.7
log
@- remove forceful optimizations, enable full auto-detect.  that will be a
problem for binary packages, but for now there is no better way...
- forgot to ifndef NO_WARNINGS for the USER_LDT warning
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/05/10 19:42:25 pvalchev Exp $
d3 2
a4 2
# XXX might not be hard to add more (macppc at least)
ONLY_FOR_ARCHS=		i386
d44 1
d47 4
@


1.6
log
@Print a warning that custom USER_LDT kernel is required for the win32 flavor.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/05/10 19:40:09 pvalchev Exp $
a46 3
# Optimizations
CONFIGURE_ARGS+= --enable-mmx --disable-sse --disable-sse2

d83 1
d90 1
@


1.5
log
@Mirror default skin package somewhere else since they keep changing the
checksum.  Thanks to everyone who pointed the issue out
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/05/10 19:26:14 pvalchev Exp $
d86 6
@


1.4
log
@provide new location for png headers; from aleksander.piotrowski@@piestrak.waw.pl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/05/09 20:03:18 pvalchev Exp $
d21 2
a22 1
MASTER_SITES0=		http://www2.mplayerhq.hu/MPlayer/Skin/
@


1.3
log
@oops, "dvd" flavor was missing from the list.  thanks Niels
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/05/09 14:01:42 pvalchev Exp $
d43 1
a43 1
		--with-extraincdir=${LOCALBASE}/include \
@


1.2
log
@enable using select() on the audio device; thanks Bjrn
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/05/09 05:19:10 pvalchev Exp $
d49 1
a49 1
FLAVORS=	sdl ggi debug mad oss win32
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d40 1
a40 1
		--disable-select \
@


1.1.1.1
log
@Import of mplayer-0.90pre3 - Movie Player

MPlayer is a movie player for LINUX (runs on many other Unices, and
non-x86 CPUs, see the documentation). It plays most MPEG, VOB, AVI,
VIVO, ASF/WMV, QT/MOV, FLI, NuppelVideo, yuv4mpeg, FILM, RoQ, and some
RealMedia files, supported by many native, XAnim, and Win32 DLL codecs.
You can watch VideoCD, SVCD, DVD, 3ivx, FLI, and even DivX movies too
(and you don't need the avifile library at all!).

Submitted by Bjrn Sandell <biorn@@dce.chalmers.se>, work also done by me

Withstanding issues: see how to deal with optimization detection at build
time so that binary packages can be created; check make it work on
platforms other than i386, etc. things can be done in-tree.
@
text
@@
