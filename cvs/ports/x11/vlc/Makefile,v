head	1.207;
access;
symbols
	OPENBSD_6_0:1.206.0.2
	OPENBSD_6_0_BASE:1.206
	OPENBSD_5_9:1.201.0.2
	OPENBSD_5_9_BASE:1.201
	OPENBSD_5_8:1.191.0.4
	OPENBSD_5_8_BASE:1.191
	OPENBSD_5_7:1.181.0.2
	OPENBSD_5_7_BASE:1.181
	OPENBSD_5_6:1.180.0.2
	OPENBSD_5_6_BASE:1.180
	OPENBSD_5_5:1.176.0.2
	OPENBSD_5_5_BASE:1.176
	OPENBSD_5_4:1.174.0.2
	OPENBSD_5_4_BASE:1.174
	OPENBSD_5_3:1.165.0.2
	OPENBSD_5_3_BASE:1.165
	OPENBSD_5_2:1.154.0.2
	OPENBSD_5_2_BASE:1.154
	OPENBSD_5_1_BASE:1.139
	OPENBSD_5_1:1.139.0.2
	OPENBSD_5_0:1.134.0.2
	OPENBSD_5_0_BASE:1.134
	OPENBSD_4_9:1.115.0.2
	OPENBSD_4_9_BASE:1.115
	OPENBSD_4_8:1.96.0.2
	OPENBSD_4_8_BASE:1.96
	OPENBSD_4_7:1.86.0.2
	OPENBSD_4_7_BASE:1.86
	OPENBSD_4_6:1.79.0.2
	OPENBSD_4_6_BASE:1.79
	OPENBSD_4_5:1.78.0.2
	OPENBSD_4_5_BASE:1.78
	OPENBSD_4_4:1.74.0.2
	OPENBSD_4_4_BASE:1.74
	OPENBSD_4_3:1.66.0.2
	OPENBSD_4_3_BASE:1.66
	OPENBSD_4_2:1.56.0.2
	OPENBSD_4_2_BASE:1.56
	OPENBSD_4_1:1.44.0.2
	OPENBSD_4_1_BASE:1.44
	OPENBSD_4_0:1.36.0.2
	OPENBSD_4_0_BASE:1.36
	OPENBSD_3_9:1.32.0.2
	OPENBSD_3_9_BASE:1.32
	OPENBSD_3_8:1.22.0.2
	OPENBSD_3_8_BASE:1.22
	OPENBSD_3_7:1.19.0.2
	OPENBSD_3_7_BASE:1.19
	OPENBSD_3_6:1.14.0.2
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.9.0.2
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	jolan_2003-jul-20:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.207
date	2017.02.18.17.32.38;	author ajacoutot;	state Exp;
branches;
next	1.206;
commitid	bw6Y0vDo3oixdVWL;

1.206
date	2016.06.06.08.34.38;	author ajacoutot;	state Exp;
branches;
next	1.205;
commitid	iGui3T3PdAXC4geI;

1.205
date	2016.05.04.04.48.26;	author ajacoutot;	state Exp;
branches;
next	1.204;
commitid	vF7WFdHsJaDIFCFe;

1.204
date	2016.03.18.23.12.22;	author naddy;	state Exp;
branches;
next	1.203;
commitid	KZAl4KEiw6a3Jixw;

1.203
date	2016.03.05.16.04.10;	author pascal;	state Exp;
branches;
next	1.202;
commitid	EJSWd5DpdfEFGBlM;

1.202
date	2016.03.03.12.01.17;	author ajacoutot;	state Exp;
branches;
next	1.201;
commitid	STj3Focr376bi7rt;

1.201
date	2016.01.23.08.09.50;	author ajacoutot;	state Exp;
branches;
next	1.200;
commitid	ufRKHj8FeDNhcQc8;

1.200
date	2016.01.17.17.29.12;	author sthen;	state Exp;
branches;
next	1.199;
commitid	bS2FIbTCCkF3XjOq;

1.199
date	2015.12.22.06.46.54;	author ajacoutot;	state Exp;
branches;
next	1.198;
commitid	peJnOG67nOjChy7m;

1.198
date	2015.12.02.12.46.15;	author jca;	state Exp;
branches;
next	1.197;
commitid	3OuIBYdgEK5XS2dl;

1.197
date	2015.11.12.01.21.32;	author jca;	state Exp;
branches;
next	1.196;
commitid	GzyAGLS6vuasojyb;

1.196
date	2015.11.11.20.28.56;	author jca;	state Exp;
branches;
next	1.195;
commitid	DFk3zoA1uMx0VgYv;

1.195
date	2015.10.28.08.44.16;	author jasper;	state Exp;
branches;
next	1.194;
commitid	bgzfLPETxCHKVirQ;

1.194
date	2015.10.11.15.22.20;	author ajacoutot;	state Exp;
branches;
next	1.193;
commitid	XaXcY0gceg8wAV0g;

1.193
date	2015.10.07.05.31.16;	author ajacoutot;	state Exp;
branches;
next	1.192;
commitid	MKDJ8reVqPYlynwr;

1.192
date	2015.10.01.15.16.14;	author ajacoutot;	state Exp;
branches;
next	1.191;
commitid	6BarX7ze5AnU4Pqm;

1.191
date	2015.06.30.09.02.54;	author sthen;	state Exp;
branches
	1.191.4.1;
next	1.190;
commitid	cfT6RuRBzKtaH9mW;

1.190
date	2015.06.20.19.35.39;	author ajacoutot;	state Exp;
branches;
next	1.189;
commitid	XKqBtq74yjkOJ9ym;

1.189
date	2015.05.24.07.16.31;	author ajacoutot;	state Exp;
branches;
next	1.188;
commitid	ppIzpTyUJwYSsnNW;

1.188
date	2015.05.23.07.19.44;	author ajacoutot;	state Exp;
branches;
next	1.187;
commitid	67tmlJA22lbUBunp;

1.187
date	2015.05.22.05.43.08;	author ajacoutot;	state Exp;
branches;
next	1.186;
commitid	C0M8TSfHp1a0YybE;

1.186
date	2015.05.06.16.39.22;	author ajacoutot;	state Exp;
branches;
next	1.185;
commitid	8WbHp9C2okDdxlkA;

1.185
date	2015.04.30.06.32.21;	author ajacoutot;	state Exp;
branches;
next	1.184;
commitid	XOAdGwSQ6H9ZhKOk;

1.184
date	2015.04.24.13.10.04;	author ajacoutot;	state Exp;
branches;
next	1.183;
commitid	Z12M3aV5Ivdra1zr;

1.183
date	2015.04.04.09.21.08;	author ajacoutot;	state Exp;
branches;
next	1.182;
commitid	kS3kwKZogsvzYmEY;

1.182
date	2015.03.27.08.16.24;	author ajacoutot;	state Exp;
branches;
next	1.181;
commitid	BUhOiEl2FUSRKwq7;

1.181
date	2014.10.15.17.33.51;	author jasper;	state Exp;
branches;
next	1.180;
commitid	OQNQxUz9Z5La8jxd;

1.180
date	2014.05.14.08.59.52;	author sthen;	state Exp;
branches;
next	1.179;

1.179
date	2014.04.28.17.35.35;	author brad;	state Exp;
branches;
next	1.178;

1.178
date	2014.04.12.20.41.26;	author brad;	state Exp;
branches;
next	1.177;

1.177
date	2014.03.16.11.38.47;	author brad;	state Exp;
branches;
next	1.176;

1.176
date	2013.11.07.00.30.07;	author brad;	state Exp;
branches;
next	1.175;

1.175
date	2013.08.19.10.00.15;	author brad;	state Exp;
branches;
next	1.174;

1.174
date	2013.07.04.08.11.08;	author zhuk;	state Exp;
branches;
next	1.173;

1.173
date	2013.06.04.18.42.00;	author naddy;	state Exp;
branches;
next	1.172;

1.172
date	2013.06.03.22.36.00;	author brad;	state Exp;
branches;
next	1.171;

1.171
date	2013.05.31.15.35.15;	author ajacoutot;	state Exp;
branches;
next	1.170;

1.170
date	2013.04.11.17.58.42;	author brad;	state Exp;
branches;
next	1.169;

1.169
date	2013.04.04.16.49.56;	author brad;	state Exp;
branches;
next	1.168;

1.168
date	2013.03.27.13.34.06;	author brad;	state Exp;
branches;
next	1.167;

1.167
date	2013.03.11.11.46.16;	author espie;	state Exp;
branches;
next	1.166;

1.166
date	2013.03.09.09.32.03;	author brad;	state Exp;
branches;
next	1.165;

1.165
date	2013.02.09.14.49.54;	author sthen;	state Exp;
branches;
next	1.164;

1.164
date	2013.02.06.13.07.05;	author brad;	state Exp;
branches;
next	1.163;

1.163
date	2013.01.03.03.18.21;	author brad;	state Exp;
branches;
next	1.162;

1.162
date	2013.01.03.03.05.47;	author brad;	state Exp;
branches;
next	1.161;

1.161
date	2013.01.02.10.14.06;	author sthen;	state Exp;
branches;
next	1.160;

1.160
date	2012.12.25.23.14.03;	author brad;	state Exp;
branches;
next	1.159;

1.159
date	2012.12.16.21.26.22;	author brad;	state Exp;
branches;
next	1.158;

1.158
date	2012.10.22.20.18.44;	author brad;	state Exp;
branches;
next	1.157;

1.157
date	2012.08.26.07.16.54;	author ajacoutot;	state Exp;
branches;
next	1.156;

1.156
date	2012.08.07.07.35.09;	author sthen;	state Exp;
branches;
next	1.155;

1.155
date	2012.08.05.09.17.00;	author sthen;	state Exp;
branches;
next	1.154;

1.154
date	2012.07.08.21.33.45;	author ajacoutot;	state Exp;
branches;
next	1.153;

1.153
date	2012.07.06.12.51.11;	author sthen;	state Exp;
branches;
next	1.152;

1.152
date	2012.06.20.06.44.28;	author ratchov;	state Exp;
branches;
next	1.151;

1.151
date	2012.06.15.08.30.24;	author ajacoutot;	state Exp;
branches;
next	1.150;

1.150
date	2012.06.02.12.06.37;	author ajacoutot;	state Exp;
branches;
next	1.149;

1.149
date	2012.05.31.07.04.38;	author ajacoutot;	state Exp;
branches;
next	1.148;

1.148
date	2012.05.28.18.44.26;	author ajacoutot;	state Exp;
branches;
next	1.147;

1.147
date	2012.05.03.06.51.25;	author ajacoutot;	state Exp;
branches;
next	1.146;

1.146
date	2012.04.24.20.47.39;	author naddy;	state Exp;
branches;
next	1.145;

1.145
date	2012.04.23.13.47.08;	author ajacoutot;	state Exp;
branches;
next	1.144;

1.144
date	2012.04.04.12.07.50;	author landry;	state Exp;
branches;
next	1.143;

1.143
date	2012.03.29.15.00.19;	author ajacoutot;	state Exp;
branches;
next	1.142;

1.142
date	2012.03.23.10.36.10;	author ajacoutot;	state Exp;
branches;
next	1.141;

1.141
date	2012.03.21.08.27.29;	author ajacoutot;	state Exp;
branches;
next	1.140;

1.140
date	2012.02.17.22.07.16;	author sthen;	state Exp;
branches;
next	1.139;

1.139
date	2011.12.23.15.01.59;	author sthen;	state Exp;
branches;
next	1.138;

1.138
date	2011.12.03.23.37.39;	author ajacoutot;	state Exp;
branches;
next	1.137;

1.137
date	2011.11.16.13.33.15;	author phessler;	state Exp;
branches;
next	1.136;

1.136
date	2011.10.21.18.20.14;	author espie;	state Exp;
branches;
next	1.135;

1.135
date	2011.09.16.12.29.17;	author espie;	state Exp;
branches;
next	1.134;

1.134
date	2011.07.17.06.35.42;	author ajacoutot;	state Exp;
branches;
next	1.133;

1.133
date	2011.07.01.11.10.53;	author sthen;	state Exp;
branches;
next	1.132;

1.132
date	2011.06.24.11.17.05;	author sthen;	state Exp;
branches;
next	1.131;

1.131
date	2011.06.24.07.19.08;	author dcoppa;	state Exp;
branches;
next	1.130;

1.130
date	2011.06.13.23.51.12;	author sthen;	state Exp;
branches;
next	1.129;

1.129
date	2011.05.16.17.37.59;	author jolan;	state Exp;
branches;
next	1.128;

1.128
date	2011.05.11.09.08.07;	author dcoppa;	state Exp;
branches;
next	1.127;

1.127
date	2011.05.08.16.20.16;	author dcoppa;	state Exp;
branches;
next	1.126;

1.126
date	2011.05.06.08.18.54;	author dcoppa;	state Exp;
branches;
next	1.125;

1.125
date	2011.05.04.14.58.39;	author dcoppa;	state Exp;
branches;
next	1.124;

1.124
date	2011.04.21.07.07.26;	author ajacoutot;	state Exp;
branches;
next	1.123;

1.123
date	2011.04.19.08.25.24;	author sthen;	state Exp;
branches;
next	1.122;

1.122
date	2011.04.16.20.18.50;	author sthen;	state Exp;
branches;
next	1.121;

1.121
date	2011.04.11.15.11.28;	author sthen;	state Exp;
branches;
next	1.120;

1.120
date	2011.04.04.07.43.22;	author dcoppa;	state Exp;
branches;
next	1.119;

1.119
date	2011.04.03.21.41.38;	author sthen;	state Exp;
branches;
next	1.118;

1.118
date	2011.03.26.10.05.24;	author sthen;	state Exp;
branches;
next	1.117;

1.117
date	2011.03.25.01.07.00;	author sthen;	state Exp;
branches;
next	1.116;

1.116
date	2011.03.12.21.19.13;	author jakemsr;	state Exp;
branches;
next	1.115;

1.115
date	2011.02.02.09.34.23;	author ajacoutot;	state Exp;
branches
	1.115.2.1;
next	1.114;

1.114
date	2011.01.22.09.10.22;	author ajacoutot;	state Exp;
branches;
next	1.113;

1.113
date	2011.01.15.10.56.51;	author jasper;	state Exp;
branches;
next	1.112;

1.112
date	2011.01.14.19.46.46;	author jasper;	state Exp;
branches;
next	1.111;

1.111
date	2011.01.02.06.52.42;	author ajacoutot;	state Exp;
branches;
next	1.110;

1.110
date	2010.12.31.06.58.18;	author ajacoutot;	state Exp;
branches;
next	1.109;

1.109
date	2010.11.22.10.16.09;	author espie;	state Exp;
branches;
next	1.108;

1.108
date	2010.11.22.08.37.05;	author espie;	state Exp;
branches;
next	1.107;

1.107
date	2010.11.19.08.59.32;	author jasper;	state Exp;
branches;
next	1.106;

1.106
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.105;

1.105
date	2010.10.28.11.55.16;	author steven;	state Exp;
branches;
next	1.104;

1.104
date	2010.10.24.21.15.35;	author ajacoutot;	state Exp;
branches;
next	1.103;

1.103
date	2010.10.19.08.13.59;	author espie;	state Exp;
branches;
next	1.102;

1.102
date	2010.10.11.08.19.59;	author jasper;	state Exp;
branches;
next	1.101;

1.101
date	2010.09.29.11.30.03;	author landry;	state Exp;
branches;
next	1.100;

1.100
date	2010.09.21.12.12.12;	author sthen;	state Exp;
branches;
next	1.99;

1.99
date	2010.09.17.12.15.20;	author sthen;	state Exp;
branches;
next	1.98;

1.98
date	2010.09.12.22.35.01;	author jakemsr;	state Exp;
branches;
next	1.97;

1.97
date	2010.08.25.23.27.21;	author sthen;	state Exp;
branches;
next	1.96;

1.96
date	2010.07.30.12.03.09;	author ajacoutot;	state Exp;
branches
	1.96.2.1;
next	1.95;

1.95
date	2010.07.30.06.59.00;	author ajacoutot;	state Exp;
branches;
next	1.94;

1.94
date	2010.06.20.13.56.11;	author sthen;	state Exp;
branches;
next	1.93;

1.93
date	2010.06.19.09.46.42;	author sthen;	state Exp;
branches;
next	1.92;

1.92
date	2010.06.17.09.17.52;	author dcoppa;	state Exp;
branches;
next	1.91;

1.91
date	2010.06.17.07.42.16;	author dcoppa;	state Exp;
branches;
next	1.90;

1.90
date	2010.05.16.08.37.48;	author sthen;	state Exp;
branches;
next	1.89;

1.89
date	2010.05.09.00.16.26;	author sthen;	state Exp;
branches;
next	1.88;

1.88
date	2010.05.05.08.43.35;	author edd;	state Exp;
branches;
next	1.87;

1.87
date	2010.04.26.20.09.18;	author steven;	state Exp;
branches;
next	1.86;

1.86
date	2010.02.26.18.10.51;	author espie;	state Exp;
branches;
next	1.85;

1.85
date	2009.12.21.20.46.03;	author ajacoutot;	state Exp;
branches;
next	1.84;

1.84
date	2009.11.24.09.01.47;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2009.08.11.08.42.09;	author ajacoutot;	state Exp;
branches;
next	1.82;

1.82
date	2009.07.27.21.44.15;	author martynas;	state Exp;
branches;
next	1.81;

1.81
date	2009.07.19.22.49.12;	author sthen;	state Exp;
branches;
next	1.80;

1.80
date	2009.07.19.16.28.31;	author sthen;	state Exp;
branches;
next	1.79;

1.79
date	2009.04.14.19.52.08;	author kili;	state Exp;
branches;
next	1.78;

1.78
date	2009.01.16.04.11.18;	author jakemsr;	state Exp;
branches;
next	1.77;

1.77
date	2008.09.15.22.14.23;	author jakemsr;	state Exp;
branches;
next	1.76;

1.76
date	2008.09.05.01.01.00;	author brad;	state Exp;
branches;
next	1.75;

1.75
date	2008.09.04.22.58.23;	author brad;	state Exp;
branches;
next	1.74;

1.74
date	2008.07.15.16.19.15;	author brad;	state Exp;
branches;
next	1.73;

1.73
date	2008.07.09.17.28.42;	author sthen;	state Exp;
branches;
next	1.72;

1.72
date	2008.07.09.02.17.12;	author jakemsr;	state Exp;
branches;
next	1.71;

1.71
date	2008.06.09.22.55.43;	author sthen;	state Exp;
branches;
next	1.70;

1.70
date	2008.05.16.05.54.09;	author bernd;	state Exp;
branches;
next	1.69;

1.69
date	2008.05.11.18.12.40;	author jakemsr;	state Exp;
branches;
next	1.68;

1.68
date	2008.04.04.00.53.01;	author jakemsr;	state Exp;
branches;
next	1.67;

1.67
date	2008.03.24.04.46.26;	author jakemsr;	state Exp;
branches;
next	1.66;

1.66
date	2008.03.02.02.27.04;	author jakemsr;	state Exp;
branches;
next	1.65;

1.65
date	2008.02.02.09.51.05;	author steven;	state Exp;
branches;
next	1.64;

1.64
date	2008.01.23.16.34.30;	author martynas;	state Exp;
branches;
next	1.63;

1.63
date	2007.12.11.11.07.54;	author jakemsr;	state Exp;
branches;
next	1.62;

1.62
date	2007.11.25.14.21.57;	author bernd;	state Exp;
branches;
next	1.61;

1.61
date	2007.11.17.20.53.34;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2007.11.11.01.37.54;	author jakemsr;	state Exp;
branches;
next	1.59;

1.59
date	2007.10.03.04.12.43;	author jakemsr;	state Exp;
branches;
next	1.58;

1.58
date	2007.09.28.07.59.06;	author jakemsr;	state Exp;
branches;
next	1.57;

1.57
date	2007.09.15.20.04.25;	author merdely;	state Exp;
branches;
next	1.56;

1.56
date	2007.08.07.15.18.22;	author steven;	state Exp;
branches;
next	1.55;

1.55
date	2007.06.29.21.33.08;	author martynas;	state Exp;
branches;
next	1.54;

1.54
date	2007.06.21.08.12.14;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2007.06.18.23.14.20;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2007.06.10.15.03.50;	author naddy;	state Exp;
branches;
next	1.51;

1.51
date	2007.06.05.01.53.04;	author jolan;	state Exp;
branches;
next	1.50;

1.50
date	2007.05.25.16.24.49;	author jakemsr;	state Exp;
branches;
next	1.49;

1.49
date	2007.04.22.13.21.11;	author aanriot;	state Exp;
branches;
next	1.48;

1.48
date	2007.04.20.07.21.53;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2007.04.20.07.21.09;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2007.04.19.09.22.09;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2007.04.08.17.34.20;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2007.02.15.17.15.42;	author steven;	state Exp;
branches
	1.44.2.1;
next	1.43;

1.43
date	2007.01.04.11.29.59;	author mbalmer;	state Exp;
branches;
next	1.42;

1.42
date	2006.12.24.01.57.16;	author jolan;	state Exp;
branches;
next	1.41;

1.41
date	2006.12.23.13.31.30;	author jolan;	state Exp;
branches;
next	1.40;

1.40
date	2006.12.16.12.22.36;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2006.11.03.15.15.07;	author jolan;	state Exp;
branches;
next	1.38;

1.38
date	2006.10.13.02.08.22;	author jolan;	state Exp;
branches;
next	1.37;

1.37
date	2006.09.22.02.23.13;	author pvalchev;	state Exp;
branches;
next	1.36;

1.36
date	2006.08.01.10.50.19;	author espie;	state Exp;
branches
	1.36.2.1;
next	1.35;

1.35
date	2006.07.23.11.44.27;	author steven;	state Exp;
branches;
next	1.34;

1.34
date	2006.03.22.01.33.06;	author jolan;	state Exp;
branches;
next	1.33;

1.33
date	2006.03.20.05.53.18;	author jakemsr;	state Exp;
branches;
next	1.32;

1.32
date	2005.12.24.09.01.17;	author jolan;	state Exp;
branches;
next	1.31;

1.31
date	2005.12.22.16.36.17;	author jolan;	state Exp;
branches;
next	1.30;

1.30
date	2005.12.22.05.32.50;	author jolan;	state Exp;
branches;
next	1.29;

1.29
date	2005.12.22.04.45.38;	author jolan;	state Exp;
branches;
next	1.28;

1.28
date	2005.12.22.03.45.36;	author jolan;	state Exp;
branches;
next	1.27;

1.27
date	2005.11.15.23.05.30;	author wilfried;	state Exp;
branches;
next	1.26;

1.26
date	2005.11.10.12.14.05;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2005.11.07.13.41.27;	author kurt;	state Exp;
branches;
next	1.24;

1.24
date	2005.11.06.00.33.44;	author jolan;	state Exp;
branches;
next	1.23;

1.23
date	2005.11.03.19.50.06;	author jolan;	state Exp;
branches;
next	1.22;

1.22
date	2005.07.31.19.07.10;	author jolan;	state Exp;
branches;
next	1.21;

1.21
date	2005.07.09.00.36.43;	author jolan;	state Exp;
branches;
next	1.20;

1.20
date	2005.06.23.00.54.40;	author jolan;	state Exp;
branches;
next	1.19;

1.19
date	2005.02.20.03.28.27;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2004.12.30.16.14.35;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2004.12.16.07.40.20;	author jolan;	state Exp;
branches;
next	1.16;

1.16
date	2004.10.05.20.49.08;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2004.09.15.19.23.50;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2004.08.10.11.16.44;	author xsa;	state Exp;
branches;
next	1.13;

1.13
date	2004.08.04.16.39.21;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2004.07.10.01.49.42;	author jolan;	state Exp;
branches;
next	1.11;

1.11
date	2004.04.28.01.30.53;	author jolan;	state Exp;
branches;
next	1.10;

1.10
date	2004.04.18.00.42.14;	author jolan;	state Exp;
branches;
next	1.9;

1.9
date	2003.12.10.21.28.59;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2003.11.04.07.48.26;	author jolan;	state Exp;
branches;
next	1.7;

1.7
date	2003.10.18.01.13.17;	author jolan;	state Exp;
branches;
next	1.6;

1.6
date	2003.08.18.22.14.56;	author jolan;	state Exp;
branches;
next	1.5;

1.5
date	2003.08.16.20.36.12;	author jolan;	state Exp;
branches;
next	1.4;

1.4
date	2003.08.15.14.25.59;	author jolan;	state Exp;
branches;
next	1.3;

1.3
date	2003.08.03.03.41.20;	author jolan;	state Exp;
branches;
next	1.2;

1.2
date	2003.08.02.10.29.28;	author jolan;	state Exp;
branches;
next	1.1;

1.1
date	2003.07.20.21.09.29;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.07.20.21.09.29;	author jolan;	state Exp;
branches;
next	;

1.36.2.1
date	2007.06.26.19.26.04;	author sturm;	state Exp;
branches;
next	;

1.44.2.1
date	2007.06.26.19.19.33;	author sturm;	state Exp;
branches;
next	;

1.96.2.1
date	2011.01.02.13.12.34;	author jasper;	state Exp;
branches;
next	1.96.2.2;

1.96.2.2
date	2011.01.14.19.47.48;	author jasper;	state Exp;
branches;
next	1.96.2.3;

1.96.2.3
date	2011.01.14.21.52.37;	author jasper;	state Exp;
branches;
next	1.96.2.4;

1.96.2.4
date	2011.01.22.09.11.34;	author ajacoutot;	state Exp;
branches;
next	;

1.115.2.1
date	2011.03.25.09.06.35;	author jasper;	state Exp;
branches;
next	1.115.2.2;

1.115.2.2
date	2011.04.11.16.57.57;	author jasper;	state Exp;
branches;
next	1.115.2.3;

1.115.2.3
date	2011.07.17.17.50.55;	author jasper;	state Exp;
branches;
next	;

1.191.4.1
date	2015.10.28.08.47.46;	author jasper;	state Exp;
branches;
next	;
commitid	KnzfLNePPNXXCpJV;


desc
@@


1.207
log
@idn -> idn2 after gnutls WANTLIB change.
@
text
@# $OpenBSD: Makefile,v 1.206 2016/06/06 08:34:38 ajacoutot Exp $

COMMENT-main=	VideoLAN client; multimedia player
COMMENT-jack=	JACK audio output module for VLC

V=		2.2.4
DISTNAME=	vlc-${V}
PKGNAME-main=	${DISTNAME}
PKGNAME-jack=	vlc-jack-${V}
CATEGORIES=	x11
MASTER_SITES=	https://download.videolan.org/pub/videolan/vlc/${V}/
EXTRACT_SUFX=	.tar.xz
REVISION-main=	0
REVISION-jack=	0

SHARED_LIBS=	vlc	3.0 \
		vlccore	3.0

HOMEPAGE=	http://www.videolan.org/vlc/

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# LGPLv2.1+ and GPLv2+
PERMIT_PACKAGE_CDROM=	patents
PERMIT_PACKAGE_FTP=	Yes

WANTLIB-common=	c dbus-1 idn m pthread ${MODGETTEXT_WANTLIB}
# v4l2 is dlopen'd
WANTLIB-main=	EGL GL ICE lib/qt4/QtGui QtCore SM SDL SDL_image X11 \
		Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama Xpm \
		Xrender Xrandr ass atk-1.0 avcodec avformat avutil bluray \
		cairo cddb croco-0.6 dvbpsi dvdnav dvdread ebml expat \
		ffi fontconfig freetype fribidi gcrypt gdk-x11-2.0 \
		gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gmp gnutls \
		gobject-2.0 gpg-error graphite2 gthread-2.0 gtk-x11-2.0 \
		harfbuzz hogweed jpeg lzma matroska nettle notify opus \
		ogg p11-kit pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre \
		pixman-1 png postproc pthread-stubs rsvg-2 samplerate sndio \
		speex speexdsp stdc++ swscale tag tar tasn1 tiff usbhid \
		v4l2 vorbis vorbisenc webp x264 x265 xcb-composite xcb-keysyms \
		xcb-randr xcb-render xcb-shape xcb-shm xcb-xfixes xcb-xv \
		xcb xml2 z X11-xcb Xxf86vm drm gbm glapi xcb-dri2 xcb-glx \
		idn2 unistring ${WANTLIB-common}
WANTLIB-jack=	db jack vlccore ${WANTLIB-common}

AUTOCONF_VERSION= 2.69
AUTOMAKE_VERSION= 1.15

MODULES=	devel/gettext \
		lang/clang \
		x11/qt4
MODCLANG_ARCHS=	amd64 i386
MODCLANG_LANGS=	c++

LIB_DEPENDS-main= ${MODQT4_LIB_DEPENDS} \
		${MODGETTEXT_LIB_DEPENDS} \
		archivers/libtar \
		audio/libcddb \
		audio/libsamplerate \
		audio/libvorbis \
		audio/opus \
		audio/speex \
		audio/taglib \
		devel/fribidi \
		devel/libdvdread \
		devel/libidn \
		devel/libnotify \
		devel/sdl \
		devel/sdl-image \
		graphics/ffmpeg \
		graphics/libdvbpsi \
		graphics/png \
		multimedia/libass \
		multimedia/libbluray>=0.8.0 \
		multimedia/libdvdnav \
		multimedia/libmatroska \
		multimedia/libv4l \
		multimedia/x264 \
		multimedia/x265 \
		security/gnutls \
		security/libgcrypt \
		textproc/libebml \
		textproc/libxml \
		x11/dbus \
		x11/gtk+2
LIB_DEPENDS-jack= ${MODGETTEXT_LIB_DEPENDS} \
		${BUILD_PKGPATH} \
		audio/jack
BUILD_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS} \
		devel/bison \
		devel/libtool
RUN_DEPENDS-main= devel/desktop-file-utils \
		x11/gtk+3,-guic
RUN_DEPENDS-jack= ${BUILD_PKGPATH}

MAKE_ENV=	AUTOCONF_VERSION=${AUTOCONF_VERSION} AUTOMAKE_VERSION=${AUTOMAKE_VERSION}

USE_GMAKE=	Yes
# Fails to link _pic libs properly resulting in undefined symbols in the live555 plugin
USE_LIBTOOL=	gnu
LIBTOOL_FLAGS=	--tag=disable-static
CONFIGURE_STYLE= gnu
MODGNU_CONFIG_GUESS_DIRS= ${WRKSRC}/autotools
CONFIGURE_ARGS+=--disable-a52 \
		--disable-alsa \
		--disable-altivec \
		--disable-bonjour \
		--disable-caca \
		--disable-chromaprint \
		--disable-crystalhd \
		--disable-dc1394 \
		--disable-dca \
		--disable-decklink \
		--disable-dv1394 \
		--disable-faad \
		--disable-flac \
		--disable-fluidsynth \
		--disable-freerdp \
		--disable-gme \
		--disable-gnomevfs \
		--disable-goom \
		--disable-gst-decode \
		--disable-kate \
		--disable-libmpeg2 \
		--disable-libva \
		--disable-linsys \
		--disable-lua \
		--disable-mad \
		--disable-mfx \
		--disable-mmal-codec \
		--disable-mod \
		--disable-mpc \
		--disable-mtp \
		--disable-neon \
		--disable-opencv \
		--disable-projectm \
		--disable-pulse \
		--disable-schroedinger \
		--disable-sftp \
		--disable-shine \
		--disable-shout \
		--disable-sid \
		--disable-smbclient \
		--disable-svg \
		--disable-theora \
		--disable-tiger \
		--disable-twolame \
		--disable-udev \
		--disable-upnp \
		--disable-vdpau \
		--disable-vnc \
		--disable-vpx \
		--disable-vsxu \
		--disable-zvbi \
		--enable-realrtsp \
		--without-contrib \
		--with-kde-solid=${LOCALBASE}/share/apps/solid/actions

# too old for now
CONFIGURE_ARGS+= --disable-live555

CONFIGURE_ENV+=	CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
		LIVE555_PREFIX="${LOCALBASE}/live" \
		PKG_CONFIG_PATH="${LOCALBASE}/lib/qt4/pkgconfig" \
		ac_cv_header_execinfo_h=no

PSEUDO_FLAVORS=	no_jack
FLAVOR?=

MULTI_PACKAGES=	-main

.if !${FLAVOR:Mno_jack}
MULTI_PACKAGES+=-jack
.endif

.include <bsd.port.arch.mk>

.if !${BUILD_PACKAGES:M-jack}
CONFIGURE_ARGS+=--disable-jack
.endif

.if ${MACHINE_ARCH} == "amd64"
PKG_ARGS+=-Damd64=1
.else
PKG_ARGS+=-Damd64=0
.endif

.if ${MACHINE_ARCH} == "i386"
PKG_ARGS+=-Di386=1
.else
PKG_ARGS+=-Di386=0
.endif

pre-configure:
	@@cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
	    ./bootstrap

post-install:
	@@find ${PREFIX}/lib/vlc -name '*.la' -print | xargs rm

.include <bsd.port.mk>
@


1.206
log
@Update to vlc-2.2.4.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2016/05/04 04:48:26 ajacoutot Exp $
d13 2
d43 1
a43 1
		${WANTLIB-common}
@


1.205
log
@Update to vlc-2.2.3.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2016/03/18 23:12:22 naddy Exp $
d6 1
a6 1
V=		2.2.3
@


1.204
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2016/03/05 16:04:10 pascal Exp $
d6 1
a6 1
V=		2.2.2
a12 1
REVISION-main=	0
@


1.203
log
@Bump REVISION for lang/clang MODULE changes.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.202 2016/03/03 12:01:17 ajacoutot Exp $

SHARED_ONLY=	Yes
@


1.202
log
@Update to vlc-2.2.2.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2016/01/23 08:09:50 ajacoutot Exp $
d15 1
@


1.201
log
@Enable the libv4l2 support in VLC.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2016/01/17 17:29:12 sthen Exp $
d8 1
a8 1
V=		2.2.1
a11 1
REVISION-main=	6
@


1.200
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2015/12/22 06:46:54 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	5
d29 1
d41 1
a41 1
		vorbis vorbisenc webp x264 x265 xcb-composite xcb-keysyms \
d78 1
a151 1
		--disable-v4l2 \
@


1.199
log
@Only use __builtin_parity on x86; should unbreak alpha, powerpc, sparc64.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2015/12/02 12:46:15 jca Exp $
d12 1
a12 1
REVISION-main=	4
d42 2
a43 1
		xcb xml2 z ${WANTLIB-common}
@


1.198
log
@Mark as BROKEN on alpha: undefined reference to __builtin_parity
@
text
@d1 1
a1 5
# $OpenBSD: Makefile,v 1.197 2015/11/12 01:21:32 jca Exp $

BROKEN-alpha=	undefined reference to __builtin_parity
BROKEN-powerpc=	undefined reference to __builtin_parity
BROKEN-sparc64=	undefined reference to __builtin_parity
d12 1
a12 1
REVISION-main=	3
@


1.197
log
@Also BROKEN on sparc64 (no __builtin_parity)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2015/11/11 20:28:56 jca Exp $
d3 1
@


1.196
log
@BROKEN on powerpc: undefined reference to __builtin_parity
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2015/10/28 08:44:16 jasper Exp $
d4 1
@


1.195
log
@Security fix for CVE-2015-5949

ok brad (MAINTAINER)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.194 2015/10/11 15:22:20 ajacoutot Exp $
@


1.194
log
@Missing LIB_DEPENDS on devel/libidn.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2015/10/07 05:31:16 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	2
@


1.193
log
@Sync WANTLIB after the recent libass update.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2015/10/01 15:16:14 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	1
d65 1
@


1.192
log
@Enable x265 support.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2015/06/30 09:02:54 sthen Exp $
d12 1
a12 1
REVISION-main=	0
d32 2
a33 2
		cairo cddb croco-0.6 dvbpsi dvdnav dvdread ebml enca \
		expat ffi fontconfig freetype fribidi gcrypt gdk-x11-2.0 \
@


1.191
log
@remove the BROKEN-amd64 marker; there is a problem, seemingly with ld.so
(_dl_cache_grpsym_list in backtrace) and it affects more than just
amd64, but the failure doesn't happen every time, so removing the BROKEN
marker at least gives us a chance to reattempt builds if it fails.

espie@@ ajacoutot@@ ok with removing the BROKEN marker for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2015/06/20 19:35:39 ajacoutot Exp $
d12 1
d40 1
a40 1
		vorbis vorbisenc webp x264 xcb-composite xcb-keysyms \
d76 1
a152 1
		--disable-x265 \
@


1.191.4.1
log
@Security fix for CVE-2015-5949

ok brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2015/06/30 09:02:54 sthen Exp $
a14 2

REVISION-main=	0
@


1.190
log
@Mark BROKEN-amd64.
It segfaults at build time 4 bulks out of 5 and espie@@ sees the same on
his build envrironment as well.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.189 2015/05/24 07:16:31 ajacoutot Exp $

BROKEN-amd64=	Bus error (core dumped)
@


1.189
log
@Update to vlc-2.2.1.

from brad (maintainer)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.188 2015/05/23 07:19:44 ajacoutot Exp $
@


1.188
log
@Tighten up dependency on libbluray.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2015/05/22 05:43:08 ajacoutot Exp $
d8 1
a8 1
V=		2.0.10
a11 2
REVISION-main=	7
REVISION-jack=	3
d13 1
a13 1
MASTER_SITES=	http://download.videolan.org/pub/videolan/vlc/${V}/
d16 2
a17 2
SHARED_LIBS=	vlc	2.0 \
		vlccore	2.1
d27 15
a41 14
WANTLIB-common=	c dbus-1 m pthread ${MODGETTEXT_WANTLIB}
WANTLIB-main=	GL ICE lib/qt4/QtGui QtCore SM SDL SDL_image X11 Xcomposite \
		Xcursor Xdamage Xext Xfixes Xi Xinerama Xpm Xrandr Xrender \
		ass atk-1.0 avcodec avformat avutil bluray cairo cddb dvbpsi \
		dvdnav dvdread ebml enca expat ffi fontconfig freetype fribidi \
		gcrypt gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 \
		gmp gnutls gobject-2.0 gpg-error graphite2 gthread-2.0 \
		gtk-x11-2.0 harfbuzz hogweed jpeg lzma matroska nettle notify \
		opus ogg p11-kit pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre \
		pixman-1 png postproc pthread-stubs samplerate sndio speex \
		speexdsp stdc++ swscale tag tar tasn1 tiff usbhid vorbis \
		vorbisenc webp x264 xcb-composite xcb-keysyms xcb-randr \
		xcb-render xcb-shape xcb-shm xcb-xfixes xcb-xv xcb xml2 z \
		${WANTLIB-common}
d45 1
a45 1
AUTOMAKE_VERSION= 1.11
d84 1
a84 2
BUILD_DEPENDS=	net/livemedia>=20120204p0 \
		${MODGNU_AUTOCONF_DEPENDS} \
a93 2
CPPFLAGS=	-I${X11BASE}/include -I${LOCALBASE}/include

d105 1
d110 2
a111 2
		--disable-dirac \
		--disable-dv \
d114 1
d118 1
a120 1
		--disable-libproxy \
d125 2
d131 1
a132 1
		--disable-portaudio \
d135 2
d139 1
a139 1
		--disable-smb \
d147 5
a152 1
		--enable-real \
a154 1
		--without-tuning \
d156 7
a162 5
CONFIGURE_ENV+=	CPPFLAGS="${CPPFLAGS}" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib -L${LOCALBASE}/live/liveMedia \
		    -L${LOCALBASE}/live/groupsock -L${LOCALBASE}/live/BasicUsageEnvironment \
		    -L${LOCALBASE}/live/UsageEnvironment" \
		LOCALBASE="${LOCALBASE}" \
a193 1
	@@cp ${FILESDIR}/sndio.c ${WRKSRC}/modules/audio_output
@


1.187
log
@Build the C++ code within VLC with Clang now as well now that binutils
2.17 is enabled and allows the code to be linked.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2015/05/06 16:39:22 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	6
d64 2
a65 2
		devel/libdvdread>=4.2.0 \
		devel/libnotify>=0.7.2 \
d68 1
a68 1
		graphics/ffmpeg>=20121026 \
d72 2
a73 2
		multimedia/libbluray \
		multimedia/libdvdnav>=4.2.0 \
@


1.186
log
@Sync WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2015/04/30 06:32:21 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	5
d52 1
@


1.185
log
@Garbage collect old code for older FFmpeg releases and some cleanup.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2015/04/24 13:10:04 ajacoutot Exp $
d13 1
a13 1
REVISION-jack=	2
d43 1
a43 1
WANTLIB-jack=	jack vlccore ${WANTLIB-common}
@


1.184
log
@Disable the Dirac support via schroedinger.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2015/04/04 09:21:08 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	4
@


1.183
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2015/03/27 08:16:24 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	3
d36 7
a42 7
		gtk-x11-2.0 harfbuzz hogweed jpeg matroska nettle notify opus \
		orc-0.4 ogg p11-kit pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre \
		pixman-1 png postproc pthread-stubs samplerate \
		schroedinger-1.0>=2.0 sndio speex speexdsp stdc++ swscale tag tar \
		tasn1 tiff usbhid vorbis vorbisenc webp x264 xcb-composite \
		xcb-keysyms xcb-randr xcb-render xcb-shape xcb-shm xcb-xfixes \
		xcb-xv xcb xml2 z ${WANTLIB-common}
a73 1
		multimedia/schroedinger>=1.0.10 \
d133 1
@


1.182
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2014/10/15 17:33:51 jasper Exp $
d12 2
a13 2
REVISION-main=	2
REVISION-jack=	1
@


1.181
log
@remove instances of MODCLANG_LANGS=c as 'c' is already the default.
nb: it leaves cases where multiple languages (such as 'c' and 'c++') to make
it clear what the full list is.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2014/05/14 08:59:52 sthen Exp $
d12 2
a13 2
REVISION-main=	1
REVISION-jack=	0
d91 1
a91 1
		x11/gtk+2,-guic
@


1.180
log
@build dep on bison ("aclocal: file `/usr/local/share/aclocal/bison-i18n.m4'
does not exist"), ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2014/04/28 17:35:35 brad Exp $
d52 1
a52 1
MODCLANG_LANGS=	c
@


1.179
log
@Update VLC's avcodec plugin to use the avcodec_decode_audio4() API for decoding
audio.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2014/04/12 20:41:26 brad Exp $
d88 1
@


1.178
log
@Pull some bits from 2.1 to deal with newer FFmpeg API.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2014/03/16 11:38:47 brad Exp $
d12 2
a13 1
REVISION-main=	0
d19 1
a19 1
		vlccore	2.0
@


1.177
log
@Update to VLC 2.0.10.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2013/11/07 00:30:07 brad Exp $
d12 1
@


1.176
log
@Update to VLC 2.0.9.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2013/08/19 10:00:15 brad Exp $
d8 1
a8 1
V=		2.0.9
d31 3
a33 3
		dvdnav dvdread ebml stdc++ expat ffi fontconfig freetype \
		fribidi gcrypt gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 \
		gmodule-2.0 gnutls gobject-2.0 gpg-error graphite2 gthread-2.0 \
d37 1
a37 1
		schroedinger-1.0>=2.0 sndio speex speexdsp swscale tag tar \
@


1.175
log
@Update to VLC 2.0.8a.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2013/07/04 08:11:08 zhuk Exp $
d8 1
a8 1
V=		2.0.8a
d13 1
a13 1
MASTER_SITES=	http://download.videolan.org/pub/videolan/vlc/${V:S/a//}/
a180 2

WRKDIST=	${WRKDIR}/${DISTNAME:S/a//}
@


1.174
log
@Fix problem with VLC trying to run kde4-config.

Noticed and reminded by nigel@@
okay brad@@ (MAINTAINER) a while ago (Jun 12)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2013/06/04 18:42:00 naddy Exp $
d8 1
a8 1
V=		2.0.7
d13 1
a13 1
MASTER_SITES=	http://download.videolan.org/pub/videolan/vlc/${V}/
a15 2
REVISION-main=	0

d33 8
a40 8
		gmodule-2.0 gmp gnutls gobject-2.0 gpg-error graphite2 \
		gthread-2.0 gtk-x11-2.0 harfbuzz hogweed \
		jpeg matroska nettle notify opus orc-0.4 ogg p11-kit pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png postproc \
		pthread-stubs samplerate schroedinger-1.0>=2.0 sndio speex \
		speexdsp swscale tag tar tasn1 tiff usbhid vorbis vorbisenc \
		webp x264 xcb-composite xcb-keysyms xcb-randr xcb-render \
		xcb-shape xcb-shm xcb-xfixes xcb-xv xcb xml2 z ${WANTLIB-common}
d181 2
@


1.173
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2013/06/03 22:36:00 brad Exp $
d16 2
d147 2
a148 1
		--without-tuning
@


1.172
log
@Update to VLC 2.0.7.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2013/05/31 15:35:15 ajacoutot Exp $
d93 1
a93 1
CPPFLAGS=	-I${X11BASE}/include -I${LOCALBASE}/include -I${LOCALBASE}/include/libpng
@


1.171
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2013/04/11 17:58:42 brad Exp $
d8 1
a8 1
V=		2.0.6
a14 2
REVISION-main=	0
REVISION-jack=	0
d27 1
a27 1
WANTLIB-common=	dbus-1 m pthread ${MODGETTEXT_WANTLIB}
d30 1
a30 1
		ass atk-1.0 avcodec avformat avutil bluray c cairo cddb dvbpsi \
@


1.170
log
@Update to VLC 2.0.6.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2013/04/04 16:49:56 brad Exp $
d15 2
d36 1
a36 1
		gthread-2.0 gtk-x11-2.0 harfbuzz hogweed icudata icule icuuc \
@


1.169
log
@Make use of clock_gettime() on OpenBSD.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2013/03/27 13:34:06 brad Exp $
d8 1
a8 1
V=		2.0.5
a10 1
REVISION-main=	6
a11 1
REVISION-jack=	2
d33 7
a39 7
		gmodule-2.0 gmp gnutls gobject-2.0 gpg-error gthread-2.0 \
		gtk-x11-2.0 harfbuzz hogweed icudata icule icuuc jpeg matroska \
		nettle notify opus orc-0.4 ogg p11-kit pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pcre pixman-1 png postproc pthread-stubs \
		samplerate schroedinger-1.0>=2.0 sndio speex speexdsp \
		swscale tag tar tasn1 tiff usbhid vorbis vorbisenc webp \
		x264 xcb-composite xcb-keysyms xcb-randr xcb-render \
@


1.168
log
@Re-enable the multi-threaded mode for the avcodec backend.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2013/03/11 11:46:16 espie Exp $
d11 1
a11 1
REVISION-main=	5
d13 1
a13 1
REVISION-jack=	1
@


1.167
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2013/03/09 09:32:03 brad Exp $
d11 1
a11 1
REVISION-main=	4
@


1.166
log
@Sync up the FFmpeg backend with upstream to bring in some
bug fixes.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2013/02/09 14:49:54 sthen Exp $
a27 2
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.165
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2013/02/06 13:07:05 brad Exp $
d11 1
a11 1
REVISION-main=	3
d69 1
a69 1
		graphics/ffmpeg>=20110408 \
@


1.164
log
@Two fixes from upstream..

- Fix crash with broken ASF files (SA-1302).
- Fix MKV behaviour with unknown or new EBML elements.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2013/01/03 03:18:21 brad Exp $
d163 1
a163 1
.if !${FLAVOR:L:Mno_jack}
@


1.163
log
@Disable the media library support as its buggy at the moment and
causes VLC to crash upon exit especially with some of the malloc
flags being enabled. It isn't a default enabled feature anyway.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.162 2013/01/03 03:05:47 brad Exp $
d11 1
a11 1
REVISION-main=	2
@


1.162
log
@Switch back to using LLVM on i386.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2013/01/02 10:14:06 sthen Exp $
d11 1
a11 1
REVISION-main=	1
d42 2
a43 2
		sqlite3 swscale tag tar tasn1 tiff usbhid vorbis vorbisenc \
		webp x264 xcb-composite xcb-keysyms xcb-randr xcb-render \
a145 1
		--enable-media-library \
@


1.161
log
@Our llvm on i386 doesn't support SSE so, on i386, build vlc with GCC 4.6
again for now. ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2012/12/16 21:26:22 brad Exp $
d11 1
a11 1
REVISION-main=	0
d13 1
a13 1
REVISION-jack=	0
a50 1
		gcc4 \
d53 1
a53 1
MODCLANG_ARCHS=	amd64
a54 3
MODGCC4_VERSION= 4.6
MODGCC4_ARCHS=	i386
MODGCC4_LANGS=	c
@


1.160
log
@Switch to using LLVM.

ok sthen@@
@
text
@d51 1
d54 5
a58 1
MODCLANG_ARCHS=	amd64 i386
@


1.159
log
@Update to VLC 2.0.5.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2012/10/22 20:18:44 brad Exp $
d11 1
d13 1
d51 3
a53 5
		x11/qt4 \
		gcc4
MODGCC4_VERSION= 4.6
MODGCC4_ARCHS=	amd64 i386
MODGCC4_LANGS=	c
@


1.158
log
@Update to VLC 2.0.4.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2012/08/26 07:16:54 ajacoutot Exp $
d8 1
a8 1
V=		2.0.4
d29 8
a36 9
WANTLIB-common=	dbus-1 m ${MODGETTEXT_WANTLIB}
WANTLIB-main=	GL ICE lib/qt4/QtGui QtCore SM SDL SDL_image X11 \
		Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama \
		Xpm Xrandr Xrender ass atk-1.0 avcodec avformat \
		avutil bluray bz2 c cairo cddb dvbpsi dvdnav dvdread \
		ebml stdc++ expat ffi fontconfig freetype fribidi gcrypt \
		gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 \
		gmp gnutls gobject-2.0 gpg-error gsm gthread-2.0 gtk-x11-2.0 \
		harfbuzz hogweed icudata icule icuuc jpeg matroska mp3lame \
d38 5
a42 6
		pangoft2-1.0 pcre pixman-1 png portaudio postproc pthread-stubs \
		pthread samplerate schroedinger-1.0>=2.0 sndio speex speexdsp \
		sqlite3 swscale tag tar tasn1 tiff theoradec theoraenc usbhid \
		vorbis vorbisenc vpx webp x264 xcb-composite xcb-keysyms xcb-randr \
		xcb-render xcb-shape xcb-shm xcb-xfixes xcb-xv xcb xml2 xvidcore z \
		${WANTLIB-common}
a60 1
		audio/portaudio-svn \
d132 1
@


1.157
log
@Remove -pthread patching.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2012/08/07 07:35:09 sthen Exp $
d8 1
a8 1
V=		2.0.3
a10 1
REVISION-main=	1
a11 1
REVISION-jack=	0
d37 7
a43 7
		hogweed jpeg matroska mp3lame nettle notify orc-0.4 ogg \
		p11-kit pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1 \
		png portaudio postproc pthread-stubs pthread samplerate \
		schroedinger-1.0>=2.0 sndio speex speexdsp sqlite3 swscale tag \
		tar tasn1 tiff theoradec theoraenc usbhid vorbis vorbisenc \
		vpx webp x264 xcb-composite xcb-keysyms xcb-randr xcb-render \
		xcb-shape xcb-shm xcb-xfixes xcb-xv xcb xml2 xvidcore z \
d62 1
@


1.156
log
@Add an upstream patch for VLC, and remove an empty patch file. From Brad.

- Fix a possible buffer corruption in text renderer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2012/08/05 09:17:00 sthen Exp $
d11 1
a11 1
REVISION-main=	0
d13 1
@


1.155
log
@update to VLC 2.0.3 plus a few patches from upstream, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2012/07/08 21:33:45 ajacoutot Exp $
d11 1
@


1.154
log
@Fix a off-by-one issue with the VCD module.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2012/07/06 12:51:11 sthen Exp $
d8 1
a8 1
V=		2.0.2
a10 1
REVISION-main=	0
@


1.153
log
@update to VLC 2.0.2, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2012/06/20 06:44:28 ratchov Exp $
d11 1
@


1.152
log
@Complete the sndio backend and make it the default. It's supposed to
make video smoother. Adds support for 24-bit encodings and make vlc use
the sndiod volume knob to save few cpu cycles.
ok jasper, help from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2012/06/15 08:30:24 ajacoutot Exp $
d8 1
a8 1
V=		2.0.1
a10 1
REVISION-main=	4
a11 1
REVISION-jack=	0
d47 1
a47 1
AUTOCONF_VERSION= 2.68
d156 2
a157 1
		PKG_CONFIG_PATH="${LOCALBASE}/lib/qt4/pkgconfig"
@


1.151
log
@Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2012/06/02 12:06:37 ajacoutot Exp $
d11 1
a11 1
REVISION-main=	3
@


1.150
log
@Missed bump, spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2012/05/31 07:04:38 ajacoutot Exp $
d11 1
a11 1
REVISION-main=	2
@


1.149
log
@Enable the Media Library now that SQLite is in base.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2012/05/28 18:44:26 ajacoutot Exp $
d13 1
@


1.148
log
@Finally unbreak and enable RTP/RTSP support \o/

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2012/05/03 06:51:25 ajacoutot Exp $
d11 1
a11 1
REVISION-main=	1
d31 5
a35 5
WANTLIB-main=	GL ICE lib/qt4/QtGui QtCore SM SDL SDL_image X11 Xau \
		Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes Xi Xinerama \
		Xpm Xrandr Xrender Xxf86vm ass atk-1.0 avcodec avformat \
		avutil bluray bz2 c cairo cddb drm dvbpsi dvdnav dvdread \
		ebml enca stdc++ expat ffi fontconfig freetype fribidi gcrypt \
d41 1
a41 1
		sndio schroedinger-1.0>=2.0 sndio speex speexdsp swscale tag \
d57 2
a58 2
LIB_DEPENDS+=	x11/dbus
LIB_DEPENDS-main= ${LIB_DEPENDS} \
d84 3
a86 3
		x11/gtk+2 \
		x11/qt4
LIB_DEPENDS-jack= ${LIB_DEPENDS} \
a138 1
		--disable-sqlite \
d147 1
@


1.147
log
@Adjust after libdvdcss/libdvdnav/libdvdread updates.

from Brad, ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2012/04/24 20:47:39 naddy Exp $
d11 1
a11 1
REVISION-main=	0
d40 1
a40 1
		png portaudio postproc proxy pthread-stubs pthread samplerate \
a79 1
		net/libproxy \
d89 2
a90 1
BUILD_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS} \
d102 2
a103 1
USE_LIBTOOL=	Yes
d125 1
a127 1
		--disable-live555 \
d153 4
a156 1
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
@


1.146
log
@build even if . isn't in PATH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2012/04/23 13:47:08 ajacoutot Exp $
d11 1
d67 1
a67 1
		devel/libdvdread \
d76 1
a76 1
		multimedia/libdvdnav \
a116 1
		--disable-dvdread \
@


1.145
log
@Major update to vlc-2.0.1.
More details at http://www.videolan.org/vlc/releases/2.0.1.html

tested on i386, amd64, sparc64
from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2012/04/04 12:07:50 landry Exp $
d185 1
a185 1
	    bootstrap
@


1.144
log
@No need for CONFIGURE_ENV+=with_mozilla_pkg="libxul" since
--with-mozilla-sdk-path is used and takes precedence over it.
Found while checking libxul.pc users..
No bump since no pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2012/03/29 15:00:19 ajacoutot Exp $
a6 1
COMMENT-web=	Mozilla plugin for embedded media playback
d8 1
a8 1
V=		1.1.13
a10 1
REVISION-main=	3
a11 1
PKGNAME-web=	vlc-web-${V}
d14 1
a14 1
EXTRACT_SUFX=	.tar.bz2
d16 2
a17 2
SHARED_LIBS=	vlc	1.0 \
		vlccore	1.0
d23 1
a23 1
# GPLv2+
d29 2
a30 2
WANTLIB+=	dbus-1 m
WANTLIB-main=	GL ICE lib/qt4/QtGui SM SDL SDL_image X11 X11-xcb Xau \
d32 17
a48 13
		Xrandr Xrender Xxf86vm ass atk-1.0 avcodec avformat avutil \
		bz2 c cairo cddb drm dvbpsi dvdnav dvdread ebml enca expat \
		ffi fontconfig freetype fribidi gdk-x11-2.0 gdk_pixbuf-2.0 \
		gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gsm gthread-2.0 \
		gtk-x11-2.0 jpeg matroska mp3lame notify orc-0.4 \
		ogg pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1 \
		png postproc proxy pthread-stubs pthread stdc++ \
		schroedinger-1.0>=2.0 sndio speex swscale tag tiff \
		theoradec theoraenc usbhid vorbis vorbisenc vpx x264 \
		xcb-keysyms xcb-randr xcb-render xcb-shm xcb-xv xcb \
		xml2 z  ${WANTLIB}
WANTLIB-jack=	jack vlccore ${WANTLIB}
WANTLIB-web=	stdc++ vlc vlccore ${WANTLIB}
d51 5
a55 1
		x11/qt4
d58 1
d60 1
d62 1
d74 1
d80 2
d89 3
a91 3
LIB_DEPENDS-web=${LIB_DEPENDS} \
		${BUILD_PKGPATH} \
		devel/nspr
d95 2
a96 1
RUN_DEPENDS-web= ${BUILD_PKGPATH}
d102 2
a103 2
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.68
d110 1
d113 1
d116 1
a116 1
		--disable-dvb \
a120 1
		--disable-gnutls \
a121 1
		--disable-hd1000v \
a122 1
		--disable-libgcrypt \
a123 3
		--disable-libtar \
		--disable-libv4l \
		--disable-libv4l2 \
d125 1
a132 3
		--disable-oss \
		--disable-osso_screensaver \
		--disable-portaudio \
a134 1
		--disable-remoteosd \
d136 1
a136 1
		--disable-skins2 \
d145 1
d155 1
a155 1
PSEUDO_FLAVORS=	no_web no_jack
a163 4
.if !${FLAVOR:L:Mno_web}
MULTI_PACKAGES+=-web
.endif

d166 2
a167 10
.if ${BUILD_PACKAGES:M-jack}
CONFIGURE_ARGS+=--enable-jack
.endif

.if ${BUILD_PACKAGES:M-web}
BUILD_DEPENDS+=	devel/xulrunner/1.9,-devel>=1.9
CONFIGURE_ARGS+=--enable-mozilla \
		--with-mozilla-sdk-path=${LOCALBASE}/xulrunner1.9
CPPFLAGS+=	-I${LOCALBASE}/include/nspr -I${LOCALBASE}/xulrunner1.9/include -DOPENBSD
PORTPATH=	${WRKDIR}/bin:/usr/bin:/bin:/usr/sbin:/sbin:${DEPBASE}/bin:${LOCALBASE}/bin:${X11BASE}/bin:${LOCALBASE}/xulrunner1.9
d182 5
a187 5
.if ${BUILD_PACKAGES:M-web}
	@@rm ${PREFIX}/lib/mozilla/plugins/libvlcplugin.a
	@@rm ${PREFIX}/lib/mozilla/plugins/libvlcplugin.la
.endif
	@@find ${PREFIX}/lib/vlc -name '*.a' -print | xargs rm
@


1.143
log
@Sync dependencies after libproxy update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2012/03/23 10:36:10 ajacoutot Exp $
a171 1
CONFIGURE_ENV+=	with_mozilla_pkg="libxul"
@


1.142
log
@Remove patches no longer necessary now that we have posix_spawnp() and family.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2012/03/21 08:27:29 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	2
d39 1
a39 1
		gtk-x11-2.0 jpeg matroska modman mp3lame notify orc-0.4 \
@


1.141
log
@SECURITY:
- MMS: Fix stack overflow. SA-1201
- RealRTSP: Fix heap overflows. SA-1202
- ty: Fix out of bound read on corrupt files.
- Avoid char conversion in strchr().
- Fix surrogate detection.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2012/02/17 22:07:16 sthen Exp $
d12 1
a12 1
REVISION-main=	1
@


1.140
log
@- Remove patches for QT4/MKV modules which are unnecessary.
- Remove patch for tdestroy() wrapper now that tdelete() has been fixed.
- Remove @@comment's from the PLIST which are no longer necessary.

From Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2011/12/23 15:01:59 sthen Exp $
d12 1
a12 1
REVISION-main=	0
@


1.139
log
@SECURITY update to VLC 1.1.13; fixes a buffer overflow in the TiVo demuxer.
Also install .la files for libvlc/libvlccore. From Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2011/12/03 23:37:39 ajacoutot Exp $
d12 1
@


1.138
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2011/11/16 13:33:15 phessler Exp $
d9 1
a9 1
V=		1.1.12
a17 2
REVISION-main=	0

d163 4
a175 4
.if ${BUILD_PACKAGES:M-jack}
CONFIGURE_ARGS+=--enable-jack
.endif

a187 3
pre-configure:
	@@perl -pi -e 's/grep -v /grep -av /' ${WRKSRC}/src/Makefile.in

d191 1
d194 1
a194 1
	@@find ${PREFIX}/lib -name '*.la' -print | xargs rm
@


1.137
log
@Update to VLC 1.1.12

Most of the bits from Brad, a minor runtime fix by me.

Tested on amd64, i386, macppc

OK dhill@@, rpointel@@, sthen@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2011/10/21 18:20:14 espie Exp $
d18 2
d82 2
a83 1
RUN_DEPENDS-main= devel/desktop-file-utils
@


1.136
log
@convert to bsd.port.arch.mk
zap FULL* that's not needed for jack, since there are no real flavors.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2011/09/16 12:29:17 espie Exp $
d6 2
d9 1
a9 1
V=		1.0.6
d12 2
a13 3
REVISION-main=	34
REVISION-jack=	6
REVISION-web=	8
d18 2
a19 2
SHARED_LIBS=	vlc		0.0 \
		vlccore		0.0
d31 17
d51 1
a51 2
LIB_DEPENDS-main=${LIB_DEPENDS} \
		audio/faad \
d59 1
d61 1
a61 1
		graphics/ffmpeg>=20080620p10 \
d64 1
d72 1
d74 9
a82 13
RUN_DEPENDS=	devel/desktop-file-utils

WANTLIB-main=	GL GLU ICE lib/qt4/QtGui SM SDL SDL_image X11 Xau \
		Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrender Xv \
		Xxf86vm avcodec avformat avutil bz2 c cddb dbus-1 \
		drm dvbpsi dvdnav dvdread ebml expat faad fontconfig \
		freetype fribidi gdk_pixbuf-2.0 gio-2.0 glib-2.0 \
		gmodule-2.0 gobject-2.0 gsm gthread-2.0 jpeg m \
		matroska modman mp3lame notify orc-0.4 ogg pcre \
		png postproc proxy pthread-stubs pthread stdc++ \
		schroedinger-1.0>=2.0 sndio speex swscale tag tiff \
		theoradec theoraenc usbhid vorbis vorbisenc vpx x264 \
		xcb-keysyms xcb xml2 z ${WANTLIB}
d89 1
a89 1
AUTOCONF_VERSION= 2.65
d95 2
a96 1
		--disable-cmml \
d98 2
a99 1
		--disable-fluidsynth \
d101 1
d104 1
d106 2
a107 1
		--disable-hal \
d112 1
d114 1
d121 1
d123 3
d128 1
d131 3
d135 1
a138 2
		--enable-dvdread \
		--enable-faad \
a140 1
		--enable-release \
d145 1
a145 4
		PKG_CONFIG_PATH="${LOCALBASE}/lib/qt4/pkgconfig" \
		LOCALBASE=${LOCALBASE}

MULTI_PACKAGES=-main -web -jack
d150 10
a161 10
COMMENT-web=	Mozilla plugin for embedded media playback
PKGNAME-web=	vlc-web-${V}
LIB_DEPENDS-web=${LIB_DEPENDS} \
		${BUILD_PKGPATH} \
		devel/nspr
RUN_DEPENDS-web=${BUILD_PKGPATH}
WANTLIB-web=	ICE SM X11 Xau Xdmcp Xt Xpm m nspr4 plc4 plds4 \
		pthread-stubs stdc++ vlc vlccore xcb dbus-1 \
		${WANTLIB}

d164 2
a165 1
CONFIGURE_ARGS+=--enable-mozilla --with-mozilla-sdk-path=${LOCALBASE}/xulrunner1.9
a170 8
COMMENT-jack=	jackd audio output module for VLC
PKGNAME-jack=vlc-jack-${V}
LIB_DEPENDS-jack=${LIB_DEPENDS} \
		 ${BUILD_PKGPATH} \
		 audio/jack
RUN_DEPENDS-jack=${BUILD_PKGPATH}
WANTLIB-jack=	${WANTLIB} m jack vlccore dbus-1

a188 1
	@@find ${WRKSRC} -name 'Makefile.in' -exec perl -pi -e 's/-export-symbol-regex/-export-symbols-regex/' {} \;
a190 5
.for _img in 16x16 32x32 48x48 128x128
	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/${_img}/apps
	${INSTALL_DATA} ${WRKBUILD}/share/vlc${_img}.png \
	    ${PREFIX}/share/icons/hicolor/${_img}/apps/vlc.png
.endfor
@


1.135
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2011/07/17 06:35:42 ajacoutot Exp $
d119 1
a119 1
MULTI_PACKAGES=-main
d124 2
a125 2
.if !${FLAVOR:L:Mno_web}
MULTI_PACKAGES+=-web
a127 5
BUILD_DEPENDS+=	devel/xulrunner/1.9,-devel>=1.9
CONFIGURE_ARGS+=--enable-mozilla --with-mozilla-sdk-path=${LOCALBASE}/xulrunner1.9
CONFIGURE_ENV+=	with_mozilla_pkg="libxul"
CPPFLAGS+=	-I${LOCALBASE}/include/nspr -I${LOCALBASE}/xulrunner1.9/include -DOPENBSD
PORTPATH=	${WRKDIR}/bin:/usr/bin:/bin:/usr/sbin:/sbin:${DEPBASE}/bin:${LOCALBASE}/bin:${X11BASE}/bin:${LOCALBASE}/xulrunner1.9
d129 1
a129 1
		${BASE_PKGPATH} \
d135 7
a143 2
.if !${FLAVOR:L:Mno_jack}
MULTI_PACKAGES+=-jack
d145 1
a145 3
FULLPKGNAME-jack=vlc-jack-${V}
FULLPKGPATH-jack=x11/vlc,-jack
CONFIGURE_ARGS+=--enable-jack
d147 1
a147 1
		 ${BASE_PKGPATH} \
d149 1
a149 2
# any FLAVOR of VLC will do
RUN_DEPENDS-jack=${BASE_PKGPATH}
d151 3
d178 1
a178 1
.if !${FLAVOR:L:Mno_web}
@


1.134
log
@SECURITY: fix heap-based buffer overflow. CVE-2011-2588.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2011/07/01 11:10:53 sthen Exp $
d10 3
a12 3
REVISION-main=	33
REVISION-jack=	5
REVISION-web=	7
@


1.133
log
@replace -pthread patch with a proper one, clean up -pthread flag handling.
from Brad, ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2011/06/24 11:17:05 sthen Exp $
d10 1
a10 1
REVISION-main=	32
@


1.132
log
@Chase ffmpeg dep changes. Mostly from Brad ok dcoppa@@, plus opencv from me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2011/06/24 07:19:08 dcoppa Exp $
d10 1
a10 1
REVISION-main=	31
@


1.131
log
@Clean up CPPFLAGS handling. The -I${WRKSRC}/include hack isn't
necessary with vlc 1.0.x. From Brad.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2011/06/13 23:51:12 sthen Exp $
d10 1
a10 1
REVISION-main=	30
d59 4
a62 4
		drm dvbpsi dvdnav dvdread ebml expat faac faad \
		fontconfig freetype fribidi gdk_pixbuf-2.0 gio-2.0 \
		glib-2.0 gmodule-2.0 gobject-2.0 gsm gthread-2.0 jpeg \
		m matroska modman mp3lame notify orc-0.4 ogg pcre \
@


1.130
log
@Fix heap corruption / integer overflow in playlist parser. CVE-2011-2194
From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2011/05/16 17:37:59 jolan Exp $
d10 1
a10 1
REVISION-main=	29
d68 2
d114 2
a115 1
CONFIGURE_ENV+=	LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
a118 2
CPPFLAGS=	-I${WRKSRC}/include -I${X11BASE}/include -I${LOCALBASE}/include -I${LOCALBASE}/include/libpng

a154 2

CONFIGURE_ENV+=	CPPFLAGS="${CPPFLAGS}"
@


1.129
log
@fix packaging with no_web FLAVOR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2011/05/11 09:08:07 dcoppa Exp $
d10 1
a10 1
REVISION-main=	28
@


1.128
log
@Get rid of the use of libtool's --tag=disable-static and only delete
the archives for the plugins.

From Brad; OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2011/05/08 16:20:16 dcoppa Exp $
d179 1
d181 1
@


1.127
log
@- Fix a potential crash with MMS.
- Don't free uninitialized ES format descriptor for DV muxed in AVI.

From upstream via Brad.
OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2011/05/06 08:18:54 dcoppa Exp $
d10 1
a10 1
REVISION-main=	27
a69 1
LIBTOOL_FLAGS=	--tag=disable-static
d179 3
a181 1
	@@find ${PREFIX}/lib -name '*.la' -print | xargs rm -f
@


1.126
log
@- Disable the Musepack decoder and rely upon FFmpeg.
- Re-enable the faad-based AAC decoder. There is a bug with VLC that
  causes some streamed AAC content when being transcoded (to at least
  Vorbis) to sound like its only at half or quarter speed.
- Just delete the .la files.

From Brad

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2011/05/04 14:58:39 dcoppa Exp $
d10 1
a10 1
REVISION-main=	26
@


1.125
log
@Remove dependencies on the FLAC and libtheora libraries and their
respective VLC decoders and rely upon the FFmpeg based decoders
instead; from Brad

@@comment .la archives: they're useless because now vlc is built
using tag=disable-static

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2011/04/21 07:07:26 ajacoutot Exp $
d10 3
a12 3
REVISION-main=	25
REVISION-jack=	4
REVISION-web=	6
d34 1
a35 1
		audio/libmpcdec \
d59 5
a63 5
		drm dvbpsi dvdnav dvdread ebml expat faac fontconfig \
		freetype fribidi gdk_pixbuf-2.0 gio-2.0 glib-2.0 \
		gmodule-2.0 gobject-2.0 gsm gthread-2.0 jpeg m \
		matroska modman mp3lame mpcdec notify orc-0.4 ogg \
		pcre png postproc proxy pthread-stubs pthread stdc++ \
d95 1
d107 1
d180 1
@


1.124
log
@Fix build/run with new libnotify.

tested in a bulk by landry, thanks!
ok landry@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2011/04/19 08:25:24 sthen Exp $
d10 1
a10 1
REVISION-main=	24
a33 1
		audio/flac \
a47 1
		multimedia/libtheora \
d56 8
a63 10
WANTLIB-main=	FLAC GL GLU ICE lib/qt4/QtGui SM SDL SDL_image X11 Xau \
		Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes Xi Xinerama \
		Xrandr Xrender Xv Xxf86vm atk-1.0 avcodec avformat avutil \
		bz2 c cairo cddb dbus-1 dbus-glib-1 drm dvbpsi dvdnav \
		dvdread ebml expat faac fontconfig freetype fribidi \
		gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 \
		gobject-2.0 gsm gthread-2.0 gtk-x11-2.0 jpeg m matroska \
		modman mp3lame mpcdec notify orc-0.4 ogg pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png \
		postproc proxy pthread-stubs pthread stdc++>=46.0 \
d65 2
a66 2
		theora theoradec theoraenc usbhid vorbis vorbisenc vpx \
		x264 xcb-keysyms xcb-render xcb-shm xcb xml2 z ${WANTLIB}
a105 1
		--enable-flac \
a108 1
		--enable-theora \
@


1.123
log
@sync WANTLIB, mostly from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2011/04/16 20:18:50 sthen Exp $
d10 1
a10 1
REVISION-main=	23
d42 1
a42 1
		devel/libnotify \
@


1.122
log
@remove @@commented entries, no longer needed following tag=disable-static.
from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2011/04/11 15:11:28 sthen Exp $
d10 1
a10 1
REVISION-main=	22
d65 6
a70 5
		mp3lame mpcdec notify orc-0.4 ogg pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pcre pixman-1 png postproc proxy pthread-stubs  \
		pthread stdc++>=46.0 schroedinger-1.0>=2.0 sndio speex \
		swscale tag tiff theora usbhid vorbis vorbisenc x264 \
		xcb-keysyms xcb-render xcb-shm xcb xml2 z ${WANTLIB}
@


1.121
log
@SECURITY, fix a heap-based buffer overflow in the MP4 demuxer.
From upstream via Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2011/04/04 07:43:22 dcoppa Exp $
d10 1
a10 1
REVISION-main=	21
@


1.120
log
@Make use of libtool's tag=disable-static option to remove the unused
static archives for the plugins and libraries.

From Brad. OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2011/04/03 21:41:38 sthen Exp $
d10 1
a10 1
REVISION-main=	20
@


1.119
log
@"Drop the use of faad / liba52 / libdca / libmad and libmpeg2 for decoding
AAC / AC3 / DTS / MPEG Audio and MPEG/MPEG2 in favour of FFmpeg's libavcodec
decoders which nowdays are just as good and in some cases like AC3 / DTS
are better."  From Brad (maintainer). ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2011/03/26 10:05:24 sthen Exp $
d10 3
a12 3
REVISION-main=	19
REVISION-jack=	3
REVISION-web=	5
d73 1
@


1.118
log
@Bump ports which should be using newer autoconf to 2.65;
config.h files checked.  From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2011/03/25 01:07:00 sthen Exp $
d10 1
a10 1
REVISION-main=	18
d30 2
a31 1
MODULES=	devel/gettext x11/qt4
a33 1
		audio/faad \
a34 1
		audio/liba52 \
a35 2
		audio/libdca \
		audio/libmad \
a45 1
		graphics/libmpeg2 \
d60 10
a69 11
		Xrandr Xrender Xv Xxf86vm a52 atk-1.0 avcodec avformat \
		avutil bz2 c cairo cddb dbus-1 dbus-glib-1 dca dvbpsi \
		dvdnav dvdread ebml expat faac faad fontconfig freetype \
		fribidi gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 \
		gmodule-2.0 gobject-2.0 gsm gthread-2.0 gtk-x11-2.0 \
		jpeg m mad matroska mp3lame mpcdec mpeg2 notify orc-0.4 \
		ogg pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1 \
		png postproc proxy pthread-stubs pthread stdc++>=46.0 \
		schroedinger-1.0>=2.0 sndio speex swscale tag tiff theora \
		usbhid vorbis vorbisenc x264 xcb-keysyms xcb-render \
		drm xcb-shm xcb xml2 z ${WANTLIB}
d76 2
a77 1
CONFIGURE_ARGS+=--disable-alsa \
d81 1
d90 1
d95 1
a107 1
		--enable-faad \
@


1.117
log
@security update, fix buffer overflow CVE-2010-3275, CVE-2010-3276, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2011/03/12 21:19:13 jakemsr Exp $
d79 1
a79 2
# Should be 2.65
AUTOCONF_VERSION= 2.64
@


1.116
log
@fix for newer libmatroska

from Brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2011/02/02 09:34:23 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	17
@


1.115
log
@SECURITY: fix a remote code execution vulnerability issue with the
          Mastroska container support (VideoLAN-SA-1102).

from Brad (maintainer)
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2011/01/22 09:10:22 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	16
@


1.115.2.1
log
@- security fix for CVE-2010-3275, CVE-2010-3276

from upstream via brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2011/02/02 09:34:23 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	17
@


1.115.2.2
log
@SECURITY, fix a heap-based buffer overflow in the MP4 demuxer.
From upstream via Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115.2.1 2011/03/25 09:06:35 jasper Exp $
d10 1
a10 1
REVISION-main=	18
@


1.115.2.3
log
@SECURITY: fix heap-based buffer overflow. CVE-2011-2588.

from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115.2.2 2011/04/11 16:57:57 jasper Exp $
d10 1
a10 1
REVISION-main=	19
@


1.114
log
@SECURITY: Handle early termination properly in StripTags.

from Brad
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2011/01/15 10:56:51 jasper Exp $
d10 1
a10 1
REVISION-main=	15
@


1.113
log
@- remove USE_GROFF=Yes, manpages checked by brad.

from brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2011/01/14 19:46:46 jasper Exp $
d10 1
a10 1
REVISION-main=	14
@


1.112
log
@FixheapoverflowsinCDGdecoder

from brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2011/01/02 06:52:42 ajacoutot Exp $
a77 1
USE_GROFF =	Yes
@


1.111
log
@Missed bumps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2010/12/31 06:58:18 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	13
@


1.110
log
@SECURITY: CVE-2010-3907
Buffer overflow in Real demuxer.

See http://www.videolan.org/security/sa1007.html for details.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2010/11/22 10:16:09 espie Exp $
d11 2
a12 2
REVISION-jack=	2
REVISION-web=	4
@


1.109
log
@remaining WANTLIB go .>=   to >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2010/11/22 08:37:05 espie Exp $
d10 1
a10 1
REVISION-main=	12
d74 1
a74 1
		xcb-render-util xcb xml2 z ${WANTLIB}
d144 2
a145 1
		pthread-stubs stdc++ vlc vlccore xcb ${WANTLIB}
d159 1
a159 1
WANTLIB-jack=	${WANTLIB} m jack vlccore
@


1.108
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2010/11/19 08:59:32 jasper Exp $
d71 2
a72 2
		png postproc proxy pthread-stubs pthread stdc++.>=46.0 \
		schroedinger-1.0.>=2.0 sndio speex swscale tag tiff theora \
@


1.107
log
@- adjust after recent schroedinger update

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2010/11/06 16:07:00 espie Exp $
d31 1
a31 1
LIB_DEPENDS+=	::x11/dbus
d33 28
a60 28
		::audio/faad \
		::audio/flac \
		::audio/liba52 \
		::audio/libcddb \
		::audio/libdca \
		::audio/libmad \
		::audio/libmpcdec \
		::audio/libvorbis \
		::audio/speex \
		::audio/taglib \
		::devel/fribidi \
		::devel/libdvdread \
		::devel/libnotify \
		::devel/sdl-image \
		:ffmpeg->=20080620p10:graphics/ffmpeg \
		::graphics/libdvbpsi \
		::graphics/libmpeg2 \
		::graphics/png \
		::multimedia/libdvdnav \
		::multimedia/libmatroska \
		::multimedia/libtheora \
		:schroedinger->=1.0.10:multimedia/schroedinger \
		::multimedia/x264 \
		::net/libproxy \
		::textproc/libebml \
		::textproc/libxml \
		::x11/qt4
RUN_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils
d134 1
a134 1
BUILD_DEPENDS+=	:xulrunner-devel->=1.9:devel/xulrunner/1.9,-devel
d140 3
a142 3
		::${BASE_PKGPATH} \
		::devel/nspr
RUN_DEPENDS-web=::${BUILD_PKGPATH}
d154 2
a155 2
		 ::${BASE_PKGPATH} \
		 ::audio/jack
d157 1
a157 1
RUN_DEPENDS-jack=::${BASE_PKGPATH}
@


1.106
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2010/10/28 11:55:16 steven Exp $
d10 1
a10 1
REVISION-main=	11
d54 1
a54 1
		::multimedia/schroedinger \
d72 1
a72 1
		schroedinger-1.0 sndio speex swscale tag tiff theora \
@


1.105
log
@fix -export-symbols-regex libtool option syntax
with this, it builds fine with openbsd libtool
bump the revisions
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2010/10/24 21:15:35 ajacoutot Exp $
d74 1
a74 1
		xcb-render-util xcb xml2 z
d144 1
a144 1
		pthread-stubs stdc++ vlc vlccore xcb
d158 1
a158 1
WANTLIB-jack=	m jack vlccore
@


1.104
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2010/10/19 08:13:59 espie Exp $
d10 3
a12 3
REVISION-main=	10
REVISION-jack=	1
REVISION-web=	3
d77 1
a77 1
USE_LIBTOOL=	gnu # XXX links with static library archives
d177 1
@


1.103
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2010/10/11 08:19:59 jasper Exp $
a75 1
USE_X11=	Yes
@


1.102
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2010/09/29 11:30:03 landry Exp $
d79 1
@


1.101
log
@Fix for CVE-2010-2937 (Insufficient input validation in VLC TagLib
plugin) :
"VLC fails to perform sufficient input validation when trying to extract
some meta-informations about input media through ID3v2 tags. In the
failure case, VLC attempt dereference an invalid memory address, and a
crash will ensure."
From brad via sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2010/09/21 12:12:12 sthen Exp $
d10 1
a10 1
REVISION-main=	9
d67 1
a67 1
		fribidi gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 glitz \
@


1.100
log
@these ports don't build with ports libtool yet, as they ask libtool to
link with static library archives. force gnu libtool (this was already
done in vlc) and add a short explanatory comment. ok jasper@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2010/09/17 12:15:20 sthen Exp $
d10 1
a10 1
REVISION-main=	8
@


1.99
log
@sundry cleanups;

from Brad (maintainer):
- Fix sys/mount.h detection so VCD/libcdio support can be enabled.
- bump AUTOCONF_VERSION to 2.64.
- some Makefile cleaning up.

from me, ok Brad:
- garbage-collect share/locale dir
- collect REVISIONs together
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2010/09/12 22:35:01 jakemsr Exp $
d78 1
a78 1
USE_LIBTOOL=	gnu
@


1.98
log
@* no more anonymous unions in video(4)
* bump REVISION-main
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2010/08/25 23:27:21 sthen Exp $
d11 2
d31 1
a31 1
LIB_DEPENDS+=	dbus-1::x11/dbus
a32 6
		::x11/qt4 \
		::devel/sdl-image \
		::graphics/png \
		::audio/libmad \
		::graphics/libmpeg2 \
		:ffmpeg->=20080620p10:graphics/ffmpeg \
d34 1
a34 1
		::devel/fribidi \
d36 3
a38 3
		::multimedia/libtheora \
		::textproc/libxml \
		::audio/flac \
d40 12
d53 2
a54 3
		::textproc/libebml \
		::multimedia/libdvdnav \
		::devel/libdvdread \
a55 6
		::multimedia/schroedinger \
		::graphics/libdvbpsi \
		::audio/speex \
		::audio/taglib \
		::audio/libvorbis \
		::audio/libdca \
d57 3
a59 1
		::devel/libnotify
d62 13
a74 12
WANTLIB-main=	GL GLU ICE SM SDL X11 Xau Xcomposite Xcursor Xdamage Xdmcp \
		Xext Xfixes Xi Xinerama Xrandr Xrender Xv Xxf86vm atk-1.0 bz2 \
		c cairo dbus-glib-1 expat faac fontconfig freetype gdk-x11-2.0 \
		gdk_pixbuf-2.0 gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 \
		gsm gthread-2.0 gtk-x11-2.0 jpeg m mp3lame orc-0.4 ogg pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pcre pixman-1 pthread-stubs pthread \
		stdc++.>=46.0 sndio tiff usbhid xcb-keysyms xcb-render \
		xcb-render-util xcb z lib/qt4/QtGui SDL_image png mad mpeg2 \
		avcodec avformat avutil postproc swscale faad fribidi \
		a52 theora xml2 FLAC mpcdec matroska ebml dvdnav dvdread \
		x264 schroedinger-1.0 dvbpsi speex tag vorbis vorbisenc \
		dca proxy notify
d81 1
a81 1
AUTOCONF_VERSION= 2.63
d83 2
a84 1
CONFIGURE_ARGS+=--disable-altivec \
d88 2
a93 1
		--disable-libcdio \
d108 1
a108 1
		--disable-vcd \
a133 1
REVISION-web=	2
d143 2
a144 2
WANTLIB-web=	ICE SM X11 Xau Xdmcp Xt Xpm m pthread-stubs stdc++ xcb \
		vlc vlccore nspr4 plc4 plds4
a150 1
REVISION-jack=	0
d158 1
a158 1
WANTLIB-jack=	m vlccore jack
@


1.97
log
@- chase the library change in multimedia/schroedinger; oil->orc
- add various other missing WANTLIB (and LIB_DEPENDS in some cases)
- while there move PKGNAME=..pX to REVISION, and move some ports
to new-style LIB_DEPENDS

original diff from Brad, extensive checking by me (clean build of everything
related to liboil).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2010/07/30 12:03:09 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	7
@


1.96
log
@Move to new DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2010/07/30 06:59:00 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	6
d63 1
a63 1
		gsm gthread-2.0 gtk-x11-2.0 jpeg m mp3lame oil-0.3 ogg pango-1.0 \
@


1.96.2.1
log
@MFC, original by aja@@
SECURITY: CVE-2010-3907
Buffer overflow in Real demuxer.

See http://www.videolan.org/security/sa1007.html for details.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2010/07/30 12:03:09 ajacoutot Exp $
d10 1
a10 3
REVISION-main=	7
REVISION-web=	0
REVISION-jack=	0
@


1.96.2.2
log
@FixheapoverflowsinCDGdecoder

from brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96.2.1 2011/01/02 13:12:34 jasper Exp $
d10 1
a10 1
REVISION-main=	8
@


1.96.2.3
log
@Fix for CVE-2010-2937 (Insufficient input validation in VLC TagLib
plugin) :
"VLC fails to perform sufficient input validation when trying to extract
some meta-informations about input media through ID3v2 tags. In the
failure case, VLC attempt dereference an invalid memory address, and a
crash will ensure."
From brad via sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96.2.2 2011/01/14 19:47:48 jasper Exp $
d10 1
a10 1
REVISION-main=	9
@


1.96.2.4
log
@SECURITY: Handle early termination properly in StripTags.

from Brad
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96.2.3 2011/01/14 21:52:37 jasper Exp $
d10 1
a10 1
REVISION-main=	10
@


1.95
log
@First pass at new REVISION/DEPENDS... not finished yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2010/06/20 13:56:11 sthen Exp $
d10 1
a10 1
REVISION-main=	5
d31 26
a56 26
		lib/qt4/QtGui::x11/qt4 \
		SDL_image.>=1.3::devel/sdl-image \
		png.>=4.1::graphics/png \
		mad.>=2.1::audio/libmad \
		mpeg2::graphics/libmpeg2 \
		avcodec.>=13.1,avformat.>=12,avutil.>=6,postproc.>=12,swscale.>=1:ffmpeg->=20080620p10:graphics/ffmpeg \
		faad.>=2::audio/faad \
		fribidi::devel/fribidi \
		a52::audio/liba52 \
		theora.>=1::multimedia/libtheora \
		xml2.>=9::textproc/libxml \
		FLAC.>=7.0::audio/flac \
		mpcdec.>=1::audio/libmpcdec \
		matroska::multimedia/libmatroska \
		ebml::textproc/libebml \
		dvdnav.>=3.0::multimedia/libdvdnav \
		dvdread.>=3.0::devel/libdvdread \
		x264::multimedia/x264 \
		schroedinger-1.0::multimedia/schroedinger \
		dvbpsi.>=3::graphics/libdvbpsi \
		speex::audio/speex \
		tag::audio/taglib \
		vorbis.>=6,vorbisenc.>=2::audio/libvorbis \
		dca::audio/libdca \
		proxy::net/libproxy \
		notify::devel/libnotify
d66 5
a70 1
		xcb-render-util xcb z
d135 2
a136 2
		vlc,vlccore::${BASE_PKGPATH} \
		nspr4,plc4,plds4::devel/nspr
d138 2
a139 1
WANTLIB-web=	ICE SM X11 Xau Xdmcp Xt Xpm m pthread-stubs stdc++.>=46.0 xcb
d150 2
a151 2
		 vlccore::${BASE_PKGPATH} \
		 jack::audio/jack
d154 1
a154 1
WANTLIB-jack=	m
@


1.94
log
@- avoid extra CFLAGS changes from the autoconf script
- remove amd64 MMX workaround, no longer needed with gcc4

from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2010/06/19 09:46:42 sthen Exp $
d9 2
a10 1
PKGNAME-main=	${DISTNAME}p5
d123 2
a124 1
PKGNAME-web=	vlc-web-${V}p2
d140 2
a141 1
FULLPKGNAME-jack=vlc-jack-${V}p0
@


1.93
log
@cleanup from Brad (maintainer) after last commit:

- Correct CPPFLAGS handling
- Remove bogus SUBST_CMD in pre-configure
- Remove bogus gsm LIB_DEPENDS and move it to WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2010/06/17 09:17:52 dcoppa Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p4
d106 2
a107 1
		--without-contrib
d122 1
a122 1
PKGNAME-web=	vlc-web-${V}p1
d138 1
a138 1
FULLPKGNAME-jack=vlc-jack-${V}
a151 1
CONFIGURE_ARGS+= --disable-mmx
@


1.92
log
@Ops! patch-src_Makefile_in contains a CVS id: replace it with a perl
workaround
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2010/06/17 07:42:16 dcoppa Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p3
a49 1
		gsm.>=1.0::audio/gsm \
d62 1
a62 1
		gthread-2.0 gtk-x11-2.0 jpeg m mp3lame oil-0.3 ogg pango-1.0 \
d107 1
a107 2
CONFIGURE_ENV+=	CPPFLAGS="-I${WRKSRC}/include -I${X11BASE}/include -I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
d111 2
d121 1
a121 1
PKGNAME-web=	vlc-web-${V}p0
d124 2
a125 8
CONFIGURE_ENV+=	CPPFLAGS="-I${WRKSRC}/include -I${X11BASE}/include -I${LOCALBASE}/include \
			  -I${LOCALBASE}/include/libpng \
			  -I${LOCALBASE}/include/nspr \
			  -I${LOCALBASE}/xulrunner1.9/include -DOPENBSD" \
		with_mozilla_pkg="libxul" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
		PKG_CONFIG_PATH="${LOCALBASE}/lib/qt4/pkgconfig" \
		LOCALBASE=${LOCALBASE}
d148 2
a163 1
	${SUBST_CMD} ${WRKSRC}/configure.ac
@


1.91
log
@Disable inhibit and screensaver plugins since they cause problems
when the dbus daemon is running

Fix Help->About->Thanks dialog

Unbreak after xulrunner update (patches adapted from archlinux)

OK ajacoutot@@, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2010/05/16 08:37:48 sthen Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p2
d169 1
@


1.90
log
@Build with libnotify support. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2010/05/09 00:16:26 sthen Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
d50 1
d53 1
d65 2
a66 2
		stdc++.>=46.0 sndio tiff usbhid vorbis vorbisenc xcb-keysyms \
		xcb-render xcb-render-util xcb z
d121 12
a132 6
PKGNAME-web=	vlc-web-${V}
BUILD_DEPENDS+=	:xulrunner-devel->=1.8,<1.9:devel/xulrunner/1.8,-devel
CONFIGURE_ARGS+=--enable-mozilla
CONFIGURE_ENV+=	MOZILLA_CONFIG="${LOCALBASE}/bin/xulrunner-config" \
		with_mozilla_pkg="xulrunner-plugin"
PORTPATH=	${WRKDIR}/bin:/usr/bin:/bin:/usr/sbin:/sbin:${DEPBASE}/bin:${LOCALBASE}/bin:${X11BASE}/bin:${LOCALBASE}/xulrunner
d137 1
a137 1
WANTLIB-web=	ICE SM X11 Xau Xdmcp Xt Xpm m pthread-stubs xcb
d166 3
@


1.89
log
@Build v4l2 support, which can work with uvideo(4). From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2010/05/05 08:43:35 edd Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
d53 2
a54 1
		proxy::net/libproxy
d57 8
a64 5
WANTLIB-main=	GL GLU ICE SM SDL X11 Xau Xdmcp Xext Xinerama \
		Xrandr Xrender Xv Xxf86vm bz2 c expat faac fontconfig \
		freetype jpeg m mp3lame oil-0.3 ogg pthread-stubs \
		pthread stdc++.>=46.0 sndio tiff usbhid vorbis vorbisenc \
		xcb-keysyms xcb z
a88 1
		--disable-notify \
@


1.88
log
@Update to vlc-1.0.6 from maintainer Brad Smith.
OK dcoppa@@, sthen@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2010/04/26 20:09:18 steven Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
d80 1
d92 1
a92 1
		--disable-v4l2 \
@


1.87
log
@use gnu libtool here for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2009/12/21 20:46:03 ajacoutot Exp $
d5 1
a5 1
COMMENT-main=	videolan client; multimedia player
d7 1
a7 1
V=		0.8.6i
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p8
d12 4
d19 2
d27 2
a28 5
USE_LIBTOOL=	gnu
USE_X11=	Yes

MODULES=	devel/gettext
BUILD_DEPENDS+= ::net/livemedia
d30 1
a32 1
		id3tag.>=3.0::audio/libid3tag \
d35 1
a35 1
		avcodec.>=13.1,avformat.>=12,avutil.>=6,postproc.>=12:ffmpeg->=20080620p10:graphics/ffmpeg \
d46 1
a46 1
                dvdread.>=3.0::devel/libdvdread \
d48 1
d50 4
a53 1
		wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_aui,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc,wx_gtk2_richtext:wxWidgets-gtk2->=2.8.6:x11/wxWidgets
d56 19
a74 44
WANTLIB-main=	ICE SM X11 Xext Xinerama Xv Xxf86vm c freetype m ncurses \
		pthread stdc++ usbhid z Xau Xdmcp Xrandr Xrender \
		SDL jpeg tiff bz2 ogg vorbis vorbisenc faac mp3lame sndio \
		oil-0.3 schroedinger-1.0 pthread-stubs xcb

CONFIGURE_STYLE=autoconf
AUTOCONF_VERSION=2.61
CONFIGURE_ENV+=	LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
		CPPFLAGS="-I${WRKSRC}/include -I${X11BASE}/include -I${LOCALBASE}/include -I${LOCALBASE}/include/libpng"

CONFIGURE_ARGS+=--disable-pth \
		--disable-st \
		--disable-gprof \
		--disable-cprof \
		--disable-mostly-builtin \
		--disable-debug \
		--disable-release \
		--without-contrib \
		--disable-v4l \
		--disable-pvr \
		--disable-vcdx \
		--disable-cddax \
		--disable-satellite \
		--disable-dvb \
		--disable-twolame \
		--disable-tremor \
		--disable-tarkin \
		--disable-dirac \
		--disable-svg \
		--disable-qte \
		--disable-mga \
		--disable-svgalib \
		--disable-ggi \
		--disable-glide \
		--disable-aa \
		--disable-caca \
		--disable-portaudio \
		--disable-opie \
		--disable-galaktos \
		--disable-goom \
		--disable-slp \
		--disable-lirc \
		--disable-corba \
		--disable-testsuite \
d76 1
a76 4
		--disable-optimizations \
		--disable-gnutls \
		--disable-dshow \
		--disable-smb \
d78 7
a84 20
		--disable-libcddb \
		--disable-cdda \
		--disable-vcd \
		--disable-quicktime \
		--disable-dts \
		--disable-glx \
		--disable-opengl \
		--disable-hd1000v \
		--disable-directx \
		--disable-fb \
		--disable-wingdi \
		--disable-alsa \
		--disable-waveout \
		--disable-coreaudio \
		--disable-hd1000a \
		--disable-macosx \
		--disable-qnx \
		--disable-visual \
		--disable-joystick \
		--disable-activex \
d86 2
d89 6
a94 30
		--disable-mod \
		--disable-speex \
		--disable-cmml \
		--disable-shout \
		--disable-gnomevfs \
		--disable-cyberlink \
		--disable-bonjour \
		--disable-daap \
		--disable-pda \
		--disable-xosd \
		--disable-notify

CONFIGURE_ARGS+=--enable-ncurses \
		--enable-sout \
		--enable-httpd \
		--enable-vlm \
		--enable-screen \
		--enable-ogg \
		--enable-mad \
		--enable-ffmpeg \
		--enable-a52 \
		--enable-libmpeg2 \
		--enable-vorbis \
		--enable-png \
		--enable-x11 \
		--enable-xvideo \
		--enable-sdl \
		--enable-freetype \
		--enable-fribidi \
		--enable-libxml2 \
a95 1
		--enable-theora \
a96 8
		--enable-mkv \
		--enable-mpc \
		--enable-wxwidgets \
		--enable-dvdread \
		--enable-dvdnav \
		--enable-dvbpsi \
		--enable-live555 \
		--with-live555-tree=${LOCALBASE}/live \
d98 8
a105 3
		--enable-realrtsp

MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/autotools
d109 1
a109 2
FLAVORS=altivec
PSEUDO_FLAVORS=no_web no_jack
d114 2
a115 2
COMMENT-web=	mozilla plugin for embedded media playback
PKGNAME-web=	vlc-web-${V}p1
d119 1
a119 1
		XPIDL="${LOCALBASE}/xulrunner/xpidl"
d121 3
a123 1
LIB_DEPENDS-web=${LIB_DEPENDS}
d125 1
a125 4
WANTLIB-web=	ICE SM X11 Xau Xdmcp Xext Xinerama Xt Xv Xxf86vm dvbpsi m \
		ogg theora pthread-stubs xcb
.else
CONFIGURE_ARGS+=--disable-mozilla
d130 2
a131 2
COMMENT-jack=	jackd audio output module for vlc
FULLPKGNAME-jack=vlc-jack-${V}p1
d134 5
a138 3
LIB_DEPENDS-jack=jack::audio/jack
# any FLAVOR of vlc will do
RUN_DEPENDS-jack=::x11/vlc
a139 2
.else
CONFIGURE_ARGS+=--disable-jack
d142 3
a144 2
.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "i386"
PKG_ARGS+=-Dx86opt=1
d146 1
a146 1
PKG_ARGS+=-Dx86opt=0
d150 1
a150 2
CONFIGURE_ARGS+=--enable-loader
PKG_ARGS+=-Dwin32=1
d152 1
a152 2
CONFIGURE_ARGS+=--disable-loader
PKG_ARGS+=-Dwin32=0
a154 33
.if ${FLAVOR:L:Maltivec}
BROKEN=altivec-enabled binary does not start
ONLY_FOR_ARCHS=	powerpc
CONFIGURE_ARGS+=--enable-altivec
PKG_ARGS+=-Daltivec=1
.else
CONFIGURE_ENV+=	ac_cv_altivec_inline=no \
		ac_cv_c_altivec=no
CONFIGURE_ARGS+=--disable-altivec
PKG_ARGS+=-Daltivec=0
.endif

# XXX video window initialization fails without this
.if ${MACHINE_ARCH} == "sparc64"
CFLAGS+=-mhard-quad-float
.endif

# win32 codecs support uses i386_set_ldt
post-configure:
.if ${MACHINE_ARCH} == "i386"
	@@perl -pi -e s,'VLC_ENTRY = vlc_entry__0_8_6','VLC_ENTRY = vlc_entry__0_8_6 -li386',g \
	${WRKSRC}/modules/codec/Makefile ${WRKSRC}/modules/codec/dmo/Makefile
.endif

# this was used for the pda interface which is disabled now, it may be
# re-renabled when it is more usable so leave this here
#pre-build:
#	@@perl -pi -e 's|_PREFIX_|${PREFIX}|g' ${WRKSRC}/modules/gui/pda/pda.c

# XXX install fails due to this file not being generated properly
pre-install:
	@@touch ${WRKSRC}/share/skins2/default.vlt

a155 5
.if !${FLAVOR:L:Mno_web}
	${INSTALL_DATA_DIR} ${PREFIX}/lib/mozilla-plugins
	${INSTALL_DATA} ${WRKBUILD}/mozilla/libvlcplugin.so \
		${PREFIX}/lib/mozilla-plugins
.endif
d159 1
a159 1
		${PREFIX}/share/icons/hicolor/${_img}/apps/vlc.png
@


1.86
log
@fix FULLPKGPATH
(ports is locked)
@
text
@d21 1
a21 1
USE_LIBTOOL=	Yes
@


1.85
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2009/11/24 09:01:47 ajacoutot Exp $
d193 2
a194 1
FULLPKGNAME-jack=vlc-jack-${V}p0
@


1.84
log
@Fix xulrunner package spec.

from an original diff for yelp by Mikolaj Kucharski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2009/08/11 08:42:09 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p7
@


1.83
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2009/07/27 21:44:15 martynas Exp $
d177 1
a177 1
BUILD_DEPENDS+=	:xulrunner-devel-*:devel/xulrunner/1.8,-devel
@


1.82
log
@adapt for the new xulrunner infrastructure.
no breakage in bulk build & bumps done by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2009/07/19 22:49:12 sthen Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p6
d52 1
a52 1
		oil-0.3 schroedinger-1.0
d176 1
a176 1
PKGNAME-web=	vlc-web-${V}p0
d185 1
a185 1
		ogg theora
@


1.81
log
@set the pkgspec for LIB_DEPENDS on ffmpeg to a version with schroedinger
included, so the tools know that old ffmpeg versions won't satisfy the
dependencies listed in WANTLIB.

this way, attempting to install these packages with old ffmpeg will
no longer give you a cryptic error message as seen by dhill@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2009/07/19 16:28:31 sthen Exp $
d177 1
a177 1
BUILD_DEPENDS+=	:xulrunner-devel-*:devel/xulrunner,-devel
@


1.80
log
@oil/schroedinger WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2009/04/14 19:52:08 kili Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p5
d32 1
a32 1
		avcodec.>=9.0,avformat.>=9.0,postproc.>=9.0,avutil.>=3.0::graphics/ffmpeg \
@


1.79
log
@
Some fixes after the x264 update.

From Brad.

"theoretically ok" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2009/01/16 04:11:18 jakemsr Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p4
d51 2
a52 1
		SDL jpeg tiff bz2 ogg vorbis vorbisenc faac mp3lame sndio
@


1.78
log
@- remove artsd and esd backends
- add sndio to WANTLIB
mostly from Brad, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2008/09/15 22:14:23 jakemsr Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p3
@


1.77
log
@
- simpler faad related patching
- bump PKGNAME

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2008/09/05 01:01:00 brad Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p2
d51 1
a51 1
		SDL jpeg tiff bz2 ogg vorbis vorbisenc faac mp3lame
d169 1
a169 1
PSEUDO_FLAVORS=no_web no_arts no_esd no_jack
a186 26
.endif

.if !${FLAVOR:L:Mno_arts}
MULTI_PACKAGES+=-arts
COMMENT-arts=	artsd audio output module for vlc
FULLPKGNAME-arts=vlc-arts-${V}
CONFIGURE_ARGS+=--enable-arts
LIB_DEPENDS-arts=${LIB_DEPENDS} artsc.>=1::x11/kde/arts3
# any FLAVOR of vlc will do
RUN_DEPENDS-arts=::x11/vlc
WANTLIB-arts=	glib-2.0 gmodule-2.0 gthread-2.0 stdc++ pcre
.else
CONFIGURE_ARGS+=--disable-arts
.endif

.if !${FLAVOR:L:Mno_esd}
MULTI_PACKAGES+=-esd
COMMENT-esd=	esound audio output module for vlc
FULLPKGNAME-esd=vlc-esd-${V}
CONFIGURE_ARGS+=--enable-esd
LIB_DEPENDS-esd=esd.>=2::audio/esound
# any FLAVOR of vlc will do
RUN_DEPENDS-esd=::x11/vlc
WANTLIB-esd=	audiofile m
.else
CONFIGURE_ARGS+=--disable-esd
@


1.76
log
@Fix a crash if VLC is not able to connect to a RTSP server.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2008/09/04 22:58:23 brad Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
d33 1
d51 1
a51 1
		SDL jpeg tiff bz2 faad ogg vorbis vorbisenc faac mp3lame
@


1.75
log
@Pull in integer overflow fixes for TTA, MMS and Ogg.

CVE-2008-3732, CVE-2008-3794

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2008/07/15 16:19:15 brad Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
@


1.74
log
@upgrade to VLC 0.8.6i; bug fixes and integrates the previous
security fix.

ok jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2008/07/09 17:28:42 sthen Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
d15 1
a15 1
# GPL
@


1.73
log
@SECURITY: patch to fix integer overflow in wav handling (CVE-2008-2430)
Pulled from upstream GIT repository.

ok brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2008/07/09 02:17:12 jakemsr Exp $
d7 1
a7 1
V=		0.8.6h
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
@


1.72
log
@
* FFmpeg headers moved
* FFmpeg LIB_DEPENDS/WANTLIB changes
* remove bogus @@bin marker in PLIST (wxvlc is a symlink)
* bump PKGNAME-main
* img_convert()/img_resample() based filters disabled due to FFmpeg
  changes

feedback/ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2008/06/09 22:55:43 sthen Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
@


1.71
log
@SECURITY update vlc to 0.8.6h

- fixes *many* null pointer deref, error handling failures, leaks,
use-after-free and double-free found by Coverity

- fixes some MPEG2 TS audio packet loss

- numerous security fixes in 0.8.6g

- fixes some memory leaks

Also: mark altivec FLAVOR as broken; ajacoutot reports that the
altivec-enabled binary fails to start.

ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2008/05/16 05:54:09 bernd Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
d50 1
a50 1
		SDL jpeg tiff faad ogg vorbis vorbisenc faac mp3lame
d174 1
a174 1
PKGNAME-web=	vlc-web-${V}
d182 2
a183 1
WANTLIB-web=	ICE SM X11 Xau Xdmcp Xext Xinerama Xv Xxf86vm dvbpsi m ogg theora
@


1.70
log
@Fix nonexistent vlc menu icon.

ok brad@@, martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2008/05/11 18:12:40 jakemsr Exp $
d7 1
a7 1
V=		0.8.6f
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
d182 1
a182 1
WANTLIB-web=	ICE SM X11 Xau Xdmcp Xext Xinerama Xt Xv Xxf86vm dvbpsi m ogg theora
d241 1
@


1.69
log
@
- use wxSlider instead of hacking wxGuage for the volume controller.
from vlc subversion via Alexey Suslikov.

- use jack_client_connect() instead of jack_client_new() so multiple
instances of vlc can connect to jackd concurrently.  problem reported
by Alexey Suslikov.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2008/04/04 00:53:01 jakemsr Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
d278 5
@


1.68
log
@security/bugfix update

from the release notes:

VLC media player 0.8.6e and earlier versions suffer from security
vulnerabilities in the Subtitle demuxer, Real RTSP demuxer, MP4
demuxer and Cinepak codec.

from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2008/03/24 04:46:26 jakemsr Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
d216 1
a216 1
FULLPKGNAME-jack=vlc-jack-${V}
@


1.67
log
@add jack subpackage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2008/03/02 02:27:04 jakemsr Exp $
d7 1
a7 1
V=		0.8.6e
d174 1
a174 1
PKGNAME-web=	vlc-web-${V}p0
d190 1
a190 1
FULLPKGNAME-arts=vlc-arts-${V}p0
d203 1
a203 1
FULLPKGNAME-esd=vlc-esd-${V}p0
@


1.66
log
@update to vlc-0.8.6e

This is a bugfix release. VLC media player 0.8.6d and earlier versions
suffer from security vulnerabilities in the Web interface, Subtitle
demuxer, Real RTSP demuxer, SDL_image library and MP4 demuxer.

See http://www.videolan.org/security/sa0801.php and
http://www.videolan.org/security/sa0802.php for more details.

from brad, OK naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2008/02/02 09:51:05 steven Exp $
d168 1
a168 1
PSEUDO_FLAVORS=no_web no_arts no_esd
d211 13
@


1.65
log
@fix LIB_DEPENDS after wxWidgets update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2008/01/23 16:34:30 martynas Exp $
d7 1
a7 1
V=		0.8.6d
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
d50 1
a50 1
		SDL jpeg tiff faad ogg vorbis vorbisenc faac mp3lame ossaudio
d195 1
a195 1
WANTLIB-arts=	glib-2.0 gmodule-2.0 gthread-2.0 stdc++ pcre pthread
@


1.64
log
@make it use xulrunner-devel instead of seamonkey-devel.  improvements,
testing and ok kurt@@ and naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2007/12/11 11:07:54 jakemsr Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
d45 1
a45 1
		wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_aui,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc:wxWidgets-gtk2->=2.8.6:x11/wxWidgets
@


1.63
log
@maintainence update to 0.8.6d

from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2007/11/25 14:21:57 bernd Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
d55 1
a55 2
		CPPFLAGS="-I${WRKSRC}/include -I${X11BASE}/include -I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
		XPIDL="${LOCALBASE}/seamonkey/xpidl"
d174 2
a175 2
PKGNAME-web=	vlc-web-${V}
BUILD_DEPENDS+=	:seamonkey-devel-*:www/seamonkey,-devel
d177 3
a179 1
PORTPATH=	${WRKDIR}/bin:/usr/bin:/bin:/usr/sbin:/sbin:${DEPBASE}/bin:${LOCALBASE}/bin:${X11BASE}/bin:${LOCALBASE}/seamonkey
d190 1
a190 1
FULLPKGNAME-arts=vlc-arts-${V}
d203 1
a203 1
FULLPKGNAME-esd=vlc-esd-${V}
@


1.62
log
@Add missing @@pkgpath marker to unbreak updates.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2007/11/17 20:53:34 ajacoutot Exp $
d7 1
a7 1
V=		0.8.6c
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p7
d194 1
a194 1
WANTLIB-arts=	glib-2.0 gmodule-2.0 gthread-2.0 stdc++ pthread
@


1.61
log
@- fix altivec FLAVOR
- don't pretend we have altivec capability when we use --disable-altivec
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2007/11/11 01:37:54 jakemsr Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p6
@


1.60
log
@
- add support for Esound and aRTs audio output, as pseudo_flavors
  and subpackages
- move the mozilla plugin to a subpackage
- enable altivec support as a flavor
- ffmpeg and wxWidgets lib_depends/wantlib updates

help/ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2007/10/03 04:12:43 jakemsr Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p5
d226 1
a226 1
.if ${FLAVOR:L} == "altivec"
d231 2
@


1.59
log
@re-enable liveMedia

tested by streaming MPEG TS via RTP unicast to/from i386 and amd64

from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2007/09/28 07:59:06 jakemsr Exp $
d5 1
a5 1
COMMENT=	videolan client; multimedia player
d9 1
a9 1
PKGNAME=	${DISTNAME}p4
d26 2
a27 1
LIB_DEPENDS=	SDL_image.>=1.3::devel/sdl-image \
d32 1
a32 1
		avcodec.>=7.0,avformat.>=7.0,postproc.>=7.0::graphics/ffmpeg \
d45 1
a45 1
		wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc:wxWidgets-gtk2->=2.6.3:x11/wxWidgets
d48 1
a48 1
WANTLIB=	ICE SM X11 Xext Xinerama Xv Xxf86vm c freetype m ncurses \
d50 1
a50 1
		SDL jpeg tiff faad ogg vorbis vorbisenc
a83 1
		--disable-esd \
a84 1
		--disable-arts \
a124 2
		--disable-real \
		--disable-realrtsp \
d160 3
a162 1
		--with-live555-tree=${LOCALBASE}/live
d166 4
a169 1
FLAVORS=no_web
d173 3
d179 3
a181 2
LIB_DEPENDS+=	nspr4,plc4,plds4::devel/nspr
WANTLIB+=	Xt
d186 26
d226 2
a227 1
.if ${MACHINE_ARCH} == "powerpc"
@


1.58
log
@- pull in libdvbpsi so we can build the MPEG TS (transport stream)
  demuxer
- fix no_web flavor LIB_DEPENDS
- update WANTLIB
- bump PKGNAME

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2007/09/15 20:04:25 merdely Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p3
d25 1
a25 1

a64 1
		--disable-live555 \
d161 3
a163 1
		--enable-dvbpsi
@


1.57
log
@Remove surrounding quotes in COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2007/08/07 15:18:22 steven Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p2
a26 1
		nspr4,plc4,plds4::devel/nspr \
d43 1
d48 1
a48 1
		pthread stdc++ usbhid z Xau Xdmcp \
a98 1
		--disable-dvbpsi \
d161 2
a162 1
		--enable-dvdnav
d173 1
@


1.56
log
@add missing dependency on the nspr libraries.

ok pval
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2007/06/29 21:33:08 martynas Exp $
d5 1
a5 1
COMMENT=	"videolan client; multimedia player"
d16 1
a16 1
PERMIT_PACKAGE_CDROM=	"patents"
@


1.55
log
@give update-desktop-database a chance to work by adding desktop-file-utils
to RUN_DEPENDS;  ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2007/06/21 08:12:14 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p1
d27 1
@


1.54
log
@- explicitly disable libnotify (or configure will pick it up if installed)
- set AUTOCONF_VERSION to 2.61
- add @@exec/@@unexec update-desktop-database to PLIST

from Mikolaj Kucharski <mikolaj at kucharski dot name>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2007/06/18 23:14:20 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p0
d44 1
@


1.53
log
@- SECURITY update to 0.8.6c (and various bugfixes, memory leaks)
VideoLAN-SA-0702: format string injection in Vorbis, Theora, SAP and CDDA plugins
- remove bogus PLIST entry

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2007/06/10 15:03:50 naddy Exp $
d9 1
d50 1
a50 1
AUTOCONF_VERSION=2.59
d132 2
a133 1
		--disable-xosd
@


1.52
log
@kludge: add X11BASE/include
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2007/06/05 01:53:04 jolan Exp $
d6 2
a7 1
V=		0.8.6b
d62 1
a62 1
		--disable-livedotcom \
@


1.51
log
@update to 0.8.6b, from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2007/05/25 16:24:49 jakemsr Exp $
d50 1
a50 1
		CPPFLAGS="-I${WRKSRC}/include -I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
@


1.50
log
@update WANTLIB and LIB_DEPENDS after graphics/ffmpeg update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2007/04/22 13:21:11 aanriot Exp $
d6 1
a6 1
V=		0.8.6
a7 1
PKGNAME=	vlc-${V}p7
@


1.49
log
@fix a format string by keeping a place for the terminating NUL
character.

ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2007/04/20 07:21:53 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	vlc-${V}p6
d30 1
a30 1
		avcodec.>=7.0,avformat.>=7.0,postproc.>=7.0,avutil.>=1.0::graphics/ffmpeg \
d45 2
a46 2
		ossaudio pthread stdc++ usbhid z Xau Xdmcp \
		SDL jpeg tiff faac faad mp3lame ogg vorbis vorbisenc
@


1.48
log
@- forgot to bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2007/04/20 07:21:09 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	vlc-${V}p5
@


1.47
log
@- revert previous commit after several feedbacks about rtsp feeds not
behaving correctly on !i386
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2007/04/19 09:22:09 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	vlc-${V}p4
@


1.46
log
@- add live555 support

from brad
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/04/08 17:34:20 ajacoutot Exp $
a24 1
BUILD_DEPENDS+=	::net/livemedia
d62 1
d158 1
a158 3
		--enable-dvdnav \
		--enable-live555 \
		--with-live555-tree=${LOCALBASE}/live
@


1.45
log
@- enable x264 support
- add missing xenocara LIBS
- regen patches while here

"go for it" naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2007/02/15 17:15:42 steven Exp $
d8 1
a8 1
PKGNAME=	vlc-${V}p3
d25 1
a62 1
		--disable-livedotcom \
d158 3
a160 1
		--enable-dvdnav
@


1.44
log
@fix WANTLIB

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2007/01/04 11:29:59 mbalmer Exp $
d8 1
a8 1
PKGNAME=	vlc-${V}p2
d41 1
d45 1
a45 1
		ossaudio pthread stdc++ usbhid z \
a102 1
		--disable-x264 \
@


1.44.2.1
log
@MFC:
- SECURITY update to 0.8.6c (and various bugfixes, memory leaks)
VideoLAN-SA-0702: format string injection in Vorbis, Theora, SAP and CDDA
plugins
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2007/02/15 17:15:42 steven Exp $
d6 1
a6 1
V=		0.8.6c
d8 1
d61 1
a61 1
		--disable-live555 \
@


1.43
log
@Security fix for vlc (see http://www.videolan.org/sa0701.html).  NB, we never
had the extensions enabled that are affected by the problem.

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2006/12/24 01:57:16 jolan Exp $
d8 1
a8 1
PKGNAME=	vlc-${V}p1
a28 2
		ogg.>=5.2::audio/libogg \
		vorbis.>=3.0,vorbisenc.>=2.0::audio/libvorbis \
a31 1
		faad::audio/faad \
d45 1
a45 1
		SDL jpeg tiff
@


1.42
log
@add mozilla plugin support, tested on amd64

now you can view fun stuff like http://www.borat.tv/reportings3.php
directly in firefox
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/12/23 13:31:30 jolan Exp $
d8 1
a8 1
PKGNAME=	vlc-${V}p0
@


1.41
log
@update to 0.8.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/12/16 12:22:36 espie Exp $
d8 1
d53 2
a54 1
		CPPFLAGS="-I${WRKSRC}/include -I${LOCALBASE}/include -I${LOCALBASE}/include/libpng"
a91 1
		--disable-mozilla \
d165 12
d219 7
@


1.40
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/11/03 15:15:07 jolan Exp $
d6 1
a6 1
V=		0.8.5
d194 1
a194 1
	@@perl -pi -e s,'VLC_ENTRY = vlc_entry__0_8_5','VLC_ENTRY = vlc_entry__0_8_5 -li386',g \
@


1.39
log
@update to 0.8.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/10/13 02:08:22 jolan Exp $
a22 2

BUILD_DEPENDS=	:pkgconfig-*:devel/pkgconfig	
@


1.38
log
@- add back GUI support now that wxwidgets has been updated
- nuke semi-pointless no_dvd flavor
- mark as SHARED_ONLY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/09/22 02:23:13 pvalchev Exp $
d6 1
a6 1
V=		0.8.4a
a7 1
PKGNAME=	${DISTNAME}p8
d47 2
a48 2
WANTLIB=	X11 Xext Xinerama Xv c freetype m ncurses ossaudio \
		pthread stdc++ usbhid z \
d196 1
a196 1
	@@perl -pi -e s,'VLC_ENTRY = vlc_entry__0_8_4','VLC_ENTRY = vlc_entry__0_8_4 -li386',g \
d204 4
@


1.37
log
@use off_t/int64_t consistently (match prototype)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/08/01 10:50:19 espie Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p7
d43 4
a46 1
		ebml::textproc/libebml
a135 1
		--disable-wxwidgets \
d160 4
a163 1
		--enable-mpc
a166 3
FLAVORS=	no_dvd
FLAVOR?=

a191 8
.endif

.if ${FLAVOR:L:Mno_dvd}
CONFIGURE_ARGS+=--disable-dvdread --disable-dvdnav
.else
CONFIGURE_ARGS+=--enable-dvdread --enable-dvdnav
LIB_DEPENDS+=	dvdnav.>=3.0::multimedia/libdvdnav \
		dvdread.>=3.0::devel/libdvdread
@


1.36
log
@convert a few libspecs to new style.

Note: no package bump, those are only BUILD dependencies,
the pkg_create code will create the correct wantlib specs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/07/23 11:44:27 steven Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p6
@


1.36.2.1
log
@MFC:
- SECURITY update to 0.8.6c (and various bugfixes, memory leaks)
VideoLAN-SA-0702: format string injection in Vorbis, Theora, SAP and CDDA
plugins
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/08/01 10:50:19 espie Exp $
d6 1
a6 1
V=		0.8.6c
d8 1
d45 2
a46 2
WANTLIB=	ICE SM X11 Xext Xinerama Xv Xxf86vm c freetype m ncurses \
		ossaudio pthread stdc++ usbhid z \
d62 1
a62 1
		--disable-live555 \
d203 1
a203 1
	@@perl -pi -e s,'VLC_ENTRY = vlc_entry__0_8_6','VLC_ENTRY = vlc_entry__0_8_6 -li386',g \
a210 4

# XXX install fails due to this file not being generated properly
pre-install:
	@@touch ${WRKSRC}/share/skins2/default.vlt
@


1.35
log
@there is no win32-codecs package, so refer to the port instead.

from Alex Holst <a@@mongers.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2006/03/22 01:33:06 jolan Exp $
d27 17
a43 17
LIB_DEPENDS=	SDL_image.1.3::devel/sdl-image \
		png.4.1::graphics/png \
		id3tag.3.0::audio/libid3tag \
		mad.2.1::audio/libmad \
		ogg.5.2::audio/libogg \
		vorbis.3.0,vorbisenc.2.0::audio/libvorbis \
		mpeg2.0.0::graphics/libmpeg2 \
		avcodec.7.0,avformat.7.0,postproc.7.0,avutil.1.0::graphics/ffmpeg \
		fribidi.0.0::devel/fribidi \
		faad.0.0::audio/faad \
		a52.0.0::audio/liba52 \
		theora.1::multimedia/libtheora \
		xml2.9::textproc/libxml \
		FLAC.7.0::audio/flac \
		mpcdec.1::audio/libmpcdec \
		matroska.0::multimedia/libmatroska \
		ebml.0::textproc/libebml
d196 2
a197 2
LIB_DEPENDS+=	dvdnav.3.0::multimedia/libdvdnav \
		dvdread.3.0::devel/libdvdread
@


1.34
log
@enable matroska (.mka/.mkv) and musepack (.mpc) support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2006/03/20 05:53:18 jakemsr Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p5
@


1.33
log
@- accomodate for libavcodec changes
- bump PKGNAME

OK brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/12/24 09:01:17 jolan Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p4
d40 4
a43 1
		FLAC.7.0::audio/flac
d46 2
a47 2
		pthread usbhid z \
		SDL jpeg
a101 1
		--disable-mkv \
a126 1
		--disable-mpc \
d156 3
a158 1
		--enable-flac
@


1.32
log
@add win32 codec support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2005/12/22 16:36:17 jolan Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p3
d34 1
a34 1
		avcodec.5.0,avformat.5.0,postproc.5.0::graphics/ffmpeg \
d44 1
a44 1
		SDL jpeg mp3lame
a48 1
		LIBS="-lpostproc -lmp3lame -la52 -lvorbisenc -lvorbis -logg -lossaudio -lm -lz -pthread" \
@


1.31
log
@crank the priority on the ncurses module so that it is preferred over
the rc one
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2005/12/22 05:32:50 jolan Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
d134 1
a134 2
		--disable-xosd \
		--disable-loader
d163 14
a184 6
.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "i386"
PKG_ARGS+=-Dx86opt=1
.else
PKG_ARGS+=-Dx86opt=0
.endif

d196 7
@


1.30
log
@fix default font
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/12/22 04:45:38 jolan Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
@


1.29
log
@add back altivec support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/12/22 03:45:36 jolan Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.28
log
@update to 0.8.4a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2005/11/15 23:05:30 wilfried Exp $
d8 1
a91 1
		--disable-altivec \
d163 8
@


1.27
log
@fix wantlib + bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2005/11/10 12:14:05 espie Exp $
d6 1
a6 1
V=		0.8.2
a7 1
PKGNAME=	${DISTNAME}p4
d19 1
d26 1
a26 2
LIB_DEPENDS=	SDL.3.0::devel/sdl \
		wx_gtk2.2.4:wxWidgets-gtk-*-gtk2|wxWidgets-gtk2-*:x11/wxWidgets/gtk2 \
d38 2
a39 1
		xml2.9::textproc/libxml
d41 3
a43 6
WANTLIB=	X11 Xext Xinerama Xv c fontconfig freetype m \
		ncurses ossaudio pthread usbhid z \
		atk-1.0.0.0 gdk-x11-2.0.0.0 gdk_pixbuf-2.0.0.0 glib-2.0.0.0 \
		gmodule-2.0.0.0 gobject-2.0.0.0 gthread-2.0.0.0 \
		gtk-x11-2.0.0.0 mp3lame pango-1.0.0.0 cairo pangoft2-1.0.0.0 \
		pangocairo-1.0.0.0
d47 3
a49 4
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
		LIBS="-lpostproc -lmp3lame -la52 -lvorbisenc -lvorbis -logg -lossaudio -lm -lz -pthread `${LOCALBASE}/bin/pkg-config gtk+-2.0 gthread-2.0 --libs`" \
		WXCONFIG="${LOCALBASE}/bin/wxgtk2-2.4-config" \
		CPPFLAGS="-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng `${LOCALBASE}/bin/pkg-config gtk+-2.0 --cflags`"
a50 1
# utf8, 
d58 1
a121 1
		--disable-flac \
d124 12
a135 1
		--disable-xosd
d137 1
a137 2
CONFIGURE_ARGS+=--enable-pda \
		--enable-ncurses \
a154 1
		--enable-daap \
d157 1
a157 1
		--enable-wxwindows
d183 4
a186 2
pre-build:
	@@perl -pi -e 's|_PREFIX_|${PREFIX}|g' ${WRKSRC}/modules/gui/pda/pda.c
@


1.26
log
@prepare vlc for non-conflicting wxWidgets-gtk*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2005/11/07 13:41:27 kurt Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p3
d41 1
a41 1
WANTLIB=	X11 Xext Xft Xinerama Xrender Xv c fontconfig freetype m \
d45 2
a46 2
		gtk-x11-2.0.0.0 mp3lame pango-1.0.0.0 pangox-1.0.0.0 \
		pangoxft-1.0.0.0
@


1.25
log
@dlopen libstdc++ with lazy|global so other objects can see it and
to hide some missing _Unwind_* syms that appear to be unneeded for
this hack.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/11/06 00:33:44 jolan Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
d27 1
a27 1
		wx_gtk2.2.4:wxWidgets-gtk-*-gtk2:x11/wxWidgets/gtk2 \
@


1.24
log
@remove silly debian-specific dlopen'ing of libstdc++ workaround which
tries various major versions which we don't have, help from kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/11/03 19:50:06 jolan Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
@


1.23
log
@reference libdvd, not libdvdcss
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/07/31 19:07:10 jolan Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.22
log
@update to 0.8.2

main diff from jsg@@ with some tweaks from me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/07/09 00:36:43 jolan Exp $
d8 1
@


1.21
log
@enable theora support, bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/06/23 00:54:40 jolan Exp $
d6 1
a6 1
V=		0.8.1
a7 1
PKGNAME=	${DISTNAME}p3
d14 1
a14 1
PERMIT_PACKAGE_CDROM=	Yes
a20 3
WANTLIB=	GL GLU X11 Xext Xinerama Xv c freetype m mp3lame \
		ossaudio pthread usbhid z

d37 9
a45 1
		theora.1::multimedia/libtheora
d49 2
a50 2
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib" \
		LIBS="-lpostproc -lmp3lame -la52 -lvorbisenc -lvorbis -logg -lossaudio -lm -lz -pthread" \
d52 41
a92 5
		CPPFLAGS="-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng"
CONFIGURE_ARGS+=--disable-altivec \
		--disable-oss \
		--enable-sdl \
		--enable-mad \
d94 4
d99 3
a102 1
		--disable-mod \
d104 1
a105 3
		--disable-cddax \
		--disable-skins2 \
		--disable-speex \
d107 4
a110 4
		--enable-faad \
		--disable-dvbpsi \
		--disable-v4l \
		--disable-pvr \
d112 6
d119 20
a138 1
		--disable-slp \
d140 13
a152 1
		--enable-theora
d159 2
a160 2
.if ${MACHINE_ARCH} == "i386"
PKG_ARGS+=-Di386=1
d162 1
a162 1
PKG_ARGS+=-Di386=0
d177 3
@


1.20
log
@move a52 support out of the !no_dvd case since some non-dvd stuff uses
it, it's also a dependency of a dependency so we'll have it around
anyway

bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2005/02/20 03:28:27 naddy Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
d40 2
a41 1
		a52.0.0::audio/liba52
d70 2
a71 1
		--enable-a52
@


1.19
log
@* Fix build after removal of inter-library dependencies from ffmpeg.
* Use -pthread instead of -lpthread in configure.
* Fix a few pointer to int casts.

From: Jacob Meuser <jakemsr@@jakemsr.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2004/12/30 16:14:35 espie Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
d39 2
a40 1
		faad.0.0::audio/faad
d68 2
a69 1
		--disable-slp
d88 1
a88 1
CONFIGURE_ARGS+=--disable-a52 --disable-dvdread --disable-dvdnav
d90 2
a91 3
CONFIGURE_ARGS+=--enable-a52 --enable-dvdread --enable-dvdnav
LIB_DEPENDS+=	a52.0.0::audio/liba52 \
		dvdnav.3.0::multimedia/libdvdnav \
@


1.18
log
@fix wxwidgets path.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2004/12/16 07:40:20 jolan Exp $
d3 1
a3 1
NOT_FOR_ARCHS=	${NO_SHARED_ARCHS}
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
d22 2
a23 1
WANTLIB=	GL GLU X11 Xext Xinerama Xv c freetype m pthread usbhid z
d37 1
a37 1
		avcodec.4.9,avformat.4.9::graphics/ffmpeg \
d44 1
a44 1
		LIBS="-logg -lm" \
@


1.17
log
@update to 0.8.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2004/10/05 20:49:08 naddy Exp $
d8 1
d29 1
a29 1
		wx_gtk2.2.4::x11/wxWidgets/gtk2 \
@


1.16
log
@Make sure that the dynamic libiconv and libintl are found.  Linking
with the static ones leads to problems down the road.  ok jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2004/09/15 19:23:50 espie Exp $
d6 1
a6 2

V=		0.7.2
d9 1
a9 2
MASTER_SITES=	http://www.videolan.org/pub/videolan/vlc/${V}/ \
		http://www.fr.videolan.org/pub/videolan/vlc/${V}/
a12 2
MAINTAINER=	Jolan Luff <jolan@@openbsd.org>

d21 2
d25 13
a37 12
LIB_DEPENDS=	SDL::devel/sdl \
		gtk.1.2,gdk.1.2::x11/gtk+ \
		glib,gthread::devel/glib \
		png::graphics/png \
		id3tag.2::audio/libid3tag \
		mad.2::audio/libmad \
		ogg::audio/libogg \
		vorbis,vorbisenc::audio/libvorbis \
		mpeg2::graphics/libmpeg2 \
		avcodec::graphics/ffmpeg \
		fribidi::devel/fribidi \
		faad::audio/faad
d42 2
a43 1
		LIBS="-logg" \
a49 2
		--disable-dvd \
		--disable-dvdnav \
a54 1
		--disable-wxwindows \
d58 1
d84 1
a84 1
CONFIGURE_ARGS+=--disable-a52 --disable-dvdplay --disable-dvdread
d86 4
a89 4
CONFIGURE_ARGS+=--enable-a52 --enable-dvdplay --enable-dvdread
LIB_DEPENDS+=	a52::audio/liba52 \
		dvdplay::devel/libdvdplay \
		dvdread::devel/libdvdread
@


1.15
log
@new style fragment/plist
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/08/10 11:16:44 xsa Exp $
d40 2
a41 1
CONFIGURE_STYLE=gnu
@


1.14
log
@
more new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/08/04 16:39:21 naddy Exp $
d74 1
a74 1
SED_PLIST+=	|sed -e '/^IF${MACHINE_ARCH}:/s///'
d76 1
a76 1
SED_PLIST+=	|sed -e '/^IFi386:/d'
@


1.13
log
@fix up MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/07/10 01:49:42 jolan Exp $
d25 1
a25 1
MODULES=	gettext
@


1.12
log
@update to 0.7.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/04/28 01:30:53 jolan Exp $
d67 2
@


1.11
log
@enable faad support, bump pkgname
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.10 2004/04/18 00:42:14 jolan Exp $
d7 2
a8 3
VER=		0.7.1
DISTNAME=	vlc-${VER}
PKGNAME=	${DISTNAME}p0
d10 2
a11 2
MASTER_SITES=	http://www.videolan.org/pub/videolan/vlc/${VER}/ \
		http://www.fr.videolan.org/pub/videolan/vlc/${VER}/
a34 1
		dvbpsi.1.1::graphics/libdvbpsi \
d44 2
a45 1
CONFIGURE_ARGS+=--disable-oss \
d49 3
d53 4
a56 1
		--disable-dvd \
d60 7
a66 2
		--enable-faad

a74 6
.endif

.if ${MACHINE_ARCH} == "powerpc"
SED_PLIST+=	|sed -e '/^IF${MACHINE_ARCH}:/s///'
.else
SED_PLIST+=	|sed -e '/^IFpowerpc:/d'
@


1.10
log
@update to 0.7.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/12/10 21:28:59 naddy Exp $
d7 1
d37 2
a38 1
		fribidi::devel/fribidi
d52 2
a53 1
		--disable-speex
@


1.9
log
@fix dependencies: audio/mad -> audio/libid3tag, audio/libmad, audio/madplayer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/11/04 07:48:26 jolan Exp $
d5 1
a5 1
VER=		0.6.2
a6 1
PKGNAME=	${DISTNAME}p2
d35 2
a36 1
		avcodec::graphics/ffmpeg
d40 1
d47 5
a51 1
		--disable-dvd
@


1.8
log
@prepare for ffmpeg 0.4.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2003/10/18 01:13:17 jolan Exp $
d30 2
a31 1
		mad.1,id3tag.1::audio/mad \
@


1.7
log
@enable use of graphics/libdvbpsi
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/08/18 22:14:56 jolan Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p1
@


1.6
log
@add a mirror and use a more practical default dvd device
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/08/16 20:36:12 jolan Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
d33 1
a41 1
		--disable-dvbpsi \
d51 1
a51 1
SED_PLIST+=	|sed -e '/^IFCRAPPYHW:/s///'
d53 1
a53 1
SED_PLIST+=	|sed -e '/^IFCRAPPYHW:/d'
d57 1
a57 1
SED_PLIST+=	|sed -e '/^IFPPC:/s///'
d59 1
a59 1
SED_PLIST+=	|sed -e '/^IFPPC:/d'
@


1.5
log
@- don't install the plugin which reads divx subtitles from a file.  it
  isn't built correctly which causes problems on macppc and it isn't
  popular/useful anyway.  this will be properly fixed "soon".
- remove NOT_FOR_ARCHS=powerpc as it seems to "work" on my ibook
  (to the extent that it can without accelerated video and problematic
   audio)
- use SED_PLIST, rather than the dirty FLAVOR+=${MACHINE_ARCH} hack, it
  makes the index entry look prettier.
- adjust PLIST accordingly, and also add the logo plugin (useless?)
- adjust LIB_DEPENDS for the liba52 change and logo plugin

thanks to drahn@@ for help, hints, & suggestions
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2003/08/15 14:25:59 jolan Exp $
d9 2
a10 1
MASTER_SITES=	http://www.videolan.org/pub/videolan/vlc/${VER}/
@


1.4
log
@Update to 0.6.2.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.3 2003/08/03 03:41:20 jolan Exp $

# exits immediately (?)
NOT_FOR_ARCHS=	powerpc
d7 1
d28 1
d31 1
a31 1
		vorbis::audio/libvorbis \
d36 2
a37 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" LDFLAGS="-L${LOCALBASE}/lib"
d46 1
a46 1
FLAVORS=	i386 powerpc no_dvd
d49 10
a58 2
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "powerpc"
FLAVOR+=${MACHINE_ARCH}
d70 2
a71 2
BUILD_DEPENDS+=	::audio/liba52
LIB_DEPENDS+=	dvdplay::devel/libdvdplay \
@


1.3
log
@initialization of a window for video fails on sparc64 unless
-mhard-quad-float is used.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/08/02 10:29:28 jolan Exp $
d8 1
a8 1
VER=		0.6.1
@


1.2
log
@update to 0.6.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/07/20 21:09:29 jolan Exp $
d51 5
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
a8 1
VER=		0.6.0
@


1.1.1.1
log
@import of videolan client 0.6.0:

VLC (VideoLAN Client) is a highly portable multimedia player for various
audio and video formats (MPEG-1, MPEG-2, MPEG-4, DivX, mp3, ogg, ...) as
well as DVDs, and various streaming protocols.
@
text
@@
