head	1.133;
access;
symbols
	OPENBSD_6_2_BASE:1.133
	OPENBSD_6_1:1.133.0.4
	OPENBSD_6_1_BASE:1.133
	OPENBSD_6_0:1.132.0.4
	OPENBSD_6_0_BASE:1.132
	OPENBSD_5_9:1.132.0.2
	OPENBSD_5_9_BASE:1.132
	OPENBSD_5_8:1.131.0.6
	OPENBSD_5_8_BASE:1.131
	OPENBSD_5_7:1.131.0.2
	OPENBSD_5_7_BASE:1.131
	OPENBSD_5_6:1.130.0.10
	OPENBSD_5_6_BASE:1.130
	OPENBSD_5_5:1.130.0.8
	OPENBSD_5_5_BASE:1.130
	OPENBSD_5_4:1.130.0.4
	OPENBSD_5_4_BASE:1.130
	OPENBSD_5_3:1.130.0.2
	OPENBSD_5_3_BASE:1.130
	OPENBSD_5_2:1.129.0.2
	OPENBSD_5_2_BASE:1.129
	OPENBSD_5_1_BASE:1.128
	OPENBSD_5_1:1.128.0.4
	OPENBSD_5_0:1.128.0.2
	OPENBSD_5_0_BASE:1.128
	OPENBSD_4_9:1.127.0.2
	OPENBSD_4_9_BASE:1.127
	OPENBSD_4_8:1.126.0.2
	OPENBSD_4_8_BASE:1.126
	OPENBSD_4_7:1.125.0.8
	OPENBSD_4_7_BASE:1.125
	OPENBSD_4_6:1.125.0.10
	OPENBSD_4_6_BASE:1.125
	OPENBSD_4_5:1.125.0.6
	OPENBSD_4_5_BASE:1.125
	OPENBSD_4_4:1.125.0.4
	OPENBSD_4_4_BASE:1.125
	OPENBSD_4_3:1.125.0.2
	OPENBSD_4_3_BASE:1.125
	OPENBSD_4_2:1.124.0.2
	OPENBSD_4_2_BASE:1.124
	OPENBSD_4_1:1.121.0.2
	OPENBSD_4_1_BASE:1.121
	OPENBSD_4_0:1.118.0.2
	OPENBSD_4_0_BASE:1.118
	OPENBSD_3_9:1.108.0.2
	OPENBSD_3_9_BASE:1.108
	OPENBSD_3_8:1.107.0.2
	OPENBSD_3_8_BASE:1.107
	OPENBSD_3_7:1.98.0.2
	OPENBSD_3_7_BASE:1.98
	OPENBSD_3_6:1.94.0.2
	OPENBSD_3_6_BASE:1.94
	OPENBSD_3_5:1.89.0.2
	OPENBSD_3_5_BASE:1.89
	OPENBSD_3_4:1.85.0.2
	OPENBSD_3_4_BASE:1.85
	OPENBSD_3_3:1.76.0.2
	OPENBSD_3_3_BASE:1.76
	OPENBSD_3_2:1.67.0.2
	OPENBSD_3_2_BASE:1.67
	OPENBSD_3_1:1.64.0.2
	OPENBSD_3_1_BASE:1.64
	OPENBSD_3_0:1.59.0.2
	OPENBSD_3_0_BASE:1.59
	OPENBSD_2_9:1.50.0.2
	OPENBSD_2_9_BASE:1.50
	OPENBSD_2_8:1.42.0.2
	OPENBSD_2_8_BASE:1.42
	OPENBSD_2_7:1.37.0.2
	OPENBSD_2_7_BASE:1.37
	OPENBSD_2_6:1.27.0.2
	OPENBSD_2_6_BASE:1.27
	OPENBSD_2_5:1.14.0.2
	OPENBSD_2_5_BASE:1.14
	NIKLAS_981114:1.1.1.1
	NIKLAS:1.1.1;
locks; strict;
comment	@.\" @;


1.133
date	2017.01.01.01.08.11;	author tb;	state Exp;
branches;
next	1.132;
commitid	wnNuSAo7K6MoaRxC;

1.132
date	2015.12.09.21.41.50;	author naddy;	state Exp;
branches;
next	1.131;
commitid	CLwtYUTkBZ3FXV1w;

1.131
date	2015.01.16.15.37.20;	author schwarze;	state Exp;
branches;
next	1.130;
commitid	aARdQM43cgs5lXTf;

1.130
date	2012.08.12.17.01.35;	author schwarze;	state Exp;
branches;
next	1.129;

1.129
date	2012.06.30.14.51.31;	author naddy;	state Exp;
branches;
next	1.128;

1.128
date	2011.06.23.20.35.22;	author sthen;	state Exp;
branches;
next	1.127;

1.127
date	2010.09.22.13.45.16;	author mikeb;	state Exp;
branches;
next	1.126;

1.126
date	2010.06.07.08.38.09;	author jmc;	state Exp;
branches;
next	1.125;

1.125
date	2008.02.17.10.36.32;	author hshoexer;	state Exp;
branches;
next	1.124;

1.124
date	2007.05.31.19.19.45;	author jmc;	state Exp;
branches;
next	1.123;

1.123
date	2007.05.23.07.28.15;	author hshoexer;	state Exp;
branches;
next	1.122;

1.122
date	2007.03.18.22.31.40;	author hshoexer;	state Exp;
branches;
next	1.121;

1.121
date	2007.02.19.14.17.56;	author jmc;	state Exp;
branches;
next	1.120;

1.120
date	2007.02.19.10.00.13;	author hshoexer;	state Exp;
branches;
next	1.119;

1.119
date	2006.11.24.13.52.14;	author reyk;	state Exp;
branches;
next	1.118;

1.118
date	2006.09.15.09.49.07;	author hshoexer;	state Exp;
branches;
next	1.117;

1.117
date	2006.08.30.16.56.56;	author hshoexer;	state Exp;
branches;
next	1.116;

1.116
date	2006.06.11.11.07.41;	author hshoexer;	state Exp;
branches;
next	1.115;

1.115
date	2006.06.11.00.20.36;	author jmc;	state Exp;
branches;
next	1.114;

1.114
date	2006.06.10.21.23.50;	author hshoexer;	state Exp;
branches;
next	1.113;

1.113
date	2006.06.10.21.09.45;	author msf;	state Exp;
branches;
next	1.112;

1.112
date	2006.05.27.21.09.11;	author hshoexer;	state Exp;
branches;
next	1.111;

1.111
date	2006.05.26.09.30.36;	author jmc;	state Exp;
branches;
next	1.110;

1.110
date	2006.05.26.09.26.07;	author jmc;	state Exp;
branches;
next	1.109;

1.109
date	2006.05.26.04.02.59;	author deraadt;	state Exp;
branches;
next	1.108;

1.108
date	2005.10.06.18.29.18;	author hshoexer;	state Exp;
branches;
next	1.107;

1.107
date	2005.08.23.13.19.22;	author jmc;	state Exp;
branches;
next	1.106;

1.106
date	2005.06.11.08.31.40;	author jmc;	state Exp;
branches;
next	1.105;

1.105
date	2005.05.31.14.28.39;	author hshoexer;	state Exp;
branches;
next	1.104;

1.104
date	2005.05.23.23.09.39;	author cloder;	state Exp;
branches;
next	1.103;

1.103
date	2005.05.12.08.03.11;	author jmc;	state Exp;
branches;
next	1.102;

1.102
date	2005.05.05.09.20.27;	author jmc;	state Exp;
branches;
next	1.101;

1.101
date	2005.05.05.09.00.50;	author jmc;	state Exp;
branches;
next	1.100;

1.100
date	2005.05.05.08.42.27;	author jmc;	state Exp;
branches;
next	1.99;

1.99
date	2005.04.06.00.04.53;	author cloder;	state Exp;
branches;
next	1.98;

1.98
date	2005.02.22.21.44.55;	author moritz;	state Exp;
branches;
next	1.97;

1.97
date	2005.01.05.23.34.37;	author jmc;	state Exp;
branches;
next	1.96;

1.96
date	2005.01.05.10.23.53;	author hshoexer;	state Exp;
branches;
next	1.95;

1.95
date	2004.12.14.10.17.28;	author mcbride;	state Exp;
branches;
next	1.94;

1.94
date	2004.08.10.15.59.10;	author ho;	state Exp;
branches;
next	1.93;

1.93
date	2004.07.08.10.37.12;	author jmc;	state Exp;
branches;
next	1.92;

1.92
date	2004.07.07.22.25.39;	author hshoexer;	state Exp;
branches;
next	1.91;

1.91
date	2004.06.26.11.32.32;	author jmc;	state Exp;
branches;
next	1.90;

1.90
date	2004.06.21.23.42.40;	author ho;	state Exp;
branches;
next	1.89;

1.89
date	2004.02.27.19.07.16;	author hshoexer;	state Exp;
branches;
next	1.88;

1.88
date	2004.02.26.05.52.16;	author jmc;	state Exp;
branches;
next	1.87;

1.87
date	2004.02.25.16.01.28;	author hshoexer;	state Exp;
branches;
next	1.86;

1.86
date	2003.11.05.12.55.13;	author jmc;	state Exp;
branches;
next	1.85;

1.85
date	2003.08.28.14.43.35;	author markus;	state Exp;
branches;
next	1.84;

1.84
date	2003.08.09.08.45.58;	author jmc;	state Exp;
branches;
next	1.83;

1.83
date	2003.07.25.08.31.16;	author markus;	state Exp;
branches;
next	1.82;

1.82
date	2003.07.09.08.16.44;	author jmc;	state Exp;
branches;
next	1.81;

1.81
date	2003.06.03.14.28.16;	author ho;	state Exp;
branches;
next	1.80;

1.80
date	2003.06.03.13.16.08;	author jmc;	state Exp;
branches;
next	1.79;

1.79
date	2003.05.17.17.26.40;	author jmc;	state Exp;
branches;
next	1.78;

1.78
date	2003.05.16.20.31.16;	author ho;	state Exp;
branches;
next	1.77;

1.77
date	2003.05.10.21.13.41;	author jmc;	state Exp;
branches;
next	1.76;

1.76
date	2003.03.21.15.13.26;	author markus;	state Exp;
branches;
next	1.75;

1.75
date	2003.03.06.20.29.24;	author jmc;	state Exp;
branches;
next	1.74;

1.74
date	2003.03.03.16.51.38;	author ho;	state Exp;
branches;
next	1.73;

1.73
date	2003.02.22.06.56.20;	author kjell;	state Exp;
branches;
next	1.72;

1.72
date	2003.01.19.21.02.15;	author deraadt;	state Exp;
branches;
next	1.71;

1.71
date	2003.01.09.13.12.42;	author ho;	state Exp;
branches;
next	1.70;

1.70
date	2002.11.27.14.36.20;	author ho;	state Exp;
branches;
next	1.69;

1.69
date	2002.11.15.14.58.38;	author ho;	state Exp;
branches;
next	1.68;

1.68
date	2002.11.09.00.57.20;	author fgsch;	state Exp;
branches;
next	1.67;

1.67
date	2002.08.07.13.19.20;	author ho;	state Exp;
branches;
next	1.66;

1.66
date	2002.08.02.13.27.22;	author ho;	state Exp;
branches;
next	1.65;

1.65
date	2002.06.09.08.13.06;	author todd;	state Exp;
branches;
next	1.64;

1.64
date	2002.04.10.20.56.57;	author ho;	state Exp;
branches;
next	1.63;

1.63
date	2002.03.01.15.25.17;	author ho;	state Exp;
branches;
next	1.62;

1.62
date	2001.12.21.11.41.50;	author mpech;	state Exp;
branches;
next	1.61;

1.61
date	2001.12.13.20.16.48;	author mpech;	state Exp;
branches;
next	1.60;

1.60
date	2001.12.10.03.45.03;	author ho;	state Exp;
branches;
next	1.59;

1.59
date	2001.10.11.13.24.31;	author ho;	state Exp;
branches;
next	1.58;

1.58
date	2001.10.04.23.31.27;	author ho;	state Exp;
branches;
next	1.57;

1.57
date	2001.08.15.09.16.30;	author ho;	state Exp;
branches;
next	1.56;

1.56
date	2001.08.02.09.55.38;	author ho;	state Exp;
branches;
next	1.55;

1.55
date	2001.07.04.22.01.13;	author angelos;	state Exp;
branches;
next	1.54;

1.54
date	2001.06.27.03.31.42;	author angelos;	state Exp;
branches;
next	1.53;

1.53
date	2001.06.05.11.20.28;	author angelos;	state Exp;
branches;
next	1.52;

1.52
date	2001.05.05.00.49.38;	author angelos;	state Exp;
branches;
next	1.51;

1.51
date	2001.04.30.13.53.26;	author ho;	state Exp;
branches;
next	1.50;

1.50
date	2001.04.05.23.04.53;	author ho;	state Exp;
branches;
next	1.49;

1.49
date	2001.03.07.07.33.53;	author angelos;	state Exp;
branches;
next	1.48;

1.48
date	2001.01.27.12.03.33;	author niklas;	state Exp;
branches;
next	1.47;

1.47
date	2001.01.26.11.08.58;	author niklas;	state Exp;
branches;
next	1.46;

1.46
date	2000.12.15.14.31.18;	author aaron;	state Exp;
branches;
next	1.45;

1.45
date	2000.12.12.01.46.05;	author niklas;	state Exp;
branches;
next	1.44;

1.44
date	2000.11.23.12.56.06;	author niklas;	state Exp;
branches;
next	1.43;

1.43
date	2000.11.09.22.50.06;	author aaron;	state Exp;
branches;
next	1.42;

1.42
date	2000.10.16.23.28.22;	author niklas;	state Exp;
branches
	1.42.2.1;
next	1.41;

1.41
date	2000.10.09.23.27.31;	author niklas;	state Exp;
branches;
next	1.40;

1.40
date	2000.10.07.07.00.08;	author niklas;	state Exp;
branches;
next	1.39;

1.39
date	2000.08.03.07.24.14;	author niklas;	state Exp;
branches;
next	1.38;

1.38
date	2000.06.08.20.51.00;	author niklas;	state Exp;
branches;
next	1.37;

1.37
date	2000.05.02.14.36.18;	author niklas;	state Exp;
branches;
next	1.36;

1.36
date	2000.04.12.21.47.59;	author aaron;	state Exp;
branches;
next	1.35;

1.35
date	2000.04.07.22.23.14;	author niklas;	state Exp;
branches;
next	1.34;

1.34
date	2000.04.07.22.06.57;	author niklas;	state Exp;
branches;
next	1.33;

1.33
date	2000.03.23.21.39.56;	author aaron;	state Exp;
branches;
next	1.32;

1.32
date	2000.03.22.04.06.17;	author angelos;	state Exp;
branches;
next	1.31;

1.31
date	2000.03.18.22.55.59;	author aaron;	state Exp;
branches;
next	1.30;

1.30
date	2000.01.31.08.38.28;	author niklas;	state Exp;
branches;
next	1.29;

1.29
date	2000.01.26.15.22.52;	author niklas;	state Exp;
branches;
next	1.28;

1.28
date	2000.01.22.13.39.28;	author aaron;	state Exp;
branches;
next	1.27;

1.27
date	99.10.01.14.09.58;	author niklas;	state Exp;
branches;
next	1.26;

1.26
date	99.09.23.04.12.02;	author alex;	state Exp;
branches;
next	1.25;

1.25
date	99.08.26.22.28.43;	author niklas;	state Exp;
branches;
next	1.24;

1.24
date	99.07.18.09.49.07;	author niklas;	state Exp;
branches;
next	1.23;

1.23
date	99.07.18.09.33.33;	author niklas;	state Exp;
branches;
next	1.22;

1.22
date	99.07.17.21.54.39;	author niklas;	state Exp;
branches;
next	1.21;

1.21
date	99.07.09.13.35.49;	author aaron;	state Exp;
branches;
next	1.20;

1.20
date	99.07.07.22.07.00;	author niklas;	state Exp;
branches;
next	1.19;

1.19
date	99.07.03.02.11.07;	author aaron;	state Exp;
branches;
next	1.18;

1.18
date	99.06.02.06.34.27;	author niklas;	state Exp;
branches;
next	1.17;

1.17
date	99.05.16.19.56.15;	author alex;	state Exp;
branches;
next	1.16;

1.16
date	99.05.01.20.43.43;	author niklas;	state Exp;
branches;
next	1.15;

1.15
date	99.04.27.20.55.52;	author niklas;	state Exp;
branches;
next	1.14;

1.14
date	99.04.01.00.37.50;	author niklas;	state Exp;
branches;
next	1.13;

1.13
date	99.03.31.23.47.23;	author niklas;	state Exp;
branches;
next	1.12;

1.12
date	99.03.31.20.30.21;	author niklas;	state Exp;
branches;
next	1.11;

1.11
date	99.03.31.00.51.29;	author niklas;	state Exp;
branches;
next	1.10;

1.10
date	99.03.24.15.43.36;	author niklas;	state Exp;
branches;
next	1.9;

1.9
date	99.03.24.14.43.53;	author niklas;	state Exp;
branches;
next	1.8;

1.8
date	99.03.11.01.35.03;	author pjanzen;	state Exp;
branches;
next	1.7;

1.7
date	99.02.26.03.45.09;	author niklas;	state Exp;
branches;
next	1.6;

1.6
date	98.12.21.01.02.25;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	98.11.28.19.56.32;	author aaron;	state Exp;
branches;
next	1.4;

1.4
date	98.11.20.23.47.42;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	98.11.17.11.10.15;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	98.11.15.00.43.59;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	98.11.15.00.03.49;	author niklas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.11.15.00.03.49;	author niklas;	state Exp;
branches;
next	;

1.42.2.1
date	2001.05.08.12.45.23;	author ho;	state Exp;
branches;
next	;


desc
@@


1.133
log
@Hyphenate compound adjectives 'up-to-date', 'out-of-date' and 'well-known'
if they precede the noun and omit hyphens otherwise.

ok tj
@
text
@.\" $OpenBSD: isakmpd.conf.5,v 1.132 2015/12/09 21:41:50 naddy Exp $
.\" $EOM: isakmpd.conf.5,v 1.57 2000/12/21 14:43:17 ho Exp $
.\"
.\" Copyright (c) 1998, 1999, 2000 Niklas Hallqvist.  All rights reserved.
.\" Copyright (c) 2000, 2001, 2002 Håkan Olsson.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
.\" IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
.\" OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
.\" IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
.\" INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
.\" NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
.\" DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
.\" THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
.\" (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
.\" THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
.\"
.\" This code was written under funding by Ericsson Radio Systems.
.\"
.\" Manual page, using -mandoc macros
.\"
.Dd $Mdocdate: December 9 2015 $
.Dt ISAKMPD.CONF 5
.Os
.Sh NAME
.Nm isakmpd.conf
.Nd configuration file for isakmpd
.Sh DESCRIPTION
.Nm
is the configuration file for the
.Xr isakmpd 8
daemon, managing security association and key management for the
IPsec layer of the kernel's networking stack.
.Pp
The file is of a well-known type of format called .INI style, named after
the suffix used by an overrated windowing environment for its configuration
files.
This format consists of sections, each beginning with a line looking like:
.Bd -unfilled
.Bq Sy Section name
.Ed
Between the brackets is the name of the section following this section header.
Inside a section many tag/value pairs can be stored, each one looking like:
.Bd -unfilled
.Ar Tag Ns = Ns Ar Value
.Ed
The current line can be extended over multiple lines using a backslash
.Pq Sq \e .
Comments can be put anywhere in the file using a hash mark
.Pq Sq # ,
and extend to the end of the current line.
Care should be taken when commenting out multi-line text:
the comment remains in effect until the end of the entire current line.
.Pp
Often the right-hand side values consist of other section names.
This results in a tree structure.
Some values are treated as a list of several scalar values.
Such lists always use a comma character as the separator.
Some values are formatted like this: X,Y:Z, which
is an offer/accept syntax, where X is a value we offer and Y:Z is a range of
accepted values, inclusive.
.Pp
To activate changes to
.Nm
without restarting
.Xr isakmpd 8 ,
send a
.Dv SIGHUP
signal to the daemon process.
.Sh AUTO-GENERATED PARTS OF THE CONFIGURATION
Some predefined section names are recognized by the daemon, avoiding the need
to fully specify the Main Mode transforms and Quick Mode suites, protocols,
and transforms.
.Pp
For Main Mode:
.\" cipher-hash[-group][-RSA_SIG]
.Bl -inset -compact
.It Xo
.Sm off
.Ar cipher No - Ar hash
.Op - Ar group
.Op -RSA_SIG
.Sm on
.Xc
.El
.Pp
where:
.Bl -tag -width "cipher" -offset indent -compact
.It Ar cipher
is either BLF, 3DES, CAST, AES, AES-128, AES-192 or AES-256
.It Ar hash
is either MD5, SHA, or SHA2-{256,384,512}
.It Ar group
is either GRP1, GRP2, GRP5, GRP14, or GRP15
.El
.Pp
For Quick Mode:
.\" QM-proto[-TRP]-cipher[-hash][-PFS[-group]]-SUITE
.Bl -inset -compact
.It Xo
.Sm off
.No QM- Ar proto Op -TRP
.No - Ar cipher Op - Ar hash
.Op -PFS Op - Ar group
.No -SUITE
.Sm on
.Xc
.El
.Pp
where:
.Bl -tag -width "cipher" -offset indent -compact
.It Ar proto
is either ESP or AH
.It Ar cipher
is either 3DES, CAST, BLF, AES, AES-128, AES-192, AES-256, AESCTR,
AESCTR-128, AESCTR-192, AESCTR-256,
AESGCM-128, AESGCM-192, AESGCM-256, AESGMAC-128, AESGMAC-192, AESGMAC-256
or NULL
.It Ar hash
is either MD5, SHA, RIPEMD, or SHA2-{256,384,512}
.It Ar group
is either GRP1, GRP2, GRP5, GRP14, or GRP15
.El
.Pp
For example, AES-SHA2-256 means: AES encryption, SHA2-256 hash, and
authorization by pre-shared keys.
Adding "-RSA_SIG" will enable public key authentication,
e.g. AES-SHA2-256-RSA_SIG.
Similarly, QM-ESP-3DES-SHA-PFS-SUITE means: ESP protocol, 3DES encryption,
SHA hash, and use Perfect Forward Secrecy.
.Pp
Unless explicitly stated with -GRP1, 2, 5, 14 or 15, transforms and
PFS suites use DH group 2.
There are currently no predefined ESP+AH Quick Mode suites.
.Pp
The predefinitions include some default values for the special
sections "General", "Keynote", "X509-certificates", and
"Default-phase-1-configuration".
These default values are presented in the example below.
.Pp
All autogenerated values can be overridden by manual entries by using the
same section and tag names in the configuration file.
In particular, the default phase 1 (Main or Aggressive Mode) and phase 2
(Quick Mode) lifetimes can be overridden by these tags under the "General"
section:
.Bd -literal -offset indent
[General]
Default-phase-1-lifetime=	3600,60:86400
Default-phase-2-lifetime=	1200,60:86400
.Ed
.Pp
The Main Mode lifetime currently defaults to one hour (minimum 60
seconds, maximum 1 day).
The Quick Mode lifetime defaults to 20 minutes
(minimum 60 seconds, maximum 1 day).
.Pp
Also, the default phase 1 ID can be set by creating a
.Aq Sy Phase1-ID
section, as shown below, and adding this tag under the "General"
section:
.Bd -literal -offset indent
[General]
Default-phase-1-ID=		Phase1-ID-name

[Phase1-ID-name]
ID-type=			USER_FQDN
Name=				foo@@bar.com
.Ed
.Sh ROOTS
.Bl -hang -width 8n
.It Bq Sy General
Generic global configuration parameters
.Bl -tag -width Ds
.It Em Acquire-Only
If this tag is defined,
.Xr isakmpd 8
will not set up flows automatically.
This is useful when flows are configured with
.Xr ipsecctl 8
or by other programs like
.Xr bgpd 8 .
Thus
.Xr isakmpd 8
only takes care of the SA establishment.
.It Em Check-interval
The interval between watchdog checks of connections we want up at all
times, in seconds.
The default value is 60 seconds.
.It Em Default-phase-1-ID
Optional default phase 1 ID name.
.It Em Default-phase-1-lifetime
The default lifetime for autogenerated transforms (phase 1).
If unspecified, the value 3600,60:86400 is used as the default.
.It Em Default-phase-2-lifetime
The default lifetime for autogenerated suites (phase 2).
If unspecified, the value 1200,60:86400 is used as the default.
.It Em Default-phase-2-suites
A list of phase 2 suites that will be used when establishing dynamic
SAs.
If left unspecified, QM-ESP-3DES-SHA-PFS-SUITE is used as the default.
.It Em DPD-check-interval
The interval between RFC 3706 (Dead Peer Detection) messages, in seconds.
The default value is 0 (zero), which means DPD is disabled.
.It Em Exchange-max-time
How many seconds should an exchange maximally take to set up before we
give up.
.It Em Listen-on
A list of IP addresses or interface names OK to listen on.
This list is used as a filter for the set of addresses the interfaces
configured provides.
This means that we won't see if an address given here does not exist
on this host, and thus no error is given for that case.
.It Em Loglevel
A list of the form
.Ar class Ns = Ns Ar level ,
where both
.Ar class
and
.Ar level
are numbers.
This is similar to the
.Fl D
command line switch of
.Xr isakmpd 8 .
.It Em Logverbose
If this tag is defined, whatever the value is, verbose logging is enabled.
This is similar to the
.Fl v
command line switch of
.Xr isakmpd 8 .
.It Em NAT-T-Keepalive
The number of seconds between NAT-T keepalive messages, sent by the
peer behind NAT to keep the mapping active.
Defaults to 20.
.It Em Policy-file
The name of the file that contains
.Xr keynote 4
policies.
The default is
.Pa /etc/isakmpd/isakmpd.policy .
.It Em Pubkey-directory
The directory in which
.Nm
looks for explicitly trusted public keys.
The default is
.Pa /etc/isakmpd/pubkeys .
Read
.Xr isakmpd 8
for the required naming convention of the files in here.
.It Em Renegotiate-on-HUP
If this tag is defined, whatever the value is,
.Xr isakmpd 8
will renegotiate all current phase 2 SAs when the daemon receives a
.Dv SIGHUP
signal, or an
.Sq R
is sent to the FIFO interface (see
.Xr isakmpd 8 ) .
.It Em Retransmits
How many times should a message be retransmitted before giving up.
.It Em Shared-SADB
If this tag is defined, whatever the value is, some semantics of
.Nm
are changed so that multiple instances can run on top of one SADB
and set up SAs with each other.
Specifically this means replay
protection will not be asked for, and errors that can occur when
updating an SA with its parameters a 2nd time will be ignored.
.It Em Use-Keynote
This tag controls the use of
.Xr keynote 4
policy checking.
The default value is
.Qq yes ,
which enables the policy checking.
When set to any other value, policies will not be checked.
This is useful when policies for flows and SA establishment are arranged by
other programs like
.Xr ipsecctl 8
or
.Xr bgpd 8 .
.El
.It Bq Sy Phase 1
ISAKMP SA negotiation parameter root
.Bl -tag -width Ds
.It Em Default
A name of the default ISAKMP peer.
Incoming phase 1 connections from other IP addresses will use this peer name.
This name is used as the section name for further information to be found.
Look at
.Aq Sy ISAKMP-peer
below.
.It Aq Em IP-address
A name of the ISAKMP peer at the given IP address.
.El
.It Bq Sy Phase 2
IPsec SA negotiation parameter root
.Bl -tag -width Ds
.It Em Connections
A list of directed IPsec "connection" names that should be brought up
automatically, either on first use if the system supports it, or at
startup of the daemon.
These names are section names where further information can be found.
Look at
.Aq Sy IPsec-connection
below.
Normally any connections mentioned here are treated as part of the
"Passive-connection" list we present below; however there is a flag,
.Em Active-only ,
that disables this behaviour.
This too is mentioned in the
.Aq Sy IPsec-connection
section, in the "Flags" tag.
.It Em Passive-connections
A list of IPsec "connection" names we recognize and accept initiations for.
These names are section names where further information can be found.
Look at
.Aq Sy IPsec-connection
below.
Currently only the Local-ID and Remote-ID tags
are looked at in those sections, as they are matched against the IDs given
by the initiator.
.El
.It Bq Sy KeyNote
KeyNote configuration section
.Bl -tag -width Ds
.It Em Credential-directory
A directory containing directories named after IDs (IP
addresses,
.Dq user@@domain ,
or hostnames) that contain files named
.Dq credentials
and
.Dq private_key .
.Pp
The credentials file contains
.Xr keynote 4
credentials that are sent to a remote IKE daemon when we use the
associated ID, or credentials that we may want to consider when doing
an exchange with a remote IKE daemon that uses that ID.
Note that, in the former case, the last credential in the file
MUST contain our public key in its Licensees field.
More than one credentials may exist in the file.
They are separated by whitelines (the format is essentially the same as
that of the policy file).
The credentials are of the same format as the policies described in
.Xr isakmpd.policy 5 .
The only difference is that the Authorizer field contains a public
key, and the assertion is signed.
Signed assertions can be generated using the
.Xr keynote 1
utility.
.Pp
The private_key file contains the private RSA key we use for
authentication.
If the directory (and the files) exist, they take precedence over X509-based
authentication.
.El
.It Bq Sy X509-Certificates
X509-certificate configuration section
.Bl -tag -width Ds
.It Em Accept-self-signed
If this tag is defined, whatever the value is, certificates that
do not originate from a trusted CA but are self-signed will be
accepted.
.It Em Ca-directory
A directory containing PEM certificates of certification authorities
that we trust to sign other certificates.
Note that for a CA to be really trusted, it needs to be somehow
referred to by policy, in
.Xr isakmpd.policy 5 .
The certificates in this directory are used for the actual X.509
authentication and for cross-referencing policies that refer to
Distinguished Names (DNs).
Keeping a separate directory (as opposed to integrating policies
and X.509 CA certificates) allows for maintenance of a list of
"well-known" CAs without actually having to trust all (or any) of them.
.It Em Cert-directory
A directory containing PEM certificates that we trust to be valid.
These certificates are used in preference to those passed in messages and
are required to have a subjectAltName extension containing the certificate
holder identity; usually IP address, FQDN, or User FQDN.
.It Em Private-key
The private key matching the public key of our certificate (which should be
in the "Cert-directory", and have an appropriate subjectAltName field).
.It Em Private-key-directory
A directory containing private keys named after an ID (IP addresses,
.Dq user@@domain ,
or hostnames).
.El
.El
.Sh REFERRED-TO SECTIONS
.Bl -hang -width Ds
.It Aq Sy ISAKMP-peer
Parameters for negotiation with an ISAKMP peer
.Bl -tag -width Ds
.It Em Address
If existent, the IP address of the peer.
.It Em Authentication
If existent, authentication data for this specific peer.
In the case of a pre-shared key, this is the key value itself.
.It Em Configuration
The name of the ISAKMP-configuration section to use.
Look at
.Aq Sy ISAKMP-configuration
below.
If unspecified, defaults to "Default-phase-1-configuration".
.It Em Flags
A comma-separated list of flags controlling the further
handling of the ISAKMP SA.
Currently there are no specific ISAKMP SA flags defined.
.It Em ID
If existent, the name of the section that describes the
local client ID that we should present to our peer.
If not present, it
defaults to the address of the local interface we are sending packets
over to the remote daemon.
Look at
.Aq Sy Phase1-ID
below.
.It Em Local-address
The Local IP address to use, if we are multi-homed, or have aliases.
.It Em Phase
The constant
.Sq 1 ,
as ISAKMP-peers and IPsec-connections
really are handled by the same code inside
.Xr isakmpd 8 .
.It Em Port
For UDP, the UDP port number to send to.
This is optional;
the default value is 500 which is the IANA-registered number for ISAKMP.
.It Em Remote-ID
If existent, the name of the section that describes the remote client
ID we expect the remote daemon to send us.
If not present, it defaults to the address of the remote daemon.
Look at
.Aq Sy Phase1-ID
below.
.It Em Transport
The name of the transport protocol; defaults to UDP.
.El
.It Aq Sy Phase1-ID
Parameters for Phase 1 negotiation
.Bl -tag -width Ds
.It Em Address
If the ID-type is
.Li IPV4_ADDR
or
.Li IPV6_ADDR ,
this tag should exist and be an IP address.
.It Em ID-type
The ID type as given by the RFC specifications.
For phase 1 this is currently
.Li IPV4_ADDR ,
.Li IPV4_ADDR_SUBNET ,
.Li IPV6_ADDR ,
.Li IPV6_ADDR_SUBNET ,
.Li FQDN ,
.Li USER_FQDN ,
or
.Li KEY_ID .
.It Em Name
If the ID-type is
.Li FQDN ,
.Li USER_FQDN ,
or
.Li KEY_ID ,
this tag should exist and contain a domain name, user@@domain, or
other identifying string respectively.
.Pp
In the case of
.Li KEY_ID ,
note that the IKE protocol allows any octet sequence to be sent or
received under this payload, potentially including non-printable
ones.
.Xr isakmpd 8
can only transmit printable
.Li KEY_ID
payloads, but can receive and process arbitrary
.Li KEY_ID
payloads.
This effectively means that non-printable
.Li KEY_ID
remote identities cannot be verified through this means, although it
is still possible to do so through
.Xr isakmpd.policy 5 .
.It Em Netmask
If the ID-type is
.Li IPV4_ADDR_SUBNET
or
.Li IPV6_ADDR_SUBNET ,
this tag should exist and
be a network subnet mask.
.It Em Network
If the ID-type is
.Li IPV4_ADDR_SUBNET
or
.Li IPV6_ADDR_SUBNET ,
this tag should exist and
be a network address.
.El
.It Aq Sy ISAKMP-configuration
Parameters for ISAKMP configuration
.Bl -tag -width Ds
.It Em DOI
The domain of interpretation as given by the RFCs.
Normally
.Li IPSEC .
If unspecified, defaults to
.Li IPSEC .
.It Em EXCHANGE_TYPE
The exchange type as given by the RFCs.
For main mode this is
.Li ID_PROT
and for aggressive mode it is
.Li AGGRESSIVE .
.It Em Transforms
A list of proposed transforms to use for protecting the
ISAKMP traffic.
These are actually names for sections
further describing the transforms.
Look at
.Aq Sy ISAKMP-transform
below.
.El
.It Aq Sy ISAKMP-transform
Parameters for ISAKMP authentication
.Bl -tag -width Ds
.It Em AUTHENTICATION_METHOD
The authentication method as the RFCs name it, or ANY.
.It Em ENCRYPTION_ALGORITHM
The encryption algorithm as the RFCs name it, or ANY to denote that any
encryption algorithm proposed will be accepted.
.It Em GROUP_DESCRIPTION
The group used for Diffie-Hellman exponentiations, or ANY.
The names are symbolic, like
.Li MODP_768 , MODP_1024 , EC_155 ,
and
.Li EC_185 .
.It Em HASH_ALGORITHM
The hash algorithm as the RFCs name it, or ANY.
.It Em KEY_LENGTH
For encryption algorithms with variable key length, this is
where the offered/accepted keylengths are described.
The value is of the offer-accept kind described above.
.It Em Life
A list of lifetime descriptions, or ANY.
In the former case, each
element is in itself a name of the section that defines the lifetime.
Look at
.Aq Sy Lifetime
below.
If it is set to ANY, then any type of
proposed lifetime type and value will be accepted.
.It Em PRF
The algorithm to use for the keyed pseudo-random function (used for key
derivation and authentication in phase 1), or ANY.
.El
.It Aq Sy Lifetime
Parameters for connection duration
.Bl -tag -width Ds
.It Em LIFE_DURATION
An offer/accept kind of value; see above.
Can also be set to ANY.
.It Em LIFE_TYPE
.Li SECONDS
or
.Li KILOBYTES
depending on the type of the duration.
Notice that this field may NOT be set to ANY.
.El
.It Aq Sy IPsec-connection
Parameters for IPsec connection configuration
.Bl -tag -width Ds
.It Em Configuration
The name of the IPsec-configuration section to use.
Look at
.Aq Sy IPsec-configuration
below.
.It Em Flags
A comma-separated list of flags controlling the further
handling of the IPsec SA.
Currently only one flag is defined:
.Bl -tag -width 12n
.It Em Active-only
If this flag is given and this
.Aq Sy IPsec-connection
is part of the phase 2
connections we automatically keep up, it will not automatically be used for
accepting connections from the peer.
.El
.It Em ISAKMP-peer
The name of the ISAKMP-peer to talk to in order to
set up this connection.
The value is the name of an
.Aq Sy ISAKMP-peer
section.
See above.
.It Em Local-ID
If existent, the name of the section that describes the
optional local client ID that we should present to our peer.
It is also used when we act as responders to find out what
.Aq Sy IPsec-connection
we are dealing with.
Look at
.Aq Sy IPsec-ID
below.
.It Em Phase
The constant
.Sq 2 ,
as ISAKMP-peers and IPsec-connections
really are handled by the same code inside
.Xr isakmpd 8 .
.It Em Remote-ID
If existent, the name of the section that describes the
optional remote client ID that we should present to our peer.
It is also used when we act as responders to find out what
.Aq Sy IPsec-connection
we are dealing with.
Look at
.Aq Sy IPsec-ID
below.
.It Em PF-Tag
Add a
.Xr pf 4
tag to all packets of phase 2 SAs created for this connection.
This will allow matching packets for this connection by defining
rules in
.Xr pf.conf 5
using the
.Em tagged
keyword.
.Pp
The following variables can be used in tags to include information
from the remote peer on runtime:
.Pp
.Bl -tag -width $domain -compact -offset indent
.It Ar $id
The remote phase 1 ID.
It will be expanded to
.Ar id-type/id-value ,
e.g.\&
.Ar fqdn/foo.bar.org .
.It Ar $domain
Extract the domain from IDs of type FQDN or UFQDN.
.El
.Pp
For example, if the ID is
.Ar fqdn/foo.bar.org
or
.Ar ufqdn/user@@bar.org ,
.Dq PF-Tag=ipsec-$domain
expands to
.Dq ipsec-bar.org .
The variable expansion for the
.Ar PF-Tag
directive occurs only at runtime, not during configuration file parse time.
.El
.It Aq Sy IPsec-configuration
Parameters for IPsec configuration
.Bl -tag -width Ds
.It Em DOI
The domain of interpretation as given by the RFCs.
Normally
.Li IPSEC .
If unspecified, defaults to
.Li IPSEC .
.It Em EXCHANGE_TYPE
The exchange type as given by the RFCs.
For quick mode this is
.Li QUICK_MODE .
.It Em Suites
A list of protection suites (bundles of protocols) usable for
protecting the IP traffic.
Each of the list elements is a name of an
.Aq Sy IPsec-suite
section.
See below.
.El
.It Aq Sy IPsec-suite
Parameters for IPsec protection suite configuration
.Bl -tag -width Ds
.It Em Protocols
A list of the protocols included in this protection suite.
Each of the list elements is a name of an
.Aq Sy IPsec-protocol
section.
See below.
.El
.It Aq Sy IPsec-protocol
Parameters for IPsec protocol configuration
.Bl -tag -width Ds
.It Em PROTOCOL_ID
The protocol as given by the RFCs.
Acceptable values are currently
.Li IPSEC_AH
and
.Li IPSEC_ESP .
.It Em ReplayWindow
The size of the window used for replay protection.
This is normally left alone.
Look at the ESP and AH RFCs for a better description.
.It Em Transforms
A list of transforms usable for implementing the protocol.
Each of the list elements is a name of an
.Aq Sy IPsec-transform
section.
See below.
.El
.It Aq Sy IPsec-transform
Parameters for IPsec transform configuration
.Bl -tag -width Ds
.It Em AUTHENTICATION_ALGORITHM
The optional authentication algorithm in the case of this
being an ESP transform.
.It Em ENCAPSULATION_MODE
The encapsulation mode as given by the RFCs.
This means TRANSPORT or TUNNEL.
.It Em GROUP_DESCRIPTION
An optional (provides PFS if present) Diffie-Hellman group
description.
The values are the same as those for GROUP_DESCRIPTION in
.Aq Sy ISAKMP-transform
sections shown above.
.It Em KEY_LENGTH
For encryption algorithms with variable key length, this is
where the offered keylength is described.
.It Em Life
List of lifetimes, each element is a
.Aq Sy Lifetime
section name.
.It Em TRANSFORM_ID
The transform ID as given by the RFCs.
.El
.It Aq Sy IPsec-ID
Parameters for IPsec ID configuration
.Bl -tag -width Ds
.It Em Address
If the ID-type is
.Li IPV4_ADDR
or
.Li IPV6_ADDR ,
this tag should exist and be an IP address, an interface name, or the
.Em default
keyword.
If an interface is used, the first address of the appropriate
family will be used.
The
.Em default
keyword uses the interface associated with the default route.
In the case of IPv6, link-local addresses will be skipped if
addresses which are not link-local exist.
If the address on the interface changes
.Xr isakmpd 8
will not track the change.
The configuration must be reloaded to learn the new address.
.It Em ID-type
The ID type as given by the RFCs.
For IPsec this is currently
.Li IPV4_ADDR ,
.Li IPV6_ADDR ,
.Li IPV4_ADDR_SUBNET ,
or
.Li IPV6_ADDR_SUBNET .
.It Em Netmask
If the ID-type is
.Li IPV4_ADDR_SUBNET
or
.Li IPV6_ADDR_SUBNET ,
this tag should exist and
be a network subnet mask or an interface.
When an interface is specified, the netmask is the mask associated with the
.Em Network .
The
.Em default
keyword uses the interface associated with the default route.
.It Em Network
If the ID-type is
.Li IPV4_ADDR_SUBNET
or
.Li IPV6_ADDR_SUBNET ,
this tag should exist and be a network address, an interface, or the
.Em default
keyword.
When an interface is specified, the network is selected as with the
.Em Address
tag.
.It Em Port
If the ID-type is
.Li IPV4_ADDR ,
.Li IPV4_ADDR_SUBNET ,
.Li IPV6_ADDR ,
or
.Li IPV6_ADDR_SUBNET ,
this tag indicates what source or destination port is allowed to be
transported over the SA (depending on whether this is a local or
remote ID).
If left unspecified, all ports of the given transport protocol
will be transmitted (or permitted) over the SA.
The
.Em Protocol
tag must be specified in conjunction with this tag.
.It Em Protocol
If the ID-type is
.Li IPV4_ADDR ,
.Li IPV4_ADDR_SUBNET ,
.Li IPV6_ADDR ,
or
.Li IPV6_ADDR_SUBNET ,
this tag indicates what transport protocol should be transmitted over
the SA.
If left unspecified, all transport protocols between the two address
(ranges) will be sent (or permitted) over that SA.
.El
.El
.Sh OTHER SECTIONS
.Bl -hang -width 8n
.It Aq Sy IKECFG-ID
Parameters to use with IKE mode-config.
One ID per peer.
.Pp
An IKECFG-ID is written as [<ID-type>/<name>].
The following ID types are supported:
.Pp
.Bl -tag -width "ASN1_DNXX" -offset indent -compact
.It IPv4
[ipv4/A.B.C.D]
.It IPv6
[ipv6/abcd:abcd::ab:cd]
.It FQDN
[fqdn/foo.bar.org]
.It UFQDN
[ufqdn/user@@foo.bar.org]
.It ASN1_DN
[asn1_dn//C=aa/O=cc/...] (Note the double slashes as the DN itself
starts with a
.Sq / . )
.El
.Pp
Each section specifies what configuration values to return to the peer
requesting IKE mode-config.
Currently supported values are:
.Pp
.Bl -tag -width "WINS-serverXX" -offset indent -compact
.It Em Address
The peer's network address.
.It Em Netmask
The peer's netmask.
.It Em Nameserver
The IP address of a DNS nameserver.
.It Em WINS-server
The IP address of a WINS server.
.El
.It Aq Sy Initiator-ID
Parameters for peer initiator configuration
.Pp
During phase 1 negotiation
.Xr isakmpd 8
looks for a pre-shared key in the
.Aq Sy ISAKMP-peer
section.
If no Authentication data is specified in that section, and
.Xr isakmpd 8
is not the initiator, it looks for Authentication data in a section named after
the initiator's phase 1 ID.
This allows mobile users with dynamic IP addresses
to have different shared secrets.
.Pp
This only works for aggressive mode because in main mode the remote
initiator ID would not yet be known.
Note, however, that use of aggressive mode is discouraged.
See
.Sx CAVEATS ,
below.
.Pp
The name of the
.Aq Sy Initiator-ID
section depends on the ID type sent by the initiator.
Currently this can be:
.Pp
.Bl -tag -width "UFQDNXX" -offset indent -compact
.It IPv4
[A.B.C.D]
.It IPv6
[abcd:abcd::ab:cd]
.It FQDN
[foo.bar.org]
.It UFQDN
[user@@foo.bar.org]
.El
.El
.Sh FILES
.Bl -tag -width /etc/isakmpd/isakmpd.conf
.It Pa /etc/isakmpd/isakmpd.conf
The default
.Xr isakmpd 8
configuration file.
.El
.Sh EXAMPLES
An example of a configuration file:
.Bd -literal
# A configuration sample for the isakmpd ISAKMP/Oakley (aka IKEv1) daemon.

[General]
Listen-on=		10.1.0.2

# Incoming phase 1 negotiations are multiplexed on the source IP address
[Phase 1]
10.1.0.1=		ISAKMP-peer-west

# These connections are walked over after config file parsing and told
# to the application layer so that it will inform us when traffic wants to
# pass over them.  This means we can do on-demand keying.
[Phase 2]
Connections=		IPsec-east-west

# Default values are commented out.
[ISAKMP-peer-west]
Phase=			1
#Transport=		udp
Local-address=		10.1.0.2
Address=		10.1.0.1
#Port=			isakmp
#Port=			500
#Configuration=		Default-phase-1-configuration
Authentication=		mekmitasdigoat
#Flags=

[IPsec-east-west]
Phase=			2
ISAKMP-peer=		ISAKMP-peer-west
Configuration=		Default-quick-mode
Local-ID=		Net-east
Remote-ID=		Net-west
#Flags=

[Net-west]
ID-type=		IPV4_ADDR_SUBNET
Network=		192.168.1.0
Netmask=		255.255.255.0

[Net-east]
ID-type=		IPV4_ADDR_SUBNET
Network=		192.168.2.0
Netmask=		255.255.255.0

# Quick mode descriptions

[Default-quick-mode]
EXCHANGE_TYPE=		QUICK_MODE
Suites=			QM-ESP-3DES-SHA-PFS-SUITE,QM-ESP-AES-SHA-PFS-SUITE

# Data for an IKE mode-config peer
[asn1_dn//C=SE/L=SomeCity/O=SomeCompany/CN=SomePeer.company.com]
Address=		192.168.1.123
Netmask=		255.255.255.0
Nameserver=		192.168.1.10
WINS-server=		192.168.1.11

# pre-shared key based on initiator's phase 1 ID
[foo.bar.org]
Authentication=		mekmitasdigoat

#
# #####################################################################
# All configuration data below this point is not required as the example
# uses the predefined Main Mode transform and Quick Mode suite names.
# It is included here for completeness.  Note the default values for the
# [General] and [X509-certificates] sections just below.
# #####################################################################
#

[General]
Policy-file=		/etc/isakmpd/isakmpd.policy
Retransmits=		3
Exchange-max-time=	120

# KeyNote credential storage
[KeyNote]
Credential-directory=	/etc/isakmpd/keynote/

# Certificates stored in PEM format
[X509-certificates]
CA-directory=           /etc/isakmpd/ca/
Cert-directory=         /etc/isakmpd/certs/
CRL-directory=		/etc/isakmpd/crls/
Private-key=		/etc/isakmpd/private/local.key

# Default phase 1 description (Main Mode)

[Default-phase-1-configuration]
EXCHANGE_TYPE=		ID_PROT
Transforms=		3DES-SHA

# Main mode transforms
######################

# 3DES

[3DES-SHA]
ENCRYPTION_ALGORITHM=	3DES_CBC
HASH_ALGORITHM=		SHA
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	MODP_1024
Life=			LIFE_MAIN_MODE

# AES

[AES-SHA]
ENCRYPTION_ALGORITHM=	AES_CBC
KEY_LENGTH=		128,128:256
HASH_ALGORITHM=		SHA
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	MODP_1024
Life=			LIFE_MAIN_MODE

# AES-128

[AES-128-SHA]
ENCRYPTION_ALGORITHM=   AES_CBC
KEY_LENGTH=             128,128:128
HASH_ALGORITHM=         SHA
AUTHENTICATION_METHOD=  PRE_SHARED
GROUP_DESCRIPTION=      MODP_1024
Life=                   LIFE_MAIN_MODE

# AES-192

[AES-192-SHA]
ENCRYPTION_ALGORITHM=   AES_CBC
KEY_LENGTH=             192,192:192
HASH_ALGORITHM=         SHA
AUTHENTICATION_METHOD=  PRE_SHARED
GROUP_DESCRIPTION=      MODP_1024
Life=                   LIFE_MAIN_MODE

# AES-256

[AES-256-SHA]
ENCRYPTION_ALGORITHM=   AES_CBC
KEY_LENGTH=             256,256:256
HASH_ALGORITHM=         SHA
AUTHENTICATION_METHOD=  PRE_SHARED
GROUP_DESCRIPTION=      MODP_1024
Life=                   LIFE_MAIN_MODE

# Blowfish

[BLF-SHA]
ENCRYPTION_ALGORITHM=	BLOWFISH_CBC
KEY_LENGTH=		128,96:192
HASH_ALGORITHM=		SHA
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	MODP_1024
Life=			LIFE_MAIN_MODE

# Blowfish, using DH group 4 (non-default)
[BLF-SHA-EC185]
ENCRYPTION_ALGORITHM=	BLOWFISH_CBC
KEY_LENGTH=		128,96:192
HASH_ALGORITHM=		SHA
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	EC2N_185
Life=			LIFE_MAIN_MODE

# Quick mode protection suites
##############################

# 3DES

[QM-ESP-3DES-SHA-SUITE]
Protocols=		QM-ESP-3DES-SHA

[QM-ESP-3DES-SHA-PFS-SUITE]
Protocols=		QM-ESP-3DES-SHA-PFS

# AES

[QM-ESP-AES-SHA-SUITE]
Protocols=              QM-ESP-AES-SHA

[QM-ESP-AES-SHA-PFS-SUITE]
Protocols=              QM-ESP-AES-SHA-PFS

# AES-128

[QM-ESP-AES-128-SHA-SUITE]
Protocols=              QM-ESP-AES-128-SHA

[QM-ESP-AES-128-SHA-PFS-SUITE]
Protocols=              QM-ESP-AES-128-SHA-PFS

# AES-192

[QM-ESP-AES-192-SHA-SUITE]
Protocols=              QM-ESP-AES-192-SHA

[QM-ESP-AES-192-SHA-PFS-SUITE]
Protocols=              QM-ESP-AES-192-SHA-PFS

# AES-256

[QM-ESP-AES-256-SHA-SUITE]
Protocols=              QM-ESP-AES-256-SHA

[QM-ESP-AES-256-SHA-PFS-SUITE]
Protocols=              QM-ESP-AES-256-SHA-PFS

# AH

[QM-AH-MD5-SUITE]
Protocols=		QM-AH-MD5

[QM-AH-MD5-PFS-SUITE]
Protocols=		QM-AH-MD5-PFS

# AH + ESP (non-default)

[QM-AH-MD5-ESP-3DES-SHA-SUITE]
Protocols=		QM-AH-MD5,QM-ESP-3DES-SHA

[QM-ESP-3DES-SHA-AH-MD5-SUITE]
Protocols=		QM-ESP-3DES-SHA,QM-AH-MD5

# Quick mode protocols

# 3DES

[QM-ESP-3DES-SHA]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-3DES-SHA-XF

[QM-ESP-3DES-SHA-PFS]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-3DES-SHA-PFS-XF

[QM-ESP-3DES-SHA-TRP]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-3DES-SHA-TRP-XF

# AES

[QM-ESP-AES-SHA]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-AES-SHA-XF

[QM-ESP-AES-SHA-PFS]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-AES-SHA-PFS-XF

[QM-ESP-AES-SHA-TRP]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-AES-SHA-TRP-XF

# AES-128

[QM-ESP-AES-128-SHA]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-AES-128-SHA-XF

[QM-ESP-AES-128-SHA-PFS]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-AES-128-SHA-PFS-XF

[QM-ESP-AES-128-SHA-TRP]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-AES-128-SHA-TRP-XF

# AES-192

[QM-ESP-AES-192-SHA]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-AES-192-SHA-XF

[QM-ESP-AES-192-SHA-PFS]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-AES-192-SHA-PFS-XF

[QM-ESP-AES-192-SHA-TRP]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-AES-192-SHA-TRP-XF

# AES-256

[QM-ESP-AES-256-SHA]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-AES-256-SHA-XF

[QM-ESP-AES-256-SHA-PFS]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-AES-256-SHA-PFS-XF

[QM-ESP-AES-256-SHA-TRP]
PROTOCOL_ID=            IPSEC_ESP
Transforms=             QM-ESP-AES-256-SHA-TRP-XF


# AH MD5

[QM-AH-MD5]
PROTOCOL_ID=		IPSEC_AH
Transforms=		QM-AH-MD5-XF

[QM-AH-MD5-PFS]
PROTOCOL_ID=		IPSEC_AH
Transforms=		QM-AH-MD5-PFS-XF

# Quick mode transforms

# 3DES

[QM-ESP-3DES-SHA-XF]
TRANSFORM_ID=		3DES
ENCAPSULATION_MODE=	TUNNEL
AUTHENTICATION_ALGORITHM=	HMAC_SHA
Life=			LIFE_QUICK_MODE

[QM-ESP-3DES-SHA-PFS-XF]
TRANSFORM_ID=		3DES
ENCAPSULATION_MODE=	TUNNEL
AUTHENTICATION_ALGORITHM=	HMAC_SHA
GROUP_DESCRIPTION=	MODP_1024
Life=			LIFE_QUICK_MODE

[QM-ESP-3DES-SHA-TRP-XF]
TRANSFORM_ID=		3DES
ENCAPSULATION_MODE=	TRANSPORT
AUTHENTICATION_ALGORITHM=	HMAC_SHA
Life=			LIFE_QUICK_MODE

# AES

[QM-ESP-AES-SHA-XF]
TRANSFORM_ID=		AES
ENCAPSULATION_MODE=	TUNNEL
AUTHENTICATION_ALGORITHM=	HMAC_SHA
KEY_LENGTH=		128
Life=			LIFE_QUICK_MODE

[QM-ESP-AES-SHA-PFS-XF]
TRANSFORM_ID=		AES
ENCAPSULATION_MODE=	TUNNEL
AUTHENTICATION_ALGORITHM=	HMAC_SHA
GROUP_DESCRIPTION=	MODP_1024
KEY_LENGTH=		128
Life=			LIFE_QUICK_MODE

[QM-ESP-AES-SHA-TRP-XF]
TRANSFORM_ID=		AES
ENCAPSULATION_MODE=	TRANSPORT
AUTHENTICATION_ALGORITHM=	HMAC_SHA
KEY_LENGTH=		128
Life=			LIFE_QUICK_MODE

# AES-128

[QM-ESP-AES-128-SHA-XF]
TRANSFORM_ID=           AES
ENCAPSULATION_MODE=     TUNNEL
AUTHENTICATION_ALGORITHM=       HMAC_SHA
KEY_LENGTH=             128
Life=                   LIFE_QUICK_MODE

[QM-ESP-AES-128-SHA-PFS-XF]
TRANSFORM_ID=           AES
ENCAPSULATION_MODE=     TUNNEL
AUTHENTICATION_ALGORITHM=       HMAC_SHA
GROUP_DESCRIPTION=      MODP_1024
KEY_LENGTH=             128
Life=                   LIFE_QUICK_MODE

[QM-ESP-AES-128-SHA-TRP-XF]
TRANSFORM_ID=           AES
ENCAPSULATION_MODE=     TRANSPORT
AUTHENTICATION_ALGORITHM=       HMAC_SHA
KEY_LENGTH=             128
Life=                   LIFE_QUICK_MODE

# AES-192

[QM-ESP-AES-192-SHA-XF]
TRANSFORM_ID=           AES
ENCAPSULATION_MODE=     TUNNEL
AUTHENTICATION_ALGORITHM=       HMAC_SHA
KEY_LENGTH=             192
Life=                   LIFE_QUICK_MODE

[QM-ESP-AES-192-SHA-PFS-XF]
TRANSFORM_ID=           AES
ENCAPSULATION_MODE=     TUNNEL
AUTHENTICATION_ALGORITHM=       HMAC_SHA
GROUP_DESCRIPTION=      MODP_1024
KEY_LENGTH=             192
Life=                   LIFE_QUICK_MODE

[QM-ESP-AES-192-SHA-TRP-XF]
TRANSFORM_ID=           AES
ENCAPSULATION_MODE=     TRANSPORT
AUTHENTICATION_ALGORITHM=       HMAC_SHA
KEY_LENGTH=             192
Life=                   LIFE_QUICK_MODE

# AES-256

[QM-ESP-AES-256-SHA-XF]
TRANSFORM_ID=           AES
ENCAPSULATION_MODE=     TUNNEL
AUTHENTICATION_ALGORITHM=       HMAC_SHA
KEY_LENGTH=             256
Life=                   LIFE_QUICK_MODE

[QM-ESP-AES-256-SHA-PFS-XF]
TRANSFORM_ID=           AES
ENCAPSULATION_MODE=     TUNNEL
AUTHENTICATION_ALGORITHM=       HMAC_SHA
GROUP_DESCRIPTION=      MODP_1024
KEY_LENGTH=             256
Life=                   LIFE_QUICK_MODE

[QM-ESP-AES-256-SHA-TRP-XF]
TRANSFORM_ID=           AES
ENCAPSULATION_MODE=     TRANSPORT
AUTHENTICATION_ALGORITHM=       HMAC_SHA
KEY_LENGTH=             256
Life=                   LIFE_QUICK_MODE


# AH

[QM-AH-MD5-XF]
TRANSFORM_ID=		MD5
ENCAPSULATION_MODE=	TUNNEL
AUTHENTICATION_ALGORITHM=	HMAC_MD5
Life=			LIFE_QUICK_MODE

[QM-AH-MD5-PFS-XF]
TRANSFORM_ID=		MD5
ENCAPSULATION_MODE=	TUNNEL
GROUP_DESCRIPTION=	MODP_1024
Life=			LIFE_QUICK_MODE

[Sample-Life-Time]
LIFE_TYPE=		SECONDS
LIFE_DURATION=		3600,1800:7200

[Sample-Life-Volume]
LIFE_TYPE=		KILOBYTES
LIFE_DURATION=		1000,768:1536
.Ed
.Sh SEE ALSO
.Xr keynote 1 ,
.Xr openssl 1 ,
.Xr ipsec 4 ,
.Xr keynote 4 ,
.Xr isakmpd.policy 5 ,
.Xr isakmpd 8
.Sh CAVEATS
Using aggressive mode is discouraged due to various design problems.
If your peer only supports aggressive mode, please consider replacing that
peer with a sane ISAKMP/IKE implementation.
For details see
.Lk http://www.usenix.org/publications/login/1999-12/features/harmful.html .
.Sh BUGS
The RFCs do not permit differing DH groups in the same proposal for
aggressive and quick mode exchanges.
Mixing both PFS and non-PFS suites in a quick mode proposal is not possible,
as PFS implies using a DH group.
@


1.132
log
@Remove plain DES encryption from IPsec.

DES is insecure since brute force attacks are practical due to its
short key length.

This removes support for DES-CBC encryption in ESP and in IKE main
and quick mode from the kernel, isakmpd(8), ipsecctl(8), and iked(8).

ok mikeb@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.131 2015/01/16 15:37:20 schwarze Exp $
d31 1
a31 1
.Dd $Mdocdate: January 16 2015 $
d44 1
a44 1
The file is of a well known type of format called .INI style, named after
d386 1
a386 1
"well known" CAs without actually having to trust all (or any) of them.
@


1.131
log
@Arguments are just ".Ar", not ".Brq Ar" or even ".Ns { Ns Ar ... Ns }".
The .Ar macro already causes distinctive formatting in a standard way,
so there is no need for additional braces.
This also fixes the only mandoc warning in src/sbin.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.130 2012/08/12 17:01:35 schwarze Exp $
d31 1
a31 1
.Dd $Mdocdate: August 12 2012 $
d99 1
a99 1
is either DES, BLF, 3DES, CAST, AES, AES-128, AES-192 or AES-256
d124 1
a124 1
is either DES, 3DES, CAST, BLF, AES, AES-128, AES-192, AES-256, AESCTR,
a1007 16
# DES

[DES-MD5]
ENCRYPTION_ALGORITHM=	DES_CBC
HASH_ALGORITHM=		MD5
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	MODP_1024
Life=			LIFE_MAIN_MODE

[DES-SHA]
ENCRYPTION_ALGORITHM=	DES_CBC
HASH_ALGORITHM=		SHA
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	MODP_1024
Life=			LIFE_MAIN_MODE

a1078 20
# DES

[QM-ESP-DES-SUITE]
Protocols=		QM-ESP-DES

[QM-ESP-DES-PFS-SUITE]
Protocols=		QM-ESP-DES-PFS

[QM-ESP-DES-MD5-SUITE]
Protocols=		QM-ESP-DES-MD5

[QM-ESP-DES-MD5-PFS-SUITE]
Protocols=		QM-ESP-DES-MD5-PFS

[QM-ESP-DES-SHA-SUITE]
Protocols=		QM-ESP-DES-SHA

[QM-ESP-DES-SHA-PFS-SUITE]
Protocols=		QM-ESP-DES-SHA-PFS

d1129 2
a1130 5
[QM-AH-MD5-ESP-DES-SUITE]
Protocols=		QM-AH-MD5,QM-ESP-DES

[QM-AH-MD5-ESP-DES-MD5-SUITE]
Protocols=		QM-AH-MD5,QM-ESP-DES-MD5
d1132 2
a1133 2
[QM-ESP-DES-MD5-AH-MD5-SUITE]
Protocols=		QM-ESP-DES-MD5,QM-AH-MD5
a1136 18
# DES

[QM-ESP-DES]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-DES-XF

[QM-ESP-DES-MD5]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-DES-MD5-XF

[QM-ESP-DES-MD5-PFS]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-DES-MD5-PFS-XF

[QM-ESP-DES-SHA]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-DES-SHA-XF

a1218 26

# ESP DES+MD5

[QM-ESP-DES-XF]
TRANSFORM_ID=		DES
ENCAPSULATION_MODE=	TUNNEL
Life=			LIFE_QUICK_MODE

[QM-ESP-DES-MD5-XF]
TRANSFORM_ID=		DES
ENCAPSULATION_MODE=	TUNNEL
AUTHENTICATION_ALGORITHM=	HMAC_MD5
Life=			LIFE_QUICK_MODE

[QM-ESP-DES-MD5-PFS-XF]
TRANSFORM_ID=		DES
ENCAPSULATION_MODE=	TUNNEL
GROUP_DESCRIPTION=	MODP_1024
AUTHENTICATION_ALGORITHM=	HMAC_MD5
Life=			LIFE_QUICK_MODE

[QM-ESP-DES-SHA-XF]
TRANSFORM_ID=		DES
ENCAPSULATION_MODE=	TUNNEL
AUTHENTICATION_ALGORITHM=	HMAC_SHA
Life=			LIFE_QUICK_MODE
@


1.130
log
@Use .Lk for HTTP hyperlinks, not .Pa.
Most of the patch from Arto Jonsson <ajonsson at kapsi dot fi>.
jmc@@ agrees in principle that .Lk is the right macro to use.

While here, update a few broken links,
and add missing markup at a few places.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.129 2012/06/30 14:51:31 naddy Exp $
d31 1
a31 1
.Dd $Mdocdate: June 30 2012 $
d85 1
a85 1
.\"{cipher}-{hash}[-{group}][-RSA_SIG]
d89 3
a91 10
.No {
.Ar cipher
.No }-{
.Ar hash
.No }[{-
.Ar group
.No }]
.No [-
.Ar RSA_SIG
.No ]
d97 2
a98 2
.Bl -tag -width "{cipher}" -offset indent -compact
.It Ns { Ns Ar cipher Ns }
d100 1
a100 1
.It Ns { Ns Ar hash Ns }
d102 1
a102 1
.It Ns { Ns Ar group Ns }
d107 1
a107 1
.\" .Ar QM-{proto}[-TRP]-{cipher}[-{hash}][-PFS[-{group}]]-SUITE
d111 4
a114 16
.Ar QM
.No -{
.Ar proto
.No }[-
.Ar TRP
.No ]-{
.Ar cipher
.No }[-{
.Ar hash
.No }]
.No [-
.Ar PFS
.No [-{
.Ar group
.No }]]-
.Ar SUITE
d120 2
a121 2
.Bl -tag -width "{cipher}" -offset indent -compact
.It Ns { Ns Ar proto Ns }
d123 1
a123 1
.It Ns { Ns Ar cipher Ns }
d128 1
a128 1
.It Ns { Ns Ar hash Ns }
d130 1
a130 1
.It Ns { Ns Ar group Ns }
@


1.129
log
@enable use of AES-{192,256}-CTR, and explicitly of AES-128-CTR, for IPsec ESP
ok mikeb@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.128 2011/06/23 20:35:22 sthen Exp $
d31 1
a31 1
.Dd $Mdocdate: June 23 2011 $
d1474 1
a1474 1
.Pa http://www.usenix.org/publications/login/1999-12/features/harmful.html .
@


1.128
log
@Use a common text explaining how the various configuration parsers using
the standard OpenBSD-style parse.y handle continuing lines with backslashes,
paying particular attention to how comments are handled (which can cause
nasty side-effects if you're not expecting it).

Most wording from jmc@@, with suggestions from fgsch@@, marc@@, Richard Toohey,
patrick keshishian and Florian Obser, ok jmc@@.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.127 2010/09/22 13:45:16 mikeb Exp $
d31 1
a31 1
.Dd $Mdocdate: September 22 2010 $
d144 1
@


1.127
log
@Support for use of AES-GCM-16 (as AESGCM) and ENCR_NULL_AUTH_AES_GMAC
(as AESGMAC) ciphers in the ISAKMP Phase 2 (aka Quick Mode).

Thoroughly tested by me and naddy.  Works fine with Linux.

Requires updated pfkeyv2.h include file.

ok naddy
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.126 2010/06/07 08:38:09 jmc Exp $
d31 1
a31 1
.Dd $Mdocdate: June 7 2010 $
d56 7
a62 8
If the value needs more space than fits on a single line, it's possible to
continue it on the next by ending the first with a backslash character
immediately before the newline character.
This method can extend a value for an arbitrary number of lines.
.Pp
Comments can be put anywhere in the file by using a hash mark
.Pq Sq \&# .
The comment extends to the end of the current line.
@


1.126
log
@make clearer the relationship between isakmpd and ikev1; and iked and ikev2;
ok reyk
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.125 2008/02/17 10:36:32 hshoexer Exp $
d31 1
a31 1
.Dd $Mdocdate: February 17 2008 $
d144 3
a146 1
is either DES, 3DES, CAST, BLF, AES, AES-128, AES-192, AES-256, AESCTR, or NULL
@


1.125
log
@Define default configurations for AES-192 and AES-256.  From Mitja Muzenic
<mitja at muzenic dot net>, diff provided already quite some time ago,
many many thanks.  This should have gone in months ago but I was slacking,
sorry for that.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.124 2007/05/31 19:19:45 jmc Exp $
d31 1
a31 1
.Dd $Mdocdate: May 31 2007 $
d929 1
a929 1
# A configuration sample for the isakmpd ISAKMP/Oakley (aka IKE) daemon.
@


1.124
log
@convert to new .Dd format;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.123 2007/05/23 07:28:15 hshoexer Exp $
d31 1
a31 1
.Dd $Mdocdate$
d107 1
a107 1
is either DES, BLF, 3DES, CAST, or AES
d144 1
a144 1
is either DES, 3DES, CAST, BLF, AES, AESCTR, or NULL
d1060 30
d1148 24
d1239 43
d1364 73
@


1.123
log
@Get rid of some obsolete exampels.

ok and prodding @@jmc
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.122 2007/03/18 22:31:40 hshoexer Exp $
d31 1
a31 1
.Dd August 07, 2002
@


1.122
log
@Fix usage of predefined lifetimes.  "Default-phase-[12]-lifetime"
just specifies the values to be used.  However, the specifications
are called "LIFE_MAIN_MODE" and "LIFE_QUICK_MODE".

ok ho@@ jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.121 2007/02/19 14:17:56 jmc Exp $
a924 4
.It Pa /usr/share/ipsec/isakmpd/
A directory containing some sample
.Xr isakmpd 8
configuration files.
@


1.121
log
@tweak;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.120 2007/02/19 10:00:13 hshoexer Exp $
d1036 1
a1036 1
Life=			Default-phase-1-lifetime
d1043 1
a1043 1
Life=			Default-phase-1-lifetime
d1052 1
a1052 1
Life=			Default-phase-1-lifetime
d1062 1
a1062 1
Life=			Default-phase-1-lifetime
d1072 1
a1072 1
Life=			Default-phase-1-lifetime
d1081 1
a1081 1
Life=			Default-phase-1-lifetime
d1206 1
a1206 1
Life=			Default-phase-2-lifetime
d1212 1
a1212 1
Life=			Default-phase-2-lifetime
d1219 1
a1219 1
Life=			Default-phase-2-lifetime
d1225 1
a1225 1
Life=			Default-phase-2-lifetime
d1233 1
a1233 1
Life=			Default-phase-2-lifetime
d1240 1
a1240 1
Life=			Default-phase-2-lifetime
d1246 1
a1246 1
Life=			Default-phase-2-lifetime
d1255 1
a1255 1
Life=			Default-phase-2-lifetime
d1263 1
a1263 1
Life=			Default-phase-2-lifetime
d1270 1
a1270 1
Life=			Default-phase-2-lifetime
d1278 1
a1278 1
Life=			Default-phase-2-lifetime
d1284 1
a1284 1
Life=			Default-phase-2-lifetime
@


1.120
log
@Document NULL encryption.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.119 2006/11/24 13:52:14 reyk Exp $
d144 1
a144 1
is either DES, 3DES, CAST, BLF, AES, AESCTR or NULL
@


1.119
log
@add support to tag ipsec traffic belonging to specific IKE-initiated
phase 2 traffic. this allows policy-based filtering of encrypted and
unencrypted ipsec traffic with pf(4). see ipsec.conf(5) and
isakmpd.conf(5) for details and examples.

this is work in progress and still needs some testing and feedback,
but it is safe to put it in now.

ok hshoexer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.118 2006/09/15 09:49:07 hshoexer Exp $
d144 1
a144 1
is either DES, 3DES, CAST, BLF, AES, or AESCTR
@


1.118
log
@Remove "Delete-SAs" config option.  This was needed for interaction
with sasyncd(8).  Now sasyncd(8) controls isakmpd(8) regarding SA
deletion so this option is obsolete.

ok mpf jmc
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.117 2006/08/30 16:56:56 hshoexer Exp $
d650 35
@


1.117
log
@Make SA deletion on shutdown the default again.  Use -S for failover
situations where you do not want this.

Discussed and agreed on with ho, mcbride, markus, cloder,...  We
will have to teach sasyncd to deal with this.

Testing by msf and hshoexer with help from mtu

ok markus cloder
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.116 2006/06/11 11:07:41 hshoexer Exp $
a307 6
.It Em Delete-SAs
This tag controls whether
.Xr isakmpd 8
deletes SAs on shutdown or not.
The default value is
.Qq yes .
@


1.116
log
@Document AESCTR for quick mode and SHA2-* for main mode.  Help by jmc.

ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.115 2006/06/11 00:20:36 jmc Exp $
d313 1
a313 1
.Qq no .
@


1.115
log
@tweaks;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.114 2006/06/10 21:23:50 hshoexer Exp $
d86 1
a86 1
.\" .Ar {DES,BLF,3DES,CAST,AES}-{MD5,SHA}[-GRP{1,2,5,14,15}][-RSA_SIG]
d91 1
a91 1
.Ar DES , BLF , 3DES , CAST , AES
d93 3
a95 5
.Ar MD5 , SHA
.No }[-
.Ar GRP
.No {
.Ar 1 , 2 , 5 , 14 , 15
d104 10
d144 1
a144 1
is either DES, 3DES, CAST, BLF, or AES
d148 1
a148 1
is either GRP1, GRP2, GRP5, GRP14 or GRP15
d151 4
a154 2
For example, 3DES-SHA means: 3DES encryption, SHA hash, and authorization by
pre-shared keys.
@


1.114
log
@Document -S and the "Delete-SAs" tag.  Those will enable SA deletion
on shutdown.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.113 2006/06/10 21:09:45 msf Exp $
d299 1
a299 1
This tag controls wether
d411 1
a411 1
or hostnames)
@


1.113
log
@Allow isakmpd to use a different private rsa key per isakmp ID. Hans wrote this a long time ago, I synced it to -current and tested.

ok hshoexer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.112 2006/05/27 21:09:11 hshoexer Exp $
d298 6
@


1.112
log
@document modp3072.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.111 2006/05/26 09:30:36 jmc Exp $
d402 4
@


1.111
log
@ipsectl -> ipsecctl
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.110 2006/05/26 09:26:07 jmc Exp $
d86 1
a86 1
.\" .Ar {DES,BLF,3DES,CAST,AES}-{MD5,SHA}[-GRP{1,2,5,14}][-RSA_SIG]
d97 1
a97 1
.Ar 1 , 2 , 5 , 14
d140 1
a140 1
is either GRP1, GRP2, GRP5, or GRP14
d148 2
a149 2
Unless explicitly stated with -GRP1, 2, 5, or 14, transforms and PFS suites
use DH group 2.
@


1.110
log
@vpn.8 removal;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.109 2006/05/26 04:02:59 deraadt Exp $
d195 1
a195 1
.Xr ipsectl 8
@


1.109
log
@let us not talk about ipsecadm and vpn anymore; ok reyk
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.108 2005/10/06 18:29:18 hshoexer Exp $
d1251 1
a1251 2
.Xr isakmpd 8 ,
.Xr vpn 8
@


1.108
log
@improve examples and show how to use KEY_LENGTH.  Slightly different fix than
proposed by sthen at spacehopper dot org, fixes pr 4522, thanks!

ok and with jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.107 2005/08/23 13:19:22 jmc Exp $
d195 1
a195 1
.Xr ipsecadm 8
d295 1
a295 1
.Xr ipsecadm 8
@


1.107
log
@`DSS' is unsupported, so remove references to it;
ok hshoexer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.106 2005/06/11 08:31:40 jmc Exp $
d703 3
d1005 10
d1205 1
d1213 1
d1220 1
@


1.106
log
@grammar;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.105 2005/05/31 14:28:39 hshoexer Exp $
d86 1
a86 1
.\" .Ar {DES,BLF,3DES,CAST,AES}-{MD5,SHA}[-GRP{1,2,5,14}][-{DSS,RSA_SIG}]
d99 3
a101 3
.No [-{
.Ar DSS , RSA_SIG
.No }]
@


1.105
log
@certpatch is gone, noticed by david@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.104 2005/05/23 23:09:39 cloder Exp $
d606 1
a606 1
The name of the ISAKMP-peer which to talk to in order to
@


1.104
log
@Mention interface names can be used in Listen-on. OK hshoexer
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.103 2005/05/12 08:03:11 jmc Exp $
d398 1
a398 2
holder identity; usually IP address, FQDN, or User FQDN, as provided by
.Xr certpatch 8 .
a1234 1
.Xr certpatch 8 ,
@


1.103
log
@add some missing section descriptions to make this page a little
easier to read;

ok hshoexer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.102 2005/05/05 09:20:27 jmc Exp $
d224 1
a224 1
A list of IP addresses OK to listen on.
@


1.102
log
@alphabetically order options within sections;
discussed w/ hshoexer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.101 2005/05/05 09:00:50 jmc Exp $
d187 1
a187 1
.It Sy General
d299 1
a299 1
.It Sy Phase 1
d312 1
a312 1
.It Sy Phase 2
d340 2
a341 1
.It Sy KeyNote
d375 2
a376 1
.It Sy X509-Certificates
d457 1
d517 1
d541 1
d574 1
d587 1
d639 1
d660 1
d670 1
d690 1
d712 1
d831 1
@


1.101
log
@this is not a separate list item;
ok hshoexer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.100 2005/05/05 08:42:27 jmc Exp $
d40 1
a40 1
.Xr isakmpad 8
a189 12
.It Em Default-phase-1-ID
Optional default phase 1 ID name.
.It Em Default-phase-1-lifetime
The default lifetime for autogenerated transforms (phase 1).
If unspecified, the value 3600,60:86400 is used as the default.
.It Em Default-phase-2-lifetime
The default lifetime for autogenerated suites (phase 2).
If unspecified, the value 1200,60:86400 is used as the default.
.It Em Default-phase-2-suites
A list of phase 2 suites that will be used when establishing dynamic
SAs.
If left unspecified, QM-ESP-3DES-SHA-PFS-SUITE is used as the default.
d205 12
a301 2
.It Aq Em IP-address
A name of the ISAKMP peer at the given IP address.
d309 2
a407 14
.It Em Phase
The constant
.Sq 1 ,
as ISAKMP-peers and IPsec-connections
really are handled by the same code inside
.Xr isakmpd 8 .
.It Em Transport
The name of the transport protocol; defaults to UDP.
.It Em Port
For UDP, the UDP port number to send to.
This is optional;
the default value is 500 which is the IANA-registered number for ISAKMP.
.It Em Local-address
The Local IP address to use, if we are multi-homed, or have aliases.
d410 3
d419 4
a422 3
.It Em Authentication
If existent, authentication data for this specific peer.
In the case of a pre-shared key, this is the key value itself.
d432 12
d451 2
a452 4
.It Em Flags
A comma-separated list of flags controlling the further
handling of the ISAKMP SA.
Currently there are no specific ISAKMP SA flags defined.
d456 6
a472 20
.It Em Address
If the ID-type is
.Li IPV4_ADDR
or
.Li IPV6_ADDR ,
this tag should exist and be an IP address.
.It Em Network
If the ID-type is
.Li IPV4_ADDR_SUBNET
or
.Li IPV6_ADDR_SUBNET ,
this tag should exist and
be a network address.
.It Em Netmask
If the ID-type is
.Li IPV4_ADDR_SUBNET
or
.Li IPV6_ADDR_SUBNET ,
this tag should exist and
be a network subnet mask.
d498 14
d538 2
a542 8
.It Em KEY_LENGTH
For encryption algorithms with variable key length, this is
where the offered/accepted keylengths are described.
The value is of the offer-accept kind described above.
.It Em HASH_ALGORITHM
The hash algorithm as the RFCs name it, or ANY.
.It Em AUTHENTICATION_METHOD
The authentication method as the RFCs name it, or ANY.
d549 6
a554 3
.It Em PRF
The algorithm to use for the keyed pseudo-random function (used for key
derivation and authentication in phase 1), or ANY.
d564 3
d570 3
a578 3
.It Em LIFE_DURATION
An offer/accept kind of value; see above.
Can also be set to ANY.
d582 17
a598 6
.It Em Phase
The constant
.Sq 2 ,
as ISAKMP-peers and IPsec-connections
really are handled by the same code inside
.Xr isakmpd 8 .
a605 5
.It Em Configuration
The name of the IPsec-configuration section to use.
Look at
.Aq Sy IPsec-configuration
below.
d615 6
a629 12
.It Em Flags
A comma-separated list of flags controlling the further
handling of the IPsec SA.
Currently only one flag is defined:
.Bl -tag -width 12n
.It Em Active-only
If this flag is given and this
.Aq Sy IPsec-connection
is part of the phase 2
connections we automatically keep up, it will not automatically be used for
accepting connections from the peer.
.El
d668 4
a677 4
.It Em ReplayWindow
The size of the window used for replay protection.
This is normally left alone.
Look at the ESP and AH RFCs for a better description.
d681 3
a683 2
.It Em TRANSFORM_ID
The transform ID as given by the RFCs.
a686 3
.It Em AUTHENTICATION_ALGORITHM
The optional authentication algorithm in the case of this
being an ESP transform.
d697 2
a701 8
.It Em ID-type
The ID type as given by the RFCs.
For IPsec this is currently
.Li IPV4_ADDR ,
.Li IPV6_ADDR ,
.Li IPV4_ADDR_SUBNET ,
or
.Li IPV6_ADDR_SUBNET .
d721 6
a726 3
.It Em Network
If the ID-type is
.Li IPV4_ADDR_SUBNET
d728 1
a728 7
.Li IPV6_ADDR_SUBNET ,
this tag should exist and be a network address, an interface, or the
.Em default
keyword.
When an interface is specified, the network is selected as with the
.Em Address
tag.
d741 1
a741 1
.It Em Protocol
d743 1
a743 3
.Li IPV4_ADDR ,
.Li IPV4_ADDR_SUBNET ,
.Li IPV6_ADDR ,
d746 6
a751 4
this tag indicates what transport protocol should be transmitted over
the SA.
If left unspecified, all transport protocols between the two address
(ranges) will be sent (or permitted) over that SA.
d767 11
@


1.100
log
@first stab at making this page easier to read:
various grammar/mdoc fixes;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.99 2005/04/06 00:04:53 cloder Exp $
a306 1
.It ""
@


1.99
log
@Check-interval and DPD-check-interval are specified in seconds.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.98 2005/02/22 21:44:55 moritz Exp $
d40 2
a41 2
.Nm isakmpd
daemon managing security association and key management for the
d48 2
a49 2
.Bd -literal
[Section name]
d53 2
a54 2
.Bd -literal
Tag=Value
d56 1
a56 1
If the value needs more space than fits on a single line it's possible to
d76 1
a76 1
.Nm isakmpd ,
d80 1
a80 2
.Ss Auto-generated parts of the configuration
.Pp
d86 19
a104 3
.Bd -filled -compact
.Ar {DES,BLF,3DES,CAST,AES}-{MD5,SHA}[-GRP{1,2,5,14}][-{DSS,RSA_SIG}]
.Ed
d107 35
a141 10
.Bd -filled -compact
.Ar QM-{proto}[-TRP]-{cipher}[-{hash}][-PFS[-{group}]]-SUITE
.Ed
.Bd -literal
  where
    {proto}  is either ESP or AH
    {cipher} is either DES, 3DES, CAST, BLF or AES
    {hash}   is either MD5, SHA, RIPEMD, SHA2-{256,384,512}
    {group}  is either GRP1, GRP2, GRP5 or GRP14
.Ed
d148 1
a148 1
Unless explicitly stated with -GRP1, 2, 5 or 14 transforms and PFS suites
d161 2
a162 2
section;
.Bd -literal
d173 2
a174 1
Also, the default phase 1 ID can be set by creating a <Phase1-ID>
d176 2
a177 2
section;
.Bd -literal
d185 3
a187 3
.Ss Roots
.Bl -hang -width 12n
.It Em General
d189 1
a189 1
.Bl -tag -width 12n
d204 1
a204 1
.Nm isakmpd
d207 1
a207 1
.Xr ipsecadm 4
d211 1
a211 1
.Nm isakmpd
d224 1
a224 1
A list of IP-addresses OK to listen on.
d240 1
a240 4
.Em isakmpd .
See
.Xr isakmpd 8
for details.
d246 1
a246 4
.Em isakmpd .
See
.Xr isakmpd 8
for details.
d255 2
a256 1
The default is "/etc/isakmpd/isakmpd.policy".
d261 2
a262 1
The default is "/etc/isakmpd/pubkeys".
d268 1
a268 1
.Nm isakmpd
d299 1
a299 1
.It Em Phase 1
d301 3
a303 3
.Bl -tag -width 12n
.It Em <IP-address>
A name of the ISAKMP peer at the given IP-address.
d306 1
a306 1
Incoming phase 1 connections from other IP-addresses will use this peer name.
d309 3
a311 1
Look at <ISAKMP-peer> below.
d313 1
a313 1
.It Em Phase 2
d315 1
a315 1
.Bl -tag -width 12n
d321 3
a323 1
Look at <IPsec-connection> below.
d325 6
a330 3
"Passive-connection" list we present below, however there is a
flag: "Active-only" that disables this behaviour.
This too is mentioned in the <IPsec-connection> section, in the "Flags" tag.
d334 3
a336 1
Look at <IPsec-connection> below.
d341 2
a342 2
.It Em KeyNote
.Bl -tag -width 12n
d375 2
a376 2
.It Em X509-Certificates
.Bl -tag -width 12n
d404 3
a406 3
.Ss Referred-to sections
.Bl -hang -width 12n
.It Em <ISAKMP-peer>
d408 1
a408 1
.Bl -tag -width 12n
d411 1
a411 1
.Li 1 ,
d413 2
a414 1
really are handled by the same code inside isakmpd.
d416 1
a416 2
The name of the transport protocol, defaults to
.Li UDP .
d418 3
a420 7
In case of
.Li UDP ,
the
.Li UDP
port number to send to.
This is optional, the
default value is 500 which is the IANA-registered number for ISAKMP.
d422 1
a422 1
The Local IP-address to use, if we are multi-homed, or have aliases.
d424 1
a424 1
If existent, the IP-address of the peer.
d427 3
a429 1
Look at <ISAKMP-configuration> below.
d433 1
a433 1
In the case of preshared key, this is the key value itself.
d440 3
a442 1
Look at <Phase1-ID> below.
d447 3
a449 1
Look at <Phase1-ID> below.
d455 2
a456 2
.It Em <Phase1-ID>
.Bl -tag -width 12n
d465 1
a465 1
.Li USER_FQDN
d473 1
a473 1
this tag should exist and be an IP-address.
d478 1
a478 1
.Li IPV6_ADDR_SUBNET
d485 1
a485 1
.Li IPV6_ADDR_SUBNET
d491 1
a491 1
.Li USER_FQDN
d514 2
a515 2
.It Em <ISAKMP-configuration>
.Bl -tag -width 12n
d533 3
a535 1
Look at <ISAKMP-transform> below.
d537 2
a538 2
.It Em <ISAKMP-transform>
.Bl -tag -width 12n
d553 1
a553 1
.Li MODP_768 , MODP_1024 , EC_155
d563 3
a565 1
Look at <Lifetime> below.
d569 2
a570 2
.It Em <Lifetime>
.Bl -tag -width 12n
d578 1
a578 1
An offer/accept kind of value, see above.
d581 2
a582 2
.It Em <IPsec-connection>
.Bl -tag -width 12n
d585 1
a585 1
.Li 2 ,
d587 2
a588 1
really are handled by the same code inside isakmpd.
d592 3
a594 1
The value is the name of an <ISAKMP-peer> section.
d598 3
a600 1
Look at <IPsec-configuration> below.
d605 5
a609 2
<IPsec-connection> we are dealing with.
Look at <IPsec-ID> below.
d614 5
a618 2
<IPsec-connection> we are dealing with.
Look at <IPsec-ID> below.
d625 3
a627 1
If this flag is given and this <IPsec-connection> is part of the phase 2
d632 2
a633 2
.It Em <IPsec-configuration>
.Bl -tag -width 12n
d647 3
a649 1
Each of the list elements is a name of an <IPsec-suite> section.
d652 2
a653 2
.It Em <IPsec-suite>
.Bl -tag -width 12n
d656 2
a657 1
Each of the list elements is a name of an <IPsec-protocol>
d661 2
a662 2
.It Em <IPsec-protocol>
.Bl -tag -width 12n
d665 1
a665 1
Acceptable values today are
d671 2
a672 1
Each of the list elements is a name of an <IPsec-transform>
d678 1
a678 5
Look at the
.Nm ESP
and
.Nm AH
RFCs for a better description.
d680 2
a681 2
.It Em <IPsec-transform>
.Bl -tag -width 12n
d693 3
a695 2
The values are the same as GROUP_DESCRIPTION's
in <ISAKMP-transform> sections shown above.
d697 3
a699 1
List of lifetimes, each element is a <Lifetime> section name.
d701 2
a702 2
.It Em <IPsec-ID>
.Bl -tag -width 12n
d708 1
a708 1
.Li IPV4_ADDR_SUBNET
d715 2
a716 2
.Li IPV6_ADDR
this tag should exist and be an IP-address, an interface name, or the
d724 1
a724 1
In the case of IPv6 link-local addresses will be skipped if
d727 1
a727 1
.Em isakmpd
d734 1
a734 1
.Li IPV6_ADDR_SUBNET
d738 1
a738 1
When an interface is specified the network is selected as with the
d745 1
a745 1
.Li IPV6_ADDR_SUBNET
d748 1
a748 1
When an interface is specified the netmask is the mask associated with the
d757 1
a757 1
.Li IPV6_ADDR
d759 1
a759 1
.Li IPV6_ADDR_SUBNET
d768 1
a768 1
.Li IPV6_ADDR
d770 1
a770 1
.Li IPV6_ADDR_SUBNET
d776 3
a778 1
The Protocol tag must be specified in conjunction with this tag.
d781 3
a783 3
.Ss Other sections
.Bl -hang -width 12n
.It Em <IKECFG-ID>
d789 2
a790 1
.Bl -tag -width 12n
d808 2
a809 1
.Bl -tag -width 12n
d819 1
a819 1
.It Em <Initiator-ID>
d822 4
a825 2
.Nm isakmpd
looks for a pre-shared key in the <ISAKMP-peer> section.
d827 1
a827 1
.Nm isakmpd
d837 2
a838 2
.Sx CAVEATS
section below.
d840 3
a842 2
The name of the <Initiator-ID> section depends on the ID type sent by
the initiator.
d844 2
a845 1
.Bl -tag -width 12n
d860 1
a860 1
.Nm isakmpd
d864 1
a864 1
.Nm isakmpd
d1220 1
d1224 3
a1226 1
.Xr isakmpd 8
@


1.98
log
@fix wrong line break in comment.

ok hshoexer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.97 2005/01/05 23:34:37 jmc Exp $
d174 2
a175 1
times.
d177 1
a177 1
The interval between RFC 3706 (Dead Peer Detection) messages.
@


1.97
log
@kill whitespace;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.96 2005/01/05 10:23:53 hshoexer Exp $
d804 1
a804 2
# pass over them.
This means we can do on-demand keying.
@


1.96
log
@Discourage using aggressive mode.

ok and some help ho@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.95 2004/12/14 10:17:28 mcbride Exp $
d655 1
a655 1
In the case of IPv6 link-local addresses will be skipped if 
d1152 1
a1152 1
For details see 
@


1.95
log
@Allow the Address, Network, or Netmask values of the <IPsec-ID> to be
specified with an interface name (in which case the first address is used)
or the keyword 'default' (in which case the address is selected based on the
default route). eg:

[roadwarrior-ip]
ID-type=                IPV4_ADDR
Address=                default

ok ho@@ hshoexer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.94 2004/08/10 15:59:10 ho Exp $
d760 4
d1148 6
@


1.94
log
@Better implementation of the Dead Peer Detection protocol, RFC 3706.
hshoexer@@ ok.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.93 2004/07/08 10:37:12 jmc Exp $
d647 14
a660 1
this tag should exist and be an IP-address.
d666 6
a671 2
this tag should exist and
be a network address.
d678 6
a683 1
be a network subnet mask.
@


1.93
log
@typo, and line adjustment;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.92 2004/07/07 22:25:39 hshoexer Exp $
d173 5
a177 1
The interval between watchdog checks of connections we want up at all times.
@


1.92
log
@document -a/-K and "Acquire-Only"/"Use-Keynote".

ok markus@@ henning@@ ho@@
english polish and mdoc help and ok jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.91 2004/06/26 11:32:32 jmc Exp $
d251 1
a251 1
This is useful when policies for flows and SA establishment are arragned by
@


1.91
log
@new sentence, new line;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.90 2004/06/21 23:42:40 ho Exp $
d161 11
d243 13
@


1.90
log
@Describe the [Default]:NAT-T-Keepalive configuration parameter.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.89 2004/02/27 19:07:16 hshoexer Exp $
d198 2
a199 1
peer behind NAT to keep the mapping active. Defaults to 20.
@


1.89
log
@Add group 14 (modp2048) to predefined suites.  Manpage also updated.
ok ho@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.88 2004/02/26 05:52:16 jmc Exp $
d196 3
@


1.88
log
@tweak;
ok hshoexer@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.87 2004/02/25 16:01:28 hshoexer Exp $
d88 1
a88 1
.Ar {DES,BLF,3DES,CAST,AES}-{MD5,SHA}[-GRP{1,2,5}][-{DSS,RSA_SIG}]
d100 1
a100 1
    {group}  is either GRP1, GRP2 or GRP5
d108 1
a108 1
Unless explicitly stated with -GRP1, 2 or 5, transforms and PFS suites
@


1.87
log
@Add and document configuration options Logverbose and Loglevel.  As log.c now
depends on conf.c and some regression tests use log.c, add conf.c to
Makefiles where necessary.

ok ho@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.86 2003/11/05 12:55:13 jmc Exp $
d183 1
a183 1
.Em isakmpd.
d191 2
a192 2
command line switch
.Em isakmpd.
@


1.86
log
@PFS: Perfect Forward Secrecy (RFC 2409);
from misc@@ and ok markus@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.85 2003/08/28 14:43:35 markus Exp $
d172 24
@


1.85
log
@support AES in phase 1, too. switch to OpenSSL EVP interface;
with Hans-Joerg.Hoexer at yerbouti.franken.de; ok ho@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.84 2003/08/09 08:45:58 jmc Exp $
d106 1
a106 1
SHA hash, and use Perfect Forward Security.
@


1.84
log
@new sentence, new line + small cleanup;
ok ho@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.83 2003/07/25 08:31:16 markus Exp $
d88 1
a88 1
.Ar {DES,BLF,3DES,CAST}-{MD5,SHA}[-GRP{1,2,5}][-{DSS,RSA_SIG}]
@


1.83
log
@add sha2 support; ok ho@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.82 2003/07/09 08:16:44 jmc Exp $
d77 3
a79 1
send a SIGHUP signal to the daemon process.
d109 2
a110 1
use DH group 2. There are currently no predefined ESP+AH Quick Mode suites.
d129 3
a131 2
seconds, maximum 1 day). The Quick Mode lifetime defaults to 20
minutes (minimum 60 seconds, maximum 1 day).
d188 5
a192 2
will renegotiate all current phase 2 SAs when the daemon receives
a SIGHUP signal, or an 'R' is sent to the FIFO interface (see
d242 6
a247 2
addresses, ``user@@domain'', or hostnames) that contain files named
``credentials'' and ``private_key''.
d635 2
a636 1
Parameters to use with IKE mode-config. One ID per peer.
d651 2
a652 1
starts with a '/'.)
d656 2
a657 1
requesting IKE mode-config. Currently supported values are:
d722 2
a723 1
# pass over them.  This means we can do on-demand keying.
d778 1
a778 1
# It is included here for completeness. Note the default values for the
@


1.82
log
@- remove some .Ss's that worked around the old blank line bug
- remove some unnecessary .Pp's
- mdoc a list

ok ho@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.81 2003/06/03 14:28:16 ho Exp $
d97 1
a97 1
    {hash}   is either MD5, SHA or RIPEMD
@


1.81
log
@Remove clauses 3 and 4. With approval from Niklas Hallqvist and
Niels Provos.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.80 2003/06/03 13:16:08 jmc Exp $
a118 1
.Pp
a127 2
.\"XXX Following empty .Ss works around a nroff bug, we want the new line."
.Ss
a131 1
.Pp
a139 3
.\"XXX Following empty .Ss works around a nroff bug, we want the new line."
.Ss
.Pp
a695 1
.Pp
@


1.80
log
@- section reorder
- some mdoc fixes
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.79 2003/05/17 17:26:40 jmc Exp $
a14 5
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by Ericsson Radio Systems.
.\" 4. The name of the author may not be used to endorse or promote products
.\"    derived from this software without specific prior written permission.
@


1.79
log
@tweak;
ok ho@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.78 2003/05/16 20:31:16 ho Exp $
d695 11
a1057 11
.Sh FILES
.Bl -tag -width /etc/isakmpd/isakmpd.conf
.It Pa /etc/isakmpd/isakmpd.conf
The default
.Nm isakmpd
configuration file.
.It Pa /usr/share/ipsec/isakmpd/
A directory containing some sample
.Nm isakmpd
configuration files.
.El
@


1.78
log
@If the "Renegotiate-on-HUP" tag is defined in the [General] section, a
HUP signal (or "R" to the FIFO) will also renegotiate all Phase 2 SAs,
i.e all connections.
ok niklas@@, tested and ok kjell@@.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.77 2003/05/10 21:13:41 jmc Exp $
d194 1
a194 1
If this tag is defined, whatever the value is, 
d197 1
a197 1
a SIGHUP signal, or a 'R' is sent to the FIFO interface. (See
d758 1
a758 1
[foo.bar.org]                                                                         
@


1.77
log
@typos;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.76 2003/03/21 15:13:26 markus Exp $
d193 6
@


1.76
log
@document [initiator-id] section; richb@@timestone.com.au; ok ho@@, jmc@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.75 2003/03/06 20:29:24 jmc Exp $
d115 1
a115 1
sections "General", "Keynote", "X509-certificates", and 
d172 1
a172 1
How many seconds should an exchange maximally take to setup before we
d199 1
a199 1
and setup SAs with each other.
@


1.75
log
@.Xr typos;

ok deraadt@@
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.74 2003/03/03 16:51:38 ho Exp $
d660 28
d750 4
@


1.74
log
@Re-add the BUGS section; the RFCs still do not permit differing DH groups
in the same proposal. This time, mention that this also applies to mixing
PFS and non-PFS suites.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.73 2003/02/22 06:56:20 kjell Exp $
d182 1
a182 1
.Xr KeyNote 4
d392 1
a392 1
.Xr isakmpd 1
@


1.73
log
@Clarify some language, grammar. ho@@ okayed this many moons ago,
and I forgot all about it.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.72 2003/01/19 21:02:15 deraadt Exp $
d1026 5
@


1.72
log
@typos; jmc@@prioris.mini.pw.edu.pl
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.71 2003/01/09 13:12:42 ho Exp $
d64 1
a64 1
This method can extend a value for an arbitrary amount of lines.
d68 1
a68 1
Then the comment goes on to the end of the line.
d72 2
a73 2
Some values are treated as a list of several scalar values, such lists always
use comma as the separator.
d85 2
a86 2
Some predefined section names are recognized by the daemon, voiding the need
to fully specify the Main Mode transforms and Quick Mode suites, protocols
d106 1
a106 1
Example 1: 3DES-SHA means; 3DES encryption, SHA hash, and authorization by
d108 1
a108 1
Example 2: QM-ESP-3DES-SHA-PFS-SUITE means; ESP protocol, 3DES encryption,
a110 1
.Pp
d288 3
a290 1
are required to have a SubjectAltName extension.
d293 1
a293 2
in the "Cert-directory", and have a subjectAltName matching our ID, so far
that is our IP-address).
@


1.71
log
@Document the various "default" settings. Some style and alphabetical
reordering.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.70 2002/11/27 14:36:20 ho Exp $
d200 1
a200 1
and setup SAs with eachother.
d226 1
a226 1
Normally any connection mentioned here are treated as part of the
d440 1
a440 1
The name are symbolic, like
d725 1
a725 1
# All configration data below this point is not required as the example
@


1.70
log
@Update document date.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.69 2002/11/15 14:58:38 ho Exp $
d117 1
a117 1
"Default-Phase-1-Configuration".
d138 1
a138 1
Also, the default Phase 1 ID can be set by creating a <Phase1-ID>
d158 23
d186 8
a193 4
.It Em Default-Phase-2-Suites
A list of Phase 2 suites that will be used when establishing dynamic
SAs.
If left unspecified, QM-ESP-3DES-SHA-PFS-SUITE is used as the default.
a195 13
.It Em Check-interval
The interval between watchdog checks of connections we want up at all times.
.It Em Exchange-max-time
How many seconds should an exchange maximally take to setup
before we give up.
.It Em Listen-on
A list of IP-addresses OK to listen on.
This list is used as
a filter for the set of addresses the interfaces configured
provides.
This means that we won't see if an address given
here does not exist on this host, and thus no error is given for
that case.
a203 8
.It Em Pubkey-directory
The directory in which
.Nm
looks for explicitly trusted public keys.
The default is "/etc/isakmpd/pubkeys".
Read
.Xr isakmpd 8
for the required naming convention of the files in here.
d212 1
a212 1
Incoming Phase 1 connections from other IP-addresses will use this peer name.
d270 4
a289 4
.It Em Accept-self-signed
If this tag is defined, whatever the value is, certificates that
do not originate from a trusted CA but are self-signed will be
accepted.
d324 1
a324 1
If unspecified, defaults to "Default-Phase-1-Configuration".
d349 1
a349 1
For Phase 1 this is currently
d446 1
a446 1
derivation and authentication in Phase 1), or ANY.
d688 1
a688 1
#Configuration=		Default-Phase-1-Configuration
d750 1
a750 1
[Default-Phase-1-Configuration]
@


1.69
log
@Missing "Configuration" tag in a Phase-1 peer was not handled correctly,
pointed out by Aref Taidi. Replace this with a "Default-Phase-1-Configuration"
that will be used if this tag is missing from the peer. Update manpage
accordingly. niklas@@ ok.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.68 2002/11/09 00:57:20 fgsch Exp $
d36 1
a36 1
.Dd October 10, 1998
@


1.68
log
@SEE ALSO reordering and corrections.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.66 2002/08/02 13:27:22 ho Exp $
d116 3
a118 2
sections "General", and "X509-certificates". These default values are
presented in the example below.
d318 1
d682 1
a682 1
Configuration=		Default-main-mode
a703 6
# Main mode descriptions

[Default-main-mode]
EXCHANGE_TYPE=		ID_PROT
Transforms=		3DES-SHA

d741 6
@


1.67
log
@A rewrite of the CRL support code, also from <Thomas.Walpuski@@gmx.net>.
Some style mods, and checks added for OpenSSL version 0.9.7 or later.
Currently CRLs are not supported for earlier versions.
Manual pages updated.
@
text
@d1013 1
a1014 1
.Xr keynote 1 ,
@


1.66
log
@Mention CRL support, tag and default value.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.65 2002/06/09 08:13:06 todd Exp $
d743 1
a743 1
CRL-file=		/etc/isakmpd/crl.pem
@


1.65
log
@rm trailing whitespace
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.64 2002/04/10 20:56:57 ho Exp $
d743 1
@


1.64
log
@Document IKE mode-cfg config. deraadt@@ ok.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.63 2002/03/01 15:25:17 ho Exp $
d113 1
a113 1
use DH group 2. There are currently no predefined ESP+AH Quick Mode suites. 
d120 1
a120 1
same section and tag names in the configuration file. 
d133 1
a133 1
minutes (minimum 60 seconds, maximum 1 day). 
d624 1
a624 1
An IKECFG-ID is written as [<ID-type>/<name>]. 
@


1.63
log
@Update to reflect recent changes in DH group handling. Remove BUGS
section.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.62 2001/12/21 11:41:50 mpech Exp $
d5 1
a5 1
.\" Copyright (c) 2000, 2001 Håkan Olsson.  All rights reserved.
d619 34
d713 7
@


1.62
log
@Initial patch for a new mdoc issue.
Powered by @@mantoya:
o) kill extra line in the end of file;
o) kill extra space in the end of line;
o) replace blank lines with .Pp;

millert@@ ok
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.61 2001/12/13 20:16:48 mpech Exp $
d91 1
a91 1
.Ar {DES,BLF,3DES,CAST}-{MD5,SHA}[-{DSS,RSA_SIG}]
d96 8
a103 1
.Ar QM-{ESP,AH}[-TRP]-{DES,3DES,CAST,BLF,AES}[-{MD5,SHA,RIPEMD}][-PFS]-SUITE
d111 7
a117 15
There are two predefined lifetimes used.
The Main Mode lifetime, named LIFE_MAIN_MODE, currently
defaults to one hour (minimum 60 seconds, maximum 1 day).
The Quick Mode lifetime, LIFE_QUICK_MODE,
defaults to 20 minutes (minimum 60 seconds, maximum 1 day).
.Pp
In addition, the predefinitions include some default values for the special
sections "General", and "X509-certificates".
These values are presented in the example below.
.Pp
Note that using the predefined section names imply some minor limitations.
There are currently no predefined ESP+AH Quick Mode suites, and the
Diffie-Hellman group description for Main Mode (and Quick Mode with PFS) is
set to DH group 1 (MODP_768) when using MD5 hash, and DH group 2 (MODP_1024)
when using SHA hash.
d120 1
a120 2
same section and tag names in the configuration file.
.Pp
d130 4
d713 1
a713 1
GROUP_DESCRIPTION=	MODP_768
d885 1
a885 1
GROUP_DESCRIPTION=	MODP_768
d948 1
a948 1
GROUP_DESCRIPTION=	MODP_768
a975 9
.Sh BUGS
The RFCs does not permit differing DH groups in the same proposal for
aggressive and quick mode exchanges.
As the predefined suites currently uses DH group 1 for MD5 suites and
DH group 2 for SHA suites, combining a MD5 and a SHA suite in a proposal
will cause the exchange to fail.
.Pp
The current recommended workaround is to either use MD5- or SHA-only
suites, or to specify the suites manually.
@


1.61
log
@o) start new sentence on a new line;
o) wrap long lines;
o) fix bogus .Xr usage;
o) we don't like blank lines;
o) always close .Bl tags;
o) OpenBSD -> .Ox;
o) don't like .Pp before .Ss;

millert@@ ok;
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.60 2001/12/10 03:45:03 ho Exp $
d86 1
a86 1
to fully specify the Main Mode transforms and Quick Mode suites, protocols 
d99 1
a99 1
Example 1: 3DES-SHA means; 3DES encryption, SHA hash, and authorization by 
d101 1
a101 1
Example 2: QM-ESP-3DES-SHA-PFS-SUITE means; ESP protocol, 3DES encryption, 
d105 1
a105 1
The Main Mode lifetime, named LIFE_MAIN_MODE, currently 
d115 1
a115 1
There are currently no predefined ESP+AH Quick Mode suites, and the 
d117 1
a117 1
set to DH group 1 (MODP_768) when using MD5 hash, and DH group 2 (MODP_1024) 
d120 1
a120 1
All autogenerated values can be overridden by manual entries by using the 
d123 2
a124 2
In particular, the default phase 1 (Main or Aggressive Mode) and phase 2 
(Quick Mode) lifetimes can be overridden by these tags under the "General" 
d301 4
a304 4
In case of 
.Li UDP , 
the 
.Li UDP 
d400 1
a400 1
If unspecified, defaults to 
d500 1
a500 1
.Li IPSEC . 
d502 1
a502 1
.Li IPSEC . 
@


1.60
log
@Mention that SIGHUP will cause isakmpd to reread isakmpd.conf
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.59 2001/10/11 13:24:31 ho Exp $
a82 1
.Pp
d104 4
a107 5
There are two predefined lifetimes used. The Main Mode lifetime,
named LIFE_MAIN_MODE, currently 
defaults to one hour (minimum 60 seconds, maximum 1 day). The Quick Mode 
lifetime,
LIFE_QUICK_MODE,
d111 2
a112 2
sections "General", and "X509-certificates".  These values are presented in
the example below.
d190 3
a192 2
looks for explicitly trusted public keys. The default is
"/etc/isakmpd/pubkeys". Read
d202 2
a203 2
A name of the default ISAKMP peer.  Incoming
Phase 1 connections from other IP-addresses will use this peer name.
d240 7
a246 6
an exchange with a remote IKE daemon that uses that ID. Note that, in
the former case, the last credential in the file MUST contain our
public key in its Licensees field. More than one credentials may exist
in the file. They are separated by whitelines (the format is
essentially the same as that of the policy file). The credentials are
of the same format as the policies described in
d249 2
a250 2
key, and the assertion is signed. Signed assertions can be generated
using the
d255 3
a257 2
authentication. If the directory (and the files) exist, they take
precedence over X509-based authentication.
d263 3
a265 2
that we trust to sign other certificates.  Note that for a CA to be
really trusted, it needs to be somehow referred to by policy, in
d269 4
a272 4
Distinguished Names (DNs). Keeping a separate directory (as opposed
to integrating policies and X.509 CA certificates) allows for maintenance
of a list of "well known" CAs without actually having to trust all (or any)
of them.
d976 4
a979 3
aggressive and quick mode exchanges.  As the predefined suites currently
uses DH group 1 for MD5 suites and DH group 2 for SHA suites, combining
a MD5 and a SHA suite in a proposal will cause the exchange to fail.
@


1.59
log
@Fix various bugs in the example configuration. Most entries are
"pregenerated", so indicate which aren't. 'Default-phase-N-lifetime'
replaces LIFE_nnn_SECS.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.58 2001/10/04 23:31:27 ho Exp $
d77 6
@


1.58
log
@IPv6 type addresses and nets are supported now. Some style fixes.
Also add a BUGS section describing why combining predefined MD5 and
SHA suites in the same quick-mode proposal will currently not work.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.57 2001/08/15 09:16:30 ho Exp $
d704 1
a704 8
Life=			LIFE_600_SECS,LIFE_1000_KB

[DES-MD5-NO-VOL-LIFE]
ENCRYPTION_ALGORITHM=	DES_CBC
HASH_ALGORITHM=		MD5
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	MODP_768
Life=			LIFE_600_SECS
d710 2
a711 2
GROUP_DESCRIPTION=	MODP_768
Life=			LIFE_600_SECS,LIFE_1000_KB
d720 1
a720 1
Life=			LIFE_3600_SECS
d724 1
a724 1
[BLF-SHA-M1024]
d730 1
a730 17
Life=			LIFE_600_SECS,LIFE_1000_KB

[BLF-SHA-EC155]
ENCRYPTION_ALGORITHM=	BLOWFISH_CBC
KEY_LENGTH=		128,96:192
HASH_ALGORITHM=		SHA
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	EC2N_155
Life=			LIFE_600_SECS,LIFE_1000_KB

[BLF-MD5-EC155]
ENCRYPTION_ALGORITHM=	BLOWFISH_CBC
KEY_LENGTH=		128,96:192
HASH_ALGORITHM=		MD5
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	EC2N_155
Life=			LIFE_600_SECS,LIFE_1000_KB
d732 1
d739 1
a739 1
Life=			LIFE_600_SECS,LIFE_1000_KB
d777 1
a777 1
[QM-ESP-3DES-SHA-PFS-SUITE]
d788 1
a788 1
# AH + ESP
d864 1
a864 1
Life=			LIFE_600_SECS
d870 1
a870 1
Life=			LIFE_600_SECS
d877 1
a877 1
Life=			LIFE_600_SECS
d883 1
a883 1
Life=			LIFE_600_SECS
d891 1
a891 1
Life=			LIFE_600_SECS
d898 1
a898 1
Life=			LIFE_600_SECS
d904 1
a904 1
Life=			LIFE_600_SECS
d912 1
a912 1
Life=			LIFE_600_SECS
d919 1
a919 1
Life=			LIFE_600_SECS
d925 1
a925 1
Life=			LIFE_600_SECS
d933 1
a933 1
Life=			LIFE_600_SECS
d939 1
a939 1
Life=			LIFE_600_SECS
d941 1
a941 5
[LIFE_600_SECS]
LIFE_TYPE=		SECONDS
LIFE_DURATION=		600,450:720

[LIFE_3600_SECS]
d945 1
a945 1
[LIFE_1000_KB]
a947 8

[LIFE_32_MB]
LIFE_TYPE=		KILOBYTES
LIFE_DURATION=		32768,16384:65536

[LIFE_4.5_GB]
LIFE_TYPE=		KILOBYTES
LIFE_DURATION=		4608000,4096000:8192000
@


1.57
log
@Support trusted public (RSA) keys as files too. niklas@@ ok.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.56 2001/08/02 09:55:38 ho Exp $
d330 1
a330 1
The ID type as given by the RFCs.
d334 2
d337 1
a337 1
.Li USER_FQDN ,
d342 3
a344 1
.Li IPV4_ADDR ,
d349 2
d356 2
d363 1
a363 1
.Li USER_FQDN ,
d558 3
a560 1
.Li IPV4_ADDR
d562 1
a562 1
.Li IPV4_ADDR_SUBNET .
d565 3
a567 1
.Li IPV4_ADDR ,
d572 2
d579 2
d585 3
a587 1
.Li IPV4_ADDR
d589 1
a589 1
.Li IPV4_ADDR_SUBNET ,
d596 3
a598 1
.Li IPV4_ADDR
d600 1
a600 1
.Li IPV4_ADDR_SUBNET ,
d1000 8
@


1.56
log
@Let the example config use suites that actually work together.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.55 2001/07/04 22:01:13 angelos Exp $
d183 7
@


1.55
log
@Some text on KEY_ID payloads.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.54 2001/06/27 03:31:42 angelos Exp $
d641 1
a641 1
Suites=			QM-ESP-3DES-SHA-PFS-SUITE,QM-ESP-DES-MD5-SUITE
@


1.54
log
@Consistently use "IPsec" capitalization (jsyn@@nthought.com)
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.53 2001/06/05 11:20:28 angelos Exp $
d353 17
@


1.53
log
@Remove BUGS section, as the only bug mentioned there was removed
earlier today :-)
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.52 2001/05/05 00:49:38 angelos Exp $
d47 1
a47 1
IPSEC layer of the kernel's networking stack.
d200 1
a200 1
A list of directed IPSec "connection" names that should be brought up
d204 1
a204 1
Look at <IPSec-connection> below.
d208 1
a208 1
This too is mentioned in the <IPSec-connection> section, in the "Flags" tag.
d210 1
a210 1
A list of IPSec "connection" names we recognize and accept initiations for.
d212 1
a212 1
Look at <IPSec-connection> below.
d280 1
a280 1
as ISAKMP-peers and IPSec-connections
d417 1
a417 1
.It Em <IPSec-connection>
d422 1
a422 1
as ISAKMP-peers and IPSec-connections
d430 2
a431 2
The name of the IPSec-configuration section to use.
Look at <IPSec-configuration> below.
d436 2
a437 2
<IPSec-connection> we are dealing with.
Look at <IPSec-ID> below.
d442 2
a443 2
<IPSec-connection> we are dealing with.
Look at <IPSec-ID> below.
d446 1
a446 1
handling of the IPSec SA.
d450 1
a450 1
If this flag is given and this <IPSec-connection> is part of the phase 2
d455 1
a455 1
.It Em <IPSec-configuration>
d470 1
a470 1
Each of the list elements is a name of an <IPSec-suite> section.
d473 1
a473 1
.It Em <IPSec-suite>
d477 1
a477 1
Each of the list elements is a name of an <IPSec-protocol>
d481 1
a481 1
.It Em <IPSec-protocol>
d491 1
a491 1
Each of the list elements is a name of an <IPSec-transform>
d503 1
a503 1
.It Em <IPSec-transform>
d521 1
a521 1
.It Em <IPSec-ID>
d525 1
a525 1
For IPSec this is currently
@


1.52
log
@Document default-phase2-suites tag.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.51 2001/04/30 13:53:26 ho Exp $
a938 5
.Sh BUGS
.Nm
does not currently verify the Remote-ID as specified in the
ISAKMP-peer section.
It is still possible to verify this through the policy file.
@


1.51
log
@Add a FILES section describing default and sample file locations.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.50 2001/04/05 23:04:53 ho Exp $
d156 4
@


1.50
log
@Style.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.49 2001/03/07 07:33:53 angelos Exp $
d940 11
@


1.49
log
@Add KEY_ID support (mostly from roland@@digitalvampire.org)
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.48 2001/01/27 12:03:33 niklas Exp $
d151 1
a151 1
.It Em Policy-File
d632 1
a632 1
Policy-File=		/etc/isakmpd/isakmpd.policy
@


1.48
log
@(c) 2001
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.47 2001/01/26 11:08:58 niklas Exp $
d324 1
d326 1
a326 1
.Li USER_FQDN .
d343 2
a344 1
.Li FQDN
d346 3
a348 3
.Li USER_FQDN ,
this tag should exist and contain a domain name or a user@@domain
string respectively.
@


1.47
log
@Merge with EOM 1.57

author: ho
Lifetime is KILOBYTES not BYTES. Noticed by <jj@@dynarc.se>
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.46 2000/12/15 14:31:18 aaron Exp $
d5 1
a5 1
.\" Copyright (c) 2000 Håkan Olsson.  All rights reserved.
@


1.46
log
@.Sh EXAMPLE -> .Sh EXAMPLES. Even if there's only one example, at least
this is consistent.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.45 2000/12/12 01:46:05 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.55 2000/12/04 02:04:29 angelos Exp $
d404 1
a404 1
.Li BYTES
@


1.45
log
@Merge with EOM 1.55

author: angelos
Add Default-phase-1-ID tag in [General], and document its use.

author: angelos
isakmpd can now negotiate transport protocol/ports (either through the
configuration file or through kernel ACQUIREs).
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.44 2000/11/23 12:56:06 niklas Exp $
d559 1
a559 1
.Sh EXAMPLE
@


1.44
log
@Merge with EOM 1.53

author: niklas
sync with OpenBSD
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.43 2000/11/09 22:50:06 aaron Exp $
.\" $EOM: isakmpd.conf.5,v 1.53 2000/11/23 12:39:13 niklas Exp $
d131 15
d537 20
@


1.43
log
@Remove -offset indent so these lines don't wrap over 80 chars; deraadt@@
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.42 2000/10/16 23:28:22 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.52 2000/10/15 20:01:28 niklas Exp $
@


1.42
log
@Merge with EOM 1.52

author: niklas
heh, backspace as a continuation character, yeah right!

author: angelos
Mention Remote-ID tag in ISAKMP-peer section, and also that it doesn't
currently work.

author: angelos
It's "Local-address", not "Listen-address" in the ISAKMP-peer section.

author: angelos
Mention RIPEMD.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.41 2000/10/09 23:27:31 niklas Exp $
d85 1
a85 1
.Bd -filled -offset indent -compact
d90 1
a90 1
.Bd -filled -offset indent -compact
@


1.42.2.1
log
@Pull in isakmpd from 2.9 to 2.8 branch.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.51 2001/04/30 13:53:26 ho Exp $
.\" $EOM: isakmpd.conf.5,v 1.57 2000/12/21 14:43:17 ho Exp $
d5 1
a5 1
.\" Copyright (c) 2000, 2001 Håkan Olsson.  All rights reserved.
d85 1
a85 1
.Bd -filled -compact
d90 1
a90 1
.Bd -filled -compact
a130 15
Also, the default Phase 1 ID can be set by creating a <Phase1-ID>
section, as shown below, and adding this tag under the "General"
section;
.Pp
.Bd -literal
[General]
Default-phase-1-ID=		Phase1-ID-name

[Phase1-ID-name]
ID-type=			USER_FQDN
Name=				foo@@bar.com
.Ed
.\"XXX Following empty .Ss works around a nroff bug, we want the new line."
.Ss
.Pp
d136 1
a136 1
.It Em Policy-file
a308 1
.Li USER_FQDN ,
d310 1
a310 1
.Li KEY_ID .
d327 2
a328 1
.Li FQDN ,
d330 2
a331 4
or
.Li KEY_ID ,
this tag should exist and contain a domain name, user@@domain, or
other identifying string respectively.
d389 1
a389 1
.Li KILOBYTES
a521 20
.It Em Protocol
If the ID-type is
.Li IPV4_ADDR
or
.Li IPV4_ADDR_SUBNET ,
this tag indicates what transport protocol should be transmitted over
the SA.
If left unspecified, all transport protocols between the two address
(ranges) will be sent (or permitted) over that SA.
.It Em Port
If the ID-type is
.Li IPV4_ADDR
or
.Li IPV4_ADDR_SUBNET ,
this tag indicates what source or destination port is allowed to be
transported over the SA (depending on whether this is a local or
remote ID).
If left unspecified, all ports of the given transport protocol
will be transmitted (or permitted) over the SA.
The Protocol tag must be specified in conjunction with this tag.
d524 1
a524 1
.Sh EXAMPLES
d595 1
a595 1
Policy-file=		/etc/isakmpd/isakmpd.policy
a902 11
.Sh FILES
.Bl -tag -width /etc/isakmpd/isakmpd.conf
.It Pa /etc/isakmpd/isakmpd.conf
The default
.Nm isakmpd
configuration file.
.It Pa /usr/share/ipsec/isakmpd/
A directory containing some sample
.Nm isakmpd
configuration files.
.El
@


1.41
log
@samples/VPN-3way-template.conf: Merge with EOM 1.8
samples/VPN-east.conf: Merge with EOM 1.12
samples/VPN-west.conf: Merge with EOM 1.13
samples/policy: Merge with EOM 1.6
samples/singlehost-west.conf: Merge with EOM 1.9
samples/singlehost-east.conf: Merge with EOM 1.9
conf.c: Merge with EOM 1.37
ipsec.c: Merge with EOM 1.133
ipsec_num.cst: Merge with EOM 1.4
isakmpd.conf.5: Merge with EOM 1.48
isakmpd.policy.5: Merge with EOM 1.21
policy.c: Merge with EOM 1.46

author: angelos
AES support.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.40 2000/10/07 07:00:08 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.48 2000/10/09 22:08:29 angelos Exp $
d62 1
a62 1
continue it on the next by ending the first with a backspace character
d91 1
a91 1
.Ar QM-{ESP,AH}[-TRP]-{DES,3DES,CAST,BLF,AES}[-{MD5,SHA}][-PFS]-SUITE
d274 1
a274 1
.It Em Listen-address
d291 5
d898 5
@


1.40
log
@conf.h: Merge with EOM 1.13
gmp_util.c: Merge with EOM 1.7
isakmpd.conf.5: Merge with EOM 1.47

author: ho
(c)-2000
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.39 2000/08/03 07:24:14 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.47 2000/09/18 00:01:47 ho Exp $
d91 1
a91 1
.Ar QM-{ESP,AH}[-TRP]-{DES,3DES,CAST,BLF}[-{MD5,SHA}][-PFS]-SUITE
d704 8
d765 14
d834 21
@


1.39
log
@Merge with EOM 1.46

author: ho
Mention 'Default' tag in Phase 1 section, modify peer tag descriptions
to match. Phase 1 peer transport 'udp' is now a default value. The
'Stayalive' flag died long ago, remove it from the example. Also
remove reference to the likewise dead 'Next-hop' tag. Some minor cleanup.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.38 2000/06/08 20:51:00 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.46 2000/07/05 11:03:32 ho Exp $
d5 1
@


1.38
log
@Merge with EOM 1.45

author: angelos
Some more text.

author: angelos
Allow exchange of KeyNote credentials over IKE. Multiple credentials
may be passed in a single CERT payload. KeyNote is used if a
directory named as the local ID we use in an exchange exists in the
KeyNote directory (default: /etc/isakmpd/keynote/). Note that
asymmetric credentials are possible (use KeyNote in one direction and
X509 in the other); such authentication is envisioned to be the most
common: the clients will use KeyNote credentials to authenticate and
authorize with a server, whilst the server will just provide an X509
certificate proving its binding to the IP address or ID.

Totally asymmetric authentication (e.g., shared key in one direction,
RSA in the other) is not supported by the IKE protocol.

author: ho
Update re DOI:IPSEC and default p1/p2 lifetimes.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.37 2000/05/02 14:36:18 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.45 2000/05/26 21:49:07 angelos Exp $
d169 4
d263 10
a272 2
The name of the transport protocol, normally
.Li udp .
d276 1
a276 5
The IP-address of the peer.
.It Em Port
In case of UDP, the UDP port number to send to.
This is optional, the
default value is 500 which is the IANA-registered number for ISAKMP.
d281 1
a281 1
Authentication data for this specific peer.
a293 3
.It Em Next-hop
A Linux FreeS/WAN specific value which should be the IP address of the
next hop along the path to reach the peer, usually a router.
d537 1
d540 1
a540 1
Transport=		udp
a542 1
# Default values for "Port" commented out
d547 1
a547 1
Flags=			Stayalive
d555 1
a555 1
Flags=			Stayalive
@


1.37
log
@Merge with EOM 1.42

author: ho
Add initial text on auto-generated parts of the configuration.
Reorder example somewhat.

author: niklas
Doc fixes from OpenBSD
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.36 2000/04/12 21:47:59 aaron Exp $
.\" $EOM: isakmpd.conf.5,v 1.42 2000/05/02 00:23:27 ho Exp $
d117 10
d193 28
d328 2
d428 3
a430 1
.Li IPSEC .
a564 1
DOI=			IPSEC
a570 1
DOI=			IPSEC
d588 4
d846 1
@


1.36
log
@Trailing whitespace begone!
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.35 2000/04/07 22:23:14 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.40 2000/04/07 22:17:11 niklas Exp $
d77 43
a477 3
Policy-File=		/etc/isakmpd/isakmpd.policy
Retransmits=		5
Exchange-max-time=	120
d527 21
a621 8

# Quick mode description
########################

[Default-quick-mode]
DOI=			IPSEC
EXCHANGE_TYPE=		QUICK_MODE
Suites=			QM-ESP-3DES-SHA-PFS-SUITE,QM-ESP-DES-MD5-SUITE
@


1.35
log
@apps/certpatch/certpatch.8: Merge with EOM 1.5
isakmpd.8: Merge with EOM 1.20
isakmpd.conf.5: Merge with EOM 1.40
isakmpd.policy.5: Merge with EOM 1.13

author: niklas
Changes from OpenBSD
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.34 2000/04/07 22:06:57 niklas Exp $
d216 1
a216 1
.Li FQDN , 
@


1.34
log
@Merge with EOM 1.39

author: angelos
Add text on CAs and policies.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.33 2000/03/23 21:39:56 aaron Exp $
.\" $EOM: isakmpd.conf.5,v 1.39 2000/03/22 05:52:11 angelos Exp $
@


1.33
log
@More pedantic man page formatting insanity, lalala
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.32 2000/03/22 04:06:17 angelos Exp $
.\" $EOM: isakmpd.conf.5,v 1.38 2000/01/31 08:39:44 niklas Exp $
@


1.32
log
@Add some text about CA certificates and policies (suggested by Paul
Hoffman).
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.31 2000/03/18 22:55:59 aaron Exp $
d85 2
a86 1
policies. The default is "/etc/isakmpd/isakmpd.policy".
d196 2
a197 1
local client ID that we should present to our peer. If not present, it
d199 2
a200 1
over to the remote daemon. Look at <Phase1-ID> below.
d283 2
a284 1
A list of lifetime descriptions, or ANY. In the former case, each
d286 2
a287 1
Look at <Lifetime> below. If it is set to ANY, then any type of
d296 2
a297 2
depending on the type of the duration. Notice that this field may NOT
be set to ANY.
d299 2
a300 1
An offer/accept kind of value, see above. Can also be set to ANY.
@


1.31
log
@Remove hard sentence breaks, and some other cleanup along the way.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.30 2000/01/31 08:38:28 niklas Exp $
d143 9
a151 1
that we trust to sign other certificates.
@


1.30
log
@ike_quick_mode.c: Merge with EOM 1.109
isakmpd.conf.5: Merge with EOM 1.38
message.c: Merge with EOM 1.142
pf_key_v2.c: Merge with EOM 1.35
x509.c: Merge with EOM 1.31

author: niklas
(c) 2000
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.29 2000/01/26 15:22:52 niklas Exp $
d50 2
a51 2
files.  This format consists of sections, each beginning with a line looking
like:
d62 2
a63 2
immediately before the newline character.  This method can extend a value for
an arbitrary amount of lines.
d72 2
a73 1
use comma as the separator.  Some values are formatted like this: X,Y:Z, which
d94 2
a95 1
A list of IP-addresses OK to listen on.  This list is used as
d97 2
a98 1
provides.  This means that we won't see if an address given
d105 2
a106 1
and setup SAs with eachother.  Specifically this means replay
d114 3
a116 3
A name of the ISAKMP peer at the given IP-address.  This name
is used as the section name for further information to be
found.  Look at <ISAKMP-peer> below.
d124 3
a126 2
startup of the daemon.  These names are section names where further
information can be found.  Look at <IPSec-connection> below.
d129 2
a130 2
flag: "Active-only" that disables this behaviour.  This too is
mentioned in the <IPSec-connection> section, in the "Flags" tag.
d133 3
a135 2
These names are section names where further information can be found.  Look
at <IPSec-connection> below.  Currently only the Local-ID and Remote-ID tags
d145 1
a145 1
A directory containing PEM certificates that we trust to be valid.  
d176 2
a177 1
In case of UDP, the UDP port number to send to.  This is optional, the
d180 2
a181 2
The name of the ISAKMP-configuration section to use.  Look at
<ISAKMP-configuration> below.
d183 2
a184 2
Authentication data for this specific peer.  In the case of
preshared key, this is the key value itself.
d192 2
a193 2
handling of the ISAKMP SA.  Currently there are no specific
ISAKMP SA flags defined.
d201 2
a202 1
The ID type as given by the RFCs.  For Phase 1 this is currently
d233 2
a234 1
The domain of interpretation as given by the RFCs.  Normally
d237 2
a238 1
The exchange type as given by the RFCs.  For main mode this is
d244 4
a247 3
ISAKMP traffic.  These are actually names for sections
further describing the transforms.  Look at <ISAKMP-transform>
below.
d256 2
a257 2
where the offered/accepted keylengths are described.  The
value is of the offer-accept kind described above.
d263 2
a264 2
The group used for Diffie-Hellman exponentiations, or ANY.  The
name are symbolic, like
d297 3
a299 2
set up this connection.  The value is the name of an
<ISAKMP-peer> section.  See above.
d301 2
a302 2
The name of the IPSec-configuration section to use.  Look at
<IPSec-configuration> below.
d312 1
a312 1
It is also used  when we act as responders to find out what
d317 2
a318 1
handling of the IPSec SA.  Currently only one flag is defined:
d329 2
a330 1
The domain of interpretation as given by the RFCs.  Normally
d333 2
a334 1
The exchange type as given by the RFCs.  For quick mode this is
d338 3
a340 2
protecting the IP traffic.  Each of the list elements is a
name of	an <IPSec-suite> section.  See below.
d347 2
a348 1
section.  See below.
d353 2
a354 2
The protocol as given by the RFCs.  Acceptable values today
are
d361 2
a362 1
section.  See below.
d364 3
a366 2
The size of the window used for replay protection.  This is normally
left alone.  Look at the
d377 2
a378 2
The encapsulation mode as given by the RFCs.  This means
TRANSPORT or TUNNEL.
d384 2
a385 1
description.  The values are the same as GROUP_DESCRIPTION's
d393 2
a394 1
The ID type as given by the RFCs.  For IPSec this is currently
@


1.29
log
@Merge with EOM 1.37

date: 2000/01/25 11:19:34;  author: niklas;  state: Exp;  lines: +3 -3
useable->usable; from openbsd

author: angelos
Oops on previous PFS-policy patch. Small fixes in the manpages.

author: angelos
Default value for policy-file.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.28 2000/01/22 13:39:28 aaron Exp $
.\" $EOM: isakmpd.conf.5,v 1.37 2000/01/25 11:19:34 niklas Exp $
d4 1
a4 1
.\" Copyright (c) 1998, 1999 Niklas Hallqvist.  All rights reserved.
@


1.28
log
@Spell it "usable", not "useable", for consistency across the man pages.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.27 1999/10/01 14:09:58 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.34 1999/10/01 14:00:23 niklas Exp $
d84 1
a84 1
policies.
d400 1
a400 1
Policy-File=		/etc/isakmpd/policy
d715 1
@


1.27
log
@Merge with EOM 1.34

author: niklas
Typo fix from alex@@openbsd.org

author: angelos
Allow "Life" to be ANY

author: angelos
Allow "ANY" in some fields
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.26 1999/09/23 04:12:02 alex Exp $
d322 1
a322 1
A list of protection suites (bundles of protocols) useable for
d342 1
a342 1
A list of transforms useable for implementing the protocol.
@


1.26
log
@Typo fixes.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.25 1999/08/26 22:28:43 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.31 1999/08/20 01:20:44 angelos Exp $
d241 2
a242 1
The encryption algorithm as the RFCs name it.
d248 1
a248 1
The hash algorithm as the RFCs name it.
d250 1
a250 1
The authentication method as the RFCs name it.
d252 1
a252 1
The group used for Diffie-Hellman exponentiations.  The
d257 3
d261 4
a264 3
A list of lifetime descriptions.  Each element is in itself
a name of the section that defines the lifetime.  Look at
<Lifetime> below.
d272 2
a273 1
depending on the type of the duration.
d275 1
a275 1
An offer/accept kind of value, see above.
@


1.25
log
@Merge with EOM 1.31

author: angelos
Document the ID section/tag for Phase 1 exchanges.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.24 1999/07/18 09:49:07 niklas Exp $
d72 1
a72 1
use comma as the separator.  Some values are formated like this: X,Y:Z, which
@


1.24
log
@Merge with EOM 1.30

author: niklas
More sync with OpenBSD version
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.23 1999/07/18 09:33:33 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.30 1999/07/18 09:52:09 niklas Exp $
d178 5
d190 31
@


1.23
log
@samples/VPN-east.conf: Merge with EOM 1.7
samples/VPN-west.conf: Merge with EOM 1.7
samples/singlehost-west.conf: Merge with EOM 1.4
samples/singlehost-east.conf: Merge with EOM 1.4
README.PKI: Merge with EOM 1.3
ike_auth.c: Merge with EOM 1.33
isakmpd.conf.5: Merge with EOM 1.28

author: niklas
Moving the PRIVKEY tag into the X509-certificates section, renaming it to
Private-key.  Also rename the keynote policy file.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.22 1999/07/17 21:54:39 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.28 1999/07/18 09:25:33 niklas Exp $
d672 1
@


1.22
log
@regress/rsakeygen/Makefile: Merge with EOM 1.4
regress/rsakeygen/rsakeygen.c: Merge with EOM 1.8
regress/x509/Makefile: Merge with EOM 1.6
regress/x509/x509test.c: Merge with EOM 1.6
regress/Makefile: Merge with EOM 1.8
samples/VPN-east.conf: Merge with EOM 1.6
samples/VPN-west.conf: Merge with EOM 1.6
samples/singlehost-east.conf: Merge with EOM 1.3
samples/singlehost-west.conf: Merge with EOM 1.3
sysdep/openbsd/Makefile.sysdep: Merge with EOM 1.5
x509.h: Merge with EOM 1.6
x509.c: Merge with EOM 1.17
DESIGN-NOTES: Merge with EOM 1.46
Makefile: Merge with EOM 1.55
cert.c: Merge with EOM 1.11
cert.h: Merge with EOM 1.6
exchange.c: Merge with EOM 1.109
exchange.h: Merge with EOM 1.26
ike_auth.c: Merge with EOM 1.32
ike_phase_1.c: Merge with EOM 1.7
init.c: Merge with EOM 1.16
isakmpd.conf.5: Merge with EOM 1.27
README.PKI: Merge with EOM 1.1

author: niklas
From Niels Provos, edited by me: certificate support using SSLeay
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.21 1999/07/09 13:35:49 aaron Exp $
.\" $EOM: isakmpd.conf.5,v 1.27 1999/07/17 20:44:11 niklas Exp $
d146 4
d358 1
a358 1
Policy-File=		/etc/isakmpd.policy
d414 1
a668 3

[RSA_SIG]
PRIVKEY=		/etc/isakmpd/private/local.key
@


1.21
log
@- remove all trailing whitespace
     * except when it is escaped with a `\' at the end of the line
- fix remaining .Nm usage as well
- this is from a patch I received from kwesterback@@home.com, who has been
  working on some scripts for fixing formatting errors in mdoc'd man pages

Ok, so there could be a cost/benefit debate with this commit, but since I have
the patch we might as well commit it...
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.20 1999/07/07 22:07:00 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.26 1999/07/07 19:17:31 niklas Exp $
d133 14
d406 5
d666 1
a666 3
CERT=			/etc/isakmpd_cert
PRIVKEY=		/etc/isakmpd_key
PUBKEY=			/etc/isakmpd_key.pub
@


1.20
log
@Merge with EOM 1.26

author: niklas
Merge in fixes done in the OpenBSD tree

author: ho
Add keynote policy-file.

author: ho
No more Stayalive-flag.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.19 1999/07/03 02:11:07 aaron Exp $
d162 1
a162 1
handling of the ISAKMP SA.  Currently there are no specific 
@


1.19
log
@remove redundant .Pp macros
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.18 1999/06/02 06:34:27 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.23 1999/06/02 06:26:41 niklas Exp $
d81 4
d96 1
a96 1
here does not exist on this host, thus no error is given for
d162 2
a163 4
handling of the IPSec SA.  Currently only one flag is defined:
.Dv Stayalive ,
which means that after the expiration of an ISAKMP SA, the initiator
side will automatically renegotiate for a new SA of the same name.
d245 1
a245 1
handling of the IPSec SA.  Currently these flags are defined:
a246 3
.It Em Stayalive
This means that after the expiration of an IPSec SA, a new SA of the same name
will automatically be renegotiated.
d340 1
@


1.18
log
@Merge with EOM 1.23

author: niklas
Doc fixes from OpenBSD

author: niklas
Some extra error checking, documentation and style wrt connections

author: niklas
Initial text for Passive-Connections

author: niklas
Doc fix from OpenBSD
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.17 1999/05/16 19:56:15 alex Exp $
a650 1
.Pp
@


1.17
log
@Cleanup xrefs under SEE ALSO.  Specifically:

  - Sort xrefs by section, and then alphabetically.
  - Add missing commas between xref items.
  - Remove commas from the last xref entry.
  - Remove duplicate entries.
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.16 1999/05/01 20:43:43 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.19 1999/05/01 20:21:10 niklas Exp $
d118 10
d232 2
d238 2
d243 10
a252 4
handling of the IPSec SA.  Currently only one flag is defined:
.Dv Stayalive ,
which means that after the expiration of an IPSec SA, the initiator
side will automatically renegotiate for a new SA of the same name.
@


1.16
log
@sysdep/openbsd/sysdep.c: Merge with EOM 1.7
DESIGN-NOTES: Merge with EOM 1.42
Makefile: Merge with EOM 1.51
app.c: Merge with EOM 1.6
conf.c: Merge with EOM 1.18
init.c: Merge with EOM 1.14
isakmpd.conf.5: Merge with EOM 1.19
pf_encap.c: Merge with EOM 1.64
pf_encap.h: Merge with EOM 1.12
pf_key_v2.h: Merge with EOM 1.3
sysdep.h: Merge with EOM 1.16
transport.c: Merge with EOM 1.40
ui.c: Merge with EOM 1.32

author: niklas
A new connection abstraction
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.15 1999/04/27 20:55:52 niklas Exp $
d633 2
a634 2
.Xr isakmpd 8 ,
.Xr ipsec 4 .
@


1.15
log
@Merge with EOM 1.18

author: niklas
Mention aggressive mode

author: niklas
1999
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.14 1999/04/01 00:37:50 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.18 1999/04/16 21:35:34 niklas Exp $
d83 2
d152 3
@


1.14
log
@Merge with EOM 1.16
Update sample config file
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.13 1999/03/31 23:47:23 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.16 1999/04/01 00:37:37 niklas Exp $
d4 1
a4 1
.\" Copyright (c) 1998 Niklas Hallqvist.  All rights reserved.
d158 3
a160 1
.Li ID_PROT .
@


1.13
log
@Merge with EOM 1.15
Document Local-address
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.12 1999/03/31 20:30:21 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.15 1999/03/31 23:33:21 niklas Exp $
d314 1
a314 1
Retransmits=		3
d331 1
a331 2
# XXX Not yet implemented
#Local-address=		10.1.0.2
d338 1
d346 1
d398 1
a398 1
Life=			LIFE_600_SECS,LIFE_1000_KB
@


1.12
log
@Merge with EOM 1.14
Reflect reality
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.11 1999/03/31 00:51:29 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.14 1999/03/31 20:24:51 niklas Exp $
d131 2
@


1.11
log
@Merge with EOM 1.13
Documet IPSec SA flags
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.10 1999/03/24 15:43:36 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.13 1999/03/30 21:41:33 niklas Exp $
d112 4
a115 3
A list of directed IPSec "connection" names.  This name
is used as the section name for further information to be
found.  Look at <IPSec-connection> below.
d142 6
@


1.10
log
@grammar
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.9 1999/03/24 14:43:53 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.12 1999/03/24 11:01:56 niklas Exp $
d211 6
@


1.9
log
@Merge with EOM 1.12
Document Shared-SADB, and alter the ReplayWindow desc.
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.8 1999/03/11 01:35:03 pjanzen Exp $
d90 1
a90 1
here does not exist on this host, and thus no error is given for
@


1.8
log
@fix more comma splices that involve misuse of conjunctive adverbs
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.7 1999/02/26 03:45:09 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.11 1999/02/25 11:09:39 niklas Exp $
d92 7
d245 2
a246 4
The size of the window used for replay protection.  Normally this is should
not be touched, unless you do local IPSec setups, i.e. both the sender and
receiver are on the same box.  Then replay protection has to be turned off
which is done by setting this parameter to -1.  Look at the
@


1.7
log
@Merge from the Ericsson repository
| revision 1.11
| date: 1999/02/25 11:09:39;  author: niklas;  state: Exp;  lines: +10 -1
| Make conf_get_num take a default value to give back when tag does not exist
| ----------------------------
| revision 1.10
| date: 1999/02/24 12:12:15;  author: niklas;  state: Exp;  lines: +228 -117
| Much better description of the config file
| ----------------------------
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.6 1998/12/21 01:02:25 niklas Exp $
d90 1
a90 1
here does not exist on this host, thus no error is given for
@


1.6
log
@Last months worth of work on isakmpd, lots done
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.5 1998/11/28 19:56:32 aaron Exp $
.\" $EOM: isakmpd.conf.5,v 1.9 1998/12/21 00:30:02 niklas Exp $
d69 218
d296 1
d298 1
a298 1
# XXX This double mapping seems rather stupid, but...
d300 7
a306 3
10.1.0.1=		ISAKMP-peer-1
10.1.0.2=		ISAKMP-peer-2
Default=		Default-ISAKMP-peer
d308 1
a308 1
[ISAKMP-peer-1]
a316 21
Configuration=		Default-incoming-main-mode
Authentication=		mekmitasdigoat

[Very-strong-test]
Phase=			1
Transport=		udp
Address=		10.1.0.1
Configuration=		Very-strong-main-mode
Authentication=		mekmitasdigoat

[Strong-test]
Phase=			1
Transport=		udp
Address=		10.1.0.1
Configuration=		Strong-main-mode
Authentication=		mekmitasdigoat

[Default-test]
Phase=			1
Transport=		udp
Address=		10.1.0.1
d320 1
a320 53
[Weak-test]
Phase=			1
Transport=		udp
Address=		10.1.0.1
Configuration=		Weak-main-mode
Authentication=		mekmitasdigoat

[ISAKMP-peer-2]
Phase=			1
Transport=		udp
# XXX Not yet implemented
#Local-address=		10.1.0.1
Address=		10.1.0.2
# Default values for "Port" commented out
#Port=			isakmp
#Port=			500
Configuration=		Default-incoming-main-mode
Authentication=		mekmitasdigoat

[ISAKMP-orust.di.eom.crt.se]
Phase=			1
Transport=		udp
# XXX Not yet implemented
#Local-address=		194.198.196.150
Address=		193.12.107.84
# Default values for "Port" commented out
#Port=			isakmp
#Port=			500
Configuration=		Strong-main-mode
Authentication=		mekmitasdigoat

[Default-ISAKMP-peer]
Phase=			1
# XXX Not yet implemented
#Local-address=		10.1.0.2
Configuration=		Default-incoming-main-mode
Authentication=		mekmitasdigoat

[IPsec-2-1]
Phase=			2
ISAKMP-peer=		ISAKMP-peer-1
Configuration=		Default-quick-mode
Local-ID=		Net-2
Remote-ID=		Net-1

[IPsec-1-2]
Phase=			2
ISAKMP-peer=		ISAKMP-peer-2
Configuration=		Default-quick-mode
Local-ID=		Net-1
Remote-ID=		Net-2

[IPsec-moby-1]
d322 1
a322 1
ISAKMP-peer=		ISAKMP-peer-1
d324 2
a325 2
Local-ID=		moby.appli.se
Remote-ID=		Net-1
d327 1
a327 8
[IPsec-moby-2]
Phase=			2
ISAKMP-peer=		ISAKMP-orust.di.eom.crt.se
Configuration=		Default-quick-mode
Local-ID=		moby.appli.se
Remote-ID=		Net-2

[Net-1]
d332 1
a332 1
[Net-2]
a336 4
[moby.appli.se]
ID-type=		IPV4_ADDR
Address=		194.198.196.216

a338 15
[Default-incoming-main-mode]
DOI=			IPSEC
EXCHANGE_TYPE=		ID_PROT
Transforms=		BLF-SHA-EC185,BLF-MD5-EC155,3DES-SHA,DES-MD5

[Very-strong-main-mode]
DOI=			IPSEC
EXCHANGE_TYPE=		ID_PROT
Transforms=		BLF-SHA-EC185

[Strong-main-mode]
DOI=			IPSEC
EXCHANGE_TYPE=		ID_PROT
Transforms=		BLF-MD5-EC155

a343 5
[Weak-main-mode]
DOI=			IPSEC
EXCHANGE_TYPE=		ID_PROT
Transforms=		DES-MD5

d605 2
a606 1
.Xr isakmpd 8 .
@


1.5
log
@kill redundant .Nm macro arguments; other misc fixes
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.4 1998/11/20 23:47:42 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.5 1998/11/20 23:45:05 niklas Exp $
d76 2
a77 1
Retransmits=		5
d79 150
a228 4
[Main mode]
Offered-transforms=	BLF-SHA-M1024,DES-MD5
#Accepted-transforms=	BLF-SHA-M1024,BLF-SHA-EC185,BLF-SHA-EC155,DES-MD5
Accepted-transforms=	BLF-SHA-EC185,BLF-SHA-EC155,DES-MD5
d235 7
d244 18
d264 1
a264 1
KEY_LENGTH=		128,64:196
d268 1
a268 1
Life=			LIFE_600_SECS
d272 1
a272 1
KEY_LENGTH=		128,64:196
d276 9
a284 1
Life=			LIFE_600_SECS
d288 1
a288 1
KEY_LENGTH=		128,64:196
d292 12
a303 1
Life=			LIFE_600_SECS
d305 1
a305 6
[Quick mode]
#Offered-suites=		QM-ESP-DES-SUITE,\
#			QM-ESP-DES-MD5-SUITE,QM-AH-MD5-ESP-DES-SUITE
Offered-suites=		QM-ESP-DES-SUITE
# XXX Not yet supported.
#Accepted-suites=	QM-ESP-DES-MD5-SUITE,QM-AH-MD5-ESP-DES-SUITE
d310 3
d316 44
d364 41
d409 1
a409 1
Life=			LIFE_600_SECS,LIFE_32_MB
d411 20
a430 3
[LIFE_600_SECS]
SA_LIFE_TYPE=		SECONDS
SA_LIFE_DURATION=	600
d432 6
a437 3
[LIFE_32_MB]
SA_LIFE_TYPE=		KILOBYTES
SA_LIFE_DURATION=	32768
d439 5
a443 2
[QM-AH-MD5-ESP-DES-SUITE]
Protocols=		QM-AH-MD5,QM-ESP-DES
d445 1
a445 3
[QM-AH-MD5]
PROTOCOL_ID=		IPSEC_AH
Transforms=		QM-AH-MD5-XF
d450 2
d453 17
a469 3
[QM-ESP-DES]
PROTOCOL_ID=		IPSEC_ESP
Transforms=		QM-ESP-DES-XF
d471 3
a473 4
[QM-ESP-DES-XF]
TRANSFORM_ID=		DES
ENCAPSULATION_MODE=	TUNNEL
Life=			LIFE_600_SECS,LIFE_32_MB
d475 3
a477 4
[PRE_SHARED]
127.0.0.1=		my_key_to_myself
# A general pre-shared key used for everyone.
Default=		mekmitasdigoat
d486 1
a486 2
.Xr isakmpd 8

@


1.4
log
@match reality
@
text
@d1 1
a1 1
.\" $OpenBSD: isakmpd.conf.5,v 1.3 1998/11/17 11:10:15 niklas Exp $
d36 1
a36 1
.Dt ISAKMPD.CONF 8
d40 1
a40 1
.Nd Configuration file for isakmpd
d42 2
a43 3
The
.Nm isakmpd.conf
is the configuration file for
d46 1
a46 2
.Nm IPSEC
layer of the kernel's networking stack.
d65 3
a67 2
Comments can be put anywhere in the file by using a hash mark, "#".  Then
the comment goes on to the end of the line.
d177 1
a177 1
.Xr isakmpd 8 .
@


1.3
log
@Add RCS Ids from the EOM repository
@
text
@d1 2
a2 2
.\" $OpenBSD: isakmpd.conf.5,v 1.2 1998/11/15 00:43:59 niklas Exp $
.\" $EOM: isakmpd.conf.5,v 1.4 1998/10/12 07:21:38 niklas Exp $
d77 1
a77 1
Retransmits=		10
d79 2
a80 5
[Main mode initiator]
Offered-transforms=	BLF-SHA-16,DES-MD5

[Main mode responder]
# XXX Not yet supported.
d82 1
d89 1
d91 1
a91 1
[BLF-SHA-16]
d93 1
a93 7
KEY_LENGTH=		128
HASH_ALGORITHM=		SHA
AUTHENTICATION_METHOD=	PRE_SHARED
GROUP_DESCRIPTION=	MODP_1024

[BLF-SHA-M1024]
ENCRYPTION_ALGORITHM=	BLOWFISH
d97 1
d100 2
a101 1
ENCRYPTION_ALGORITHM=	BLOWFISH
d105 1
d108 2
a109 1
ENCRYPTION_ALGORITHM=	BLOWFISH
d113 1
d115 4
a118 4
[Quick mode initiator]
Offered-suites=		QM-ESP-DES-MD5-SUITE,QM-AH-MD5-ESP-DES-SUITE

[Quick mode responder]
d122 3
d164 1
d167 3
a169 2
# A general pre-shared key used for everyone.  XXX Should be per-peer later.
KEY=			mekmitasdigoat
@


1.2
log
@openBSD RCS IDs
@
text
@d1 2
a2 1
.\" $OpenBSD: isakmpd.conf.5,v 1.1.1.1 1998/11/15 00:03:49 niklas Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
.\" $Id: isakmpd.conf.5,v 1.4 1998/10/12 07:21:38 niklas Exp $
@


1.1.1.1
log
@Initial import of isakmpd, an IKE (ISAKMP/Oakley) implementation for the
OpenBSD IPSEC stack by me, Niklas Hallqvist and Niels Provos, funded by
Ericsson Radio Systems.  It is not yet complete or usable in a real scenario
but the missing pieces will soon be there.  The early commit is for people
who wants early access and who are not afraid of looking at source.
isakmpd interops with Cisco, Timestep, SSH & Pluto (Linux FreeS/WAN) so
far, so it is not that incomplete.  It is really mostly configuration that
is lacking.
@
text
@@
