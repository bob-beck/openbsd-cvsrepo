head	1.87;
access;
symbols
	OPENBSD_6_1:1.87.0.4
	OPENBSD_6_1_BASE:1.87
	OPENBSD_6_0:1.87.0.2
	OPENBSD_6_0_BASE:1.87
	OPENBSD_5_9:1.85.0.2
	OPENBSD_5_9_BASE:1.85
	OPENBSD_5_8:1.83.0.4
	OPENBSD_5_8_BASE:1.83
	OPENBSD_5_7:1.80.0.2
	OPENBSD_5_7_BASE:1.80
	OPENBSD_5_6:1.78.0.4
	OPENBSD_5_6_BASE:1.78
	OPENBSD_5_5:1.77.0.4
	OPENBSD_5_5_BASE:1.77
	OPENBSD_5_4:1.70.0.2
	OPENBSD_5_4_BASE:1.70
	OPENBSD_5_3:1.68.0.2
	OPENBSD_5_3_BASE:1.68
	OPENBSD_5_2:1.65.0.4
	OPENBSD_5_2_BASE:1.65
	OPENBSD_5_1_BASE:1.65
	OPENBSD_5_1:1.65.0.2
	OPENBSD_5_0:1.64.0.2
	OPENBSD_5_0_BASE:1.64
	OPENBSD_4_9:1.63.0.2
	OPENBSD_4_9_BASE:1.63
	OPENBSD_4_8:1.62.0.2
	OPENBSD_4_8_BASE:1.62
	OPENBSD_4_7:1.61.0.2
	OPENBSD_4_7_BASE:1.61
	OPENBSD_4_6:1.60.0.4
	OPENBSD_4_6_BASE:1.60
	OPENBSD_4_5:1.59.0.4
	OPENBSD_4_5_BASE:1.59
	OPENBSD_4_4:1.59.0.2
	OPENBSD_4_4_BASE:1.59
	OPENBSD_4_3:1.58.0.2
	OPENBSD_4_3_BASE:1.58
	OPENBSD_4_2:1.56.0.2
	OPENBSD_4_2_BASE:1.56
	OPENBSD_4_1:1.50.0.2
	OPENBSD_4_1_BASE:1.50
	OPENBSD_4_0:1.48.0.2
	OPENBSD_4_0_BASE:1.48
	OPENBSD_3_9:1.46.0.2
	OPENBSD_3_9_BASE:1.46
	OPENBSD_3_8:1.25.0.2
	OPENBSD_3_8_BASE:1.25
	OPENBSD_3_7:1.24.0.2
	OPENBSD_3_7_BASE:1.24
	OPENBSD_3_6:1.20.0.2
	OPENBSD_3_6_BASE:1.20
	SMP_SYNC_A:1.19
	SMP_SYNC_B:1.19
	OPENBSD_3_5:1.18.0.2
	OPENBSD_3_5_BASE:1.18
	OPENBSD_3_4:1.17.0.2
	OPENBSD_3_4_BASE:1.17
	UBC_SYNC_A:1.16
	OPENBSD_3_3:1.16.0.4
	OPENBSD_3_3_BASE:1.16
	OPENBSD_3_2:1.16.0.2
	OPENBSD_3_2_BASE:1.16
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6
	UBC_SYNC_B:1.16
	UBC:1.5.0.2
	UBC_BASE:1.5
	SMP:1.4.0.4
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4;
locks; strict;
comment	@# @;


1.87
date	2016.05.20.21.45.04;	author mglocker;	state Exp;
branches;
next	1.86;
commitid	CsD98fXTW5lIxTDN;

1.86
date	2016.03.05.17.41.55;	author mpi;	state Exp;
branches;
next	1.85;
commitid	5025CzLISD0jU2OS;

1.85
date	2016.01.08.15.54.13;	author jcs;	state Exp;
branches;
next	1.84;
commitid	kI4H556ZKYkRQGw5;

1.84
date	2015.11.23.10.30.02;	author mpi;	state Exp;
branches;
next	1.83;
commitid	l95tueflXKD63iOj;

1.83
date	2015.06.26.11.15.32;	author dlg;	state Exp;
branches;
next	1.82;
commitid	mhhlde0dPvyGCPxF;

1.82
date	2015.06.02.13.53.43;	author mpi;	state Exp;
branches;
next	1.81;
commitid	zxbsb8LuCsaRWdMJ;

1.81
date	2015.05.11.06.46.21;	author ratchov;	state Exp;
branches;
next	1.80;
commitid	RaOGL5SyOGOZylwx;

1.80
date	2015.01.20.17.08.35;	author mpi;	state Exp;
branches;
next	1.79;
commitid	9SVbxff6jAFsGD1m;

1.79
date	2014.10.18.12.21.56;	author miod;	state Exp;
branches;
next	1.78;
commitid	bMGwcxDJMvwyWkup;

1.78
date	2014.07.11.21.54.37;	author tedu;	state Exp;
branches;
next	1.77;
commitid	0n9cIGBISFAEt4b1;

1.77
date	2013.11.04.14.07.16;	author deraadt;	state Exp;
branches;
next	1.76;

1.76
date	2013.08.28.07.03.02;	author mpi;	state Exp;
branches;
next	1.75;

1.75
date	2013.08.27.21.00.52;	author mpi;	state Exp;
branches;
next	1.74;

1.74
date	2013.08.15.06.54.35;	author kettenis;	state Exp;
branches;
next	1.73;

1.73
date	2013.08.12.08.38.03;	author mpi;	state Exp;
branches;
next	1.72;

1.72
date	2013.08.12.04.11.52;	author jsg;	state Exp;
branches;
next	1.71;

1.71
date	2013.08.07.07.29.18;	author mpi;	state Exp;
branches;
next	1.70;

1.70
date	2013.05.31.19.32.30;	author mpi;	state Exp;
branches;
next	1.69;

1.69
date	2013.04.21.14.44.16;	author sebastia;	state Exp;
branches;
next	1.68;

1.68
date	2012.12.04.10.42.04;	author mpi;	state Exp;
branches;
next	1.67;

1.67
date	2012.09.08.16.35.46;	author mpi;	state Exp;
branches;
next	1.66;

1.66
date	2012.08.30.21.54.13;	author mpi;	state Exp;
branches;
next	1.65;

1.65
date	2011.11.15.22.27.53;	author deraadt;	state Exp;
branches;
next	1.64;

1.64
date	2011.05.25.07.42.15;	author mpi;	state Exp;
branches;
next	1.63;

1.63
date	2010.12.06.20.10.18;	author jasper;	state Exp;
branches;
next	1.62;

1.62
date	2010.04.09.19.24.17;	author jasper;	state Exp;
branches;
next	1.61;

1.61
date	2009.09.07.19.29.29;	author miod;	state Exp;
branches;
next	1.60;

1.60
date	2009.05.03.21.30.09;	author kettenis;	state Exp;
branches;
next	1.59;

1.59
date	2008.03.21.18.44.14;	author deraadt;	state Exp;
branches;
next	1.58;

1.58
date	2007.11.12.19.23.26;	author kettenis;	state Exp;
branches;
next	1.57;

1.57
date	2007.10.14.17.29.04;	author kettenis;	state Exp;
branches;
next	1.56;

1.56
date	2007.06.08.22.57.43;	author jasper;	state Exp;
branches;
next	1.55;

1.55
date	2007.06.01.23.14.07;	author deraadt;	state Exp;
branches;
next	1.54;

1.54
date	2007.04.23.16.27.20;	author deraadt;	state Exp;
branches;
next	1.53;

1.53
date	2007.04.22.20.17.03;	author gwk;	state Exp;
branches;
next	1.52;

1.52
date	2007.04.22.18.04.24;	author deraadt;	state Exp;
branches;
next	1.51;

1.51
date	2007.04.21.15.43.27;	author gwk;	state Exp;
branches;
next	1.50;

1.50
date	2006.12.06.20.38.14;	author gwk;	state Exp;
branches;
next	1.49;

1.49
date	2006.09.27.06.33.03;	author grange;	state Exp;
branches;
next	1.48;

1.48
date	2006.06.19.15.13.35;	author deraadt;	state Exp;
branches;
next	1.47;

1.47
date	2006.04.23.12.03.47;	author kettenis;	state Exp;
branches;
next	1.46;

1.46
date	2006.01.18.23.21.17;	author miod;	state Exp;
branches;
next	1.45;

1.45
date	2006.01.03.17.23.19;	author xsa;	state Exp;
branches;
next	1.44;

1.44
date	2006.01.01.20.52.23;	author deraadt;	state Exp;
branches;
next	1.43;

1.43
date	2005.12.21.18.50.51;	author miod;	state Exp;
branches;
next	1.42;

1.42
date	2005.12.20.01.36.10;	author brad;	state Exp;
branches;
next	1.41;

1.41
date	2005.11.19.00.43.41;	author kettenis;	state Exp;
branches;
next	1.40;

1.40
date	2005.11.17.15.03.52;	author drahn;	state Exp;
branches;
next	1.39;

1.39
date	2005.11.16.12.28.54;	author kettenis;	state Exp;
branches;
next	1.38;

1.38
date	2005.11.16.03.43.40;	author deraadt;	state Exp;
branches;
next	1.37;

1.37
date	2005.11.15.16.19.15;	author deraadt;	state Exp;
branches;
next	1.36;

1.36
date	2005.11.14.21.54.38;	author kettenis;	state Exp;
branches;
next	1.35;

1.35
date	2005.11.13.19.43.56;	author kettenis;	state Exp;
branches;
next	1.34;

1.34
date	2005.11.12.18.38.22;	author kettenis;	state Exp;
branches;
next	1.33;

1.33
date	2005.11.11.16.22.50;	author kettenis;	state Exp;
branches;
next	1.32;

1.32
date	2005.11.06.03.10.09;	author drahn;	state Exp;
branches;
next	1.31;

1.31
date	2005.10.31.00.24.57;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2005.10.31.00.04.53;	author joris;	state Exp;
branches;
next	1.29;

1.29
date	2005.10.30.23.55.02;	author joris;	state Exp;
branches;
next	1.28;

1.28
date	2005.10.26.17.57.20;	author joris;	state Exp;
branches;
next	1.27;

1.27
date	2005.10.19.14.46.00;	author kettenis;	state Exp;
branches;
next	1.26;

1.26
date	2005.09.29.20.52.26;	author kettenis;	state Exp;
branches;
next	1.25;

1.25
date	2005.05.04.02.24.17;	author drahn;	state Exp;
branches;
next	1.24;

1.24
date	2005.03.08.20.00.23;	author tdeval;	state Exp;
branches;
next	1.23;

1.23
date	2005.03.05.23.58.43;	author tdeval;	state Exp;
branches;
next	1.22;

1.22
date	2004.10.08.13.04.36;	author grange;	state Exp;
branches;
next	1.21;

1.21
date	2004.09.16.09.14.03;	author mickey;	state Exp;
branches;
next	1.20;

1.20
date	2004.07.20.14.51.07;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2004.05.10.21.29.53;	author drahn;	state Exp;
branches;
next	1.18;

1.18
date	2004.01.11.16.33.01;	author drahn;	state Exp;
branches;
next	1.17;

1.17
date	2003.06.05.05.17.04;	author drahn;	state Exp;
branches;
next	1.16;

1.16
date	2002.09.14.11.02.09;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2002.09.06.19.30.12;	author drahn;	state Exp;
branches;
next	1.14;

1.14
date	2002.09.06.13.56.51;	author drahn;	state Exp;
branches;
next	1.13;

1.13
date	2002.07.23.17.53.24;	author drahn;	state Exp;
branches;
next	1.12;

1.12
date	2002.06.25.17.11.49;	author itojun;	state Exp;
branches;
next	1.11;

1.11
date	2002.06.23.23.20.19;	author itojun;	state Exp;
branches;
next	1.10;

1.10
date	2002.06.23.23.19.46;	author itojun;	state Exp;
branches;
next	1.9;

1.9
date	2002.06.08.16.02.10;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2002.04.29.01.34.58;	author drahn;	state Exp;
branches;
next	1.7;

1.7
date	2002.04.29.00.21.26;	author drahn;	state Exp;
branches;
next	1.6;

1.6
date	2002.03.23.14.14.25;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	2001.12.14.14.27.15;	author drahn;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2001.10.03.14.45.37;	author drahn;	state Exp;
branches
	1.4.4.1;
next	1.3;

1.3
date	2001.09.16.03.19.30;	author drahn;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.01.17.38.52;	author drahn;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.01.15.59.31;	author drahn;	state Exp;
branches;
next	;

1.4.4.1
date	2001.10.31.03.01.15;	author nate;	state Exp;
branches;
next	1.4.4.2;

1.4.4.2
date	2002.03.06.01.06.10;	author niklas;	state Exp;
branches;
next	1.4.4.3;

1.4.4.3
date	2003.03.27.23.29.46;	author niklas;	state Exp;
branches;
next	1.4.4.4;

1.4.4.4
date	2003.06.07.11.13.14;	author ho;	state Exp;
branches;
next	1.4.4.5;

1.4.4.5
date	2004.02.19.10.49.03;	author niklas;	state Exp;
branches;
next	1.4.4.6;

1.4.4.6
date	2004.06.05.23.10.52;	author niklas;	state Exp;
branches;
next	;

1.5.2.1
date	2002.06.11.03.36.33;	author art;	state Exp;
branches;
next	1.5.2.2;

1.5.2.2
date	2002.10.29.00.28.05;	author art;	state Exp;
branches;
next	;


desc
@@


1.87
log
@Add a thermal management framework for macppc which controls the fan speed
based on the temperature sensor values.  A driver can register it fans or
temperature sensors there.  Ported from FreeBSD.

ok deraadt kettenis
@
text
@#	$OpenBSD: files.macppc,v 1.86 2016/03/05 17:41:55 mpi Exp $

#
# macppc-specific configuration info
#
maxpartitions 16

maxusers 2 8 128

file	arch/macppc/macppc/autoconf.c
file	arch/macppc/macppc/clock.c
file	arch/macppc/macppc/conf.c
file	arch/macppc/macppc/disksubr.c			disk
file	arch/macppc/macppc/machdep.c
file	arch/macppc/macppc/wscons_machdep.c
file	arch/macppc/macppc/mem.c
file	arch/macppc/macppc/ofw_machdep.c
file	arch/macppc/macppc/openfirm.c
file	arch/macppc/macppc/openprom.c
file	dev/cninit.c
file	arch/macppc/macppc/ofwreal.S

#
# Media Independent Interface (mii)
#
include "dev/mii/files.mii"

#
# MAC generic
#
file	arch/macppc/dev/dbdma.c
file	arch/macppc/dev/thermal.c

#
# Openfirmware support
#

define	mainbus {}
device	mainbus
attach	mainbus at root
file	arch/macppc/macppc/mainbus.c			mainbus

device	cpu
attach	cpu at mainbus
file	arch/macppc/macppc/cpu.c
file	arch/macppc/macppc/opendev.c

device	memc {}
attach	memc at mainbus
file	arch/macppc/dev/uni_n.c				memc

major	{rd = 17}
major	{wd = 0}
major	{sd = 2}
major	{cd = 3}

include "scsi/files.scsi"

include "dev/pci/files.pci"
file	arch/macppc/pci/pciide_machdep.c		pciide

device	mpcpcibr {} : pcibus
attach	mpcpcibr at mainbus
file	arch/macppc/pci/mpcpcibus.c			mpcpcibr

device  ht {} : pcibus
attach	ht at mainbus
file	arch/macppc/pci/ht.c				ht

file	arch/macppc/pci/pci_machdep.c			mpcpcibr | ht

device	smu: i2cbus
attach	smu at mainbus
file	arch/macppc/dev/smu.c				smu

#
# "workstation console" routines
#

include "dev/wscons/files.wscons"

#
# mac peripheral pieces.
#

#file	arch/macppc/pci/bandit.c			pci

# HT bridge
device  hpb {} : pcibus
attach	hpb at pci
file	arch/macppc/pci/hpb.c				hpb needs-flag

# PCI-Host bridge chipsets
device  pchb: agpbus
attach	pchb at pci
file	arch/macppc/pci/pchb.c				pchb

# AGP bridge support. attach at pchb
file	arch/macppc/pci/agp_machdep.c			agp

#
# Machine-independent ATAPI drivers
#

include "dev/atapiscsi/files.atapiscsi"
include "dev/ata/files.ata"

# MAC periph

device	macobio {}
attach	macobio at pci
file	arch/macppc/pci/macobio.c			macobio


# kauai ATA glue
device	kauaiata {}
attach	kauaiata at pci 
file	arch/macppc/pci/kauaiata.c			kauaiata

#device	esp: scsi, ncr53c9x
#attach	esp at macobio
#file	arch/macppc/dev/esp.c				esp

device	mesh: scsi
attach	mesh at macobio
file	arch/macppc/dev/mesh.c				mesh

device	mc: ifnet, ether
attach	mc at macobio
file	arch/macppc/dev/if_mc.c				mc

device	bm: ether, ifnet, ifmedia, mii, mii_bitbang
attach	bm at macobio
file	arch/macppc/dev/if_bm.c				bm

device	macintr {}
attach	macintr at macobio
file	arch/macppc/dev/macintr.c			macintr

device	openpic {}
attach	openpic at macobio, memc
file	arch/macppc/dev/openpic.c			openpic

device	zs {[channel = -1]}
attach	zs at macobio
file	arch/macppc/dev/zs.c				zs needs-flag
file	dev/ic/z8530sc.c				zs

device	zstty: tty
attach	zstty at zs
file	dev/ic/z8530tty.c				zstty needs-flag

device	adb {}
attach	adb at macobio
file	arch/macppc/dev/adb.c				adb needs-flag
file	arch/macppc/dev/pm_direct.c			adb

include	"dev/adb/files.adb"
file	arch/macppc/dev/akbd_machdep.c			akbd

device	apm
attach	apm at adb
file	arch/macppc/dev/apm.c				apm needs-count

device	abtn
attach	abtn at adb
file	arch/macppc/dev/abtn.c				abtn

device	awacs: audio
attach	awacs at macobio
file	arch/macppc/dev/awacs.c				awacs

# Mediabay
device	mediabay {}
attach	mediabay at macobio
file	arch/macppc/dev/mediabay.c			mediabay

# Keywest I2C
device	kiic: i2cbus
attach	kiic at macobio
attach	kiic at memc	with kiic_memc
file	arch/macppc/dev/kiic.c				kiic

# PMU I2C
device	piic: i2cbus
attach	piic at adb
file	arch/macppc/dev/piic.c				piic

# I2S
define	i2s
file	arch/macppc/dev/i2s.c				i2s

# blinkenlights
device	xlights
attach	xlights at macobio
file	arch/macppc/dev/xlights.c			xlights

# snapper audio
device	snapper: audio, i2s
attach	snapper at macobio
file	arch/macppc/dev/snapper.c			snapper

# tumbler audio
device	tumbler: audio, i2s
attach	tumbler at macobio
file	arch/macppc/dev/tumbler.c			tumbler

# onyx audio
device	onyx: audio, i2s
attach	onyx at macobio
file	arch/macppc/dev/onyx.c				onyx

# aoa audio
device	aoa: audio, i2s
attach	aoa at macobio
file	arch/macppc/dev/aoa.c				aoa

# daca audio
device	daca: audio, i2s
attach	daca at macobio
file	arch/macppc/dev/daca.c				daca

#device	nvram
#attach	nvram at macobio
#file	arch/macppc/dev/nvram.c				nvram needs-flag

device	macgpio {}
attach	macgpio at macobio with macgpio
attach	macgpio at macgpio with macgpio_gpio
file	arch/macppc/dev/macgpio.c			macgpio

device	sysbutton {}
attach	sysbutton at macgpio
file	arch/macppc/dev/sysbutton.c

device	pgs {}
attach	pgs at macgpio
file	arch/macppc/dev/pgs.c

device	dfs {}
attach	dfs at macgpio
file	arch/macppc/dev/dfs.c

attach	wdc at mediabay, macobio, kauaiata with wdc_obio
file	arch/macppc/dev/wdc_obio.c			wdc_obio

attach	wi at macobio with wi_obio
file	arch/macppc/dev/if_wi_obio.c			wi_obio

# Raster operations
include "dev/rasops/files.rasops"
include "dev/wsfont/files.wsfont"

# VGA framebuffer
device	vgafb: wsemuldisplaydev, rasops8, rasops16, rasops32
attach	vgafb at pci
file	arch/macppc/pci/vgafb.c				vgafb needs-flag

#
# CARDBUS
#
include	"dev/cardbus/files.cardbus"
file	arch/macppc/macppc/rbus_machdep.c		cardbus

#
# Machine-independent PCMCIA drivers
#
include "dev/pcmcia/files.pcmcia"

#
# Machine-independent HID support
#
include "dev/hid/files.hid"

#
# Machine-independent USB drivers
#
include "dev/usb/files.usb"

#
# Machine-independent I2C drivers
#
include "dev/i2c/files.i2c"
file	arch/macppc/dev/maci2c.c			i2cbus

device	mem: i2c
attach	mem at mainbus

#
# Machine-independent GPIO drivers
#
include "dev/gpio/files.gpio"

#
# Machine-independent 1-Wire drivers
#
include "dev/onewire/files.onewire"

# Sun HME Ethernet controllers
device	hme: ether, ifnet, mii, ifmedia
file	dev/ic/hme.c

attach	hme at pci with hme_pci
file	dev/pci/if_hme_pci.c				hme_pci

# Apple Sudden Motion Sensor
device	asms
attach	asms at i2c
file	arch/macppc/dev/asms.c			asms
@


1.86
log
@One ddb interface is enough for ppc.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.85 2016/01/08 15:54:13 jcs Exp $
d32 1
@


1.85
log
@Move HID support files out of dev/usb into new dev/hid directory

These files aren't USB-specific and were used by the previous
Bluetooth implementation, and will be used by the upcoming
HID-over-i2C implementation

ok deraadt
previous version ok kettenis and mpi
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.84 2015/11/23 10:30:02 mpi Exp $
a21 1
file	arch/macppc/macppc/db_interface.c		ddb
@


1.84
log
@Attaches zs(4) as "zs" not "zsc".

Incoherency brought by jmc@@ and schwarze@@ because the SYNOPSIS of the
corresponding manual do not match its NAME.

This is one step further in the zs(4) unification... Go dokey go!

Tested by jmatthew@@, ok sebastia@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.83 2015/06/26 11:15:32 dlg Exp $
d269 5
@


1.83
log
@move the ppc mplock implementation from macppc to powerpc.

ok mpi@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.82 2015/06/02 13:53:43 mpi Exp $
d144 4
a147 4
device	zsc {[channel = -1]}
attach	zsc at macobio
file	arch/macppc/dev/zs.c				zsc needs-flag
file	dev/ic/z8530sc.c				zsc
d150 1
a150 1
attach	zstty at zsc
@


1.82
log
@Add a new HT-PCI bridge driver and the necessary glue to openpic(4)
to get interrupts working on U4 machines.

With this OpenBSD can run on PowerMac11,2 (Quad G5).

With inputs from and ok kettenis@@, miod@@, dlg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.81 2015/05/11 06:46:21 ratchov Exp $
a13 1
file	arch/macppc/macppc/lock_machdep.c		multiprocessor
@


1.81
log
@Remove all audio format conversion code from the kernel (btw holding
the kernel_lock), as we already do better conversions in
user-mode. Yet, no need for every single driver to fiddle with the
conversion code as they are done transparently by common MI code. With
help from armani and miod, support from mpi

ok armani@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.80 2015/01/20 17:08:35 mpi Exp $
d89 6
a94 1
#PCI-Host bridge chipsets
@


1.80
log
@Merge two copies of the same dma code into one file and sync the headers.

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.79 2014/10/18 12:21:56 miod Exp $
d165 1
a165 1
device	awacs: audio, auconv, mulaw
d195 1
a195 1
device	snapper: audio, auconv, mulaw, i2s
d200 1
a200 1
device	tumbler: audio, auconv, mulaw, i2s
d205 1
a205 1
device	onyx: audio, auconv, mulaw, i2s
d210 1
a210 1
device	aoa: audio, auconv, mulaw, i2s
d215 1
a215 1
device	daca: audio, auconv, mulaw, i2s
@


1.79
log
@Remove even more unnecessary `needs-flag' attributes from config machinery,
as well as useless include of the generated flag files.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.78 2014/07/11 21:54:37 tedu Exp $
a17 1
file	arch/macppc/macppc/dma.c
@


1.78
log
@"It's not the years, honey; it's the mileage."

bluetooth support doesn't work and isn't going anywhere. the current
design is a dead end, and should not be the basis for any future support.
general consensus says to whack it so as to not mislead the unwary.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.77 2013/11/04 14:07:16 deraadt Exp $
d115 1
a115 1
file	arch/macppc/pci/kauaiata.c			kauaiata needs-flag
@


1.77
log
@remove iop(4) driver.  it is entirely unmaintained and supports something
which basically doesn't exist at all.
reminded about it by brad
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.76 2013/08/28 07:03:02 mpi Exp $
a270 5

#
# Bluetooth
#
include "dev/bluetooth/files.bluetooth"
@


1.76
log
@Fix build, reported by jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.75 2013/08/27 21:00:52 mpi Exp $
a59 5

#
# I2O
#
include "dev/i2o/files.i2o"
@


1.75
log
@Since we are no longer attaching radeondrm(4) to this driver there is
no reason to pretend being compatible with the MI vga layer.  So stop
using the vga_pci_bar interface and reduce the differences with the
sparc64 driver.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.74 2013/08/15 06:54:35 kettenis Exp $
d259 1
a259 1
file	arch/macppc/pci/vgafb.c				vgafb
@


1.74
log
@Include files.agp and files.drm from files.pci.  Makes sure "drm.h" gets
generated on all architectures that support pci, making alpha and loongson
compile again.

ok todd@@, miod@@ seemed to agree with the idea
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.73 2013/08/12 08:38:03 mpi Exp $
d258 2
a259 5
file	arch/macppc/pci/vgafb.c				vgafb & vgafb_pci

# Generic VGA Framebuffer version
attach	vgafb at pci with vgafb_pci
file	arch/macppc/pci/vgafb_pci.c			vgafb_pci needs-flag
@


1.73
log
@radeondrm now attaches directly to pci.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.72 2013/08/12 04:11:52 jsg Exp $
a100 2
include "dev/pci/files.agp"
include "dev/pci/drm/files.drm"
@


1.72
log
@Add a port of the TTM and Radeon DRM code from Linux 3.8.13.
Includes kernel modesetting, framebuffer console and support
for newer hardware.

Firmware needs to be present for acceleration and in some cases
modesetting to work.  It can be installed via fw_update
or manually via pkg_add.

With lots of help from kettenis@@ some macppc bits from mpi@@
and some ttm refcount/queue bits from FreeBSD.

Thanks to M:Tier and the OpenBSD Foundation for sponsoring this work.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.71 2013/08/07 07:29:18 mpi Exp $
d259 1
a259 1
device	vgafb: wsemuldisplaydev, rasops8, rasops16, rasops32, drmdev
@


1.71
log
@Mimic what's done on sparc64 and parse the OpenFirmware device tree to
enumerate the pci devices.  This allow us to not store the interrupt
vector in the interrupt line register and to not try to attach pci
devices disabled by firmware.

With inputs from and ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.70 2013/05/31 19:32:30 mpi Exp $
d102 1
@


1.70
log
@Rename tpms(4), the driver for Apple USB touchpads, to utpms(4) and move
it to dev/usb because it could be used on intel based mac laptops.

Discussed with jcs@@, ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.69 2013/04/21 14:44:16 sebastia Exp $
d76 2
@


1.69
log
@Unify the zs tty driver.

Most of the hard work by mpi@@, who provided the initial diff.
Fixes for sparc from myself. Tested on sgi and sparc myself.
Compiles and detects zstty on my powerbook, compile tested on
sparc64 by me. Real testing with zs device on sparc64 by miod@@
who also gave a lot of help and feedback.

ok miod@@, mpi@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.68 2012/12/04 10:42:04 mpi Exp $
a308 4

device	tpms: hid, wsmousedev
attach	tpms at uhidbus
file	arch/macppc/dev/tpms.c				tpms
@


1.68
log
@Add support for Uninorth AGP bridges found in most if not all the macppc
machines with a G3 or G4 microprocessor. It would not be difficult to add
support for U3 bridges found in G5 powered macppc to this driver but I
don't have such hardware.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.67 2012/09/08 16:35:46 mpi Exp $
d148 1
a148 1
file	arch/macppc/dev/z8530sc.c			zsc
d152 1
a152 1
file	arch/macppc/dev/z8530tty.c			zstty needs-flag
@


1.67
log
@Include files.agp to be able to check against NAGP in the drm agp glue.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.66 2012/08/30 21:54:13 mpi Exp $
d94 1
a94 1
device	pchb
d100 1
@


1.66
log
@Determine the memory and mmio regions based on previously initialzed BAR
structures and add the necessary glue to attach drm(4).

ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.65 2011/11/15 22:27:53 deraadt Exp $
d98 2
@


1.65
log
@Simplify various parts of the puc(4) attachment code.  Tested lightly
by krw and myself.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.64 2011/05/25 07:42:15 mpi Exp $
d253 1
a253 1
device	vgafb: wsemuldisplaydev, rasops8, rasops16, rasops32
@


1.64
log
@Add dfs(4), a driver to support the Dynamic Frequency Switching feature
found on some G4 PowerBook.

Tested by many, thanks.

ok sthen@@, kettenis@@, miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.63 2010/12/06 20:10:18 jasper Exp $
a67 2

include "dev/puc/files.puc"
@


1.63
log
@- use consistent 'include' rules without a full relative path.
tested on a GENERIC config from all arches.

ok deraadt@@ miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.62 2010/04/09 19:24:17 jasper Exp $
d239 4
@


1.62
log
@- add and enable pgs(4), a driver for the Programmers Switch found on
recent-ish macs with macgpio(4). Basically dropping one to DDB when pushed.
...and not to be confused by the "reset" button ;-)

feedback and ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.61 2009/09/07 19:29:29 miod Exp $
d29 1
a29 1
include "../../../dev/mii/files.mii"
d59 1
a59 1
include "../../../scsi/files.scsi"
d64 1
a64 1
include "../../../dev/i2o/files.i2o"
d105 2
a106 2
include "../../../dev/atapiscsi/files.atapiscsi"
include "../../../dev/ata/files.ata"
@


1.61
log
@Sync mplock code with the current paradigm used in all other MP platforms.
macppc was left unchanged by mistake.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.60 2009/05/03 21:30:09 kettenis Exp $
d235 4
@


1.60
log
@Get rid of pci_addr_fixup machinery; set up the appropriate extents and pass
them along when we attach pci(4).  Simplify the rbus code by using extents
too.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.59 2008/03/21 18:44:14 deraadt Exp $
d14 1
@


1.59
log
@crank maxusers on some architectures
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.58 2007/11/12 19:23:26 kettenis Exp $
a72 1
file	arch/macppc/pci/pci_addr_fixup.c		mpcpcibr
@


1.58
log
@/dev/openprom

ok miod@@, deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.57 2007/10/14 17:29:04 kettenis Exp $
d8 1
a8 1
maxusers 2 8 64
@


1.57
log
@Provide a way to attach spdmem(4) by faking an I2C bus with EEPROMs with
contents from OpenFirmware.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.56 2007/06/08 22:57:43 jasper Exp $
d20 1
@


1.56
log
@include files.bluetooth, so that bluetooth support can be compiled,
if enabled.

ok gwk@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.55 2007/06/01 23:14:07 deraadt Exp $
d279 3
@


1.55
log
@remove ofw devices which we don't use; that way of mixing devices is crazy
(means i also don not have to fix the daddr_t problems)
ok miod
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.54 2007/04/23 16:27:20 deraadt Exp $
d268 5
@


1.54
log
@rename drivers with numbers in them; ok gwk drahn
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.53 2007/04/22 20:17:03 gwk Exp $
a45 2

include "../../../dev/ofw/files.ofw"
a46 2
major	{ofdisk = 4}

@


1.53
log
@Add sysbutton a driver for the 'System identifier' button found on the
fornt panel of the xserve (the button with the triangle on it). This driver
will dump you into ddb at the press of a button if the ddb.console sysctl
is set. The bug still has one unresolved issue if ddb.console is not set
and you press and hold the button you will cause a interrupt storm that will
slow the system down. So if you keep your xserve near a toddler or you
yourself are a toddler you might want to consider disabling this device
remember buttons arn't toys.

ok deraadt.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.52 2007/04/22 18:04:24 deraadt Exp $
d182 4
a185 4
device	ki2c: i2cbus
attach	ki2c at macobio
attach	ki2c at memc	with ki2c_memc
file	arch/macppc/dev/ki2c.c				ki2c
d188 3
a190 3
device	pi2c: i2cbus
attach	pi2c at adb
file	arch/macppc/dev/pi2c.c				pi2c
@


1.52
log
@rename a very long driver name to something shorter, and more clear
and while there, fix the interrupt name for vmstat -iz; ok gwk
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.51 2007/04/21 15:43:27 gwk Exp $
d234 4
@


1.51
log
@Add blinkenlights(4) a driver to control the 16 leds found on the front
panel of the Xserve G4 and G5. The leds will provide an indication of the
system load slowing as the load climbs, and system health e.g. no
lights means its dead or in DDB.

Split some of the shared registers and clock divisors from i2s into
i2sreg.h while there nuke some evil C++ style comments.
Man page to follow shortly.

ok deraadt
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.50 2006/12/06 20:38:14 gwk Exp $
d197 3
a199 3
device blinkenlights
attach blinkenlights at macobio
file	arch/macppc/dev/blinkenlights.c			blinkenlights
@


1.50
log
@Enable mesh and mc device drivers in GENERIC, booting on old world macs is
pointless without these two.
ok martin@@, deraadt@@ durring h2k6
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.49 2006/09/27 06:33:03 grange Exp $
d195 5
@


1.49
log
@Add files.onewire to all our USB archs, it will be used soon.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.48 2006/06/19 15:13:35 deraadt Exp $
d131 3
a133 4
#device	mc: ifnet, ether
#attach	mc at macobio
#file	arch/macppc/dev/if_mc.c				mc
#file	arch/macppc/dev/am79c950.c			mc
@


1.48
log
@move clock_subr.c to a better place, and now it is always in the kernel
so that things can use it; tested on all architectures; ok kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.47 2006/04/23 12:03:47 kettenis Exp $
d275 5
@


1.47
log
@Add puc(4) and com at puc.
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.46 2006/01/18 23:21:17 miod Exp $
a84 1
file	dev/clock_subr.c				smu
@


1.46
log
@Factorize akbd and ams drivers between mac68k and macppc; while there, start
moving out common adb code as well, and merge adb_direct.c into adb.c to
simplify external header files.

No functional change; more cleanups to come.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.45 2006/01/03 17:23:19 xsa Exp $
d70 2
@


1.45
log
@work in progress on the Apple Sudden Motion Sensor found in recent
PowerBooks and iBooks, driver is commented out for now;
with prodding, help and ok from kettenis@@, ok deraadt@@.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.44 2006/01/01 20:52:23 deraadt Exp $
a158 1
file	arch/macppc/dev/adb_direct.c			adb
d161 3
a166 8

device	akbd: wskbddev
attach	akbd at adb
file	arch/macppc/dev/akbd.c				akbd needs-flag

device	ams: wsmousedev
attach	ams at adb
file	arch/macppc/dev/ams.c				ams
@


1.44
log
@switch from macppc-specific maciic(4) driver to the generic iic(4),
after teaching it to use a function pointer to get back to the OFW
scan.. this will also help the sparc64 later; ok kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.43 2005/12/21 18:50:51 miod Exp $
d291 5
@


1.43
log
@Remove aed(4) on macppc, nothing uses its functionality since key repeat is
handled by wscons and mouse emulation was never enabled or documented.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.42 2005/12/20 01:36:10 brad Exp $
d80 1
a80 1
device	smu {} : i2cbus
d188 1
a188 1
device	ki2c {}
d194 1
a194 1
device	pi2c {}
d274 1
a274 4

device	maciic {} : i2c
attach	maciic at ki2c, pi2c, smu
file	arch/macppc/dev/maci2c.c			maciic
@


1.42
log
@Add a Apple touchpad driver for newer PowerBook's and iBook's.

From Johan Wallén on NetBSD's macppc list.

ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.41 2005/11/19 00:43:41 kettenis Exp $
a164 4

device	aed
attach	aed at adb
file	arch/macppc/dev/aed.c				aed needs-flag
@


1.41
log
@Apple "onyx" audio device driver.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.40 2005/11/17 15:03:52 drahn Exp $
d294 4
@


1.40
log
@add attachment for openpic behind memc, for newer G5 systems.
only attaches a parent openpic, not a slave openpic. ok kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.39 2005/11/16 12:28:54 kettenis Exp $
d215 5
@


1.39
log
@Add support for the I2C controller on via-pmu.
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.38 2005/11/16 03:43:40 deraadt Exp $
d144 1
a144 1
attach	openpic at macobio
@


1.38
log
@macppc can have gpio
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.37 2005/11/15 16:19:15 deraadt Exp $
d197 5
d275 1
a275 1
attach	maciic at ki2c, smu
@


1.37
log
@move lm87 to dev/i2c; ok kettenis
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.36 2005/11/14 21:54:38 kettenis Exp $
d272 5
@


1.36
log
@Add lmenv(4), an System Hardware Minitor device that attaches to the I2C bus.
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.35 2005/11/13 19:43:56 kettenis Exp $
a271 4

device	lmenv
attach	lmenv at maciic
file	arch/macppc/dev/lm87.c				lmenv
@


1.35
log
@maciic at ki2c
ok deraadt@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.34 2005/11/12 18:38:22 kettenis Exp $
d272 4
@


1.34
log
@Add i2cbus to smu and i2c to maciic.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.33 2005/11/11 16:22:50 kettenis Exp $
d270 1
a270 1
attach	maciic at smu
@


1.33
log
@Add maciic(4), an OpenFirware aware version of iic(4).
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.32 2005/11/06 03:10:09 drahn Exp $
d80 1
a80 1
device	smu {}
d269 1
a269 1
device	maciic {}
@


1.32
log
@Add attachment of ki2c at memc as well as macobio, wil be used on G5.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.31 2005/10/31 00:24:57 brad Exp $
d80 1
a80 1
device	smu
d263 9
@


1.31
log
@work in progress on a tumbler driver, driver is commented out for now.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.30 2005/10/31 00:04:53 joris Exp $
d194 1
@


1.30
log
@add aoa audio support, found in several macppc machines
ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.29 2005/10/30 23:55:02 joris Exp $
d204 5
@


1.29
log
@add daca audio support, found in some macppc machines;
ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.28 2005/10/26 17:57:20 joris Exp $
d204 5
@


1.28
log
@add an i2s framework, which can be reused in new audio drivers
for macppc, as most modern Apple machines have i2s-based audio.

also let snapper use i2s.c right away;

tested by Antoine Jacoutot, drahn@@ and kettenis@@
"yes, commit!" drahn@@, ok kettenis@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.27 2005/10/19 14:46:00 kettenis Exp $
d204 5
@


1.27
log
@Add smu(4).
ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.26 2005/09/29 20:52:26 kettenis Exp $
d196 4
d201 1
a201 1
device	snapper: audio, auconv, mulaw
@


1.26
log
@Add driver for HyperTransport as found in G5 Macs.
ok drahn@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.25 2005/05/04 02:24:17 drahn Exp $
d79 5
@


1.25
log
@move gpio(_obio) stuff to macgpio, currently it collides with the MI gpio
ok miod@@ grange@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.24 2005/03/08 20:00:23 tdeval Exp $
d75 4
@


1.24
log
@Cosmetics...
Mainly remove space between locators parens, replace spaces with tabs
where appropriate and consistently align dependencies.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.23 2005/03/05 23:58:43 tdeval Exp $
d196 4
a199 4
device	gpio {}
attach	gpio at macobio with gpio_obio
attach	gpio at gpio with gpio_gpio
file	arch/macppc/dev/gpio.c				gpio
@


1.23
log
@Clean up the tree from incomplete, unreliable and unsupported IEEE1394 code.
Ok deraadt@@, miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.22 2004/10/08 13:04:36 grange Exp $
d49 1
a49 1
major	{ ofdisk = 4 }
d178 2
a179 2
device mediabay {}
attach mediabay at macobio
d183 2
a184 2
device ki2c {}
attach ki2c at macobio
d190 1
a190 1
file	 arch/macppc/dev/snapper.c			snapper
d240 1
a240 1
file	dev/pci/if_hme_pci.c		hme_pci
@


1.22
log
@Move dev/cons.c to MI conf/files.

ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.21 2004/09/16 09:14:03 mickey Exp $
a233 5

#
# Machine-independent IEEE1394 drivers
#
include "dev/ieee1394/files.ieee1394"
@


1.21
log
@cleanup deafult locators (blah ?); please check that your most hated architecture is still fluffy (;
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.20 2004/07/20 14:51:07 miod Exp $
a19 1
file	dev/cons.c
@


1.20
log
@Allow a kernel to specify wd* as root or swap device;
spotted by Waldemar Brodkorb.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.19 2004/05/10 21:29:53 drahn Exp $
d139 1
a139 1
device	zsc {channel = -1}
@


1.19
log
@mediabay driver to configure ata bus attached to CD on pismo Powerbook
tested by Glen Barney and Okan Demirmen.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.18 2004/01/11 16:33:01 drahn Exp $
d58 1
@


1.18
log
@plug snapper audio into build. ok dhartmei@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.17 2003/06/05 05:17:04 drahn Exp $
d177 5
d201 1
a201 1
attach	wdc at macobio, kauaiata with wdc_obio
@


1.17
log
@ATA100 driver for apple's new machines, aka kauai.
This is working with udma on a 12" PBG4, but dma is disabled for now,
too many hardcoded values. 'wdc...flags 0x1' will enable it.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.16 2002/09/14 11:02:09 deraadt Exp $
d176 10
@


1.16
log
@spaces
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.15 2002/09/06 19:30:12 drahn Exp $
d107 6
d186 1
a186 1
attach	wdc at macobio with wdc_obio
a202 1

@


1.15
log
@Remove the gm driver, the MI gem works better at this point.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.14 2002/09/06 13:56:51 drahn Exp $
d221 2
a222 2
device  hme: ether, ifnet, mii, ifmedia
file    dev/ic/hme.c                   
@


1.14
log
@Serial console support for macppc. Serial console will work if the modem
has been replaced with a serial port adapter on any machine that has
a real serial port internally. This will also power on the internal modem
for keylargo based machines (tested on original PBG4) when the serial port
is open. ok miod@@
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.13 2002/07/23 17:53:24 drahn Exp $
a122 4

device	gm: ether, ifnet, ifmedia, mii
attach	gm at pci
file	arch/macppc/dev/if_gm.c				gm needs-flag
@


1.13
log
@Cardbus/pcmcia support for macppc. parts borrowed from NetBSD, and other
portions of the tree.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.12 2002/06/25 17:11:49 itojun Exp $
d139 1
a139 1
file	dev/ic/z8530sc.c				zsc
d143 1
a143 1
file	dev/ic/z8530tty.c				zstty needs-flag
@


1.12
log
@IEEE1394 infrastructure part.
IP-over-FW and SCSI over FW are being worked on.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.11 2002/06/23 23:20:19 itojun Exp $
d74 1
a74 1
#file	arch/macppc/pci/pci_addr_fixup.c		mpcpcibr
d207 1
a207 1
#file	arch/macppc/macppc/rbus_machdep.c		cardbus
@


1.11
log
@committed by mistake
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.9 2002/06/08 16:02:10 miod Exp $
d218 5
@


1.10
log
@make CAPS_IS_CONTROL a default.  pvalchev ok
(translates weird ADB capslock keycode to more normal behavior)
@
text
@a218 5
#
# Machine-independent IEEE1394 drivers
#
include "dev/ieee1394/files.ieee1394"

@


1.9
log
@One ddb to rule them all.

Move the ddb files form macppc/macppc to powerpc/ddb, so that mvmeppc
can benefit from the better ddb that was in macppc.
db_interface.c is left as an md part.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.8 2002/04/29 01:34:58 drahn Exp $
d218 5
@


1.8
log
@Change macppc vgafb from rcons to rasops, a faster color supporting virtual
terminal emulator for gfx console. tested by mattheiu, miod.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.7 2002/04/29 00:21:26 drahn Exp $
d22 1
a22 2
file	arch/macppc/macppc/db_memrw.c			ddb
file	arch/macppc/macppc/db_disasm.c			ddb
a23 2
file	arch/macppc/macppc/db_trace.c			ddb
file	arch/macppc/macppc/ofwreal.S
@


1.7
log
@cleanup, remove devices which macppc is likely to never have, comment
drivers not currently present in source space.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.7 2002/04/29 00:13:55 drahn Exp $
d193 4
d198 1
a198 1
device	vgafb: wsemuldisplaydev, wsrasteremulops
@


1.6
log
@typo repair; openbsd@@davidkrause.com
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.5 2001/12/14 14:27:15 drahn Exp $
d23 1
a23 1
file	arch/macppc/macppc/db_disasm.c		ddb
d58 1
a58 1
file	arch/macppc/dev/uni_n.c			memc
d72 1
a72 1
file	arch/macppc/pci/pciide_machdep.c	pciide
a84 7

#device	ofb: wsemuldisplaydev, wsrasteremulops
device	ofb
attach	ofb at pci
file	arch/macppc/dev/ofb.c				ofb needs-flag


d118 4
a121 4
device	mc: ifnet, ether
attach	mc at macobio
file	arch/macppc/dev/if_mc.c			mc
file	arch/macppc/dev/am79c950.c			mc
d125 1
a125 1
file	arch/macppc/dev/if_bm.c			bm
d129 1
a129 1
file	arch/macppc/dev/if_gm.c			gm needs-flag
a161 5
#??
#define wskbddev {[console = -1]}
#define wsmousedev {}
#??

d176 1
a176 1
file	arch/macppc/dev/awacs.c			awacs
d178 3
a180 3
device	nvram
attach	nvram at macobio
file	arch/macppc/dev/nvram.c			nvram needs-flag
a192 16
define	grfdev {}

device	grfati: grfdev
attach	grfati at pci
file	arch/macppc/dev/grf_ati.c			grfati needs-flag

device	grf {}
attach	grf at grfdev
file	arch/macppc/dev/grf.c				grf needs-flag
file	arch/macppc/dev/grf_subr.c			grf

device	ite: tty
attach	ite at grf
file	arch/macppc/dev/ite.c				ite needs-flag


d195 1
a195 1
file	arch/macppc/pci/vgafb.c			vgafb & vgafb_pci
@


1.5
log
@hme can build on macppc, and and would work if the pci-pci bridge would
route the interrupts correctly.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.4 2001/10/03 14:45:37 drahn Exp $
d29 1
a29 1
# Media Indepedent Interface (mii)
@


1.5.2.1
log
@Sync UBC branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.5 2001/12/14 14:27:15 drahn Exp $
d22 4
a26 1
file	arch/macppc/macppc/db_interface.c		ddb
d29 1
a29 1
# Media Independent Interface (mii)
d58 1
a58 1
file	arch/macppc/dev/uni_n.c				memc
d72 1
a72 1
file	arch/macppc/pci/pciide_machdep.c		pciide
d85 7
d125 4
a128 4
#device	mc: ifnet, ether
#attach	mc at macobio
#file	arch/macppc/dev/if_mc.c				mc
#file	arch/macppc/dev/am79c950.c			mc
d132 1
a132 1
file	arch/macppc/dev/if_bm.c				bm
d136 1
a136 1
file	arch/macppc/dev/if_gm.c				gm needs-flag
d169 5
d188 1
a188 1
file	arch/macppc/dev/awacs.c				awacs
d190 3
a192 3
#device	nvram
#attach	nvram at macobio
#file	arch/macppc/dev/nvram.c				nvram needs-flag
d205 15
a219 3
# Raster operations
include "dev/rasops/files.rasops"
include "dev/wsfont/files.wsfont"
d222 2
a223 2
device	vgafb: wsemuldisplaydev, rasops8, rasops16, rasops32
file	arch/macppc/pci/vgafb.c				vgafb & vgafb_pci
@


1.5.2.2
log
@sync to -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.5.2.1 2002/06/11 03:36:33 art Exp $
d74 1
a74 1
file	arch/macppc/pci/pci_addr_fixup.c		mpcpcibr
d124 4
d139 1
a139 1
file	arch/macppc/dev/z8530sc.c			zsc
d143 1
a143 1
file	arch/macppc/dev/z8530tty.c			zstty needs-flag
d207 1
a207 1
file	arch/macppc/macppc/rbus_machdep.c		cardbus
a218 5
#
# Machine-independent IEEE1394 drivers
#
include "dev/ieee1394/files.ieee1394"

d220 2
a221 2
device	hme: ether, ifnet, mii, ifmedia
file	dev/ic/hme.c
@


1.4
log
@apm support for macppc. This is not fully implemented, sleep modes
and power event are not handled, however it is enough support
to poll the battery/AC/charging states of the system.
Code by Alexander Guy.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.3 2001/09/16 03:19:30 drahn Exp $
d245 7
@


1.4.4.1
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
#	$OpenBSD$
@


1.4.4.2
log
@Merge in trunk
@
text
@a244 7

# Sun HME Ethernet controllers
device  hme: ether, ifnet, mii, ifmedia
file    dev/ic/hme.c                   

attach	hme at pci with hme_pci
file	dev/pci/if_hme_pci.c		hme_pci
@


1.4.4.3
log
@Sync the SMP branch with 3.3
@
text
@d22 4
a26 1
file	arch/macppc/macppc/db_interface.c		ddb
d29 1
a29 1
# Media Independent Interface (mii)
d58 1
a58 1
file	arch/macppc/dev/uni_n.c				memc
d72 1
a72 1
file	arch/macppc/pci/pciide_machdep.c		pciide
d77 1
a77 1
file	arch/macppc/pci/pci_addr_fixup.c		mpcpcibr
d85 7
d125 4
a128 4
#device	mc: ifnet, ether
#attach	mc at macobio
#file	arch/macppc/dev/if_mc.c				mc
#file	arch/macppc/dev/am79c950.c			mc
d132 5
a136 1
file	arch/macppc/dev/if_bm.c				bm
d149 1
a149 1
file	arch/macppc/dev/z8530sc.c			zsc
d153 1
a153 1
file	arch/macppc/dev/z8530tty.c			zstty needs-flag
d169 5
d188 1
a188 1
file	arch/macppc/dev/awacs.c				awacs
d190 3
a192 3
#device	nvram
#attach	nvram at macobio
#file	arch/macppc/dev/nvram.c				nvram needs-flag
d205 15
a219 3
# Raster operations
include "dev/rasops/files.rasops"
include "dev/wsfont/files.wsfont"
d222 2
a223 2
device	vgafb: wsemuldisplaydev, rasops8, rasops16, rasops32
file	arch/macppc/pci/vgafb.c				vgafb & vgafb_pci
d234 1
a234 1
file	arch/macppc/macppc/rbus_machdep.c		cardbus
a245 5
#
# Machine-independent IEEE1394 drivers
#
include "dev/ieee1394/files.ieee1394"

d247 2
a248 2
device	hme: ether, ifnet, mii, ifmedia
file	dev/ic/hme.c
@


1.4.4.4
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.4.4.3 2003/03/27 23:29:46 niklas Exp $
a106 6

# kauai ATA glue
device	kauaiata {}
attach	kauaiata at pci 
file	arch/macppc/pci/kauaiata.c			kauaiata needs-flag

d180 1
a180 1
attach	wdc at macobio, kauaiata with wdc_obio
d197 1
@


1.4.4.5
log
@Merge of current from two weeks agointo the SMP branch
@
text
@d1 1
a1 1
#	$OpenBSD$
a175 10

# Keywest I2C
device ki2c {}
attach ki2c at macobio
file	arch/macppc/dev/ki2c.c				ki2c

# snapper audio
device	snapper: audio, auconv, mulaw
attach	snapper at macobio
file	 arch/macppc/dev/snapper.c			snapper
@


1.4.4.6
log
@Merge with the trunk
@
text
@a176 5
# Mediabay
device mediabay {}
attach mediabay at macobio
file	arch/macppc/dev/mediabay.c			mediabay

d196 1
a196 1
attach	wdc at mediabay, macobio, kauaiata with wdc_obio
@


1.3
log
@Update the bmac (if_bm) to a newer version from NetBSD.
Now uses mii/mii_bitbang.
Driver still has performance issues, It does not transfer
as fast data as it should. No worse than before.
Need to investigate a dhclient reported error:
'ip length 331 disagrees with bytes recieved 336'. only on if_bm.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.2 2001/09/01 17:38:52 drahn Exp $
d160 4
@


1.2
log
@correct typo in file conversion.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.1 2001/09/01 15:59:31 drahn Exp $
d130 1
a130 1
device	bm: ether, ifnet, ifmedia
@


1.1
log
@The "powerpc" port which has supported the newer Apple Macintosh powerpc based
is being renamed to macppc. This is to allow sharing of common code
between different powerpc base platforms.

Most of the work involved in the renaming process was performed by miod@@

Files moved from powerpc/conf to macppc/conf

files.powerpc was modified to keep powerpc common files.
@
text
@d1 1
a1 1
#	$OpenBSD: files.macppc,v 1.33 2001/07/04 08:38:48 niklas Exp $
d36 1
a36 1
file	arch/macppc/mac/dbdma.c
d58 1
a58 1
file	arch/macppc/mac/uni_n.c			memc
d89 1
a89 1
file	arch/macppc/mac/ofb.c				ofb needs-flag
@

