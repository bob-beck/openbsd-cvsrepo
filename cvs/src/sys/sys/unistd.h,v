head	1.31;
access;
symbols
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.31.0.6
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.31.0.2
	OPENBSD_5_9_BASE:1.31
	OPENBSD_5_8:1.31.0.4
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.30.0.2
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.29.0.6
	OPENBSD_5_6_BASE:1.29
	OPENBSD_5_5:1.29.0.4
	OPENBSD_5_5_BASE:1.29
	OPENBSD_5_4:1.28.0.2
	OPENBSD_5_4_BASE:1.28
	OPENBSD_5_3:1.24.0.4
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.24.0.2
	OPENBSD_5_2_BASE:1.24
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.2
	OPENBSD_5_0:1.18.0.4
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.18.0.2
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.17.0.4
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.17.0.2
	OPENBSD_4_7_BASE:1.17
	OPENBSD_4_6:1.16.0.6
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.16.0.2
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.15.0.2
	OPENBSD_4_4_BASE:1.15
	OPENBSD_4_3:1.13.0.10
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.13.0.8
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.13.0.6
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.13.0.4
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.13.0.2
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.12.0.6
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.4
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.12.0.2
	OPENBSD_3_6_BASE:1.12
	SMP_SYNC_A:1.12
	SMP_SYNC_B:1.12
	OPENBSD_3_5:1.11.0.4
	OPENBSD_3_5_BASE:1.11
	OPENBSD_3_4:1.11.0.2
	OPENBSD_3_4_BASE:1.11
	UBC_SYNC_A:1.10
	OPENBSD_3_3:1.10.0.4
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.10.0.2
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.9.0.6
	OPENBSD_3_1_BASE:1.9
	UBC_SYNC_B:1.10
	UBC:1.9.0.4
	UBC_BASE:1.9
	OPENBSD_3_0:1.9.0.2
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9_BASE:1.8
	OPENBSD_2_9:1.8.0.12
	OPENBSD_2_8:1.8.0.10
	OPENBSD_2_8_BASE:1.8
	OPENBSD_2_7:1.8.0.8
	OPENBSD_2_7_BASE:1.8
	SMP:1.8.0.6
	SMP_BASE:1.8
	kame_19991208:1.8
	OPENBSD_2_6:1.8.0.4
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.7.0.2
	OPENBSD_2_4_BASE:1.7
	OPENBSD_2_3:1.5.0.6
	OPENBSD_2_3_BASE:1.5
	OPENBSD_2_2:1.5.0.4
	OPENBSD_2_2_BASE:1.5
	OPENBSD_2_1:1.5.0.2
	OPENBSD_2_1_BASE:1.5
	OPENBSD_2_0:1.3.0.2
	OPENBSD_2_0_BASE:1.3
	netbsd_1_1:1.1.1.1;
locks; strict;
comment	@ * @;


1.31
date	2015.07.20.00.56.10;	author guenther;	state Exp;
branches;
next	1.30;
commitid	pi31sn0pO464Xi5e;

1.30
date	2014.12.13.20.42.41;	author tedu;	state Exp;
branches;
next	1.29;
commitid	wYYmoAHM5gCgkrDj;

1.29
date	2013.08.14.05.26.14;	author guenther;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.28.03.29.44;	author guenther;	state Exp;
branches;
next	1.27;

1.27
date	2013.03.28.02.08.39;	author guenther;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.14.21.38.22;	author tedu;	state Exp;
branches;
next	1.25;

1.25
date	2013.03.02.07.05.18;	author guenther;	state Exp;
branches;
next	1.24;

1.24
date	2012.06.21.00.56.59;	author guenther;	state Exp;
branches;
next	1.23;

1.23
date	2012.06.19.00.09.55;	author matthew;	state Exp;
branches;
next	1.22;

1.22
date	2012.05.30.19.34.30;	author matthew;	state Exp;
branches;
next	1.21;

1.21
date	2012.05.14.23.21.35;	author matthew;	state Exp;
branches;
next	1.20;

1.20
date	2012.03.06.11.38.26;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.10.15.23.35.29;	author guenther;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.28.02.05.59;	author deraadt;	state Exp;
branches;
next	1.17;

1.17
date	2010.01.15.10.17.48;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2008.08.22.14.39.21;	author deraadt;	state Exp;
branches;
next	1.15;

1.15
date	2008.06.25.14.54.44;	author millert;	state Exp;
branches;
next	1.14;

1.14
date	2008.03.16.19.56.27;	author kettenis;	state Exp;
branches;
next	1.13;

1.13
date	2005.12.13.00.35.24;	author millert;	state Exp;
branches;
next	1.12;

1.12
date	2004.05.07.18.39.19;	author millert;	state Exp;
branches;
next	1.11;

1.11
date	2003.06.02.23.28.22;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2002.06.14.21.35.00;	author todd;	state Exp;
branches;
next	1.9;

1.9
date	2001.09.29.20.27.49;	author naddy;	state Exp;
branches
	1.9.4.1;
next	1.8;

1.8
date	98.11.20.11.19.01;	author d;	state Exp;
branches
	1.8.6.1;
next	1.7;

1.7
date	98.07.13.00.56.54;	author millert;	state Exp;
branches;
next	1.6;

1.6
date	98.06.02.06.10.31;	author deraadt;	state Exp;
branches;
next	1.5;

1.5
date	96.10.26.06.54.43;	author tholo;	state Exp;
branches;
next	1.4;

1.4
date	96.10.26.03.13.52;	author tholo;	state Exp;
branches;
next	1.3;

1.3
date	96.08.01.05.26.03;	author tholo;	state Exp;
branches;
next	1.2;

1.2
date	96.03.03.12.12.40;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	95.10.18.08.53.31;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	95.10.18.08.53.31;	author deraadt;	state Exp;
branches;
next	;

1.8.6.1
date	2001.10.31.03.30.30;	author nate;	state Exp;
branches;
next	1.8.6.2;

1.8.6.2
date	2003.03.28.00.41.30;	author niklas;	state Exp;
branches;
next	1.8.6.3;

1.8.6.3
date	2003.06.07.11.09.08;	author ho;	state Exp;
branches;
next	1.8.6.4;

1.8.6.4
date	2004.06.05.23.13.10;	author niklas;	state Exp;
branches;
next	;

1.9.4.1
date	2002.10.29.00.36.49;	author art;	state Exp;
branches;
next	;


desc
@@


1.31
log
@Add kbind, a syscall for ld.so to use to securely and efficiently update
memory for lazy binding

ok deraadt@@
@
text
@/*	$OpenBSD: unistd.h,v 1.30 2014/12/13 20:42:41 tedu Exp $	*/
/*	$NetBSD: unistd.h,v 1.10 1994/06/29 06:46:06 cgd Exp $	*/

/*
 * Copyright (c) 1989, 1993
 *	The Regents of the University of California.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the University nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 *	@@(#)unistd.h	8.2 (Berkeley) 1/7/94
 */

#ifndef _SYS_UNISTD_H_
#define	_SYS_UNISTD_H_

#include <sys/cdefs.h>

#define	_POSIX_VDISABLE		(0377)
#define	_POSIX_ASYNC_IO		(-1)
#define	_POSIX_PRIO_IO		(-1)
#define	_POSIX_SYNC_IO		(-1)

/* Define the POSIX.1 version we target for compliance. */
#define	_POSIX_VERSION		200809L

/* access function */
#define	F_OK		0	/* test for existence of file */
#define	X_OK		0x01	/* test for execute or search permission */
#define	W_OK		0x02	/* test for write permission */
#define	R_OK		0x04	/* test for read permission */

/* whence values for lseek(2) */
#define	SEEK_SET	0	/* set file offset to offset */
#define	SEEK_CUR	1	/* set file offset to current plus offset */
#define	SEEK_END	2	/* set file offset to EOF plus offset */

#if __BSD_VISIBLE
/* old BSD whence values for lseek(2); renamed by POSIX 1003.1 */
#define	L_SET		SEEK_SET
#define	L_INCR		SEEK_CUR
#define	L_XTND		SEEK_END

/* the parameters argument passed to the __tfork() syscall */
struct __tfork {
	void	*tf_tcb;
	pid_t	*tf_tid;
	void	*tf_stack;
};

/* the parameters argument for the kbind() syscall */
struct __kbind {
	void	*kb_addr;
	size_t	kb_size;
};
#define	KBIND_BLOCK_MAX	2	/* powerpc, sparc, and sparc64 need 2 blocks */
#define	KBIND_DATA_MAX	24	/* sparc64 needs 6, four-byte words */
#endif

/* the pathconf(2) variable values are part of the ABI */

/* configurable pathname variables */
#define	_PC_LINK_MAX			 1
#define	_PC_MAX_CANON			 2
#define	_PC_MAX_INPUT			 3
#define	_PC_NAME_MAX			 4
#define	_PC_PATH_MAX			 5
#define	_PC_PIPE_BUF			 6
#define	_PC_CHOWN_RESTRICTED		 7
#define	_PC_NO_TRUNC			 8
#define	_PC_VDISABLE			 9
#define	_PC_2_SYMLINKS			10
#define	_PC_ALLOC_SIZE_MIN		11
#define	_PC_ASYNC_IO			12
#define	_PC_FILESIZEBITS		13
#define	_PC_PRIO_IO			14
#define	_PC_REC_INCR_XFER_SIZE		15
#define	_PC_REC_MAX_XFER_SIZE		16
#define	_PC_REC_MIN_XFER_SIZE		17
#define	_PC_REC_XFER_ALIGN		18
#define	_PC_SYMLINK_MAX			19
#define	_PC_SYNC_IO			20
#define	_PC_TIMESTAMP_RESOLUTION	21

#endif /* !_SYS_UNISTD_H_ */
@


1.30
log
@claim posix 2008 compat. apparently people look at this and get scared
when it's really old. but no actual ports fallout in espie's build.
ok deraadt
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.29 2013/08/14 05:26:14 guenther Exp $	*/
d71 8
@


1.29
log
@The last user of the old __tfork() was updated to the current one,
so COMPAT_O51 can go.  The complete ABI role means COMPAT_O53 can
be removed as well.

ok jsing@@ tedu@@
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.28 2013/03/28 03:29:44 guenther Exp $	*/
d46 1
a46 1
#define	_POSIX_VERSION		199009L
@


1.28
log
@Add support for _PC_TIMESTAMP_RESOLUTION for ffs/mfs, cd9600, ext2,
msdos, NFS, fifos and devices, plus support for querying it in
getconf(2) and the requisite pathconf(2) manpage blurb

ok tedu@@
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.27 2013/03/28 02:08:39 guenther Exp $	*/
a69 7
};

/* COMPAT_O51 */
struct __tfork51 {
	void	*tf_tcb;
	pid_t	*tf_tid;
	int	tf_flags;
@


1.27
log
@Handle the pathconf _PC_PATH_MAX, _PC_PIPE_BUF, _PC_ASYNC_IO,
_PC_PRIO_IO, and _PC_SYNC_IO names in VOP_PATHCONF(), as they're
fs-independent for us.  Since we don't support latter three on any
fs, we can also define the related _POSIX_{ASYNC,PRIO,SYNC}_IO
symbols in <unistd.h> (via sys/unistd.h) with value -1.

Also, zap pointless tty-only values from procfs(!).

ok beck@@, deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.26 2013/03/14 21:38:22 tedu Exp $	*/
d83 21
a103 20
#define	_PC_LINK_MAX		 1
#define	_PC_MAX_CANON		 2
#define	_PC_MAX_INPUT		 3
#define	_PC_NAME_MAX		 4
#define	_PC_PATH_MAX		 5
#define	_PC_PIPE_BUF		 6
#define	_PC_CHOWN_RESTRICTED	 7
#define	_PC_NO_TRUNC		 8
#define	_PC_VDISABLE		 9
#define	_PC_2_SYMLINKS		10
#define	_PC_ALLOC_SIZE_MIN	11
#define	_PC_ASYNC_IO		12
#define	_PC_FILESIZEBITS	13
#define	_PC_PRIO_IO		14
#define	_PC_REC_INCR_XFER_SIZE	15
#define	_PC_REC_MAX_XFER_SIZE	16
#define	_PC_REC_MIN_XFER_SIZE	17
#define	_PC_REC_XFER_ALIGN	18
#define	_PC_SYMLINK_MAX		19
#define	_PC_SYNC_IO		20
@


1.26
log
@the 5.1 era tfork syscall claws its way out of the grave. we failed to
fully deprecate it (notably the go port was still using it as of 5.3)
so to give users a little more time to update, __tfork51 lives again.
okish deraadt guenther
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.24 2012/06/21 00:56:59 guenther Exp $	*/
d41 3
@


1.25
log
@No longer need the 5.1 version of the __tfork syscall

ok deraadt@@
@
text
@d68 7
@


1.24
log
@__tfork() needs to set the stack address of the new thread in the kernel,
so that it can't get a signal while still running on the parent thread's
stack.  Also, pass in sizeof(struct __tfork) to provide forward compat
when more members are added.  This is an ABI change, so switch syscall
numbers and bump lib majors this time.

ok deraadt@@ matthew@@
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.23 2012/06/19 00:09:55 matthew Exp $	*/
a66 7
};

/* COMPAT_O51 */
struct __tfork51 {
	void	*tf_tcb;
	pid_t	*tf_tid;
	int	tf_flags;
@


1.23
log
@Add more pathconf(2) variables from POSIX.

From FreeBSD via Brad; ok millert
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.22 2012/05/30 19:34:30 matthew Exp $	*/
d64 7
@


1.22
log
@Move the _SC_* and _CS_* configurable system variables and strings
from sys/unistd.h to unistd.h.

From Brad; ok millert and me
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.21 2012/05/14 23:21:35 matthew Exp $	*/
d82 11
@


1.21
log
@More sysconf(3)-y and pathconf(3)-y goodness from Brad.
ok guenther, millert (and me); bulk build test by naddy
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.20 2012/03/06 11:38:26 ajacoutot Exp $	*/
d70 1
a70 1
/* the pathconf(2) and sysconf(3) variable values are part of the ABI */
a81 136

/* configurable system variables */
#define	_SC_ARG_MAX		 1
#define	_SC_CHILD_MAX		 2
#define	_SC_CLK_TCK		 3
#define	_SC_NGROUPS_MAX		 4
#define	_SC_OPEN_MAX		 5
#define	_SC_JOB_CONTROL		 6
#define	_SC_SAVED_IDS		 7
#define	_SC_VERSION		 8
#define	_SC_BC_BASE_MAX		 9
#define	_SC_BC_DIM_MAX		10
#define	_SC_BC_SCALE_MAX	11
#define	_SC_BC_STRING_MAX	12
#define	_SC_COLL_WEIGHTS_MAX	13
#define	_SC_EXPR_NEST_MAX	14
#define	_SC_LINE_MAX		15
#define	_SC_RE_DUP_MAX		16
#define	_SC_2_VERSION		17
#define	_SC_2_C_BIND		18
#define	_SC_2_C_DEV		19
#define	_SC_2_CHAR_TERM		20
#define	_SC_2_FORT_DEV		21
#define	_SC_2_FORT_RUN		22
#define	_SC_2_LOCALEDEF		23
#define	_SC_2_SW_DEV		24
#define	_SC_2_UPE		25
#define	_SC_STREAM_MAX		26
#define	_SC_TZNAME_MAX		27
#define	_SC_PAGESIZE		28
#define	_SC_PAGE_SIZE		_SC_PAGESIZE	/* 1170 compatibility */
#define	_SC_FSYNC		29
#define	_SC_XOPEN_SHM		30
#define	_SC_SEM_NSEMS_MAX	31
#define	_SC_SEM_VALUE_MAX	32
#define	_SC_HOST_NAME_MAX	33
#define	_SC_MONOTONIC_CLOCK	34
#define	_SC_2_PBS		35
#define	_SC_2_PBS_ACCOUNTING	36
#define	_SC_2_PBS_CHECKPOINT	37
#define	_SC_2_PBS_LOCATE	38
#define	_SC_2_PBS_MESSAGE	39
#define	_SC_2_PBS_TRACK		40
#define	_SC_ADVISORY_INFO	41
#define	_SC_AIO_LISTIO_MAX	42
#define	_SC_AIO_MAX		43
#define	_SC_AIO_PRIO_DELTA_MAX	44
#define	_SC_ASYNCHRONOUS_IO	45
#define	_SC_ATEXIT_MAX		46
#define	_SC_BARRIERS		47
#define	_SC_CLOCK_SELECTION	48
#define	_SC_CPUTIME		49
#define	_SC_DELAYTIMER_MAX	50
#define	_SC_IOV_MAX		51
#define	_SC_IPV6		52
#define	_SC_MAPPED_FILES	53
#define	_SC_MEMLOCK		54
#define	_SC_MEMLOCK_RANGE	55
#define	_SC_MEMORY_PROTECTION	56
#define	_SC_MESSAGE_PASSING	57
#define	_SC_MQ_OPEN_MAX		58
#define	_SC_MQ_PRIO_MAX		59
#define	_SC_PRIORITIZED_IO	60
#define	_SC_PRIORITY_SCHEDULING	61
#define	_SC_RAW_SOCKETS		62
#define	_SC_READER_WRITER_LOCKS	63
#define	_SC_REALTIME_SIGNALS	64
#define	_SC_REGEXP		65
#define	_SC_RTSIG_MAX		66
#define	_SC_SEMAPHORES		67
#define	_SC_SHARED_MEMORY_OBJECTS 68
#define	_SC_SHELL		69
#define	_SC_SIGQUEUE_MAX	70
#define	_SC_SPAWN		71
#define	_SC_SPIN_LOCKS		72
#define	_SC_SPORADIC_SERVER	73
#define	_SC_SS_REPL_MAX		74
#define	_SC_SYNCHRONIZED_IO	75
#define	_SC_SYMLOOP_MAX		76
#define	_SC_THREAD_ATTR_STACKADDR 77
#define	_SC_THREAD_ATTR_STACKSIZE 78
#define	_SC_THREAD_CPUTIME	79
#define	_SC_THREAD_DESTRUCTOR_ITERATIONS 80
#define	_SC_THREAD_KEYS_MAX	81
#define	_SC_THREAD_PRIO_INHERIT	82
#define	_SC_THREAD_PRIO_PROTECT	83
#define	_SC_THREAD_PRIORITY_SCHEDULING 84
#define	_SC_THREAD_PROCESS_SHARED 85
#define	_SC_THREAD_ROBUST_PRIO_INHERIT 86
#define	_SC_THREAD_ROBUST_PRIO_PROTECT 87
#define	_SC_THREAD_SPORADIC_SERVER 88
#define	_SC_THREAD_STACK_MIN	89
#define	_SC_THREAD_THREADS_MAX	90
#define	_SC_THREADS		91
#define	_SC_TIMEOUTS		92
#define	_SC_TIMER_MAX		93
#define	_SC_TIMERS		94
#define	_SC_TRACE		95
#define	_SC_TRACE_EVENT_FILTER	96
#define	_SC_TRACE_EVENT_NAME_MAX 97
#define	_SC_TRACE_INHERIT	98
#define	_SC_TRACE_LOG		99
#define	_SC_GETGR_R_SIZE_MAX	100
#define	_SC_GETPW_R_SIZE_MAX	101
#define	_SC_LOGIN_NAME_MAX	102
#define	_SC_THREAD_SAFE_FUNCTIONS 103
#define	_SC_TRACE_NAME_MAX      104
#define	_SC_TRACE_SYS_MAX       105
#define	_SC_TRACE_USER_EVENT_MAX 106
#define	_SC_TTY_NAME_MAX	107
#define	_SC_TYPED_MEMORY_OBJECTS 108
#define	_SC_V6_ILP32_OFF32	109
#define	_SC_V6_ILP32_OFFBIG	110
#define	_SC_V6_LP64_OFF64	111
#define	_SC_V6_LPBIG_OFFBIG	112
#define	_SC_V7_ILP32_OFF32	113
#define	_SC_V7_ILP32_OFFBIG	114
#define	_SC_V7_LP64_OFF64	115
#define	_SC_V7_LPBIG_OFFBIG	116
#define	_SC_XOPEN_CRYPT		117
#define	_SC_XOPEN_ENH_I18N	118
#define	_SC_XOPEN_LEGACY	119
#define	_SC_XOPEN_REALTIME	120
#define	_SC_XOPEN_REALTIME_THREADS 121
#define	_SC_XOPEN_STREAMS	122
#define	_SC_XOPEN_UNIX		123
#define	_SC_XOPEN_UUCP		124
#define	_SC_XOPEN_VERSION	125

#define	_SC_PHYS_PAGES		500
#define	_SC_AVPHYS_PAGES	501
#define	_SC_NPROCESSORS_CONF	502
#define	_SC_NPROCESSORS_ONLN	503

/* configurable system strings */
#define	_CS_PATH		 1
@


1.20
log
@Add the _POSIX_MONOTONIC_CLOCK symbol and the sysconf(3)
_SC_MONOTONIC_CLOCK variable.
from Brad

No libc minor crank needed, as no API has been changed, per se (deraadt).

ports bulk testing by landry@@
small man rewording from thib@@
ok millert@@ otto@@ deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.19 2011/10/15 23:35:29 guenther Exp $	*/
d40 1
a40 5
/* compile-time symbolic constants */
				/* implementation supports job control */
#define	_POSIX_JOB_CONTROL	1
				/* saved set-user-ID and set-group-ID */
#define	_POSIX_SAVED_IDS	1
d42 1
a43 13
#define	_POSIX2_VERSION		199212L

/* execution-time symbolic constants */
				/* chown requires appropriate privileges */
#define	_POSIX_CHOWN_RESTRICTED	1
				/* monotonic clock */
#define	_POSIX_MONOTONIC_CLOCK	200112L
				/* too-long path components generate errors */
#define	_POSIX_NO_TRUNC		1
				/* may disable terminal special characters */
#define	_POSIX_VDISABLE		(0377)
				/* file synchronization is available */
#define	_POSIX_FSYNC		1
d70 2
d119 91
a209 20

/* P1003.1c */
#define _SC_GETGR_R_SIZE_MAX	100
#define _SC_GETPW_R_SIZE_MAX	101
#define _SC_LOGIN_NAME_MAX	102
#define _SC_THREAD_SAFE_FUNCTIONS 103
#ifdef notyet
#define _SC_THREAD_DESTRUCTOR_ITERATIONS
#define _SC_THREAD_KEYS_MAX
#define _SC_THREAD_STACK_MIN
#define _SC_THREAD_THREADS_MAX
#define _SC_TTY_NAME_MAX
#define _SC_THREADS
#define _SC_THREAD_ATTR_STACKADDR
#define _SC_THREAD_ATTR_STACKSIZE
#define _SC_THREAD_PRIORITY_SCHEDULING
#define _SC_THREAD_PRIO_INHERIT
#define _SC_THREAD_PRIO_PROTECT
#define _SC_THREAD_PROCESS_SHARED
#endif
@


1.19
log
@"TLS-lite": add kernel support for a per-thread userspace pointer,
for pointing to the thread-control-block.  Support for mapping this
to the correct hardware register can be added as it's finished;
start with support for amd64, sparc, and sparc64.  Includes syscalls
for getting and setting it (for a portable __errno implementation) as
well as creating a new thread with an initial value for it.

discussed with miod@@, kettenis@@, deraadt@@; committing to get the syscalls
in with the impending libc bump and do further refinements in tree
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.18 2010/10/28 02:05:59 deraadt Exp $	*/
d52 2
d132 1
@


1.18
log
@support _SC_HOST_NAME_MAX; from brad
a libc crank is happening in < 24 hours
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.17 2010/01/15 10:17:48 sthen Exp $	*/
d75 7
@


1.17
log
@Add support to sysconf(3) for the variables _SC_NPROCESSORS_CONF and
_SC_NPROCESSORS_ONLN, implemented by AIX/Tru64/Solaris/Linux/SCO/FreeBSD/NetBSD.
Bump libc minor.

From Brad, ok deraadt@@ guenther@@

(File missing from previous commit, pointed out by johan@@ - thanks!)
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.16 2008/08/22 14:39:21 deraadt Exp $	*/
d122 1
@


1.16
log
@set _POSIX_JOB_CONTROL and _POSIX_SAVED_IDS to the correct values; ok millert
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.15 2008/06/25 14:54:44 millert Exp $	*/
d145 2
@


1.15
log
@Implement _SC_GETGR_R_SIZE_MAX, _SC_GETPW_R_SIZE_MAX, _SC_LOGIN_NAME_MAX,
and _SC_THREAD_SAFE_FUNCTIONS for sysconf(3).  OK deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.14 2008/03/16 19:56:27 kettenis Exp $	*/
d41 4
a44 3
#define	_POSIX_JOB_CONTROL	/* implementation supports job control */

#define	_POSIX_SAVED_IDS	/* saved set-user-ID and set-group-ID */
@


1.14
log
@Add the semi-standard _SC_PHYS_PAGES and _SC_AVPHYS_PAGES, sysconf(3) variable.

ok espie@@
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.13 2005/12/13 00:35:24 millert Exp $	*/
d122 5
a127 4
/* P1003.1c */
#define _SC_GETGR_R_SIZE_MAX
#define _SC_GETPW_R_SIZE_MAX
#define _SC_LOGIN_NAME_MAX
a139 1
#define _SC_THREAD_SAFE_FUNCTIONS
@


1.13
log
@First step in include files overhaul.  Use __FOO_VISIBLE (as defined
in sys/cdefs.h) instead of _FOO_SOURCE.  Also fix several namespace
pollution issues, including the byte order defines.  OK deraadt@@
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.12 2004/05/07 18:39:19 millert Exp $	*/
d141 3
@


1.12
log
@Implement _SC_SEM_NSEMS_MAX and _SC_SEM_VALUE_MAX.
Based on a diff from Jean-Gérard Pailloncy.
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.11 2003/06/02 23:28:22 millert Exp $	*/
d38 2
d69 1
a69 1
#ifndef _POSIX_SOURCE
@


1.11
log
@Remove the advertising clause in the UCB license which Berkeley
rescinded 22 July 1999.  Proofed by myself and Theo.
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.10 2002/06/14 21:35:00 todd Exp $	*/
d117 2
@


1.10
log
@spelling; from Brian Poole <raj@@cerias.purdue.edu>
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.9 2001/09/29 20:27:49 naddy Exp $	*/
d16 1
a16 5
 * 3. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *	This product includes software developed by the University of
 *	California, Berkeley and its contributors.
 * 4. Neither the name of the University nor the names of its contributors
@


1.9
log
@comment out some unimplemented placeholders; millert@@ agrees
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.8 1998/11/20 11:19:01 d Exp $	*/
d57 1
a57 1
				/* file syncronization is available */
@


1.9.4.1
log
@sync to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.9 2001/09/29 20:27:49 naddy Exp $	*/
d57 1
a57 1
				/* file synchronization is available */
@


1.8
log
@Add thread-safety to libc, so that libc_r will build (on i386 at least).
All POSIX libc api now there (to P1003.1c/D10)
  (more md stuff is needed for other libc/arch/*)
  (setlogin is no longer a special syscall)
Add -pthread option to gcc (that makes it use -lc_r and -D_POSIX_THREADS).
Doc some re-entrant routines
Add libc_r to intro(3)
dig() uses some libc srcs and an extra -I was needed there.
Add more md stuff to libc_r.
Update includes for the pthreads api
Update libc_r TODO
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.7 1998/07/13 00:56:54 millert Exp $	*/
d122 1
d140 1
@


1.8.6.1
log
@Sync the SMP branch to something just after 3.0
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.8 1998/11/20 11:19:01 d Exp $	*/
a121 1
#ifdef notyet
a138 1
#endif
@


1.8.6.2
log
@Sync the SMP branch with 3.3
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
d57 1
a57 1
				/* file synchronization is available */
@


1.8.6.3
log
@Sync SMP branch to -current
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.8.6.2 2003/03/28 00:41:30 niklas Exp $	*/
d16 5
a20 1
 * 3. Neither the name of the University nor the names of its contributors
@


1.8.6.4
log
@Merge with the trunk
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
a116 2
#define	_SC_SEM_NSEMS_MAX	31
#define	_SC_SEM_VALUE_MAX	32
@


1.7
log
@clarify a comment
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.6 1998/06/02 06:10:31 deraadt Exp $	*/
d121 18
@


1.6
log
@add sysctl and sysconf support for sysvsem, sysvshm, sysvmsg, and fsync; mostly from kleink
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.5 1996/10/26 06:54:43 tholo Exp $	*/
d72 1
a72 1
/* whence values for lseek(2); renamed by POSIX 1003.1 */
@


1.5
log
@Define _POSIX_VDISABLE as (0377), not '\377'
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.4 1996/10/26 03:13:52 tholo Exp $	*/
d57 2
d117 4
@


1.4
log
@Don't use a cast for _POSIX_VDISABLE
Update _POSIX_VERSION to 199009
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.3 1996/08/01 05:26:03 tholo Exp $	*/
d56 1
a56 1
#define	_POSIX_VDISABLE		'\377'
@


1.3
log
@Implemented _POSIX_SAVED_IDS behaviour according to 1003.1-1990, with
allowed extension from Appendix B, section 4.2.2.
@
text
@d1 1
a1 1
/*	$OpenBSD: unistd.h,v 1.2 1996/03/03 12:12:40 niklas Exp $	*/
d47 1
a47 1
#define	_POSIX_VERSION		198808L
d56 1
a56 1
#define	_POSIX_VDISABLE		((unsigned char)'\377')
@


1.2
log
@From NetBSD: 960217 merge
@
text
@d1 1
a1 1
/*	$OpenBSD$	*/
a44 7
/*
 * Although we have saved user/group IDs, we do not use them in setuid
 * as described in POSIX 1003.1, because the feature does not work for
 * root.  We use the saved IDs in seteuid/setegid, which are not currently
 * part of the POSIX 1003.1 specification.
 */
#ifdef	_NOT_AVAILABLE
a45 1
#endif
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@initial import of NetBSD tree
@
text
@@
