head	1.2;
access;
symbols
	OPENBSD_3_7:1.1.1.1.0.8
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.6
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.4
	OPENBSD_3_5_BASE:1.1.1.1
	apache_1_3_29-mod_ssl_2_8_16:1.1.1.1
	OPENBSD_3_4:1.1.1.1.0.2
	OPENBSD_3_4_BASE:1.1.1.1
	apache_1_3_28-mod_ssl_2_8_15:1.1.1.1
	apache:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2005.07.26.14.22.24;	author jmc;	state dead;
branches;
next	1.1;

1.1
date	2003.08.21.12.53.29;	author henning;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.08.21.12.53.29;	author henning;	state Exp;
branches;
next	;


desc
@@


1.2
log
@from tamas tevesz:
==> removal of language alternatives from manual/ and manual/mod/.

ok henning@@
@
text
@<?xml version="1.0" encoding="iso-2022-jp"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Apache Content Negotiation</title>
  </head>
  <!-- English revision: 1.29 -->
  <!-- Background white, links blue (unvisited), navy (visited), red (active) -->
  <body bgcolor="#ffffff" text="#000000" link="#0000ff"
  vlink="#000080" alink="#ff0000">
        <div align="CENTER">
      <img src="images/sub.gif" alt="[APACHE DOCUMENTATION]" /> 

      <h3>Apache HTTP Server</h3>
    </div>


    <h1 align="center">コンテントネゴシエーション</h1>

    <p>Apache のコンテントネゴシエーションのサポートは HTTP/1.1
    の規格に合うように
    更新されました。それにより、ブラウザにより提供されたメディアタイプ、
    言生譟▲礇薀織札奪箸函▲┘鵐魁璽妊鵐阿陵ダ先順位を用いてリソースの
    一番良い表現方法を選択できます。また、不完全なネゴシエーション用の情報を
    送ってくるブラウザからのリクエストをより優雅に扱うための機能を
    いくつか実装しています。</p>

    <p>コンテントネゴシエーションは <a
    href="mod/mod_negotiation.html">mod_negotiation</a>
    モジュールにより
    提供されていて、デフォルトで組み込まれています。</p>
    <hr />

    <h2>コンテントネゴシエーションについて</h2>

    <p>リソースは、幾つか異なった表現で利用できる場合があります。
    たとえば、異なる言生譴箘曚覆襯瓮妊▲織ぅ廖△泙燭呂修譴蕕料箸濆腓錣擦
利用できるかも知れません。もっとも適した選択をする方法の一つには、
    インデックスページをユーザに見せて、ユーザに選んでもらう方法があります。
    しかし、サーバが自動的に選ぶことができる場合が多くあります。
    これは、ブラウザがリクエスト情報毎の情報の一部に、
    どの表現を嗜好するかを送ることで動作しています。
    たとえばブラウザは、可能ならフランス語で情報を見たい、
    不可能ならその代わりに英語でもよいと、自分の嗜好を知らせることができます。
    ブラウザはリクエストのヘッダ世納陵ダ先傾向を知らせます。
    フランス語の表現だ世韻鰺弋瓩垢訃豺腓蓮▲屮薀Ε兇楼焚爾鯀蠅泙后鹿霈
腫鱚巣竇頸瘤苺瘍綺鹿頏緇

腫ぢこの優誓莊晃蓮∩魏椎修壁集修減澆靴董
言生譴砲茲辰突諭垢壁集修△訃豺腓砲里濺僂気譴
ということに注意してくだ世気ぁ鹿霈

腫ぢもっと複雑なリクエストの例を挙げましょう。
    このブラウザはフランス語と英語を受け付ける、
    しかしフランス語を好む、そして様々なメディアタイプを受け付けるが、
    プレインテキストや他のタイプよりは HTML を好む、
    他のメディアタイプよりは GIF や JPEG を好む、しかし最終手段として
    他のメディアタイプも受け付ける、というように誓瀋蠅気譴討い泙后
鹿霈
腫鱚巣竇頸瘤苺瘍綺鮖襲緕饅握巣竇頸貉襲饅握謙轣艱蜀饅握喬
蜊瘍絲褓繚饅握喬轣艱饅握規饅握鹿頏緇

腫樵鞜竏窺は HTTP/1.1 の規格で定義されている 'server driven'
    コンテントネゴシエーションをサポートしています。
    Accept, Accept-Language, Accept-Charset, Accept-Encoding
    リクエストヘッダ世魎袷瓦縫汽檗璽箸靴討い泙后草痺蒹ぢは
    RFC 2295 と RFC 2296
    で定義されている実験的なネゴシエーションプロトコルである、
    'transparent' もサポートしています。それらの RFC で定義されている
    'feature negotiation' はサポートしていません。</p>

    <p><strong>リソース</strong>とは URI
    で特定される概念上のもののことです (RFC 2396)。 Apache
    のような HTTP サーバは、その名前空間の中での
    リソースの<strong>表現</strong>へのアクセスを提供します。
    それぞれの表現は定義されたメディアタイプ、文字セット、
    エンコーディング等の付属した、バイト列の形式です。
    それぞれのリソースはある時点世ぢ個、1 個、それ以上の表現と
    関連付けられる可能誓△蠅泙后Ｊ瑤良集修僂任訃豺腓蓮
リソースは<strong>ネゴシエーション可能である</strong>とされ、
    個々の表現は <strong>variant</strong> と呼ばれます。
    ネゴシエーション可能なリソースの variant が異なる、その状態を指して、
    ネゴシエーションの<strong>次元</strong>と呼びます。</p>

    <h2>Apache におけるネゴシエーション</h2>

    <p>リソースをネゴシエーションするためには、サーバはそれぞれの
    variant についての情報を知っておく必要があります。
    これは以下の二つの方法のどちらかで行われます。</p>

    <ul>
    <li>タイプマップ (<em>すなわち</em>、<code>*.var</code> ファイル)
    を使う方法。これは、variant
    を明声傍鵑欧討い襯侫．ぅ襪鮖慊蠅靴泙后鹿跚
殊蘊纓鵲ぢを使って、
    サーバが暗黙の内にファイル名にパターン照合を
    行なってその結果から選択する方法。</li>
    </ul>

    <h3>type-map ファイルを使う</h3>

    <p>タイプマップは <code>type-map</code> ハンドラ (もしくは、古い
    Apache の誓瀋蠅望絨霧澳垢箸覆襪燭瓩飽飮気譴討い蜊タイプ
    <code>application/x-type-map</code>)
    に関連付けられたドキュメントです。
    この機能を使うためには、あるファイルの拡張子を
    <code>type-map</code>
    として定義するハンドラを誓瀋螢侫．ぅ襪農設定する
    必要があることに注意してくだ世気ぁ海譴鹿霈
腫鱚槍簇瘤粲纈絖轣癇
鹿頏緇
腫をサーバの誓瀋蠅暴颪海箸貳嵶匹な，任后
詳細はサンプルの誓瀋螢侫．ぅ襪離灰瓮鵐箸鮖仮箸靴討誓さい。</p>

    <p>タイプマップファイルにはそれぞれの variant
    についてのエントリがあります。これらのエントリは連続した HTTP
    のヘッダ盛圓蘋成ります。別の variant のエントリとは空行で
    分けられています。エントリ中に空行があってはいけません。
    マップファイルは全体のエンティティをくっつけた形で始めるのが
    習慣となっています
    (これは要求されているわけではなく、もしあった場合は無視されます)。
    たとえば、マップファイルはこのようになります:</p>
<pre>
  URI: foo

  URI: foo.en.html
  Content-type: text/html
  Content-language: en

  URI: foo.fr.de.html
  Content-type: text/html;charset=iso-8859-2
  Content-language: fr, de
</pre>

    <p>variant の品質が違うときは、この画像のように (JPEG, GIF, ASCII
    アートがあります) メディアタイプの "qs"
    パラメータとして指定されます。</p>
<pre>
  URI: foo

  URI: foo.jpeg
  Content-type: image/jpeg; qs=0.8

  URI: foo.gif
  Content-type: image/gif; qs=0.5

  URI: foo.txt
  Content-type: text/plain; qs=0.01
</pre>

    <p>qs 値の範囲は 0.000 から 1.000 です。qs 値が 0.000 の variant
    は決して選択されないことに注意してくだ世気ぁя鵲ぢ値のない
    variant は qs 値 1.0 を 与えられます。qs
    パラメータはクライアントの能力に関係無く、他の variant 
    と比較したときの variant の相対的な「品質」を示します。たとえば、
    写真を表現しようとしているときは JPEG ファイルの方が普通は
    ASCII ファイルよりも高い品質になります。 しかし、リソースが元々
    ASCII アートで表現されているときは、ascii ファイルの方が
    JPEG ファイルよりも高い品質になります。このように、qs
    は表現されるリソースの誓舛砲茲辰癇蛛銓
毎に特有の値を取ります。</p>

    <p>認識されるヘッダ世隆袷瓦憤賤楼焚爾里茲Δ砲覆蠅泙瑳
寂貍
寂若閼緇孀漂鹿竢粤昭

寂箴ぢ与えられたメディアタイプのもので、与えられた content
    encoding でエンコードされた) variant のファイルの URI
    。マップファイルからの相対 URL として解釈されます。
    同じサーバ上にある必要があり、
    直誓寨弋瓩気譴燭箸縫薀ぅ▲鵐箸▲札垢
認められているファイルを参照していなければなりません。</dd>

    <dt><code>Content-Type:</code></dt>

    <dd>メディアタイプ --- charset, level, "qs"
    パラメータを指定することができます。これらはしばしば MIME
    タイプと呼ばれます。典型的なメディアタイプは
    <code>image/gif</code>, <code>text/plain</code>,
    <code>text/html;&nbsp;level=3</code> です。</dd>

    <dt><code>Content-Language:</code></dt>

    <dd>RFC 1766 のインターネット標準言生譽織阿濃慊蠅気譴拭鱸瘤の言生譟弱躱たとえば</em>、英語は
    <code>en</code>、 韓国語は <code>kr</code>,
    <em>等</em>)。</dd>

    <dt><code>Content-Encoding:</code></dt>

    <dd>誓犬離如璽燭任呂覆▲侫．ぅ襪欺未気譴討い燭蝓
エンコードされたりしているときに、
    どのようにそれがなされているかを指定します。
    Apache は <a href="mod/mod_mime.html#addencoding">AddEncoding</a>
    ディレクティブで定義されたエンコーディングのみを認識します。通常は
    compress されたファイルのための <code>x-compress</code> や
    gzip されたファイルのための <code>x-gzip</code>
    のようなエンコーディングを含みます。
    エンコーディングの比較時には誓榮竢粤蒸閼緇
は無視されます。</dd>

    <dt><code>Content-Length:</code></dt>

    <dd>ファイルのサイズ。タイプマップで content length を指定すると、
    サーバが実際のファイルを調べずに
    ファイルのサイズを比較することができます。</dd>

    <dt><code>Description:</code></dt>

    <dd>人間が読める variant を誓睫誓した文章。Apache が適誓擇癇蛛銓
を見つけられなかった場合は、すべての可能な variant
    の一覧を挙げるエラー応答を返します。その variant
    一覧は人間が読める variant の 誓睫誓を含みます。</dd>
    </dl>

    <h3>Multiviews</h3>

    <p><code>MultiViews</code> はディレクトリ毎のオプションで、
    <code>&lt;Directory&gt;</code>, <code>&lt;Location&gt;</code>,
    <code>&lt;Files&gt;</code> や、(<code>AllowOverride</code>
    が適誓擇蔽佑棒設定されていると) <code>.htaccess</code>
    ファイルで <code>Options</code>
    ディレクティブによって誓瀋蠅垢襪海箸任泙后若閼緇闔糟貅閼緇ぢは <code>MultiViews</code>
    を誓瀋蠅靴覆い海箸肪躇佞靴討誓さい。
    明声砲修量樵阿鮟颪廚△蠅泙后鹿霈

腫昭竢粤祥帷纓鷦閼緇ぢの効果は以下のようになります:
    サーバが <code>/some/dir/foo</code> へのリクエストを受け取り、
    <code>/some/dir/foo</code> が存在<em>しない</em>場合、
    サーバはディレクトリを読んで、<code>foo.*</code>
    にあてはまるすべてのファイルを探し、
    事実上それらのファイルをマップするタイプマップを作ります。
    そのとき、メディアタイプとコンテントエンコーディングは、
    そのファイル名を直誓椹慊蠅靴燭箸汎韻犬發里笋蠹討蕕譴泙后
それからクライアントの要求にもっとも合うものを選び、
    そのドキュメントを返します。</p>

    <p>サーバがディレクトリの索引を作ろうとしていると、
    <code>MultiViews</code> は <code>DirectoryIndex</code>
    ディレクティブで指定された名前の探索にも適用されます。
    誓瀋螢侫．ぅ襪鹿霈

腫鱚堤鱚笏闥鈔纔鈔纔
鹿頏緇

腫ぢが書かれていて、<code>index.html</code> と
    <code>index.html3</code> が両方存在していると、
    サーバはその中から毎回どちらかを適当に選びます。
    もしその両方が存在せずに <code>index.cgi</code>
    が存在していると、サーバはそれを実行します。</p>

    <p>ディレクトリを読んでいるときに見つかったファイルに CGI
    スクリプトがあった場合は、何が起こるべきかは自明世任呂△蠅泙擦鵝
そのような場合はコードは特別な扱いをしています。リクエストが
    POST か QUERY_ARGS や PATH_INFO のある GET
    の場合は、スクリプトに非常に高い品質が与えられ、
    通常それが起動されます。その他のリクエストのときは、スクリプトには
    非常に低い品質が与えられ、他のものが(もしあれば)取得世気譴泙后鹿霈

取仮ネゴシエーション方法</h2>

    <p>Apache がタイプマップファイルかディレクトリのファイル名から
    リソースの variant の一覧を取得世靴燭蕁◆嶌覗院廚癇蛛銓
を選ぶために 二つの方法のどちらかを起動します。Apache
    のコンテントネゴシエーションの機能を使うために、
    どのようにネゴシエーションが行なわれるかの詳細を知る必要は
    ありません。
    しかし、これ以降では関心のある人のためにその方法を誓睫誓します。</p>

    <p>ネゴシエーション方法は二つあります。</p>

    <ol>
    <li>通常は <strong>Apache のアルゴリズムを用いた Server
    driven negotiation</strong> が使用されます。Apache
    のアルゴリズムは後で詳細に誓睫誓されています。
    このアルゴリズムが使用された場合、Apache
    はより良い結果になるように、特定の次元において品質の値を
    「変える」ことができます。Apache
    が品質の値を変える方法は後で詳細に誓睫誓されています。</li>

    <li>RFC 2295
    で定義されている機構を用いてブラウザが特に指定した場合、
    <strong>transparent content negotiation</strong>
    が使用されます。このネゴシエーション方法では、ブラウザが「最善」の
    variant の決定を完全に誓罎垢襪海箸任泙后
ですから、結果はブラウザが使用しているアルゴリズムに依存します。
    Transparent negotiation の処理の過程で、ブラウザは RFC 2296
    で定義されている 'remote variant selection algorithm'
    を実行するように頼むことができます。</li>
    </ol>

    <h3>ネゴシエーションの次元</h3>

    <table>
      <tr valign="top">
        <th>Dimension</th>

        <th>Notes</th>
      </tr>

      <tr valign="top">
        <td>メディアタイプ</td>

        <td>Accept ヘッダ瀬侫璽襯匹妊屮薀Ε兇砲茲蠎┐気譴襦
それぞれの項目は品質係数を持つことが出来ます。
        variant の誓睫誓にも品質係数 ("qs"
        要素)を持つことができます</td>
      </tr>

      <tr valign="top">
        <td>言生鹿
儒箴巣竇頸瘤苺瘍ヘッダ瀬侫璽襯匹妊屮薀Ε兇砲茲蠎┐気譴襦
それぞれの項目は品質係数を持つことが出来ます。
        variants は 0, 1, またはそれ以上の言生譴抜慙△鼎韻襪海箸任泙后
鹿鹿
儒跚芬就陟儒箴エンコーディング</td>

        <td>Accept-Encoding ヘッダ瀬侫璽襯匹妊屮薀Ε兇砲茲蠎┐気譴襦
それぞれの項目は品質係数を持つことが出来ます。</td>
      </tr>

      <tr valign="top">
        <td>キャラクタセット</td>

        <td>Accept-Charset ヘッダ瀬侫璽襯匹妊屮薀Ε兇砲茲蠎┐気譴襦
それぞれの項目は品質係数を持つことが出来ます。Variants
        でもメディアタイプの要素としてキャラクタセットを示すことが出来ます。
        </td>
      </tr>
    </table>

    <h3>Apache のネゴシエーションアルゴリズム</h3>

    <p>ブラウザに返す「最適な」variant を（もしあれば）選択するように Apache
    は次のアルゴリズムを使うことができます。このアルゴリズムは
    未だ誓設定可能なものではありません。次のように動作します:</p>

    <ol>
      <li>まずはじめに、ネゴシエーションの次元それぞれについて適誓擇
弱躱巣竇頸躱ぢヘッダ瀬侫璽襯匹鬟船Д奪靴董鱸瘤それぞれに品質を割り当てます。もしある次元の <em>Accept*</em>
      ヘッダ世任修癇蛛銓ぢが許容できないと暗示されていれば、それを削除します。
      variants が一つも残っていなければ、ステップ 4 に行きます。</li>

      <li>消去法で「最適な」 variant を選びます。
      次のテストが順番に適応されます。テストで選択されなかった
      variant は削除されていきます。テスト後 variant
      が唯一残っていれば、それを最適なものとしてステップ 3 に進みます。
      variant が複数残っていれば、次のテストに進みます。

      <ol>
        <li>variant のメディアタイプの品質数値と Accept
        ヘッダ世良兵楚佑箸寮積を計算して、最高値の variant
        を選びます。</li>

        <li>言生貮兵楚佑嚢發癇蛛銓ぢを選びます。</li>

        <li>(もしあれば) Accept-Language ヘッダ世慮誓語順か、
        (もしあれば) <code>LanguagePriority</code> 
        ディレクティブの言生貊腓悩播文誓語の variant を選びます。
        </li>

        <li>最高「レベル」のメディアパラメータ (text/html
        メディアタイプのバージョンを与えるために使われます)を持つ
        variant を選びます。</li>

        <li>Accept-Charset ヘッダ盛圓罵燭┐蕕譴討い觝嚢發諒源札奪
メディアパラメータを持つ variant を選びます。明声暴
されていない限り、ISO-8859-1 が許容されるようになっています。
        <code>text/*</code> メディアタイプであるけれども
        特定の文字セットに明声亡慙△鼎韻蕕譴討い襪錣韻任呂覆
鱸瘤は ISO-8859-1 であると仮定されます。</li>

        <li>ISO-8859-1 <em>ではない</em>文字セットメディアパラメータと
        関連づけられている variant を選びます。そのような variant
        がない場合は、代わりにすべての variant を選びます。</li>

        <li>最適なエンコーディングの variant を選びます。もし user-agent
        が許容するエンコーディングがあれば、その variant のみを選びます。
        そうではなく、もしエンコードされたものとそうでない
        variant が混ざって存在していたらエンコードされていない variant
        のみを選びます。 variant がすべてエンコードされているか variant
        がどれもエンコードされていないという場合は、すべての variant
        を選びます。</li>

        <li>内容の最も短い variant を選びます。</li>

        <li>残っている variant の最初のものを選びます。
        タイプマップファイルの最初にリストされているか、
        variant がディレクトリから最初に読み込まれる時に ASCII
        順でソートしてファイル名が誓萋砲覆辰燭△里匹舛蕕任后鹿跚鹿闌鹿跚
殊蘊アルゴリズムを使って一つの「最適な」variant
      を選びましたので、それを応答として返します。
      ネゴシエーションの次元を指定するために HTTP レスポンスヘッダ
已鴒ぢが誓瀋蠅気譴泙リソースのキャッシュをする時に、
      ブラウザやキャッシュはこの情報を使うことができます)。
      以上で終わり。</li>

      <li><p>ここに来たということは、variant が一つも選択されなかった
      (ブラウザが許容するものがなかったため) ということです。406 ステータス
      ("No Acceptable representation" を意味する) が、利用可能な variant
      のリストのついた HTML ドキュメントとともに返されます。
      変化の次元を示す HTTP Vary ヘッダ世眄設定されます。</p>

      <p>Apacheにより返されるエラーメッセージが必要以上に簡明世如
ぢ同等の内容を提示しているけれども、)
      ユーザが混乱する原因になることに留意すべきです。
      もしユーザがこのエラーページを見ることを避けたい場合は、
      標準の言生譴ぢまた、標準のエンコーディング等を添えた)
      文書を置いておくことで、もしブラウザから要求された言生譴
エンコーディング等が使えなかった場合は常にそれが返されます。</p>

      <p>ブラウザから要求された言生譴諒現颪匹譴眛誓られない時に
      デフォルト言生譴諒現颪鯤屬靴燭ぞ豺腓蓮
言生貘粟性セットなしの文書を作誓靴討誓さい。詳細は後の
      <a href="#nolanguage">Variants with no Language</a>
      参照。</p></li>
    </ol>

    <h2><a id="better" name="better">品質の値を変える</a></h2>
    <!-- 訳注：betterは修誓詰縦蝓儻貳任膨表召垢戮

腫ぢ上記の Apache
    ネゴシエーションアルゴリズムの厳格な解釈で得世蕕譴襪任△蹐γ佑蕁
草痺蒹ぢは品質数値を時々変えます。完全ではない、
    あるいは誓騎里任覆ぞ霾鵑鯀襯屮薀Ε狂韻離▲襯乾螢坤爐如
よりよい結果を得世襪燭瓩帽圓錣譴泙后覆螢櫂團絅蕁爾淵屮薀Ε兇如
もしないと間違った variant を選択する結果になってしまうような
    Accept ヘッダ西霾鵑鯀襪發里發△蠅泙后
ブラウザが完全で誓気靴ぞ霾鵑鯀辰討い譴弌
この数値変化は適用されません。</p>

    <h3>メディアタイプとワイルドカード</h3>

    <p>Accept: リクエストヘッダ世魯瓮妊▲織ぅ廚陵ダ先傾向を指定します。
    これはまた、"image/*" や "*/*"
    といった「ワイルドカード」メディアタイプを含むことができます。
    ここで * は任意の文字列にマッチします。ですから、次の:</p>
<pre>
  Accept: image/*, */*
</pre>
    を含むリクエストは、"image/" ではじまるタイプすべてが許容できる、
    そして他のどんなタイプも許容できる (この場合はじめの "image/*"
    は冗長になります) ことを示します。
    扱うことのできる明声淵織ぅ廚鵬辰┐董
ルーチンのようにワイルドカードを送るブラウザもあります。たとえば:
<pre>
  Accept: text/html, text/plain, image/gif, image/jpeg, */*
</pre>
    こうすることの狙世い蓮¬誓示的にリストしているタイプが優誓茲気譴襪韻譴匹癲
異なる表現が利用可能であればそれでも良い、ということです。
    しかしながら基本的なアルゴリズムでは、上に示したように、*/*
    ワイルドカードが他のすべてのタイプと全く同等なので優誓茲気譴泙擦鵝
ブラウザは */* にもっと低い品質 (優誓
値を付けてリクエストを送るべきなのです。たとえば:
<pre>
  Accept: text/html, text/plain, image/gif, image/jpeg, */*; q=0.01
</pre>
    明声淵織ぅ廚砲鷲兵楚佑佞韻蕕譴討い泙擦鵑里如▲妊侫襯箸
窺ぢ最高値) の優誓茲砲覆蠅泙后錺ぅ襯疋璽ぢは低い優誓菘
握葦ぢを与えられているので、明声縫螢好箸気譴討い襯織ぅ廚帽臙廚垢
鱸瘤がない場合にのみ、他のタイプが返されます。

    <p>もし Accept: ヘッダ世ぢ値を全く含んで<em>いなければ</em>、
    望みの挙動をするために、Apache は "*/*" があれば 0.01 の q
    値を誓瀋蠅靴泙后泙拭♯絲ぢの形のワイルドカードには 0.02 の q
    値を誓瀋蠅靴泙ですからこれらは "*/*" のマッチよりも優誓茲気譴泙ぢ。
    もし Accept: ヘッダ醒罎離瓮妊▲織ぅ廚里匹譴ぢ値を含んでいれば、
    これらの特殊な値は適用<em>されず</em>、誓気靴ぞ霾鵑鯀襯屮薀Ε兇蕕
リクエストは期待通りに動作しはじめます。</p>

    <h3><a id="nolanguage" name="nolanguage">言生貘粟性のない variant</a></h3>

    <p>もし特定のリソースの variant のうちのいくつかが言生貘粟性を持っていて
    いくつかは持っていない場合は、それらの言生貘粟性を持たない variant
    には 0.001 という非常に低い品質係数が与えられます</p>

    <p>この言生貘粟性を持たない variant に 0.001
    という非常に低い品質係数が与えられるという誓瀋蠅陵海ブラウザの言生貔設定に合う variant が一つもなかったときに標準の
    variant を適用することを可能にするためです。これにより、
    リクエストされたリソースに対して、用意していない言生譴誓けを accept
    するように誓瀋蠅気譴織屮薀Ε兇離罅璽兇完侠
エラーページを見るのを避けることが可能になります。</p>
 
    <p>たとえば Multiviews が有効で variants
    が三つある状況を考えます。</p>

    <ul>
    <li>foo.en.html, language en</li>

    <li>foo.fr.html, language en</li>

    <li>foo.html, no language</li>
    </ul>

    <p>言生貘粟性のない variant の意味は常にブラウザに適応することです。
    リクエストが <code>foo</code> で Accept-Language ヘッダ世または fr (またはその両方) が含まれる場合、foo.en.html か
    foo.fr.html のどちらかが返されます。ブラウザが許容するものとして
    en と fr のどちらも挙げられていない場合は代わりに foo.html 
    が返されます。クライアントが <code>foo.html</code>
    をリクエストした場合は完全に一致するのでネゴシエーションは発誓犬擦此
それ自体が返されます。この問題を避けるには、「言生譴里覆ぁ癇蛛銓
として <code>foo.html.html</code> という名前を付けることが Multiviews
    そして言生譽優乾轡─璽轡腑鵑虻遒垢襪燭瓩諒欷韻箸靴
役立つことが時々あります。</p>

    <h2>Transparent Content Negotiation の拡張</h2>
    Apache は transparent content negotiation プロトコル (RFC 2295)
    を次のように拡張しています。特定のコンテントエンコーディング
    のみが利用可能である variant に印を付けるために、新たに
    <code>{encoding ..}</code> 要素を variant リスト中に使うことができます。
    リスト中のエンコードされた variant を認識できて、Accept-Encoding
    リクエストヘッダ世暴召辰撞討気譴襯┘鵐魁璽匹鬚發辰癇蛛銓
は、どれでも候補 variant として使用できるようにするために、
    RVSA/1.0 アルゴリズム (RFC 2296) の実装が拡張されました。
    RVSA/1.0 の実装では、最適な variant が見つかるまで、
    計算した品質数値は小数点整焚ぢ桁まで丸めません。

    <h2>リンクと名前の変換に関する注意点鹿莢
腫ぢ言生譽優乾轡─璽轡腑鵑鮖箸辰討い訃豺腓蓮▲侫．ぅ襪譴聴幣紊粒板セ劼鮖討董
拡張子の順番には関連誓名錣呂覆詳細は
    <a href="mod/mod_mime.html#multipleext">mod_mime</a> を参照)
    ので、幾つかの異なる名前の変換を選べることになります。</p>

    <p>典型的なファイルでは、MIME タイプ拡張子 (<em>たとえば</em>
    <samp>html</samp>) を持っていて、エンコーディング拡張子
    (<em>たとえば</em> <samp>gz</samp>) を持っているかもしれないし、
    このファイルに異なる言生癇蛛銓ぢを用意していれば、もちろん言生豎板セ
┝纃ぢたとえば</em> <samp>en</samp>) を持っているでしょう。</p>

    <p>例:</p>

    <ul>
    <li>foo.en.html</li>

    <li>foo.html.en</li>

    <li>foo.en.html.gz</li>
    </ul>

    <p>誓気靴ぅ螢鵐埓正なリンクの両方のファイル名の例を挙げます:</p>

    <table border="1" cellpadding="8" cellspacing="0">
      <tr>
        <th>ファイル名</th>

        <th>誓飢鬚離螢鵐鹿
儒莨不誓飢鬚離螢鵐鹿鹿
儒鮠
儒箴弱躱肬鎬蔗迪郤躱鹿
儒箴肬鐚碣闖貅箴

儒箴箴
鹿
儒鮠
儒箴弱躱肬鎬緕貅躱鹿
儒箴肬鐚箴

儒箴肬鎬蔗迪鹿鹿
儒鮠
儒箴弱躱肬鎬蔗迪隨苞鹿纃昭箴

儒箴肬鐚碣闖貅箴

儒箴肬鎬苞錫
闖谺苞鹿鹿
儒鮠
儒箴弱躱肬鎬緕谺苞鹿纃昭箴

儒箴肬鐚箴

儒箴肬鎬蔗迪錫
闖谺苞錫
闖箴
鹿
儒鮠
儒箴弱躱肬鎬苞谺緕鹿纃昭箴

儒箴肬鐚碣闖碣闖蔗迪鹿
儒箴肬鎬蔗迪鹿鹿
儒鮠
儒箴弱躱肬鎬蔗迪緕鹿纃昭箴

儒箴肬鐚碣闖貅碣闖谺苞鹿
儒箴肬鎬苞鹿鹿鹿碎緇

腫ぢ上の表を見て、拡張子なしのリンク (<em>たとえば</em> <samp>foo</samp>) 
    がいつでも使えることに気が付くでしょう。この利点世蓮
ドキュメントとして応答するファイルの実際のファイルタイプを隠蔽して、
    リンクの参照を変更することなく後からファイルを変更できる、
    <em>たとえば</em> <samp>html</samp> から <samp>shtml</samp>
    に、あるいは <samp>cgi</samp> に変更できる点世任后鹿霈

腫ぢリンクに MIME タイプを使い続けたい (<em>たとえば</em>
    <samp>foo.html</samp>)時は、言生豎板セ劼
ぢエンコーディング拡張子もあればそれも含めて)
    MIME タイプ拡張子の右側になければなりません
    (<em>たとえば</em> <samp>foo.html.en</samp>)。</p>

    <h2>キャッシュに関する注意事項</h2>

    <p>キャッシュがある表現を保存しているときは、リクエスト URL
    と関連づけられています。次にその URL がリクエストされた時に、
    キャッシュは保存されている表現を使用できます。しかし、リソースが
    サーバでネゴシエーション可能であれば、最初のリクエストでキャッシュされて続く
    キャッシュヒットでは間違った応答を返してしまうということになりかねません。
    これを防ぐために、Apache はコンテントネゴシエーションの
    後に返された応答すべてに、HTTP/1.0 クライアントでの
    non-cacheable とマークします。また、ネゴシエーションされた応答のキャッシュ
    を可能にする HTTP/1.1 プロトコルの機能も Apache はサポートします。</p>

    <p>HTTP/1.0 準拠のクライアントからのリクエストに対しては、
    (ブラウザであろうとキャッシュであろうと) ネゴシエーション
    を受けた応答のキャッシュを許すために、<code>CacheNegotiatedDocs</code>
    ディレクティブを使用できます。このディレクティブは、
    主サーバ誓瀋蠅筌弌璽船礇襯曠好箸罵燭┐蕕譴董瑤鬚箸蠅泙擦鵝
挽墅ぢクライアントからのリクエストには効力を持ちません。</p>
        <hr />

    <h3 align="CENTER">Apache HTTP Server</h3>
    <a href="./"><img src="images/index.gif" alt="Index" /></a>

  </body>
</html>

@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@import apache 1.3.28 and mod_ssl 2.8.15
@
text
@@
