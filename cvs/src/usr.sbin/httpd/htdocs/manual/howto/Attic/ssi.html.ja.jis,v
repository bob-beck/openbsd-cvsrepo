head	1.7;
access;
symbols
	OPENBSD_3_7:1.6.0.6
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.6.0.4
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.6.0.2
	OPENBSD_3_5_BASE:1.6
	apache_1_3_29-mod_ssl_2_8_16:1.1.1.4
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	apache_1_3_28-mod_ssl_2_8_15:1.1.1.3
	OPENBSD_3_3:1.4.0.2
	OPENBSD_3_3_BASE:1.4
	apache_1_3_27-mod_ssl_2_8_12:1.1.1.2
	apache_1_3_27:1.1.1.2
	OPENBSD_3_2:1.3.0.4
	OPENBSD_3_2_BASE:1.3
	apache_1_3_26:1.1.1.1
	apache:1.1.1
	OPENBSD_3_1:1.3.0.2
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.1.0.4
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_9:1.1.0.2;
locks; strict;
comment	@# @;


1.7
date	2005.07.27.20.03.16;	author jmc;	state dead;
branches;
next	1.6;

1.6
date	2003.11.17.18.57.04;	author henning;	state Exp;
branches;
next	1.5;

1.5
date	2003.08.21.13.11.32;	author henning;	state Exp;
branches;
next	1.4;

1.4
date	2002.10.07.21.04.43;	author henning;	state Exp;
branches;
next	1.3;

1.3
date	2002.03.29.02.08.04;	author beck;	state Exp;
branches;
next	1.2;

1.2
date	2002.02.12.07.56.47;	author beck;	state Exp;
branches;
next	1.1;

1.1
date	2001.03.29.10.21.29;	author beck;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.07.19.21.28.03;	author henning;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2002.10.07.19.48.09;	author henning;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2003.08.21.12.53.30;	author henning;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2003.11.17.17.03.14;	author henning;	state Exp;
branches;
next	;


desc
@@


1.7
log
@from tamas tevesz:
more altlangs removal, missed from previous sweep;
@
text
@<?xml version="1.0" encoding="iso-2022-jp"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
  <head>

    <title>Apache チュートリアル: Server Side Includes 入門</title>

  </head>
  <!-- English revision: 1.14 -->
  <!-- Background white, links blue (unvisited), navy (visited), red (active) -->

  <body bgcolor="#ffffff" text="#000000" link="#0000ff"
  vlink="#000080" alink="#ff0000">
        <div align="CENTER">
      <img src="../images/sub.gif" alt="[APACHE DOCUMENTATION]" /> 

      <h3>Apache HTTP Server Version 1.3</h3>
    </div>



    <h1 align="center">Apache チュートリアル:
    Server Side Includes 入門</h1>
    <a id="__index__" name="__index__"></a> <!-- INDEX BEGIN -->


    <ul>
      <li><a
      href="#apachetutorial:introductiontoserversideincludes">Apache
      チュートリアル: Server Side Includes 入門</a></li>

      <li><a href="#whataressi">SSI とは?</a></li>

      <li><a href="#configuringyourservertopermitssi">SSI
      を許可するためのサーバの誓瀋鹿畩鹿跚
殊蘊
釈鱚羹■矚皷笂皷粡鱚笏蝟纉⊂基本的な SSI ディレクティブ</a>

        <ul>
          <li><a href="#today'sdate">今日の日付</a></li>

          <li><a href="#modificationdateofthefile">ファイルの変更日</a></li>

          <li><a href="#includingtheresultsofacgiprogram">CGI
          プログラムの結果を取り込む</a></li>
        </ul>
      </li>


      <li>
        <a href="#additionalexamples">追加の例</a>

        <ul>
          <li><a href="#whenwasthisdocumentmodified"
          >いつこのドキュメントは修誓気気譴燭里深昭蘊

殊蘊釈鱚羹■蜴竚蜴艨齡瘤籬鰾肬阡纈ぢ標準のフッタを挿入する</a></li>

          <li><a href="#whatelsecaniconfig"
          >他に何が誓瀋蠅任襪里深昭蘊

殊蘊釈鱚羹■纔繝蜴艫闕轣鈔鵞ぢコマンドの実行</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="#advancedssitechniques">高度な SSI テクニック</a>


        <ul>
          <li><a href="#settingvariables">変数を誓瀋蠅垢鹿畩
鹿跚
殊蘊釈鱚羹■竢鈔蜚蜿釶跂鱚齠蜿銖⊂条件式</a></li>
        </ul>
      </li>


      <li><a href="#conclusion">終わりに</a></li>
    </ul>
    <!-- INDEX END -->
    <hr />

    <h2><a id="apachetutorial:introductiontoserversideincludes"
    name="apachetutorial:introductiontoserversideincludes">Apache
    チュートリアル: Server Side Includes 入門</a></h2>

    <table border="1">
      <tr>
        <td valign="top"><strong>関連モジュール</strong><br />
         <br />
         <a href="../mod/mod_include.html">mod_include</a><br />
         <a href="../mod/mod_cgi.html">mod_cgi</a><br />
         <a href="../mod/mod_expires.html">mod_expires</a><br />
         </td>

        <td valign="top"><strong>関連ディレクティブ</strong><br />
         <br />
         <a href="../mod/core.html#options">Options</a><br />
         <a
        href="../mod/mod_include.html#xbithack">XBitHack</a><br />
         <a href="../mod/mod_mime.html#addtype">AddType</a><br />
         <a
        href="../mod/mod_mime.html#addhandler">AddHandler</a><br />
         <a href="../mod/mod_setenvif.html#browsermatchnocase"
        >BrowserMatchNoCase</a><br />
         </td>
      </tr>
    </table>

    <p>この記事は、通常は単に SSI と呼ばれる Server Side Includes
    を扱います。この記事においては、サーバでの SSI を許可するための誓瀋蠅函
現在の HTML ページに動的なコンテンツを加えるためのいくつかの基本的な
    SSI 技術を紹介します。</p>

    <p>記事の後半では、SSI ディレクティブで SSI
    と共に実行することができる条件文のような
    幾分高度な事柄について述べています。</p>
    <hr />

    <h2><a id="whataressi" name="whataressi">SSI とは?</a></h2>

    <p>SSI (Server Side Includes) は、HTML
    ページ中に配置されるディレクティブであり、
    サーバでページを提供する時に評価されます。SSI は、CGI
    プログラムやその他の動的な技術で全てのページを提供せずに、
    動的に誓言成されたコンテンツを現在の HTML ページに加えます。</p>

    <p>どういう場合に SSI を使い、どういう場合にプログラムで
    ページを完全に誓言成するかは、ページのうちどの程度が誓電任△蝓
ページが提供されるたびに再計算する必要がどの程度あるかで通常は決定します。
    SSI は現在時刻のような小さい情報を加えるにはうってつけの方法です。
    しかし、そのページのほとんどの部分が提供時に誓言成される場合は、
    他の方法を探す必要があります。
    </p>
    <hr />


    <h2><a id="configuringyourservertopermitssi"
    name="configuringyourservertopermitssi">SSI
    を許可するためのサーバの誓瀋鹿畩鹿莢
腫ぢサーバで SSI を許可するには、<a
    href="../mod/mod_include.html">mod_include</a>
    をインストール、有効化する必要があります。さらに、
    <code>httpd.conf</code> ファイルまたは <code>.htaccess</code>
    ファイルに次のディレクティブを指定する必要があります:</p>
<pre>
        Options +Includes
</pre>

    <p>この指定は、ファイルを SSI ディレクティブで解誓呂気擦襪海箸魑弔垢
ということを Apache に伝えます。
    ほとんどの誓瀋蠅任呂澆い鮠綵颪任襦∧瑤
釈鱚羹〓迴箝竢鱚譯關闔鵞章頸蜿銖鹿畩ぢがあることに
    注意してくだ世気ぁ修蕕∪設定が最後に評価されることを
    保証されるために、SSI を使用したいディレクトリに <code>Options</code>
    ディレクティブを適用する必要があるでしょう。</p>

    <p>全てのファイルが SSI ディレクティブで解誓呂気譴襪箸いΔ錣韻任呂△蠅泙擦鵝
どのファイルが解誓呂気譴襪鞜竏に伝える必要があります。
    これを行なうには二つ方法があります。次のディレクティブを使うことで、
    例えば <code>.shtml</code> のような特別なファイル拡張子を持つ
    ファイルを解誓呂垢襪茲鞜竏に伝えることができます:</p>
<pre>
        AddType text/html .shtml
        AddHandler server-parsed .shtml
</pre>

    <p>この方法の欠点世蓮△發係什澆離據璽犬喇
ディレクティブを加えたい場合、それらのディレクティブが実行されるように
    <code>.shtml</code> 拡張子にするため、そのページの名前と、
    そのページへの全てのリンクを変更しなければならないことです。
    </p>

    <p>もう一つの方法は、<code>XBitHack</code>
    ディレクティブを使用することです:</p>
<pre>
        XBitHack on
</pre>

    <p><code>XBitHack</code> は、ファイルの実行ビットが立っている場合、
    SSI ディレクティブにより解誓呂垢襪海箸鞜竏に伝えます。
    従って、SSI ディレクティブを現在のページに加えるためには、
    ファイル名を変更しなくてもよく、単に <code>chmod</code>
    を使用してファイルを実行可能にするだ世韻悩僂澆泙后鹿霈
腫鱚竏迴瘍緕瘢絎蔗迪
鹿頏緇

腫ぢ行なうべきではないことに関する短いコメント。時々誰かが、全ての
    <code>.html</code> ファイルを SSI で解誓呂垢襪茲鞜竏に伝えれば、
    わざわざ <code>.shtml</code> というファイル名にする必要がないといって
    薦めるのを見ることでしょう。こういう人たちは、おそらく
    <code>XBitHack</code> について聞いたことがないのでしょう。
    この方法について注意することは、たとえ SSI
    ディレクティブを全く含まない場合でも、Apache がクライアントに
    送る全てのファイルを最後まで読み込ませることになります。
    この方法はかなり処理を遅くするものであり、良くないアイデアです。</p>

    <p>もちろん、Windows ではそのような実行ビットをセット
    するようなものはありませんのでオプションが少し誓造気譴討い泙后鹿霈

腫ぢデフォルトの誓瀋蠅任蓮草痺蒹ぢは SSI ページについて最終変更時刻や
    コンテンツの長さを HTTP ヘッダ世冒蠅泙擦鵝
動的なコンテンツであるため、それらの値を計算するのが難しいからです。
    このためドキュメントがキャッシュされなくなり、
    結果としてクライアントの誓修戮覆辰燭茲Δ亡兇犬気擦襪海箸砲覆蠅泙后
これを解決する方法が二つあります:</p>

    <ol> 
      <li><code>XBitHack Full</code> 誓瀋蠅鮖藩僂垢襦
この誓瀋蠅砲茲蝓△發箸發藩弋瓩気譴織侫．ぅ襪了錣鮖仮箸掘
読み込まれるファイルの変更時刻を無視して最終変更時刻を決定するよう
      Apache に伝えます。</li>

      <li><a href="../mod/mod_expires.html">mod_expires</a>
      で提供されているディレクティブを使用して、
      ファイルが無効になる時刻を明声┐靴泙后海譴砲茲蝓
ブラウザとプロキシにキャッシュが有効であることを通知します。
      </li>
    </ol>
    <hr />

    <h2><a id="basicssidirectives" name="basicssidirectives">基本的な
    SSI ディレクティブ</a></h2>

    <p>SSI ディレクティブは以下の文法で記述します:</p>
<pre>
        &lt;!--#element attribute=value attribute=value ... --&gt;
</pre>

    <p>HTML のコメントのような書式をしているので、もし SSI
    を誓気靴虻邁椎修砲靴覆韻譴弌▲屮薀Ε兇呂修譴鯡技襪垢襪任靴腓Α
しかし、HTML ソース中では見えます。もし SSI を誓気靴設定したなら、
    ディレクティブはその結果と置き換えられます。
    </p>

    <p>element はたくさんあるものから一つ指定することができます。
    指定できるものの大多数については、次回もう少し詳しく誓睫誓します。
    ここでは、SSI で行なうことができる例をいくつか示します。
    </p>

    <h3><a id="todaysdate" name="todaysdate">今日の日付</a></h3>
<pre>
        &lt;!--#echo var="DATE_LOCAL" --&gt;
</pre>


    <p><code>echo</code> 要素は単に変数の値を出力します。
    CGI プログラムに利用可能な環境変数の全ての
    セットを含む多くの標準変数があります。また、<code>set</code>
    要素を用いることで、独自の変数を定義することができます。
    </p>

    <p>出力される日付の書式が好きではない場合、その書式を修誓気垢襪燭瓩法
若閼緇竢鈕蜃鹿竢粤要素に <code>timefmt</code>
    属誓鮖藩僂垢襪海箸任泙后鹿霈
腫鱚´竢鈕蜃蜊繙逕就チヤベ
夬籬蜩踉察ｅ竏鮟壮冬模蛋蔓苳鹿頏緇

取馨釈篏閼蜀蜒癆蜿鈔癆繽胄蒹肅跂釶辣就迴粡肅竅闔籬閹繙蛹紜ぢファイルの変更日</a></h3>
<pre>
        This document last modified &lt;!--#flastmod file="index.html" --&gt;
</pre>


    <p>この要素も <code>timefmt</code>
    フォーマットの誓瀋蠅暴召い泙后鹿霈

取馨釈瘢綵∫釿跿粡鈑纈纉閹痺芍頏閾鱇蹉
蜆就蜴竚蜴苳蒹鱚齦踉齒聲竍蜷鳫苒瘢⊂断プログラムの結果を取り込む</a></h3>

    <p>これは、全ての人のお気に入りである ``ヒットカウンタ'' のような
    CGI プログラムの結果を出力する SSI
    のより一般的な使用のうちの一つです。</p>
<pre>
        &lt;!--#include virtual="/cgi-bin/counter.pl" --&gt;
</pre>
    <hr />

    <h2><a id="additionalexamples"
    name="additionalexamples">追加の例</a></h2>

    <p>以下は、SSI を使用して HTML
   ドキュメントにおいてできることのいくつかの特別な例です。</p>
    <hr />

    <h2><a name="whenwasthisdocumentmodified"
    id="whenwasthisdocumentmodified"
    >いつこのドキュメントは修誓気気譴燭里深昭仮

腫ぢ誓茲法▲疋絅瓮鵐箸埜紊吠儿垢気譴燭里呂い弔覆里
ユーザに通知するために SSI を使用することができることを述べました。
    しかしながら、実際の方法は、いくぶん問題のままにしておきました。
    HTML ドキュメントに配置された次のコードは、ページにそのような
    タイムスタンプを入れるでしょう。もちろん、上述のように、
    SSI を誓気靴虻邁椎修砲靴討廚△蠅泙后鹿霈
腫鱚´竢鈕蜃蜊繙逕就チヤベ
壽蜩蛹赱齡閼蜀蜈´肚癈閼蛹綵‰皷蔗迪
鹿頏緇

腫ぢもちろん、<code>ssi.shtml</code>
    の部分を実際の当該ファイル名と置き換える必要があります。
    もし、あらゆるファイルに張ることができる一般的なコードを探しているなら、
    これは不便であるかもしれません。おそらくその場合は、
    そうする代わりに変数 <code>LAST_MODIFIED</code>
    を使用したいと考えるでしょう:</p>
<pre>
        &lt;!--#config timefmt="%D" --&gt;
        This file last modified &lt;!--#echo var="LAST_MODIFIED" --&gt;
</pre>

    <p><code>timefmt</code>
    書式についてのより詳細については、お好みの検索サイトに行き、
    <code>strftime</code> で検索してみてくだ世気ぁＪ庫，脇韻犬任后鹿霈
取

取仮釈篏∫釿跿粡鈑癈鈔癇粭闖鬆
釶辣就蜴竚蜴艨齡瘤籬鰾肬阡纈⊂標準のフッタを挿入する</a></h2>


    <p>もし数ページを超えるページを持つサイトを管理しているならば、
    全ページに対して変更を行なうことが本当に苦痛となり得世襪海箸
分かるでしょう。全てのページに渡ってある種の標準的な外観を
    維持しようとしているならば特にそうでしょう。</p>

    <p>ヘッダ世筌侫奪人僂料淨僖侫．ぅ襪鮖藩僂垢襪海箸如
このような更新にかかる負担を減らすことができます。
    一つのフッタファイルを作誓掘△修譴竢粤冗釿跿粤鹿竢粤嗷コマンドで各ページに入れるだ世韻悩僂澆泙后若閼緇蜴竚綣閼緇
要素は、<code>file</code> 属誓泙燭竢粤畳蜥瘡鹿竢粤属誓里い困譴鮖藩僂靴討匹離侫．ぅ襪鯀淨垢襪魴茲瓩襪海箸任泙后
若閼緇肅跂鹿竢粤属誓蓮
弱躱カレントディレクトリからの相対パスで示された</em>ファイルパスです。
    それは / で始まる誓簑丱侫．ぅ襯僖垢砲呂任此△泙拭△修離僖垢琉貮瑤
を含むことができないことを意味します。<code>virtual</code>
    属誓蓮△修蕕茲衒慷誓と思いますが、提供するドキュメントからの相対
    URL で指定すべきです。それは / で始めることができますが、
    提供するファイルと同じサーバ上に存在しなくてはなりません。</p>
<pre>
        &lt;!--#include virtual="/footer.html" --&gt;
</pre>

    <p>私は最後の二つを組み合わせて、<code>LAST_MODIFIED</code>
    ディレクティブをフッタファイルの中に置くことがよくあります。
    SSI ディレクティブは、挿入用のファイルに含ませたり、
    挿入ファイルのネストをしたりすることができます。すなわち、
    挿入用のファイルは他のファイルを再帰的に挿入することができます。</p>
    <hr />

    <h2><a name="whatelsecaniconfig"
    id="whatelsecaniconfig">他に何が誓瀋蠅任襪里深昭仮

腫ぢ時刻書式を <code>config</code> で誓瀋蠅任襪海箸鵬辰┐董
更に二つ <code>config</code> で誓瀋蠅垢襪海箸任泙后鹿霈

腫ぢ通常、SSI ディレクティブで何かがうまくいかないときは、
    次のメッセージが出力されます。</p>
<pre>
        [an error occurred while processing this directive]
</pre>

    <p>このメッセージを他のものにしたい場合、<code>config</code>
    要素の <code>errmsg</code> 属誓琶儿垢垢襪海箸任泙瑳
腫鱚´竢鈕蜃鴪逑臀部韶縺鴦葹粹逾謗阯阯嗷怖
鹿頏緇

腫ぢおそらく、エンドユーザはこのメッセージを決して見ることはありません。
    なぜなら、そのサイトが誓犬疹屬砲覆訌阿喇ぢディレクティブに関する
    全ての問題を解決しているはずだ世蕕任后ぢそうですよね?)</p>

    <p>そして、<code>config</code> において <code>sizefmt</code>
    属誓鮖藩僂垢襪海箸如
返されるファイルサイズの書式を誓瀋蠅垢襪海箸任泙后
バイト数には <code>bytes</code> を、適当に Kb や Mb
    に短縮させるには <code>abbrev</code> を指定することができます。</p>
    <hr />

    <h2><a id="executingcommands"
    name="executingcommands">コマンドの実行</a></h2>

    <p>今後数ヶ月のうちに、小さな CGI プログラムと SSI
    を使用する記事を出したいと考えています。ここではそれとは別に、
    <code>exec</code> 要素によって行なうことができることを示します。
    SSI にシェル (誓騎里砲竢粤少砠遲鼈鹿竢粤ぢ。Win32 ならば DOS シェル)
    を使用してコマンドを実行させることができます。
    下記の例では、ディレクトリリスト出力を行ないます。</p>

<pre>
        &lt;pre&gt;
        &lt;!--#exec cmd="ls" --&gt;
        &lt;/pre&gt;
</pre>

    <p>Windows 上では、</p>
<pre>
        &lt;pre&gt;
        &lt;!--#exec cmd="dir" --&gt;
        &lt;/pre&gt;
</pre>

    <p>Windows 上では、このディレクティブによっていくつかの奇妙な
    書式に気づくでしょう。なぜなら <code>dir</code> の出力が文字列
    ``&lt;<code>dir</code>&gt;'' を含み、ブラウザを混乱させるからです。
    </p>

    <p>この機能は非常に危険であり、どんなコードでも <code>exec</code>
    タグに埋め込まれてしまえば実行することに注意してくだ世気ぁＮ磴┐
玻ぢゲストブック '' のように、もし、
    ユーザがページの内容を編集できる状況にあるならば、
    この機能を確実に抑誓靴討誓さい。<code>Options</code>
    ディレクティブの <code>IncludesNOEXEC</code> 引数を指定することで、
    SSI は許可するけれど <code>exec</code>
    機能は許可しないようにすることができます。</p>
    <hr />

    <h2><a id="advancedssitechniques"
    name="advancedssitechniques">高度な SSI テクニック</a></h2>

    <p>コンテンツを出力することに加え、Apache SSI は変数を誓瀋蠅掘
そして比較と条件分岐にその変数を使用できる機能を提供しています。
    </p>

    <h3><a id="caveat" name="caveat">警告</a></h3>

    <p>この記事で述べた大部分の機能は、Apache 1.2
    以降を使用している場合のみ利用可能です。当然ながら、もし Apache 1.2
    以降を使用してない場合、直ちにアップグレードする必要があります。
    さぁ、今それを行ないなさい。それまで待っています。
    </p>
    <hr />

    <h2><a id="settingvariables"
    name="settingvariables">変数を誓瀋蠅垢鹿畩鹿莢
腫昭竢粤杖續鹿竢粤ディレクティブを使用して、
    後で使用するために変数を誓瀋蠅垢襪海箸任泙后
これは後の誓睫誓で必要になるので、ここでそれについて述べています。
    文法は以下のとおりです:</p>
<pre>
        &lt;!--#set var="name" value="Rich" --&gt;
</pre>

    <p>このように単純に文字どおりに誓瀋蠅垢襪海箸鵬辰─
例えば環境変数や前の記事で述べた変数
    (例えば <code>LAST_MODIFIED</code>のような)
    を含む他のあらゆる変数を値を誓瀋蠅垢襪里忙藩僂垢襪海箸任泙后
変数名の前にドル記号 ($) を使用することで、
    それがリテラル文字列ではなくて変数であることを示します。</p>
<pre>
        &lt;!--#set var="modified" value="$LAST_MODIFIED" --&gt;
</pre>

    <p>ドル記号 ($) を文字として変数の値に入れるには、
    バックスラッシュによってドル記号をエスケープする必要があります。
    </p>
<pre>
        &lt;!--#set var="cost" value="\$100" --&gt;
</pre>

    <p>最後になりますが、長い文字列の中に変数を置きたい場合で、
    変数名が他の文字とぶつかる可能誓△蝓
それらの文字について混乱してしまう場合、この混乱を取り除くため、
    変数名を中括弧で囲むことができます
    (これについての良い例を示すのは難しいのですが、
    おそらく分かっていただ世韻襪任靴腓ぢ。
    </p>
<pre>
        &lt;!--#set var="date" value="${DATE_LOCAL}_${DATE_GMT}" --&gt;
</pre>
    <hr />

    <h2><a id="conditionalexpressions"
    name="conditionalexpressions">条件式</a></h2>

    <p>さて、変数を持っていて、
    それらの値を誓瀋蠅靴独羈咾垢襪海箸任襪里任垢蕁
条件を表すためにそれらを使用することができます。これにより
    SSI はある種の小さなプログラミング言生譴砲覆辰討い泙后
若閼緇迴籖蜴竚綣閼緇ぢは条件を表現するために <code>if</code>,
    <code>elif</code>, <code>else</code>, <code>endif</code>
    構造を提供しています。これによって、
    一つの実際のページから複数の論斥據璽犬鮓姪棒生誓垢襪海箸任泙后鹿霈

腫ぢ条件構造は以下のとおりです:</p>
<pre>
        &lt;!--#if expr="test_condition" --&gt;
        &lt;!--#elif expr="test_condition" --&gt;
        &lt;!--#else --&gt;
        &lt;!--#endif --&gt;
</pre>

    <p><em>test_condition</em>
    はあらゆる種類の論斥羈咾鬚垢襪海箸任泙后
値を比較したり、その値が ``真'' かどうかを評価します
    (空でないなら与えられた文字列は真です)。
    利用可能な比較演算子の全てのリストについては、
    <code>mod_include</code> ドキュメンテーションを参照してくだ世気ぁ
ここでは、この構造をどう使用するかの例をいくつか示します。</p>

<p>誓瀋螢侫．ぅ襪納，旅圓魑劼靴泙瑳
腫鱚択阯黼鰺癆竏麗秩黼痺蜴鼈痺
択阯黼鰺癆竏麗秩黼喇侮鴈續祷韭闥纈
鹿頏緇

腫ぢこれはクライアントが Macintosh
    上でインターネットエクスプローラが動いている場合、環境変数
    ``Mac'' と ``InternetExplorer'' を真と誓瀋蠅靴泙后鹿霈

腫ぢ次に、SSI が可能になったドキュメントで以下を行ないます:</p>

<pre>
        &lt;!--#if expr="${Mac} &amp;&amp; ${InternetExplorer}" --&gt;
        Apologetic text goes here
        &lt;!--#else --&gt;
        Cool JavaScript code goes here
        &lt;!--#endif --&gt;
</pre>

    <p>Mac 上の IE に対して何か思うところがあるわけでありません。
    他では実行できているいくつかの JavaScript を Mac 上の IE
    で実行させるのに、誓莉疑峩賚靴燭箸いΔ誓けのことです。
    上の例はその暫定的な対処方法です。</p>

    <p>他のどんな変数 (あなたが定義するもの、
    または普通の環境変数のいずれか) も、条件文に使用することができます。
    Apache は <code>SetEnvIf</code> ディレクティブや他の関連
    ディレクティブを使用して環境変数を誓瀋蠅垢襪海箸任泙后
この機能により、CGI
    に頼ることなくかなり複雑な動的なことをさせることができます。</p>
    <hr />

    <h2><a id="conclusion" name="conclusion">終わりに</a></h2>

    <p>SSI は確かに CGI
    や動的なウェブページを誓言成する他の技術に代わるものではありません。
    しかし、たくさんの余分な作業をせずに、
    少量の動的なコンテンツを加えるにはすぐれた方法です。</p>
  </body>
</html>
@


1.6
log
@merge apache 1.3.29 and mod_ssl 2.8.16
ok brad@@
@
text
@@


1.5
log
@merge
@
text
@d10 1
a10 1
  <!-- English revision: 1.11 -->
a114 5
    <p>この文書は最初、Apache Today (http://www.apachetoday.com/)
    に三回の連載記事として掲載されました。ここでは、ApcheToday と
    Internet.com との協定により載せています。
    </p>

d147 4
a150 2
    <p>サーバで SSI を許可するには、<code>httpd.conf</code>
    ファイルまたは <code>.htaccess</code>
@


1.4
log
@merge apache 1.3.27
@
text
@d109 1
a109 1
         <a href="../mod/mod_setenvif.html#BrowserBatchBoCase"
@


1.3
log
@fix half baked abortion of a merge to 1.3.23 and take
tree to apache-1.3.24+mod+ssl2.8.8
@
text
@d10 1
a10 1
  <!-- English revision: 1.9 -->
d160 6
a165 1
    ということを Apache に伝えます。</p>
d328 1
a328 1
    <code>ctime</code> で検索してみてくだ世気ぁＪ庫，脇韻犬任后鹿霈


窺跫請鞜竏窺凱桶閼燗鼬辣鱧
絶欝
甕臼
次掴痴捐挽楊嫗棉↓彝誰堋塒凱鍋釶豁裏取貍
取縺箴
儒蜚跂樵鞜竏チュートリアル: Server Side Includes 入門</title>
<!-- link rev="made" href="mailto:rbowen@@rcbowen.com" -->
</head>
<!-- English revision: 1.7 -->
<!-- Background white, links blue (unvisited), navy (visited), red (active) -->
<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#000080"
alink="#FF0000">
    <div align="CENTER">
a21 113
<h1 align="CENTER">Apache チュートリアル: Server Side Includes 入門</h1>

<a name="__index__"></a> <!-- INDEX BEGIN -->
 

<ul>
<li><a href="#apachetutorial:introductiontoserversideincludes">Apache
 チュートリアル: Server Side Includes 入門</a></li>

<li><a href="#whataressi">SSI とは?</a></li>

<li><a href="#configuringyourservertopermitssi">SSI を許可するための
サーバの誓瀋鹿畩鹿跚
殊蘊釈鱚羹■矚皷笂皷粡鱚笏蝟纉⊂基本的な SSI ディレクティブ</a>

<ul>
  <li><a href="#today'sdate">今日の日付</a></li>

  <li><a href="#modificationdateofthefile">ファイルの変更日</a></li>

  <li><a href="#includingtheresultsofacgiprogram">CGI プログラムの結果を
取り込む</a></li>
</ul>
</li>

<li><a href="#additionalexamples">追加の例</a>

<ul>
<li><a href="#whenwasthisdocumentmodified">いつこのドキュメントは
修誓気気譴燭里深昭蘊

殊蘊釈鱚羹■蜴竚蜴艨齡瘤籬鰾肬阡纈⊂標準のフッタを挿入する</a></li>

<li><a href="#whatelsecaniconfig">他に何が誓瀋蠅任襪里深昭蘊

殊蘊釈鱚羹■纔繝蜴艫闕轣鈔鵞ぢコマンドの実行</a></li>
</ul>
</li>

<li><a href="#advancedssitechniques">高度な SSI テクニック</a>

<ul>
<li><a href="#settingvariables">変数を誓瀋蠅垢鹿畩鹿跚
殊蘊釈鱚羹■竢鈔蜚蜿釶跂鱚齠蜿銖⊂条件式</a></li>
</ul>
</li>

<li><a href="#conclusion">終わりに</a></li>
</ul>

<!-- INDEX END -->
<hr>
<h2><a name=
"apachetutorial:introductiontoserversideincludes">Apache
チュートリアル: Server Side Includes 入門</a></h2>

<table border="1">
<tr>
<td valign="top"><strong>関連モジュール</strong><br>
<br>
 <a href="../mod/mod_include.html">mod_include</a><br>
<a href="../mod/mod_cgi.html">mod_cgi</a><br>
<a href="../mod/mod_expires.html">mod_expires</a><br>
 </td>
<td valign="top"><strong>関連ディレクティブ</strong><br>
<br>
 <a href="../mod/core.html#options">Options</a><br>
<a href="../mod/mod_include.html#xbithack">XBitHack</a><br>
<a href="../mod/mod_mime.html#addtype">AddType</a><br>
<a href="../mod/mod_mime.html#addhandler">AddHandler</a><br>
<a href=
"../mod/mod_setenvif.html#BrowserMatchNoCase">BrowserMatchNoCase</a><br>

 </td>
</tr>
</table>

<p>この文書は最初、Apache Today (http://www.apachetoday.com/) に三回の連載記事として掲載されました。
ここでは、ApcheToday と Internet.com との協定により載せています。</p>

<p>この記事は、通常は単に SSI と呼ばれる Server Side Includes を
扱います。この記事においては、サーバでの SSI を許可するための誓瀋蠅函
現在の HTML ページに動的なコンテンツを加えるためのいくつかの基本的な
SSI 技術を紹介します。</p>

<p>記事の後半では、SSI ディレクティブで
SSI と共に実行することができる条件文のような幾分高度な事柄に
ついて述べています。</p>

<hr>
<h2><a name="whataressi">SSI とは?</a></h2>

<p>SSI (Server Side Includes) は、HTML ページ中に配置されるディレクティブであり、
サーバでページを提供する時に評価されます。
SSI は、CGI プログラムやその他の動的な技術で全てのページを提供
せずに、動的に誓言成されたコンテンツを現在の HTML ページに
加えます。</p>

<p>どういう場合に SSI を使い、どういう場合にプログラムでページを完全に誓言成するか
は、ページのうちどの程度が誓電任△蝓▲據璽犬鷆，気譴襪燭咾
再計算する必要がどの程度あるかで通常は決定します。SSI は現在時刻のような
小さい情報を加えるにはうってつけの方法です。
しかし、そのページのほとんどの部分が提供時に誓言成される場合は、
他の方法を探す必要があります。</p>

<hr>
<h2><a name="configuringyourservertopermitssi">SSI を許可するための
サーバの誓瀋鹿畩鹿莢
腫ぢサーバで SSI 許可するには、<code>httpd.conf</code> ファイル
または <code>.htaccess</code> ファイルに次のディレクティブを指定する必要があります:</p>
d23 132
d159 2
a160 8
<p>この指定は、ファイルを SSI ディレクティブで解誓呂気擦襪海箸魑弔垢
ということを Apache に伝えます。</p>

<p>全てのファイルが SSI ディレクティブで解誓呂気譴襪箸いΔ錣韻任呂△蠅泙擦鵝
どのファイルが解誓呂気譴襪鞜竏に伝える必要があります。これを
行なうには二つ方法があります。次のディレクティブを使うことで、
例えば <code>.shtml</code> のような特別なファイル拡張子を持つファイルを
解誓呂垢襪茲鞜竏に伝えることができます:</p>
d162 5
d172 5
a176 6
<p>この方法の欠点世蓮△發係什澆離據璽犬喇ディレクティブを加えたい場合、それらのディレクティブが実行される
ように <code>.shtml</code> 拡張子にするため、そのページの名前と、
そのページへの全てのリンクを変更しなければならないことです。</p>

<p>もう一つの方法は、<code>XBitHack</code> ディレクティブを使用することです:</p>
d178 2
d184 5
a188 6
<p><code>XBitHack</code> は、ファイルの実行ビットが立っている場合、
SSI ディレクティブにより解誓呂垢襪海箸鞜竏に伝えます。従って、
SSI ディレクティブを現在のページに加えるためには、ファイル名を変更しなくてもよく、
単に <code>chmod</code> を使用してファイルを実行可能にする
だ世韻悩僂澆泙后鹿霈

箟抗甓乙腫ぢ行なうべきではないことに関する短いコメント。時々誰かが、
全ての <code>.html</code> ファイルを SSI で解誓呂垢襪茲鞜竏に伝えれば、
わざわざ <code>.shtml</code> というファイル名にする必要がないといって
薦めるのを見ることでしょう。こういう人たちは、おそらく <code>XBitHack</code>
について聞いたことがないのでしょう。この方法について注意することは、
たとえ SSI ディレクティブを全く含まない場合でも、Apache がクライアントに
送る全てのファイルを最後まで読み込ませることになります。
この方法はかなり処理を遅くするものであり、良くないアイデアです。</p>

<p>もちろん、Windows ではそのような実行ビットをセットするようなものは
ありませんのでオプションが少し誓造気譴討い泙后鹿霈

腫ぢデフォルトの誓瀋蠅任蓮草痺蒹ぢは SSI ページについて最終変更時刻や
コンテンツの長さを HTTP ヘッダ世冒蠅泙擦鵝
動的なコンテンツであるため、それらの値を計算するのが難しいからです。
このためドキュメントが
キャッシュされなくなり、結果としてクライアントの誓修
遅くなったように感じさせることになります。
これを解決する方法が二つあります:</p>

<ol> 

<li><code>XBitHack Full</code> 誓瀋蠅鮖藩僂垢襦海寮設定により、もともと要求された
ファイルの時刻を参照し、読み込まれるファイルの変更時刻を
無視して最終変更時刻を決定するよう Apache に伝えます。</li>

<li><a href="../mod/mod_expires.html">mod_expires</a> で提供されているディレクティブを使用して、
ファイルが無効になる時刻を明声┐靴泙后
これにより、ブラウザとプロキシにキャッシュが有効であることを通知します。</li>

</ol>
d227 2
a228 4
<hr>
<h2><a name="basicssidirectives">基本的な SSI ディレクティブ</a></h2>

<p>SSI ディレクティブは以下の文法で記述します:</p>
d230 1
d235 10
a244 10
<p>HTML のコメントのような書式をしているので、もし SSI を
誓気靴虻邁椎修砲靴覆韻譴弌▲屮薀Ε兇呂修譴鯡技襪垢襪任靴腓Α靴掘
挽楊ぢソース中では見えます。もし SSI を誓気靴設定したなら、
ディレクティブはその結果と置き換えられます。</p>

<p>element はたくさんあるものから一つ指定することができます。
指定できるものの大多数については、次回もう少し詳しく誓睫誓します。
ここでは、SSI で行なうことができる例をいくつか示します。</p>

<h3><a name="today'sdate">今日の日付</a></h3>
d246 1
a250 8
<p><code>echo</code> 要素は単に変数の値を出力します。CGI プログラムに
利用可能な環境変数の全てのセットを含む多くの標準変数があります。
また、<code>set</code> 要素を用いることで、独自の変数を定義することが
できます。</p>

<p>出力される日付の書式が好きではない場合、その書式を
修誓気垢襪燭瓩法若閼緇竢鈕蜃鹿竢粤要素に <code>timefmt</code> 属誓
使用することができます。</p>
d252 9
d266 2
a267 2
<h3><a name="modificationdateofthefile">ファイルの変更日</a></h3>

a271 1
<p>この要素も <code>timefmt</code> フォーマットの誓瀋蠅暴召い泙后鹿霈
箍軍
甓郡
取馨釈瘢綵∫釿跿粡鈑纈纉閹痺芍頏閾鱇蹉消派ぢプログラムの結果を取り込む
</a></h3>

<p>これは、全ての人のお気に入りである ``ヒットカウンタ'' のような CGI プログラムの
結果を出力する SSI のより一般的な使用のうちの一つです。</p>
d276 7
d286 1
d288 2
a289 15
<hr>
<h2><a name="additionalexamples">追加の例</a></h2>

<p>以下は、SSI を使用して HTML ドキュメントにおいてできることの
いくつかの特別な例です。</p>

<hr>
<h2><a name="whenwasthisdocumentmodified">いつこのドキュメントは修誓気気譴燭里鹿畩鹿莢
腫ぢ誓茲法▲疋絅瓮鵐箸埜紊吠儿垢気譴燭里呂い弔鬟罅璽兇膨銘里垢襪燭瓩喇ぢを使用することができることを
述べました。しかしながら、実際の方法は、いくぶん問題のままにしておきました。
HTML ドキュメントに配置された次のコードは、ページに
そのようなタイムスタンプを入れるでしょう。もちろん、上述の
ように、SSI を誓気靴虻邁椎修砲靴討廚△蠅泙后鹿霈
箍恒箜碓
甞欝
腫ぢもちろん、<code>ssi.shtml</code> の部分を実際の当該ファイル名と
置き換える必要があります。もし、あらゆるファイルに張ることが
できる一般的なコードを探しているなら、これは不便であるかもしれません。
おそらくその場合は、そうする代わりに変数 <code>LAST_MODIFIED</code>
を使用したいと考えるでしょう:</p>

d321 27
a347 24
<p><code>timefmt</code> 書式についてのより詳細については、
お好みの検索サイトに行き、<code>ctime</code> で検索してみてくだ世気ぁＪ庫，脇韻犬任后鹿霈

取鮠
取仮釈瘢綵∫釿跿粡鈑癈鈔癇粭闖鬆ぢ標準のフッタを挿入する</a></h2>

<p>もし数ページを超えるページを持つサイトを管理しているならば、
全ページに対して変項を行なうことが本当に苦痛となり得世襪海箸襪任靴腓Α
全てのページに渡ってある種の標準的な外観を維持しようと
しているならば特にそうでしょう。</p>

<p>ヘッダ世筌侫奪人僂料淨僖侫．ぅ襪鮖藩僂垢襪海箸如△海里茲Δ
更新にかかる負担を減らすことができます。一つのフッタファイルを
作誓掘△修譴竢粤冗釿跿粤鹿竢粤嗷コマンドで各ページに
入れるだ世韻悩僂澆泙后若閼緇蜴竚綣閼緇ぢ要素は、<code>file</code> 属誓
または <code>virtual</code> 属誓里い困譴鮖藩僂靴討匹離侫．ぅ襪鯀淨垢襪
決めることができます。<code>file</code> 属誓蓮弱躱カレントディレクトリからの
相対パスで示された</em>ファイルパスです。それは
/ で始まる誓簑丱侫．ぅ襯僖垢砲呂任此△泙拭△修離僖垢琉貮瑤ぢを
含むことができないことを意味します。<code>virtual</code> 属誓蓮△修蕕
より便利だ世隼廚い泙垢鷆，垢襯疋絅瓮鵐箸蕕料蠡厂ぢで指定すべきです。
それは / で始めることができますが、提供するファイルと同じサーバ上に
存在しなくてはなりません。</p>

d352 6
a357 8
<p>私は最後の二つを組み合わせて、<code>LAST_MODIFIED</code> ディレクティブを
フッタファイルの中に置くことがよくあります。
SSI ディレクティブは、挿入用のファイルに含ませたり、
挿入ファイルのネストをしたりすることができます。すなわち、
挿入用のファイルは他のファイルを再帰的に挿入することができます。</p>

<hr>
<h2><a name="whatelsecaniconfig">他に何が誓瀋蠅任襪里深昭仮
箜宜
甞彊
腫ぢ時刻書式を <code>config</code> で誓瀋蠅任襪海箸鵬辰┐董
更に二つ <code>config</code> で誓瀋蠅垢襪海箸任泙后鹿霈
箜恐
甞恭
腫ぢ通常、SSI ディレクティブで何かがうまくいかないときは、次のメッセージが
出力されます。</p>
d365 2
d371 2
a372 3
<p>このメッセージを他のものにしたい場合、
<code>config</code> 要素の <code>errmsg</code> 属誓琶儿垢垢襪海箸
できます:<p>
d378 20
a397 18
<p>おそらく、エンドユーザはこのメッセージを決して見ることはありません。
なぜなら、そのサイトが誓犬疹屬砲覆訌阿喇ぢディレクティブに関する
全ての問題を解決しているはずだ世蕕任后ぢそうですよね?)</p>

<p>そして、<code>config</code> において <code>sizefmt</code> 属誓鮖藩僂垢襪海箸如
返されるファイルサイズの書式を誓瀋蠅垢襪海箸任泙后
バイト数には <code>bytes</code> を、適当に Kb や Mb に
短縮させるには <code>abbrev</code> を指定することができます。</p>

<hr>
<h2><a name="executingcommands">コマンドの実行</a></h2>

<p>今後数ヶ月の内に、小さな CGI プログラムと SSI を使用する
記事を出したいと考えています。ここではそれとは別に、
<code>exec</code> 要素によって行なうことができることを示します。
SSI にシェル (誓騎里砲竢粤少砠遲鼈鹿竢粤ぢ。Win32 ならば DOS シェル)
を使用してコマンドを実行させることができます。下記の例では、ディレクトリ
リスト出力を行ないます。</p>
d405 1
a405 2
<p>Windows 上では、</p>

d412 38
a449 31
<p>Windows 上では、このディレクティブによっていくつかの奇妙な
書式に気づくでしょう。なぜなら <code>dir</code> の出力が
文字列 ``&lt;<code>dir</code>&gt;'' を含み、ブラウザを混乱させるからです。</P>

<p>この機能は非常に危険であり、どんなコードでも <code>exec</code> タグに
埋め込まれてしまえば実行することに注意してくだ世気ぁＮ磴┐玻ぢゲストブック '' のように、もし、ユーザがページの内容を
編集できる状況にあるならば、この機能を確実に抑誓靴討誓さい。
<code>Options</code> ディレクティブの <code>IncludesNOEXEC</code> 引数を指定することで、
SSI は許可するけれど <code>exec</code> 機能は許可しないようにすることができます。</p>

<hr>
<h2><a name="advancedssitechniques">高度な SSI テクニック</a></h2>

<p>コンテンツを出力することに加え、Apache SSI は変数を誓瀋蠅掘△修靴独羈
と条件分岐にその変数を使用できる機能を提供しています。</p>

<h3><a name="caveat">警告</a></h3>

<p>この記事で述べた大部分の機能は、Apache 1.2 以降を
使用している場合のみ利用可能です。もちろん、もし Apache 1.2 以降を
使用してない場合、直ちにアップグレードする必要があります。
さぁ、今それを行ないなさい。それまで待っています。</p>

<hr>
<h2><a name="settingvariables">変数を誓瀋蠅垢鹿畩鹿莢
腫昭竢粤杖續鹿竢粤ディレクティブを使用して、後で使用するために変数を
誓瀋蠅垢襪海箸任泙后海譴聾紊寮説明世派廚砲覆襪里如△海海
それについて述べています。文法は以下のとおりです:</p>

d454 6
a459 7
<p>このように単純に文字どおりに誓瀋蠅垢襪海箸鵬辰─
例えば環境変数や前の記事で述べた変数 (例えば <code
>LAST_MODIFIED</code> のような) を含む他のあらゆる変数を
値を誓瀋蠅垢襪里忙藩僂垢襪海箸
できます。変数名の前にドル記号 ($) を使用することで、
それがリテラル文字列ではなくて変数であることを示します。</p>

d464 3
a466 3
<p>ドル記号 ($) を文字として変数の値に入れるには、バックスラッシュによって
ドル記号をエスケープする必要があります。</p>

d471 7
a477 6
<p>最後になりますが、長い文字列の中に変数を置きたい場合で、
変数名が他の文字とぶつかる可能誓△蝓△修譴蕕諒源砲弔い
混乱してしまう場合、この混乱を取り除くため、変数名を中括弧で
囲むことができます (これについての良い例を示すのは難しいのですが、
おそらく分かっていただ世韻襪任靴腓ぢ。</P>

d481 1
d483 2
a484 9
<hr>
<h2><a name="conditionalexpressions">条件式</a></h2>

<p>さて、変数を持っていて、それらの値を誓瀋蠅靴独羈咾垢襪海箸任襪里任垢蕁
条件を表すためにそれらを使用することができます。これにより SSI は
ある種の小さなプログラミング言生譴砲覆辰討い泙后若閼緇迴籖蜴竚綣閼緇ぢは
条件を表現するために <code>if</code>, <code>elif</code>, <code>else</code>,
<code>endif</code> 構造を提供しています。これによって、一つの実際のページから
複数の論斥據璽犬鮓姪棒生誓垢襪海箸任泙后鹿霈
箚原
甦抗
腫ぢ条件構造は以下のとおりです:</p>
d495 1
d503 7
a509 5
<p><em>test_condition</em> はあらゆる種類の論斥羈咾鬚垢襪海箸任泙后
値を比較したり、その値が ``真'' かどうかを評価します (空でないなら
与えられた文字列は真です)。利用可能な比較演算子の全てのリストについては、
<code>mod_include</code> ドキュメンテーションを参照してくだ世気ぁ
ここでは、この構造をどう使用するかの例をいくつか示します。</p>
d511 1
a511 1
<p>誓瀋螢侫．ぅ襪納，旅圓魑劼靴泙瑳箋姥
甬屋
腫ぢこれはクライアントが Macintosh 上でインターネットエクスプローラが
動いている場合、環境変数 ``Mac'' と ``InternetExplorer'' を真と誓瀋蠅靴泙后鹿仂
箋臆
甬臆
腫ぢ次に、SSI が可能になったドキュメントで以下を行ないます:</p>
d532 20
a551 20
<p>Mac 上の IE に対して何か思うところがあるわけでありません。
他では実行できているいくつかの JavaScript を Mac 上の IE で
実行させるのに、誓莉疑峩賚靴燭箸いΔ誓けのことです。
上の例はその暫定的な対処方法です。</p>

<p>他のどんな変数 (あなたが定義するもの、または普通の環境変数のいずれか) も、
条件文に使用することができます。Apache は <code>SetEnvIf</code> 
ディレクティブや他の関連ディレクティブ使用して環境変数を誓瀋蠅垢襪海箸
できます。この機能により、CGI に頼ることなくかなり複雑な動的なことをさせる
ことができます。</p>

<hr>
<h2><a name="conclusion">終わりに</a></h2>

<p>SSI は確かに CGI や動的なウェブページを誓言成する他の技術に代わるもの
ではありません。しかし、
たくさんの余分な作業をせずに、少量の動的なコンテンツを加えるには
すぐれた方法です。</p>

</body>
@


1.1
log
@Apache 1.3.19+mod_ssl 2.8.1 merge - also adds shared build of mod_headers
and mod_expire
@
text
@d11 7
a17 1
<!--#include virtual="header.html" -->
@


1.1.1.1
log
@import apache 1.3.26 + mod_ssl 2.8.10
@
text
@d1 121
a121 5
<?xml version="1.0" encoding="iso-2022-jp"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
  <head>
d123 2
a124 1
    <title>Apache チュートリアル: Server Side Includes 入門</title>
a125 146
  </head>
  <!-- English revision: 1.9 -->
  <!-- Background white, links blue (unvisited), navy (visited), red (active) -->

  <body bgcolor="#ffffff" text="#000000" link="#0000ff"
  vlink="#000080" alink="#ff0000">
        <div align="CENTER">
      <img src="../images/sub.gif" alt="[APACHE DOCUMENTATION]" /> 

      <h3>Apache HTTP Server Version 1.3</h3>
    </div>



    <h1 align="center">Apache チュートリアル:
    Server Side Includes 入門</h1>
    <a id="__index__" name="__index__"></a> <!-- INDEX BEGIN -->


    <ul>
      <li><a
      href="#apachetutorial:introductiontoserversideincludes">Apache
      チュートリアル: Server Side Includes 入門</a></li>

      <li><a href="#whataressi">SSI とは?</a></li>

      <li><a href="#configuringyourservertopermitssi">SSI
      を許可するためのサーバの誓瀋鹿畩鹿跚
殊蘊
釈鱚羹■矚皷笂皷粡鱚笏蝟纉⊂基本的な SSI ディレクティブ</a>

        <ul>
          <li><a href="#today'sdate">今日の日付</a></li>

          <li><a href="#modificationdateofthefile">ファイルの変更日</a></li>

          <li><a href="#includingtheresultsofacgiprogram">CGI
          プログラムの結果を取り込む</a></li>
        </ul>
      </li>


      <li>
        <a href="#additionalexamples">追加の例</a>

        <ul>
          <li><a href="#whenwasthisdocumentmodified"
          >いつこのドキュメントは修誓気気譴燭里深昭蘊

殊蘊釈鱚羹■蜴竚蜴艨齡瘤籬鰾肬阡纈ぢ標準のフッタを挿入する</a></li>

          <li><a href="#whatelsecaniconfig"
          >他に何が誓瀋蠅任襪里深昭蘊

殊蘊釈鱚羹■纔繝蜴艫闕轣鈔鵞ぢコマンドの実行</a>
          </li>
        </ul>
      </li>

      <li>
        <a href="#advancedssitechniques">高度な SSI テクニック</a>


        <ul>
          <li><a href="#settingvariables">変数を誓瀋蠅垢鹿畩
鹿跚
殊蘊釈鱚羹■竢鈔蜚蜿釶跂鱚齠蜿銖⊂条件式</a></li>
        </ul>
      </li>


      <li><a href="#conclusion">終わりに</a></li>
    </ul>
    <!-- INDEX END -->
    <hr />

    <h2><a id="apachetutorial:introductiontoserversideincludes"
    name="apachetutorial:introductiontoserversideincludes">Apache
    チュートリアル: Server Side Includes 入門</a></h2>

    <table border="1">
      <tr>
        <td valign="top"><strong>関連モジュール</strong><br />
         <br />
         <a href="../mod/mod_include.html">mod_include</a><br />
         <a href="../mod/mod_cgi.html">mod_cgi</a><br />
         <a href="../mod/mod_expires.html">mod_expires</a><br />
         </td>

        <td valign="top"><strong>関連ディレクティブ</strong><br />
         <br />
         <a href="../mod/core.html#options">Options</a><br />
         <a
        href="../mod/mod_include.html#xbithack">XBitHack</a><br />
         <a href="../mod/mod_mime.html#addtype">AddType</a><br />
         <a
        href="../mod/mod_mime.html#addhandler">AddHandler</a><br />
         <a href="../mod/mod_setenvif.html#BrowserBatchBoCase"
        >BrowserMatchNoCase</a><br />
         </td>
      </tr>
    </table>

    <p>この文書は最初、Apache Today (http://www.apachetoday.com/)
    に三回の連載記事として掲載されました。ここでは、ApcheToday と
    Internet.com との協定により載せています。
    </p>

    <p>この記事は、通常は単に SSI と呼ばれる Server Side Includes
    を扱います。この記事においては、サーバでの SSI を許可するための誓瀋蠅函
現在の HTML ページに動的なコンテンツを加えるためのいくつかの基本的な
    SSI 技術を紹介します。</p>

    <p>記事の後半では、SSI ディレクティブで SSI
    と共に実行することができる条件文のような
    幾分高度な事柄について述べています。</p>
    <hr />

    <h2><a id="whataressi" name="whataressi">SSI とは?</a></h2>

    <p>SSI (Server Side Includes) は、HTML
    ページ中に配置されるディレクティブであり、
    サーバでページを提供する時に評価されます。SSI は、CGI
    プログラムやその他の動的な技術で全てのページを提供せずに、
    動的に誓言成されたコンテンツを現在の HTML ページに加えます。</p>

    <p>どういう場合に SSI を使い、どういう場合にプログラムで
    ページを完全に誓言成するかは、ページのうちどの程度が誓電任△蝓
ページが提供されるたびに再計算する必要がどの程度あるかで通常は決定します。
    SSI は現在時刻のような小さい情報を加えるにはうってつけの方法です。
    しかし、そのページのほとんどの部分が提供時に誓言成される場合は、
    他の方法を探す必要があります。
    </p>
    <hr />


    <h2><a id="configuringyourservertopermitssi"
    name="configuringyourservertopermitssi">SSI
    を許可するためのサーバの誓瀋鹿畩鹿莢
腫ぢサーバで SSI を許可するには、<code>httpd.conf</code>
    ファイルまたは <code>.htaccess</code>
    ファイルに次のディレクティブを指定する必要があります:</p>
d130 8
a137 2
    <p>この指定は、ファイルを SSI ディレクティブで解誓呂気擦襪海箸魑弔垢
ということを Apache に伝えます。</p>
a138 5
    <p>全てのファイルが SSI ディレクティブで解誓呂気譴襪箸いΔ錣韻任呂△蠅泙擦鵝
どのファイルが解誓呂気譴襪鞜竏に伝える必要があります。
    これを行なうには二つ方法があります。次のディレクティブを使うことで、
    例えば <code>.shtml</code> のような特別なファイル拡張子を持つ
    ファイルを解誓呂垢襪茲鞜竏に伝えることができます:</p>
d144 6
a149 5
    <p>この方法の欠点世蓮△發係什澆離據璽犬喇
ディレクティブを加えたい場合、それらのディレクティブが実行されるように
    <code>.shtml</code> 拡張子にするため、そのページの名前と、
    そのページへの全てのリンクを変更しなければならないことです。
    </p>
a150 2
    <p>もう一つの方法は、<code>XBitHack</code>
    ディレクティブを使用することです:</p>
d155 6
a160 5
    <p><code>XBitHack</code> は、ファイルの実行ビットが立っている場合、
    SSI ディレクティブにより解誓呂垢襪海箸鞜竏に伝えます。
    従って、SSI ディレクティブを現在のページに加えるためには、
    ファイル名を変更しなくてもよく、単に <code>chmod</code>
    を使用してファイルを実行可能にするだ世韻悩僂澆泙后鹿霈
箟教甕晃腫ぢ行なうべきではないことに関する短いコメント。時々誰かが、全ての
    <code>.html</code> ファイルを SSI で解誓呂垢襪茲鞜竏に伝えれば、
    わざわざ <code>.shtml</code> というファイル名にする必要がないといって
    薦めるのを見ることでしょう。こういう人たちは、おそらく
    <code>XBitHack</code> について聞いたことがないのでしょう。
    この方法について注意することは、たとえ SSI
    ディレクティブを全く含まない場合でも、Apache がクライアントに
    送る全てのファイルを最後まで読み込ませることになります。
    この方法はかなり処理を遅くするものであり、良くないアイデアです。</p>

    <p>もちろん、Windows ではそのような実行ビットをセット
    するようなものはありませんのでオプションが少し誓造気譴討い泙后鹿霈

腫ぢデフォルトの誓瀋蠅任蓮草痺蒹ぢは SSI ページについて最終変更時刻や
    コンテンツの長さを HTTP ヘッダ世冒蠅泙擦鵝
動的なコンテンツであるため、それらの値を計算するのが難しいからです。
    このためドキュメントがキャッシュされなくなり、
    結果としてクライアントの誓修戮覆辰燭茲Δ亡兇犬気擦襪海箸砲覆蠅泙后
これを解決する方法が二つあります:</p>

    <ol> 
      <li><code>XBitHack Full</code> 誓瀋蠅鮖藩僂垢襦
この誓瀋蠅砲茲蝓△發箸發藩弋瓩気譴織侫．ぅ襪了錣鮖仮箸掘
読み込まれるファイルの変更時刻を無視して最終変更時刻を決定するよう
      Apache に伝えます。</li>

      <li><a href="../mod/mod_expires.html">mod_expires</a>
      で提供されているディレクティブを使用して、
      ファイルが無効になる時刻を明声┐靴泙后海譴砲茲蝓
ブラウザとプロキシにキャッシュが有効であることを通知します。
      </li>
    </ol>
    <hr />
d200 1
a200 2
    <h2><a id="basicssidirectives" name="basicssidirectives">基本的な
    SSI ディレクティブ</a></h2>
a201 1
    <p>SSI ディレクティブは以下の文法で記述します:</p>
d206 10
a215 10
    <p>HTML のコメントのような書式をしているので、もし SSI
    を誓気靴虻邁椎修砲靴覆韻譴弌▲屮薀Ε兇呂修譴鯡技襪垢襪任靴腓Α
しかし、HTML ソース中では見えます。もし SSI を誓気靴設定したなら、
    ディレクティブはその結果と置き換えられます。
    </p>

    <p>element はたくさんあるものから一つ指定することができます。
    指定できるものの大多数については、次回もう少し詳しく誓睫誓します。
    ここでは、SSI で行なうことができる例をいくつか示します。
    </p>
a216 1
    <h3><a id="todaysdate" name="todaysdate">今日の日付</a></h3>
d221 8
a229 9
    <p><code>echo</code> 要素は単に変数の値を出力します。
    CGI プログラムに利用可能な環境変数の全ての
    セットを含む多くの標準変数があります。また、<code>set</code>
    要素を用いることで、独自の変数を定義することができます。
    </p>

    <p>出力される日付の書式が好きではない場合、その書式を修誓気垢襪燭瓩法
若閼緇竢鈕蜃鹿竢粤要素に <code>timefmt</code>
    属誓鮖藩僂垢襪海箸任泙后鹿霈
箍概
甓涯
取馨釈篏閼蜀蜒癆蜿鈔癆繽胄蒹肅跂釶辣就迴粡肅竅闔籬閹繙蛹紜ぢファイルの変更日</a></h3>
d241 4
d246 2
a247 2
    <p>この要素も <code>timefmt</code>
    フォーマットの誓瀋蠅暴召い泙后鹿霈
甓憾
取馨釈瘢綵∫釿跿粡鈑纈纉閹痺芍頏閾鱇蹉
蜆就蜴竚蜴苳蒹鱚齦踉齒聲竍蜷鳫苒瘢⊂断プログラムの結果を取り込む</a></h3>

    <p>これは、全ての人のお気に入りである ``ヒットカウンタ'' のような
    CGI プログラムの結果を出力する SSI
    のより一般的な使用のうちの一つです。</p>
a251 1
    <hr />
d253 15
a267 2
    <h2><a id="additionalexamples"
    name="additionalexamples">追加の例</a></h2>
a268 14
    <p>以下は、SSI を使用して HTML
   ドキュメントにおいてできることのいくつかの特別な例です。</p>
    <hr />

    <h2><a name="whenwasthisdocumentmodified"
    id="whenwasthisdocumentmodified"
    >いつこのドキュメントは修誓気気譴燭里深昭仮

腫ぢ誓茲法▲疋絅瓮鵐箸埜紊吠儿垢気譴燭里呂い弔覆里
ユーザに通知するために SSI を使用することができることを述べました。
    しかしながら、実際の方法は、いくぶん問題のままにしておきました。
    HTML ドキュメントに配置された次のコードは、ページにそのような
    タイムスタンプを入れるでしょう。もちろん、上述のように、
    SSI を誓気靴虻邁椎修砲靴討廚△蠅泙后鹿霈
箍郡
甓傾
腫ぢもちろん、<code>ssi.shtml</code>
    の部分を実際の当該ファイル名と置き換える必要があります。
    もし、あらゆるファイルに張ることができる一般的なコードを探しているなら、
    これは不便であるかもしれません。おそらくその場合は、
    そうする代わりに変数 <code>LAST_MODIFIED</code>
    を使用したいと考えるでしょう:</p>
d285 24
a308 27
    <p><code>timefmt</code>
    書式についてのより詳細については、お好みの検索サイトに行き、
    <code>ctime</code> で検索してみてくだ世気ぁＪ庫，脇韻犬任后鹿霈
取

取仮釈篏∫釿跿粡鈑癈鈔癇粭闖鬆
釶辣就蜴竚蜴艨齡瘤籬鰾肬阡纈⊂標準のフッタを挿入する</a></h2>


    <p>もし数ページを超えるページを持つサイトを管理しているならば、
    全ページに対して変更を行なうことが本当に苦痛となり得世襪海箸
分かるでしょう。全てのページに渡ってある種の標準的な外観を
    維持しようとしているならば特にそうでしょう。</p>

    <p>ヘッダ世筌侫奪人僂料淨僖侫．ぅ襪鮖藩僂垢襪海箸如
このような更新にかかる負担を減らすことができます。
    一つのフッタファイルを作誓掘△修譴竢粤冗釿跿粤鹿竢粤嗷コマンドで各ページに入れるだ世韻悩僂澆泙后若閼緇蜴竚綣閼緇
要素は、<code>file</code> 属誓泙燭竢粤畳蜥瘡鹿竢粤属誓里い困譴鮖藩僂靴討匹離侫．ぅ襪鯀淨垢襪魴茲瓩襪海箸任泙后
若閼緇肅跂鹿竢粤属誓蓮
弱躱カレントディレクトリからの相対パスで示された</em>ファイルパスです。
    それは / で始まる誓簑丱侫．ぅ襯僖垢砲呂任此△泙拭△修離僖垢琉貮瑤
を含むことができないことを意味します。<code>virtual</code>
    属誓蓮△修蕕茲衒慷誓と思いますが、提供するドキュメントからの相対
    URL で指定すべきです。それは / で始めることができますが、
    提供するファイルと同じサーバ上に存在しなくてはなりません。</p>
d313 8
a320 6
    <p>私は最後の二つを組み合わせて、<code>LAST_MODIFIED</code>
    ディレクティブをフッタファイルの中に置くことがよくあります。
    SSI ディレクティブは、挿入用のファイルに含ませたり、
    挿入ファイルのネストをしたりすることができます。すなわち、
    挿入用のファイルは他のファイルを再帰的に挿入することができます。</p>
    <hr />
d322 2
a323 2
    <h2><a name="whatelsecaniconfig"
    id="whatelsecaniconfig">他に何が誓瀋蠅任襪里深昭仮
箜乙
甞俺
腫ぢ時刻書式を <code>config</code> で誓瀋蠅任襪海箸鵬辰┐董
更に二つ <code>config</code> で誓瀋蠅垢襪海箸任泙后鹿霈
甞卸
腫ぢ通常、SSI ディレクティブで何かがうまくいかないときは、
    次のメッセージが出力されます。</p>
d332 3
a334 2
    <p>このメッセージを他のものにしたい場合、<code>config</code>
    要素の <code>errmsg</code> 属誓琶儿垢垢襪海箸任泙瑳箜完甞儀腫ぢおそらく、エンドユーザはこのメッセージを決して見ることはありません。
    なぜなら、そのサイトが誓犬疹屬砲覆訌阿喇ぢディレクティブに関する
    全ての問題を解決しているはずだ世蕕任后ぢそうですよね?)</p>

    <p>そして、<code>config</code> において <code>sizefmt</code>
    属誓鮖藩僂垢襪海箸如
返されるファイルサイズの書式を誓瀋蠅垢襪海箸任泙后
バイト数には <code>bytes</code> を、適当に Kb や Mb
    に短縮させるには <code>abbrev</code> を指定することができます。</p>
    <hr />

    <h2><a id="executingcommands"
    name="executingcommands">コマンドの実行</a></h2>

    <p>今後数ヶ月のうちに、小さな CGI プログラムと SSI
    を使用する記事を出したいと考えています。ここではそれとは別に、
    <code>exec</code> 要素によって行なうことができることを示します。
    SSI にシェル (誓騎里砲竢粤少砠遲鼈鹿竢粤ぢ。Win32 ならば DOS シェル)
    を使用してコマンドを実行させることができます。
    下記の例では、ディレクトリリスト出力を行ないます。</p>
d365 2
a366 1
    <p>Windows 上では、</p>
d373 31
a403 38
    <p>Windows 上では、このディレクティブによっていくつかの奇妙な
    書式に気づくでしょう。なぜなら <code>dir</code> の出力が文字列
    ``&lt;<code>dir</code>&gt;'' を含み、ブラウザを混乱させるからです。
    </p>

    <p>この機能は非常に危険であり、どんなコードでも <code>exec</code>
    タグに埋め込まれてしまえば実行することに注意してくだ世気ぁＮ磴┐
玻ぢゲストブック '' のように、もし、
    ユーザがページの内容を編集できる状況にあるならば、
    この機能を確実に抑誓靴討誓さい。<code>Options</code>
    ディレクティブの <code>IncludesNOEXEC</code> 引数を指定することで、
    SSI は許可するけれど <code>exec</code>
    機能は許可しないようにすることができます。</p>
    <hr />

    <h2><a id="advancedssitechniques"
    name="advancedssitechniques">高度な SSI テクニック</a></h2>

    <p>コンテンツを出力することに加え、Apache SSI は変数を誓瀋蠅掘
そして比較と条件分岐にその変数を使用できる機能を提供しています。
    </p>

    <h3><a id="caveat" name="caveat">警告</a></h3>

    <p>この記事で述べた大部分の機能は、Apache 1.2
    以降を使用している場合のみ利用可能です。当然ながら、もし Apache 1.2
    以降を使用してない場合、直ちにアップグレードする必要があります。
    さぁ、今それを行ないなさい。それまで待っています。
    </p>
    <hr />

    <h2><a id="settingvariables"
    name="settingvariables">変数を誓瀋蠅垢鹿畩鹿莢
腫昭竢粤杖續鹿竢粤ディレクティブを使用して、
    後で使用するために変数を誓瀋蠅垢襪海箸任泙后
これは後の誓睫誓で必要になるので、ここでそれについて述べています。
    文法は以下のとおりです:</p>
d408 7
a414 6
    <p>このように単純に文字どおりに誓瀋蠅垢襪海箸鵬辰─
例えば環境変数や前の記事で述べた変数
    (例えば <code>LAST_MODIFIED</code>のような)
    を含む他のあらゆる変数を値を誓瀋蠅垢襪里忙藩僂垢襪海箸任泙后
変数名の前にドル記号 ($) を使用することで、
    それがリテラル文字列ではなくて変数であることを示します。</p>
d419 3
a421 3
    <p>ドル記号 ($) を文字として変数の値に入れるには、
    バックスラッシュによってドル記号をエスケープする必要があります。
    </p>
d426 6
a431 7
    <p>最後になりますが、長い文字列の中に変数を置きたい場合で、
    変数名が他の文字とぶつかる可能誓△蝓
それらの文字について混乱してしまう場合、この混乱を取り除くため、
    変数名を中括弧で囲むことができます
    (これについての良い例を示すのは難しいのですが、
    おそらく分かっていただ世韻襪任靴腓ぢ。
    </p>
a434 1
    <hr />
d436 9
a444 2
    <h2><a id="conditionalexpressions"
    name="conditionalexpressions">条件式</a></h2>
d446 1
a446 8
    <p>さて、変数を持っていて、
    それらの値を誓瀋蠅靴独羈咾垢襪海箸任襪里任垢蕁
条件を表すためにそれらを使用することができます。これにより
    SSI はある種の小さなプログラミング言生譴砲覆辰討い泙后
若閼緇迴籖蜴竚綣閼緇ぢは条件を表現するために <code>if</code>,
    <code>elif</code>, <code>else</code>, <code>endif</code>
    構造を提供しています。これによって、
    一つの実際のページから複数の論斥據璽犬鮓姪棒生誓垢襪海箸任泙后鹿霈
甦慣
腫ぢ条件構造は以下のとおりです:</p>
d455 5
a459 7
    <p><em>test_condition</em>
    はあらゆる種類の論斥羈咾鬚垢襪海箸任泙后
値を比較したり、その値が ``真'' かどうかを評価します
    (空でないなら与えられた文字列は真です)。
    利用可能な比較演算子の全てのリストについては、
    <code>mod_include</code> ドキュメンテーションを参照してくだ世気ぁ
ここでは、この構造をどう使用するかの例をいくつか示します。</p>
d461 1
a461 1
<p>誓瀋螢侫．ぅ襪納，旅圓魑劼靴泙瑳箚狂
甦狭
腫ぢこれはクライアントが Macintosh
    上でインターネットエクスプローラが動いている場合、環境変数
    ``Mac'' と ``InternetExplorer'' を真と誓瀋蠅靴泙后鹿霈
箚訓
甦訓
腫ぢ次に、SSI が可能になったドキュメントで以下を行ないます:</p>
d481 20
a500 20
    <p>Mac 上の IE に対して何か思うところがあるわけでありません。
    他では実行できているいくつかの JavaScript を Mac 上の IE
    で実行させるのに、誓莉疑峩賚靴燭箸いΔ誓けのことです。
    上の例はその暫定的な対処方法です。</p>

    <p>他のどんな変数 (あなたが定義するもの、
    または普通の環境変数のいずれか) も、条件文に使用することができます。
    Apache は <code>SetEnvIf</code> ディレクティブや他の関連
    ディレクティブを使用して環境変数を誓瀋蠅垢襪海箸任泙后
この機能により、CGI
    に頼ることなくかなり複雑な動的なことをさせることができます。</p>
    <hr />

    <h2><a id="conclusion" name="conclusion">終わりに</a></h2>

    <p>SSI は確かに CGI
    や動的なウェブページを誓言成する他の技術に代わるものではありません。
    しかし、たくさんの余分な作業をせずに、
    少量の動的なコンテンツを加えるにはすぐれた方法です。</p>
  </body>
@


1.1.1.2
log
@import apache 1.3.27 and mod_ssl 2.8.11
@
text
@d10 1
a10 1
  <!-- English revision: 1.11 -->
d160 1
a160 6
    ということを Apache に伝えます。
    ほとんどの誓瀋蠅任呂澆い鮠綵颪任襦∧瑤
釈鱚羹〓迴箝竢鱚譯關闔鵞章頸蜿銖鹿畩ぢがあることに
    注意してくだ世気ぁ修蕕∪設定が最後に評価されることを
    保証されるために、SSI を使用したいディレクトリに <code>Options</code>
    ディレクティブを適用する必要があるでしょう。</p>
d323 1
a323 1
    <code>strftime</code> で検索してみてくだ世気ぁＪ庫，脇韻犬任后鹿霈


窺窺窺跫千逅闥瘰痺蒹瘤迴籖齠荻軒欝

絶碓甕姐
蓿繙就閼閼燗續緕罧蔗迪ｂ鳫纈轣蓆閭癈紜


窺窺窺跫千逅闥草痺蒹瘤迴籖齠荻軒蔚

絶碓
甕次鈑跚鼈纐蜩蜿邵箟欝
箟飢
甕騎
腫ぢサーバで SSI を許可するには、<a
    href="../mod/mod_include.html">mod_include</a>
    をインストール、有効化する必要があります。さらに、
    <code>httpd.conf</code> ファイルまたは <code>.htaccess</code>
@


