head	1.17;
access;
symbols;
locks; strict;
comment	@# @;


1.17
date	2014.04.01.17.03.08;	author nick;	state dead;
branches;
next	1.16;

1.16
date	2012.11.08.08.49.02;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2012.11.04.08.15.48;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2006.09.30.08.55.04;	author jufi;	state dead;
branches;
next	1.13;

1.13
date	2004.01.16.20.30.20;	author jufi;	state Exp;
branches;
next	1.12;

1.12
date	2003.11.09.23.58.56;	author horacio;	state Exp;
branches;
next	1.11;

1.11
date	2003.11.03.14.19.31;	author horacio;	state Exp;
branches;
next	1.10;

1.10
date	2003.10.30.18.00.22;	author horacio;	state Exp;
branches;
next	1.9;

1.9
date	2002.09.10.17.32.02;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2002.09.09.11.54.47;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2002.08.18.04.43.28;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2002.07.11.16.25.19;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2002.05.24.07.10.54;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.22.19.09.00;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2001.08.29.17.58.44;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2001.05.25.22.22.44;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2001.05.11.06.28.56;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.17
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
Thanks to all those that did the translation work, and my appologies to
those who had to translate my writing!
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>11 - X Window systÃ©m</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rev="made" href="mailto:www@@openbsd.org">
<meta name="resource-type" content="document">
<meta name="description" content="OpenBSD FAQ 11 - The X Window System">
<meta name="keywords" content="openbsd,faq11">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1998-2012 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">

<a href="../../cs/index.html">
<img alt="[OpenBSD]" src="../../images/smalltitle.gif" border="0" height="30" width="141">    
</a>
<p>
<font color="#0000e0">
<a href="index.html">[FAQ Index]</a>
<a href="../faq10.html">[Do sekce 10 - SprÃ¡va systÃ©mu]</a>
<a href="../faq12.html">[Do sekce 12 - SpecifickÃ© otÃ¡zky o hardware a platformÃ¡ch]</a>
</font>

<h1><font color="#e00000">11 - X Window systÃ©m</font></h1>
<hr>

<p>
<h3>Obsah</h3>
<ul>
<li><a href="#Intro">11.1 - Ãšvod do X</a>
<li><a href="#ConfigX">11.2 - Konfigurace X</a>
<li><a href="#amd64i386">11.3 - Konfigurace X na amd64 a i386</a>
<li><a href="#StartingX">11.4 - SpuÅ¡tÄ›nÃ­ X</a>
<li><a href="#CustomizingX">11.5 - PÅ™izpÅ¯sobenÃ­ X</a>
</li>
</ul>

<hr>

<p>
<a name="Intro"></a>
<h2>11.1 - Ãšvod do X</h2>

X Window systÃ©m (obÄas nazÃ½vanÃ½ prostÄ› "X", jindy zase, nesprÃ¡vnÄ› nazÃ½vanÃ½
"X Windows") je prostÅ™edÃ­, kterÃ© nabÃ­zÃ­ grafickÃ© sluÅ¾by pro OpenBSD a jinÃ©
systÃ©my zaloÅ¾enÃ© na Unixu.
Ale samo o sobÄ› nabÃ­zÃ­ X velmi mÃ¡lo: je potÅ™eba mÃ­t takÃ© "Window Manager"
aby bylo moÅ¾no uÅ¾ivateli nabÃ­dnout grafickÃ© rozhranÃ­.
VÄ›tÅ¡ina "osobnosti", kterou je moÅ¾nÃ© cÃ­tit z X je dÃ­ky window manageru neÅ¾
samotnÃ½ch X.
OpenBSD je dodÃ¡vÃ¡no s free verzÃ­
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm&amp;sektion=1">fvwm(1)</a>
a 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
window managerÅ¯, aÄkoliv si mÅ¯Å¾ete pÅ™Ã¡t pouÅ¾Ã­t jakÃ½koliv jinÃ½ window manager
z tÄ›ch co jsou v <a href="../faq15.html">balÃ­ÄcÃ­ch</a>.
Hledejte pomocÃ­ klÃ­ÄovÃ©ho slova "<tt>window manager</tt>" pro seznam mnoha
window managerÅ¯, kterÃ© jsou k dispozici.

<p>
X je povaÅ¾ovÃ¡n za "client-server" strukturovanÃ½ protokol, ale terminologie
je obÄas matoucÃ­.
PoÄÃ­taÄ s grafikou na obrazovce je "X Server"-
Aplikace, kterÃ¡ Å™Ã­dÃ­ X server a Å™Ã­kÃ¡ mu co umÃ­stit na obrazovku je "X klient",
aÄkoliv to mÅ¯Å¾e bÃ½t mnohem vÃ­ce vÃ½konÄ›jÅ¡Ã­ poÄÃ­taÄ v datovÃ©m centru.
Tento model mÅ¯Å¾e bÃ½t pouÅ¾it k tomu, Å¾e velkÃ© a na procesor nÃ¡roÄnÃ© aplikace
(X klienti) bÄ›Å¾Ã­cÃ­ na velmi vÃ½konnÃ©m stroji pouÅ¾Ã­vajÃ­ X server bÄ›Å¾Ã­cÃ­ na malÃ©m,
nÃ­zko vÃ½konnÃ©m stroji na vaÅ¡em stole pro svÃ© uÅ¾ivatelskÃ© rozhranÃ­.

<p>
Je moÅ¾nÃ© pouÅ¡tÄ›t X klienty na systÃ©mu bez jakÃ©koliv grafickÃ© podpory.
NapÅ™Ã­klad je moÅ¾nÃ© mÃ­t aplikaci (X klienta) bÄ›Å¾Ã­cÃ­ na mvme88k, kterÃ¡
zobrazuje svÅ¯j vÃ½stup na grafickÃ©m displeji alpha (X server).
ProtoÅ¾e X je velmi dobÅ™e definovanÃ½ multiplatformnÃ­ protokol, tak je dokonce
moÅ¾nÃ© aby X aplikace bÄ›Å¾Ã­cÃ­ (napÅ™Ã­klad) na Solaris stroji pouÅ¾Ã­vala
OpenBSD stroj pro svÃ© zobrazenÃ­.

<p>
Klient a server mohou takÃ© bÄ›Å¾et na stejnÃ©m stroji a pro vÄ›tÅ¡inu tÃ©to sekce
to budeme i pÅ™edpoklÃ¡dat.

<h3>11.1.1 - Kolik potÅ™ebuji vÃ½konu abych mohl pouÅ¾Ã­vat X?</h3>
X samotnÃ© je docela velkÃ½ program a rychlÃ½ poÄÃ­taÄ se bude hodit
pokud budete X spouÅ¡tÄ›t a vypÃ­nat velmi Äasto.
OvÅ¡em jakmile uÅ¾ jednou bÄ›Å¾Ã­, tak reaguje velmi dobÅ™e i skromnÃ©m poÄÃ­taÄi.
Pro zÃ­skÃ¡nÃ­ dobrÃ©ho vÃ½konu zobrazenÃ­ na nÄ›kterÃ½ch platformÃ¡ch, dokonce
i kdyÅ¾ jen pro text, tak budete chtÃ­t pouÅ¾Ã­vat X.
Tyto platformy jako <a href="../../sparc.html">sparc</a> a
<a href="../../sparc64.html">sparc64</a> byly zamÃ½Å¡leny pro pouÅ¾itÃ­ s
grafickÃ½m rozhranÃ­m a vÃ½kon textovÃ© konzole je velmi ubohÃ½.

<p>
ProstÄ› dÅ¯vodem bÄ›Å¾Ã­cÃ­ch X je obvykle spouÅ¡tÄ›t X aplikace.
NÄ›kterÃ© X aplikace jsou velmi efektivnÃ­, jinÃ© si zdÃ¡nlivÄ› vezmou a pouÅ¾ijÃ­
veÅ¡kerÃ½ vÃ½kon procesru a vÅ¡echnu RAM, kterou jim mÅ¯Å¾ete dÃ¡t.
SamozÅ™ejmÄ›, Å¾e nÄ›kteÅ™Ã­ uÅ¾ivatelÃ© chtÄ›jÃ­ pouÅ¾Ã­t X jen k poskytnutÃ­ velkÃ©ho
mnoÅ¾stvÃ­
Of course, some users just like to use X to provide a large number of 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xterm&amp;sektion=1">xterm(1)</a>Å¯,
coÅ¾ mÅ¯Å¾e bÃ½t provedeno na velmi nenÃ¡roÄnÃ©m hardware.

<h3>11.1.2 - Mohu mÃ­t alespoÅˆ nÄ›jakou grafiku i bez X?</h3>
PÅ™edpoklÃ¡dÃ¡me, Å¾e nebudete akceptovat
<a href="http://en.wikipedia.org/wiki/ASCII_Art">ASCII grafiku</a>,
kterÃ¡ potÅ™ebuje nÄ›jakou formu framebuffer konzolovÃ©ho ovladaÄe.
NÄ›kterÃ© operaÄnÃ­ systÃ©my toto nabÃ­zÃ­, ale aktuÃ¡lnÄ› zde nic takovÃ©ho pro
OpenBSD nenÃ­ a nenÃ­ tady pro tohle ani moc zÃ¡jmu mezi vÃ½vojÃ¡Å™i.

<p>
<a name="ConfigX"></a>
<h2>11.2 - Konfigurace X</h2>
<b>DobrÃ© zprÃ¡vy:  Na vÄ›tÅ¡inÄ› hardware a vÄ›tÅ¡inÄ› platforem X
nepotÅ™ebuje Å¾Ã¡dnou konfiguraci. ProstÄ› to funguje.</b>

<p>
Detaily manuÃ¡lnÃ­ konfigurace X se vÃ½znamnÄ› liÅ¡Ã­ od platformy k platformÄ›.
Ve vÅ¡ech pÅ™Ã­padech najdete instrukce a jinÃ© informace specifickÃ© pro platformu
v <tt>/usr/X11R6/README</tt> v nainstalovanÃ©m systÃ©mu.

<p>
NÄ›kolik platforem vyÅ¾aduje 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xf86&amp;sektion=4">xf86(4)</a>
X aperture ovladaÄ, kterÃ½ poskytuje pÅ™Ã­stup do pamÄ›ti a I/O 
portÅ¯m VGA desky a PCI konfiguraÄnÃ­m registrÅ¯m poÅ¾adovanÃ½m X serverem.
Tento ovladaÄ musÃ­ bÃ½t povolen pÅ™edtÃ­m neÅ¾ je pouÅ¾it. BuÄ odpovÄ›dÃ­
"yes" na tuto otÃ¡zku bÄ›hem instalace:

<blockquote><pre>
Do you expect to run the X window System [no]
</pre></blockquote>

nebo zmÄ›nou hodnoty <tt>machdep.allowaperture</tt> na
odpovÃ­dajÃ­cÃ­ ne-nulovou hodnotu v <tt>/etc/sysctl.conf</tt> pro vaÅ¡i
platformu a restartem stroje (tato sysctl nemÅ¯Å¾e bÃ½t zmÄ›nÄ›na po restartu
 z bezpeÄnostnÃ­ch dÅ¯vodÅ¯).
Toto mÃ¡ dopady na bezpeÄnost, takÅ¾e to nedÄ›lejte, pokud to opravdu nepotÅ™ebujete.

<h3>11.2.1 - alpha</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.alpha"
>/usr/X11R6/README</a> pro alpha.

<p>
Nastavte <tt>machdep.allowaperture=1</tt> v <tt>/etc/sysctl.conf</tt>.

<p>
TGA a nÄ›kterÃ© VGA karty jsou podporovÃ¡ny.
Å½Ã¡dnÃ¡ dalÅ¡Ã­ konfigurace by nemÄ›la bÃ½t potÅ™eba.

<h3>11.2.2 - amd64</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.amd64"
>/usr/X11R6/README</a> pro amd64.

<p>
Nastavte <tt>machdep.allowaperture=2</tt> v <tt>/etc/sysctl.conf</tt>.

<p>
Pro vÄ›tÅ¡inu uÅ¾ivatelÅ¯ se X na amd64 automaticky konfiguruje ÃºspÄ›Å¡nÄ›, takÅ¾e
Å¾Ã¡dnÃ¡ dalÅ¡Ã­ konfigurace nenÃ­ potÅ™eba.
POKUD je nÄ›jÃ¡kÃ¡ konfigurace nutnÃ¡, tak pouÅ¾ijte
<a href="#amd64i386">X&nbsp;-configure</a>
proces <a href="#amd64i386example">nÃ­Å¾e</a>.

<h3>11.2.3 - armish</h3>
Å½Ã¡dnÃ© X servery, pouze X klienti.

<h3>11.2.4 - hp300</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.hp300"
>/usr/X11R6/README</a> pro hp300.

<h3>11.2.5 - hppa</h3>
Å½Ã¡dnÃ½ X server, pouze X klienti.

<h3>11.2.6 - i386</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.i386"
>/usr/X11R6/README</a> pro i386.

<p>
Nastavte <tt>machdep.allowaperture=2</tt> v <tt>/etc/sysctl.conf</tt>.

<p>
Pro vÄ›tÅ¡inu uÅ¾ivatelÅ¯ se X na i386 automaticky konfiguruje ÃºspÄ›Å¡nÄ›, takÅ¾e
Å¾Ã¡dnÃ¡ dalÅ¡Ã­ konfigurace nenÃ­ potÅ™eba.
POKUD je nÄ›jÃ¡kÃ¡ konfigurace nutnÃ¡, tak pouÅ¾ijte
<a href="#amd64i386">X&nbsp;-configure</a>
proces <a href="#amd64i386example">nÃ­Å¾e</a>.

<h3>11.2.7 - landisk</h3>
Å½Ã¡dnÃ© X servery, pouze X klienti.

<h3>11.2.8 - loongson</h3>
Konfigurace nenÃ­ potÅ™eba.

<h3>11.2.9 - luna88k</h3>
Å½Ã¡dnÃ© X servery, pouze X klienti.

<h3>11.2.10 - macppc</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.macppc"
>/usr/X11R6/README</a> pro macppc.
   
<p>
Nastavte <tt>machdep.allowaperture=2</tt> v <tt>/etc/sysctl.conf</tt>.

<p> 
PodporovanÃ© Macintosh PPC systÃ©my mohou bÄ›Å¾et dvÄ›ma ruznÃ½mi zpÅ¯soby:
"accelerated" a "framebuffer" (bez akcelerace).

<p>
V "framebuffer" mÃ³du systÃ©m pobÄ›Å¾Ã­ s 8 bity na
pixel a video rozliÅ¡enÃ­ je kontrolovÃ¡no Macintosh
prostÅ™edÃ­m. Z toho dÅ¯vodu budete chtÃ­t pravdÄ›podobnÄ› zachovat
malou MacOS sekci na vaÅ¡em disku pro nastavenÃ­ tÄ›chto voleb.
Tento mÃ³d mÃ¡ tu vÃ½hodu, Å¾e "ProstÄ› funguje", ale mÅ¯Å¾e bÃ½t Å¡Ã­lenÄ› neflexibilnÃ­
(napÅ™Ã­klad zmÄ›na rozliÅ¡enÃ­ mÅ¯Å¾e vyÅ¾adovat spuÅ¡tÄ›nÃ­ MacOS).

<p>
Pokud mÃ¡ vÃ¡Å¡ Macintosh video systÃ©m zaloÅ¾enÃ½ na ATI, tak mÅ¯Å¾e pouÅ¾Ã­vat
akcelerovanÃ½ X server, kterÃ½ dÃ¡vÃ¡ lepÅ¡Ã­ vÃ½kon a vÃ­ce kontroly nad OpenBSD
prostÅ™edÃ­m.
NVIDIA video karty v nÄ›kterÃ½ch macppc systÃ©mech budou takÃ© v mnoha
pÅ™Ã­padech fungovat.
README soubor obsahuje detaily o konfiguraci akcelerovanÃ©ho ovladaÄe.
ZaÄnÄ›te pouÅ¾itÃ­m ukÃ¡zkovÃ©ho souboru.

<p>
AÄkoliv README soubor popisuje pouÅ¾itÃ­ standardnÃ­ Apple myÅ¡i s jednÃ­m
tlaÄÃ­tkem v X, tak pokud nepouÅ¾Ã­vÃ¡te laptop je velmi doporuÄovÃ¡no, Å¾e
si koupÃ­te modernÃ­ USB myÅ¡ od jakÃ©hokoliv vÃ½robce s tÅ™emi nebo vÃ­ce tlaÄÃ­tky.

<h4>CRT iMacy a X</h4>
iMacy majÃ­ velmi neobvyklÃ© (v tÃ©to dobÄ›) CRT, kterÃ© majÃ­ pevnou
horizontÃ¡lnÃ­ frekvenci skenovÃ¡nÃ­.
Pokusy pouÅ¾Ã­t horizontÃ¡lnÃ­ frekvence mimo velmi ÃºzkÃ½ rozsah
zpÅ¯sobÃ­, Å¾e monitor se nezapne.
NÃ¡sledujÃ­cÃ­ Å™Ã¡dky pÅ™idanÃ© do xorg.conf v <tt>Section
"Monitor"</tt> oblasti zpÅ¯sobÃ­, Å¾e mnoho CRT-zaloÅ¾enÃ½ch iMacÅ¯ v rozsahu 333MHz
aÅ¾ 500MHz (a moÅ¾nÃ¡ i vÃ­ce!) funguje dobÅ™e:

<blockquote><pre>
        HorizSync       60.0 - 60.0
        VertRefresh     43.0 - 117.0 
</pre></blockquote>

MÅ¯Å¾ete si pÅ™Ã¡t omezit spodnÃ­ limit <tt>VertRefresh</tt> na
hodnoty, kterÃ© vÃ¡m budou asi vÃ­ce vyhovovat jako napÅ™Ã­klad 70.

<h3>11.2.11 - mvme68k</h3>
Å½Ã¡dnÃ© X servery, pouze X klienti.

<h3>11.2.12 - mvme88k</h3>
Å½Ã¡dnÄ› X servery, pouze X klienti.

<h3>11.2.13 - sgi</h3>
X bÄ›Å¾Ã­ na O2 systÃ©movÃ©m frame bufferu v neakcelerovanÃ©m mÃ³du.

<h3>11.2.14 - sparc</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc"
>/usr/X11R6/README</a> pro sparc.

<p>
S jedinÃ½m podporovanÃ½m framebufferem zde nenÃ­ potÅ™eba Å¾Ã¡dnÃ¡ konfigurace.
Pokud si pÅ™ejete pouÅ¾Ã­t konfiguraci s vÃ­ce monitory, tak se podÃ­vejte na 
README soubor vÃ½Å¡e pro detaily.

<p>
RozliÅ¡enÃ­ je kontrolovÃ¡no firmwarem pÅ™edtÃ­m neÅ¾ nastartuje OpenBSD.

<h3>11.2.15 - sparc64</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.sparc64"
>/usr/X11R6/README</a> pro sparc64.

<p>
VÄ›tÅ¡ina jednoduchÃ½ch konfiguracÃ­ nynÃ­ "ProstÄ› funguje".
Pokud vaÅ¡e nefunguje nebo si chcete hrÃ¡t, tak se podÃ­vejte na README soubor vÃ½Å¡e.

<h3>11.2.16 - vax</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.vax"
>/usr/X11R6/README</a> pro vax.

<p>
X server aktuÃ¡lnÄ› funguje pouze na VAXstation 4000 modelech buÄ s 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcg&amp;sektion=4&amp;arch=vax">lcg(4)</a>
nebo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lcspx&amp;sektion=4&amp;arch=vax">lcspx(4)</a>
framebufferem.

<h3>11.2.17 - zaurus</h3>
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/xenocara/distrib/notes/README.zaurus"
>/usr/X11R6/README</a> pro zaurus.

<p>
Konfigurace neni potÅ™eba, X "ProstÄ› funguje".

<p>
<a name="amd64i386"></a>
<h2>11.3 - Konfigurace X na amd64 a i386</h2>
Pokud jste nezkusili <a href="#StartingX">prostÄ› spustit X</a>, stop!
NepÅ™idÄ›lÃ¡vejte si prÃ¡ci pokud nemusÃ­te!
VÄ›tÅ¡ina i386 a amd64 uÅ¾ivatelÅ¯ zjistÃ­, Å¾e X prostÄ› funguje bez jakÃ©koliv
manuÃ¡lnÃ­ konfigurace.

<h3>11.3.1 - X.Org konfigurace</h3>
ObÄas X "prostÄ› nefunguje" jak je oÄekÃ¡vÃ¡no a nÄ›kdy potÅ™ebujete
upravit nÄ›co co funguje.

<p>
Pokud X nefunguje jak by jste chtÄ›li s vaÅ¡Ã­m systÃ©mem, tak budete potÅ™ebovat
vytvoÅ™it konfiguraÄnÃ­ soubor.
DobrÃ© mÃ­sto ke startu (a nÄ›kdy i ke konci!) je spustit
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=Xorg&amp;sektion=1">Xorg(1)</a>
v "X -configure" mÃ³du.
Toto nahraje vÅ¡echny dostupnÃ© moduly video ovladaÄÅ¯, vyhledÃ¡ jinÃ½ hardware a
podle toho co najde vytvoÅ™Ã­ xorg.conf soubor, kterÃ½ mÅ¯Å¾e nebo nemusÃ­ fungovat.
I kdyÅ¾ nebude fungovat, tak to bude uÅ¾iteÄnÃ½ startovnÃ­ bod pro vytvoÅ™enÃ­
konfigurace, kterÃ¡ bude fungovat jak chceme.

<p>
JinÃ¡ a Äasem provÄ›Å™enÃ¡ metoda pro konfiguraci X je pouÅ¾Ã­t vÃ¡Å¡ oblibenÃ½
vyhledÃ¡vaÄ k nalezenÃ­ nÄ›koho jinÃ©ho kdo uÅ¾ vÃ¡Å¡ problem vyÅ™eÅ¡il.
NezapomeÅˆte, Å¾e <tt>xorg.conf</tt> soubory pro jinÃ© OS podobnÃ© Unixu Äasto
nabÃ­zÃ­ uÅ¾iteÄnÃ© tipy pro to co potÅ™ebujete, aby jste rozjeli X na vaÅ¡em
podobnÃ©m hardware.
I kdyÅ¾ to nenÃ­ Å¡patnÃ¡ cesta, tak tato metoda zde nebude zvÃ½razÅˆovÃ¡na.

<p>
<a name="amd64i386example"></a>
<h3>11.3.2 - NÃ¡Å¡ ukÃ¡zkovÃ½ stroj</h3>
Pro demonstraci nastavenÃ­ X pouÅ¾ijeme starÃ½ Celeron 400MHz systÃ©m s AGP
video slotem.
Video karta je starÃ¡ AGP karta, kterÃ¡ se v dmesg ukazuje jako:

<blockquote><pre>
vga1 at pci1 dev 0 function 0 "3DFX Interactive Banshee" rev 0x03
</pre></blockquote>

Toto je v dÃ¡vnÃ© dobÄ› highÃ©end video karta s 16M RAM, ale nynÃ­ je vÄ›tÅ¡inou
nepodporovanÃ¡ v modernÃ­ch verzÃ­ch "mainstream" operaÄnÃ­ch systÃ©mÅ¯.
Monitor pÅ™ipojenÃ½ k systÃ©mu je Sony Multiscan G400 19" CRT bylo by fajn
kdyby fungoval na 1280x1024 se sluÅ¡nou obnovovacÃ­ frekvencÃ­ a 24 bitovou
barevnou hloubkou.

<p>
Za prvÃ©, po instalaci OpenBSD s X (a ovÄ›Å™enÃ­, Å¾e aperture ovladaÄ je povolen
v kernelu) se podÃ­vÃ¡me co X.Org auto detekce a konfigurace dÄ›lÃ¡. Nakonec, 
mÅ¯Å¾eme mÃ­t Å¡tÄ›stÃ­.
TakÅ¾e se prostÄ› pÅ™ihlÃ¡sÃ­me a pouÅ¾ijeme pÅ™Ã­kaz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startx&amp;sektion=1">startx(1)</a>.
Obrazovka na okamÅ¾ik zÄernÃ¡ a potÃ© zÃ­skÃ¡me X "testovaciobraz" na pozadÃ­,
"X" kurzor a potÃ© xterm okno.

<p>
Ono to funguje!

<p>
VÃ­ce nebo mÃ©nÄ›.
ZatÃ­mco systÃ©m je plnÄ› funkÄnÃ­, tak se zdÃ¡, Å¾e nevybral Å¾Ã¡dnÃ© z vlastnostÃ­
monitoru a bÄ›Å¾Ã­ evidentnÄ› na nÃ­zkÃ©m rozliÅ¡enÃ­ (680x480).
DoufÃ¡me, Å¾e to pÅ¯jde lÃ©pe neÅ¾ tohle.
Mnohem lÃ©pe ve skuteÄnosti.
To znamenÃ¡, Å¾e potÅ™ebujeme vyrobit nÃ¡Å¡ vlastnÃ­ xorg.conf soubor, bohuÅ¾el.

<p>
VyuÅ¾ijme "X -configure" proces pro vygenerovÃ¡nÃ­ poÄÃ¡teÄnÃ­ho <tt>xorg.conf</tt>
souboru.
MusÃ­te to udÄ›lat jako root:
<blockquote><pre>
# <b>X -configure</b>
 [...]
Your xorg.conf file is /root/xorg.conf.new

To test the server, run 'X -config /root/xorg.conf.new'
</pre></blockquote>

Mimochodem ta zprÃ¡va je dÅ¯leÅ¾itÃ¡ -- pouÅ¾ijte celou cestu k vaÅ¡emu
<tt>xorg.conf.new</tt> souboru, i kdyÅ¾ je ve vaÅ¡em aktuÃ¡lnÃ­m
adresÃ¡Å™i.
VynechÃ¡nÃ­ tohoto zpÅ¯sobÃ­, Å¾e
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=X&amp;sektion=7">X(7)</a>
nenajde soubor a tiÅ¡e pouÅ¾ije defaultnÃ­ konfiguraci
a pokud ta fungovala, tak by jste nepouÅ¾Ã­vali tento proces!
Tohle mÅ¯Å¾e trochu zpomalit vaÅ¡e hledÃ¡nÃ­ problÃ©mu.
V tomhle nÃ¡m vÄ›Å™te.

<p>
PojÄme udÄ›lat co to Å™Ã­kÃ¡ a uvidÃ­me co dostaneme:
<blockquote><pre>
# <b>X -config /root/xorg.conf.new</b>
</pre></blockquote>

NynÃ­, vÅ¡echno co mÃ¡me je ÄernÃ¡ obrazovka.
A pÅ™itom to zaÄalo tak dobÅ™e...

<p>
Toto mÅ¯Å¾e bÃ½t opravdu dobrÃ½ Äas pobavit se o zpÅ¯sobech jak opustit X, kdyÅ¾
je spuÅ¡tÄ›no touto cestou.
V poÅ™adÃ­ dÅ¯leÅ¾itosti:
<ul>
<li><b>CTRL-ALT-Backspace</b>:  Toto snad zpÅ¯sobi, Å¾e X se okamÅ¾itÄ›
vypne i s X aplikacemi, kterÃ© zrovna bÄ›Å¾Ã­.
SamozÅ™ejmÄ›, Å¾e bÄ›hem konfiguraÄnÃ­ho procesu nemÃ¡te Å¾Ã¡dnÃ© bÄ›Å¾Ã­cÃ­
aplikace a tak toto nenÃ­ problem (a ve skuteÄnosti, v tomto bodÄ›, 
je toto vaÅ¡e <i>nejlepÅ¡Ã­</i> cesta jak vypnout X).
<li><b>SSH pÅ™ihlÃ¡Å¡enÃ­ do systÃ©mu</b> a 
"<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkill&amp;sektion=1">pkill</a>
Xorg", coÅ¾ mÅ¯Å¾e zabÃ­t X proces a mÅ¯Å¾e vÃ¡s to vrÃ¡tit do pouÅ¾itelnÃ© konzole.
<li><b>SSH pÅ™ihlÃ¡Å¡enÃ­ do systÃ©mu</b> a jeho restart.
<li><b>Reset nebo power tlaÄÃ­tko.</b>  NÄ›kdy jdou vÄ›ci hodnÄ› Å¡patnÄ›.
Ano, obvykle je dobrÃ© mÃ­t X fungujÃ­cÃ­ pÅ™edtÃ­m neÅ¾ nahrajete kritickÃ©
aplikace na systÃ©m.
ObÄas Å¡patnÃ¡ X konfigurace zasekne celÃ½ stroj do bodu, Å¾e pouze hard reset
vyÅ™eÅ¡Ã­ tento problÃ©m.
</ul>

NaÅ¡tÄ›stÃ­ pro nÃ¡s CTRL-ALT-Backspace zde odvedlo svou prÃ¡ci a my jsme vrÃ¡ceni
do pÅ™Ã­kazovÃ©ho Å™Ã¡dku.
NynÃ­ potÅ™ebujeme vÄ›dÄ›t, jestli mÅ¯Å¾eme zjistit co je Å¡patnÄ›.
NapÅ™ed by jsme se mÄ›li podÃ­vat na to co si Xorg myslÃ­, Å¾e se dÄ›je a toto je
uloÅ¾eno v souboru <tt>/var/log/Xorg.0.log</tt>.
V tomto pÅ™Ã­padÄ› to vypadÃ¡, Å¾e si X myslÃ­, Å¾e vÅ¡echno bÄ›Å¾Ã­ v poÅ™Ã¡dku a nejsou
tady Å¾Ã¡dnÃ© obvyklÃ© chyby v logu.
(Å™Ã¡dky, kterÃ© zaÄÃ­najÃ­ s "<tt>(EE)</tt>" jsou chyby).

<p>
Tohle je mÃ­sto, kde se znalost vaÅ¡eho hardware bude hodit.
PÅ™ipojenÃ­ tohoto systÃ©mu k jinÃ©mu monitoru zatÃ­mco ukazuje prÃ¡zdnou
obrazovku vyvolÃ¡ "Sync. Out of Range" zprÃ¡vu na monitoru.
EvidentnÄ› konfigurace, kterou nÃ¡m X dodalo na tomto monitoru fungovat nebude
a nemusÃ­ fungovat na Å½ÃDNÃ‰M monitoru pokud byl vybrÃ¡n video mÃ³d, kterÃ½
nenÃ­ moÅ¾nÃ½ pro tuto konkrÃ©tnÃ­ kartu (nezapomeÅˆte, Å¾e X prozkoumÃ¡vÃ¡
chipy na kartÄ› a Äeho jsou pÅ™Ã­padnÄ› schopnÃ©, ne to, jak to vÃ½robce dal
vÅ¡echno dohromady).
RÅ¯znÃ© monitory budou dÄ›lat rÅ¯znÃ© vÄ›ci pokud je ÄasovÃ¡nÃ­ ÃºplnÄ› mimo.
NÄ›kterÃ© se pokusÃ­ zobrazit co mohou, jinÃ© skoÄÃ­ do ÃºspornÃ©ho reÅ¾imu, 
jinÃ© budou dÄ›lat hroznÃ© zvuky a nÄ›kterÃ© zobrazÃ­ uÅ¾iteÄnÃ© zprÃ¡vy na obrazovce.
Tenhle monitor vypadÃ¡, Å¾e nedÄ›lÃ¡ nic z toho.
UdÄ›lali jsme si poznÃ¡mku o NEPOUÅ¹ÃVÃNÃ tohoto monitoru pro poÄÃ¡teÄnÃ­ X
konfiguraci kdykoliv v budoucnosti.

<p>
PÅ™i prohlÃ­Å¾enÃ­ vygenerovanÃ©ho xorg.conf.new souboru vidÃ­me toto:
<blockquote><pre>
Section "Monitor"
        #DisplaySize      370   270     # mm
        Identifier   "Monitor0"
        VendorName   "SNY"
        ModelName    "SONY CPD-G400"
 ### Comment all HorizSync and VertSync values to use DDC:
        HorizSync    30.0 - 107.0
        VertRefresh  48.0 - 120.0
        Option      "DPMS"
EndSection
</pre></blockquote>

Jako test pojÄme pouÅ¾Ã­t DDC ("Data Display Channel", coÅ¾ je zpÅ¯sob jak
monitor mÅ¯Å¾e Å™Ã­ct poÄÃ­taÄi a video kartÄ› co vlastnÄ› podporuje) a podÃ­vejme
se co se stane.
TentokrÃ¡t dostaneme v X sÃ­Å¥ovÃ© pozadÃ­ a pohybujÃ­cÃ­ se kurzor, coÅ¾ je
vÅ¡echno co oÄekÃ¡vÃ¡me, kdyÅ¾ spouÅ¡tÃ­me X tÃ­mto zpÅ¯sobem (ukonÄÃ­me X pomocÃ­
CTRL-ALT-Backspace triku jak je popsÃ¡no vÃ½Å¡e).
Je to (opÄ›t) velmi nÃ­zkÃ© rozliÅ¡enÃ­, ale funguje a tak si mÅ¯Å¾eme bÃ½t pomÄ›rnÄ›
jistÃ­, Å¾e mÃ¡me problÃ©my s ÄasovÃ¡nÃ­m a rozliÅ¡enÃ­m.
ObnovÃ­me "HorizSync" a "VertRefresh" Å™Ã¡dky do pÅ¯vodnÃ­ho stavu, protoÅ¾e jsme
si potvrdili specifikace tohoto monitoru skrze lehkÃ© vyhledÃ¡vÃ¡nÃ­ na Internetu.

<p>
Zkusme pÅ™inutit Xorg ke konkrÃ©tnÃ­mu rozliÅ¡enÃ­ a sledujme jestli budeme mÃ­t
Å¡tÄ›stÃ­.
V <tt>Section "Screen"</tt> ÄÃ¡sti xorg.conf souboru chceme pÅ™idat pÃ¡r Å™Ã¡dkÅ¯.
PÅ™idanÃ© Å™Ã¡dky jsou zvÃ½raznÄ›ny tuÄnÄ›:

<blockquote><pre>
Section "Screen"
        Identifier "Screen0"
        Device     "Card0"
        Monitor    "Monitor0"
<b>        DefaultDepth   24</b>
        SubSection "Display"
                Viewport   0 0
                Depth     1
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     4
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     8
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     15
        EndSubSection
        SubSection "Display"
                Viewport   0 0 
                Depth     16
        EndSubSection
        SubSection "Display"
                Viewport   0 0
                Depth     24
<b>                Modes	"1280x1024"</b>
        EndSubSection
EndSection
</pre></blockquote>

Tyto dvÄ› zmÄ›ny Å™Ã­kajÃ­ X, Å¾e chceme pouÅ¾Ã­t 24 bitovou barevnou hloubku a 
pro tuto hloubku, Å¾e chceme pouÅ¾Ã­t rozliÅ¡enÃ­ 1280x1024.
ProtoÅ¾e Å¾Ã¡dnÃ© jinÃ© rozliÅ¡enÃ­ nenÃ­ pro "Depth 24" definovÃ¡no, tak systÃ©m
bude k tomuto rozliÅ¡enÃ­ pÅ™inucen.

<p>
VyzkouÅ¡Ã­me tak, jak uÅ¾ jsme zkouÅ¡eli a .. ÃšSPÃ‰CH!
MÃ¡me to co vypadÃ¡ jako velmi pÄ›knÃ¡ obrazovka s vysokÃ½m rozliÅ¡enÃ­m.
UvÄ›domte si, Å¾e VÅ ECHNO co oÄekÃ¡vÃ¡me je sÃ­Å¥ovÃ© pozadÃ­ (je to velmi dobrÃ©
pro to, aby jste vidÄ›li jak dobrÃ½ vÃ¡Å¡ monitor DOOPRAVDY je a takÃ© skvÄ›lÃ©
pro kalibraci LCD displejÅ¯, nazÃ½vÃ¡ se
"<a href="http://www.openbsd.org/cgi-bin/cvsweb/xenocara/data/bitmaps/root_weave">root
weave</a>") a pohyblivÃ½ kurzor.
NenÃ­ to plÃ¡novÃ¡no aby to bylo funkÄnÃ­ uÅ¾ nynÃ­.

<p>
NynÃ­ chceme tento xorg.conf soubor nainstalovat, protoÅ¾e potÅ™ebujeme vidÄ›t
jak daleko jsme pokroÄili s pouÅ¾itelnÃ½m a bÄ›Å¾Ã­cÃ­m X.

<blockquote><pre>
# cp xorg.conf.new /etc/X11/xorg.conf
</pre></blockquote>

NynÃ­ mÅ¯Å¾eme zkusit X pomocÃ­ normÃ¡lnÃ­ho startx(1) pÅ™Ã­kazu.
Funguje to!

<p>
TakÃ© by asi bylo dobrÃ© ovÄ›Å™it, Å¾e mÃ¡me rozliÅ¡enÃ­ a barevnou hloubku, kterou
chceme a takÃ©, Å¾e fungujeme na sluÅ¡nÃ© obnovovacÃ­ frekvenci.
Toto mÅ¯Å¾eme udÄ›lat pomocÃ­ 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xrandr&amp;sektion=1">xrandr(1)</a>
a 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdpyinfo&amp;sektion=1">xdpyinfo(1)</a>
pÅ™Ã­kazÅ¯.
Mimo jinÃ½ch vÄ›cÃ­ nÃ¡m xdpyinfo(1) Å™Ã­kÃ¡:
<blockquote><pre>
    [...]
screen #0:
  print screen:    no
  dimensions:    1280x1024 pixels (433x347 millimeters)
  resolution:    75x75 dots per inch
  depths (7):    24, 1, 4, 8, 15, 16, 32
  root window id:    0x44
  depth of root window:    24 planes
    [...]
</pre></blockquote>

TakÅ¾e ano, fungujeme na 1280x1024 s hloubkou 24 ÃºrovnÃ­ (bitÅ¯).

<p>
xrandr(4) nÃ¡m Å™Ã­kÃ¡:
<blockquote><pre>
 SZ:    Pixels          Physical       Refresh
*0   1280 x 1024   ( 433mm x 347mm )  *85   75   60  
 1   1280 x 960    ( 433mm x 347mm )   85   60  
    [...]
</pre></blockquote>

coÅ¾ znamenÃ¡, Å¾e fungujeme na 85Hz obnovovacÃ­ frekvenci to by mÄ›lo bÃ½t
velmi komfortnÃ­ nastavenÃ­ pro vÄ›tÅ¡inu uÅ¾ivatelÅ¯.

<p>
<h3>11.3.3 - Co dÄ›lat, kdyÅ¾ to nenÃ­ tak "lehkÃ©"?</h3>
ObÄas vÄ›ci prostÄ› nespolupracujÃ­.
Tady jsou nÄ›jÃ¡kÃ© tipy.

<ul>
<li>PÅ™eÄtÄ›te si man strÃ¡nku pro X server, kterÃ½ pouÅ¾Ã­vÃ¡te.
V naÅ¡em pÅ™Ã­kladu <tt>/var/log/Xorg.0.log</tt> ukazuje, Å¾e X pouÅ¾Ã­vÃ¡ TDFX jako
ovladaÄ a tak to bude
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tdfx&amp;sektion=4">tdfx(4)</a>
man strÃ¡nka.
Velmi Äasto najdete tipy, omezenÃ­ a volby pro konfiguraci vaÅ¡Ã­ video karty.
Tyto se liÅ¡Ã­ od ovladaÄe k ovladaÄi, takÅ¾e nepÅ™edpoklÃ¡dejte, Å¾e nemusÃ­te
ÄÃ­st man strÃ¡nku pro ovladaÄ, kterÃ½ nynÃ­ pouÅ¾Ã­vÃ¡te jen proto, Å¾e jste Äetli
jinou pÅ™edtÃ­m.

<li>Zkuste jinÃ© monitory.
Jak zjiÅ¡tÄ›no v naÅ¡em pÅ™Ã­kladu nahoÅ™e, jinÃ© monitory Äasto dajÃ­ rÅ¯znÃ©
nÃ¡povÄ›dy o tom, co by mohlo bÃ½t Å¡patnÄ›.

<li>Zkuste
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vesa&amp;sektion=4">vesa(4)</a>
X ovladaÄ.
Toto je pochopitelnÄ› "poslednÃ­ moÅ¾nost" z dÅ¯vodu vÃ½konu, ale funguje takÅ™ka
na vÅ¡ech video kartÃ¡ch. VÄetnÄ› tÄ›ch, pro kterÃ© Å¾Ã¡dnÃ½ "lepÅ¡Ã­" X server ovladaÄe
nefungujÃ­.

<li>PouÅ¾ijte jinÃ½ hardware.
Pokud mÃ¡te moÅ¾nost volby jinÃ© video karty, tak zkuste nÄ›kterÃ© jinÃ©.


</ul>

<a name="StartingX"></a>
<h2>11.4 - SpuÅ¡tÄ›nÃ­ X</h2>
Jsou dva obvyklÃ© zpÅ¯soby jak spustit X:

<h3>11.4.1 - Na vyÅ¾Ã¡dÃ¡nÃ­:</h3>
PÅ™ihlaÅ¡te se do konzole jako obvykle a potÃ© spusÅ¥te
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=startx&amp;sektion=1">startx(1)</a>.

<h3>11.4.2 - NastartovÃ¡nÃ­ pÅ™Ã­mo do X:</h3>
Toto je udÄ›lÃ¡no pomocÃ­
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>,
X displej manaÅ¾era.
xdm(1) je spouÅ¡tÄ›n jako root, obvykle pÅ™es <a href="../faq10.html#rc">rc</a>
a zobrazÃ­ pÅ™ihlaÅ¡ovacÃ­ obrazovku.
Po ÃºspÄ›Å¡nÃ©m pÅ™ihlÃ¡Å¡enÃ­ nastartuje X sezenÃ­ pro uÅ¾ivatele.
Pokud mÃ¡ bÃ½t X sezenÃ­ ukonÄeno (vÄetnÄ› pouÅ¾itÃ­ kombinace CTRL-ALT-Backspace),
tak xdm(1) se znovu spustÃ­ s vÃ½zvou pro opÄ›tovnÃ© pÅ™ihlÃ¡Å¡enÃ­ uÅ¾ivatele.
Z tohoto dÅ¯vodu se NEPOKOUÅ EJTE spustit xmd(1) z
<tt>/etc/rc.conf.local</tt> dokud jste neovÄ›Å™ili, Å¾e X funguje jak chcete,
protoÅ¾e jinak se mÅ¯Å¾e vÃ¡Å¡ stroj stÃ¡t velmi obtiÅ¾nÃ½ pro sprÃ¡vu!
(nejhorÅ¡Ã­ pÅ™Ã­pad: nastartujte jednouÅ¾ivatelskÃ½ reÅ¾im jako kdyby jste
 <a href="../faq8.html#LostPW">ztratili vaÅ¡e heslo</a> a upravte xdm_flags
Å™Ã¡dek ve vaÅ¡em <tt>/etc/rc.conf.local</tt> souboru.)

<p>
Na nÄ›kterÃ½ch platformÃ¡ch budete potÅ™ebovat vypnout konzoli
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=getty&amp;sektion=8">getty(8)</a>
pro pouÅ¾itÃ­ xdm(1).

<p>
<a name="CustomizingX"></a>
<h2>11.5 - PÅ™izpÅ¯sobenÃ­ X</h2>

<h3>11.5.1 - Ãšvod</h3>
OpenBSD defaultnÃ­ X prostÅ™edÃ­ je plnÄ› funkÄnÃ­, ale mÅ¯Å¾ete si pÅ™Ã¡t ho
upravit.
MÅ¯Å¾ete chtÃ­t zmÄ›nit pozadÃ­ nebo jeho barvu nebo mÅ¯Å¾ete chtÃ­t zmÄ›nit
okennÃ­ manaÅ¾er (program, kterÃ½ nejvÃ­ce definuje vaÅ¡e X prostÅ™edÃ­)
nebo zmÄ›nit aplikace, kterÃ© jsou spuÅ¡tÄ›ny, kdyÅ¾ X startuje.

<p>
DefaultnÃ­ okennÃ­ manaÅ¾er v OpenBSD je
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fvwm&amp;sektion=1">fvwm(1)</a>.
Fvwm je dobrÃ½, vÅ¡eobecnÄ› pouÅ¾itelnÃ½ okennÃ­ manaÅ¾er, ale tÄ›Å¾ko to je vaÅ¡e
jedinÃ¡ volba; dokonce to nenÃ­ jedinÃ½ okennÃ­ manaÅ¾er v zÃ¡kladnÃ­m OpenBSD
(podÃ­vejte se na
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=twm&amp;sektion=1">twm(1)</a>).
VelkÃ© mnoÅ¾stvÃ­ okennÃ­ch manaÅ¾erÅ¯ je takÃ© dostupnÃ½ch skrze
<a href="../faq15.html">balÃ­Äky</a>.

<p>
PodobnÄ› jako <a href="../faq10.html#rc">systÃ©movÃ© startovacÃ­ skripty</a>, tak
i X mÃ¡ proces, kterÃ½m prochÃ¡zÃ­ pÅ™i nastavovÃ¡nÃ­ uÅ¾ivatelskÃ©ho prostÅ™edÃ­.
PÅ™esnÄ›ji Å™eÄeno mÃ¡ vÃ­ce neÅ¾ jeden proces, kterÃ½ proces se pouÅ¾ije
zÃ¡leÅ¾Ã­ na tom jak <a href="#StartingX">spouÅ¡tÃ­te X</a>.
PochopenÃ­ toho, jak X startuje, vÃ¡m pomÅ¯Å¾e porozumÄ›t tomu, jak upravit
vaÅ¡e pracovnÃ­ prostÅ™edÃ­ k obrazu svÃ©mu.

<p>
UvÄ›domte si, Å¾e mÅ¯Å¾e upravit prostÅ™edÃ­ jak na systÃ©movÃ© Ãºrovni, tak
i pro jednotlivÃ© uÅ¾ivatele.
Je asi nejlepÅ¡Ã­ provÃ¡dÄ›t zmÄ›ny na Ãºrovni uÅ¾ivatele neÅ¾ mÄ›nit systÃ©movÃ©
defaultnÃ­ nastavenÃ­, protoÅ¾e uÅ¾ivatelskÃ© skripty jsou uloÅ¾eny v domovskÃ©m
adresÃ¡Å™i uÅ¾ivatele a tak budete mÃ­t mÃ©nÄ› prÃ¡ce se spojovÃ¡nÃ­m souborÅ¯, kdyÅ¾
aktualizujete systÃ©m na novÄ›jÅ¡Ã­ verzi OpenBSD.

SystÃ©movÃ¡ defaultnÃ­ nastavenÃ­ jsou v <tt>/etc/X11</tt> a byli nastaveny
z <a href="faq4.html#FilesNeeded">xetcXX.tgz</a>, kterÃ½ se neobnovuje
pÅ™i <a href="../upgrade52.html">doporuÄenÃ©m upgrade procesu</a>.
TakÅ¾e pokud udÄ›lÃ¡te systÃ©movÃ© zmÄ›ny, tak zÅ¯stanou, ale mÅ¯Å¾e bÃ½t potÅ™eba
spojit tyto zmÄ›ny s novÄ›jÅ¡Ã­mi verzemi tÄ›chto souborÅ¯.

<h3>11.5.2 - startx(1) spuÅ¡tÄ›nÃ­</h3>

startx(1) hledÃ¡ soubor <tt>.xinitrc</tt> v domovskÃ©m adresÃ¡Å™i uÅ¾ivatele.
<tt>.xinitrc</tt> je obvykle shell skript, kterÃ½ mÅ¯Å¾e spustit tolik
X "klient" (aplikacÃ­, kterÃ© pouÅ¾Ã­vajÃ­ X) programÅ¯, kolik je potÅ™eba.
KdyÅ¾ tento skript skonÄÃ­, tak se X server vypne.
ObecnÄ› vÄ›tÅ¡ina programÅ¯, kterÃ© jsou spouÅ¡tÄ›ny tÃ­mto skriptem by mÄ›la
bÄ›Å¾et na pozadÃ­, ale poslednÃ­ z nich by mÄ›l bÄ›Å¾et v popÅ™edÃ­ (typicky
okennÃ­ manaÅ¾er), kdyÅ¾ ten skonÄÃ­, tak skript se ukonÄÃ­ a X se vypne.

<p>
V nejlehÄÃ­m pÅ™Ã­padÄ› mÅ¯Å¾e obsahovat tak mÃ¡lo jako jmÃ©no okennÃ­ho manaÅ¾era, 
kterÃ½ si pÅ™ejete spustit:

<blockquote><pre>
cwm
</pre></blockquote>

Nebo si mÅ¯Å¾ete trochu vÃ­ce pohrÃ¡t:

<blockquote><pre>
xconsole -geometry -0+0 -fn 5x7 &
oclock -geometry 75x75-0-0 &
xsetroot -solid grey &
cwm
</pre></blockquote>

To spustÃ­
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xconsole&amp;sektion=1">xconsole(1)</a>
, kterÃ¡ nabÃ­zÃ­ kopii jakÃ©hokoliv textu, kterÃ½ by jÃ¡dro poslalo na konzoli
(kterou nynÃ­ zabÃ­rÃ¡ grafickÃ¡ obrazovka), analogovÃ© hodiny
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=oclock&amp;sektion=1">oclock(1)</a>
a nastavÃ­ pozadÃ­ na Å¡edou vÃ½plÅˆ pomocÃ­
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xsetroot&amp;sektion=1">xsetroot(1)</a>
.To vÅ¡e pÅ™ed spuÅ¡tÄ›nÃ­m
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&amp;sektion=1">cwm(1)</a>
okennÃ­ho manaÅ¾era.
VÅ¡imnÄ›te si, Å¾e pouze okennÃ­ manaÅ¾er nenÃ­ "upozadÄ›n" pomoci "&amp;" znaku.
To znamenÃ¡, Å¾e X zÅ¯stane bÄ›Å¾et dokud cwm(1) neskonÄÃ­.

<p>
Pokud uÅ¾ivatelÅ¯v domovskÃ½ adresÃ¡Å™ neobsahuje <tt>.xinitrc</tt> soubor, tak  
je pouÅ¾it systÃ©movÃ½ <tt>/etc/X11/xinit/xinitrc</tt> soubor.
Tento soubor vÃ¡m mÅ¯Å¾e poskytnou dalÅ¡Ã­ nÃ¡pady pro vÃ¡Å¡ .xinitrc skript.

<h3>11.5.3 - xdm(1) spuÅ¡tÄ›nÃ­</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xdm&amp;sektion=1">xdm(1)</a>
je obvykle spouÅ¡tÄ›no <a href="../faq10.html#rc">systÃ©movÃ½m spouÅ¡tÄ›cÃ­m
skriptem</a>, ale pro testovacÃ­ ÃºÄely (doporuÄeno dokud nevÃ­te, Å¾e vaÅ¡e
X konfigurace je sprÃ¡vnÄ›!) mÅ¯Å¾e bÃ½t spuÅ¡tÄ›n jako root.

<p>
xdm(1) mÃ¡ spoustu dalÅ¡Ã­ funkcÃ­, kterÃ© tady Å™eÅ¡it nebudeme, ale pro naÅ¡e
ÃºÄely bude xdm ukazovat uÅ¾ivateli pÅ™ihlaÅ¡ovacÃ­ obrazovku, naÄte a ovÄ›Å™Ã­
uÅ¾ivatelskÃ© jmÃ©no a heslo a potÃ© dÃ¡ uÅ¾ivateli jeho X prostÅ™edÃ­.
KdyÅ¾ se X vypne, aÅ¥ uÅ¾ ÃºmyslnÄ› nebo neÃºmyslnÄ›, tak xdm ho znovu spustÃ­.
To je dÅ¯vod, proÄ si musÃ­te bÃ½t jistÃ­, Å¾e X je nakonfigurovÃ¡no sprÃ¡vnÄ›
pÅ™edtÃ­m, neÅ¾ pouÅ¾ijete xdm(1) a zcela jistÄ› pÅ™edtÃ­m, neÅ¾ se xdm(1) spustÃ­
pÅ™i startu poÄÃ­taÄe. ProtoÅ¾e jinak to mÅ¯Å¾e bÃ½t tÄ›Å¾kÃ© zÃ­skat kontrolu nad
strojem.

<p>
KdyÅ¾ xdm(1) startuje, tak spouÅ¡tÃ­ <tt>/etc/X11/xdm/Xsession</tt>, kterÃ©
kontroluje jestli mÃ¡ uÅ¾ivatel <tt>.xsession</tt> soubor ve svÃ©m
domovskÃ©m adresÃ¡Å™i.
TakÅ¾e pokud si pÅ™ejete zmÄ›nit vÃ¡Å¡ defaultnÃ­ okennÃ­ manaÅ¾er, tak to udÄ›lejte
(a moÅ¾nÃ¡ i dalÅ¡Ã­ vÄ›ci) v <tt>.xsession</tt>.
Opakujeme, Å¾e jakÃ©koliv programy, kterÃ© chcete spustit zÃ¡roveÅˆ s X
(napÅ™Ã­klad tÅ™i xterm(1)) mohou bÃ½t umÃ­stÄ›ny zde, ale vÅ¡echno musÃ­ bÃ½t
spouÅ¡tÄ›no na pozadÃ­ kromÄ› vaÅ¡eho okennÃ­ho manaÅ¾era a opÄ›t, pokud ten skonÄÃ­
tak vaÅ¡e X sezenÃ­ bude ukonÄeno.
V tom pÅ™Ã­padÄ› xdm(1) restartuje X a pÅ™enese vÃ¡s zpÃ¡tky do pÅ™Ã­hlaÅ¡ovacÃ­
obrazovky.

<h3>11.5.4 - VyzkouÅ¡enÃ­ novÃ©ho okennÃ­ho manaÅ¾era</h3>
MÅ¯Å¾ete spustit konkrÃ©tnÃ­ okennÃ­ manaÅ¾er. kdyÅ¾ nahrÃ¡vÃ¡te X aniÅ¾ by jste
zmÄ›nili jakÃ©koliv defaultni nastavenÃ­ pomocÃ­ tohoto pÅ™Ã­kazu:

<blockquote><pre>
$ startx /usr/local/bin/fluxbox
</pre></blockquote>

NÄ›kolik okennÃ­ch manaÅ¾erÅ¯ (vÄetnÄ› cwm(1) a fvwm(1)) nabÃ­zÃ­ moÅ¾nost zmÄ›nit
okennÃ­ manaÅ¾er za chodu, bez restartovÃ¡nÃ­ X nebo jakÃ©koliv vaÅ¡Ã­ aplikace.
VÃ¡Å¡ novÃ½ okennÃ­ manaÅ¾er nahradÃ­ vÃ¡Å¡ starÃ½. OpuÅ¡tÄ›nÃ­ novÄ› nahranÃ©ho
okennÃ­ho manaÅ¾eru vypne X. NevrÃ¡tÃ­ vÃ¡s to zpÄ›t do vaÅ¡eho pÅ™edchozÃ­ho
okennÃ­ho manaÅ¾eru.
fvwm(1) vÃ¡m umoÅ¾Å„uje spustit jinÃ½ okennÃ­ manaÅ¾er kliknutÃ­m levÃ½m tlaÄÃ­tkem
myÅ¡i na pozadÃ­ ("root window"), vÃ½bÄ›rem "(Re)Start" a nÃ¡slednÃ½m vÃ½bÄ›rem
vaÅ¡eho oblÃ­benÃ©ho okennÃ­ho manaÅ¾eru (uvÄ›domte si ale, Å¾e musÃ­te pÅ™idat
vÃ¡Å¡ alternativnÃ­ okenni manaÅ¾er do vaÅ¡eho <tt>.fvmwrc</tt> souboru
(systÃ©movÃ½ defaultnÃ­ soubor je <tt>/usr/X11R6/lib/X11/fvwm/.fvwmrc</tt>)).
cwm(1) vÃ¡m umoÅ¾Åˆuje spustit jinÃ½ okennÃ­ manaÅ¾er pomocÃ­ stisku kombinace
Ctwl-Alt-w a napsÃ¡nÃ­m nÃ¡zvu manaÅ¾eru do kterÃ©ho se chcete pÅ™epnout.

<p>
Jakmile najdete okennÃ­ manaÅ¾er, kterÃ½ se vÃ¡m lÃ­bÃ­, tak ho mÅ¯Å¾ete nastavit jako
poslednÃ­ program, kterÃ½ spouÅ¡tÃ­ vÃ¡Å¡ startovacÃ­ skript jak je popsÃ¡no vÃ½Å¡e.


<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "../faq10.html">[To Section 10 - SprÃ¡va systÃ©mu]</a>
<a href= "../faq12.html">[To Section 12 - SpecifickÃ© otÃ¡zky o hardware a platformÃ¡ch]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq11.html,v 1.95 ]<br>
$Translation: faq11.html,v 1.16 2012/11/07 13:48:19 bodie Exp $<br>
-->
$OpenBSD: faq11.html,v 1.16 2012/11/08 08:49:02 ajacoutot Exp $
</small>
</body>
</html>
@


1.16
log
@Sync with Steelix CVS
@
text
@d790 1
a790 1
$OpenBSD$
@


1.15
log
@Sync with Steelix CVS
@
text
@d787 2
a788 2
Originally [OpenBSD: faq11.html,v 1.94 ]<br>
$Translation: faq11.html,v 1.15 2012/11/04 07:03:50 bodie Exp $<br>
@


1.14
log
@not maintained anymore, time to go.
@
text
@d2 9
a10 10
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2">
<title>11 - Ladìní vıkonu</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2004 by OpenBSD.">
d13 1
a13 1
<body bgcolor= "#ffffff" text= "#000000"> 
d15 8
a22 6
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq10.html">[Sekce 10 - Správa systému]</a>
<a href= "faq12.html">[Sekce 12 - Platform-Specifické otázky]</a>
d25 1
a25 1
<h1><font color="#e00000">11 - Ladìní vıkonu</font></h1>
d27 1
a27 1
 
d31 6
a36 6
<li><a href="#Network">11.1 - Sí»</a>
<li><a href="#Disk"   >11.2 - Diskové I/O operace</a>
<!-- li><a href="#kmem">11.3 - Ladìní kmem</a></li -->
<li><a href="#HW"     >11.4 - Vıbìr hardware</a>
<li><a href="#Async"  >11.5 - Proè nepou¾íváme async mount ?</a>
<li><a href="#XF86"   >11.6 - Nastavení rozli¹ení monitoru pod XFree86</a>
d42 370
a411 81
Pokud provozujete vytí¾enı server, gateway nebo firewall, mìli byste se
ujistit ¾e jste nastavili nìkteré z defaultních parametrù abyste získali
optimální vıkon. Manuálová stránka 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a> 
pojednává o rùznıch mo¾nostech jak toto realizovat. Tyto options jsou
umístìny do konfiguraèního souboru kernelu pøedtím ne¾ zkompilujete
vlastní kernel a jsou nastavitelné via
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>.
Pro více detailù se podívejte do
<a href="faq5.html">FAQ 5</a>.


<p>
<a name= "Network"></a>
<h2>11.1 - Sí»</h2>

<p>
Jeden z parametrù, kterı budete chtít zmìnit na zatí¾eném serveru,
gatewayi nebo firewallu je NMBCLUSTERS.  Ta kontroluje velikost pamìti
"kernel mbuf cluster map".  Pokud kernel hlásí nìco jako "mb_map full",
mìli byste tuto hodnotu zvı¹it.  Pokud se sí»ovı provoz nebo si»ovı
interface zastaví bez pøíèiny, mù¾e to bıt známka toho, ¾e byste mìli
hodnotu NMBCLUSTERS zvı¹it.  Rozumná hodnota pro i386 verzi s vìt¹inou
100mbit ethernet interfacù (bez ohledu na to, jak je stroj rychlı) je
8192.

<blockquote><strong>
option NMBCLUSTERS=8192<BR>
</strong></blockquote>

<p>
Implicitní hodnota NMBCLUSTERS se li¹í platforma od platformy, od
256 do 2048. Je nastavena v platformovì-závislém hlavièkovém
souboru pokud není pøepsána hodnotou v konfiguraèním souboru
kernelu.

<p>
Hodnota NMBCLUSTERS mù¾e bıt také nastavena pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>,
co¾ eliminuje potøebu kompilovat jádro a rebootovat èistì kvùli zmìnì této
hodnoty:

<blockquote><pre>
# <b>config -e -o bsd.new /bsd</b>
OpenBSD 3.4 (GENERIC) #18: Wed Sep 17 03:34:47 MDT 2003
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
Enter 'help' for information
ukc> <b>nmbclust</b>
nmbclusters = 2048
ukc> <b>nmbclust 8192</b>
nmbclusters = 8192
ukc> <b>quit</b>
Saving modified kernel.
</pre></blockquote>

Toto vytvoøí nové jádro, <tt>bsd.new</tt>, v aktuálním adresáøi,
<i>a</i> modifikuje parametr NMBCLUSTERS bì¾ícího jádra.
Pokud v¹e probìhne správnì, nezapomeòte nakopírovat <tt>bsd.new</tt> do
<tt>/bsd</tt> pøedtím ne¾ budete rebootovat.

 
<p>
<a name= "Disk"></a>
<h2>11.2 - Diskové I/O operace</h2>

<p>
Rychlost diskovıch I/O operací je dùle¾itı faktor v posuzovaní celkového
vıkonu va¹eho poèítaèe. Jeho dùle¾itost se zvy¹uje v multi-u¾ivatelskıch
prostøedích (bráno pro u¾ivatele jakéhokoliv typu, a» u¾ pro ty kteøí se
logují interaktivnì nebo ty, kteøí pou¾ívají napø. file-server  nebo web
server). Ukládání dat vy¾aduje soustavnou pozornost, zvlá¹tì kdy¾ na
diskovıch oddílech dochází místo nebo kdy¾ se zhroutí disk. OpenBSD
nabízí nìkolik mo¾ností jak zrychlit diskové operace a jak poskytnout
faul-tolerance øe¹ení.

<ul>Obsah
<li><a href="#ccd">CCD</a> - Concatenated Disk Driver.
<li><a href="#raid">RAID</a>
<li><a href="#buf">Filesystem Buffer</a>
<li><a href="#softu">Soft Updates</a>
<li><a href="#maxvnodes">Velikost namei() cache</a>
d414 106
d521 32
a552 2
<a name="ccd"></a>
<h3>11.2.1 - CCD</h3>
a553 211
<blockquote>
První mo¾ností je pou¾ít
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">ccd(4)</a>,
Concatenated Disk Driver.  To vám dovolí spojit nìkolik diskovıch oddílù
do jednoho virtuálního disku (a tak mù¾ete dosáhnout toho, ¾e nìkolik
diskù se bude navenek jevit jako jedinnı disk). Tento koncept je podobnı
jako LVM ("logical volume management"), kterı mù¾ete nalézt v mnoha
komerèních implementacích UNIXu.

<p>
Jestli¾e je va¹e jádro GENERIC, je u¾ ccd pøipraveno k pou¾ití. 
(v <tt>/usr/src/sys/conf/GENERIC</tt>). Pokud jste upravovali vá¹
kernel, mù¾ete ho zapnout v konfiguraci jádra.
Ka¾dopádnì, øádek jako tento by mìl bıt ve va¹em konfiguraèním
souboru:

<pre>
       <strong>pseudo-device   ccd     4       # concatenated disk devices</strong>
</pre>

<p>
Vı¹e uvedenı pøíklad vám dovolí pou¾ít a¾ 4 ccd zaøízení (virtuální
disky).  Teï budete potøebovat zjistit jaké diskové oddíly budete chtít
v ccd pou¾ít.  Pou¾ijte disklabel k oznaèení tìchto oddílu pro pou¾ití v
ccd tím, ¾e je oznaèíte jako typ 'ccd'. Na nìkterıch architekturách vám
to disklabel nemusí dovolit, v takovém pøípadì je oznaète jako typ
'ffs'.

<p>
Jestli¾e pou¾íváte ccd jako prostøedek k zlep¹ení vıkonu, mìli byste
vìdìt, ¾e optimálního vıkonudosáhnete pouze pou¾itím stejného modelu
disku s tìmi samımi diklabel nastaveními.

<p>
Zeditujte /etc/ccd.conf aby vypadal nìjak takto:
(pro více informací jak zkonfigurovat ccd se podívejte na:
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&amp;sektion=8">ccdconfig(8)</a>)

<blockquote><pre>
# Konfiguraèní soubor pro ccd disky
#
# ccd   ileave  flags   component devices
ccd0   16      none    /dev/sd2e /dev/sd3e
</pre></blockquote>

<p>
Aby se zmìny projevily, spus»te:

<blockquote><pre>
# ccdconfig -C
</pre></blockquote>

<p>
Jestli¾e existuje /etc/ccd.conf, ccd se nastaví po bootu.  Teï máte novı
disk ccd0, co¾ je kombinace /dev/sd2e a /dev/sd3e.  Teï mù¾ete pou¾ít
disklabel, jako kdybyste normálnì nastavovali diskové oddíly, které
chcete pou¾ít. Opìt, nepou¾ívejte diskovı oddíl 'c' pro ukládání dat.
Ujistìte se, ¾e diskové oddíly urèené k pou¾ití budeou aspoò jeden
cylindr vzdálené od zaèátku disku.
</blockquote>

<p>
<a name="raid"></a>
<h3>11.2.2 - RAID</h3>

<blockquote>
Dal¹ím øe¹ením je
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>.
Obsluze va¹ich raid zaøízení se nastavuje pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&amp;sektion=8">raidctl(8)</a>.
OpenBSD implementace RAID je zalo¾ena na
Greg Osterovì
<a href="http://www.cs.usask.ca/staff/oster/raid.html">NetBSD portu</a>
CMU
<a href="http://www.pdl.cs.cmu.edu/RAIDframe/">RAIDframe</a> software.
OpenBSD podporuje RAID úrovní 0, 1, 4, a 5.

<p>
Raid, stejnì jako ccd, vy¾aduje podporu v KERNELu.
Narozdíl od ccd, podpora pro RAID není obsa¾ena v GENERIC konfiguraci
kernelu, tak¾e musí bıt zakompilována (RAID podpora pøidá kernelu na
'váze' zhruba o 500K, my¹leno na i386 verzi jádra) 

<p>
<blockquote><pre>
<strong>pseudo-device   raid   4       # RAIDframe disk device</strong>
</pre></blockquote>

<p>
Nastavení RAIDu na nìkterıch operaèních systémech je zmatené a
nepøijemné. Ne tak s RAIDframe.

Pøeètìte si manuálové stránky
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a> a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&amp;sektion=8">raidctl(8)</a>
pro dal¹í podrobnosti. Existuje mnoho mo¾ností a mo¾nıch konfigurací, a
podrobné vysvìtlení je pro tento dokument moc detailní.
</blockquote>

<a name="buf"></a>
<h3>11.2.3 - Filesystem Buffer</h3>

<blockquote>
Pro souborové servery s dostatkem pamìti mù¾ete zvı¹it BUFCACHEPERCENT.
To udává, kolik procent systémové pamìti mù¾e bıt pou¾ito jako buffer
pro souborové operace. Tato volba se mù¾e zmìnit, a¾ bude 'Unified
Buffer Cache' zakomponováana do systému OpenBSD. Mezitím, pokud chcete
zvı¹it tuto hodnotu, pøidejte do konfigurèního souboru jádra øádku:
</blockquote>

<blockquote>
<strong>option	BUFCACHEPERCENT=30</strong><br>
</blockquote>

<blockquote>
Samozøejmì mù¾ete tuto hodnotu sní¾it i na 5 procent (defaultní hodnota)
nebo klidnì 50 procent (nebo více).
</blockquote>

<blockquote>
BUFCACHEPERCENT mù¾e bıt také nastavena pomocí 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>,
jako <a href="#Network">vı¹e</a>, co¾ eliminuje potøebu kompilovat kernel
èistì za úèelem zmìny hodnoty této promìnné.
</blockquote>

<p>
<a name="softu"></a>
<h3>11.2.4 - Soft updates</h3>

<blockquote>
Dal¹ím nástrojem, kterı mù¾e bıt pou¾it ke zvı¹ení vıkonnosti va¹eho
systému jsou tzv. softupdates. Jednou z nejpomalej¹ích operací v BSD
file systému je obnova metainfo hodnot (co¾ se stane ve chvíli, kdy
vytváøíte/ma¾ete soubory/adresáøe). Softupdaty toto øe¹í obnovou
metainfa v RAM místo zapisování na disk pøi ka¾dé operaci, kdy se
matainfo mìní.  Toto má dal¹í dodateènı efekt - metainfo na disku by
mìlo bıt v¾dy kompletní, aèkoliv ne v¾dy úplnì aktuální. To znamená, ¾e
kdy¾ spadne systém, nebude muset bıt spu¹tìn
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
po bootu, ale jednodu¹e se pustí fsck na pozadí, která zmìní pøíslu¹né
hodnoty v RAM (a la softupdates). To znamená, ¾e rebootovaní serveru je
mnohem rychlej¹í, tím ¾e nemusíte èekat na fsck ! (OpenBSD je¹tì touto
vlastností nedisponuje) Více o softupdatech si mù¾ete pøeèíst v 
<a href="faq14.html#SoftUpdates">softupdates FAQ</a>.
</blockquote>

<p>
<a name="maxvnodes"></a>
<h3>11.2.5 - Velikost namei() cache</h3>

<dl>
<dd>
Poznámka: døíve doporuèovala manuálová stránka  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
nastavit volbu jádra <TT>NVNODE=integer</TT>. Toto se ale ji¾
nedoporuèuje; mìli byste pou¾ít místo toho pøíkaz 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>

<p>
Tzv. namei() cache známá také jako name-to-inode translation cache
slou¾í pro urychlení pøekladu názvu souboru na èíslo jeho 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inode&amp;sektion=5">inode(5)</a>.
Standardnì má tato cache <tt>NPROC * (80 + NPROC / 8)</tt> polo¾ek.
<tt>NPROC</tt> je nastaveno na <tt>20 + 16 * MAXUSERS</tt>; viz.
manuálová stránka 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>,
kde je vysvìtlen vıznam polo¾ky <tt>maxusers</tt> v konfiguraci jádra.
Postup pøi získávání optimální hodnoty cache spoèívá v tom, ¾e pomocí
nástrojù jako je
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&amp;sektion=1">systat(1)</a>,
zjistíte jaké procento prohledávání namei() cache (cache lookups) bylo
úspì¹né, zjistíte tzv. hit ratio. Pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>,
(promìnná její¾ hodnotu hledáme se nazıvá v sysctl stromu
"<tt>kern.maxvnodes</tt>") zvı¹íme nastavení velikosti namei() cache.
Hodnotu <i>kern.maxvnodes</i> zvy¹ujeme tak dlouho, dokud pozorujeme
nìjakı viditelnı narùst úspì¹nosti zásahu (hit ratio) pøi práci namei()
cache. Poté co jste nalezli optimální hodnotu, mù¾ete ji
nastavit pøi startu v 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl.conf&amp;sektion=5">sysctl.conf(5)</a>.
</dd>
</dl>

<p>
<a name= "HW"></a>
<h2>11.4 - Vıbìr hardware</h2>
<i>(Poznámka- tato sekce je hlavnì o i386 (PC) architektuøe.
Jinak øeèeno... ostatní arhitektury vám nedávají tolik mo¾ností na vıbìr!)
</i>

<p>
Vıkon va¹ich aplikací závisí hodnì na OS a slu¾bách které poskytuje. To
mù¾e bıt jeden z dùvodù pro pou¾íváte OpenBSD.  Vıkon va¹ich aplikaí
zároveò závisí velkou mìrou na hardware.  Pro mnoho lidí mù¾e bıt pomìr
Cena/Vıkon nového PC s procesorem Intel Pentium IV nebo AMD Athlonem
mnohem lep¹í ne¾ pomìr Cena/Vıkon u Sun UltraSparc 60!
Samozøejmì, cena OpenBSD je bezkonkurenèní.

<p>
Jestli¾e nakupujete nové PC, a jestli¾e ho sestavujete èást po èásti,
budete se chtít nejprve ujistit, ¾e kupujete spolehlivé èásti. Ve svìtì
PC to není lehké. 

<b>
©patné nebo jinak nespolehlivé èásti mohou mít ¹patnı vliv na bìh
OpenBSD nebo dokonce ml¾ou zpùsobovat jeho èastı pád.
</b>.
Nejlep¹í rada, kterou vám mù¾eme dát. je bıt opatrní, kupovat znaèky
nebo èásti které byly ovìøené autoritou, které dùvìøujete. Nìkdy, kdy¾
na PC ¹etøíte, mù¾ete zratit na kvalitì!
d555 15
a569 1
Jsou urèité vìci, které vám mohou pøinést maximální vıkon:
d572 25
a596 70
<li><b>Pou¾ijte více diskù.</b>
Namísto abyste kupovali jeden velkı disk, kupte nìkolik men¹ích.
I kdy¾ vás to bude stát víc, distribuovat záte¾ na více disk sní¾í èas
nutnı k pøístupu k datùm na discích. 
A s více disky mù¾ete dosáhnout vìtí spolehlivosti a
rychlej¹ího pøistupu k datùm pokud pou¾ijete RAID.
<p>
<li><b>
Pou¾ívejte SCSI poka¾dé, kdy¾ potøebujete velmi rychlé diskového IO
operace.</b>
<p>
IDE disky normálnì bì¾í od 5400 RPM do 7200 RPM. Pokud pou¾íváte
high-end IDE disky, bylo by nerozumné oèekávat vy¹¹í prùtok dat ne¾ 15
a¾ 20 megabytù za sekundu z jednoho disku. Pokud pou¾ijete high-end
SCSI disky (disky od 10k RPM do 15k RPM stojí o dost více), mù¾ete
dosáhnout vıkonu, kterı je mnohem vy¹¹í ne¾ tyto hodnoty. Pokud se
rozhodnete pou¾ít medium nebo low-end SCSI disky, je to ztráta penìz,
IDE øe¹ení by vám slou¾ilo stejnì dobøe, ne-li lépe.
<P>
Jestli¾e stavíte server a potøebujete více ne¾ ne¾ jeden disk,
mìli byste uva¾ovat o SCSI. IDE vás limituje dvìma disky na øadiè.
Souèasnı pøístup k tìmto diskùm mù¾e mít negativní vliv na I/O vıkon
tìchto diskù.  Wide SCSI vás limituje 15 disky na øadiè a má lep¹í
podporu souèasného pøístupu ne¾ IDE.  Zatímco SCSI vás stojí více,
pru¾nost a vıkon mohou bıt  v jistıch prostøedích 
dobrım dùvodem proè pou¾ít toto øe¹ení.

<p>
<li><b>Pou¾ijte SDRAM namísto DRAM.</b>
Tato mo¾nost se tıká hlavnì PC. Na ostatních architekturách nemáte moc
mo¾ností na vıbìr jakı typ RAM pou¾ít. S SDRAM doáhnete vy¹¹ího vıkonu
ne¾ kdybyste pou¾ili DRAM (SIMM moduly). Pokud vá¹ systém podporuje
RDRAM, DDR nebo jinı typ, jste o krok napøed...
<p>
<li><b>Pou¾ijte ECC nebo RAM s paritou.</b>
Konrola parity pøidává mo¾nost vidìt, jestli byla data v RAM po¹kozena.
ECC roz¹iøuje tuto mo¾nost tak, ¾e pøidává funkci jak tyto chyby opravit
za bìhu.  Tato mo¾nost se tıká hlavnì PC. Na jinıch architekruách je
jednodu¹e vy¾adována pøítomnost RAM s paritou nebo ECC. Nìkteré ne-PC
architektury dokonce odmítnout nabootovat s jinou RAM ne¾ s RAM s
paritou.  Pokud nepou¾íváte RAM  kontrolou parity/ECC mù¾ete oèekávat
po¹kození dat nebo jiné abnormální jevy. Nìkteøí vırobci RAM dokonce
nenabízejí RAM s ECC! To vám mù¾e napovìdìt, ¾e se jim máte vyhnout!
Vırobci PC èasto dodávají nìkolik øad rozdìlench na "servery" a
"workstations". Servery zahrnují zpravidla ECC RAM ve svıch
konfiguracích. Vırobci pracovních stanic s Unixem pou¾ívají RAM s
kontrolou parity (a dnes ECC) u¾ nìkolik let ve v¹ech svıch produktovıch
øadách.
<p>
<li><b>Vyhnìte se pou¾ití ISA zaøízení.</b>
Pøesto¾e se mnoho lidí sna¾í vyhnout ISA zaøízením, proto¾e je obecnì
tì¾¹í je nakonfigurovat, stále jich existuje je¹tì dost. Pokud pou¾íváte
ISA sbìrnici pro va¹e disky nebo sí»ové karty (nebo je¹tì hùøe oboje)
pamatujte, ¾e ISA mù¾e bıt právì to úzké hrdlo, které omezuje vá¹ vıkon.
Pokud potøebujete rychlost, poohlédnìte se po PCI. Samozøejmì, stále
exituje nìkolik ISA sbìrnicovıch karet, které pracují docela dobøe.
Nane¹tìstí vìt¹ina tìchto karet jsou zvukové karty nebo karty se
sériovımi porty.
<p>
<li><b>Vyhnìte se levnım sí»ovım PCI kartám.</b>
OpenBSD podporuje spostu levnıch PCI sí»ovıch adaptérù. Tyto adaptéry
pracují perfektnì v systémech doma, a také v klidnıch byznys a
vıvojovıch prostøedích.  Ale jakmile potrebujete vysokı prùtok a pøitom
malou zátì¾ va¹eho serveru, mìli byste lépe pou¾ít kvalitní PCI adaptér.
Nane¹tìstí, nìkteré drahé znaèkové adaptéry (jako napøíklad øada 3com
XL) nejsou o moc lep¹í ne¾ jejich levné varianty. Na¹e oblíbené adaptéry
pro 10/100Mbps ethernet jsou karty Intel EtherExpress PRO/100.
<b>Poznámka: Toto mù¾eme z hlediska èeského OpenBSD projektu jenom
potvrdit.  Levné sí»ové adaptéry mohou dokonce pøi vysokém prùtoku dat
zpùsobovat tuhnutí serveru, o kterém se nedozví ani kernel!</b>
d599 83
d684 83
a766 2
<a name= "Async"></a>
<h2>11.5 - Proè nepou¾íváme asynchronní mount?</h2>
d769 2
a770 145
Otázka: "Jednodu¹e provedu "mount -u -o async /" co¾ je nutné pro balík
kterı pou¾ívám.  (proto¾e èas od èasu vy¾aduje pøístup k nìkolika
sotvkám souborù souèasnì).
Proè je asynchronní mount nepou¾íván defaultnì (jako v nìkolika
ostatních unixech )? Není to je mnohem jednodu¹¹í a tím pádem i
bezpeènìj¹í cesta jak dosáhnout zlep¹ení vıkonu v mnoha aplikacích?"

<p>
Odpovìï: "Asynchronní mount je opravdu rychlej¹í nez synchronní, ale je
naopak ménì bezpeènìj¹í. Co se stane v pøípadì, ¾e vypadne proud? Nebo
hardwarovı problém? Hon za vıkonem by nemìl mít za obì» spolehlivost nebo
stabilitu systému. Pøeètìte si manuálovou stránku pro
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;sektion=8">mount(8)</a>."
<pre>
	     async   All I/O to the file system should be done asynchronously.
		     This is a dangerous flag to set since it does not guaran-
		     tee to keep a consistent file system structure on the
		     disk.  You should not use this flag unless you are pre-
		     pared to recreate the file system should your system
		     crash.  The most common use of this flag is to speed up
		     restore(8) where it can give a factor of two speed in-
		     crease.
</pre>

<p>
Na druhou stranu, pokud se jedná o temp data která mù¾ete vytvoøit znovu
po crashi, mù¾ete získat rychlost tím, ¾e vytvoøíte oddìlenı diskovı
oddíl, kterı budete pou¾ívat pouze pro tato data a bude ho mountovat
asychronnì.  Opìt, udìlejte to <i>jen tehdy</i>,  pokud vám nevadí
mo¾nost ztráty v¹ech dat na tomto diskovém oddílu pokud se nìco pokazí.
Z tohoto dùvodu jsou 
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mfs&sektion=8">mfs(8)</a>
oddíly mountovány asynchronnì, proto¾e stejnì budou pøi rebootu zru¹eny
a znovu vytvoøeny.


<p>
<a name= "XF86"></a>
<h2>11.6 - nastavení rozli¹ení monitoru pod XFree86</h2>

<p>
Na mnoha multi-async monitorech je mo¾né nastavit pod X serverm
pøijatelné rozli¹ení. Pokud to nìkdo zkou¹el za pomoci standartních
utilit jako jsou xf86config nebo XF86Setup, nedostal pravdìpodobnì
nejlep¹í mo¾né rozli¹ení.  Jeden z nejtì¾¹ích úkolù je dostat vámi
po¾adované rozli¹ení a zároveò nastavit vertiklání obnovovací frekvenci
aspoò 72-75 Hz, co¾ je dolní hodnota nad kterou je blikání pro lidské
oko ménì viditelné pro vìt¹inu lidí.  Naopak, mù¾ete chtít nastavit
vertikální frekvenci tak, aby byla dost nízká.  Mù¾ete ji nastavit napø.
na 50 Hz, tak¾e obraz na monitoru bude mo¾no zachytit na video bez
blikání, ale motody jak thoo dosáhnout jsou ne a¾ tak zøejmé pøi pou¾ití
standardních metod poskyovanıch XFree86 a pøislu¹né dokumentaci.

<p>
Koneènì, v rozli¹eních, které pou¾ívá mnoho lidí s docela levnımi VGA
monitory (800x600, 1024x768, 1152x900, 1280x1024), je mo¾né (aspoò na
novìj¹ích monitorech) nastavit vertikální obnovoací frekvenci na 85Hz a
vı¹e k dosa¾ení extrémnì èistého obrazu.  XFree86 X server poskytuje
mechanismus, terı vám dovolí popsat detailnì vido mód kterı budete chtít
pou¾ít, kterı se nazıvá ModeLine. ModeLine má ètyøi sekce, jedno èíslo
pro pixel clock, ètyøi èísla pro horizontální èasování, ètyøi pro
vertikální èasování a nepovinnou sekci, kde je mo¾né nastavit speciální
flagy (jako napø. Interlace, DoubleScan, a dal¹í... Podívejte se na
manuálovou stránku XF86Config(5) pro více detailù.)

<P>
Vygenerování ModeLine je magie... Na¹tìstí, existuje nìkolik skriptù,
které to mohou udìlat za vás. Jeden je  
<a href="http://www-sop.inria.fr/cgi-bin/koala/nph-colas-modelines">Colas
XFree86 ModeLine Generator</a>. Dal¹í je 
<a href="http://xtiming.sourceforge.net/">The XFree86 Modeline Generator</a>
na SourceForge a nìkolik dal¹ích, které jsou na 
<a href="http://freshmeat.net/search/?q=modeline">Freshmeatu</a>.
Ne¾ pou¾ijete tyto ModeLine generátory, mìli byste si zjistit vertikální
a gorizontální maxima pro vá¹ monitor. Toto je èasto popsáno v
dokumentaci nebo na stránce vırobce. Jestli¾e jste to nena¹li ani tam,
zkuste hledat jednodu¹e na webu znaèku monitoru a model, nìkteøí lidé
byli tak laskaví, ¾e slo¾ili seznamy s tìmito informacemi.

<p>
Na pøíklad, øeknìme, ¾e máte monitor Dell D1226H. Tì¾ce jste na webu
spoleènosti Dell na¹li, ¾e mù¾ete pou¾ít rozmezí 30-95 kHz pro
horizontální frekvence. Podívejte se na stránku ModeLine generatoru a
zadejte tuto informaci. Dále budete potøebovat zadat minimální
vetrtikální obnovovací frekvenci, kterou budete chtít pou¾ít.  Hodnoty
nad 72Hz by mìluy obecnì produkovat docela malé blikání obrazu. S tím
jak pùjdete vı¹e, tím lep¹í bude kvalita a stabilita obrazu.

<p>
Se v¹emi tìmito kousky informace, vygeneruje skript ModeLine pro ka¾dé
mo¾né 4x3 ozli¹ení, které vás monitor ml¾e podporovat, aspoò s  hodnotou
vertikální obnovovací frekvence kterou jste zadali.  Pokud nìkdo zadá
paramerty Dell monitoru uvedené vı¹e s nejni¾¹í vertikální
frekvencí 75 Hz, skript vyprodukuje nìco jako následující:

<pre>
ModeLine "320x240" 20.07 320 336 416 448 240 242 254 280 #160Hz
ModeLine "328x246" 20.86 328 344 424 456 246 248 260 286 #160Hz
...
ModeLine "816x612" 107.39 816 856 1056 1136 612 614 626 652 #145Hz
ModeLine "824x618" 108.39 824 864 1064 1144 618 620 632 658 #144Hz
ModeLine "832x624" 109.38 832 872 1072 1152 624 626 638 664 #143Hz
...
ModeLine "840x630" 109.58 840 880 1080 1160 630 632 644 670 #141Hz
ModeLine "848x636" 110.54 848 888 1088 1168 636 638 650 676 #140Hz
...
ModeLine "1048x786" 136.02 1048 1096 1336 1432 786 788 800 826 #115Hz
ModeLine "1056x792" 136.58 1056 1104 1344 1440 792 794 806 832 #114Hz
ModeLine "1064x798" 137.11 1064 1112 1352 1448 798 800 812 838 #113Hz
...
ModeLine "1432x1074" 184.07 1432 1496 1816 1944 1074 1076 1088 1114 #85Hz
ModeLine "1576x1182" 199.86 1576 1648 2008 2152 1182 1184 1196 1222 #76Hz
ModeLine "1584x1188" 198.93 1584 1656 2016 2160 1188 1190 1202 1228 #75Hz
</pre>

<p>
Monitor tvrdí, ¾e umí 1600x1200 @@ 75 Hz, ale skript netvrdí, ¾e to je v
rozmezí 75 Hz. Tak¾e, pokud opravdu chcete pou¾ít rozli¹ení 1600x1200,
budete muset o nìco sní¾it minimální evtrtikální frekvenci... (Tady jsme
¹li dolù na 70 Hz)

<pre>
ModeLine "1592x1194" 197.97 1592 1664 2024 2168 1194 1196 1208 1234 #74Hz
ModeLine "1600x1200" 199.67 1600 1672 2032 2176 1200 1202 1214 1240 #74Hz
ModeLine "1608x1206" 198.65 1608 1680 2040 2184 1206 1208 1220 1246 #73Hz
ModeLine "1616x1212" 197.59 1616 1688 2048 2192 1212 1214 1226 1252 #72Hz
ModeLine "1624x1218" 199.26 1624 1696 2056 2200 1218 1220 1232 1258 #72Hz
ModeLine "1632x1224" 198.15 1632 1704 2064 2208 1224 1226 1238 1264 #71Hz
ModeLine "1640x1230" 199.81 1640 1712 2072 2216 1230 1232 1244 1270 #71Hz
ModeLine "1648x1236" 198.64 1648 1720 2080 2224 1236 1238 1250 1276 #70Hz
</pre>

<p>
Tady vidíme, ¾e monitor opravdu umí 1600x1200 @@ 74 Hz kdy¾ bude
bandwidth limitován na 200MHz. Nastavte bandwidth podle limitù
definovanıch monitorem.

<p>
Jakmile máte va¹e nastaveni ModeLine, ulo¾te je do souboru
/etc/XF86Config.  Zakomentujte staré ModeLine, tak¾e je budete moci
pou¾ít znovu, pokud nové nastavní nebude fungovat.  Dále, vyberte si
rozli¹ení, které budete chtít provozovat. Nejdøíve zjistìte, jestli X
server bì¾í v akcelerovaném módu (co¾ je pravda s vìt¹inou karet), tak¾e
víte kterou sekci  <TT>"Screen"</tt> modifikovat.  Nebo jednudu¹e zmìnte
v¹echny tyto sekce.
a771 60
<pre>
Section "Screen"
   Driver          "Accel"
   Device          "Primary Card"
   Monitor         "Primary Monitor"
   DefaultColorDepth 32
   SubSection "Display"
      Depth        32
      Modes        "1280x1024" "1024x768"
   EndSubSection
</pre>

<p>
První rozli¹ení, kterou vidíte za øádkou s "Modes" je ta frekvence s
kerou se X server spustí. jestli ¾e stisknete CTRL-ALT-KEYPAD MINUS,
nebo CTRL-ALT-KEYPAD PLUS, mù¾ete pøepínat mezi frekvencemi, které jsou
zde ulo¾eny.  Podle sekce uvedené vı¹e se X server spustí v 32-bit
barevném médu (pøes direktivu DefaultColorDepth, bez ní by se X server
spustil v 8-bitovém módu.) První rozli¹ení které X server zkusí pou¾ít
bude 1280x1024 (podle poøadí na øádce s Modes.) "1280x1024" je pouze
oznaèení pøíslu¹né rádky ModeLine.

<p>
ModeLine generator skript má mo¾nosti nastavit volnìji rozmezí èasování
pro star¹í nebo men¹í monitory a zároveò schopnost poskytnout ModeLines
pro specifická rozli¹ení. V zaávislosti na typu hardware, kterı
pou¾íváte nemusí bıt moc snadné pou¾ít jej s defaultním nastavením.
Pokud je obraz moc vysokı, ¹irokı nebo pøíli¹ malı, nebo je posunutı
horizontálnì nebo vertilálnì, a mo¾nosti monitoru jak nastavit obraz
nestaèí, zkuste pou¾ít xvidtune(1) k nastavení ModeLine aby lépe
vyhovovala parametrùm monitoru. 

<p>
Vìt¹ina novıch monitorù nemá pevnı bandwidth, tak¾e nejsou èasto
zahrnuty v sepcifikacích. Èím vy¹¹í nastavujete bandwidth, tím více se
obraz stává zaml¾enìj¹í.  Tak¾e pokud chcete nastavit optimální
bandwidth (èasto nazıvanı "dotclock") mù¾ete testovat (tímto zpùsobem
nemù¾ete vás monitor po¹kodit) a pak jít dolù a¾ do chvíle kdy dostanete
èistı obraz.

<p>
Mù¾e to vypada zbyteènì slo¾ité, to proto, ¾e to ve skuteènosti je.
XFree86 4.0 se s tímto sna¾í vyrovnat a tento proces zjednodu¹it tím, ¾e
má mnoho módù u¾ zabudovanıch a umí si naèíst parametry z "plug and
play" monitorù pøes DDC a DDC2. 

<p>
Colas XFree86 ModeLine Generator script si mù¾ete stáhnout z: 
<a href="ftp://koala.inria.fr/pub/Klone/">ftp://koala.inria.fr/pub/Klone/</a>.
Budete potøebovat Klone interpretr, a zkompilovat ho. Je v portech jako
lang/klone. Skripty se nacházejí v adresáøi s distribucí Klone (port se
nainstaluje do /usr/local/lib/klone/scripts.)

<p>
Existují dvì verze skriptu = jedna je CGI verze identická s tou, která
se nachází na stránce urèené vı¹e. Ta druhá je ne-CGI verze, která vezme
vá¹ kompletní XF86Config soubor, dekóduje specifikace monitoru, které
jste zadali do  xf86config/XF86Setup (teï se zamyslete, jestli jste
oprabvdu zadali hodnoty nebo si vybrali z nabízenıch) a pøenastaví podle
toho øádky s ModeLines.
d776 2
a777 2
<a href= "faq10.html">[Sekce 10 - Administrace systému]</a>
<a href= "faq12.html">[Sekce 12 - Platformovì závislé otázky]</a>
d784 1
d786 5
a790 6
<br>
Originally [OpenBSD: faq11.html,v 1.48 ]
<br>
$Translation: faq11.html,v 1.13 2004/01/11 21:41:15 certik Exp $
<br>
$OpenBSD: faq11.html,v 1.13 2004/01/16 20:30:20 jufi Exp $
a791 1

@


1.13
log
@Sync with Steelix CVS
@
text
@d645 1
a645 1
$OpenBSD$
@


1.12
log
@Sync with Steelix CVS
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
d641 1
a641 1
Originally [OpenBSD: faq11.html,v 1.47 ]
d643 1
a643 1
$Translation: faq11.html,v 1.12 2003/11/09 21:56:58 certik Exp $
@


1.11
log
@Sync with Steelix CVS
@
text
@d85 1
a85 1
OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
d641 1
a641 1
Originally [OpenBSD: faq11.html,v 1.46 ]
d643 1
a643 1
$Translation: faq11.html,v 1.11 2003/11/02 21:48:53 certik Exp $
@


1.10
log
@Sync with Steelix CVS
@
text
@d1 1
d5 1
a5 1
<title>11.0 - Ladìní vıkonu</title>
d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
d18 5
a22 2
<h2><font color=#e00000>11.0 - Ladìní vıkonu</font><hr></h2>
</p>
d24 3
d28 4
a31 3
<ul><h3>Obsah</h3>
<li><a href="#Network">11.1 - Sí»</a></li>
<li><a href="#Disk">11.2 - Diskové I/O operace</a></li>
d33 3
a35 3
<li><a href="#HW">11.4 - Vıbìr hardware</a></li>
<li><a href="#Async">11.5 - Proè nepou¾íváme async mount ?</a></li>
<li><a href="#XF86">11.6 - Nastavení rozli¹ení monitoru pod XFree86</a></li>
d37 1
a37 1
</p> 
d43 2
a44 2
optimální vıkon.  Manuálová stránka 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">options(4)</a>
d47 3
a49 1
vlastní kernel. Pro více detailù se podívejte do
d52 1
a55 1
</p>
a65 1
</p>
d67 1
a67 2
<ul>
<strong>
d69 3
a71 2
</strong>
</ul>
a75 1
<br>
d78 25
a104 1
</p>
a114 1
</p>
d117 5
a121 5
	<li><a href="#ccd">CCD</a> - Concatenated Disk Driver.
	<li><a href="#raid">RAID</a>
	<li><a href="#buf">Filesystem Buffer</a>
	<li><a href="#softu">Soft Updates</a>
        <li><a href="#maxvnodes">Velikost namei() cache</a>
d123 1
d126 3
a128 2
<H3>11.2.1 - CCD</H3><UL>
<p>
d130 1
a130 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&apropos=0&sektion=4&format=html">ccd(4)</a>,
a142 1
</p>
a143 1
<p>
a146 1
</p>
d164 3
a166 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&apropos=0&sektion=8&format=html">ccdconfig(8)</a>)
<ul>
<pre>
d171 3
a173 1
</pre></ul>
d175 6
a180 2
<ul><pre># ccdconfig -C
</pre></ul>
d187 1
a187 3
</p>
</UL>
<br>
d189 1
d191 3
a193 3
<H3>11.2.2 - RAID</H3>
<UL>
<p>
d195 4
a198 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a>,
které budete chtít pou¾ít
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&apropos=0&sektion=8&format=html">raidctl(8)</a>
k obsluze va¹ich raid zaøízení. OpenBSD implementace RAID je zalo¾ena na
a209 1
</p>
d212 1
a212 2
<ul>
<pre>
d214 2
a215 2
</pre>
</ul>
d221 2
a222 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a> a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&apropos=0&sektion=8&format=html">raidctl(8)</a>
d225 1
a225 2
</UL>
<BR>
d229 2
a230 1
<ul>
d236 1
a236 1
</p>
d238 1
a238 2
<p>
<ul>
d240 3
a242 3
</ul>
</p>
<p>
d245 8
a252 3
</p>
</UL>
<br>
d254 1
d256 3
a258 1
<H3>11.2.4 - Soft updates</H3><UL>
d273 1
a273 3
</ul>
</p>
<br>
d278 1
a280 1
<p>
d282 1
a282 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a>
d285 1
a285 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a>.
</p>
d289 2
a290 2
slou¾í pro urychlení pøekladu názvu souboru na èíslo jeho i-uzlu 
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inode&sektion=5&format=html">inode(5)</a>).
d294 1
a294 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a>,
d298 1
a298 1
 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&sektion=1&format=html">systat(1)</a>,
d300 2
a301 2
úspì¹né, zjistíte tzv. hit ratio.  Pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a>,
d308 3
a310 5
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl.conf&sektion=5&format=html">sysctl.conf(5)</a>.
 </dd>
 </dl>
 </p>
 <br>
a312 8
<!-- a name= "kmem"></a>
<h2>11.3 - Ladìní kmem</h2>
</p>
Tato èást bvyla pøesunuta do
<a href="../faq11-2.5.html#11.2">OpenBSD 2.5 sekce</a>.
<br>
<p -->

a314 1
</p>
d318 2
a319 1
<P>
d326 2
a327 1
<P>
d341 1
d343 5
a347 5
<li>Pou¾ijte více diskù.
<p>
Kupte více 9GB diskù místo nákupu jednoho 20GB disku. I kdy¾ vás to bude
stát víc, distribuovat záte¾ na více disk sní¾í èas nutnı k pøístupu k
datùm na discích. A s více disky mù¾ete dosáhnout vìtí spolehlivosti a
d350 1
a350 1
<lI>
d352 1
a352 1
operace.
d356 1
a356 1
a¾ 20 megabytù za sekundu z jednoho disku.  Pokud pou¾ijete high-end
d362 1
a362 1
Jestli¾e stavíte server a potøebujete více nez 20GB diskového prostoru,
d369 3
a371 3
<P>
<li>Pou¾ijte SDRAM namísto DRAM.
<P>
d376 2
a377 3
<P>
<li>Pou¾ijte ECC nebo RAM s paritou.
<P>
d391 2
a392 3
<P>
<LI>Vyhnìte se pou¾ití ISA zaøízení.
<P>
d401 2
a402 3
<P>
<LI> Vyhnìte se levnım sí»ovım PCI kartám.
<P>
a412 1
<p>
d414 1
a414 1
<br>
d419 1
a426 1
</p>
d433 1
a433 2
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mount&apropos=0&sektion=8&format=html">mount(8)</a>."
</p>
d444 1
a454 1
</p>
d456 1
a456 1
<br>
d460 1
d473 2
a474 1
<P>
d500 1
a500 1
<P>
d508 2
a509 1
<P>
d515 2
a516 2
<P>
<PRE>
d534 3
a536 2
</PRE>
<P>
d541 2
a542 1
<Pre>
d551 3
a553 2
</PRE>
<P>
d557 2
a558 1
<P>
d566 2
a567 1
<PRE>
d577 3
a579 1
</PRE>
d588 2
a589 1
<P>
d598 2
a599 1
<P>
d606 2
a607 1
<P>
d612 2
a613 1
<P>
d619 2
a620 1
<P>
d627 1
d630 3
a632 3
<a href= "index.html">[Zpìt na Index]</a>
<a href= "faq10.html">[To Section 10.0 - Administrace systému]</a>
<a href= "faq12.html">[To Section 12.0 - Pro pokroèilé]</a>
a633 1
</p>
d641 1
a641 1
Originally [OpenBSD: faq11.html,v 1.29 ]
d643 1
a643 1
$Translation: faq11.html,v 1.10 2003/10/29 08:13:12 certik Exp $
@


1.9
log
@
sync with badlands translation CVS,
work by Vaclav Rehak <vasek@@openbsd.cz>
@
text
@d604 1
a604 1
$Translation: faq11.html,v 1.9 2002/09/09 17:41:42 certik Exp $
@


1.8
log
@
sync with badlands translation CVS
@
text
@d604 1
a604 1
$Translation: faq11.html,v 1.8 2002/09/09 07:53:46 certik Exp $
@


1.7
log
@
sync with badlands translation CVS, work by Vladimir Kotal
@
text
@d34 2
a35 3
ujistit ¾e jste nastavili nìkteré z defaultních parametrù abyste
získali optimální vıkon. 
Manuálová stránka 
d37 5
a41 4
pojednává o rùznıch mo¾nostech jak toto realizovat. Tyto options
jsou umístìny do konfiguraèního souboru kernelu pøedtím ne¾
zkompilujete vlastní kernel. Pro více detailù se podívejte do <a
href="faq5.html">FAQ 5</a>.
d48 8
a55 8
Jeden z parametrù, kterı budete chtít zmìnit na zatí¾eném serveru, gatewayi
nebo firewallu je NMBCLUSTERS.
Ta kontroluje velikost pamìti "kernel mbuf cluster map".
Pokud kernel hlásí nìco jako "mb_map full", mìli byste tuto hodnotu zvı¹it.
Pokud se sí»ovı provoz nebo si»ovı interface zastaví bez pøíèiny, mù¾e to bıt
známka toho, ¾e byste mìli hodnotu NMBCLUSTERS zvı¹it.
Rozumná hodnota pro i386 verzi s vìt¹inou 100mbit ethernet interfacù (bez
ohledu na to, jak je stroj rychlı) je 8192.
d79 4
a82 4
server)
Ukládání dat vy¾aduje soustavnou pozornost, zvlá¹tì kdy¾ na diskovıch oddílech
dochází místo nebo kdy¾ se zhroutí disk. OpenBSD nabízí nìkolik mo¾ností jak
zrychlit diskové operace a jak poskytnout faul-tolerance øe¹ení.
d96 9
a104 6
První mo¾ností je pou¾ít <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&apropos=0&sektion=4&format=html">ccd(4)</a>, Concatenated Disk Driver.
To vám dovolí spojit nìkolik diskovıch oddílù do jednoho virtuálního disku (a
tak mù¾ete dosáhnout toho, ¾e nìkolik diskù se bude navenek jevit jako jedinnı
disk). Tento koncept je podobnı jako LVM ("logical volume management"), kterı
mù¾ete nalézt v mnoha komerèních implementacích UNIXu.
<P>
d108 1
a108 1
Ka¾dopádnì, øádek jato tento by mìl bıt ve va¹em konfiguraèním
d119 13
a131 10
Vı¹e uvedenı pøíklad vám dovolí pou¾ít a¾ 4 ccd zaøízení (virtuální disky).
Teï budete potøebovat zjistit jaké diskové oddíly budete chtít v ccd pou¾ít.
Pou¾ijte disklabel k oznaèení tìchto oddílu pro pou¾ití v ccd tím, ¾e je
oznaèíte jako typ 'ccd'. Na nìkterıch architekturách vám to disklabel nemusí
dovolit, v takovém pøípadì je oznaète jako typ 'ffs'.
<p>
Jestli¾e pou¾íváte ccd jako prostøedek k zlep¹ení vıkonu, mìli byste vìdìt, ¾e
optimálního vıkonudosáhnete pouze pou¾itím stejného modelu disku s tìmi samımi
diklabel nastaveními.
<P>
d135 2
a136 2
<UL>
<PRE>
d141 1
a141 1
</PRE></UL>
d143 7
a149 7
<UL><PRE># ccdconfig -C
</PRE></UL>
Jestli¾e existuje /etc/ccd.conf, ccd se nastaví po bootu.
Teï máte novı disk ccd0, co¾ je kombinace /dev/sd2e a /dev/sd3e.
Teï mù¾ete pou¾ít disklabel, jako kdybyste normálnì nastavovali diskové
oddíly, které chcete pou¾ít. Opìt, nepou¾ívejte diskovı oddíl 'c' pro ukládání
dat. Ujistìte se, ¾e diskové oddíly urèené k pou¾ití budeou aspoò jeden
d159 7
a165 5
Dal¹ím øe¹ením je <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a>,
které budete chtít pou¾ít <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&apropos=0&sektion=8&format=html">raidctl(8)</a>
k obsluze va¹ich raid zaøízení. OpenBSD implementace RAID je zalo¾ena na 
Greg Osterovì <a href="http://www.cs.usask.ca/staff/oster/raid.html">NetBSD
portu</a>
d168 4
a171 2
OpenBSD podporuje RAID úrovní
0, 1, 4, a 5.<P> Raid, stejnì jako ccd, vy¾aduje podporu v KERNELu.
d173 2
a174 2
kernelu, tak¾e musí bıt zakompilována (RAID podpora pøidá kernelu na 'váze' zhruba o
500K, my¹leno na i386 verzi jádra) 
d178 1
a178 1
<UL>
d182 4
a185 4
</UL>
<P>
Nastavení RAIDu na nìkterıch operaèních systémech je zmatené a nepøijemné. Ne
tak s RAIDframe.
d187 2
a188 1
Pøeètìte si <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a> and
d190 2
a191 3
manuálové stranky pro více detailù. Existuje mnoho
mo¾ností a mo¾nıch konfigurací, a detailní vysvìtlení je pro tento dokument moc
detailní.
d196 2
a197 2
<H3>11.2.3 - Filesystem Buffer</H3>
<UL>
d199 4
a202 4
To udává, kolik procent systémové pamìti mù¾e bıt pou¾ito jako buffer pro
souborové operace. Tato volba se mù¾e zmìnit, a¾ bude 'Unified Buffer Cache'
zakomponováana do systému OpenBSD. Mezitím, pokud chcete zvı¹it tuto hodnotu,
pøidejte do konfigurèního souboru jádra øádku:
d206 3
a208 3
<UL>
<strong>option	BUFCACHEPERCENT=30</strong><BR>
</UL>
d211 2
a212 2
Samozøejmì mù¾ete tuto hodnotu sní¾it i na 5 procent (defaultní hodnota) nebo
klidnì 50 procent (nebo více).
d219 13
a231 11
Dal¹ím nástrojem, kterı mù¾e bıt pou¾it ke zvı¹ení vıkonnosti va¹eho systému
jsou tzv. softupdates. Jednou z nejpomalej¹ích operací v BSD file systému je
obnova metainfo hodnot (co¾ se stane ve chvíli, kdy vytváøíte/ma¾ete
soubory/adresáøe). Softupdaty toto øe¹í obnovou metainfa v RAM místo
zapisování na disk pøi ka¾dé operaci, kdy se matainfo mìní.
Toto má dal¹í dodateènı efekt - metainfo na disku by mìlo bıt v¾dy kompletní,
aèkoliv ne v¾dy úplnì aktuální. To znamená, ¾e kdy¾ spadne systém, nebude
muset bıt spu¹tìn <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a> po bootu, ale jednodu¹e se pustí fsck na pozadí, která
zmìní pøíslu¹né hodnoty v RAM (a la softupdates). To znamená, ¾e rebootovaní
serveru je mnohem rychlej¹í, tím ¾e nemusíte èekat na fsck ! (OpenBSD je¹tì
touto vlastností nedisponuje) Více o softupdatech si mù¾ete pøeèíst v 
d233 1
a233 1
</UL>
d235 2
a236 1
<BR>
d239 3
a241 3
<H3>11.2.5 - Velikost namei() cache</H3>
<DL>
<DD>
d244 17
a260 14
 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a>
nastavit volbu jádra <TT>NVNODE=integer</TT>. Toto se ale ji¾ nedoporuèuje; mìli byste pou¾ít
místo toho pøíkaz 
 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a>.
 </p>
 <p>
Tzv. namei() cache známá také jako name-to-inode translation cache slou¾í pro urychlení pøekladu
názvu souboru na èíslo jeho i-uzlu 
 (<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inode&sektion=5&format=html">inode(5)</a>).
Standardnì má tato cache <TT>NPROC * (80 + NPROC / 8)</TT> polo¾ek.  <TT>NPROC</TT> je nastaveno
na <TT>20 + 16 * MAXUSERS</TT>; viz. manuálová stránka 
 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a>,
kde je vysvìtlen vıznam polo¾ky <TT>maxusers</TT> v konfiguraci jádra.
Postup pøi získávání optimální hodnoty cache spoèívá v tom, ¾e pomocí nástrojù jako je
d262 8
a269 5
zjistíte jaké procento prohledávání namei() cache (cache lookups) bylo úspì¹né, zjistíte tzv. hit ratio.
Pomocí  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8&format=html">sysctl(8)</a>,
(promìnná její¾ hodnotu hledáme se nazıvá v sysctl stromu  "<TT>kern.maxvnodes</TT>") zvı¹íme nastavení
velikosti namei() cache. Hodnotu <i>kern.maxvnodes</i> zvy¹ujeme tak dlouho, dokud pozorujeme nìjakı viditelnı
narùst úspì¹nosti zásahu (hit ratio) pøi práci namei() cache. Poté co jste nalezli optimální hodnotu, mù¾ete ji
d271 3
a273 3
 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl.conf&sektion=5&format=html">sysctl.conf(5)</a>.
 </DD>
 </DL>
d275 2
a276 1
 <BR>
d281 2
a282 1
Tato èást bvyla pøesunuta do <a href="../faq11-2.5.html#11.2">OpenBSD 2.5 sekce</a>.
d285 1
d290 1
a290 1
Jinak øeèeno... ostatní arhitektury vám neávají tolik mo¾ností na vıbìr!)
d293 5
a297 5
Vıkon va¹ich aplikací závisí hodnì na OS a slu¾bách které poskytuje. To mù¾e
bıt jeden z dùvodù pro pou¾íváte OpenBSD.
Vıkon va¹ich aplikaí zároveò závisí velkou mìrou na hardware.
Pro mnoho lidí mù¾e bıt pomìr Cena/Vıkon nového PC s procesorem Intel Pentium
IV nebo AMD Athlonem mnohem lep¹í ne¾ pomìr Cena/Vıkon u Sun UltraSparc 60!
d300 3
a302 3
Jestli¾e nakupujete nové PC, a jestli¾e ho sestavujete èást po èásti, budete
se chtít nejprve ujistit, ¾e kupujete spolehlivé èásti. Ve svìtì PC to není
lehké. 
d305 2
a306 2
©patné nebo jinak nespolehlivé èásti mohou mít ¹patnı vliv na bìh OpenBSD nebo
dokonce ml¾ou zpùsobovat jeho èastı pád.
d308 4
a311 4
Nejlep¹í rada terou vám ml¾eme dát je bıt opatrní, kupovat znaèky nebo èásti
které byly ovìøené autoritou, které dùvìøujete. Nìkdy, kdy¾ na PC ¹etøíte, mù¾ete
zratit na kvalitì!
<P>
d313 26
a338 24
<UL>
<LI>Pou¾ijte více diskù.
<P>
Kupte více 9GB diskù místo nákupu jednoho 20GB disku. I kdy¾ vás to bude stát
víc, distribuovat záte¾ na více disk sní¾í èas nutnı k pøístupu k datùm na
discích. A s více disky mù¾ete dosáhnout vìtí spolehlivosti a rychlej¹ího
pøistupu k datùm pokud pou¾ijete RAID.
<p>
<LI>
Pou¾ívejte SCSI poka¾dé, kdy¾ potøebujete velmi rychlé diskového IO operace.
<P>IDE disky normálnì bì¾í od 5400 RPM do 7200 RPM. Pokud
pou¾íváte high-end IDE disky, bylo by nerozumné oèekávat vy¹¹í prùtok dat ne¾
15 a¾ 20 megabytù za sekundu z jednoho disku.
Pokud pou¾ijete high-end SCSI disky (disky od 10k RPM do 15k RPM stojí o dost více),
mù¾ete dosáhnout vıkonu, kterı je mnohem vy¹¹í ne¾ tyto hodnoty. Pokud se
rozhodnete pou¾ít medium nebo low-end SCSI disky, je to ztráta penìz, IDE
øe¹ení by vám slou¾ilo stejnì dobøe, ne-li lépe.
<P>
Jestli¾e stavíte server a potøebujete více nez 20GB diskového prostoru, mìli
byste uva¾ovat o SCSI. IDE vás limituje dvìma disky na øadiè. Souèasnı pøístup
k tìmto diskùm mù¾e mít negativní vliv na I/O vıkon tìchto diskù.
Wide SCSI vás limituje 15 disky na øadiè a má lep¹í podporu
souèasného pøístupu ne¾ IDE.
Zatímco SCSI vás stojí více, pru¾nost a vıkon mohou bıt  v jistıch prostøedích 
d343 4
a346 5
Tato mo¾nost se tıká hlavnì PC. Na ostatnéích architekturách nemáte moc
mo¾ností na vıbìr jakı typ RAM pou¾ít. S SDRAM doáhnete vy¹¹ího vıkonu ne¾
kdybyste pou¾ili DRAM (SIMM moduly). Pokud vá¹ systém podporuje
RDRAM, DDR nebo
jinı typ, jste o krok napøed...
d350 11
a360 10
Konrola parity pøidává mo¾nost vidìt, jestli byla data v RAM po¹kozena. ECC
roz¹iøuje tuto mo¾nost tak, ¾e pøidává funkci jak tyto chyby opravit za bìhu.
Tato mo¾nost se tıká hlavnì PC. Na jinıch architekruách je jednodu¹e
vy¾adována pøítomnost RAm s paritou nebo ECC. Nìkteré ne-PC architektury
dokonce odmítnout nabootovat s jinou RAM ne¾ s RAM s paritou.
Pokud nepou¾íváte RAM  kontrolou parity/ECC mù¾ete oèekávat po¹kození dat nebo
jiné abnormální jevy. Nìkteøí vırobci RAM dokonce nenabízejí RAM s ECC! To vám
mù¾e napovìdìt, ¾e se jim máte vyhnout! Vırobci PC èasto dodávají nìkolik øad
rozdìlench na "servery" a "workstations". Servery zahrnují zpravidla ECC RAM
ve svıch konfiguracích. Vırobci pracovních stanic s Unixem pou¾ívají RAm s
d366 8
a373 7
IPøesto¾e se mnoho lidí sna¾í vyhnout ISA zaøízením, proto¾e jsou obecnì tì¾¹í
nakonfigurovat, stále jich existuje je¹tì dost. Pokud pou¾íváte ISA sbìrnici
pro va¹e disky nebo sí»ové karty (nebo je¹tì hùøe oboje) pamatujte, ¾e ISA
mù¾e bıt právì to úzké hrdlo, které omezuje vá¹ vıkon. Pokud potøebujete
rychlost, poohlédnìte se po PCI. Samozøejmì, stále exituje nìkolik ISA
sbìrnicovıch karet, které pracují docela dobøe. Nane¹tìstí vìt¹ina tìchto
karet jsou zvukové karty nebo karty se sériovımi porty.
d377 11
a387 11
OpenBSD podporuje spostu levnıch PCI sí»ovıch adaptérù. Tyto adaptéry pracují
perfektnì v systémech doma, a také v klidnıch byznys a vıvojovıch prostøedích.
Ale jakmile potrebujete vysokı prùtok a pøitom malou zátì¾ va¹eho serveru,
mìli byste lépe pou¾ít kvalitní PCI adaptér. Nane¹tìstí, nìkteré drahé
znaèkové adaptéry (jako napøíklad øada 3com XL) nejsou o moc lep¹í ne¾ jejich
levné varianty. Na¹e oblíbené adaptéry pro 10/100Mbps ethernet jsou karty
Intel EtherExpress PRO/100.
<b>Poznámka: Toto mù¾eme z hlediska èeského OpenBSD projektu jenom potvrdit.
Levné sí»ové adaptéry mohou dokonce pøi vysokém prùtoku dat zpùsobovat tuhnutí
serveru, o kterém se nedozví ani kernel!</b>
<P>
d390 1
d395 6
a400 7
Otázka: "Jednodu¹e provedu "mount -u -o async /" co¾ je nutné pro balík kterı
pou¾ívám.
(proto¾e èas od èasu vy¾aduje pøístup k nìkolika sotvkám souborù souèasnì)

Proè je asynchronní mount nepou¾íván defaultnì (jako v nìkolika ostatních
unixech ) ? Není to je mnohem jednodu¹¹í a tím pádem i bezpènìj¹í cesta jak
dosáhnout zlep¹ení vıkonu v mnoha aplikacích ?"
d402 1
d404 4
a407 4
Odpovìï: "Asynchronní mount je opravdu rychlek¹í nez synchronní, ale je naopak
ménì bezpeènìj¹í. Co se stane v pøípadì, ¾e vypadne proud? Nebo hardwarovı
problém? Hon za vıkonem by nìmel bıt obìtí spolehlivosti nebo stability
systému. Pøeètìte si manuálovou stránku pro
d421 5
a425 5
Na druhou stranu, pokud se jedná o temp data která mù¾ete vytvoøit znovu po
crashi, mù¾ete získat rychlost tím, ¾e vytvoøíte oddìlenı diskovı oddíl, kterı
budete pou¾ívat pouze pro tato data a bude ho mountovat asychronnì.
Opìt, udìlejte to <i>jen tehdy</i>,  pokud vám
nevadí mo¾nost ztráty v¹ech dat na tomto diskovém oddílu pokud se nìco pokazí.
d428 2
a429 2
oddíly mountovány asynchronnì, proto¾e stejnì budou pøi rebootu
zru¹eny a znovu vytvoøeny.
d437 21
a457 21
Na mnoha multi-async monitorech je mo¾né nastavit pod X serverm pøijatelné
rozli¹ení. Pokud to nìkdo zkou¹el za pomoci standartních utilit jako jsou
xf86config nebo XF86Setup, nedostal pravdìpodobnì nejlep¹í mo¾né rozli¹ení.
Jeden z nejtì¾¹ích úkolù je dostat vámi po¾adované rozli¹ení a zároveò
nastavit vertiklání obnovovací frekvenci aspoò 72-75 Hz, co¾ je dolní hodnota
nad kterou je blikání pro lidské oko ménì viditelné pro vìt¹inu lidí. 
Naopak, mù¾ete chtít nastavit vertikální frekvenci tak, aby byla dost nízká.
Mù¾ete ji nastavit napø. na 50 Hz, tak¾e obraz na monitoru bude mo¾no zachytit
na video bez blikání, ale motody jak thoo dosáhnout jsou ne a¾ tak zøejmé pøi
pou¾ití standartních metod poskyovanıch XFree86 a pøislu¹né dokumentaci.
<P>
Koneènì, v rozli¹eních, které pou¾ívá mnoho lidí s docela levnımi VGA monitory
(800x600, 1024x768, 1152x900,
1280x1024), 
je mo¾né (aspoò na novìj¹ích monitorech) nastavit vertikální obnovoací
frekvenci na 85Hz a vı¹e k dosa¾ení extrémnì èistého obrazu.
XFree86 X server poskytuje mechanismus, terı vám dovolí popsat detailnì vido
mód kterı budete chtít pou¾ít, kterı se nazıvá ModeLine. ModeLine má ètyøi
sekce, jedno èíslo pro pixel clock, ètyøi èísla pro horizontální èasování,
ètyøi pro vertikální èasování a nepovinnou sekci, kde je mo¾né nastavit
speciální flagy (jako napø. Interlace, DoubleScan, a dal¹í... Podívejte se na 
d459 1
d465 2
a466 2
<a href="http://xtiming.sourceforge.net/">The XFree86 Modeline
Generator</a> na SourceForge a nìkolik dal¹ích, které jsou na 
d468 6
a473 5
Ne¾ pou¾ijete tyto ModeLine generátory, mìli byste si zjistit vertikální a gorizontální
maxima pro vá¹ monitor. Toto je èasto popsáno v dokumentaci nebo na stránce
vırobce. Jestli¾e jste to nena¹li ani tam, zkuste hledat jednodu¹e na webu
znaèku monitoru a model, nìkteøí lidé byli tak laskaví, ¾e slo¾ili seznamy s
tìmito informacemi.
d476 5
a480 5
spoleènosti Dell na¹li, ¾e ml¾ete pou¾ít rozmezí 30-95 kHz pro horizontální
frekvence. Podívejte se na stránku ModeLine generatoru a zadejte tuto
informaci. Dále budete potøebovat zadat minimální vetrtikální obnovovací
frekvenci, kterou budete chtít pou¾ít. 
Hodnoty nad 72Hz by mìluy obecnì produkovat docela malé blikání obrazu. S tím
d483 4
a486 4
Se v¹emi tìmito kousky informace, vygeneruje skript ModeLine pro ka¾dé mo¾né
4x3 ozli¹ení, které vás monitor ml¾e podporovat, aspoò s  hodnotou vertikální
obnovovací frekvence kterou jste zadali. 
Pokud nìkdo zadá paramerty Dell monitoru uvedené vı¹e s nejni¾¹í vertikální
d510 3
a512 3
rozmezí 75 Hz. Tak¾e, pokud opravdu chcete pou¾ít rozli¹ení 1600x1200, budete
muset o nìco sní¾it minimální evtrtikální frekvenci... (Tady jsme ¹li dolù na
70 Hz)
d524 11
a534 10
Tady vidíme, ¾e monitor opravdu umí 1600x1200 @@ 74 Hz kdy¾ bude bandwidth
limitován na 200MHz. Nastavte bandwidth podle limitù definovanıch monitorem.
<P>
Jakmile máte va¹e nastaveni ModeLine, ulo¾te je do souboru /etc/XF86Config.
Zakomentujte staré ModeLine, tak¾e je budete moci pou¾ít znovu, pokud nové
nastavní nebude fungovat.
Dále, vyberte si rozli¹ení, které budete chtít provozovat. Nejdøíve zjistìte,
jestli X server bì¾í v akcelerovaném módu (co¾ je pravda s vìt¹inou karet),
tak¾e víte kterou sekci  <TT>"Screen"</tt> modifikovat.
Nebo jednudu¹e zmìnte v¹echny tyto sekce.
d546 29
a574 28
První rozli¹ení, kterou vidíte za øádkou s "Modes" je ta frekvence s kerou se
X server spustí. jestli ¾e stisknete CTRL-ALT-KEYPAD MINUS, nebo
CTRL-ALT-KEYPAD PLUS, mù¾ete pøepínat mezi frekvencemi, které jsou zde
ulo¾eny. 
Podle sekce uvedené vı¹e se X server spustí v 32-bit barevném médu (pøes
direktivu DefaultColorDepth, bez ní by se X server spustil v 8-bitovém módu.)
První rozli¹ení které X server zkusí pou¾ít bude 1280x1024 (podle poøadí na
øádce s Modes.) "1280x1024" je pouze oznaèení pøíslu¹né rádky ModeLine.
<P>
ModeLine generator skript má mo¾nosti nastavit volnìji rozmezí èasování pro
star¹í nebo men¹í monitory a zároveò schopnost poskytnout ModeLines pro
specifická rozli¹ení. V zaávislosti na typu hardware, kterı pou¾íváte nemusí
bıt moc snadné pou¾ít jej s defaultním nastavením. Pokud je obraz moc vysokı,
¹irokı nebo pøíli¹ malı, nebo je posunutı horizontálnì nebo vertilálnì, a
mo¾nosti monitoru jak nastavit obraz nestaèí, zkuste pou¾ít xvidtune(1) k
nastavení ModeLine aby lépe vyhovovala parametrùm monitoru. 
<P>
Vìt¹ina novıch monitorù nemá pevnı bandwidth, tak¾e nejsou èasto zahrnuty v
sepcifikacích. Èím vy¹¹í nastavujete bandwidth, tím více se obraz stává
zaml¾enìj¹í.
Tak¾e pokud chcete nastavit optimální bandwidth (èasto nazıvanı "dotclock")
mù¾ete testovat (tímto zpùsobem nemù¾ete vás monitor po¹kodit) a pak jít dolù
a¾ do chvíle kdy dostanete èistı obraz.
<P>
Mù¾e to vypada zbyteènì slo¾ité, to proto, ¾e to ve skuteènosti je. XFree86
4.0 se s tímto sna¾í vyrovnat a tento proces zjednodu¹it tím, ¾e má mnoho
módù u¾ zabudovanıch a umí si naèíst parametry z "plug and play" monitorù pøes
DDC a DDC2. 
d582 6
a587 6
Existují dvì verze skriptu = jedna je CGI verze identická s tou, která se
nachází na stránce urèené vı¹e. Ta druhá je ne-CGI verze, která vezme vá¹
kompletní XF86Config soubor, dekóduje specifikace monitoru, které jste zadali
do  xf86config/XF86Setup (teï se zamyslete, jestli jste oprabvdu zadali
hodnoty nebo si vybrali z nabízenıch) a pøenastaví podle toho øádky s
ModeLines.
d604 1
a604 1
$Translation: faq11.html,v 1.7 2002/08/17 22:08:54 certik Exp $
@


1.6
log
@
sync with badlands translation CVS
@
text
@d275 1
a275 1
III nebo AMD Athlonem mnohem lep¹í ne¾ pomìr Cena/Vıkon u Sun UltraSparc 60!
d572 1
a572 1
Originally [OpenBSD: faq11.html,v 1.28 ]
d574 1
a574 1
$Translation: faq11.html,v 1.6 2002/07/11 14:01:18 certik Exp $
@


1.5
log
@
sync with badlands translation CVS
work by {milos,vasek,vlada}@@openbsd.cz
@
text
@d396 8
a403 4
crashi, ml¾ete získat rychlost tím, ¾e vytvoøíte oddìlenı diskovı oddíl, kterı
budete pou¾ívat pouze pro tyto data a bude to mountovat asychronnì. Pkud vám
nevadí mo¾nost ztráty v¹ech dat na tomto diskoém oddílu pokud pljde
nìco ¹patnì...
d405 1
d572 1
a572 1
Originally [OpenBSD: faq11.html,v 1.27 ]
d574 1
a574 1
$Translation: faq11.html,v 1.5 2002/05/23 23:30:14 certik Exp $
@


1.4
log
@
sync with badlands translation CVS.
@
text
@d24 1
a24 1
<li><a href="#kmem">11.3 - Ladìní kmem</a></li>
a32 5
<a name= "Network"></a>
<h2>11.1 - Sí»</h2>
</p>

<p>
d34 2
a35 5
ujistit ¾e jste udìlali v¹e proto, abyste zabránili nedostatku pamìti vzhledem
k rùznım èástem kernelu zmínenım dále.
</p>

<P>
d38 4
a41 1
pojednává o rùznıch mo¾nostech jak toto realizovat.
d43 3
d48 1
a48 1
Jedna z mo¾ností, kterou budete chtít zmìnit na zatí¾eneém serveru, gatewayi
d53 1
a53 1
známka toho, ¾e byste mìli tuto hodnotu zvı¹it.
d63 4
d102 5
a106 4
Jestli¾e je va¹e jádro GENERIC, je u¾ ccd pøipraveno k pou¾ití. Pokud ne,
mù¾ete ho zapnout v konfiguraci jádra.
K nastavení ccd je vy¾adováno zapnutí jeho podpory v konfiguraci kernelu.
Øádka jako:
a109 1
<UL>
d111 1
a111 1
<strong>pseudo-device   ccd     4       # concatenated disk devices</strong>
a112 1
</UL>
d153 1
a153 1
Dal¹ím øe¹ením je <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=raid&apropos=0&sektion=4&format=html">raid(4)</a>
d162 2
a163 2
Na rozdíl od ccd, podpora pro RAID není obsa¾ena v GENERIC konfiguraci
kernelu, musí bıt zakompilována (RAID podpora pøidá kernelu na 'váze' zhruba o
d180 1
a180 1
mo¾ností a mo¾nıch konfigurací, detailní vysvìtlení je pro tento dokument moc
d216 1
a216 1
muset bıt spu¹tìn fsck po bootu, ale jednodu¹e se pustí fsck na pozadí, která
d218 1
a218 1
serveru je mnohem rychlej¹í, proto¾e nemusíte èekat na fsck ! (OpenBSD je¹tì
d226 1
a226 1
<H3>11.2.5 - Velikost namei cache</H3>
d246 1
a246 1
zjistíte jaké procento prohledávání cache (cache lookups) bylo úspì¹né, zjistíte tzv. hit ratio.
d249 2
a250 2
velikosti cache. Hodnotu <i>kern.maxvnodes</i> zvy¹ujeme tak dlouho, dokud pozorujeme nìjakı viditelnı
narùst úspì¹nosti zásahu (hit ratio) pøi práci cache. Poté co jste nalezli optimální hodnotu, mù¾ete ji
d258 1
a258 1
<a name= "kmem"></a>
d263 1
a263 1
<p>
d301 1
a301 2
<P>
IDE disky normálnì bì¾í na 5400 RPM, objevují se nové disky s 7200 RPM. Pokud
d304 2
a305 2
Pokud pou¾ijete high-end SCSI disky (disky s 10000 RPm stojí o dost více),
mù¾ete doaáhnout vıkonu, kterı je mnohem vys¹¹í ne¾ tyto hodnoty. Pokud se
d312 3
a314 2
Wide SCSI vás limituje 15 disky na øadiè!
ZAtímco SCSI vás stojí více, pru¾nost a vıkon mohou bıt  v jistıch prostøedích 
d321 2
a322 1
kdybyste pou¾ili DRAM (SIMM moduly). Pokud vá¹ systém podporuje RDRAM nebo
d374 1
a374 1
unixech ) ? Urèitì to je mnohem jednodu¹¹í a tím pádem i bezpènìj¹í cesta jak
d421 1
a421 1
frekvenci na 85MHz a vı¹e k dosa¾ení extrémnì èistého obrazu.
d429 8
a436 4
Vygenerování ModeLine je magie... Na¹tìstí, existuje skript, kterı to mù¾e
udìlat za vás. Je to 
<a href="http://www-sop.inria.fr/cgi-bin/koala/nph-colas-modelines">Colas XFree86 ModeLine Generator</a>.
Ne¾ pou¾ijete Colas generator, mìli byste si zjistit vertikální a gorizontální
d512 1
a512 1
První frekvence, kterou vidíte za øádkou s "Modes" je ta frekvence s kerou se
d539 1
a539 2
DDC a DDC2. Nane¹tìstí, , je¹tì není úplnì pøipraveno pro pou¾ití, proto¾e
nepodporuje tolik karet jako XFree86 3.3.
d567 1
a567 1
Originally [OpenBSD: faq11.html,v 1.22 ]
d569 1
a569 1
$Translation: faq11.html,v 1.4 2002/02/22 11:15:18 certik Exp $
@


1.3
log
@
sync with badlands translation CVS.
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2001 by OpenBSD.">
d13 1
a13 1
<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">
d22 6
a27 6
<li><a href="#11.1">11.1 - Sí»</a></li>
<li><a href="#11.2">11.2 - Diskové I/O operace</a></li>
<li><a href="#11.3">11.3 - Ladìní kmem</a></li>
<li><a href="#11.4">11.4 - Vıbìr hardware</a></li>
<li><a href="#11.5">11.5 - Proè nepou¾íváme async mount ?</a></li>
<li><a href="#11.6">11.6 - Nastavení rozli¹ení monitoru pod XFree86</a></li>
d33 1
a33 1
<a name= "11.1"></a>
d44 2
a45 2
Manuálová stránka <A
HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">options(4)</a>
d68 1
a68 1
<a name= "11.2"></a>
d127 1
a127 1
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&apropos=0&sektion=8&format=html">ccdconfig(8)</a>)
d155 1
a155 1
Greg Osterovì <A HREF="http://www.cs.usask.ca/staff/oster/raid.html">NetBSD
d158 1
a158 1
<A HREF="http://www.pdl.cs.cmu.edu/RAIDframe/">RAIDframe</a> software.
d219 1
a219 1
<a href="faq14.html#14.5">softupdates FAQ</a>.
d257 1
a257 1
<a name= "11.3"></a>
d260 1
a260 1
Tato èást bvyla pøesunuta do <A HREF="../faq11-2.5.html#11.2">OpenBSD 2.5 sekce</a>.
d263 1
a263 1
<a name= "11.4"></a>
d364 1
a364 1
<a name= "11.5"></a>
d401 1
a401 1
<a name= "11.6"></a>
d425 1
a425 2
<A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=XF86Config&sektion=5">XF86Config(5)</a>
manuálovou stránku pro více detailù.)
d429 1
a429 1
<A HREF="http://www-sop.inria.fr/cgi-bin/koala/nph-colas-modelines">Colas XFree86 ModeLine Generator</a>.
d537 1
a537 1
<A HREF="ftp://koala.inria.fr/pub/Klone/">ftp://koala.inria.fr/pub/Klone/</a>.
d562 1
a562 1
Originally [OpenBSD: faq11.html,v 1.18 ]
d564 1
a564 1
$Translation: faq11.html,v 1.3 2001/08/29 12:57:59 certik Exp $
@


1.2
log
@
Broken links
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998,1999 by OpenBSD.">
d88 1
d218 1
a218 1
touto vlastností nedisponuje) Více o softupdatech i mù¾ete pøeèíst v 
d224 33
d563 1
a563 1
Originally [OpenBSD: faq11.html,v 1.16 ]
d565 1
a565 1
$Translation: faq11.html,v 1.2 2001/05/25 22:11:12 jufi Exp $
@


1.1
log
@
Initial commit of czech translation.
Work by Milos Urbanek.
@
text
@d226 1
a226 1
Tato èást bvyla pøesunuta do <A HREF="faq11-2.5.html#11.2">OpenBSD 2.5 sekce</a>.
d531 1
a531 1
$Translation: faq11.html,v 1.1 2001/05/04 17:10:56 certik Exp $
@

