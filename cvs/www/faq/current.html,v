head	1.813;
access;
symbols;
locks; strict;
comment	@# @;


1.813
date	2017.04.19.06.02.19;	author tb;	state Exp;
branches;
next	1.812;
commitid	glZE5w7nsxvygEdC;

1.812
date	2017.04.17.16.42.06;	author kettenis;	state Exp;
branches;
next	1.811;
commitid	mo4fpzVJ0pouCAvD;

1.811
date	2017.04.11.13.32.58;	author tb;	state Exp;
branches;
next	1.810;
commitid	KgKxShDcUI3i8PXS;

1.810
date	2017.04.11.10.09.31;	author tb;	state Exp;
branches;
next	1.809;
commitid	Q1A3QRqzDtj2aaVh;

1.809
date	2017.04.06.11.19.41;	author tb;	state Exp;
branches;
next	1.808;
commitid	0fx7ASh1cjvocGil;

1.808
date	2017.03.27.20.53.59;	author tb;	state Exp;
branches;
next	1.807;
commitid	6RWb5l1gu7pA0iLJ;

1.807
date	2017.03.27.17.11.05;	author bluhm;	state Exp;
branches;
next	1.806;
commitid	cZ8IxkHpLZyGLxfQ;

1.806
date	2017.03.27.14.42.01;	author tb;	state Exp;
branches;
next	1.805;
commitid	SOxxbvN3G0R6BMhO;

1.805
date	2017.03.27.10.44.33;	author tb;	state Exp;
branches;
next	1.804;
commitid	275dbOU64uea7QYb;

1.804
date	2017.03.26.14.04.29;	author espie;	state Exp;
branches;
next	1.803;
commitid	OYPvlJY4mJIflEyP;

1.803
date	2017.03.25.18.03.37;	author tb;	state Exp;
branches;
next	1.802;
commitid	rL4ajudaGg7ru4hH;

1.802
date	2017.03.23.12.00.06;	author danj;	state Exp;
branches;
next	1.801;
commitid	MEqEonAPhNTE3Rbj;

1.801
date	2017.03.03.11.17.32;	author natano;	state Exp;
branches;
next	1.800;
commitid	VTb2DbwWrnv7zF91;

1.800
date	2017.03.03.08.19.54;	author tb;	state Exp;
branches;
next	1.799;
commitid	jcYKgXMrS6Co7pDf;

1.799
date	2017.03.02.21.42.55;	author tb;	state Exp;
branches;
next	1.798;
commitid	8kYKT1anjWGkMzKy;

1.798
date	2017.02.28.20.05.17;	author tb;	state Exp;
branches;
next	1.797;
commitid	fTDyzFkkIdWJs2YU;

1.797
date	2017.02.28.14.35.22;	author dcoppa;	state Exp;
branches;
next	1.796;
commitid	xGnwBGenriVWedQY;

1.796
date	2017.02.28.01.05.14;	author tb;	state Exp;
branches;
next	1.795;
commitid	yGRjE6VoTrVSDGUG;

1.795
date	2017.02.27.23.43.03;	author deraadt;	state Exp;
branches;
next	1.794;
commitid	ozbwyJ60TAC6SKqC;

1.794
date	2017.02.27.22.26.42;	author tb;	state Exp;
branches;
next	1.793;
commitid	5YsSDeRQl0wDyHiW;

1.793
date	2017.02.27.22.24.09;	author tb;	state Exp;
branches;
next	1.792;
commitid	XJP9Qv7OtIYHDUtW;

1.792
date	2017.02.27.06.28.58;	author tb;	state Exp;
branches;
next	1.791;
commitid	v3yxNek1dQh2ARoq;

1.791
date	2017.02.26.22.00.58;	author matthieu;	state Exp;
branches;
next	1.790;
commitid	umYPXN5iybAchmRs;

1.790
date	2017.02.26.21.25.57;	author matthieu;	state Exp;
branches;
next	1.789;
commitid	P3hunbHaQMf8hYfp;

1.789
date	2017.02.26.16.58.57;	author matthieu;	state Exp;
branches;
next	1.788;
commitid	WFJEGYxGDlyndj5C;

1.788
date	2017.02.23.13.56.43;	author tb;	state Exp;
branches;
next	1.787;
commitid	iXFISDz1DugVaLKH;

1.787
date	2017.02.23.13.49.42;	author giovanni;	state Exp;
branches;
next	1.786;
commitid	ADd7f6h8QSE9JfKZ;

1.786
date	2017.02.11.11.35.51;	author tb;	state Exp;
branches;
next	1.785;
commitid	4LYWc6yvmayyF6Ss;

1.785
date	2017.02.09.22.10.41;	author tb;	state Exp;
branches;
next	1.784;
commitid	Ndg65th6kuQYPGNH;

1.784
date	2017.02.09.22.07.55;	author tb;	state Exp;
branches;
next	1.783;
commitid	GJb8eBKhf4KqN4I8;

1.783
date	2017.02.09.17.22.19;	author tb;	state Exp;
branches;
next	1.782;
commitid	T7p2qUf6sgevbhcO;

1.782
date	2017.02.09.14.09.50;	author tb;	state Exp;
branches;
next	1.781;
commitid	ymCcAnowQVBL5BFK;

1.781
date	2017.02.09.13.00.55;	author tb;	state Exp;
branches;
next	1.780;
commitid	I3QjnUvw2d7KjpWO;

1.780
date	2017.02.05.07.02.51;	author tb;	state Exp;
branches;
next	1.779;
commitid	xvKVidk1un3DK9KU;

1.779
date	2017.02.05.06.27.35;	author tb;	state Exp;
branches;
next	1.778;
commitid	HaaYJCRjBYRywiiM;

1.778
date	2017.01.30.17.53.18;	author tb;	state Exp;
branches;
next	1.777;
commitid	7VENbV87PJ6ZmWRj;

1.777
date	2017.01.30.17.32.41;	author tb;	state Exp;
branches;
next	1.776;
commitid	tjOzc4XKwxF0mBwa;

1.776
date	2017.01.30.16.48.43;	author mikeb;	state Exp;
branches;
next	1.775;
commitid	ErADdaip0Gj9wzF2;

1.775
date	2017.01.23.05.03.47;	author tb;	state Exp;
branches;
next	1.774;
commitid	zbDK5kOuOTEk8Xip;

1.774
date	2017.01.21.09.33.58;	author tb;	state Exp;
branches;
next	1.773;
commitid	JYStl00SYzIxSvG4;

1.773
date	2017.01.21.09.08.40;	author benno;	state Exp;
branches;
next	1.772;
commitid	V9bGyU13nSILj3bm;

1.772
date	2017.01.06.10.07.06;	author tb;	state Exp;
branches;
next	1.771;
commitid	o6TXewe2oag4IxJO;

1.771
date	2017.01.05.17.37.00;	author tb;	state Exp;
branches;
next	1.770;
commitid	YxyJLXevS0x0w3Wv;

1.770
date	2017.01.05.17.33.27;	author tb;	state Exp;
branches;
next	1.769;
commitid	JN3LU3dRKpOweMF0;

1.769
date	2016.12.27.12.56.12;	author tb;	state Exp;
branches;
next	1.768;
commitid	4qwtTqHzT6hrPyco;

1.768
date	2016.12.27.12.51.42;	author tb;	state Exp;
branches;
next	1.767;
commitid	rwJBufHf1TnxhF7c;

1.767
date	2016.12.18.21.01.39;	author tb;	state Exp;
branches;
next	1.766;
commitid	5oRdTDkHEM9KqMAF;

1.766
date	2016.12.18.20.43.42;	author jca;	state Exp;
branches;
next	1.765;
commitid	2kiVZyIhJ2GtgDgQ;

1.765
date	2016.12.18.19.52.17;	author jca;	state Exp;
branches;
next	1.764;
commitid	JPUHPxRsrTBqWieb;

1.764
date	2016.12.01.18.44.27;	author tb;	state Exp;
branches;
next	1.763;
commitid	bblDWvp5qSYixt8D;

1.763
date	2016.12.01.17.18.32;	author okan;	state Exp;
branches;
next	1.762;
commitid	IIHOKjj7QenTU3sG;

1.762
date	2016.11.24.20.19.14;	author tb;	state Exp;
branches;
next	1.761;
commitid	WDHmqQAb5iA5VG8A;

1.761
date	2016.11.22.18.06.12;	author tb;	state Exp;
branches;
next	1.760;
commitid	OiuOEyR5V8P12pk3;

1.760
date	2016.11.20.15.38.13;	author tb;	state Exp;
branches;
next	1.759;
commitid	zngFS27YSK4Y7F2Q;

1.759
date	2016.11.20.14.46.33;	author tb;	state Exp;
branches;
next	1.758;
commitid	VPEaX2DAGloyGLqZ;

1.758
date	2016.11.20.13.28.53;	author tb;	state Exp;
branches;
next	1.757;
commitid	AQ63JCMpf6Kpeqn9;

1.757
date	2016.11.19.23.30.35;	author tb;	state Exp;
branches;
next	1.756;
commitid	R0vAXVXZffiSFMPE;

1.756
date	2016.11.19.14.23.13;	author tb;	state Exp;
branches;
next	1.755;
commitid	LtG18hSutTl12Vxd;

1.755
date	2016.11.17.19.32.48;	author tb;	state Exp;
branches;
next	1.754;
commitid	4lqAMUFmFSQfy3Ja;

1.754
date	2016.11.15.02.59.25;	author tb;	state Exp;
branches;
next	1.753;
commitid	2dgj8DtINqldQljY;

1.753
date	2016.11.14.11.05.27;	author mpi;	state Exp;
branches;
next	1.752;
commitid	ZC16dDgfRP6dOcYu;

1.752
date	2016.11.09.17.12.46;	author tb;	state Exp;
branches;
next	1.751;
commitid	Zm5UzTWDPK5no7m9;

1.751
date	2016.11.09.16.01.33;	author tb;	state Exp;
branches;
next	1.750;
commitid	KIro5ulzhaPvDVvk;

1.750
date	2016.11.04.23.07.20;	author tb;	state Exp;
branches;
next	1.749;
commitid	BOkokbJV0LWiYQPT;

1.749
date	2016.11.04.22.20.11;	author jeremy;	state Exp;
branches;
next	1.748;
commitid	tcbWMEkKJmiAvaGr;

1.748
date	2016.11.04.10.27.16;	author landry;	state Exp;
branches;
next	1.747;
commitid	Ukcdgeqn2dPpd7im;

1.747
date	2016.10.29.21.13.36;	author tb;	state Exp;
branches;
next	1.746;
commitid	MMnAzPTYWm6m2Jtd;

1.746
date	2016.10.29.20.19.09;	author tb;	state Exp;
branches;
next	1.745;
commitid	qy64nnRGrYjs3wrY;

1.745
date	2016.10.26.01.15.28;	author schwarze;	state Exp;
branches;
next	1.744;
commitid	RdrgJdFqPoScVYw3;

1.744
date	2016.10.24.23.38.30;	author tb;	state Exp;
branches;
next	1.743;
commitid	x0u9ZNS6yYlrHnjr;

1.743
date	2016.10.24.23.37.10;	author tb;	state Exp;
branches;
next	1.742;
commitid	k7FULh10EoceywwM;

1.742
date	2016.10.24.19.56.53;	author matthieu;	state Exp;
branches;
next	1.741;
commitid	VGOe8sojD0hTElGf;

1.741
date	2016.10.14.22.28.23;	author tb;	state Exp;
branches;
next	1.740;
commitid	sSQPJxIbV1w4y0gi;

1.740
date	2016.10.14.22.22.04;	author tb;	state Exp;
branches;
next	1.739;
commitid	jpPy4o9xMv0ozLvP;

1.739
date	2016.10.14.20.10.46;	author tb;	state Exp;
branches;
next	1.738;
commitid	DIqKtYFVRRTFGBwb;

1.738
date	2016.10.14.12.27.56;	author jasper;	state Exp;
branches;
next	1.737;
commitid	S0YfWg9bSR5QgqB1;

1.737
date	2016.10.07.17.55.35;	author natano;	state Exp;
branches;
next	1.736;
commitid	YTMlsRrB6BnyevjS;

1.736
date	2016.10.07.13.56.09;	author tb;	state Exp;
branches;
next	1.735;
commitid	k6FoHTZXwlbuuF4S;

1.735
date	2016.10.07.04.20.09;	author jsg;	state Exp;
branches;
next	1.734;
commitid	76CALrVWlVI9P6w1;

1.734
date	2016.10.07.02.14.13;	author tb;	state Exp;
branches;
next	1.733;
commitid	B88sOIidShNxsI2t;

1.733
date	2016.10.06.21.08.34;	author natano;	state Exp;
branches;
next	1.732;
commitid	wkLMU2VP06Z7NLrz;

1.732
date	2016.10.06.21.01.05;	author tb;	state Exp;
branches;
next	1.731;
commitid	g5N3s6A2h89jhvrb;

1.731
date	2016.10.06.20.07.19;	author tb;	state Exp;
branches;
next	1.730;
commitid	Q2NVKRPMFioJvsA3;

1.730
date	2016.10.06.19.49.38;	author tb;	state Exp;
branches;
next	1.729;
commitid	lbRUEyjZucqeEVVB;

1.729
date	2016.10.04.20.05.50;	author tb;	state Exp;
branches;
next	1.728;
commitid	SPjf2NBEaRsnpaa1;

1.728
date	2016.10.04.13.01.01;	author espie;	state Exp;
branches;
next	1.727;
commitid	kllnC9Q5k5fiBtl7;

1.727
date	2016.09.24.10.28.51;	author tb;	state Exp;
branches;
next	1.726;
commitid	5nIgL1wRnOp4S45J;

1.726
date	2016.09.24.10.21.44;	author tb;	state Exp;
branches;
next	1.725;
commitid	bfD9JMu7yL0eWibc;

1.725
date	2016.09.24.10.07.44;	author tb;	state Exp;
branches;
next	1.724;
commitid	ju9CaBnr0OQ0UJU3;

1.724
date	2016.09.24.02.27.14;	author jsg;	state Exp;
branches;
next	1.723;
commitid	had8QumeSpQJlXPj;

1.723
date	2016.09.23.09.47.42;	author sthen;	state Exp;
branches;
next	1.722;
commitid	E3KrnyAsvgqk5Kew;

1.722
date	2016.09.20.10.50.51;	author tb;	state Exp;
branches;
next	1.721;
commitid	MPVuSFIMKX7Jx2Xx;

1.721
date	2016.09.19.18.59.59;	author tb;	state Exp;
branches;
next	1.720;
commitid	gtJfx4AfhzYfrJ09;

1.720
date	2016.09.13.16.37.45;	author sthen;	state Exp;
branches;
next	1.719;
commitid	PJhAyQlWi2jufXHV;

1.719
date	2016.09.09.23.17.45;	author ratchov;	state Exp;
branches;
next	1.718;
commitid	BO1ZoGHrPi66D0Lz;

1.718
date	2016.09.09.08.24.04;	author ratchov;	state Exp;
branches;
next	1.717;
commitid	qvIjAVuTz39fWlYM;

1.717
date	2016.09.09.03.24.03;	author tb;	state Exp;
branches;
next	1.716;
commitid	37T3p4sjgRYm08pH;

1.716
date	2016.09.09.03.22.02;	author tb;	state Exp;
branches;
next	1.715;
commitid	oafAB5iohnv0kagS;

1.715
date	2016.09.08.19.11.45;	author kettenis;	state Exp;
branches;
next	1.714;
commitid	eVQKo0pUPakS5BCx;

1.714
date	2016.09.06.06.15.58;	author tb;	state Exp;
branches;
next	1.713;
commitid	v5e8MgIDGcNhm4c0;

1.713
date	2016.09.03.10.52.09;	author jsg;	state Exp;
branches;
next	1.712;
commitid	cJ0YLRrqp9K4FLu6;

1.712
date	2016.09.01.13.23.43;	author sthen;	state Exp;
branches;
next	1.711;
commitid	3zrKFNbyLE4TgYl5;

1.711
date	2016.09.01.12.18.41;	author patrick;	state Exp;
branches;
next	1.710;
commitid	sTiOFBkVhZg9vUje;

1.710
date	2016.08.28.22.52.21;	author tb;	state Exp;
branches;
next	1.709;
commitid	bHYNyZYlzxx8lpV0;

1.709
date	2016.08.16.18.25.13;	author sebastia;	state Exp;
branches;
next	1.708;
commitid	ejG4rAcasATvWYvc;

1.708
date	2016.08.15.02.22.12;	author tb;	state Exp;
branches;
next	1.707;
commitid	3DeixV5YkPOb78RN;

1.707
date	2016.08.14.23.23.51;	author guenther;	state Exp;
branches;
next	1.706;
commitid	VPiluMWOYjyM0qWh;

1.706
date	2016.08.12.08.15.05;	author tb;	state Exp;
branches;
next	1.705;
commitid	R2VIQTdCQPBjHB1Y;

1.705
date	2016.08.12.07.02.28;	author sebastia;	state Exp;
branches;
next	1.704;
commitid	1mzFU3QYvds8OGUT;

1.704
date	2016.08.11.08.58.30;	author tb;	state Exp;
branches;
next	1.703;
commitid	h0ViGrEtPlz7C8WY;

1.703
date	2016.08.11.07.28.55;	author guenther;	state Exp;
branches;
next	1.702;
commitid	gEtsZngfQE2mGVqE;

1.702
date	2016.08.11.07.25.09;	author guenther;	state Exp;
branches;
next	1.701;
commitid	B89Lp9zK3ECJzzFy;

1.701
date	2016.08.10.19.12.37;	author matthieu;	state Exp;
branches;
next	1.700;
commitid	Eqk1of2WWFfTxljl;

1.700
date	2016.08.10.05.46.46;	author guenther;	state Exp;
branches;
next	1.699;
commitid	10BBoiWY3zckXYkb;

1.699
date	2016.08.08.17.38.38;	author deraadt;	state Exp;
branches;
next	1.698;
commitid	FIpDyPLFZD6OhtnI;

1.698
date	2016.08.04.00.59.29;	author tb;	state Exp;
branches;
next	1.697;
commitid	HZ94viQOzQBk5nya;

1.697
date	2016.08.01.20.10.23;	author tb;	state Exp;
branches;
next	1.696;
commitid	mw632lH5hF4Q90Sa;

1.696
date	2016.08.01.15.43.25;	author tb;	state Exp;
branches;
next	1.695;
commitid	SVXj9Nnn5m4JZJCS;

1.695
date	2016.08.01.12.04.25;	author tb;	state Exp;
branches;
next	1.694;
commitid	GjV3dz6GTgfbWGRn;

1.694
date	2016.08.01.10.47.23;	author schwarze;	state Exp;
branches;
next	1.693;
commitid	nUF1cVWuAb6oHtLN;

1.693
date	2016.07.13.20.25.36;	author jung;	state Exp;
branches;
next	1.692;
commitid	j67wZwR5aPtheBKP;

1.692
date	2016.06.30.13.44.26;	author tedu;	state Exp;
branches;
next	1.691;
commitid	js4jj5GNp58sRVR3;

1.691
date	2016.06.18.17.42.02;	author guenther;	state Exp;
branches;
next	1.690;
commitid	25NzvgxwxKexw5Yy;

1.690
date	2016.06.17.15.12.02;	author tb;	state Exp;
branches;
next	1.689;
commitid	lmTcvwQYhsABNECe;

1.689
date	2016.06.07.16.50.23;	author tedu;	state Exp;
branches;
next	1.688;
commitid	UgFzS8I0JqCMhL5m;

1.688
date	2016.06.06.18.20.57;	author tb;	state Exp;
branches;
next	1.687;
commitid	HEi4W7JaagtBYFyd;

1.687
date	2016.05.28.16.01.45;	author sthen;	state Exp;
branches;
next	1.686;
commitid	6cz1DZKRjxoTfoh6;

1.686
date	2016.05.28.07.55.49;	author tb;	state Exp;
branches;
next	1.685;
commitid	F9edkTlgWTyOJhuZ;

1.685
date	2016.05.27.19.49.37;	author deraadt;	state Exp;
branches;
next	1.684;
commitid	D6itqzcYkhCPE0wv;

1.684
date	2016.05.27.19.47.22;	author deraadt;	state Exp;
branches;
next	1.683;
commitid	X0XI398avuywiwRX;

1.683
date	2016.05.24.18.42.05;	author tb;	state Exp;
branches;
next	1.682;
commitid	MDjvXqb185TuH77H;

1.682
date	2016.05.23.15.00.30;	author kettenis;	state Exp;
branches;
next	1.681;
commitid	eNKL46qJKhJxcy6L;

1.681
date	2016.05.20.22.02.53;	author sthen;	state Exp;
branches;
next	1.680;
commitid	YhZHN7PG8v71p1kv;

1.680
date	2016.05.08.09.37.12;	author tb;	state Exp;
branches;
next	1.679;
commitid	vCSmRvxABVmzDaJA;

1.679
date	2016.05.08.09.22.37;	author tb;	state Exp;
branches;
next	1.678;
commitid	4muLydPMMLol31LA;

1.678
date	2016.05.08.09.06.45;	author jca;	state Exp;
branches;
next	1.677;
commitid	UY414noBivpUP5Rf;

1.677
date	2016.05.07.22.08.46;	author guenther;	state Exp;
branches;
next	1.676;
commitid	WW45cWtZixF0zEe3;

1.676
date	2016.05.07.20.26.25;	author guenther;	state Exp;
branches;
next	1.675;
commitid	N87bh1e2EMckxVul;

1.675
date	2016.05.07.19.23.39;	author guenther;	state Exp;
branches;
next	1.674;
commitid	8BVNWoTSlxu25fUa;

1.674
date	2016.05.05.20.55.17;	author tb;	state Exp;
branches;
next	1.673;
commitid	Osc4ojlnUohFkDXH;

1.673
date	2016.05.05.20.23.00;	author sthen;	state Exp;
branches;
next	1.672;
commitid	n2BbcV4wJwOt40Gs;

1.672
date	2016.05.03.08.34.27;	author tb;	state Exp;
branches;
next	1.671;
commitid	oqd8kWV1dRF89bfV;

1.671
date	2016.05.02.11.48.41;	author tb;	state Exp;
branches;
next	1.670;
commitid	1LdZX7Gjsj3mBVDv;

1.670
date	2016.04.26.14.27.00;	author krw;	state Exp;
branches;
next	1.669;
commitid	GcFvyjIxpXCb6MGi;

1.669
date	2016.04.26.13.03.30;	author tb;	state Exp;
branches;
next	1.668;
commitid	jVWbVGF7Tg3BkeVx;

1.668
date	2016.04.26.12.52.04;	author krw;	state Exp;
branches;
next	1.667;
commitid	uoajGlEgC6cINkNY;

1.667
date	2016.04.24.17.33.36;	author matthieu;	state Exp;
branches;
next	1.666;
commitid	iOoU7OQ68EActBGf;

1.666
date	2016.04.21.02.52.03;	author tj;	state Exp;
branches;
next	1.665;
commitid	Pcnt33n47t2lEMCr;

1.665
date	2016.04.17.15.55.35;	author tj;	state Exp;
branches;
next	1.664;
commitid	MyBBoFRaMRPsnAJS;

1.664
date	2016.04.15.20.39.49;	author tb;	state Exp;
branches;
next	1.663;
commitid	jwteSMEb4rFzI8UA;

1.663
date	2016.04.01.09.31.54;	author ajacoutot;	state Exp;
branches;
next	1.662;
commitid	N8Uk8XzVh6MsYLPH;

1.662
date	2016.03.31.02.06.29;	author bru;	state Exp;
branches;
next	1.661;
commitid	zJGt55uptMFNvVd2;

1.661
date	2016.03.29.01.27.38;	author tb;	state Exp;
branches;
next	1.660;
commitid	4Y8oU6GBrSY1UOfW;

1.660
date	2016.03.27.19.52.09;	author sthen;	state Exp;
branches;
next	1.659;
commitid	hi2ObFv9LGB98JY5;

1.659
date	2016.03.27.11.41.15;	author tb;	state Exp;
branches;
next	1.658;
commitid	OIyqKytka7ZEcWrS;

1.658
date	2016.03.25.05.13.32;	author tb;	state Exp;
branches;
next	1.657;
commitid	eecvrmkBIkcLeM4n;

1.657
date	2016.03.25.05.06.00;	author tb;	state Exp;
branches;
next	1.656;
commitid	nLLJTHhbV6jpyUqP;

1.656
date	2016.03.25.03.41.44;	author deraadt;	state Exp;
branches;
next	1.655;
commitid	3YowxRvrqr3R7WBZ;

1.655
date	2016.03.25.03.12.51;	author deraadt;	state Exp;
branches;
next	1.654;
commitid	4Rh1TerKYu4XBWnT;

1.654
date	2016.03.22.10.54.47;	author sthen;	state Exp;
branches;
next	1.653;
commitid	cyODCFvIgxpUoVc0;

1.653
date	2016.03.21.21.16.46;	author tb;	state Exp;
branches;
next	1.652;
commitid	HRviiUAjf4cAeFjV;

1.652
date	2016.03.21.13.49.47;	author tb;	state Exp;
branches;
next	1.651;
commitid	YYOqMUue7yP1SRtp;

1.651
date	2016.03.21.05.46.21;	author beck;	state Exp;
branches;
next	1.650;
commitid	zEx6zFkNSFFExu0v;

1.650
date	2016.03.20.02.33.23;	author guenther;	state Exp;
branches;
next	1.649;
commitid	JqIm60D1B8Y5IAgL;

1.649
date	2016.03.08.00.07.50;	author ajacoutot;	state Exp;
branches;
next	1.648;
commitid	CvrV1W7tRwkBnSUo;

1.648
date	2016.01.11.04.37.13;	author jsg;	state Exp;
branches;
next	1.647;
commitid	orsadGMuVDUaDPIa;

1.647
date	2016.01.08.17.01.28;	author abieber;	state Exp;
branches;
next	1.646;
commitid	TRDsU2JgVmmpN8Pb;

1.646
date	2016.01.05.22.52.40;	author benno;	state Exp;
branches;
next	1.645;
commitid	VOOYZQfBF59W6PF6;

1.645
date	2015.12.31.07.49.50;	author jasper;	state Exp;
branches;
next	1.644;
commitid	TKFAzIm8g4xBfYqf;

1.644
date	2015.12.27.05.00.26;	author jsg;	state Exp;
branches;
next	1.643;
commitid	YpTrNJ1nVav2HO15;

1.643
date	2015.12.16.23.19.29;	author sthen;	state Exp;
branches;
next	1.642;
commitid	2rJF0eyfDyKzmaHV;

1.642
date	2015.12.16.23.16.13;	author sthen;	state Exp;
branches;
next	1.641;
commitid	3v33YGrJQT2tKXCW;

1.641
date	2015.12.16.23.13.29;	author sthen;	state Exp;
branches;
next	1.640;
commitid	fgoWy3i2EEIidcG1;

1.640
date	2015.12.12.20.17.48;	author gilles;	state Exp;
branches;
next	1.639;
commitid	nptb1NGxY7L04pkn;

1.639
date	2015.12.07.16.17.56;	author sunil;	state Exp;
branches;
next	1.638;
commitid	7CXfdBton1Hf2X94;

1.638
date	2015.12.07.12.40.50;	author sunil;	state Exp;
branches;
next	1.637;
commitid	e8BJ5RqWbRtbkYMX;

1.637
date	2015.12.05.18.43.56;	author mpi;	state Exp;
branches;
next	1.636;
commitid	NJz6W3ZJzU51e6IS;

1.636
date	2015.12.03.22.07.51;	author reyk;	state Exp;
branches;
next	1.635;
commitid	tPxqvsvOsuE4j2tD;

1.635
date	2015.12.03.11.43.05;	author nicm;	state Exp;
branches;
next	1.634;
commitid	yAa4Ust06bN7fOWK;

1.634
date	2015.12.01.14.39.31;	author jung;	state Exp;
branches;
next	1.633;
commitid	H6iNGHR1FtJaMEHl;

1.633
date	2015.11.30.20.00.46;	author jung;	state Exp;
branches;
next	1.632;
commitid	hCnqPdWUhgHglo5Q;

1.632
date	2015.11.16.23.44.55;	author sthen;	state Exp;
branches;
next	1.631;
commitid	SmSdIHI8ly4wkHzB;

1.631
date	2015.10.26.18.08.16;	author jasper;	state Exp;
branches;
next	1.630;
commitid	OMaFVyPWS9OLXve4;

1.630
date	2015.10.26.14.18.30;	author jasper;	state Exp;
branches;
next	1.629;
commitid	MPDGJa7KH1vVfQ6H;

1.629
date	2015.10.25.14.45.29;	author abieber;	state Exp;
branches;
next	1.628;
commitid	4gSsxE1l4QIdGbpz;

1.628
date	2015.10.23.16.24.43;	author phessler;	state Exp;
branches;
next	1.627;
commitid	BQT8sP4lMVsz1DO2;

1.627
date	2015.10.19.20.05.20;	author matthieu;	state Exp;
branches;
next	1.626;
commitid	L1lQO6hqrpkAVh9b;

1.626
date	2015.10.18.19.45.12;	author nick;	state Exp;
branches;
next	1.625;
commitid	ky4d6IvM3MY2CB9P;

1.625
date	2015.09.18.09.18.32;	author sthen;	state Exp;
branches;
next	1.624;
commitid	tViBw4VzaY693iSl;

1.624
date	2015.09.12.14.04.01;	author stsp;	state Exp;
branches;
next	1.623;
commitid	pR6tmWp8xvFICxcy;

1.623
date	2015.09.12.13.46.12;	author stsp;	state Exp;
branches;
next	1.622;
commitid	ApJga3gszuw2w2uR;

1.622
date	2015.09.11.07.24.33;	author miod;	state Exp;
branches;
next	1.621;
commitid	waxBRRGGO3TeOsXK;

1.621
date	2015.08.30.12.43.25;	author schwarze;	state Exp;
branches;
next	1.620;
commitid	zaZa7AFMKloTP7G6;

1.620
date	2015.08.25.11.23.15;	author jca;	state Exp;
branches;
next	1.619;
commitid	5sJNyz9wNJQZieM8;

1.619
date	2015.08.22.22.16.30;	author matthieu;	state Exp;
branches;
next	1.618;
commitid	Iyj8L5uJEM9Wv0f3;

1.618
date	2015.07.21.02.28.02;	author sthen;	state Exp;
branches;
next	1.617;
commitid	fsN3kAaF7OzzbUPG;

1.617
date	2015.07.08.11.40.34;	author jca;	state Exp;
branches;
next	1.616;
commitid	2A688KmycJsJdaNV;

1.616
date	2015.07.07.21.27.09;	author jca;	state Exp;
branches;
next	1.615;
commitid	k1xEcSmPKfJXO4PR;

1.615
date	2015.07.04.15.11.47;	author millert;	state Exp;
branches;
next	1.614;
commitid	844tL1lyHxkhbWyG;

1.614
date	2015.07.02.05.49.04;	author bentley;	state Exp;
branches;
next	1.613;
commitid	AP3UllesavMDEUhQ;

1.613
date	2015.06.25.11.36.20;	author sthen;	state Exp;
branches;
next	1.612;
commitid	MjmyPUw985OCaFtt;

1.612
date	2015.06.25.11.12.46;	author sthen;	state Exp;
branches;
next	1.611;
commitid	CUZd76hHALkZbkd0;

1.611
date	2015.06.25.10.18.05;	author sthen;	state Exp;
branches;
next	1.610;
commitid	4MIdAS4eapb8WxNK;

1.610
date	2015.06.02.20.36.10;	author miod;	state Exp;
branches;
next	1.609;
commitid	065b07pN0urxbVpF;

1.609
date	2015.06.01.19.04.23;	author miod;	state Exp;
branches;
next	1.608;
commitid	BjUgzOzbe5XC1wJG;

1.608
date	2015.05.28.00.38.05;	author sthen;	state Exp;
branches;
next	1.607;
commitid	GOSQtrd49HZiSQLH;

1.607
date	2015.05.25.19.30.15;	author naddy;	state Exp;
branches;
next	1.606;
commitid	wXcTzGklQnnBh6Rh;

1.606
date	2015.05.19.02.35.13;	author lteo;	state Exp;
branches;
next	1.605;
commitid	zix1m7bsFrxLlOJD;

1.605
date	2015.05.18.17.03.06;	author okan;	state Exp;
branches;
next	1.604;
commitid	RufrZNaH8Af10Wne;

1.604
date	2015.05.17.22.51.20;	author deraadt;	state Exp;
branches;
next	1.603;
commitid	Kr4ILl9elilIBB9I;

1.603
date	2015.05.15.08.23.01;	author stsp;	state Exp;
branches;
next	1.602;
commitid	vhcR7Hny9SXlSK84;

1.602
date	2015.05.11.11.18.29;	author sthen;	state Exp;
branches;
next	1.601;
commitid	wRrXxcro6dFYiwF8;

1.601
date	2015.05.02.09.37.57;	author ajacoutot;	state Exp;
branches;
next	1.600;
commitid	DozByXFziyeBpuu9;

1.600
date	2015.04.30.23.53.04;	author nick;	state Exp;
branches;
next	1.599;
commitid	1A3ikPnLvCFCRRUp;

1.599
date	2015.04.30.23.50.42;	author nick;	state Exp;
branches;
next	1.598;
commitid	ZYG95abIeWPKEsxr;

1.598
date	2015.04.28.16.42.27;	author sthen;	state Exp;
branches;
next	1.597;
commitid	B5TrnAM1tf3OuURA;

1.597
date	2015.04.27.14.59.54;	author nicm;	state Exp;
branches;
next	1.596;
commitid	3iMtBnKSdgQNCTbB;

1.596
date	2015.04.26.17.03.51;	author nicm;	state Exp;
branches;
next	1.595;
commitid	LnAHy2buLj1Wji5I;

1.595
date	2015.04.04.09.29.08;	author jasper;	state Exp;
branches;
next	1.594;
commitid	w48U2SLIdB5NdQbV;

1.594
date	2015.04.04.09.05.45;	author jasper;	state Exp;
branches;
next	1.593;
commitid	wPKxZbdHY9NnJNdz;

1.593
date	2015.02.25.16.49.06;	author sthen;	state Exp;
branches;
next	1.592;
commitid	KWqHR5tLGDkYSWwH;

1.592
date	2015.02.25.16.07.11;	author giovanni;	state Exp;
branches;
next	1.591;
commitid	0chorPJMVOXHKCnM;

1.591
date	2015.02.25.10.24.51;	author sthen;	state Exp;
branches;
next	1.590;
commitid	7Pdx9sqfVILum30h;

1.590
date	2015.02.21.01.35.35;	author jsg;	state Exp;
branches;
next	1.589;
commitid	ZolmcIbYL3f9aAOv;

1.589
date	2015.02.06.14.22.29;	author sthen;	state Exp;
branches;
next	1.588;
commitid	3dResH2qnF0p9gBO;

1.588
date	2015.01.25.16.16.57;	author kirby;	state Exp;
branches;
next	1.587;
commitid	GyBfnxeAQ2oTLzJ4;

1.587
date	2015.01.21.11.34.39;	author mpi;	state Exp;
branches;
next	1.586;
commitid	2UASDPE3oeK7Ewn0;

1.586
date	2015.01.08.15.02.20;	author pea;	state Exp;
branches;
next	1.585;
commitid	oJ0AjGwlYEoWp1j3;

1.585
date	2015.01.04.20.41.33;	author kili;	state Exp;
branches;
next	1.584;
commitid	rFIg0R6Xpy8ZCzSf;

1.584
date	2014.12.29.09.16.42;	author tedu;	state Exp;
branches;
next	1.583;
commitid	v5QkYQwEnBkudrpd;

1.583
date	2014.12.23.21.18.11;	author naddy;	state Exp;
branches;
next	1.582;
commitid	wxmoZqGX0YXFlo2Z;

1.582
date	2014.12.22.20.44.49;	author kettenis;	state Exp;
branches;
next	1.581;
commitid	naSV8fvwAoFa0hkk;

1.581
date	2014.12.12.14.48.14;	author reyk;	state Exp;
branches;
next	1.580;
commitid	f7v6Hq6pRs9moxY0;

1.580
date	2014.12.09.18.04.49;	author sthen;	state Exp;
branches;
next	1.579;
commitid	wtiKJjGrvWBDtnE9;

1.579
date	2014.12.03.20.47.56;	author florian;	state Exp;
branches;
next	1.578;
commitid	LfSAr3TI14kM1JgP;

1.578
date	2014.12.02.07.03.51;	author bentley;	state Exp;
branches;
next	1.577;
commitid	kyGWY6NQ0wv3ocTr;

1.577
date	2014.11.24.12.05.48;	author stsp;	state Exp;
branches;
next	1.576;
commitid	KXr1NqoIIu2jx2EY;

1.576
date	2014.11.24.12.02.46;	author stsp;	state Exp;
branches;
next	1.575;
commitid	JEHaDz8OWPEM8TW2;

1.575
date	2014.11.20.15.20.14;	author tedu;	state Exp;
branches;
next	1.574;
commitid	gf9IWIfD2FC1lxvD;

1.574
date	2014.11.18.04.18.36;	author deraadt;	state Exp;
branches;
next	1.573;
commitid	7l8xHKP7HokcBM5h;

1.573
date	2014.11.18.04.10.46;	author tedu;	state Exp;
branches;
next	1.572;
commitid	51r1FBzpYKtlYxD7;

1.572
date	2014.11.10.22.27.53;	author sthen;	state Exp;
branches;
next	1.571;
commitid	0ZyKAGl8Er0FCozZ;

1.571
date	2014.11.06.21.25.34;	author sthen;	state Exp;
branches;
next	1.570;
commitid	IGUOsgiwpgY6eLhi;

1.570
date	2014.11.06.21.14.51;	author sthen;	state Exp;
branches;
next	1.569;
commitid	As7PMaNQ6zbv71oq;

1.569
date	2014.11.06.20.05.22;	author sthen;	state Exp;
branches;
next	1.568;
commitid	6mZ5vdVtQAfsc4z4;

1.568
date	2014.11.05.00.51.10;	author nick;	state Exp;
branches;
next	1.567;
commitid	ELQLu9HFnyeXSuRo;

1.567
date	2014.11.02.05.02.29;	author doug;	state Exp;
branches;
next	1.566;
commitid	skbLF3ge5BOgA0bI;

1.566
date	2014.11.01.13.43.44;	author nick;	state Exp;
branches;
next	1.565;
commitid	RkcQLEH7b1Uktbh8;

1.565
date	2014.10.31.15.56.57;	author jca;	state Exp;
branches;
next	1.564;
commitid	1iHUsb1IZG4zuHMp;

1.564
date	2014.10.31.13.52.10;	author jsing;	state Exp;
branches;
next	1.563;
commitid	eRYy6S8Ygv4jUlsh;

1.563
date	2014.10.30.17.07.14;	author sthen;	state Exp;
branches;
next	1.562;
commitid	fOaZtGrOn2m5mmIT;

1.562
date	2014.10.19.13.21.42;	author matthieu;	state Exp;
branches;
next	1.561;
commitid	1k4kVFN5zauEcweT;

1.561
date	2014.10.14.15.56.39;	author sthen;	state Exp;
branches;
next	1.560;
commitid	ziUt2dFvOwasJVND;

1.560
date	2014.10.14.14.33.19;	author sthen;	state Exp;
branches;
next	1.559;
commitid	6ngOKh3DFCbWBtHd;

1.559
date	2014.10.13.14.00.10;	author sthen;	state Exp;
branches;
next	1.558;
commitid	JsNBNKRsiQTCQpRW;

1.558
date	2014.10.13.13.22.03;	author sthen;	state Exp;
branches;
next	1.557;
commitid	z0lNDU4GQwKaJOTN;

1.557
date	2014.10.06.15.43.04;	author sthen;	state Exp;
branches;
next	1.556;
commitid	pE6NOX54cKDgo34S;

1.556
date	2014.10.05.11.39.10;	author sthen;	state Exp;
branches;
next	1.555;
commitid	9pW1YNUyQXtYgsx0;

1.555
date	2014.10.04.10.47.12;	author sthen;	state Exp;
branches;
next	1.554;
commitid	o0XJBnTcS7TbsIHR;

1.554
date	2014.09.25.20.53.07;	author landry;	state Exp;
branches;
next	1.553;
commitid	sOaAyhOZ0R6nBMUT;

1.553
date	2014.09.19.11.16.31;	author ajacoutot;	state Exp;
branches;
next	1.552;
commitid	RjoieeOtpW5e3CLf;

1.552
date	2014.09.16.17.16.32;	author ajacoutot;	state Exp;
branches;
next	1.551;
commitid	v5Xg2nYoXxN2LAaV;

1.551
date	2014.09.16.10.59.17;	author sthen;	state Exp;
branches;
next	1.550;
commitid	YcKvRnIMUCsNyrpo;

1.550
date	2014.09.16.10.57.59;	author sthen;	state Exp;
branches;
next	1.549;
commitid	hk2dJKZZKdridBw6;

1.549
date	2014.09.16.10.55.06;	author sthen;	state Exp;
branches;
next	1.548;
commitid	fWpVMUusY3FSOo8m;

1.548
date	2014.09.15.22.51.00;	author matthieu;	state Exp;
branches;
next	1.547;
commitid	UZLJ11HlTR7kwfuj;

1.547
date	2014.09.13.14.02.19;	author brad;	state Exp;
branches;
next	1.546;
commitid	KDF9tMVBiUcLr6kO;

1.546
date	2014.09.09.08.43.01;	author sthen;	state Exp;
branches;
next	1.545;
commitid	yudQKK0jtx9mUnE2;

1.545
date	2014.08.29.11.39.18;	author sebastia;	state Exp;
branches;
next	1.544;
commitid	PqBR6Zb5iD8AqBB8;

1.544
date	2014.08.26.23.28.19;	author brad;	state Exp;
branches;
next	1.543;
commitid	A4oiO3vJdKI9EgIP;

1.543
date	2014.08.26.21.16.10;	author rpe;	state Exp;
branches;
next	1.542;
commitid	BVFbEqEKDDr6KeWy;

1.542
date	2014.08.26.21.02.22;	author rpe;	state Exp;
branches;
next	1.541;
commitid	tp9hH4vvtXw9ebXw;

1.541
date	2014.08.26.19.42.35;	author robert;	state Exp;
branches;
next	1.540;
commitid	eyi4BXpNYjZlzdQC;

1.540
date	2014.08.26.18.06.56;	author jsing;	state Exp;
branches;
next	1.539;
commitid	VzZytTuZ7vQv6fNB;

1.539
date	2014.08.25.07.40.35;	author doug;	state Exp;
branches;
next	1.538;
commitid	je5sLMQbDJPRlntm;

1.538
date	2014.08.22.23.52.00;	author brad;	state Exp;
branches;
next	1.537;
commitid	1LvJpFTSczjfLFBT;

1.537
date	2014.08.22.20.53.44;	author sthen;	state Exp;
branches;
next	1.536;
commitid	ER2ZFGHN7vobrdib;

1.536
date	2014.08.15.10.31.57;	author matthieu;	state Exp;
branches;
next	1.535;
commitid	IFa3N26jXmUOLUyn;

1.535
date	2014.08.13.21.17.10;	author matthieu;	state Exp;
branches;
next	1.534;
commitid	fNMXkrggMr2BdyYW;

1.534
date	2014.08.13.17.02.21;	author nick;	state Exp;
branches;
next	1.533;
commitid	68vFR5I1C8HByVVh;

1.533
date	2014.07.27.10.54.07;	author kili;	state Exp;
branches;
next	1.532;
commitid	w6Wen980T3ebRfDz;

1.532
date	2014.07.24.17.48.08;	author stsp;	state Exp;
branches;
next	1.531;
commitid	gTm9xDBF3WenUrR5;

1.531
date	2014.07.23.19.07.17;	author zhuk;	state Exp;
branches;
next	1.530;
commitid	1PK7qDt6otGsdbnc;

1.530
date	2014.07.23.10.33.45;	author ajacoutot;	state Exp;
branches;
next	1.529;
commitid	HRiiuDmYW1ekHDth;

1.529
date	2014.07.23.08.55.35;	author sthen;	state Exp;
branches;
next	1.528;
commitid	5EKNi4wgJECclZn4;

1.528
date	2014.07.22.21.54.26;	author sthen;	state Exp;
branches;
next	1.527;
commitid	UKe7SfN2mruehcPy;

1.527
date	2014.07.22.19.26.46;	author zhuk;	state Exp;
branches;
next	1.526;
commitid	VxDbn26wuiK9pg3k;

1.526
date	2014.07.14.05.48.51;	author deraadt;	state Exp;
branches;
next	1.525;
commitid	2mmOZOM0EzCiUmI2;

1.525
date	2014.07.14.05.25.52;	author deraadt;	state Exp;
branches;
next	1.524;
commitid	ZxIxd5zToBZB2iOb;

1.524
date	2014.07.14.04.05.29;	author deraadt;	state Exp;
branches;
next	1.523;
commitid	erNqAirtI88OEoXS;

1.523
date	2014.07.13.15.54.24;	author benno;	state Exp;
branches;
next	1.522;
commitid	xkFqhnC4yaPKfdik;

1.522
date	2014.07.11.16.57.14;	author sthen;	state Exp;
branches;
next	1.521;
commitid	NlPIXFwSvEV9WKZq;

1.521
date	2014.07.11.14.50.56;	author sthen;	state Exp;
branches;
next	1.520;
commitid	E8iXirOnHawQA65O;

1.520
date	2014.07.10.14.34.29;	author stsp;	state Exp;
branches;
next	1.519;
commitid	CwsL2vX56rgmM8sF;

1.519
date	2014.07.09.16.54.58;	author reyk;	state Exp;
branches;
next	1.518;
commitid	SFAbrfXk5GxtEHaw;

1.518
date	2014.06.30.13.31.51;	author mikeb;	state Exp;
branches;
next	1.517;
commitid	bPbHY4S5Yaq8WQjF;

1.517
date	2014.06.23.15.04.23;	author sthen;	state Exp;
branches;
next	1.516;
commitid	WOVEFC0cFXULPkf5;

1.516
date	2014.06.13.18.53.33;	author deraadt;	state Exp;
branches;
next	1.515;
commitid	VCR4MeHMbtaEyGbJ;

1.515
date	2014.06.13.08.14.55;	author deraadt;	state Exp;
branches;
next	1.514;
commitid	5Vk9PPgklwd5VosE;

1.514
date	2014.06.12.19.41.20;	author sthen;	state Exp;
branches;
next	1.513;
commitid	OjRsChUhIL0XUvyr;

1.513
date	2014.06.04.12.33.44;	author sthen;	state Exp;
branches;
next	1.512;
commitid	7ZsNHykVCHANzC4F;

1.512
date	2014.06.03.16.33.52;	author sthen;	state Exp;
branches;
next	1.511;
commitid	F2JVWDLXjYci6ytR;

1.511
date	2014.06.03.12.03.40;	author sthen;	state Exp;
branches;
next	1.510;
commitid	s54bJcM7K1LoP1Th;

1.510
date	2014.05.28.22.21.52;	author sthen;	state Exp;
branches;
next	1.509;

1.509
date	2014.05.27.09.40.29;	author mpi;	state Exp;
branches;
next	1.508;

1.508
date	2014.05.07.13.38.43;	author jca;	state Exp;
branches;
next	1.507;

1.507
date	2014.05.03.17.17.32;	author deraadt;	state Exp;
branches;
next	1.506;

1.506
date	2014.05.01.15.02.29;	author nick;	state Exp;
branches;
next	1.505;

1.505
date	2014.04.23.09.58.16;	author ajacoutot;	state Exp;
branches;
next	1.504;

1.504
date	2014.04.22.18.51.40;	author henning;	state Exp;
branches;
next	1.503;

1.503
date	2014.04.22.18.48.58;	author jca;	state Exp;
branches;
next	1.502;

1.502
date	2014.04.22.15.19.10;	author reyk;	state Exp;
branches;
next	1.501;

1.501
date	2014.04.20.22.35.47;	author ajacoutot;	state Exp;
branches;
next	1.500;

1.500
date	2014.04.20.22.26.11;	author ajacoutot;	state Exp;
branches;
next	1.499;

1.499
date	2014.04.20.20.03.24;	author sthen;	state Exp;
branches;
next	1.498;

1.498
date	2014.04.19.18.41.38;	author jturner;	state Exp;
branches;
next	1.497;

1.497
date	2014.04.19.16.17.51;	author sthen;	state Exp;
branches;
next	1.496;

1.496
date	2014.04.14.14.50.36;	author jturner;	state Exp;
branches;
next	1.495;

1.495
date	2014.04.14.13.37.04;	author blambert;	state Exp;
branches;
next	1.494;

1.494
date	2014.03.31.12.50.44;	author sthen;	state Exp;
branches;
next	1.493;

1.493
date	2014.03.30.19.21.46;	author nick;	state Exp;
branches;
next	1.492;

1.492
date	2014.03.29.11.33.29;	author florian;	state Exp;
branches;
next	1.491;

1.491
date	2014.03.28.20.01.06;	author nigel;	state Exp;
branches;
next	1.490;

1.490
date	2014.03.27.22.38.08;	author jca;	state Exp;
branches;
next	1.489;

1.489
date	2014.03.26.09.08.56;	author fgsch;	state Exp;
branches;
next	1.488;

1.488
date	2014.03.25.09.55.25;	author ajacoutot;	state Exp;
branches;
next	1.487;

1.487
date	2014.03.24.17.51.52;	author tedu;	state Exp;
branches;
next	1.486;

1.486
date	2014.03.24.16.26.13;	author deraadt;	state Exp;
branches;
next	1.485;

1.485
date	2014.03.24.15.38.21;	author guenther;	state Exp;
branches;
next	1.484;

1.484
date	2014.03.23.23.53.33;	author naddy;	state Exp;
branches;
next	1.483;

1.483
date	2014.03.23.19.03.49;	author tedu;	state Exp;
branches;
next	1.482;

1.482
date	2014.03.23.18.10.45;	author deraadt;	state Exp;
branches;
next	1.481;

1.481
date	2014.03.23.18.01.07;	author kettenis;	state Exp;
branches;
next	1.480;

1.480
date	2014.03.23.17.50.20;	author deraadt;	state Exp;
branches;
next	1.479;

1.479
date	2014.03.23.17.31.43;	author pascal;	state Exp;
branches;
next	1.478;

1.478
date	2014.03.21.19.41.58;	author sthen;	state Exp;
branches;
next	1.477;

1.477
date	2014.03.21.19.11.48;	author tedu;	state Exp;
branches;
next	1.476;

1.476
date	2014.03.21.03.11.16;	author lteo;	state Exp;
branches;
next	1.475;

1.475
date	2014.03.19.20.10.29;	author tedu;	state Exp;
branches;
next	1.474;

1.474
date	2014.03.19.19.55.49;	author okan;	state Exp;
branches;
next	1.473;

1.473
date	2014.03.18.15.41.19;	author sthen;	state Exp;
branches;
next	1.472;

1.472
date	2014.03.17.22.10.33;	author kettenis;	state Exp;
branches;
next	1.471;

1.471
date	2014.03.17.21.05.27;	author sthen;	state Exp;
branches;
next	1.470;

1.470
date	2014.03.17.12.50.55;	author florian;	state Exp;
branches;
next	1.469;

1.469
date	2014.03.17.01.43.57;	author sthen;	state Exp;
branches;
next	1.468;

1.468
date	2014.03.16.22.26.25;	author sthen;	state Exp;
branches;
next	1.467;

1.467
date	2014.03.14.08.43.20;	author sthen;	state Exp;
branches;
next	1.466;

1.466
date	2014.03.14.01.10.40;	author tedu;	state Exp;
branches;
next	1.465;

1.465
date	2014.03.14.01.02.33;	author sthen;	state Exp;
branches;
next	1.464;

1.464
date	2014.03.14.00.37.12;	author tedu;	state Exp;
branches;
next	1.463;

1.463
date	2014.03.13.23.59.47;	author florian;	state Exp;
branches;
next	1.462;

1.462
date	2014.03.13.20.55.45;	author tedu;	state Exp;
branches;
next	1.461;

1.461
date	2014.03.13.15.22.37;	author tedu;	state Exp;
branches;
next	1.460;

1.460
date	2014.03.12.19.05.03;	author tedu;	state Exp;
branches;
next	1.459;

1.459
date	2014.03.07.23.16.55;	author sthen;	state Exp;
branches;
next	1.458;

1.458
date	2014.02.16.13.00.03;	author sthen;	state Exp;
branches;
next	1.457;

1.457
date	2014.02.11.14.23.00;	author okan;	state Exp;
branches;
next	1.456;

1.456
date	2014.02.10.21.07.15;	author sthen;	state Exp;
branches;
next	1.455;

1.455
date	2014.02.10.20.59.35;	author sthen;	state Exp;
branches;
next	1.454;

1.454
date	2014.01.21.01.20.22;	author jsing;	state Exp;
branches;
next	1.453;

1.453
date	2014.01.12.15.23.19;	author matthieu;	state Exp;
branches;
next	1.452;

1.452
date	2014.01.07.22.34.24;	author sthen;	state Exp;
branches;
next	1.451;

1.451
date	2013.12.31.02.57.14;	author schwarze;	state Exp;
branches;
next	1.450;

1.450
date	2013.12.31.00.03.01;	author schwarze;	state Exp;
branches;
next	1.449;

1.449
date	2013.12.29.07.09.57;	author deraadt;	state Exp;
branches;
next	1.448;

1.448
date	2013.12.28.21.35.16;	author kettenis;	state Exp;
branches;
next	1.447;

1.447
date	2013.12.28.17.09.00;	author deraadt;	state Exp;
branches;
next	1.446;

1.446
date	2013.12.25.20.58.53;	author espie;	state Exp;
branches;
next	1.445;

1.445
date	2013.12.16.19.05.09;	author okan;	state Exp;
branches;
next	1.444;

1.444
date	2013.12.16.09.57.27;	author martin;	state Exp;
branches;
next	1.443;

1.443
date	2013.12.08.22.09.19;	author naddy;	state Exp;
branches;
next	1.442;

1.442
date	2013.12.08.18.15.07;	author naddy;	state Exp;
branches;
next	1.441;

1.441
date	2013.12.06.17.00.58;	author lteo;	state Exp;
branches;
next	1.440;

1.440
date	2013.11.26.14.17.38;	author sthen;	state Exp;
branches;
next	1.439;

1.439
date	2013.11.26.13.13.09;	author sthen;	state Exp;
branches;
next	1.438;

1.438
date	2013.11.19.15.46.30;	author sthen;	state Exp;
branches;
next	1.437;

1.437
date	2013.11.18.18.29.12;	author sthen;	state Exp;
branches;
next	1.436;

1.436
date	2013.11.06.10.03.20;	author eric;	state Exp;
branches;
next	1.435;

1.435
date	2013.11.05.17.54.41;	author sthen;	state Exp;
branches;
next	1.434;

1.434
date	2013.11.04.01.27.25;	author fgsch;	state Exp;
branches;
next	1.433;

1.433
date	2013.11.01.14.06.35;	author nick;	state Exp;
branches;
next	1.432;

1.432
date	2013.10.31.18.40.46;	author bluhm;	state Exp;
branches;
next	1.431;

1.431
date	2013.10.19.10.36.02;	author jung;	state Exp;
branches;
next	1.430;

1.430
date	2013.10.15.09.32.17;	author sthen;	state Exp;
branches;
next	1.429;

1.429
date	2013.10.15.02.26.12;	author jeremy;	state Exp;
branches;
next	1.428;

1.428
date	2013.10.12.12.52.30;	author sthen;	state Exp;
branches;
next	1.427;

1.427
date	2013.10.10.10.12.48;	author stsp;	state Exp;
branches;
next	1.426;

1.426
date	2013.09.29.17.41.39;	author nick;	state Exp;
branches;
next	1.425;

1.425
date	2013.09.18.21.22.27;	author kirby;	state Exp;
branches;
next	1.424;

1.424
date	2013.09.18.14.13.11;	author okan;	state Exp;
branches;
next	1.423;

1.423
date	2013.09.18.07.24.09;	author guenther;	state Exp;
branches;
next	1.422;

1.422
date	2013.09.15.22.31.31;	author okan;	state Exp;
branches;
next	1.421;

1.421
date	2013.09.14.17.23.40;	author landry;	state Exp;
branches;
next	1.420;

1.420
date	2013.09.14.02.03.26;	author guenther;	state Exp;
branches;
next	1.419;

1.419
date	2013.08.23.22.56.41;	author sthen;	state Exp;
branches;
next	1.418;

1.418
date	2013.08.23.08.28.17;	author mpi;	state Exp;
branches;
next	1.417;

1.417
date	2013.08.19.09.47.12;	author sthen;	state Exp;
branches;
next	1.416;

1.416
date	2013.08.17.08.58.57;	author sthen;	state Exp;
branches;
next	1.415;

1.415
date	2013.08.16.11.23.44;	author sthen;	state Exp;
branches;
next	1.414;

1.414
date	2013.08.14.07.45.04;	author guenther;	state Exp;
branches;
next	1.413;

1.413
date	2013.08.14.07.24.15;	author guenther;	state Exp;
branches;
next	1.412;

1.412
date	2013.08.13.11.36.05;	author sthen;	state Exp;
branches;
next	1.411;

1.411
date	2013.08.13.06.55.04;	author guenther;	state Exp;
branches;
next	1.410;

1.410
date	2013.08.12.19.05.56;	author matthieu;	state Exp;
branches;
next	1.409;

1.409
date	2013.08.12.04.20.21;	author jsg;	state Exp;
branches;
next	1.408;

1.408
date	2013.08.06.22.45.46;	author sthen;	state Exp;
branches;
next	1.407;

1.407
date	2013.08.06.20.16.01;	author miod;	state Exp;
branches;
next	1.406;

1.406
date	2013.07.10.05.14.24;	author ajacoutot;	state Exp;
branches;
next	1.405;

1.405
date	2013.07.06.18.03.15;	author miod;	state Exp;
branches;
next	1.404;

1.404
date	2013.07.02.23.39.03;	author beck;	state Exp;
branches;
next	1.403;

1.403
date	2013.06.21.13.47.08;	author ajacoutot;	state Exp;
branches;
next	1.402;

1.402
date	2013.06.21.12.27.14;	author ajacoutot;	state Exp;
branches;
next	1.401;

1.401
date	2013.06.20.09.40.53;	author ajacoutot;	state Exp;
branches;
next	1.400;

1.400
date	2013.06.20.08.43.00;	author ajacoutot;	state Exp;
branches;
next	1.399;

1.399
date	2013.06.19.07.16.44;	author ajacoutot;	state Exp;
branches;
next	1.398;

1.398
date	2013.06.19.03.53.16;	author lteo;	state Exp;
branches;
next	1.397;

1.397
date	2013.06.18.12.22.09;	author ajacoutot;	state Exp;
branches;
next	1.396;

1.396
date	2013.06.17.21.51.25;	author jturner;	state Exp;
branches;
next	1.395;

1.395
date	2013.06.17.21.08.18;	author robert;	state Exp;
branches;
next	1.394;

1.394
date	2013.06.07.20.59.06;	author kettenis;	state Exp;
branches;
next	1.393;

1.393
date	2013.06.07.20.05.11;	author matthieu;	state Exp;
branches;
next	1.392;

1.392
date	2013.06.05.04.10.00;	author guenther;	state Exp;
branches;
next	1.391;

1.391
date	2013.06.02.23.11.35;	author tedu;	state Exp;
branches;
next	1.390;

1.390
date	2013.06.02.21.13.39;	author miod;	state Exp;
branches;
next	1.389;

1.389
date	2013.06.02.18.52.23;	author lum;	state Exp;
branches;
next	1.388;

1.388
date	2013.06.02.16.12.22;	author tedu;	state Exp;
branches;
next	1.387;

1.387
date	2013.06.02.14.27.31;	author florian;	state Exp;
branches;
next	1.386;

1.386
date	2013.06.01.20.28.40;	author ajacoutot;	state Exp;
branches;
next	1.385;

1.385
date	2013.06.01.20.22.37;	author stsp;	state Exp;
branches;
next	1.384;

1.384
date	2013.05.31.20.11.20;	author guenther;	state Exp;
branches;
next	1.383;

1.383
date	2013.05.22.02.47.29;	author lteo;	state Exp;
branches;
next	1.382;

1.382
date	2013.05.01.21.13.36;	author sthen;	state Exp;
branches;
next	1.381;

1.381
date	2013.05.01.13.18.27;	author nick;	state Exp;
branches;
next	1.380;

1.380
date	2013.04.29.14.12.07;	author ajacoutot;	state Exp;
branches;
next	1.379;

1.379
date	2013.04.19.15.05.59;	author florian;	state Exp;
branches;
next	1.378;

1.378
date	2013.04.16.13.41.31;	author sthen;	state Exp;
branches;
next	1.377;

1.377
date	2013.04.16.11.11.14;	author nick;	state Exp;
branches;
next	1.376;

1.376
date	2013.04.16.04.26.10;	author guenther;	state Exp;
branches;
next	1.375;

1.375
date	2013.04.16.03.56.24;	author guenther;	state Exp;
branches;
next	1.374;

1.374
date	2013.04.06.08.44.14;	author kettenis;	state Exp;
branches;
next	1.373;

1.373
date	2013.03.28.21.49.08;	author martynas;	state Exp;
branches;
next	1.372;

1.372
date	2013.03.28.20.30.02;	author martynas;	state Exp;
branches;
next	1.371;

1.371
date	2013.03.25.21.40.54;	author sthen;	state Exp;
branches;
next	1.370;

1.370
date	2013.03.24.14.16.01;	author sthen;	state Exp;
branches;
next	1.369;

1.369
date	2013.03.14.00.05.40;	author matthieu;	state Exp;
branches;
next	1.368;

1.368
date	2013.03.11.11.57.35;	author krw;	state Exp;
branches;
next	1.367;

1.367
date	2013.03.11.08.15.19;	author matthieu;	state Exp;
branches;
next	1.366;

1.366
date	2013.03.11.07.11.22;	author matthieu;	state Exp;
branches;
next	1.365;

1.365
date	2013.02.02.18.22.48;	author miod;	state Exp;
branches;
next	1.364;

1.364
date	2013.01.16.02.15.06;	author henning;	state Exp;
branches;
next	1.363;

1.363
date	2013.01.16.02.10.13;	author henning;	state Exp;
branches;
next	1.362;

1.362
date	2013.01.05.20.28.21;	author miod;	state Exp;
branches;
next	1.361;

1.361
date	2012.12.22.12.01.05;	author kettenis;	state Exp;
branches;
next	1.360;

1.360
date	2012.12.21.20.31.57;	author sthen;	state Exp;
branches;
next	1.359;

1.359
date	2012.12.04.19.00.02;	author miod;	state Exp;
branches;
next	1.358;

1.358
date	2012.12.01.21.11.37;	author miod;	state Exp;
branches;
next	1.357;

1.357
date	2012.11.23.07.56.53;	author ratchov;	state Exp;
branches;
next	1.356;

1.356
date	2012.11.17.16.28.30;	author ajacoutot;	state Exp;
branches;
next	1.355;

1.355
date	2012.11.17.12.40.05;	author ajacoutot;	state Exp;
branches;
next	1.354;

1.354
date	2012.11.17.07.53.04;	author ajacoutot;	state Exp;
branches;
next	1.353;

1.353
date	2012.11.10.04.15.29;	author nick;	state Exp;
branches;
next	1.352;

1.352
date	2012.11.04.04.17.17;	author lteo;	state Exp;
branches;
next	1.351;

1.351
date	2012.10.21.14.44.14;	author nick;	state Exp;
branches;
next	1.350;

1.350
date	2012.10.12.19.16.02;	author eric;	state Exp;
branches;
next	1.349;

1.349
date	2012.09.25.19.16.46;	author sthen;	state Exp;
branches;
next	1.348;

1.348
date	2012.09.25.06.27.10;	author camield;	state Exp;
branches;
next	1.347;

1.347
date	2012.09.24.20.54.04;	author pea;	state Exp;
branches;
next	1.346;

1.346
date	2012.09.23.08.26.15;	author matthieu;	state Exp;
branches;
next	1.345;

1.345
date	2012.09.13.01.57.59;	author lteo;	state Exp;
branches;
next	1.344;

1.344
date	2012.09.04.04.32.02;	author deraadt;	state Exp;
branches;
next	1.343;

1.343
date	2012.09.02.03.50.45;	author deraadt;	state Exp;
branches;
next	1.342;

1.342
date	2012.09.02.03.49.49;	author deraadt;	state Exp;
branches;
next	1.341;

1.341
date	2012.08.31.21.26.28;	author fgsch;	state Exp;
branches;
next	1.340;

1.340
date	2012.08.31.18.52.10;	author naddy;	state Exp;
branches;
next	1.339;

1.339
date	2012.08.31.17.21.52;	author pascal;	state Exp;
branches;
next	1.338;

1.338
date	2012.08.31.17.11.07;	author matthew;	state Exp;
branches;
next	1.337;

1.337
date	2012.08.31.06.34.32;	author jasper;	state Exp;
branches;
next	1.336;

1.336
date	2012.08.24.08.01.22;	author kettenis;	state Exp;
branches;
next	1.335;

1.335
date	2012.08.24.05.30.39;	author matthew;	state Exp;
branches;
next	1.334;

1.334
date	2012.08.24.05.26.20;	author matthew;	state Exp;
branches;
next	1.333;

1.333
date	2012.08.24.01.34.30;	author matthew;	state Exp;
branches;
next	1.332;

1.332
date	2012.08.23.20.29.57;	author sthen;	state Exp;
branches;
next	1.331;

1.331
date	2012.08.08.16.56.02;	author matthieu;	state Exp;
branches;
next	1.330;

1.330
date	2012.07.18.13.20.12;	author jj;	state Exp;
branches;
next	1.329;

1.329
date	2012.07.16.16.47.32;	author jasper;	state Exp;
branches;
next	1.328;

1.328
date	2012.07.15.17.16.39;	author gilles;	state Exp;
branches;
next	1.327;

1.327
date	2012.07.09.21.47.14;	author gonzalo;	state Exp;
branches;
next	1.326;

1.326
date	2012.06.24.03.24.49;	author lteo;	state Exp;
branches;
next	1.325;

1.325
date	2012.06.08.23.00.17;	author sthen;	state Exp;
branches;
next	1.324;

1.324
date	2012.06.08.13.47.19;	author sthen;	state Exp;
branches;
next	1.323;

1.323
date	2012.06.07.12.23.29;	author jasper;	state Exp;
branches;
next	1.322;

1.322
date	2012.06.07.07.04.30;	author kili;	state Exp;
branches;
next	1.321;

1.321
date	2012.05.11.11.18.56;	author nick;	state Exp;
branches;
next	1.320;

1.320
date	2012.04.28.10.18.55;	author sthen;	state Exp;
branches;
next	1.319;

1.319
date	2012.04.28.09.54.15;	author sthen;	state Exp;
branches;
next	1.318;

1.318
date	2012.04.15.12.58.40;	author jsing;	state Exp;
branches;
next	1.317;

1.317
date	2012.04.12.13.05.34;	author jsg;	state Exp;
branches;
next	1.316;

1.316
date	2012.03.04.16.27.45;	author matthieu;	state Exp;
branches;
next	1.315;

1.315
date	2012.02.07.07.53.46;	author matthieu;	state Exp;
branches;
next	1.314;

1.314
date	2012.02.04.21.26.57;	author sthen;	state Exp;
branches;
next	1.313;

1.313
date	2012.01.27.10.44.47;	author dcoppa;	state Exp;
branches;
next	1.312;

1.312
date	2012.01.26.09.04.30;	author dcoppa;	state Exp;
branches;
next	1.311;

1.311
date	2012.01.25.22.10.20;	author matthieu;	state Exp;
branches;
next	1.310;

1.310
date	2012.01.23.10.13.40;	author yasuoka;	state Exp;
branches;
next	1.309;

1.309
date	2012.01.23.09.57.04;	author sthen;	state Exp;
branches;
next	1.308;

1.308
date	2012.01.23.09.19.55;	author giovanni;	state Exp;
branches;
next	1.307;

1.307
date	2012.01.21.00.55.01;	author schwarze;	state Exp;
branches;
next	1.306;

1.306
date	2012.01.12.09.33.48;	author sthen;	state Exp;
branches;
next	1.305;

1.305
date	2012.01.10.10.01.31;	author schwarze;	state Exp;
branches;
next	1.304;

1.304
date	2012.01.09.10.37.37;	author schwarze;	state Exp;
branches;
next	1.303;

1.303
date	2012.01.06.17.19.15;	author schwarze;	state Exp;
branches;
next	1.302;

1.302
date	2011.12.12.11.03.03;	author sthen;	state Exp;
branches;
next	1.301;

1.301
date	2011.11.28.03.24.31;	author nick;	state Exp;
branches;
next	1.300;

1.300
date	2011.11.25.06.01.37;	author miod;	state Exp;
branches;
next	1.299;

1.299
date	2011.11.20.11.00.05;	author matthieu;	state Exp;
branches;
next	1.298;

1.298
date	2011.11.15.21.20.03;	author ajacoutot;	state Exp;
branches;
next	1.297;

1.297
date	2011.11.01.10.47.46;	author nick;	state Exp;
branches;
next	1.296;

1.296
date	2011.10.18.06.19.28;	author ratchov;	state Exp;
branches;
next	1.295;

1.295
date	2011.10.17.21.38.14;	author ratchov;	state Exp;
branches;
next	1.294;

1.294
date	2011.10.17.18.16.30;	author matthieu;	state Exp;
branches;
next	1.293;

1.293
date	2011.10.14.16.23.28;	author stsp;	state Exp;
branches;
next	1.292;

1.292
date	2011.10.13.11.35.45;	author stsp;	state Exp;
branches;
next	1.291;

1.291
date	2011.09.23.09.57.46;	author pea;	state Exp;
branches;
next	1.290;

1.290
date	2011.09.23.00.18.46;	author nick;	state Exp;
branches;
next	1.289;

1.289
date	2011.09.19.19.40.19;	author naddy;	state Exp;
branches;
next	1.288;

1.288
date	2011.08.18.19.13.19;	author sthen;	state Exp;
branches;
next	1.287;

1.287
date	2011.08.04.09.12.09;	author sthen;	state Exp;
branches;
next	1.286;

1.286
date	2011.07.29.06.44.32;	author ajacoutot;	state Exp;
branches;
next	1.285;

1.285
date	2011.07.28.07.16.41;	author sthen;	state Exp;
branches;
next	1.284;

1.284
date	2011.07.26.10.52.47;	author sthen;	state Exp;
branches;
next	1.283;

1.283
date	2011.07.20.16.23.16;	author giovanni;	state Exp;
branches;
next	1.282;

1.282
date	2011.07.19.11.10.05;	author sthen;	state Exp;
branches;
next	1.281;

1.281
date	2011.07.17.20.22.14;	author sthen;	state Exp;
branches;
next	1.280;

1.280
date	2011.07.14.15.39.33;	author sthen;	state Exp;
branches;
next	1.279;

1.279
date	2011.07.14.11.44.03;	author pirofti;	state Exp;
branches;
next	1.278;

1.278
date	2011.07.11.12.00.50;	author ajacoutot;	state Exp;
branches;
next	1.277;

1.277
date	2011.07.10.18.36.58;	author nick;	state Exp;
branches;
next	1.276;

1.276
date	2011.07.10.18.29.34;	author nick;	state Exp;
branches;
next	1.275;

1.275
date	2011.07.08.07.40.16;	author ajacoutot;	state Exp;
branches;
next	1.274;

1.274
date	2011.07.04.07.37.23;	author sthen;	state Exp;
branches;
next	1.273;

1.273
date	2011.06.29.20.18.31;	author matthieu;	state Exp;
branches;
next	1.272;

1.272
date	2011.06.07.10.18.11;	author pirofti;	state Exp;
branches;
next	1.271;

1.271
date	2011.06.04.15.47.23;	author matthieu;	state Exp;
branches;
next	1.270;

1.270
date	2011.06.02.13.03.11;	author sthen;	state Exp;
branches;
next	1.269;

1.269
date	2011.06.01.08.53.59;	author sthen;	state Exp;
branches;
next	1.268;

1.268
date	2011.06.01.04.59.24;	author matthew;	state Exp;
branches;
next	1.267;

1.267
date	2011.05.28.19.50.45;	author sthen;	state Exp;
branches;
next	1.266;

1.266
date	2011.05.26.07.06.42;	author ratchov;	state Exp;
branches;
next	1.265;

1.265
date	2011.05.20.22.56.09;	author sthen;	state Exp;
branches;
next	1.264;

1.264
date	2011.05.10.02.34.57;	author nick;	state Exp;
branches;
next	1.263;

1.263
date	2011.05.05.12.30.08;	author sthen;	state Exp;
branches;
next	1.262;

1.262
date	2011.05.01.13.04.13;	author nick;	state Exp;
branches;
next	1.261;

1.261
date	2011.04.28.10.14.41;	author sthen;	state Exp;
branches;
next	1.260;

1.260
date	2011.04.22.05.37.23;	author sebastia;	state Exp;
branches;
next	1.259;

1.259
date	2011.04.21.00.59.46;	author matthew;	state Exp;
branches;
next	1.258;

1.258
date	2011.04.19.22.04.01;	author schwarze;	state Exp;
branches;
next	1.257;

1.257
date	2011.04.18.19.21.18;	author thib;	state Exp;
branches;
next	1.256;

1.256
date	2011.04.18.11.14.31;	author nick;	state Exp;
branches;
next	1.255;

1.255
date	2011.04.17.22.06.39;	author schwarze;	state Exp;
branches;
next	1.254;

1.254
date	2011.04.17.15.37.59;	author nick;	state Exp;
branches;
next	1.253;

1.253
date	2011.03.19.17.51.24;	author schwarze;	state Exp;
branches;
next	1.252;

1.252
date	2011.03.13.16.05.12;	author stsp;	state Exp;
branches;
next	1.251;

1.251
date	2011.01.26.11.26.22;	author sthen;	state Exp;
branches;
next	1.250;

1.250
date	2011.01.10.13.09.06;	author pea;	state Exp;
branches;
next	1.249;

1.249
date	2010.12.09.00.04.26;	author jeremy;	state Exp;
branches;
next	1.248;

1.248
date	2010.11.11.15.07.55;	author matthieu;	state Exp;
branches;
next	1.247;

1.247
date	2010.11.08.14.42.28;	author pea;	state Exp;
branches;
next	1.246;

1.246
date	2010.11.04.08.38.59;	author sthen;	state Exp;
branches;
next	1.245;

1.245
date	2010.11.03.19.57.57;	author pirofti;	state Exp;
branches;
next	1.244;

1.244
date	2010.11.02.15.29.28;	author millert;	state Exp;
branches;
next	1.243;

1.243
date	2010.11.01.20.44.30;	author matthieu;	state Exp;
branches;
next	1.242;

1.242
date	2010.11.01.16.39.03;	author deraadt;	state Exp;
branches;
next	1.241;

1.241
date	2010.11.01.16.00.45;	author deraadt;	state Exp;
branches;
next	1.240;

1.240
date	2010.11.01.15.54.04;	author nick;	state Exp;
branches;
next	1.239;

1.239
date	2010.11.01.09.57.46;	author nick;	state Exp;
branches;
next	1.238;

1.238
date	2010.10.29.00.27.01;	author nick;	state Exp;
branches;
next	1.237;

1.237
date	2010.10.24.10.33.49;	author jasper;	state Exp;
branches;
next	1.236;

1.236
date	2010.10.23.21.46.02;	author jasper;	state Exp;
branches;
next	1.235;

1.235
date	2010.10.20.21.06.47;	author sthen;	state Exp;
branches;
next	1.234;

1.234
date	2010.10.16.06.56.27;	author matthieu;	state Exp;
branches;
next	1.233;

1.233
date	2010.09.24.01.24.54;	author jeremy;	state Exp;
branches;
next	1.232;

1.232
date	2010.08.09.15.02.59;	author sthen;	state Exp;
branches;
next	1.231;

1.231
date	2010.07.13.01.18.27;	author sthen;	state Exp;
branches;
next	1.230;

1.230
date	2010.07.12.23.46.18;	author sthen;	state Exp;
branches;
next	1.229;

1.229
date	2010.07.08.23.01.09;	author marco;	state Exp;
branches;
next	1.228;

1.228
date	2010.07.08.21.43.31;	author sthen;	state Exp;
branches;
next	1.227;

1.227
date	2010.07.06.19.55.57;	author ratchov;	state Exp;
branches;
next	1.226;

1.226
date	2010.06.27.20.00.41;	author claudio;	state Exp;
branches;
next	1.225;

1.225
date	2010.06.07.11.25.47;	author sthen;	state Exp;
branches;
next	1.224;

1.224
date	2010.06.05.16.56.00;	author landry;	state Exp;
branches;
next	1.223;

1.223
date	2010.05.30.21.40.35;	author robert;	state Exp;
branches;
next	1.222;

1.222
date	2010.05.28.01.21.56;	author sthen;	state Exp;
branches;
next	1.221;

1.221
date	2010.05.27.14.11.42;	author deraadt;	state Exp;
branches;
next	1.220;

1.220
date	2010.05.27.10.21.54;	author sthen;	state Exp;
branches;
next	1.219;

1.219
date	2010.05.26.20.45.07;	author sthen;	state Exp;
branches;
next	1.218;

1.218
date	2010.05.26.15.56.57;	author nicm;	state Exp;
branches;
next	1.217;

1.217
date	2010.05.26.09.29.12;	author deraadt;	state Exp;
branches;
next	1.216;

1.216
date	2010.05.26.07.01.51;	author jmc;	state Exp;
branches;
next	1.215;

1.215
date	2010.05.25.17.23.15;	author deraadt;	state Exp;
branches;
next	1.214;

1.214
date	2010.05.21.22.33.16;	author nick;	state Exp;
branches;
next	1.213;

1.213
date	2010.05.19.12.50.31;	author nick;	state Exp;
branches;
next	1.212;

1.212
date	2010.05.19.08.37.44;	author johan;	state Exp;
branches;
next	1.211;

1.211
date	2010.05.18.02.12.13;	author nick;	state Exp;
branches;
next	1.210;

1.210
date	2010.05.15.14.44.40;	author sthen;	state Exp;
branches;
next	1.209;

1.209
date	2010.05.15.13.49.51;	author sthen;	state Exp;
branches;
next	1.208;

1.208
date	2010.05.15.08.50.24;	author matthieu;	state Exp;
branches;
next	1.207;

1.207
date	2010.05.10.23.13.48;	author oga;	state Exp;
branches;
next	1.206;

1.206
date	2010.05.10.21.42.11;	author jsg;	state Exp;
branches;
next	1.205;

1.205
date	2010.05.06.20.32.14;	author naddy;	state Exp;
branches;
next	1.204;

1.204
date	2010.04.26.17.38.29;	author sthen;	state Exp;
branches;
next	1.203;

1.203
date	2010.04.24.07.53.01;	author ratchov;	state Exp;
branches;
next	1.202;

1.202
date	2010.04.21.20.14.16;	author nicm;	state Exp;
branches;
next	1.201;

1.201
date	2010.04.18.17.43.22;	author nick;	state Exp;
branches;
next	1.200;

1.200
date	2010.04.17.12.00.08;	author sthen;	state Exp;
branches;
next	1.199;

1.199
date	2010.04.04.02.26.42;	author nick;	state Exp;
branches;
next	1.198;

1.198
date	2010.04.03.21.39.33;	author schwarze;	state Exp;
branches;
next	1.197;

1.197
date	2010.04.02.23.59.00;	author deraadt;	state Exp;
branches;
next	1.196;

1.196
date	2010.03.29.13.23.28;	author pea;	state Exp;
branches;
next	1.195;

1.195
date	2010.03.26.11.22.58;	author jsing;	state Exp;
branches;
next	1.194;

1.194
date	2010.02.04.05.57.00;	author benoit;	state Exp;
branches;
next	1.193;

1.193
date	2010.02.03.21.52.00;	author miod;	state Exp;
branches;
next	1.192;

1.192
date	2010.01.13.23.56.45;	author sthen;	state Exp;
branches;
next	1.191;

1.191
date	2010.01.13.09.11.28;	author sthen;	state Exp;
branches;
next	1.190;

1.190
date	2010.01.12.23.38.37;	author sthen;	state Exp;
branches;
next	1.189;

1.189
date	2009.12.20.13.44.22;	author schwarze;	state Exp;
branches;
next	1.188;

1.188
date	2009.12.13.12.53.35;	author sthen;	state Exp;
branches;
next	1.187;

1.187
date	2009.11.22.23.17.44;	author sthen;	state Exp;
branches;
next	1.186;

1.186
date	2009.11.09.09.37.01;	author otto;	state Exp;
branches;
next	1.185;

1.185
date	2009.11.09.09.35.19;	author otto;	state Exp;
branches;
next	1.184;

1.184
date	2009.11.03.13.31.52;	author nick;	state Exp;
branches;
next	1.183;

1.183
date	2009.10.25.17.41.12;	author nick;	state Exp;
branches;
next	1.182;

1.182
date	2009.10.24.20.24.49;	author damien;	state Exp;
branches;
next	1.181;

1.181
date	2009.10.24.19.20.11;	author damien;	state Exp;
branches;
next	1.180;

1.180
date	2009.10.21.23.02.07;	author sthen;	state Exp;
branches;
next	1.179;

1.179
date	2009.10.21.16.54.24;	author sthen;	state Exp;
branches;
next	1.178;

1.178
date	2009.10.07.19.46.48;	author sthen;	state Exp;
branches;
next	1.177;

1.177
date	2009.10.02.08.48.16;	author sthen;	state Exp;
branches;
next	1.176;

1.176
date	2009.09.07.12.47.27;	author sthen;	state Exp;
branches;
next	1.175;

1.175
date	2009.09.04.20.46.07;	author benoit;	state Exp;
branches;
next	1.174;

1.174
date	2009.09.04.13.36.04;	author sthen;	state Exp;
branches;
next	1.173;

1.173
date	2009.09.03.09.44.06;	author sthen;	state Exp;
branches;
next	1.172;

1.172
date	2009.09.02.23.19.29;	author sthen;	state Exp;
branches;
next	1.171;

1.171
date	2009.09.02.22.16.04;	author sthen;	state Exp;
branches;
next	1.170;

1.170
date	2009.09.02.16.57.47;	author sthen;	state Exp;
branches;
next	1.169;

1.169
date	2009.09.02.13.34.41;	author sthen;	state Exp;
branches;
next	1.168;

1.168
date	2009.09.02.08.13.14;	author sthen;	state Exp;
branches;
next	1.167;

1.167
date	2009.09.01.23.28.22;	author sthen;	state Exp;
branches;
next	1.166;

1.166
date	2009.08.26.12.03.34;	author sthen;	state Exp;
branches;
next	1.165;

1.165
date	2009.08.18.08.28.22;	author ajacoutot;	state Exp;
branches;
next	1.164;

1.164
date	2009.08.01.15.05.57;	author michele;	state Exp;
branches;
next	1.163;

1.163
date	2009.07.27.07.35.18;	author ratchov;	state Exp;
branches;
next	1.162;

1.162
date	2009.07.26.22.52.03;	author kurt;	state Exp;
branches;
next	1.161;

1.161
date	2009.07.25.02.06.00;	author kurt;	state Exp;
branches;
next	1.160;

1.160
date	2009.07.23.11.19.47;	author nick;	state Exp;
branches;
next	1.159;

1.159
date	2009.07.03.13.49.50;	author sthen;	state Exp;
branches;
next	1.158;

1.158
date	2009.07.03.11.46.49;	author sthen;	state Exp;
branches;
next	1.157;

1.157
date	2009.06.26.21.57.22;	author martynas;	state Exp;
branches;
next	1.156;

1.156
date	2009.06.10.14.05.23;	author johan;	state Exp;
branches;
next	1.155;

1.155
date	2009.06.10.13.31.36;	author johan;	state Exp;
branches;
next	1.154;

1.154
date	2009.06.03.18.09.04;	author nicm;	state Exp;
branches;
next	1.153;

1.153
date	2009.06.02.02.40.17;	author sthen;	state Exp;
branches;
next	1.152;

1.152
date	2009.05.25.16.16.42;	author schwarze;	state Exp;
branches;
next	1.151;

1.151
date	2009.05.20.21.29.10;	author thib;	state Exp;
branches;
next	1.150;

1.150
date	2009.04.30.17.23.22;	author nick;	state Exp;
branches;
next	1.149;

1.149
date	2009.04.26.12.34.55;	author sthen;	state Exp;
branches;
next	1.148;

1.148
date	2009.04.25.08.54.09;	author chl;	state Exp;
branches;
next	1.147;

1.147
date	2009.04.24.21.31.51;	author chl;	state Exp;
branches;
next	1.146;

1.146
date	2009.04.09.20.46.05;	author jacekm;	state Exp;
branches;
next	1.145;

1.145
date	2009.04.07.17.09.08;	author sthen;	state Exp;
branches;
next	1.144;

1.144
date	2009.04.07.16.18.56;	author sthen;	state Exp;
branches;
next	1.143;

1.143
date	2009.04.06.19.08.11;	author jmc;	state Exp;
branches;
next	1.142;

1.142
date	2009.04.06.14.55.18;	author sthen;	state Exp;
branches;
next	1.141;

1.141
date	2009.04.01.22.19.19;	author sthen;	state Exp;
branches;
next	1.140;

1.140
date	2009.03.27.14.05.49;	author jacekm;	state Exp;
branches;
next	1.139;

1.139
date	2009.03.25.11.17.23;	author michele;	state Exp;
branches;
next	1.138;

1.138
date	2009.03.15.18.04.40;	author nick;	state Exp;
branches;
next	1.137;

1.137
date	2009.02.18.03.38.59;	author dlg;	state Exp;
branches;
next	1.136;

1.136
date	2009.02.04.08.55.37;	author jasper;	state Exp;
branches;
next	1.135;

1.135
date	2008.11.26.00.26.25;	author sthen;	state Exp;
branches;
next	1.134;

1.134
date	2008.11.17.03.23.22;	author jakemsr;	state Exp;
branches;
next	1.133;

1.133
date	2008.11.12.01.40.33;	author pirofti;	state Exp;
branches;
next	1.132;

1.132
date	2008.11.11.23.51.17;	author kurt;	state Exp;
branches;
next	1.131;

1.131
date	2008.11.07.15.13.35;	author sthen;	state Exp;
branches;
next	1.130;

1.130
date	2008.11.06.21.39.52;	author matthieu;	state Exp;
branches;
next	1.129;

1.129
date	2008.11.06.10.00.19;	author sthen;	state Exp;
branches;
next	1.128;

1.128
date	2008.11.06.01.27.38;	author kevlo;	state Exp;
branches;
next	1.127;

1.127
date	2008.11.03.11.52.13;	author sthen;	state Exp;
branches;
next	1.126;

1.126
date	2008.11.02.21.54.31;	author matthieu;	state Exp;
branches;
next	1.125;

1.125
date	2008.10.31.16.47.44;	author nick;	state Exp;
branches;
next	1.124;

1.124
date	2008.10.20.13.07.41;	author sthen;	state Exp;
branches;
next	1.123;

1.123
date	2008.10.11.20.46.17;	author sthen;	state Exp;
branches;
next	1.122;

1.122
date	2008.10.11.20.35.05;	author sthen;	state Exp;
branches;
next	1.121;

1.121
date	2008.10.05.22.10.25;	author millert;	state Exp;
branches;
next	1.120;

1.120
date	2008.10.03.03.12.57;	author nick;	state Exp;
branches;
next	1.119;

1.119
date	2008.09.05.11.21.41;	author nick;	state Exp;
branches;
next	1.118;

1.118
date	2008.07.27.14.39.14;	author nick;	state Exp;
branches;
next	1.117;

1.117
date	2008.07.25.12.30.42;	author espie;	state Exp;
branches;
next	1.116;

1.116
date	2008.07.24.17.12.09;	author deraadt;	state Exp;
branches;
next	1.115;

1.115
date	2008.07.24.17.06.03;	author martynas;	state Exp;
branches;
next	1.114;

1.114
date	2008.07.20.01.33.13;	author johan;	state Exp;
branches;
next	1.113;

1.113
date	2008.07.13.00.37.56;	author johan;	state Exp;
branches;
next	1.112;

1.112
date	2008.07.12.13.23.34;	author matthieu;	state Exp;
branches;
next	1.111;

1.111
date	2008.07.12.09.18.22;	author tobias;	state Exp;
branches;
next	1.110;

1.110
date	2008.07.12.08.38.04;	author tobias;	state Exp;
branches;
next	1.109;

1.109
date	2008.07.10.12.26.18;	author djm;	state Exp;
branches;
next	1.108;

1.108
date	2008.07.09.10.53.21;	author nick;	state Exp;
branches;
next	1.107;

1.107
date	2008.07.09.05.49.53;	author otto;	state Exp;
branches;
next	1.106;

1.106
date	2008.06.21.14.29.53;	author nick;	state Exp;
branches;
next	1.105;

1.105
date	2008.06.21.14.05.33;	author nick;	state Exp;
branches;
next	1.104;

1.104
date	2008.06.17.16.48.18;	author tobias;	state Exp;
branches;
next	1.103;

1.103
date	2008.06.17.05.56.20;	author mcbride;	state Exp;
branches;
next	1.102;

1.102
date	2008.06.13.22.36.27;	author johan;	state Exp;
branches;
next	1.101;

1.101
date	2008.06.10.03.16.19;	author sthen;	state Exp;
branches;
next	1.100;

1.100
date	2008.06.08.20.11.15;	author nick;	state Exp;
branches;
next	1.99;

1.99
date	2008.06.08.18.18.03;	author jdixon;	state Exp;
branches;
next	1.98;

1.98
date	2008.06.01.06.04.08;	author brad;	state Exp;
branches;
next	1.97;

1.97
date	2008.05.28.22.53.31;	author sthen;	state Exp;
branches;
next	1.96;

1.96
date	2008.05.23.01.42.39;	author johan;	state Exp;
branches;
next	1.95;

1.95
date	2008.05.15.00.07.15;	author nick;	state Exp;
branches;
next	1.94;

1.94
date	2008.04.30.21.51.36;	author nick;	state Exp;
branches;
next	1.93;

1.93
date	2008.04.21.20.49.36;	author rainer;	state Exp;
branches;
next	1.92;

1.92
date	2008.04.15.18.55.40;	author simon;	state Exp;
branches;
next	1.91;

1.91
date	2008.03.30.22.34.46;	author maja;	state Exp;
branches;
next	1.90;

1.90
date	2008.03.30.14.22.57;	author drahn;	state Exp;
branches;
next	1.89;

1.89
date	2008.03.28.17.47.09;	author drahn;	state Exp;
branches;
next	1.88;

1.88
date	2008.03.09.15.11.21;	author steven;	state Exp;
branches;
next	1.87;

1.87
date	2008.03.01.11.31.08;	author steven;	state Exp;
branches;
next	1.86;

1.86
date	2008.02.27.15.14.45;	author sthen;	state Exp;
branches;
next	1.85;

1.85
date	2008.02.24.19.12.16;	author nick;	state Exp;
branches;
next	1.84;

1.84
date	2008.02.10.17.15.35;	author mpf;	state Exp;
branches;
next	1.83;

1.83
date	2007.12.28.01.03.00;	author nick;	state Exp;
branches;
next	1.82;

1.82
date	2007.12.28.00.47.30;	author nick;	state Exp;
branches;
next	1.81;

1.81
date	2007.12.04.21.56.11;	author matthieu;	state Exp;
branches;
next	1.80;

1.80
date	2007.11.26.16.30.11;	author martin;	state Exp;
branches;
next	1.79;

1.79
date	2007.11.04.15.21.30;	author aanriot;	state Exp;
branches;
next	1.78;

1.78
date	2007.11.01.03.27.09;	author nick;	state Exp;
branches;
next	1.77;

1.77
date	2007.10.27.11.48.32;	author nick;	state Exp;
branches;
next	1.76;

1.76
date	2007.10.22.21.51.02;	author sthen;	state Exp;
branches;
next	1.75;

1.75
date	2007.09.04.22.14.52;	author steven;	state Exp;
branches;
next	1.74;

1.74
date	2007.09.04.21.44.59;	author kurt;	state Exp;
branches;
next	1.73;

1.73
date	2007.08.20.06.15.51;	author steven;	state Exp;
branches;
next	1.72;

1.72
date	2007.08.16.17.27.13;	author steven;	state Exp;
branches;
next	1.71;

1.71
date	2007.08.15.23.49.28;	author nick;	state Exp;
branches;
next	1.70;

1.70
date	2007.08.15.20.18.24;	author nick;	state Exp;
branches;
next	1.69;

1.69
date	2007.08.15.20.01.11;	author nick;	state Exp;
branches;
next	1.68;

1.68
date	2007.08.15.19.46.33;	author nick;	state Exp;
branches;
next	1.67;

1.67
date	2007.07.10.20.42.24;	author damien;	state Exp;
branches;
next	1.66;

1.66
date	2007.05.01.16.30.13;	author nick;	state Exp;
branches;
next	1.65;

1.65
date	2007.04.07.18.03.08;	author matthieu;	state Exp;
branches;
next	1.64;

1.64
date	2007.04.01.13.28.39;	author claudio;	state Exp;
branches;
next	1.63;

1.63
date	2007.04.01.01.42.40;	author nick;	state Exp;
branches;
next	1.62;

1.62
date	2007.03.31.03.33.52;	author nick;	state Exp;
branches;
next	1.61;

1.61
date	2007.03.30.06.22.57;	author jasper;	state Exp;
branches;
next	1.60;

1.60
date	2007.03.29.23.04.55;	author nick;	state Exp;
branches;
next	1.59;

1.59
date	2007.03.29.22.33.33;	author nick;	state Exp;
branches;
next	1.58;

1.58
date	2007.03.02.02.01.19;	author joel;	state Exp;
branches;
next	1.57;

1.57
date	2007.03.01.04.12.54;	author joel;	state Exp;
branches;
next	1.56;

1.56
date	2007.02.02.14.55.18;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2007.01.31.13.37.40;	author pyr;	state Exp;
branches;
next	1.54;

1.54
date	2006.12.31.17.49.16;	author aanriot;	state Exp;
branches;
next	1.53;

1.53
date	2006.12.27.17.58.19;	author drahn;	state Exp;
branches;
next	1.52;

1.52
date	2006.11.05.20.36.43;	author norby;	state Exp;
branches;
next	1.51;

1.51
date	2006.11.01.01.43.27;	author nick;	state Exp;
branches;
next	1.50;

1.50
date	2006.10.20.13.39.21;	author mcbride;	state Exp;
branches;
next	1.49;

1.49
date	2006.10.12.12.18.36;	author krw;	state Exp;
branches;
next	1.48;

1.48
date	2006.10.06.17.57.36;	author mcbride;	state Exp;
branches;
next	1.47;

1.47
date	2006.09.27.09.59.01;	author martin;	state Exp;
branches;
next	1.46;

1.46
date	2006.09.26.23.40.40;	author martin;	state Exp;
branches;
next	1.45;

1.45
date	2006.07.27.06.11.42;	author miod;	state Exp;
branches;
next	1.44;

1.44
date	2006.07.20.05.03.13;	author david;	state Exp;
branches;
next	1.43;

1.43
date	2006.06.22.15.16.21;	author steven;	state Exp;
branches;
next	1.42;

1.42
date	2006.06.21.06.47.50;	author norby;	state Exp;
branches;
next	1.41;

1.41
date	2006.06.21.04.20.28;	author david;	state Exp;
branches;
next	1.40;

1.40
date	2006.06.19.19.59.59;	author david;	state Exp;
branches;
next	1.39;

1.39
date	2006.05.19.20.17.24;	author reyk;	state Exp;
branches;
next	1.38;

1.38
date	2006.05.01.08.43.32;	author steven;	state Exp;
branches;
next	1.37;

1.37
date	2006.05.01.01.19.28;	author nick;	state Exp;
branches;
next	1.36;

1.36
date	2006.04.06.11.27.03;	author jsg;	state Exp;
branches;
next	1.35;

1.35
date	2006.02.23.22.42.28;	author steven;	state Exp;
branches;
next	1.34;

1.34
date	2006.02.21.17.34.46;	author hshoexer;	state Exp;
branches;
next	1.33;

1.33
date	2006.02.15.16.53.39;	author ian;	state Exp;
branches;
next	1.32;

1.32
date	2006.02.14.19.47.15;	author matthieu;	state Exp;
branches;
next	1.31;

1.31
date	2006.02.14.18.24.40;	author steven;	state Exp;
branches;
next	1.30;

1.30
date	2006.02.13.22.19.10;	author matthieu;	state Exp;
branches;
next	1.29;

1.29
date	2006.01.24.01.47.10;	author nick;	state Exp;
branches;
next	1.28;

1.28
date	2006.01.13.18.58.36;	author millert;	state Exp;
branches;
next	1.27;

1.27
date	2006.01.13.18.50.45;	author millert;	state Exp;
branches;
next	1.26;

1.26
date	2006.01.04.22.05.37;	author martin;	state Exp;
branches;
next	1.25;

1.25
date	2006.01.03.08.48.29;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2005.12.18.21.25.42;	author pvalchev;	state Exp;
branches;
next	1.23;

1.23
date	2005.11.18.19.30.15;	author camield;	state Exp;
branches;
next	1.22;

1.22
date	2005.11.18.12.25.25;	author camield;	state Exp;
branches;
next	1.21;

1.21
date	2005.11.02.02.02.07;	author nick;	state Exp;
branches;
next	1.20;

1.20
date	2005.11.01.11.50.01;	author nick;	state Exp;
branches;
next	1.19;

1.19
date	2005.10.19.10.04.13;	author nick;	state Exp;
branches;
next	1.18;

1.18
date	2005.10.08.18.11.53;	author otto;	state Exp;
branches;
next	1.17;

1.17
date	2005.10.08.08.55.27;	author mpf;	state Exp;
branches;
next	1.16;

1.16
date	2005.08.09.15.32.26;	author martin;	state Exp;
branches;
next	1.15;

1.15
date	2005.08.09.10.51.12;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2005.06.09.17.58.36;	author nick;	state Exp;
branches;
next	1.13;

1.13
date	2005.06.09.17.06.08;	author claudio;	state Exp;
branches;
next	1.12;

1.12
date	2005.06.09.15.38.15;	author claudio;	state Exp;
branches;
next	1.11;

1.11
date	2005.06.07.13.42.32;	author millert;	state Exp;
branches;
next	1.10;

1.10
date	2005.05.28.00.21.45;	author dhartmei;	state Exp;
branches;
next	1.9;

1.9
date	2005.05.23.18.03.32;	author jaredy;	state Exp;
branches;
next	1.8;

1.8
date	2005.05.19.17.00.22;	author nick;	state Exp;
branches;
next	1.7;

1.7
date	2005.04.16.12.48.21;	author nick;	state Exp;
branches;
next	1.6;

1.6
date	2005.04.13.21.43.24;	author henning;	state Exp;
branches;
next	1.5;

1.5
date	2005.04.01.14.16.27;	author henning;	state Exp;
branches;
next	1.4;

1.4
date	2005.04.01.11.27.10;	author martin;	state Exp;
branches;
next	1.3;

1.3
date	2005.03.31.00.12.48;	author nick;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.29.18.39.28;	author kettenis;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.09.19.32.13;	author nick;	state Exp;
branches;
next	;


desc
@@


1.813
log
@clang enabled on amd64 and i386. upgrade using a snapshot. if you build
your own releases, bump /usr/obj to 3G, otherwise 'make release' will fail.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Following -current and using snapshots</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="copyright" content="This document copyright 2005-2017 by OpenBSD">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/faq/current.html">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<h2>
<a href="../index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">Following <i>-current</i> and using snapshots</font>
<small>
<a href="index.html" style="font-weight:normal; float:right">[FAQ Index]</a>
</small>
</h2>
<hr>
<p>

Active OpenBSD development is known as the
<a href="faq5.html#Flavors">-current</a> branch.
These sources are frequently compiled into releases known as <i>snapshots</i>.
Active development sometimes pushes aggressive changes, and complications can
arise when building the latest code from a previous point in time.
Some of the shortcuts for getting over these hurdles are explained on this page.
In general, it's far better to use the
<!-- XXXrelease -->
<a href="upgrade61.html">OpenBSD upgrade procedure</a>
with a newer snapshot, as developers will have gone through the trouble for
you already.

<p>
Make sure you've read and understand how to
<a href="faq5.html">build the system from source</a>
before using -current and the instructions below.

<p>
You should <b>always</b> use a snapshot as the starting point for running
<i>-current</i>.
Upgrading by compiling your own source code is not supported.

<p>
Most of these changes will have to be performed as root.


<h3 id="r20170417">2017/04/17 - build infrastructure change</h3>

The build infrastructure has been changed to allow building <tt>clang</tt>
alongside <tt>gcc</tt>.
This requires an update of the make "include" files:

<blockquote><pre>
# <b>cd /usr/src/share/mk && make install</b>
</pre></blockquote>


<h3 id="r20170419">2017/04/19 - clang enabled for amd64 and i386</h3>

The clang compiler is now built alongside gcc on the amd64 and i386
architectures.
Upgrade using a snapshot.

<p>
If you build your own releases, note that <tt>make release</tt> now needs more
than <tt>2G</tt> space on <tt>/usr/obj</tt>.
Increasing the size to <tt>3G</tt> is recommended.

<p>
<hr>
<small>$OpenBSD: current.html,v 1.812 2017/04/17 16:42:06 kettenis Exp $</small>

</body>
</html>
@


1.812
log
@Document build infrastructure changes.
@
text
@d53 3
a55 3
The build infrastructure has been changed to allow building
<tt>clang</tt> alongside <tt>gcc</tt>.  This requires an update of the
make "include" files:
d61 12
d75 1
a75 1
<small>$OpenBSD: current.html,v 1.811 2017/04/11 13:32:58 tb Exp $</small>
@


1.811
log
@something went wrong in the previous commit.

reported by johnny-o via tj
@
text
@d51 9
a59 1
<h3 id="r20170406">2017/04/06 - no entries yet</h3>
d63 1
a63 1
<small>$OpenBSD: current.html,v 1.809 2017/04/06 11:19:41 tb Exp $</small>
@


1.810
log
@link to upgrade61.html
@
text
@d45 1
a45 5
<!-- XXXrelease: put the following sentence back and remove its replacement -->
<!--Upgrading by compiling your own source code is not supported.-->
<p>
In particular, upgrading by compiling from source from OpenBSD 6.0
<i>-release</i> to <i>-current</i> is <b>not supported</b>.
d51 1
a51 615
<h3 id="r20160801">2016/08/01 - new mandoc.db(5) format</h3>

To update all <a href="http://man.openbsd.org/mandoc.db.5">mandoc.db(5)</a>
files to the new format, run:

<blockquote><pre>
makewhatis
</pre></blockquote>


<h3 id="r20160808">2016/08/08 - mandatory W^X enforcement</h3>

W^X violations are now only permitted for binaries marked <b>wxneeded</b>
executed from filesystems marked <b>wxallowed</b>.
<ul>
<li>The base system is clean.
<li>Starting in 6.0, the installer sets the <tt>/usr/local</tt>
    filesystem to <b>wxallowed</b> -- if your filesystem is not
    set so, make this change.
<li>The ports tree contains a number of binaries which are not
    yet marked <b>wxneeded</b> but work is underway to mark them all.
</ul>


<h3 id="r20160812">2016/08/12 - [ports] py-elasticsearch-curator update</h3>

With the update of Elasticsearch Curator to the 4.x version, the CLI interface
changed.
Instead of parameters, yaml configuration files are used to steer actions of
curator.
Configuration file documentation can be found on the
<a href="https://www.elastic.co/guide/en/elasticsearch/client/curator/4.0/index.html">
curator reference pages</a>.


<h3 id="r20160814">2016/08/14 - qabs(3) and qdiv(3) manpages removed</h3>

Their content was merged into the labs(3) and lldiv(3) manpages,
so the separate files should be removed and and the database updated.

<blockquote><pre>
rm -f /usr/share/man/man3/qabs.3 /usr/share/man/man3/qdiv.3
makewhatis
</pre></blockquote>


<h3 id="r20160901a">2016/09/01 - [ports] letskencrypt renamed/moved to base</h3>

<tt>letskencrypt</tt>, previously in <tt>ports/security</tt>, has been imported
to base under its new name <tt>acme-client</tt>.
Adjust scripts/cronjobs as necessary.


<h3 id="r20160909">2016/09/09 - /dev/sound removed</h3>

Remove unused device nodes:

<blockquote><pre>
rm -f /dev/sound*
</pre></blockquote>


<h3 id="r20160913">2016/09/13 - [ports] Railo replaced with Lucee</h3>

Railo has been replaced with Lucee (a fork).
Make notes on your existing Railo configuration before updating.
You will need to adjust Tomcat configuration, and configure Lucee according
to your previous Railo configuration.


<h3 id="r20160919">2016/09/19 - softraid crypto switched to bcrypt PBKDF</h3>

New volumes will be created with bcrypt PBKDF, however existing volumes
will continue to use PKCS5 PBKDF2 until a passphrase change is made.

<p>
If you're booting from softraid crypto, ensure that your boot loader has been
upgraded to a version that supports bcrypt prior to changing your passphrase.
That is to say, it should be from a snapshot dated after 2016/09/19.
The <a href="http://man.openbsd.org/boot.8">boot(8)</a> version should be at
least 3.33 on amd64 and 3.31 on i386.
Also be aware that once the passphrase has been changed, an older version of
<a href="http://man.openbsd.org/bioctl.8">bioctl(8)</a> (one that does not
support bcrypt PBKDF) will not be able to "unlock" the volume.


<h3 id="r20160923">2016/09/23 - sqlite3 moved back to ports</h3>

SQLite has moved from base back to ports.
Remove the following files <b>after</b> upgrading the OS and updating the
packages, but <b>before</b> building any ports:

<blockquote><pre>
rm /usr/bin/sqlite3
rm /usr/include/sqlite3*.h
rm /usr/lib/pkgconfig/sqlite3.pc
rm /usr/libdata/perl5/site_perl/*-openbsd/sqlite3*.ph
rm /usr/share/man/man1/sqlite3.1
rm /usr/lib/libsqlite3*
</pre></blockquote>


<h3 id="r20160927">2016/09/27 - more secure package and firmware signatures</h3>

Packages and firmware are now signed with a more secure scheme.
If <a href="http://man.openbsd.org/pkg_add.1">pkg_add(1)</a> and
<a href="http://man.openbsd.org/fw_update.1">fw_update(1)</a> complain
about unsigned packages/firmware, you must upgrade to a more recent snapshot
or rebuild the system&mdash;involves pieces in libc,
<a href="http://man.openbsd.org/signify.1">signify(1)</a> and
<a href="http://man.openbsd.org/pkg_add.1">pkg_add(1)</a>,
so following <a href="http://man.openbsd.org/release.8">release(8)</a>
is the best way.


<h3 id="r20161005">2016/10/06 - new build infrastructure,
<tt>noperm</tt> release process</h3>

The infrastructure to build the base system from source and to make a release
has changed.
The <tt>SUDO</tt> variable was removed from the base system makefiles and the
<tt>make build</tt> command now <b>must</b> be issued by root.
Whenever possible, the makefiles will de-escalate privileges to
<tt>BUILDUSER</tt> (as specified in
<a href="http://man.openbsd.org/mk.conf.5">mk.conf(5)</a>; defaults to
<tt>USER</tt>).
Make sure that <tt>/usr/obj</tt> or <tt>/usr/xobj</tt> is empty and owned by
<tt>BUILDUSER</tt> before starting a build. 

<p>
Start the build as follows:

<blockquote><pre>
# <b>cd /usr/src/share/mk && make install</b>	# only needed the first time
# <b>cd /usr/src && make obj && make build</b>
</pre></blockquote>

To make a <a href="http://man.openbsd.org/release.8">release(8)</a>, further
setup is required:

<ul>
  <li>Mount a <b>noperm filesystem</b> on <tt>/dest</tt>, of size at least
    <tt>1G</tt>, of type <tt>ffs</tt>, and with the <tt>noperm</tt>
    <a href="http://man.openbsd.org/mount.8#noperm">mount(8)</a> option set.
  <li>The root directory of the filesystem must be owned by <tt>BUILDUSER</tt>, with
    permissions <tt>700</tt>.
  <li>Create directories <tt>/dest/base</tt> and <tt>/dest/xbase</tt>.
  <li>The <tt>RELEASEDIR</tt> must be owned by <tt>BUILDUSER</tt>.
</ul>

To build a base release, set <tt>DESTDIR=/dest/base</tt> and to build a xenocara
release, set <tt>DESTDIR=/dest/xbase</tt>.


<h3 id="r20161014">2016/10/14 - [ports] Ansible copy module change</h3>

The <tt>copy</tt> module of Ansible added a newline to the value of
the <tt>content</tt> attribute in case it was not present. This
behaviour is non-standard and was not documented. It has been reverted
in the <em>ansible-2.1.2.0p0</em> package.
<br>
If you previously relied on this behaviour you will need to explicitly
add <tt>\n</tt> to your playbooks.


<h3 id="r20161014a">2016/10/14 - kernel builds now need <tt>make obj</tt></h3>

Kernels now build in an <tt>obj</tt> directory just like the rest of the source
tree.
This helps ensuring that the <tt>src</tt> tree can be read-only during builds.
Some cleanup needs to be done before updating your source trees via cvs:

<blockquote><pre>
$ <b>cd /sys</b>
$ <b>rm -r arch/*/compile/[GR]*</b>
$ <b>rm arch/*/compile/.cvsignore</b>
$ <b>cvs -q up -Pd</b>
</pre></blockquote>

The new way of configuring, building and installing a kernel is:

<blockquote><pre>
$ <b>cd /sys/arch/$(machine)/compile/GENERIC.MP</b>
$ <b>doas make obj</b>
$ <b>make config</b>
$ <b>make</b>
$ <b>doas make install</b>
</pre></blockquote>


<h3 id="r20161024">2016/10/24 - uxterm and koi8xterm removed</h3>

The <tt>uxterm</tt> and <tt>koi8rxterm</tt> shell scripts have been removed, as
<a href="http://man.openbsd.org/xterm.1">xterm(1)</a> on OpenBSD is already set
up to support UTF-8.
Some cleanup needs to be done after upgrading to -current:

<blockquote><pre>
cd /usr/X11R6
rm bin/koi8rxterm bin/uxterm
rm share/X11/app-defaults/KOI8RXTerm share/X11/app-defaults/UXTerm
rm man/man1/koi8rxterm.1 man/man1/uxterm.1
</pre></blockquote>

If you edited any configuration files to call <tt>uxterm</tt>,
do not forget to change these to call <tt>xterm</tt> directly.
If you defined X resources for UXTerm, consider moving them to XTerm.


<h3 id="r20161104">2016/11/04 - [ports] sympa update</h3>

The <tt>mail/sympa</tt> mailing list server port was updated to a new version.
The <a href="https://www.sympa.org/faq/upgrade-to-v6.2">upgrade notes</a>
explain how to migrate your setup.


<h3 id="r20161104a">2016/11/04 - [ports] nginx dynamic modules</h3>

The <tt>www/nginx</tt> port has been converted to use subpackages with dynamic
modules, instead of using FLAVORs.
If you previously were using a FLAVORed version of nginx, or the mail or stream
modules, you need to install the apropriate subpackage(s).
You also need to modify your nginx configuration to use <tt>load_module</tt> for
each dynamic module you want to load.


<h3 id="r20161109a">2016/11/09 - perl headers removed</h3>

The perl headers are no longer generated and should be removed:

<blockquote><pre>
rm -rf /usr/libdata/perl5/site_perl
</pre></blockquote>


<h3 id="r20161114">2016/11/14 - default lo(4) interface per rdomain</h3>

A loopback interface is now created by default for every
<a href="http://man.openbsd.org/rdomain.4">rdomain(4)</a>.
Much like <tt>lo0</tt> for rdomain 0, it can be used to see and filter local
traffic via <a href="http://man.openbsd.org/bpf.4">bpf(4)</a> and
<a href="http://man.openbsd.org/pf.4">pf(4)</a>.

<p>
If you previously were using an <tt>loX</tt> in an rdomain other than
<tt>X</tt>, it won't be possible to create rdomain <tt>X</tt> anymore.
You need to either use a different
<a href="http://man.openbsd.org/lo.4">lo(4)</a> unit or
<a href="http://man.openbsd.org/rdomain.4">rdomain(4)</a> number.


<h3 id="r20161119">2016/11/19 - new dedicated build user</h3>

A dedicated user now does the heavy lifting of <tt>make build</tt>.

<p>
It is recommended that you start from a very recent <i>-current</i>
(dated after Nov 15), so you already have
<a href="https://cvsweb.openbsd.org/cgi-bin/cvsweb/src/etc/master.passwd.diff?r1=1.93&amp;r2=1.94"
>a user <tt>build</tt></a> and
<a href="https://cvsweb.openbsd.org/cgi-bin/cvsweb/src/etc/group.diff?r1=1.84&amp;r2=1.85"
>a group <tt>wobj</tt></a>,
otherwise add them manually.

<p>
Clean out the object directories and set correct owners and permissions:

<blockquote><pre>
# <b>rm -rf /usr/obj/* /usr/xobj/*</b>
# <b>chown build:wobj /usr/{,x}obj</b>
# <b>chmod 770 /usr/{,x}obj</b>
</pre></blockquote>

Developers <b>must</b> add their users to the group <tt>wobj</tt>, so that they
can still write to <tt>/usr/{,x}obj</tt>.
Be sure to remove any custom <tt>BUILDUSER</tt> from
<a href="http://man.openbsd.org/mk.conf">mk.conf(5)</a>.

<p>
Install the new systemwide makefiles:

<blockquote><pre>
# <b>cd /usr/src/share/mk && make install</b>
</pre></blockquote>

You can now proceed by making and installing a kernel, rebooting and building
the system from source as described in the 
<a href="http://man.openbsd.org/release">release(8)</a> man page.

<p>
Before making a release, ensure that <tt>build</tt> can write to
<tt>DESTDIR</tt> and <tt>RELEASEDIR</tt>: chown the root of the <tt>noperm</tt>
filesystem containing <tt>DESTDIR</tt>

<blockquote><pre>
# <b>chown build /dest</b>
</pre></blockquote>

and set ownership and permissions for <tt>RELEASEDIR</tt>

<blockquote><pre>
# <b>chown build $RELEASEDIR</b> 
# <b>chmod u=rwx $RELEASEDIR</b>
</pre></blockquote>

To avoid permission issues, it is recommended to start the first release with
an empty <tt>RELEASEDIR</tt>.

<p>
Making xenocara needs no extra steps beyond the ones described in
the <a href="http://man.openbsd.org/release">release(8)</a> man page.


<h3 id="r20161201">2016/12/01 - cwm(1) bind function changes</h3>

The configuration syntax for binding functions to keys and mouse buttons has
changed, replacing the <tt>bind</tt> and <tt>mousebind</tt> keywords with
<tt>bind-key</tt>, <tt>bind-mouse</tt>, <tt>unbind-key</tt> and
<tt>unbind-mouse</tt>.
See the <a href="http://man.openbsd.org/cwmrc.5">cwmrc(5)</a> man page for new
bind function names.


<h3 id="r20161218">2016/12/18 - [ports] news/leafnode group change</h3>

The <tt>_news</tt> account used to run leafnode switched from the <tt>news</tt>
group to the <tt>_news</tt> group.
Ensure that you have at least <tt>leafnode-1.11.11p0</tt> installed and that
no <tt>leafnode</tt> process is running, then run

<blockquote><pre>
usermod -g _news _news
chgrp -R _news /var/spool/news/
</pre></blockquote>


<h3 id="r20161218a">2016/12/18 - [ports] net/uucp user change</h3>

Starting with <tt>uucp-1.07p4</tt>, the uucp suite now runs under the
<tt>_uucp</tt> account.
Ensure that you have no uucp process running, then adjust the ownership of some
files:

<blockquote><pre>
find /etc/ /var/spool/ -user uucp -exec chown _uucp {} ';'
</pre></blockquote>


<h3 id="r20161227a">2016/12/27 - removal of <tt>uucp</tt> and <tt>news</tt></h3>

The <tt>uucp</tt> user and the <tt>news</tt> group have been removed from base.
Issue

<blockquote><pre>
userdel uucp
groupdel news
rm -rf /var/spool/uucp*		# unless you use the net/uucp port
</pre></blockquote>


<h3 id="r20170103">2017/01/03 - https support added to the installer</h3>

On amd64, armv7, i386, hppa and macppc, the bsd.rd installer defaults to https.
Your <a href="http://man.openbsd.org/autoinstall">autoinstall(8)</a> response
file may need the additional line

<blockquote><pre>
Unable to connect using https. Use http instead = yes	# "no" is default
</pre></blockquote>

between the <tt>HTTP Server</tt> and <tt>Set name(s)</tt> responses.


<h3 id="r20170104">2017/01/04 - RFC5114 MODP groups removed from iked(8)</h3>

Support for the additional modular exponential groups specified in RFC5114 was
removed from <a href="http://man.openbsd.org/iked.8">iked(8)</a>.
As a result, iked(8) will no longer accept proposals with the MODP2048-256 group
(grp24) and thus will not be able to act as a responder for clients running
OpenBSD 6.0 or earlier.
Therefore the configuration <b>on older installations</b> needs to be changed:
select a specific MODP group by adding a line such as
<tt>ikesa group modp2048 childsa group modp2048</tt> to be able to talk to
endpoints running newer versions.

<p>
For example, if the old configuration in
<a href="http://man.openbsd.org/iked.conf.5">iked.conf(5)</a> looked like this:

<blockquote><pre>
ikev2 active esp from 10.3.0.0/24 to 10.1.0.0/24 \
        local 192.168.1.1 peer 192.168.2.1 \
        childsa enc aes-128-gcm \
        psk "secret"
</pre></blockquote>

it needs to be amended to look like this:

<blockquote><pre>
ikev2 active esp from 10.3.0.0/24 to 10.1.0.0/24 \
        local 192.168.1.1 peer 192.168.2.1 \
	ikesa group modp2048 \
        childsa enc aes-128-gcm group modp2048 \
        psk "secret"
</pre></blockquote>


<h3 id="r20170121">2017/01/21 - acme-client(1) uses config file</h3>

The <a href="http://man.openbsd.org/acme-client.1">acme-client(1)</a> program
now uses
<a href="http://man.openbsd.org/acme-client.conf.5">acme-client.conf(5)</a>.

<p>
Copy your account keys to the new location:

<blockquote><pre>
cp -p /etc/acme/privkey.pem /etc/acme/letsencrypt-privkey.pem
cp -p /etc/acme/privkey.pem /etc/acme/letsencrypt-staging-privkey.pem
</pre></blockquote>

It is recommended that you leave all current content of the new
<tt>/etc/acme-client.conf</tt> untouched and append your <tt>domain { }</tt>
sections.
This will make future upgrades easier.

<p>
For example, for the domain <tt>www.openbsd.org</tt>, append this to the file:

<blockquote><pre>
domain www.openbsd.org {
        alternative names { openbsd.org ftp.openbsd.org }
        domain key "/etc/ssl/acme/private/privkey.pem"
        domain certificate "/etc/ssl/acme/cert.pem"
        domain chain certificate "/etc/ssl/acme/chain.pem"
        domain full chain certificate "/etc/ssl/acme/fullchain.pem"
        #challengedir "/var/www/acme"
        sign with letsencrypt
}
</pre></blockquote>

What was previously achieved with the command
<tt>acme-client www.openbsd.org openbsd.org ftp.openbsd.org</tt>
can now be simplified to:

<blockquote><pre>
acme-client www.openbsd.org
</pre></blockquote>


<h3 id="r20170205">2017/02/05 - upgrade to perl 5.24.1</h3>

The perl distribution in the base system was upgraded to version 5.24.1.
A number of files and directories should be removed.
On slower architectures, check with <tt>perl -v</tt> that you do have the new
version before removing these files.

<blockquote><pre>
# <b>rm -rf \
  /usr/bin/perl5* \
  /usr/lib/libperl.so.17.* \
  /usr/libdata/perl5/*-openbsd/5.*/ \
  /usr/bin/a2p \
  /usr/bin/config_data \
  /usr/bin/find2perl \
  /usr/bin/psed \
  /usr/bin/s2p \
  /usr/libdata/perl5/CGI* \
  /usr/libdata/perl5/Locale/Codes/Constants.pod \
  /usr/libdata/perl5/Module/Build* \
  /usr/libdata/perl5/Package \
  /usr/libdata/perl5/inc \
  /usr/libdata/perl5/pod/a2p.pod \
  /usr/libdata/perl5/unicore/lib/Gc/Lt.pl \
  /usr/libdata/perl5/unicore/lib/Hyphen/Y.pl \
  /usr/libdata/perl5/unicore/lib/LOE \
  /usr/libdata/perl5/unicore/lib/NChar \
  /usr/libdata/perl5/unicore/lib/PatWS \
  /usr/libdata/perl5/unicore/lib/Perl/_XExtend.pl \
  /usr/libdata/perl5/unicore/lib/Perl/_XRegula.pl \
  /usr/libdata/perl5/unicore/lib/Perl/_XSpecia.pl \
  /usr/libdata/perl5/unicore/lib/Space \
  /usr/libdata/perl5/version/vpp.pm</b>
</pre></blockquote>

To remove any stale manpages, issue <b><tt>rm -rf /usr/share/man</tt></b> before
upgrading.


<h3 id="r20170210">2017/02/10 - [ports] mail/courier-authlib configuration change</h3>

A configuration change is needed to be able to use latest version of
<tt>mail/courier-authlib</tt>.
If MySQL or Postgresql is used as authentication source, the following lines
should be appended to the appropriate config files
(<tt>/etc/courier/authmysqlrc</tt> or <tt>/etc/courier/authpgsqlrc</tt>).

<blockquote><pre>
##NAME: MARKER:0
#
# Do not remove this section from this configuration file. This section
# must be present at the end of this file.
</pre></blockquote>

In addition, if MySQL is used, the option <tt>MYSQL_OPT 0</tt> should also be
set.


<h3 id="r20170226">2017/02/26 - switch from xdm(1) to xenodm(1)</h3>

The X Display Manager has been switched to
<a href="http://man.openbsd.org/xenodm.1">xenodm(1)</a>.
If you enabled xdm in <tt>/etc/rc.conf.local</tt>, you need to update your
configuration:

<blockquote><pre>
# <b>rcctl disable xdm</b>
# <b>rcctl enable xenodm</b>
</pre></blockquote>

If any local configuration change was made to <tt>/etc/X11/xdm/</tt>, it should
be migrated to the corresponding <tt>/etc/X11/xenodm</tt> file.
After that the xdm files can be removed:

<blockquote><pre>
# <b>rm -rf /etc/X11/xdm</b>
# <b>rm /usr/X11R6/bin/xdm /usr/X11R6/man/man1/xdm.1 /etc/rc.d/xdm</b>
</pre></blockquote>

Your <a href="http://man.openbsd.org/autoinstall">autoinstall(8)</a> response
file may need to be adjusted since the xdm question was changed to:

<blockquote><pre>
Do you want the X Window System to be started by xenodm(1)
</pre></blockquote>


<h3 id="r20170227">2017/02/27 - pkg.conf(5) no longer supported</h3>

The <tt>pkg_*</tt> tools now use the
<a href="http://man.openbsd.org/installurl.5">installurl(5)</a> file to
find the main package repository.
If you install or upgrade from a mirror, this file is created automatically.
Otherwise, please create the <tt>/etc/installurl</tt> file manually with
your preferred <a href="../ftp.html">mirror</a>:

<blockquote><pre>
# <b>echo 'https://your.mirror/pub/OpenBSD' > /etc/installurl</b>
</pre></blockquote>

Since the <a href="http://man.openbsd.org/pkg.conf.5">pkg.conf(5)</a> file
will no longer be used by tools, you may remove it:

<blockquote><pre>
# <b>rm /etc{,/examples}/pkg.conf /usr/share/man/man5/pkg.conf.5</b>
</pre></blockquote>

Use the <tt>PKG_PATH</tt> environment variable in case you need to specify more
than one repository.


<h3 id="r20170228">2017/02/28 - [ports] x11/awesome updated to v4.0</h3>

Awesome 4.0 comes with a major API break.
Existing configuration and extensions need to be ported.
Please read the official
<a href="https://awesomewm.org/apidoc/documentation/17-porting-tips.md.html#v4">
tips for upgrading your configuration</a>.


<h3 id="r20170302">2017/03/02 - sysctl machdep.lidsuspend renamed to machdep.lidaction</h3>

The <tt>machdep.lidsuspend</tt> sysctl variable has been renamed to
<tt>machdep.lidaction</tt> to reflect newly added functionality in the name.
For now the old name will stay around, but it might be removed in a future
release.
It is advised to update
<a href="http://man.openbsd.org/sysctl.conf.5">sysctl.conf(5)</a>
to use the new name.


<!-- XXXrelease this must not go in upgrade61.html -->
<h3 id="r20170321">2017/03/21 - [ports] net/dnsdist UID change</h3>

The net/dnsdist port now uses uid and gid 788.
If you installed dnsdist, run the following commands.

<blockquote><pre>
# <b>groupmod -g 788 _dnsdist</b>
# <b>usermod -g 788 -u 788 _dnsdist</b>
</pre></blockquote>


<h3 id="r20170325">2017/03/25 - amd64 binutils update</h3>

If you have binutils older than from March 16th, a new version must be installed
before compiling an amd64 kernel, due to assembler support change:

<blockquote><pre>
$ <b>cd /usr/src/gnu/usr.bin/binutils-2.17</b>
$ <b>make -f Makefile.bsd-wrapper obj</b>
$ <b>make -f Makefile.bsd-wrapper depend</b>
$ <b>make -f Makefile.bsd-wrapper</b>
$ <b>doas make -f Makefile.bsd-wrapper install</b>
</pre></blockquote>


<h3 id="r20170325a">2017/03/25 - vmd(8) changes</h3>

VMs now boot using the LGPLv3 SeaBIOS from <tt>/etc/firmware/vmm-bios</tt>.
Booting OpenBSD kernels or non-default BIOS images is still supported:
instead of <tt>-k/kernel</tt>, you now need to use the new <tt>-b</tt>
command line option of <a href="http://man.openbsd.org/vmctl">vmctl(8)</a>.
Similarly, in <a href="http://man.openbsd.org/vm.conf">vm.conf(5)</a>,
the <tt>kernel</tt> option was replaced with <tt>boot</tt>.
d55 1
a55 1
<small>$OpenBSD: current.html,v 1.808 2017/03/27 20:53:59 tb Exp $</small>
@


1.809
log
@roll for the 6.2 release cycle
@
text
@d33 1
a33 1
<a href="upgrade60.html">OpenBSD upgrade procedure</a>
d45 5
a49 1
Upgrading by compiling your own source code is not supported.
d55 615
a669 1
<h3 id="r20170406">2017/04/06 - no entries yet</h3>
@


1.808
log
@dedup an id attribute
@
text
@d45 1
a45 5
<!-- XXXrelease: put the following sentence back and remove its replacement -->
<!--Upgrading by compiling your own source code is not supported.-->
<p>
In particular, upgrading by compiling from source from OpenBSD 6.0
<i>-release</i> to <i>-current</i> is <b>not supported</b>.
d51 1
a51 615
<h3 id="r20160801">2016/08/01 - new mandoc.db(5) format</h3>

To update all <a href="http://man.openbsd.org/mandoc.db.5">mandoc.db(5)</a>
files to the new format, run:

<blockquote><pre>
makewhatis
</pre></blockquote>


<h3 id="r20160808">2016/08/08 - mandatory W^X enforcement</h3>

W^X violations are now only permitted for binaries marked <b>wxneeded</b>
executed from filesystems marked <b>wxallowed</b>.
<ul>
<li>The base system is clean.
<li>Starting in 6.0, the installer sets the <tt>/usr/local</tt>
    filesystem to <b>wxallowed</b> -- if your filesystem is not
    set so, make this change.
<li>The ports tree contains a number of binaries which are not
    yet marked <b>wxneeded</b> but work is underway to mark them all.
</ul>


<h3 id="r20160812">2016/08/12 - [ports] py-elasticsearch-curator update</h3>

With the update of Elasticsearch Curator to the 4.x version, the CLI interface
changed.
Instead of parameters, yaml configuration files are used to steer actions of
curator.
Configuration file documentation can be found on the
<a href="https://www.elastic.co/guide/en/elasticsearch/client/curator/4.0/index.html">
curator reference pages</a>.


<h3 id="r20160814">2016/08/14 - qabs(3) and qdiv(3) manpages removed</h3>

Their content was merged into the labs(3) and lldiv(3) manpages,
so the separate files should be removed and and the database updated.

<blockquote><pre>
rm -f /usr/share/man/man3/qabs.3 /usr/share/man/man3/qdiv.3
makewhatis
</pre></blockquote>


<h3 id="r20160901a">2016/09/01 - [ports] letskencrypt renamed/moved to base</h3>

<tt>letskencrypt</tt>, previously in <tt>ports/security</tt>, has been imported
to base under its new name <tt>acme-client</tt>.
Adjust scripts/cronjobs as necessary.


<h3 id="r20160909">2016/09/09 - /dev/sound removed</h3>

Remove unused device nodes:

<blockquote><pre>
rm -f /dev/sound*
</pre></blockquote>


<h3 id="r20160913">2016/09/13 - [ports] Railo replaced with Lucee</h3>

Railo has been replaced with Lucee (a fork).
Make notes on your existing Railo configuration before updating.
You will need to adjust Tomcat configuration, and configure Lucee according
to your previous Railo configuration.


<h3 id="r20160919">2016/09/19 - softraid crypto switched to bcrypt PBKDF</h3>

New volumes will be created with bcrypt PBKDF, however existing volumes
will continue to use PKCS5 PBKDF2 until a passphrase change is made.

<p>
If you're booting from softraid crypto, ensure that your boot loader has been
upgraded to a version that supports bcrypt prior to changing your passphrase.
That is to say, it should be from a snapshot dated after 2016/09/19.
The <a href="http://man.openbsd.org/boot.8">boot(8)</a> version should be at
least 3.33 on amd64 and 3.31 on i386.
Also be aware that once the passphrase has been changed, an older version of
<a href="http://man.openbsd.org/bioctl.8">bioctl(8)</a> (one that does not
support bcrypt PBKDF) will not be able to "unlock" the volume.


<h3 id="r20160923">2016/09/23 - sqlite3 moved back to ports</h3>

SQLite has moved from base back to ports.
Remove the following files <b>after</b> upgrading the OS and updating the
packages, but <b>before</b> building any ports:

<blockquote><pre>
rm /usr/bin/sqlite3
rm /usr/include/sqlite3*.h
rm /usr/lib/pkgconfig/sqlite3.pc
rm /usr/libdata/perl5/site_perl/*-openbsd/sqlite3*.ph
rm /usr/share/man/man1/sqlite3.1
rm /usr/lib/libsqlite3*
</pre></blockquote>


<h3 id="r20160927">2016/09/27 - more secure package and firmware signatures</h3>

Packages and firmware are now signed with a more secure scheme.
If <a href="http://man.openbsd.org/pkg_add.1">pkg_add(1)</a> and
<a href="http://man.openbsd.org/fw_update.1">fw_update(1)</a> complain
about unsigned packages/firmware, you must upgrade to a more recent snapshot
or rebuild the system&mdash;involves pieces in libc,
<a href="http://man.openbsd.org/signify.1">signify(1)</a> and
<a href="http://man.openbsd.org/pkg_add.1">pkg_add(1)</a>,
so following <a href="http://man.openbsd.org/release.8">release(8)</a>
is the best way.


<h3 id="r20161005">2016/10/06 - new build infrastructure,
<tt>noperm</tt> release process</h3>

The infrastructure to build the base system from source and to make a release
has changed.
The <tt>SUDO</tt> variable was removed from the base system makefiles and the
<tt>make build</tt> command now <b>must</b> be issued by root.
Whenever possible, the makefiles will de-escalate privileges to
<tt>BUILDUSER</tt> (as specified in
<a href="http://man.openbsd.org/mk.conf.5">mk.conf(5)</a>; defaults to
<tt>USER</tt>).
Make sure that <tt>/usr/obj</tt> or <tt>/usr/xobj</tt> is empty and owned by
<tt>BUILDUSER</tt> before starting a build. 

<p>
Start the build as follows:

<blockquote><pre>
# <b>cd /usr/src/share/mk && make install</b>	# only needed the first time
# <b>cd /usr/src && make obj && make build</b>
</pre></blockquote>

To make a <a href="http://man.openbsd.org/release.8">release(8)</a>, further
setup is required:

<ul>
  <li>Mount a <b>noperm filesystem</b> on <tt>/dest</tt>, of size at least
    <tt>1G</tt>, of type <tt>ffs</tt>, and with the <tt>noperm</tt>
    <a href="http://man.openbsd.org/mount.8#noperm">mount(8)</a> option set.
  <li>The root directory of the filesystem must be owned by <tt>BUILDUSER</tt>, with
    permissions <tt>700</tt>.
  <li>Create directories <tt>/dest/base</tt> and <tt>/dest/xbase</tt>.
  <li>The <tt>RELEASEDIR</tt> must be owned by <tt>BUILDUSER</tt>.
</ul>

To build a base release, set <tt>DESTDIR=/dest/base</tt> and to build a xenocara
release, set <tt>DESTDIR=/dest/xbase</tt>.


<h3 id="r20161014">2016/10/14 - [ports] Ansible copy module change</h3>

The <tt>copy</tt> module of Ansible added a newline to the value of
the <tt>content</tt> attribute in case it was not present. This
behaviour is non-standard and was not documented. It has been reverted
in the <em>ansible-2.1.2.0p0</em> package.
<br>
If you previously relied on this behaviour you will need to explicitly
add <tt>\n</tt> to your playbooks.


<h3 id="r20161014a">2016/10/14 - kernel builds now need <tt>make obj</tt></h3>

Kernels now build in an <tt>obj</tt> directory just like the rest of the source
tree.
This helps ensuring that the <tt>src</tt> tree can be read-only during builds.
Some cleanup needs to be done before updating your source trees via cvs:

<blockquote><pre>
$ <b>cd /sys</b>
$ <b>rm -r arch/*/compile/[GR]*</b>
$ <b>rm arch/*/compile/.cvsignore</b>
$ <b>cvs -q up -Pd</b>
</pre></blockquote>

The new way of configuring, building and installing a kernel is:

<blockquote><pre>
$ <b>cd /sys/arch/$(machine)/compile/GENERIC.MP</b>
$ <b>doas make obj</b>
$ <b>make config</b>
$ <b>make</b>
$ <b>doas make install</b>
</pre></blockquote>


<h3 id="r20161024">2016/10/24 - uxterm and koi8xterm removed</h3>

The <tt>uxterm</tt> and <tt>koi8rxterm</tt> shell scripts have been removed, as
<a href="http://man.openbsd.org/xterm.1">xterm(1)</a> on OpenBSD is already set
up to support UTF-8.
Some cleanup needs to be done after upgrading to -current:

<blockquote><pre>
cd /usr/X11R6
rm bin/koi8rxterm bin/uxterm
rm share/X11/app-defaults/KOI8RXTerm share/X11/app-defaults/UXTerm
rm man/man1/koi8rxterm.1 man/man1/uxterm.1
</pre></blockquote>

If you edited any configuration files to call <tt>uxterm</tt>,
do not forget to change these to call <tt>xterm</tt> directly.
If you defined X resources for UXTerm, consider moving them to XTerm.


<h3 id="r20161104">2016/11/04 - [ports] sympa update</h3>

The <tt>mail/sympa</tt> mailing list server port was updated to a new version.
The <a href="https://www.sympa.org/faq/upgrade-to-v6.2">upgrade notes</a>
explain how to migrate your setup.


<h3 id="r20161104a">2016/11/04 - [ports] nginx dynamic modules</h3>

The <tt>www/nginx</tt> port has been converted to use subpackages with dynamic
modules, instead of using FLAVORs.
If you previously were using a FLAVORed version of nginx, or the mail or stream
modules, you need to install the apropriate subpackage(s).
You also need to modify your nginx configuration to use <tt>load_module</tt> for
each dynamic module you want to load.


<h3 id="r20161109a">2016/11/09 - perl headers removed</h3>

The perl headers are no longer generated and should be removed:

<blockquote><pre>
rm -rf /usr/libdata/perl5/site_perl
</pre></blockquote>


<h3 id="r20161114">2016/11/14 - default lo(4) interface per rdomain</h3>

A loopback interface is now created by default for every
<a href="http://man.openbsd.org/rdomain.4">rdomain(4)</a>.
Much like <tt>lo0</tt> for rdomain 0, it can be used to see and filter local
traffic via <a href="http://man.openbsd.org/bpf.4">bpf(4)</a> and
<a href="http://man.openbsd.org/pf.4">pf(4)</a>.

<p>
If you previously were using an <tt>loX</tt> in an rdomain other than
<tt>X</tt>, it won't be possible to create rdomain <tt>X</tt> anymore.
You need to either use a different
<a href="http://man.openbsd.org/lo.4">lo(4)</a> unit or
<a href="http://man.openbsd.org/rdomain.4">rdomain(4)</a> number.


<h3 id="r20161119">2016/11/19 - new dedicated build user</h3>

A dedicated user now does the heavy lifting of <tt>make build</tt>.

<p>
It is recommended that you start from a very recent <i>-current</i>
(dated after Nov 15), so you already have
<a href="https://cvsweb.openbsd.org/cgi-bin/cvsweb/src/etc/master.passwd.diff?r1=1.93&amp;r2=1.94"
>a user <tt>build</tt></a> and
<a href="https://cvsweb.openbsd.org/cgi-bin/cvsweb/src/etc/group.diff?r1=1.84&amp;r2=1.85"
>a group <tt>wobj</tt></a>,
otherwise add them manually.

<p>
Clean out the object directories and set correct owners and permissions:

<blockquote><pre>
# <b>rm -rf /usr/obj/* /usr/xobj/*</b>
# <b>chown build:wobj /usr/{,x}obj</b>
# <b>chmod 770 /usr/{,x}obj</b>
</pre></blockquote>

Developers <b>must</b> add their users to the group <tt>wobj</tt>, so that they
can still write to <tt>/usr/{,x}obj</tt>.
Be sure to remove any custom <tt>BUILDUSER</tt> from
<a href="http://man.openbsd.org/mk.conf">mk.conf(5)</a>.

<p>
Install the new systemwide makefiles:

<blockquote><pre>
# <b>cd /usr/src/share/mk && make install</b>
</pre></blockquote>

You can now proceed by making and installing a kernel, rebooting and building
the system from source as described in the 
<a href="http://man.openbsd.org/release">release(8)</a> man page.

<p>
Before making a release, ensure that <tt>build</tt> can write to
<tt>DESTDIR</tt> and <tt>RELEASEDIR</tt>: chown the root of the <tt>noperm</tt>
filesystem containing <tt>DESTDIR</tt>

<blockquote><pre>
# <b>chown build /dest</b>
</pre></blockquote>

and set ownership and permissions for <tt>RELEASEDIR</tt>

<blockquote><pre>
# <b>chown build $RELEASEDIR</b> 
# <b>chmod u=rwx $RELEASEDIR</b>
</pre></blockquote>

To avoid permission issues, it is recommended to start the first release with
an empty <tt>RELEASEDIR</tt>.

<p>
Making xenocara needs no extra steps beyond the ones described in
the <a href="http://man.openbsd.org/release">release(8)</a> man page.


<h3 id="r20161201">2016/12/01 - cwm(1) bind function changes</h3>

The configuration syntax for binding functions to keys and mouse buttons has
changed, replacing the <tt>bind</tt> and <tt>mousebind</tt> keywords with
<tt>bind-key</tt>, <tt>bind-mouse</tt>, <tt>unbind-key</tt> and
<tt>unbind-mouse</tt>.
See the <a href="http://man.openbsd.org/cwmrc.5">cwmrc(5)</a> man page for new
bind function names.


<h3 id="r20161218">2016/12/18 - [ports] news/leafnode group change</h3>

The <tt>_news</tt> account used to run leafnode switched from the <tt>news</tt>
group to the <tt>_news</tt> group.
Ensure that you have at least <tt>leafnode-1.11.11p0</tt> installed and that
no <tt>leafnode</tt> process is running, then run

<blockquote><pre>
usermod -g _news _news
chgrp -R _news /var/spool/news/
</pre></blockquote>


<h3 id="r20161218a">2016/12/18 - [ports] net/uucp user change</h3>

Starting with <tt>uucp-1.07p4</tt>, the uucp suite now runs under the
<tt>_uucp</tt> account.
Ensure that you have no uucp process running, then adjust the ownership of some
files:

<blockquote><pre>
find /etc/ /var/spool/ -user uucp -exec chown _uucp {} ';'
</pre></blockquote>


<h3 id="r20161227a">2016/12/27 - removal of <tt>uucp</tt> and <tt>news</tt></h3>

The <tt>uucp</tt> user and the <tt>news</tt> group have been removed from base.
Issue

<blockquote><pre>
userdel uucp
groupdel news
rm -rf /var/spool/uucp*		# unless you use the net/uucp port
</pre></blockquote>


<h3 id="r20170103">2017/01/03 - https support added to the installer</h3>

On amd64, armv7, i386, hppa and macppc, the bsd.rd installer defaults to https.
Your <a href="http://man.openbsd.org/autoinstall">autoinstall(8)</a> response
file may need the additional line

<blockquote><pre>
Unable to connect using https. Use http instead = yes	# "no" is default
</pre></blockquote>

between the <tt>HTTP Server</tt> and <tt>Set name(s)</tt> responses.


<h3 id="r20170104">2017/01/04 - RFC5114 MODP groups removed from iked(8)</h3>

Support for the additional modular exponential groups specified in RFC5114 was
removed from <a href="http://man.openbsd.org/iked.8">iked(8)</a>.
As a result, iked(8) will no longer accept proposals with the MODP2048-256 group
(grp24) and thus will not be able to act as a responder for clients running
OpenBSD 6.0 or earlier.
Therefore the configuration <b>on older installations</b> needs to be changed:
select a specific MODP group by adding a line such as
<tt>ikesa group modp2048 childsa group modp2048</tt> to be able to talk to
endpoints running newer versions.

<p>
For example, if the old configuration in
<a href="http://man.openbsd.org/iked.conf.5">iked.conf(5)</a> looked like this:

<blockquote><pre>
ikev2 active esp from 10.3.0.0/24 to 10.1.0.0/24 \
        local 192.168.1.1 peer 192.168.2.1 \
        childsa enc aes-128-gcm \
        psk "secret"
</pre></blockquote>

it needs to be amended to look like this:

<blockquote><pre>
ikev2 active esp from 10.3.0.0/24 to 10.1.0.0/24 \
        local 192.168.1.1 peer 192.168.2.1 \
	ikesa group modp2048 \
        childsa enc aes-128-gcm group modp2048 \
        psk "secret"
</pre></blockquote>


<h3 id="r20170121">2017/01/21 - acme-client(1) uses config file</h3>

The <a href="http://man.openbsd.org/acme-client.1">acme-client(1)</a> program
now uses
<a href="http://man.openbsd.org/acme-client.conf.5">acme-client.conf(5)</a>.

<p>
Copy your account keys to the new location:

<blockquote><pre>
cp -p /etc/acme/privkey.pem /etc/acme/letsencrypt-privkey.pem
cp -p /etc/acme/privkey.pem /etc/acme/letsencrypt-staging-privkey.pem
</pre></blockquote>

It is recommended that you leave all current content of the new
<tt>/etc/acme-client.conf</tt> untouched and append your <tt>domain { }</tt>
sections.
This will make future upgrades easier.

<p>
For example, for the domain <tt>www.openbsd.org</tt>, append this to the file:

<blockquote><pre>
domain www.openbsd.org {
        alternative names { openbsd.org ftp.openbsd.org }
        domain key "/etc/ssl/acme/private/privkey.pem"
        domain certificate "/etc/ssl/acme/cert.pem"
        domain chain certificate "/etc/ssl/acme/chain.pem"
        domain full chain certificate "/etc/ssl/acme/fullchain.pem"
        #challengedir "/var/www/acme"
        sign with letsencrypt
}
</pre></blockquote>

What was previously achieved with the command
<tt>acme-client www.openbsd.org openbsd.org ftp.openbsd.org</tt>
can now be simplified to:

<blockquote><pre>
acme-client www.openbsd.org
</pre></blockquote>


<h3 id="r20170205">2017/02/05 - upgrade to perl 5.24.1</h3>

The perl distribution in the base system was upgraded to version 5.24.1.
A number of files and directories should be removed.
On slower architectures, check with <tt>perl -v</tt> that you do have the new
version before removing these files.

<blockquote><pre>
# <b>rm -rf \
  /usr/bin/perl5* \
  /usr/lib/libperl.so.17.* \
  /usr/libdata/perl5/*-openbsd/5.*/ \
  /usr/bin/a2p \
  /usr/bin/config_data \
  /usr/bin/find2perl \
  /usr/bin/psed \
  /usr/bin/s2p \
  /usr/libdata/perl5/CGI* \
  /usr/libdata/perl5/Locale/Codes/Constants.pod \
  /usr/libdata/perl5/Module/Build* \
  /usr/libdata/perl5/Package \
  /usr/libdata/perl5/inc \
  /usr/libdata/perl5/pod/a2p.pod \
  /usr/libdata/perl5/unicore/lib/Gc/Lt.pl \
  /usr/libdata/perl5/unicore/lib/Hyphen/Y.pl \
  /usr/libdata/perl5/unicore/lib/LOE \
  /usr/libdata/perl5/unicore/lib/NChar \
  /usr/libdata/perl5/unicore/lib/PatWS \
  /usr/libdata/perl5/unicore/lib/Perl/_XExtend.pl \
  /usr/libdata/perl5/unicore/lib/Perl/_XRegula.pl \
  /usr/libdata/perl5/unicore/lib/Perl/_XSpecia.pl \
  /usr/libdata/perl5/unicore/lib/Space \
  /usr/libdata/perl5/version/vpp.pm</b>
</pre></blockquote>

To remove any stale manpages, issue <b><tt>rm -rf /usr/share/man</tt></b> before
upgrading.


<h3 id="r20170210">2017/02/10 - [ports] mail/courier-authlib configuration change</h3>

A configuration change is needed to be able to use latest version of
<tt>mail/courier-authlib</tt>.
If MySQL or Postgresql is used as authentication source, the following lines
should be appended to the appropriate config files
(<tt>/etc/courier/authmysqlrc</tt> or <tt>/etc/courier/authpgsqlrc</tt>).

<blockquote><pre>
##NAME: MARKER:0
#
# Do not remove this section from this configuration file. This section
# must be present at the end of this file.
</pre></blockquote>

In addition, if MySQL is used, the option <tt>MYSQL_OPT 0</tt> should also be
set.


<h3 id="r20170226">2017/02/26 - switch from xdm(1) to xenodm(1)</h3>

The X Display Manager has been switched to
<a href="http://man.openbsd.org/xenodm.1">xenodm(1)</a>.
If you enabled xdm in <tt>/etc/rc.conf.local</tt>, you need to update your
configuration:

<blockquote><pre>
# <b>rcctl disable xdm</b>
# <b>rcctl enable xenodm</b>
</pre></blockquote>

If any local configuration change was made to <tt>/etc/X11/xdm/</tt>, it should
be migrated to the corresponding <tt>/etc/X11/xenodm</tt> file.
After that the xdm files can be removed:

<blockquote><pre>
# <b>rm -rf /etc/X11/xdm</b>
# <b>rm /usr/X11R6/bin/xdm /usr/X11R6/man/man1/xdm.1 /etc/rc.d/xdm</b>
</pre></blockquote>

Your <a href="http://man.openbsd.org/autoinstall">autoinstall(8)</a> response
file may need to be adjusted since the xdm question was changed to:

<blockquote><pre>
Do you want the X Window System to be started by xenodm(1)
</pre></blockquote>


<h3 id="r20170227">2017/02/27 - pkg.conf(5) no longer supported</h3>

The <tt>pkg_*</tt> tools now use the
<a href="http://man.openbsd.org/installurl.5">installurl(5)</a> file to
find the main package repository.
If you install or upgrade from a mirror, this file is created automatically.
Otherwise, please create the <tt>/etc/installurl</tt> file manually with
your preferred <a href="../ftp.html">mirror</a>:

<blockquote><pre>
# <b>echo 'https://your.mirror/pub/OpenBSD' > /etc/installurl</b>
</pre></blockquote>

Since the <a href="http://man.openbsd.org/pkg.conf.5">pkg.conf(5)</a> file
will no longer be used by tools, you may remove it:

<blockquote><pre>
# <b>rm /etc{,/examples}/pkg.conf /usr/share/man/man5/pkg.conf.5</b>
</pre></blockquote>

Use the <tt>PKG_PATH</tt> environment variable in case you need to specify more
than one repository.


<h3 id="r20170228">2017/02/28 - [ports] x11/awesome updated to v4.0</h3>

Awesome 4.0 comes with a major API break.
Existing configuration and extensions need to be ported.
Please read the official
<a href="https://awesomewm.org/apidoc/documentation/17-porting-tips.md.html#v4">
tips for upgrading your configuration</a>.


<h3 id="r20170302">2017/03/02 - sysctl machdep.lidsuspend renamed to machdep.lidaction</h3>

The <tt>machdep.lidsuspend</tt> sysctl variable has been renamed to
<tt>machdep.lidaction</tt> to reflect newly added functionality in the name.
For now the old name will stay around, but it might be removed in a future
release.
It is advised to update
<a href="http://man.openbsd.org/sysctl.conf.5">sysctl.conf(5)</a>
to use the new name.


<!-- XXXrelease this must not go in upgrade61.html -->
<h3 id="r20170321">2017/03/21 - [ports] net/dnsdist UID change</h3>

The net/dnsdist port now uses uid and gid 788.
If you installed dnsdist, run the following commands.

<blockquote><pre>
# <b>groupmod -g 788 _dnsdist</b>
# <b>usermod -g 788 -u 788 _dnsdist</b>
</pre></blockquote>


<h3 id="r20170325">2017/03/25 - amd64 binutils update</h3>

If you have binutils older than from March 16th, a new version must be installed
before compiling an amd64 kernel, due to assembler support change:

<blockquote><pre>
$ <b>cd /usr/src/gnu/usr.bin/binutils-2.17</b>
$ <b>make -f Makefile.bsd-wrapper obj</b>
$ <b>make -f Makefile.bsd-wrapper depend</b>
$ <b>make -f Makefile.bsd-wrapper</b>
$ <b>doas make -f Makefile.bsd-wrapper install</b>
</pre></blockquote>


<h3 id="r20170325a">2017/03/25 - vmd(8) changes</h3>

VMs now boot using the LGPLv3 SeaBIOS from <tt>/etc/firmware/vmm-bios</tt>.
Booting OpenBSD kernels or non-default BIOS images is still supported:
instead of <tt>-k/kernel</tt>, you now need to use the new <tt>-b</tt>
command line option of <a href="http://man.openbsd.org/vmctl">vmctl(8)</a>.
Similarly, in <a href="http://man.openbsd.org/vm.conf">vm.conf(5)</a>,
the <tt>kernel</tt> option was replaced with <tt>boot</tt>.
d55 1
a55 1
<small>$OpenBSD: current.html,v 1.807 2017/03/27 17:11:05 bluhm Exp $</small>
@


1.807
log
@Remove the old Perl library after update to 5.24.1.  Multiple Perl
versions do not work in base anyway and the libperl.so.17.1 caused
trouble for me in a SpamAssassin test.
OK afresh1@@ tb@@
@
text
@d662 1
a662 1
<h3 id="r20170325">2017/03/25 - vmd(8) changes</h3>
d673 1
a673 1
<small>$OpenBSD: current.html,v 1.806 2017/03/27 14:42:01 tb Exp $</small>
@


1.806
log
@vmd(8) changes

VMs now boot using the LGPLv3 SeaBIOS from /etc/firmware/vmm-bios. Booting
OpenBSD kernels or non-default BIOS images is still supported: instead of
-k/kernel, you now need to use the new -b command line option of vmctl(8).
Similarly, in vm.conf(5), the kernel option was replaced with boot.

help & ok reyk
@
text
@d515 1
d673 1
a673 1
<small>$OpenBSD: current.html,v 1.805 2017/03/27 10:44:33 tb Exp $</small>
@


1.805
log
@tweak previous: zap a few unneeded doas and make it clear that this is only
needed if you're quite a bit behind -current.
@
text
@d660 10
d672 1
a672 1
<small>$OpenBSD: current.html,v 1.804 2017/03/26 14:04:29 espie Exp $</small>
@


1.804
log
@amd64 wants -current binutils before building kernel.
okay kettenis@@
@
text
@a645 1
<p>
d647 5
a651 3
<h3 id="r20170325">2017/03/25 - binutils update</h3>
Binutils must be installed before compiling an amd64 kernel, due to
assembler support change.
d654 3
a656 3
$ <b>doas make -f Makefile.bsd-wrapper obj</b>
$ <b>doas make -f Makefile.bsd-wrapper depend</b>
$ <b>doas make -f Makefile.bsd-wrapper</b>
d660 1
d662 1
a662 1
<small>$OpenBSD: current.html,v 1.803 2017/03/25 18:03:37 tb Exp $</small>
@


1.803
log
@switch cvsweb and a couple of other links to https. thanks nick and tj!
@
text
@d648 10
d660 1
a660 1
<small>$OpenBSD: current.html,v 1.802 2017/03/23 12:00:06 danj Exp $</small>
@


1.802
log
@Add instruction for the _dnsdist uid change

tweaks/ok tb@@ jca@@
@
text
@d313 1
a313 1
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/etc/master.passwd.diff?r1=1.93&amp;r2=1.94"
d315 1
a315 1
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/etc/group.diff?r1=1.84&amp;r2=1.85"
d650 1
a650 1
<small>$OpenBSD: current.html,v 1.801 2017/03/03 11:17:32 natano Exp $</small>
@


1.801
log
@sysctl machdep.lidsuspend renamed to machdep.lidaction
ok tb
@
text
@d634 12
d650 1
a650 1
<small>$OpenBSD: current.html,v 1.800 2017/03/03 08:19:54 tb Exp $</small>
@


1.800
log
@kill /etc/examples/pkg.conf, too. suggested by nils reusse
@
text
@d623 11
d638 1
a638 1
<small>$OpenBSD: current.html,v 1.799 2017/03/02 21:42:55 tb Exp $</small>
@


1.799
log
@also remove pkg.conf.5. spotted by jan stary
@
text
@d608 1
a608 1
# <b>rm /etc/pkg.conf /usr/share/man/man5/pkg.conf.5</b>
d627 1
a627 1
<small>$OpenBSD: current.html,v 1.798 2017/02/28 20:05:17 tb Exp $</small>
@


1.798
log
@slightly rephrase the installurl entry and thin out awesomewm instructions.
@
text
@d608 1
a608 1
# <b>rm /etc/pkg.conf</b>
d627 1
a627 1
<small>$OpenBSD: current.html,v 1.797 2017/02/28 14:35:22 dcoppa Exp $</small>
@


1.797
log
@
Give a heads up to anyone who may be concerned about the x11/awesome
update to v4.0
@
text
@d596 3
a598 2
Please create the <tt>/etc/installurl</tt> file manually with your preferred
<a href="../ftp.html">mirror</a>:
d617 5
a621 3
Awesome 4.0 is the first release of the v4 API level, breaking the
proven v3.5 API level after 4 years. This requires to port the
existing user configuration and extensions to the new API.
a622 1
Follow the instructions at:
a623 3
<a href="https://awesomewm.org/apidoc/documentation/17-porting-tips.md.html#v4">https://awesomewm.org/apidoc/documentation/17-porting-tips.md.html#v4</a>
<p>
for the required changes to have a properly behaving config.
d627 1
a627 1
<small>$OpenBSD: current.html,v 1.796 2017/02/28 01:05:14 tb Exp $</small>
@


1.796
log
@ftp.html contains the exact locations to which installurl should point.
so link to that page and show an example.

from tj, "Yes, that's even better!" deraadt
@
text
@d613 14
d628 1
a628 1
<small>$OpenBSD: current.html,v 1.795 2017/02/27 23:43:03 deraadt Exp $</small>
@


1.795
log
@slightly improve the explanation, prompting people to create the file
if it is missing.  that is more important than removing the old one.
@
text
@d595 7
a601 5
find the main package repository.  Please create the file
<b>/etc/installurl</b> as documented, perhaps using your existing
<b>/etc/pkg.conf</b> file as reference, noting that it points to the
pub/OpenBSD directory on a mirror rather than the specific architecture.
<p>
d614 1
a614 1
<small>$OpenBSD: current.html,v 1.794 2017/02/27 22:26:42 tb Exp $</small>
@


1.794
log
@zap <tt> in title
@
text
@d595 8
a602 3
find the main package repository.
The <a href="http://man.openbsd.org/pkg.conf.5">pkg.conf(5)</a> file
should be removed
d612 1
a612 1
<small>$OpenBSD: current.html,v 1.793 2017/02/27 22:24:09 tb Exp $</small>
@


1.793
log
@pkg.conf(5) no longer supported

The pkg_* tools now use the installurl(5) file to find the main
package repository. The pkg.conf(5) file should be removed.  Use
the PKG_PATH environment variable in case you need to specify more
than one repository.
@
text
@d591 1
a591 1
<h3 id="r20170227">2017/02/27 - <tt>pkg.conf(5)</tt> no longer supported</h3>
d607 1
a607 1
<small>$OpenBSD: current.html,v 1.792 2017/02/27 06:28:58 tb Exp $</small>
@


1.792
log
@Mention the changed autoinstall(8) question, as requested by rpe:
    "Do you want the X Window System to be started by xenodm(1)?"
While there, start new sentences on new lines and wrap lines to fit
in 80 columns.
@
text
@d561 1
d590 16
d607 1
a607 1
<small>$OpenBSD: current.html,v 1.791 2017/02/26 22:00:58 matthieu Exp $</small>
@


1.791
log
@More files to remove. From  Raf Czlonka. Thanks.
@
text
@d563 4
a566 1
The X Display Manager has been switched to <a href="http://man.openbsd.org/xenodm.1">xenodm(1)</a>. If you enabled xdm in <tt>/etc/rc.conf.local</tt> you need to update your configuration.
d573 3
a575 1
If any local configuration change was made to <tt>/etc/X11/xdm/</tt>, it should be migrated to the corresponding <tt>/etc/X11/xenodm</tt> file. After that the xdm files can be removed:
d579 8
a586 3
# <b>rm /usr/X11R6/bin/xdm \
  /usr/X11R6/man/man1/xdm.1 \
  /etc/rc.d/xdm</b>
d590 1
a590 1
<small>$OpenBSD: current.html,v 1.790 2017/02/26 21:25:57 matthieu Exp $</small>
@


1.790
log
@Mention migration of xdm config changes and removing files.
@
text
@d574 3
d580 1
a580 1
<small>$OpenBSD: current.html,v 1.789 2017/02/26 16:58:57 matthieu Exp $</small>
@


1.789
log
@Document xdm(1) -> xenodm(1) transition
@
text
@d566 8
a573 2
    # rcctl disable xdm
    # rcctl enable xenodm
d577 1
a577 1
<small>$OpenBSD: current.html,v 1.788 2017/02/23 13:56:43 tb Exp $</small>
@


1.788
log
@tweak previous
@
text
@d561 9
d571 1
a571 1
<small>$OpenBSD: current.html,v 1.787 2017/02/23 13:49:42 giovanni Exp $</small>
@


1.787
log
@a configuration change is needed after uprading mail/courier-authlib to 0.67
@
text
@d542 1
d545 5
a549 1
A configuration change is needed to be able to use latest version of mail/courier-authlib; if MySQL or Postgresql is used as authentication source the following lines should be appended to the appropriate config files (<tt>/etc/courier/authmysqlrc</tt> or <tt>/etc/courier/authpgsqlrc</tt>).
d557 3
a559 1
In addition, if MySQL is used the option "MYSQL_OPT 0" should alse be set.
d562 1
a562 1
<small>$OpenBSD: current.html,v 1.786 2017/02/11 11:35:51 tb Exp $</small>
@


1.786
log
@alpha, armv7, macppc, landisk and luna88k (and perhaps other archs) have
older snapshots that do not yet contain the new perl version, so suggest
that people run perl -v before removing files.

found the hard way by florian
@
text
@d542 12
d555 1
a555 1
<small>$OpenBSD: current.html,v 1.785 2017/02/09 22:10:41 tb Exp $</small>
@


1.785
log
@an extra "code" snuck in
@
text
@d508 3
a510 1
A number of files and directories should be removed:
d543 1
a543 1
<small>$OpenBSD: current.html,v 1.784 2017/02/09 22:07:55 tb Exp $</small>
@


1.784
log
@upgrading from 6.0-release to -current by compiling from source is NOT
supported; remove build instructions for getting over the RELRO change
and several armv7 ABI breaks that happened way back in autumn.

discussed with guenther
@
text
@d48 1
a48 1
In particular, upgrading by compiling from source code from OpenBSD 6.0
d541 1
a541 1
<small>$OpenBSD: current.html,v 1.783 2017/02/09 17:22:19 tb Exp $</small>
@


1.783
log
@2017
@
text
@d45 5
a49 1
Upgrading by compiling your own source code is not supported.
a78 22
<h3 id="r20160810">2016/08/10 - RELRO by default on all archs but luna88k</h3>

The system now uses the RELRO design ("read-only after relocation") to
lay out executables and libraries such that they use fewer mappings and
more of the initial data can be protected as read-only.
Unlike other OSes, this applies to <b>all</b> dynamic executables and libraries
by default, as well as to static PIE executables.
<p>
To upgrade over this, start from a system running 6.0-release or later and an
up-to-date source tree:
<blockquote><pre>
cd /usr/src &amp;&amp; make obj &amp;&amp; make clean &amp;&amp; make includes
cd /usr/src/libexec/ld.so
make SUBDIR= depend &amp;&amp; make SUBDIR= &amp;&amp; doas make SUBDIR= install
cd /usr/src/lib/csu
make depend &amp;&amp; make &amp;&amp; doas make install
cd /usr/src/gnu/usr.bin/binutils-2.17
make -f Makefile.bsd-wrapper &amp;&amp; doas make -f Makefile.bsd-wrapper install
cd /usr/src &amp;&amp; make build
</pre></blockquote>


a100 7
<h3 id="r20160901">2016/09/01 - armv7 complete ABI break</h3>

OpenBSD/armv7 moved to the ARM EABI.  This is a hard ABI break which
you cannot cross with a simple build.  To upgrade through this break,
you need to upgrade from a snapshot.


a107 62
<h3 id="r20160903">2016/09/03 - armv7 is now PIE</h3>

The armv7 platform has been switched to PIE (position-independent executables)
by default.
Everyone is encouraged to update via snapshots (dated after 2016/09/02); if you
want to upgrade via sources, follow these instructions:

<p>
First, install the new system Makefiles with the change to PIE_ARCH in
<tt>bsd.own.mk</tt>:

<blockquote><pre>
cd /usr/src/share/mk &amp;&amp; make install
</pre></blockquote>

Then, recompile and install gcc and binutils.

<blockquote><pre>
cd /usr/src/gnu/usr.bin/binutils-2.17
make -f Makefile.bsd-wrapper clean &amp;&amp; make -f Makefile.bsd-wrapper obj &amp;&amp; \
       make -f Makefile.bsd-wrapper depend &amp;&amp; make -f Makefile.bsd-wrapper
cd /usr/src/gnu/usr.bin/cc
make clean &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
cd /usr/src/gnu/usr.bin/binutils-2.17 &amp;&amp; make -f Makefile.bsd-wrapper install
</pre></blockquote>

Finally, recompile your system by following the procedure outlined in
<a href="http://man.openbsd.org/release.8">release(8)</a>.


<h3 id="r20160908">2016/09/08 - armv7 now supports static PIE</h3>

The armv7 platform now also supports PIE for static binaries.
Everyone is encouraged to update via snapshots (dated after 2016/09/09);
if you want to upgrade via sources, follow these instructions:

<p>
First, install the new system Makefiles with the change to
<tt>STATICPIE_ARCH</tt> in <tt>bsd.own.mk</tt>:

<blockquote><pre>
cd /usr/src/share/mk &amp;&amp; make install
</pre></blockquote>

Then, build and install <tt>rcrt0.o</tt>:

<blockquote><pre>
cd /usr/src/lib/csu
make clean &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre></blockquote>

Then, recompile and install gcc:

<blockquote><pre>
cd /usr/src/gnu/usr.bin/cc
make clean &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre></blockquote>

Finally, recompile your system by following the procedure outlined in
<a href="http://man.openbsd.org/release.8">release(8)</a>.


d541 1
a541 1
<small>$OpenBSD: current.html,v 1.782 2017/02/09 14:09:50 tb Exp $</small>
@


1.782
log
@update sqlite3 entry according to the XXX comment.  new packages have long
been available and this way it can be included directly in update61.html.
@
text
@d6 1
a6 2
<meta name= "copyright"     content= "This document copyright 2005-2016
                                      by OpenBSD">
d628 1
a628 1
<small>$OpenBSD: current.html,v 1.781 2017/02/09 13:00:55 tb Exp $</small>
@


1.781
log
@acme.conf -> acme-client.conf

from raf czlonka
@
text
@d232 2
a233 1
The old files must be removed before building from ports:
d241 1
a241 1
rm /usr/lib/libsqlite3*         <b># see below</b>
a243 20
Ports bulk builders must remove the old libraries before building
new packages.

<!-- XXX For 6.1 upgrade notes: 1. update OS, 2. update all packages, 3. rm files. -->
<p>
Users should wait until updated packages are available
before removing the libraries, otherwise many installed packages
will break.
You can check:

<blockquote><pre>
$ <b>pkg_info -S nss</b>
Information for inst:nss-3.26

Signature:
nss-3.26,@@nspr-4.12p0,c.89.1,nspr4.23.3,plc4.23.3,plds4.23.3,pthread.23.0,<b>sqlite3.</b><b style="color:#e00000">33.0</b>,z.5.0
</pre></blockquote>

If the sqlite3 version number is 32.0 or lower, they are not updated yet.

d629 1
a629 1
<small>$OpenBSD: current.html,v 1.780 2017/02/05 07:02:51 tb Exp $</small>
@


1.780
log
@missing \
@
text
@d584 2
a585 1
<tt>/etc/acme.conf</tt> untouched and append your <tt>domain { }</tt> sections.
d648 1
a648 1
<small>$OpenBSD: current.html,v 1.779 2017/02/05 06:27:35 tb Exp $</small>
@


1.779
log
@remove some files after the upgrade to perl 5.24.1.
with help from afresh1
@
text
@d619 1
a619 1
  /usr/libdata/perl5/*-openbsd/5.*/
d647 1
a647 1
<small>$OpenBSD: current.html,v 1.778 2017/01/30 17:53:18 tb Exp $</small>
@


1.778
log
@smooth some rough edges
@
text
@d611 35
d647 1
a647 1
<small>$OpenBSD: current.html,v 1.777 2017/01/30 17:32:41 tb Exp $</small>
@


1.777
log
@tweak previous: make the text a bit more concise, add some commas and begin
new sentences on new lines.
@
text
@d542 4
a545 5
Therefore the configuration on <b>older</b> installations needs to be changed to
select a specific MODP group such as MODP2048 to be able to talk to endpoints
running newer versions of iked(8).
In particular, a line such as
<tt>ikesa group modp2048 childsa group modp2048</tt> needs to be added.
d612 1
a612 1
<small>$OpenBSD: current.html,v 1.776 2017/01/30 16:48:43 mikeb Exp $</small>
@


1.776
log
@Add a note regarding changes in DH group selection in iked

Issue reported by henning@@, the current.html entry suggested by reyk@@.
@
text
@a533 1
<h3 id="r20170104">2017/01/04 - RFC5114 MODP groups are removed from the iked(8)</h3>
d535 5
a539 3
Support for additional modular exponential groups specified in the RFC5114
was removed from the <a href="http://man.openbsd.org/iked.8">iked(8)</a>.
As a result it will no longer accept proposals with a MODP2048-256 group
d541 10
a550 6
older versions (i.e. shipped with OpenBSD 6.0 and earlier). Therefore a
configuration change is required for <em>older</em> installations that need
to be able to to talk to endpoints running newer versions of the program to
select a specific MODP group such as MODP2048.  In particular a line such as
<tt>ikesa group modp2048 childsa group modp2048</tt> needs to be added. For
example if the old configuration looked like:
d559 1
a559 1
It needs to be amended to look like this:
d569 1
d613 1
a613 1
<small>$OpenBSD: current.html,v 1.775 2017/01/23 05:03:47 tb Exp $</small>
@


1.775
log
@fix man links for acme-client{,.conf} . spotted by amit kulkarni
@
text
@d534 29
d607 1
a607 1
<small>$OpenBSD: current.html,v 1.774 2017/01/21 09:33:58 tb Exp $</small>
@


1.774
log
@make acme-client section a bit more concise and use the usual faq style.

discussed with benno
@
text
@d537 1
a537 1
The <a href="http://man.openbsd.org/acme-client(1)">acme-client(1)</a> program
d539 1
a539 1
<a href="http://man.openbsd.org/acme-client.conf(5)">acme-client.conf(5)</a>.
d578 1
a578 1
<small>$OpenBSD: current.html,v 1.773 2017/01/21 09:08:40 benno Exp $</small>
@


1.773
log
@2017/01/21 - acme-client(1) uses config file

ok florian
@
text
@d537 6
a542 3
Changes in <a
href="http://man.openbsd.org/acme-client(1)">acme-client(1)</a>
necessitate the following changes in users setup:
a543 1
The account key has moved, you should copy it to the new location
d549 6
a554 7
The configuration file <a
href="http://man.openbsd.org/acme-client.conf(5)">/etc/acme-client.conf(5)</a>
is now used. Use <a
href="http://man.openbsd.org/sysmerge(8)">sysmerge(8)</a> to update it
and then modify it to your needs. It is recommended that you leave all
current content in place and add your own <tt>domain { }</tt> sections
at the bottom, as that will make upgrades easier in the future.
a555 2
For example, for the domain <tt>"www.openbsd.org"</tt>, append this to
the file:
d567 5
a571 8
These are the old default locations, of course you are free to
choose more descriptive filenames.
<p>
The command line arguments have changed. Thus, the command
<blockquote><pre>
acme-client www.openbsd.org openbsd.org ftp.openbsd.org
</pre></blockquote>
needs to be replaced by
d578 1
a578 1
<small>$OpenBSD: current.html,v 1.772 2017/01/06 10:07:06 tb Exp $</small>
@


1.772
log
@make the auto_{install,upgrade}.conf snippet copy-pastable
@
text
@d534 47
d582 1
a582 1
<small>$OpenBSD: current.html,v 1.771 2017/01/05 17:37:00 tb Exp $</small>
@


1.771
log
@id attributes may not contain '/' characters.
@
text
@d529 1
a529 1
Unable to connect using https. Use http instead = yes|no
d535 1
a535 1
<small>$OpenBSD: current.html,v 1.770 2017/01/05 17:33:27 tb Exp $</small>
@


1.770
log
@On amd64, armv7, i386, hppa and macppc, the bsd.rd installer defaults to
https.  Your autoinstall(8) response file may need the additional line

    Unable to connect using https. Use http instead = yes|no

between the "HTTP Server" and "Set name(s)" responses.
@
text
@d522 1
a522 1
<h3 id="r2017/01/03">2017/01/03 - https support added to the installer</h3>
d535 1
a535 1
<small>$OpenBSD: current.html,v 1.769 2016/12/27 12:56:12 tb Exp $</small>
@


1.769
log
@fix date in id attribute
@
text
@d521 13
d535 1
a535 1
<small>$OpenBSD: current.html,v 1.768 2016/12/27 12:51:42 tb Exp $</small>
@


1.768
log
@mention uucp and news removal.  issue
	userdel uucp
	groupdel news
and unless you use the net/uucp port:
	rm -rf /var/spool/uucp*
with input from jca@@
@
text
@d510 1
a510 1
<h3 id="r20161218a">2016/12/27 - removal of <tt>uucp</tt> and <tt>news</tt></h3>
d522 1
a522 1
<small>$OpenBSD: current.html,v 1.767 2016/12/18 21:01:39 tb Exp $</small>
@


1.767
log
@start new sentences on new lines and simplify the text a bit
@
text
@d497 1
d509 12
d522 1
a522 1
<small>$OpenBSD: current.html,v 1.766 2016/12/18 20:43:42 jca Exp $</small>
@


1.766
log
@Switch net/uucp to user _uucp.
@
text
@d499 4
a502 4
Starting with <tt>uucp-1.07p4</tt>, the uucp suite now runs under
the <tt>_uucp</tt> account.  Ensure that you have no uucp process
running and adjust the relevant permissions.  The following command was
found sufficient:
d509 1
a509 1
<small>$OpenBSD: current.html,v 1.765 2016/12/18 19:52:17 jca Exp $</small>
@


1.765
log
@Instructions to move leafnode to group _news.

Tweaks from tb@@
@
text
@d497 11
d509 1
a509 1
<small>$OpenBSD: current.html,v 1.764 2016/12/01 18:44:27 tb Exp $</small>
@


1.764
log
@minor markup and phrasing tweaks
@
text
@d484 13
d498 1
a498 1
<small>$OpenBSD: current.html,v 1.763 2016/12/01 17:18:32 okan Exp $</small>
@


1.763
log
@Add cwm(1) config change.
@
text
@d477 6
a482 5
The configuration syntax has changed for binding functions to keys and mouse
buttons, replacing <b>bind</b> and <b>mousebind</b> keywords with
<b>bind-key</b>, <b>bind-mouse</b>, <b>unbind-key</b> and <b>unbind-mouse</b>.
See <a href="http://man.openbsd.org/cwmrc.5">cwmrc(5)</a> for new bind function
names.
d485 1
a485 1
<small>$OpenBSD: current.html,v 1.762 2016/11/24 20:19:14 tb Exp $</small>
@


1.762
log
@The suggested ownership and permissions for /dest and RELEASEDIR were so
strict as to be inconvenient.  Only keep the necessary parts:

/dest and RELEASEDIR need to be owned by build and have at least mode 700.

In particular, /dest and RELEASEDIR need not be owned by group wobj and
more relaxed permissions are possible.
@
text
@d474 9
d484 1
a484 1
<small>$OpenBSD: current.html,v 1.761 2016/11/22 18:06:12 tb Exp $</small>
@


1.761
log
@incorporate some suggestions from espie@@:
- build a kernel after installing the makefiles and before 'make build'
- remind people to remove BUILDUSER from mk.conf(5)
- developers MUST add their users to the group wobj
@
text
@d457 1
a457 1
# <b>chown build:wobj /dest</b>
d463 2
a464 2
# <b>chown build:wobj $RELEASEDIR</b> 
# <b>chmod 700 $RELEASEDIR</b>
d475 1
a475 1
<small>$OpenBSD: current.html,v 1.760 2016/11/20 15:38:13 tb Exp $</small>
@


1.760
log
@invalid html: need to escape & in urls.

from validator.w3.org
@
text
@d435 1
a435 1
Developers will need to add their users to the group <tt>wobj</tt>, so that they
d437 2
d441 1
a441 1
Install the new systemwide makefiles, then start the build:
a444 1
# <b>cd /usr/src && make obj && make build</b>
d447 8
a454 3
Before making a <a href="http://man.openbsd.org/release">release(8)</a>, ensure
that <tt>build</tt> can write to <tt>DESTDIR</tt> and <tt>RELEASEDIR</tt>:
chown the root of the <tt>noperm</tt> filesystem containing <tt>DESTDIR</tt>
d475 1
a475 1
<small>$OpenBSD: current.html,v 1.759 2016/11/20 14:46:33 tb Exp $</small>
@


1.759
log
@Disentangle treatment of /dest and RELEASEDIR.  Requested by deraadt.
@
text
@d420 1
a420 1
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/etc/master.passwd.diff?r1=1.93&r2=1.94"
d422 1
a422 1
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/etc/group.diff?r1=1.84&r2=1.85"
d448 1
a448 1
Chown the root of the <tt>noperm</tt> filesystem containing <tt>DESTDIR</tt>
d469 1
a469 1
<small>$OpenBSD: current.html,v 1.758 2016/11/20 13:28:53 tb Exp $</small>
@


1.758
log
@recommend starting with an empty RELEASEDIR the first time around
@
text
@d448 1
d451 8
a458 2
# <b>chown build:wobj $RELEASEDIR /dest</b>  # the noperm fs containing DESTDIR
# <b>chmod 700 $RELEASEDIR /dest</b>
d469 1
a469 1
<small>$OpenBSD: current.html,v 1.757 2016/11/19 23:30:35 tb Exp $</small>
@


1.757
log
@krw found the hard way that RELEASEDIR must be writable by build ...
@
text
@d454 4
d462 1
a462 1
<small>$OpenBSD: current.html,v 1.756 2016/11/19 14:23:13 tb Exp $</small>
@


1.756
log
@Builds with a dedicated user that cannot elevate privileges or write
to /usr/src or /usr/xenocara were enabled.

Change /usr/{,x}obj to owner build:wobj with mode 770 and install the
systemwide makefiles before starting a build.  The root of the noperm fs
containing DESTDIR should also be owned by build:wobj.

Developers will need to add their users to group wobj.

input from tj, rpe
@
text
@d431 1
a431 1
# <b>chown build:wobj /usr/{,x}obj /dest</b>  # the noperm fs containing DESTDIR
d446 9
a454 1
Making a release and xenocara needs no extra steps beyond the ones described in
d458 1
a458 1
<small>$OpenBSD: current.html,v 1.755 2016/11/17 19:32:48 tb Exp $</small>
@


1.755
log
@whitespace
@
text
@d412 37
d450 1
a450 1
<small>$OpenBSD: current.html,v 1.754 2016/11/15 02:59:25 tb Exp $</small>
@


1.754
log
@tweak previous, with help from tj
@
text
@d351 1
d370 1
d377 1
d387 1
d396 1
d413 1
a413 1
<small>$OpenBSD: current.html,v 1.753 2016/11/14 11:05:27 mpi Exp $</small>
@


1.753
log
@Using loX and rdomain X on the same host no longer work if loX isn't part
of rdomain X.
@
text
@d394 1
a394 2
A <a href="http://man.openbsd.org/lo.4">lo(4)</a> interface is now
created by default for every
d396 2
a397 2
Like lo0 for rdomain 0 it can be used to see and filter local traffic via
<a href="http://man.openbsd.org/bpf.4">bpf(4)</a> and
d399 1
d401 4
a404 3
If you previously were using a loX in a different rdomain than X it wont
be possible to create rdomain X anymore.  You need to either use a
different <a href="http://man.openbsd.org/lo.4">lo(4)</a> unit or
d408 1
a408 1
<small>$OpenBSD: current.html,v 1.752 2016/11/09 17:12:46 tb Exp $</small>
@


1.752
log
@millert and afresh1 made sure that the site_perl directory is no longer
needed either: rm -rf /usr/libdata/perl5/site_perl
@
text
@d392 14
d407 1
a407 1
<small>$OpenBSD: current.html,v 1.751 2016/11/09 16:01:33 tb Exp $</small>
@


1.751
log
@The perl headers are no more. Issue

	rm -rf /usr/libdata/perl5/site_perl/*

ok sthen; confirmed by espie and millert
@
text
@d389 1
a389 1
rm -rf /usr/libdata/perl5/site_perl/*
d393 1
a393 1
<small>$OpenBSD: current.html,v 1.750 2016/11/04 23:07:20 tb Exp $</small>
@


1.750
log
@split up some long sentences and start new sentences on new lines.
@
text
@d384 8
d393 1
a393 1
<small>$OpenBSD: current.html,v 1.749 2016/11/04 22:20:11 jeremy Exp $</small>
@


1.749
log
@Add entry for www/nginx dynamic module switch
@
text
@d371 3
a373 3
The <tt>mail/sympa</tt> mailing list server port was updated to a new version,
refer to <a href="https://www.sympa.org/faq/upgrade-to-v6.2">the upgrade notes</a>
for how to migrate your setup.
d378 5
a382 4
modules, instead of using FLAVORs. If you previously were using a FLAVORed
version of nginx, or the mail or stream modules, you need to install the
apropriate subpackage(s), and you also need to modify your nginx configuration
to use <tt>load_module</tt> for each dynamic module you want to load.
d385 1
a385 1
<small>$OpenBSD: current.html,v 1.748 2016/11/04 10:27:16 landry Exp $</small>
@


1.748
log
@add a note about mail/sympa update
@
text
@d375 8
d384 1
a384 1
<small>$OpenBSD: current.html,v 1.747 2016/10/29 21:13:36 tb Exp $</small>
@


1.747
log
@fix a validator warning
@
text
@d369 6
d376 1
a376 1
<small>$OpenBSD: current.html,v 1.746 2016/10/29 20:19:09 tb Exp $</small>
@


1.746
log
@spell out 'cvs up' as 'cvs -q up -Pd' so the kernel compilation directories
are created.

prompted by a question by patrick keshishian
@
text
@d257 2
a258 1
Signature: nss-3.26,@@nspr-4.12p0,c.89.1,nspr4.23.3,plc4.23.3,plds4.23.3,pthread.23.0,<b>sqlite3.<font color="#e00000">33.0</font></b>,z.5.0
d370 1
a370 1
<small>$OpenBSD: current.html,v 1.745 2016/10/26 01:15:28 schwarze Exp $</small>
@


1.745
log
@Increase the probability that former uxterm users
can still open terminal windows after uxterm removal.
OK tb@@
@
text
@d337 1
a337 1
$ <b>cvs up</b>
d369 1
a369 1
<small>$OpenBSD: current.html,v 1.744 2016/10/24 23:38:30 tb Exp $</small>
@


1.744
log
@and zap extra rm, from raf czlonka
@
text
@d321 1
a321 1
<br />
d364 4
d369 1
a369 1
<small>$OpenBSD: current.html,v 1.743 2016/10/24 23:37:10 tb Exp $</small>
@


1.743
log
@tweak previous; missing </b> also noted by raf czlonka
@
text
@d361 1
a361 1
rm man/man1/koi8rxterm.1 rm man/man1/uxterm.1
d365 1
a365 1
<small>$OpenBSD: current.html,v 1.742 2016/10/24 19:56:53 matthieu Exp $</small>
@


1.742
log
@uxterm and koi8rxterm removal
@
text
@d352 5
a356 4
The <tt>uxterm</tt> and <tt>koi8rxterm</tt> shell scripts have been
removed as <a href="http://man.openbsd.org/xterm.1">xterm(1)</a> on OpenBSD
is already setup to support UTF-8. Some cleanup needs to be done after
upgrading to -current:
d358 4
a361 4
# <b>cd /usr/X11R6</b>
# <b>rm bin/koi8rxterm bin/uxterm</b>
# <b>rm share/X11/app-defaults/KOI8RXTerm share/X11/app-defaults/UXTerm</b>
# <b>rm man/man1/koi8rxterm.1 rm man/man1/uxterm.1
d363 1
d365 1
a365 1
<small>$OpenBSD: current.html,v 1.741 2016/10/14 22:28:23 tb Exp $</small>
@


1.741
log
@switch back to /sys, it's the more idiomatic way and everyone has the
symlink.
@
text
@d350 12
d363 1
a363 1
<small>$OpenBSD: current.html,v 1.740 2016/10/14 22:22:04 tb Exp $</small>
@


1.740
log
@prepend /usr/src to /sys since not everyone has this symlink.
might be less confusing this way.

pointed out by amit kulkarni
@
text
@d334 1
a334 1
$ <b>cd /usr/src/sys</b>
d343 1
a343 1
$ <b>cd /usr/src/sys/arch/$(machine)/compile/GENERIC.MP</b>
d351 1
a351 1
<small>$OpenBSD: current.html,v 1.739 2016/10/14 20:10:46 tb Exp $</small>
@


1.739
log
@Kernels now build in an obj directory just like the rest of the source tree.
This helps ensuring that the src tree can be read-only during builds. Some
cleanup needs to be done before updating your source trees via cvs:

    $ cd /sys
    $ rm -r arch/*/compile/[GR]*
    $ rm arch/*/compile/.cvsignore
    $ cvs up

The new way of configuring, building and installing a kernel is:

    $ cd /src/sys/arch/$(machine)/compile/GENERIC.MP
    $ doas make obj
    $ make config
    $ make
    $ doas make install
@
text
@d334 1
a334 1
$ <b>cd /sys</b>
d343 1
a343 1
$ <b>cd /sys/arch/$(machine)/compile/GENERIC.MP</b>
d351 1
a351 1
<small>$OpenBSD: current.html,v 1.738 2016/10/14 12:27:56 jasper Exp $</small>
@


1.738
log
@document ansible copy-module change
@
text
@d314 1
d325 25
d351 1
a351 1
<small>$OpenBSD: current.html,v 1.737 2016/10/07 17:55:35 natano Exp $</small>
@


1.737
log
@The owner of /dest/{x,}base doesn't actually matter, as they are on a
noperm partition, and it's not picked up by the tarballs.
ok tb deraadt
@
text
@d314 10
d325 1
a325 1
<small>$OpenBSD: current.html,v 1.736 2016/10/07 13:56:09 tb Exp $</small>
@


1.736
log
@tweak previous, must do 'make obj && make build' from /usr/src, not
from /usr/src/share/mk; remove setting BUILDUSER explicitly while there
since that's not needed.

pointed out by jesper wallin, thanks!
@
text
@d307 2
a308 3
  <li>Create directories <tt>/dest/base</tt> and <tt>/dest/xbase</tt> owned by
    <tt>BUILDUSER</tt>.
  <li>The <tt>RELEASEDIR</tt> must also be owned by <tt>BUILDUSER</tt>.
d315 1
a315 1
<small>$OpenBSD: current.html,v 1.735 2016/10/07 04:20:09 jsg Exp $</small>
@


1.735
log
@Updated share/mk files need to be installed before starting a build or
make obj won't set permissions based on BUILDUSER and make build will
then later error out.
@
text
@d291 1
a291 1
Start the build from <tt>/usr/src</tt> as follows:
d294 2
a295 3
# <b>cd /usr/src/share/mk && make install</b>
# <b>export BUILDUSER=your-build-user</b>	# only needed the first time
# <b>make obj && make build</b>
d316 1
a316 1
<small>$OpenBSD: current.html,v 1.734 2016/10/07 02:14:13 tb Exp $</small>
@


1.734
log
@two sentences needed some shuffling to read a bit less awkwardly.
other minor wording tweaks and markup fixups.
@
text
@d294 1
d317 1
a317 1
<small>$OpenBSD: current.html,v 1.733 2016/10/06 21:08:34 natano Exp $</small>
@


1.733
log
@Tweak wording: mount point != filesystem mounted on it.
ok tb
@
text
@d62 1
a62 1
<h3 id="r20160808">2016/08/08 - Mandatory W^X enforcement</h3>
d248 1
a248 1
Otherwise, users should wait until updated packages are available
d254 1
a254 1
$ pkg_info -S nss
d276 1
a276 1
<h3 id="r20161005">2016/10/06 - New build infrastructure,
d283 2
a284 1
The makefiles will de-escalate privileges to <tt>BUILDUSER</tt> (as specified in
d286 3
a288 3
<tt>USER</tt>) whenever possible.
Before starting a build, make sure that <tt>/usr/obj</tt> or <tt>/usr/xobj</tt>
is empty and owned by <tt>BUILDUSER</tt>.
d295 1
a295 2
# <b>make obj</b>
# <b>make build</b>
d316 1
a316 1
<small>$OpenBSD: current.html,v 1.732 2016/10/06 21:01:05 tb Exp $</small>
@


1.732
log
@New build infrastructure, noperm release process

The infrastructure to build the base system from source and to make a
release has changed.  The make build command now MUST be issued by root.
The makefiles will de-escalate privileges to BUILDUSER whenever possible.

Before starting a build, make sure that /usr/obj is empty and owned by
BUILDUSER.  Start the build from /usr/src as follows:

# export BUILDUSER=your-build-user      # only needed the first time
# make obj
# make build

To make a release(8), further setup is required:

* Mount a noperm filesystem on /dest, of size at least 1G, of type ffs
* The /dest mount point must be owned by BUILDUSER, with permissions 700.
* Create directories /dest/base and /dest/xbase owned by BUILDUSER.
* The RELEASEDIR must also be owned by BUILDUSER.

To build a base release, set DESTDIR=/dest/base and to build a xenocara
release, set DESTDIR=/dest/xbase.
@
text
@d305 1
a305 1
  <li>The <tt>/dest</tt> mount point must be owned by <tt>BUILDUSER</tt>, with
d316 1
a316 1
<small>$OpenBSD: current.html,v 1.730 2016/10/06 19:49:38 tb Exp $</small>
@


1.731
log
@back out previous, there was a misunderstanding. will be fixed shortly
@
text
@d275 40
d316 1
a316 1
<small>$OpenBSD: current.html,v 1.729 2016/10/04 20:05:50 tb Exp $</small>
@


1.730
log
@New build infrastructure, noperm release process

The infrastructure to build the base system from source and to make a
release has changed.  The make build command now MUST be issued by root.
The makefiles will de-escalate privileges to BUILDUSER whenever possible.

Before starting a build, make sure that /usr/obj is empty and owned by
BUILDUSER.  Start the build from /usr/src as follows:

# export BUILDUSER=your-build-user      # only needed the first time
# make obj
# make build

To make a release(8), further setup is required:

* Mount a noperm filesystem on /dest, of size at least 1G, of type ffs
* The /dest mount point must be owned by BUILDUSER, with permissions 700.
* Create directories /dest/base and /dest/xbase owned by BUILDUSER.
* The RELEASEDIR must also be owned by BUILDUSER.

To build a base release, set DESTDIR=/dest/base and to build a xenocara
release, set DESTDIR=/dest/xbase.
@
text
@a274 40

<h3 id="r20161005">2016/10/06 - New build infrastructure,
<tt>noperm</tt> release process</h3>

The infrastructure to build the base system from source and to make a release
has changed.
The <tt>SUDO</tt> variable was removed from the base system makefiles and the
<tt>make build</tt> command now <b>must</b> be issued by root.
The makefiles will de-escalate privileges to <tt>BUILDUSER</tt> (as specified in
<a href="http://man.openbsd.org/mk.conf.5">mk.conf(5)</a>; defaults to
<tt>USER</tt>) whenever possible.
Before starting a build, make sure that <tt>/usr/obj</tt> or <tt>/usr/xobj</tt>
is empty and owned by <tt>BUILDUSER</tt>.

<p>
Start the build from <tt>/usr/src</tt> as follows:

<blockquote><pre>
# <b>export BUILDUSER=your-build-user</b>	# only needed the first time
# <b>make obj</b>
# <b>make build</b>
</pre></blockquote>

To make a <a href="http://man.openbsd.org/release.8">release(8)</a>, further
setup is required:

<ul>
  <li>Mount a <b>noperm filesystem</b> on <tt>/dest</tt>, of size at least
    <tt>1G</tt>, of type <tt>ffs</tt>, and with the <tt>noperm</tt>
    <a href="http://man.openbsd.org/mount.8#noperm">mount(8)</a> option set.
  <li>The <tt>/dest</tt> mount point must be owned by <tt>BUILDUSER</tt>, with
    permissions <tt>700</tt>.
  <li>Create directories <tt>/dest/base</tt> and <tt>/dest/xbase</tt> owned by
    <tt>BUILDUSER</tt>.
  <li>The <tt>RELEASEDIR</tt> must also be owned by <tt>BUILDUSER</tt>.
</ul>

To build a base release, set <tt>DESTDIR=/dest/base</tt> and to build a xenocara
release, set <tt>DESTDIR=/dest/xbase</tt>.

@


1.729
log
@firmwares -> firmware and some whitespace
@
text
@d275 40
d316 1
a316 1
<small>$OpenBSD: current.html,v 1.728 2016/10/04 13:01:01 espie Exp $</small>
@


1.728
log
@enough people finding out about new sigs the hard way, explain what's
going on in simple terms.
@
text
@a228 1

d262 1
d265 1
a265 1
Packages and firmwares are now signed with a more secure scheme.
d274 1
d276 1
a276 1
<small>$OpenBSD: current.html,v 1.727 2016/09/24 10:28:51 tb Exp $</small>
@


1.727
log
@typo: backed -> back
@
text
@d263 11
d275 1
a275 1
<small>$OpenBSD: current.html,v 1.726 2016/09/24 10:21:44 tb Exp $</small>
@


1.726
log
@some markup tweaks
@
text
@d230 1
a230 1
<h3 id="r20160923">2016/09/23 - sqlite3 moved backed to ports</h3>
d264 1
a264 1
<small>$OpenBSD: current.html,v 1.725 2016/09/24 10:07:44 tb Exp $</small>
@


1.725
log
@simplify: use a * instead of $(uname -p).  suggested by aja via sthen.
@
text
@d241 1
a241 1
rm /usr/lib/libsqlite3*  # see below
d245 1
a245 1
new packages.<p>
d248 1
d254 6
a259 6
<blockquote><tt>
$ pkg_info -S nss <br>
Information for inst:nss-3.26<br>
<br>
Signature: nss-3.26,@@nspr-4.12p0,c.89.1,nspr4.23.3,plc4.23.3,plds4.23.3,pthread.23.0,<b>sqlite3.<font color="#ee0000">33.0</font></b>,z.5.0
</tt></blockquote>
d264 1
a264 1
<small>$OpenBSD: current.html,v 1.724 2016/09/24 02:27:14 jsg Exp $</small>
@


1.724
log
@change the sqlite ph removal line to work on more archs
@
text
@d239 1
a239 1
rm /usr/libdata/perl5/site_perl/$(uname -p)-openbsd/sqlite3*.ph
d263 1
a263 1
<small>$OpenBSD: current.html,v 1.723 2016/09/23 09:47:42 sthen Exp $</small>
@


1.723
log
@Add sqlite3 notes to current.html. Summary:

rm /usr/bin/sqlite3
rm /usr/include/sqlite3*.h
rm /usr/lib/pkgconfig/sqlite3.pc
rm /usr/libdata/perl5/site_perl/amd64-openbsd/sqlite3*.ph
rm /usr/share/man/man1/sqlite3.1

# For normal users: wait for new packages before removing old libs.
# For bulk builders: you MUST clean before building packages.

rm /usr/lib/libsqlite3*
@
text
@d239 1
a239 1
rm /usr/libdata/perl5/site_perl/amd64-openbsd/sqlite3*.ph
d263 1
a263 1
<small>$OpenBSD: current.html,v 1.722 2016/09/20 10:50:51 tb Exp $</small>
@


1.722
log
@fix markup and a typo
@
text
@d51 1
d61 1
d75 1
d97 1
d108 1
d119 1
d126 1
d133 1
d163 1
d195 1
d204 1
d212 1
d228 34
d263 1
a263 1
<small>$OpenBSD: current.html,v 1.721 2016/09/19 18:59:59 tb Exp $</small>
@


1.721
log
@Add an entry for the switch of softraid crypto to bcrypt PBKDF

Original commit message:

Switch softraid crypto from PKCS5 PBKDF2 to bcrypt PBKDF.

New volumes will be created with bcrypt PBKDF, however existing volumes
will continue to use PKCS5 PBKDF2 until a passphrase change is made.

If you're booting from softraid crypto, ensure that your boot loader has
been upgraded to a version that supports bcrypt prior to changing your
passphrase. Also be aware that once the passphrase has been changed, an
older version of bioctl(8) (one that does not support bcrypt PBKDF) will
not be able to "unlock" the volume.
@
text
@d210 2
a211 1
The boot(8) versions should be at least 3.33 on amd64 and 3.31 on i386.
d217 1
a217 1
<small>$OpenBSD: current.html,v 1.720 2016/09/13 16:37:45 sthen Exp $</small>
@


1.720
log
@railo->lucee
@
text
@d201 14
d216 1
a216 1
<small>$OpenBSD: current.html,v 1.719 2016/09/09 23:17:45 ratchov Exp $</small>
@


1.719
log
@Fix order by moving /dev/sound* removal to the bottom. Thanks
to Raf Czlonka <rczlonka at gmail.com> for pointing this.
@
text
@d194 7
d202 1
a202 1
<small>$OpenBSD: current.html,v 1.716 2016/09/09 03:22:02 tb Exp $</small>
@


1.718
log
@remind to remove /dev/sound*
@
text
@a50 8
<h3 id="r20160909">2016/09/09 - /dev/sound removed</h3>

Remove unused device nodes:

<blockquote><pre>
rm -f /dev/sound*
</pre></blockquote>

d185 8
@


1.717
log
@one more <tt>
@
text
@d51 8
@


1.716
log
@fix date and some other copy paste errors.
general style clean up of recenet entries.
@
text
@d123 1
a123 1
to base under its new name acme-client.
d187 1
a187 1
<small>$OpenBSD: current.html,v 1.716 2016/09/09 03:19:24 theo Exp $</small>
@


1.715
log
@armv7 now has static PIE.
@
text
@d122 3
a124 2
letskencrypt, previously in ports/security, has been imported to base
under its new name acme-client. Adjust scripts/cronjobs as necessary.
d127 3
a129 2
The armv7 platform has been switched to
PIE (position-independent executables) by default.
d132 1
d135 2
a136 1
bsd.own.mk:
d138 1
a138 1
cd /usr/src/share/mk && make install
d140 1
d142 1
d145 2
a146 2
make -f Makefile.bsd-wrapper clean && make -f Makefile.bsd-wrapper obj && \
       make -f Makefile.bsd-wrapper depend && make -f Makefile.bsd-wrapper
d148 4
a151 2
make clean && make obj && make depend && make && make install
cd /usr/src/gnu/usr.bin/binutils-2.17 && make -f Makefile.bsd-wrapper install</pre></blockquote>
d153 3
a155 1
<a href="http://man.openbsd.org/OpenBSD-current/man8/release.8">release(8)</a>.
a156 1
<h3 id="20141222">2014/12/22 - armv7 now supports static PIE</h3>
d163 2
a164 1
STATICPIE_ARCH in bsd.own.mk:
d166 1
a166 1
cd /usr/src/share/mk && make install
d168 3
a170 1
Then, build and install rcrt0.o:
d173 1
a173 1
make clean && make obj && make depend && make && make install
d175 1
d177 1
d180 1
a180 1
make clean && make obj && make depend && make && make install
d182 1
d184 1
a184 1
<a href="http://man.openbsd.org/OpenBSD-current/man8/release.8">release(8)</a>.
d187 1
a187 1
<small>$OpenBSD: current.html,v 1.714 2016/09/06 06:15:58 tb Exp $</small>
@


1.714
log
@use [ports] label consistently
@
text
@d147 24
d172 1
a172 1
<small>$OpenBSD: current.html,v 1.713 2016/09/03 10:52:09 jsg Exp $</small>
@


1.713
log
@arm is now PIE
@
text
@d94 1
a94 1
<h3 id="r20160812">2016/08/12 - [packages] py-elasticsearch-curator update</h3>
d148 1
a148 1
<small>$OpenBSD: current.html,v 1.712 2016/09/01 13:23:43 sthen Exp $</small>
@


1.712
log
@letskencrypt->base
@
text
@d125 22
d148 1
a148 1
<small>$OpenBSD: current.html,v 1.711 2016/09/01 12:18:41 patrick Exp $</small>
@


1.711
log
@Document ABI break of OpenBSD/armv7 switching to ARM EABI.
@
text
@d120 5
d126 1
a126 1
<small>$OpenBSD: current.html,v 1.710 2016/08/28 22:52:21 tb Exp $</small>
@


1.710
log
@add back py-elasticsearch-curator CLI API changes
requested by sebastia@@
@
text
@d114 6
d121 1
a121 1
<small>$OpenBSD: current.html,v 1.708 2016/08/15 02:22:12 tb Exp $</small>
@


1.709
log
@this file is for -base, not packages, so remove the entry I did again.
@
text
@d94 10
@


1.708
log
@tls on openbsd.org is now real:
- link to https://www.openbsd.org from the sub-projects' pages
- make internal links relative
- switch link rel=canonical to https to please some search engines
"go ahead" from beck, "do it!!!!" tj
@
text
@a93 10
<h3 id="r20160812">2016/08/12 - [packages] py-elasticsearch-curator update</h3>

With the update of Elasticsearch Curator to the 4.x version, the CLI interface
changed.
Instead of parameters, yaml configuration files are used to steer actions of
curator.
Configuration file documentation can be found on the
<a href="https://www.elastic.co/guide/en/elasticsearch/client/curator/4.0/index.html">
curator reference pages</a>.

d105 1
a105 1
<small>$OpenBSD: current.html,v 1.707 2016/08/14 23:23:51 guenther Exp $</small>
@


1.707
log
@Note removal of the qdiv(3) and qabs(3) manpages
@
text
@d10 1
a10 1
<link rel="canonical" href="http://www.openbsd.org/faq/current.html">
d115 1
a115 1
<small>$OpenBSD: current.html,v 1.706 2016/08/12 08:15:05 tb Exp $</small>
@


1.706
log
@add [packages] marker + new sentence, new line.
fix a date and add some whitespace consistency.
@
text
@d104 9
d115 1
a115 1
<small>$OpenBSD: current.html,v 1.705 2016/08/12 07:02:28 sebastia Exp $</small>
@


1.705
log
@Mention the py-elasticsearch-curator update and the CLI API change.
@
text
@d52 1
d73 1
a73 1
<h3 id="r20160809">2016/08/10 - RELRO by default on all archs but luna88k</h3>
d94 1
a94 1
<h3 id="r20160812">2016/08/12 - py-elasticsearch-curator update</h3>
d96 5
a100 3
With the update of elasticsearch Curator to the 4.x version, the CLI interface
changed. Instead of parameters, yaml configuration files are used to steer
actions of curator. Configuration file documentation can be found on the
d106 1
a106 1
<small>$OpenBSD: current.html,v 1.704 2016/08/11 08:58:30 tb Exp $</small>
@


1.704
log
@tweak previous: rephrase slightly, remove one more NOMAN= and replace
bullet list with the usual FAQ style for lists of commands.

while there, zap some unneeded <p>'s and fix a misplaced </b>
@
text
@d93 9
d103 1
a103 1
<small>$OpenBSD: current.html,v 1.703 2016/08/11 07:28:55 guenther Exp $</small>
@


1.703
log
@No need for NOMAN in lib/csu
@
text
@a57 1
<p>
d65 1
a65 1
<li>Starting in 6.0, the installer sets the </b>/usr/local</b>
a70 1
<p>
d77 2
a78 3
Unlike other OSes,
this applies to <b>all</b> dynamic executables and libraries by default,
as well as to static PIE executables.
d80 12
a91 13
To upgrade over this,
starting from a system running 6.0-release or later:
<ul>
<li>Bring your source tree up to date
<li>cd /usr/src && make obj && make clean && make includes
<li>cd /usr/src/libexec/ld.so
<li>make SUBDIR= depend && make SUBDIR= && doas make SUBDIR= NOMAN= install
<li>cd /usr/src/lib/csu
<li>make depend && make && doas make install
<li>cd /usr/src/gnu/usr.bin/binutils-2.17
<li>make -f Makefile.bsd-wrapper && doas make -f Makefile.bsd-wrapper install
<li>cd /usr/src && make build
</ul>
d94 1
a94 1
<small>$OpenBSD: current.html,v 1.702 2016/08/11 07:25:09 guenther Exp $</small>
@


1.702
log
@Rewrite RELRO entry to (hopefully) be clearer about the benefit, and
explain how to upgrade over the change.  Oh, and mips64 is now relro too

prodded by jmc@@ and tb@@
@
text
@d91 1
a91 1
<li>make depend && make && doas make NOMAN= install
d98 1
a98 1
<small>$OpenBSD: current.html,v 1.701 2016/08/10 19:12:37 matthieu Exp $</small>
@


1.701
log
@Missing <body> opening tag.
@
text
@d74 1
a74 1
<h3 id="r20160809">2016/08/09 - RELRO by default on all archs but mips64 and m88k</h3>
d76 20
a95 5
The linker now lays out executables and libraries to use fewer mappings,
marking the data that can read-only after relocation with a special
section instead of "__got_start" and "__got_end" symbols.
This applies to <b>all</b> dynamic executables and libraries,
as well as static PIE executables.
d98 1
a98 1
<small>$OpenBSD: current.html,v 1.700 2016/08/10 05:46:46 guenther Exp $</small>
@


1.700
log
@Add RELRO
@
text
@d13 2
d83 1
a83 1
<small>$OpenBSD: current.html,v 1.699 2016/08/08 17:38:38 deraadt Exp $</small>
@


1.699
log
@mention W^X enforcement regime
@
text
@d72 8
d81 1
a81 1
<small>$OpenBSD: current.html,v 1.698 2016/08/04 00:59:29 tb Exp $</small>
@


1.698
log
@Now that both installation methods on upgrade60.html have been successfully
tested (including iwm), roll current.html.

The info for upgrading to snaps from way back is now on upgrade60.html.
If you're not yet past the ABI breaks, you shouldn't upgrade directly
from source anyway.
@
text
@d56 3
d60 10
d71 1
d73 1
a73 1
<small>$OpenBSD: current.html,v 1.697 2016/08/01 20:10:23 tb Exp $</small>
@


1.697
log
@minor tweaks found while working on upgrade60.html
@
text
@d32 1
a32 1
<a href="upgrade59.html">OpenBSD upgrade procedure</a>
a48 202
<h3 id="r20160307">2016/03/07 - lpd(8) default spool directory change</h3>
The
<a href="http://man.openbsd.org/lpd">lpd(8)</a>
top spool directory <tt>/var/spool/output</tt> is now only writable by root.
<br>
Point the <tt>sd</tt> path in
<a href="http://man.openbsd.org/printcap">printcap(5)</a>
to a subdirectory where the <tt>daemon</tt> group has write access.
It defaults to <tt>/var/spool/output/lpd</tt>.

<h3 id="r20160319">2016/03/19 - csu and ld.so update</h3>
The definitions of <tt>environ</tt> and <tt>__progname</tt> for dynamically
linked programs have been moved from the C startup code to
<a href="http://man.openbsd.org/ld.so">ld.so(1)</a>.
An updated <tt>ld.so</tt> must be built and installed before running
<tt>make build</tt>.

<blockquote><pre>
cd /usr/src/libexec/ld.so
make SUBDIR= obj
make SUBDIR= depend
make SUBDIR=
make SUBDIR= install
</pre></blockquote>

<h3 id="r20160331">2016/03/31 - changes in wscons and synaptics</h3>
The previous version of the synaptics driver won't work with a new
version of the kernel. Touchpad users must rebuild that driver.

<h3 id="r20160401">2016/04/01 - rcctl(8) syntax change</h3>
The keyword for listing enabled but stopped daemons with
<a href="http://man.openbsd.org/rcctl">rcctl(8)</a>
has changed from <tt>faulty</tt> to <tt>failed</tt>.

<blockquote><pre>
rcctl ls failed
</pre></blockquote>

<h3 id="r20160424">2016/04/24 - option WSDISPLAY_COMPAT_PCVT removed</h3>
The kernel option WSDISPLAY_COMPAT_PCVT and associated code have been removed.
You need an X server built after April 3 before booting a new kernel.

<h3 id="r20160426">2016/04/26 - softraid metadata version changed</h3>
The current softraid metadata version has been incremented as part of
implementing support for sector sizes other than 512 bytes. Since on-disk
metadata is automatically updated every time a softraid volume is mounted,
once you mount a softraid volume on a current kernel that volume will no
longer be recognized by older kernels.

<h3 id="r20160428">2016/04/28 - <tt>/dev/bpf[0-9]</tt> to be replaced with
<tt>/dev/bpf</tt></h3>
Device cloning was enabled for <a href="http://man.openbsd.org/bpf">bpf(4)</a>.
If you upgrade to -current from source or by untarring sets on a running
system, you need to finish up with

<blockquote><pre>
cd /dev &amp;&amp; ./MAKEDEV bpf
</pre></blockquote>

to generate the new <tt>/dev/bpf</tt> device node.

<h3 id="r20160502">2016/05/02 - clean out <tt>/usr/share/man</tt></h3>
Formerly, hard links were used to provide the same man page under several
different names.
These hard links are no longer needed and may get in the way.
Issue

<blockquote><pre>
rm -rf /usr/share/man
</pre></blockquote>

before upgrading to a new snapshot or building the system from source.
If you upgrade from source, don't forget the

<blockquote><pre>
cd /usr/src/etc &amp;&amp; doas env DESTDIR=/ make distrib-dirs
</pre></blockquote>

step before running <tt>make build</tt>.

<h3 id="r20160507">2016/05/07 - MAJOR ABI BREAK: csu, ld.so, libc, libpthread update</h3>
Handling of single-threaded programs is now closer to multi-threaded,
with ld.so and libc.a doing thread information base (TIB) allocation.
Threaded programs from before the
<a href="#r20160319">2016/03/19 csu and ld.so update</a>
will no longer run.
An updated <tt>ld.so</tt> must be built and installed before running
<tt>make build</tt>.

<blockquote><pre>
cd /usr/src
make obj
make cleandir		# REQUIRED
make includes
cd /usr/src/libexec/ld.so
make SUBDIR= obj
make SUBDIR= depend
make SUBDIR=
make SUBDIR= install
</pre></blockquote>

PowerPC has been updated to offset the TIB from the hardware register.
As a result, <b>all</b> threaded programs are broken until they have been
rebuilt with the new libc and libpthread.
perl must be built after building the libraries and before
building the rest of base.
These more convoluted steps are also needed when building with a base
that predates the <a href="#r20160319">2016/03/19 csu and ld.so update</a>.

<blockquote><pre>
cd /usr/src
make obj
make cleandir		# REQUIRED
make includes
cd /usr/src/libexec/ld.so
make SUBDIR= obj
make SUBDIR= depend
make SUBDIR=
make SUBDIR= install
cd /usr/src/lib/libc
make depend
make
make install NOMAN=1
cd /usr/src/lib/librthread
make depend
make
make install NOMAN=1
cd /usr/src/gnu/usr.bin/perl
make -f Makefile.bsd-wrapper depend
make -f Makefile.bsd-wrapper
make -f Makefile.bsd-wrapper NOMAN=1 install
</pre></blockquote>

<h3 id="r20160508">2016/05/08 - [packages] sysutils/runit default service
  directory change</h3>
Upstream moved back the default service directory to <tt>/service</tt>; to keep
on using <tt>/var/service</tt>, make a symlink:

<blockquote><pre>
ln -s /var/service /
</pre></blockquote>

<h3 id="r20160520">2016/05/20 - [packages] PostgreSQL major version update</h3>
PostgreSQL had a major version update.
Follow instructions in the pkg-readme to dump your database before
upgrading to a newer OS version and restore it after the update.

<h3 id="r20160523">2016/05/23 - ld.so update on sparc64</h3>
On sparc64, ld(1) will now create binaries with a read-only PLT.
Changes have been made to <a href="http://man.openbsd.org/ld.so">ld.so(1)</a>
to handle such binaries.
An updated <tt>ld.so</tt> must be built and installed before running
<tt>make build</tt>.

<h3 id="r20160527">2016/05/27 - fstab needs wxallowed flag on /usr/local</h3>
W^X violating programs are no longer allowed by default, but will have
to opt-in via some mechanisms which allow the violation.
These mechanisms are being introduced into the system one by one, in
cooperation with the ports development team.
The first mechanism is that filesystems containing violating programs must be
mounted using the <b>wxallowed</b> option, for instance:

<blockquote><pre>
01020304050607.h /usr/local ffs rw,nodev,nosuid,wxallowed 1 2
</pre></blockquote>

The base system has no W^X violating programs, but the ports tree
contains quite a few: chromium, mono, node, gnome, libreoffice, jdk, zeal, etc.
Progress in this area will be defined by repairing libraries and programs
so that they don't request <tt>PROT_WRITE | PROT_EXEC</tt> memory.
The library libffi (Used by python for instance) was the first to be fixed.
It is expected that most users will use the <b>wxallowed</b> option on
<tt>/usr/local</tt>, but developers who wish to assist in the effort of
repairing upstream software can keep it disabled and also use the
<b>kern.wxabort</b> option
(see <a href="http://man.openbsd.org/sysctl">sysctl(8)</a>) which helps
with debugging.

The upgrade process cannot automatically modify fstab to add this flag to
<tt>/usr/local</tt>; therefore it must be added by hand.
Some ports also perform W^X violations during build-time, so the same option
may be desireable on /usr/pobj or other directories.

<h3 id="r20160528">2016/05/28 - iwm(4) needs new firmware</h3>
The <a href="http://man.openbsd.org/iwm">iwm(4)</a> wifi driver needs
firmware with a newer major version.
If you plan to use that device to carry out an upgrade, run
<a href="http://man.openbsd.org/fw_update">fw_update(8)</a> <em>before</em>
rebooting onto the install kernel.

<h3 id="r20160630">2016/06/30 - doas.conf adjustment</h3>
Some uses of the keepenv keyword should be replaced with setenv.
A warning will be printed when necessary.

<h3 id="r20160713">2016/07/13 - [packages] OpenSMTPD-extras filters removal</h3>
Most filters were removed from the OpenSMTPD-extras distribution, as
they are not considered ready.
People who started using filters like <tt>filter-dkim-signer</tt>
already need to look for other alternatives in ports, e.g.
<tt>mail/dkimproxy</tt>.

<!-- 6.0 -->
d59 1
a59 1
<small>$OpenBSD: current.html,v 1.696 2016/08/01 15:43:25 tb Exp $</small>
@


1.696
log
@zap stray 'a'
@
text
@d185 1
a185 1
on using <tt>/var/service</tt>, install a symlink:
d247 1
a247 1
already, need to look for other alternatives in ports, e.g.
d261 1
a261 1
<small>$OpenBSD: current.html,v 1.695 2016/08/01 12:04:25 tb Exp $</small>
@


1.695
log
@help my future self with update60.html and mark the transition to
6.0-current with a small comment
@
text
@d216 1
a216 2
contains a quite a few: chromium, mono, node, gnome, libreoffice, jdk,
zeal, etc.
d261 1
a261 1
<small>$OpenBSD: current.html,v 1.694 2016/08/01 10:47:23 schwarze Exp $</small>
@


1.694
log
@run makewhatis(8) to update the mandoc.db(5) files
@
text
@d251 1
a252 1

d262 1
a262 1
<small>$OpenBSD: current.html,v 1.693 2016/07/13 20:25:36 jung Exp $</small>
@


1.693
log
@mention opensmtpd-extras filters removal

ok sthen giovanni
@
text
@a243 1

d251 9
d262 1
a262 1
<small>$OpenBSD: current.html,v 1.692 2016/06/30 13:44:26 tedu Exp $</small>
@


1.692
log
@Some uses of the keepenv keyword should be replaced with setenv.
A warning will be printed when necessary.
@
text
@d244 8
d254 1
a254 1
<small>$OpenBSD: current.html,v 1.691 2016/06/18 17:42:02 guenther Exp $</small>
@


1.691
log
@Extra work is required of those that skip some of the ABI steps
@
text
@d240 4
d246 1
a246 1
<small>$OpenBSD: current.html,v 1.690 2016/06/17 15:12:02 tb Exp $</small>
@


1.690
log
@unify spelling of 'man page'
@
text
@d155 2
d242 1
a242 1
<small>$OpenBSD: current.html,v 1.689 2016/06/07 16:50:23 tedu Exp $</small>
@


1.689
log
@doas.conf has been unchanged
@
text
@d111 1
a111 1
Formerly, hard links were used to provide the same manpage under several
d240 1
a240 1
<small>$OpenBSD: current.html,v 1.688 2016/06/06 18:20:57 tb Exp $</small>
@


1.688
log
@doas.conf(5): mention the following heads up from tedu:

A recent change to doas allowed using SETENV blocks in the config file. This
had a side effect of making = a special character. If your doas.conf file
contains = characters (such as for command args) they'll need to be quoted.
@
text
@a237 8
<h3 id="r20160606">2016/06/06 - doas.conf(5) syntax change</h3>
<a href="http://man.openbsd.org/doas">doas(1)</a> now allows using
<tt>setenv</tt> blocks in the config file.
This has the side effect of making <tt>=</tt> a special character.
If your <a href="http://man.openbsd.org/doas.conf">doas.conf(5)</a> file
contains <tt>=</tt> characters (such as for command arguments) they'll need to
be quoted.

d240 1
a240 1
<small>$OpenBSD: current.html,v 1.687 2016/05/28 16:01:45 sthen Exp $</small>
@


1.687
log
@current.html entry: If you're on old firmware, run fw_update before
booting the ramdisk kernel if you will use iwm(4) as a network source
during the update.
@
text
@d238 8
d248 1
a248 1
<small>$OpenBSD: current.html,v 1.686 2016/05/28 07:55:49 tb Exp $</small>
@


1.686
log
@some markup tweaks; new sentence - new line
@
text
@d231 7
d240 1
a240 1
<small>$OpenBSD: current.html,v 1.685 2016/05/27 19:49:37 deraadt Exp $</small>
@


1.685
log
@fix typo
@
text
@a201 1

d203 5
a207 5
to opt-in via some mechanisms which allow the violation.  These
mechanisms are being introduced into the system one by one, in
cooperation with the ports development team.  The first mechanism is
that filesystems containing violating programs must be mounted using
the <b>wxallowed</b> option, for instance:
d215 8
a222 7
zeal, etc.  Progress in this area will be defined by repairing
libraries and programs so that they don't request PROT_WRITE |
PROT_EXEC memory.  The library libffi (Used by python for instance) was
the first to be fixed.  It is expected that most users will use the
<b>wxallowed</b> option on /usr/local, but developers who wish to
assist in the effort of repairing upstream software can keep it
disabled and also use the <b>kern.wxabort</b> option
d226 3
a228 3
The upgrade process cannot automatically modify fstab to add this
flag to /usr/local; therefore it must be added by hand.  Some ports
also perform W^X violations during build-time, so the same option
d233 1
a233 1
<small>$OpenBSD: current.html,v 1.684 2016/05/27 19:47:22 deraadt Exp $</small>
@


1.684
log
@"wxallowed" is an important new fstab option everyone needs to be aware of.
@
text
@d218 2
a219 2
PROT_EXEC memory.  libffi (sed by python for instance) was the first
to be fixed.  It is expected that most users will use the
d233 1
a233 1
<small>$OpenBSD: current.html,v 1.683 2016/05/24 18:42:05 tb Exp $</small>
@


1.683
log
@new sentence; new line and other minor tweaks of the source
@
text
@d201 9
d211 1
a211 5
cd /usr/src/libexec/ld.so
make SUBDIR= obj
make SUBDIR= depend
make SUBDIR=
make SUBDIR= install
d214 17
d233 1
a233 1
<small>$OpenBSD: current.html,v 1.682 2016/05/23 15:00:30 kettenis Exp $</small>
@


1.682
log
@Warn sparc64 users that they need to update ld.so.
@
text
@a194 1

d196 4
a199 4
Changes have been made to
<a href="http://man.openbsd.org/ld.so">ld.so(1)</a>
to handle such binaries.  An updated <tt>ld.so</tt> must be built and
installed before running <tt>make build</tt>.
d211 1
a211 1
<small>$OpenBSD: current.html,v 1.681 2016/05/20 22:02:53 sthen Exp $</small>
@


1.681
log
@add a [packages] marker to sysutils/runit.

add a note that PostgreSQL had a major version update and thus
requires a dump before upgrading, and restore afterwards.
reminded by Johan Huldtgren.
@
text
@d194 16
d212 1
a212 1
<small>$OpenBSD: current.html,v 1.680 2016/05/08 09:37:12 tb Exp $</small>
@


1.680
log
@fix href. pointed out by heiko
@
text
@d180 1
a180 1
<h3 id="r20160508">2016/05/08 - sysutils/runit default service
d189 5
d196 1
a196 1
<small>$OpenBSD: current.html,v 1.679 2016/05/08 09:22:37 tb Exp $</small>
@


1.679
log
@fix date; minor formatting tweaks
@
text
@d133 1
a133 1
<a href="r20160319">2016/03/19 csu and ld.so update</a>
d191 1
a191 1
<small>$OpenBSD: current.html,v 1.678 2016/05/08 09:06:45 jca Exp $</small>
@


1.678
log
@Add notes for runit users.
@
text
@a149 2
<p>

d180 1
a180 1
<h3 id="r20160516">2016/05/16 - sysutils/runit default service
d182 6
a187 5
Upstream moved back the default directory to /service; to keep on using
/var/service, install a symlink:
<pre>
  # ln -s /var/service /
</pre>
d191 1
a191 1
<small>$OpenBSD: current.html,v 1.677 2016/05/07 22:08:46 guenther Exp $</small>
@


1.677
log
@PowerPC command were wrong: must only build libc and libpthread.

LARTed by deraadt@@
@
text
@d182 8
d192 1
a192 1
<small>$OpenBSD: current.html,v 1.676 2016/05/07 20:26:25 guenther Exp $</small>
@


1.676
log
@Make sure people cleandir when doing the TIB update
@
text
@d168 1
a168 1
cd /usr/src/lib
d172 1
a172 1
cd /usr/src/gnu/lib
d184 1
a184 1
<small>$OpenBSD: current.html,v 1.675 2016/05/07 19:23:39 guenther Exp $</small>
@


1.675
log
@Update instructions for the TIB change
@
text
@d140 3
a142 1
make obj && make includes
d161 1
d184 1
a184 1
<small>$OpenBSD: current.html,v 1.674 2016/05/05 20:55:17 tb Exp $</small>
@


1.674
log
@tweak previous, discussed with sthen
@
text
@d129 50
d181 1
a181 1
<small>$OpenBSD: current.html,v 1.673 2016/05/05 20:23:00 sthen Exp $</small>
@


1.673
log
@extra bit re: /dev/bpf

-If you upgrade to -current from source, you need to run
+If you upgrade to -current from source or by untarring sets on a running
+system, you need to run
@
text
@d102 1
a102 1
system, you need to run
d108 1
a108 1
to generate the new <tt>/dev/bpf</tt> device node after the build is complete.
d131 1
a131 1
<small>$OpenBSD: current.html,v 1.672 2016/05/03 08:34:27 tb Exp $</small>
@


1.672
log
@Deal with mlinks removal:
1. everybody should do 'rm -rf /usr/share/man'.
2. upgrading from source needs 'env DESTDIR=/ make distrib-dirs'.
While there, clean up some markup, fix some typos.

original version from schwarze@@ with ok tj@@, sthen@@, ian@@
I concur deraadt@@
@
text
@d101 2
a102 1
If you upgrade to -current from source, you need to run
d131 1
a131 1
<small>$OpenBSD: current.html,v 1.671 2016/05/02 11:48:41 tb Exp $</small>
@


1.671
log
@If you upgrade from source, you need to do './MAKEDEV bpf' in /dev
to prepare for natano@@'s upcoming bpf* -> bpf conversions.

ok natano@@
@
text
@a48 1

d60 1
a60 1
The definitions of <tt>environ</tt> and <tt>__progname</tt> for dynamicly
d64 1
a64 1
make build.
d82 1
a90 2
<p>

a96 1
<p>
d107 21
a127 1
to generate the new <tt>/dev/bpf</tt> device node.
a128 1

d130 1
a130 1
<small>$OpenBSD: current.html,v 1.670 2016/04/26 14:27:00 krw Exp $</small>
@


1.670
log
@Mention that softraid metadata version has been incremented. So
old kernels can't access softraid volumes that have been mounted
on -current kernels.

ok sthen@@
@
text
@d66 1
d101 12
d114 1
a114 1
<small>$OpenBSD: current.html,v 1.669 2016/04/26 13:03:30 tb Exp $</small>
@


1.669
log
@fix a typo and try to improve the wording a bit
@
text
@d91 9
d101 1
a101 1
<small>$OpenBSD: current.html,v 1.668 2016/04/26 12:52:04 krw Exp $</small>
@


1.668
log
@It's 2016, not 2014.
@
text
@d88 2
a89 2
You need to have a recent enough (built after april, 3)  X server before
rebooing a new kernel.
d92 1
a92 1
<small>$OpenBSD: current.html,v 1.667 2016/04/24 17:33:36 matthieu Exp $</small>
@


1.667
log
@kernel option WSDISPLAY_COMPAT_PCVT removed.
@
text
@d86 1
a86 1
<h3 id="r20160424">2014/04/24 - option WSDISPLAY_COMPAT_PCVT removed</h3>
d92 1
a92 1
<small>$OpenBSD: current.html,v 1.666 2016/04/21 02:52:03 tj Exp $</small>
@


1.666
log
@remove references to faq section numbers.
@
text
@d86 4
d92 1
a92 1
<small>$OpenBSD: current.html,v 1.665 2016/04/17 15:55:35 tj Exp $</small>
@


1.665
log
@move [faq index] link to the top right corner.
@
text
@a5 1
<meta name= "description"   content= "the OpenBSD FAQ page">
d31 1
d37 2
a38 2
Make sure you have read and understood
<a href="faq5.html">FAQ 5 - Building the System from Source</a>
d88 1
a88 1
<small>$OpenBSD: current.html,v 1.664 2016/04/15 20:39:49 tb Exp $</small>
@


1.664
log
@use short form man links in the faq and fix a few broken links
@
text
@d18 3
a23 2
<a href= "index.html">[FAQ Index]</a>
<p>
d88 1
a88 1
<small>$OpenBSD: current.html,v 1.663 2016/04/01 09:31:54 ajacoutot Exp $</small>
@


1.663
log
@Document rcctl ls faulty->failed

ok sthen@@
@
text
@d51 1
a51 1
<a href="http://man.openbsd.org/?query=lpd">lpd(8)</a>
d55 1
a55 1
<a href="http://man.openbsd.org/?query=printcap">printcap(5)</a>
d62 1
a62 1
<a href="http://man.openbsd.org/?query=ld.so">ld.so(1)</a>.
d79 1
a79 1
<a href="http://man.openbsd.org/?query=rcctl">rcctl(8)</a>
d87 1
a87 1
<small>$OpenBSD: current.html,v 1.662 2016/03/31 02:06:29 bru Exp $</small>
@


1.662
log
@synaptics update
@
text
@d77 8
d87 1
a87 1
<small>$OpenBSD: current.html,v 1.661 2016/03/29 01:27:38 tb Exp $</small>
@


1.661
log
@new openbsd faq style. joint with tj and validator.w3.org
@
text
@d73 4
d79 1
a79 1
<small>$OpenBSD: current.html,v 1.660 2016/03/27 19:52:09 sthen Exp $</small>
@


1.660
log
@add a small sprinkling of css to improve readability in the faq, ok tj@@ tb@@
@
text
@d4 1
a4 1
<title>Following -current</title>
d14 1
a14 1
<body bgcolor= "#ffffff" text= "#000000">
d16 4
a19 3
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">
</a>

a20 1
<font color= "#0000e0">
d22 1
a22 4
</font>

<h1><font color="#e00000">Following <i>-current</i> and using snapshots</font></h1>
<hr>
d75 1
a75 1
<small>$OpenBSD: current.html,v 1.659 2016/03/27 11:41:15 tb Exp $</small>
@


1.659
log
@remove 5.8 -> 5.9 stuff, this info is now available on upgrade59.html

requested by tj@@ a few days ago

while there, add some man page links and adjust some markup
@
text
@d9 2
d78 1
a78 1
<small>$OpenBSD: current.html,v 1.658 2016/03/25 05:13:32 tb Exp $</small>
@


1.658
log
@the intention was to purge the index, so do it.

clarified by deraadt@@
@
text
@d25 2
a26 2
Active OpenBSD development is known as the "<a href="faq5.html#Flavors">
-current</a>" branch.
d31 4
a34 2
In general, it's far better to use the OpenBSD "upgrade" procedure with a
newer snapshot, as developers will have gone through the trouble for you already.
d42 1
a42 1
You should ALWAYS use a snapshot as the starting point for running
a49 235
<h3 id="r20150822">2015/08/22 - [xenocara] libdrm updated</h3>
libdrm has been updated to a new version, moving a few files around.
As a consequence, old files should be removed:
<pre>
         rm -f /usr/X11R6/include/intel_*.h
	 rm -f /usr/X11R6/include/r600_pci_ids.h
	 rm -f /usr/X11R6/include/radeon_*.h
</pre>
<h3 id="r20150825">2015/08/25 - [ports] security/cfs removed</h3>
The security/cfs ports has been removed, users are encouraged to use
another data encryption method.
Possible alternatives are softraid(4) CRYPTO, encrypted vnd(4) devices or
the security/encfs port.
To remove an existing cfs package, use:
<pre>
	pkg_delete cfs
</pre>

<h3 id="r20150911">2015/09/11 - config(8) update</h3>
An up to date
<a href="http://man.openbsd.org/?query=config&amp;sec=8">
config(8)</a> is needed to build kernels.
After updating the source tree, a new config(8) can be built and installed:
<pre>
	cd /usr/src/usr.sbin/config
	make obj &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre>
Afterwards, any existing kernel compilation directories must be
rebuilt after running config again.
Refer to
<a href="http://man.openbsd.org/?query=release&amp;sec=8">
release(8)</a> for details.

<h3 id="r20150912">2015/09/12 - ifmedia extended to 64 bits</h3>

The ifmedia options word has been extended to 64 bits.
This changes numbers of the SIOCSIFMEDIA and SIOCGIFMEDIA ioctls and
grows struct ifmediareq.
Upgrading from snapshots is recommended.
Old ifconfig and dhclient binaries are able to configure addresses on
interfaces but are unable to display or change media settings.
When upgrading from source, ifconfig and dhclient must be recompiled
with new headers to run properly on top of a new kernel.
This will happen automatically during a normal 'make build'.
In case neither snapshots nor 'make build' can be used, the manual steps are:
<pre>
	install -m 444 -o root -g bin /usr/src/sys/net/if.h /usr/include/net/if.h
	install -m 444 -o root -g bin /usr/src/sys/net/if_media.h /usr/include/net/if_media.h
	install -m 444 -o root -g bin /usr/src/sys/sys/sockio.h /usr/include/sys/sockio.h
	cd /usr/src/sbin/ifconfig
	make obj
	make depend
	make
	make install
	cd /usr/src/sbin/dhclient
	make obj
	make depend
	make
	make install
</pre>

Some additional libraries and applications must also be recompiled.
Run a full 'make build' to ensure everything is in order.

<h3 id="r20150918">2015/09/18 - [ports] php-fpm rc script renamed</h3>

To allow installing multiple versions of php-fpm on the same system,
the rc script has been renamed to include the version number.
If you are using this, modify references to php_fpm in /etc/rc.conf.local
to e.g. php56_fpm.

<h3 id="r20151019">2015/10/19 - [xenocara] freetype update</h3>

Freetype was updated to version 2.6.1, which causes header files to be moved
around.
As a result, some old files needs to be removed manually:
<pre>
	cd /usr/X11R6/include/freetype2
	rm -rf config
	rm -f freetype.h ftadvanc.h ftbbox.h ftbdf.h ftbitmap.h ftbzip2.h \
            ftcache.h ftcffdrv.h ftchapters.h ftcid.h fterrdef.h \
            fterrors.h ftfntfmt.h ftgasp.h ftglyph.h ftgxval.h ftgzip.h \
            ftimage.h ftincrem.h ftlcdfil.h ftlist.h ftlzw.h ftmac.h \
            ftmm.h ftmodapi.h ftmoderr.h ftotval.h ftoutln.h ftpfr.h \
            ftrender.h ftsizes.h ftsnames.h ftstroke.h ftsynth.h \
            ftsystem.h fttrigon.h fttypes.h ftwinfnt.h t1tables.h \
            ttnameid.h tttables.h tttags.h ttunpat.h
</pre>

<h3 id="r20151023">2015/10/23 - ntpd.conf(5) remove rtable for server</h3>

In ntpd.conf(5), the rtable option was removed from the "server" and
"servers".
Users of "server * rtable X" will need to switch to launching ntpd with

<pre>
	# route -T X exec /usr/sbin/ntpd
</pre>

<h3 id="r20151024">2015/10/24 - [ports] node module ports removed</h3>
All modules for lang/node have been removed in favor of directly using
npm.
<p>
Native modules need to be built with "-std=gnu++0x", so npm internally sets
CXX=eg++ when building native modules.
</p>
To remove any installed modules:
<pre>
	for i in node-always node-async node-bcrypt node-bindings \
		node-buffer-writer node-canvas node-cloned node-daemon \
		node-expresso node-fibers node-generic-pool node-gir \
		node-java node-mnm node-pg node-rmdir node-sqlite3 \
		node-syslog node-typescript coffeescript; do
		pkg_delete $i
	done
</pre>

<h3 id="r20151026">2015/10/26 - [ports] puppetboard configuration update</h3>
The default configuration file (<code>default_settings.py</code>) format has
been changed and needs to be merged with <code>default_settings.py.dist</code>
before restarting the <code>puppetboard</code> service.

<h3 id="r20151116">2015/11/16 - /dev/tun -> /dev/tap</h3>
<a href="http://man.openbsd.org/?query=tun&amp;sec=4">tun(4)</a>
was previously a "dual mode" device.
By default it would act as a layer-3 "routed" device, but by use
of the "link0" flag it would change to a layer-2 "ethernet" mode.
This layer-2 mode has now been has been split off to a separate
<a href="http://man.openbsd.org/?query=tap&amp;sec=4">tap(4)</a>
device.
Make sure you have either updated from an install kernel or re-run
<a href="http://man.openbsd.org/?query=MAKEDEV&amp;sec=8">MAKEDEV(8)</a>
to create the new /dev/tap* device nodes.
For some use cases (e.g. ssh tunnel-forwarding run as a non-root user),
permissions on the device nodes would have been modified; these should
be applied to the new device nodes as necessary.
"hostname.tun*" files using the "link0" flag should be moved to
"hostname.tap*" instead, and the flag should be removed.
Other configuration may need to be adjusted to use the new device
name, for example for software like QEMU, OpenVPN or SIMH.
Networking configuration (bridges, PF) referring to these devices
may also need to change.

<h3 id="r20151130">2015/11/30 - smtpd tables removed</h3>
Some smtpd table backends have been moved to ports and can be removed:
<pre>
	rm -f /usr/libexec/smtpd/table-ldap
	rm -f /usr/libexec/smtpd/table-passwd
	rm -f /usr/libexec/smtpd/table-sqlite
	rm -f /usr/share/man/man5/table_passwd.5
</pre>
People requiring these backends should install the opensmtpd-extras main
package.

<h3 id="r20151203">2015/12/03 - termcap.db and terminfo.db removed</h3>
Compiled termcap.db and terminfo.db files are no longer used and can be
removed:
<pre>
	rm -f /usr/share/misc/termcap.db /usr/share/misc/terminfo.db
</pre>

<h3 id="r20151203a">2015/12/03 - vmmctl(8) and vmm.conf(5) renamed</h3>
The vmmctl(8) program has been renamed to vmctl(8) and the vmm.conf(5)
manpage has been renamed to vm.conf(5).
The old files are no longer used and can be removed:
<pre>
	rm -f /usr/sbin/vmmctl
	rm -f /usr/share/man/man8/vmmctl.8
	rm -f /usr/share/man/man5/vmm.conf.5
</pre>

<h3 id="r20151205">2015/12/05 - netstart(8) options "multicast_host" and
	"multicast_router" merged</h3>
Options "multicast_host" and "multicast_router" have been merged into a
single "multicast" option.
In order to enable multicast the following line should be added in
rc.conf.local(8).
<pre>
	multicast=YES
</pre>
If you previously set these options to something other than "YES" or the
interface carrying the default route, you will also need to add a static
route for 224.0.0.0/4.

<h3 id="r20151207">2015/12/07 - smtpd makemap(8) merged into smtpctl(8)</h3>
makemap(8) is now merged into smtpctl(8) and can be removed:
<pre>
	rm -f /usr/libexec/smtpd/makemap
</pre>

<h3 id="r20151212">2015/12/12 - smtpd.conf(5) "pki" keyword change and "ca"
keyword addition</h3>
In smtpd.conf(5), the "pki" keyword no longer accepts a "ca" parameter.
Custom CA certificates must be declared using the new "ca" keyword:
<pre>
	ca mail.example.org certificate "/etc/mail/CA.pem"
</pre>

<h3 id="r20151227">2015/12/27 - amd64 and i386 support for
rdseed instruction</h3>
Binutils needs to be built and installed before building an amd64 or i386 kernel
to install an assembler with support for the rdseed instruction.
<pre>
	cd /usr/src/gnu/usr.bin/binutils-2.17
	make -f Makefile.bsd-wrapper obj
	make -f Makefile.bsd-wrapper
	make -f Makefile.bsd-wrapper install
</pre>

<h3 id="r20151231">2015/12/31 - [ports] gophernicus moved</h3>
<em>in.gophernicus</em> moved from <tt>/usr/local/sbin/</tt> to
<tt>/usr/local/libexec</tt>.
Please remember to update your <tt>/etc/inetd.conf</tt> accordingly.

<h3 id="r20160105">2016/01/05 - pf.conf(5) <em>set debug</em> syntax change</h3>
<em>set debug</em> no longer accepts the <tt>none</tt>, <tt>urgent</tt>,
<tt>misc</tt> and <tt>loud</tt> arguments, which were deprecated several
releases ago.
Use <tt>emerg</tt>, <tt>alert</tt>, <tt>crit</tt>, <tt>err</tt>,
<tt>warning</tt>, <tt>notice</tt>, <tt>info</tt> or <tt>debug</tt> instead.
Change this before updating, or your pf.conf will not load.

<h3 id="r20160106">2016/01/06 - pledge(2) path whitelist disabled</h3>
pledge(2) will now return an error if a path whitelist is specified.
As the pledge(2) call in tsort(1) specified a path whitelist and is used by
make build, it must be built and installed before running make build.
<pre>
	cd /usr/src/usr.bin/tsort
	make clean
	make obj
	make depend
	make
	make install
</pre>

d51 3
a53 1
The lpd(8) top spool directory (/var/spool/output) is now only writable by root.
d55 4
a58 3
Make sure to point the <b>sd</b> path in /etc/printcap(5) to a subdirectory
where the <b>daemon</b> group has write access
(defaults to <tt>/var/spool/output/lpd</tt>).
d62 2
a63 1
linked programs have been moved from the C startup code to <tt>ld.so</tt>.
d66 7
a72 7
<pre>
	cd /usr/src/libexec/ld.so
	make SUBDIR= obj
	make SUBDIR= depend
	make SUBDIR=
	make SUBDIR= install
</pre>
d76 1
a76 1
<small>$OpenBSD: current.html,v 1.657 2016/03/25 05:06:00 tb Exp $</small>
@


1.657
log
@remove conflict markers
@
text
@d16 1
a21 36
<p>

<h1><font color="#e00000">Following <i>-current</i></font></h1>
<hr>

<h3>Table of Contents</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Oldest on top... -->
<!-- New additions go on the bottom, please -->
<li><a href="#r20150822">2015/08/22 - [xenocara] libdrm update</a>
<li><a href="#r20150825">2015/08/25 - [ports] security/cfs removed</a>
<li><a href="#r20150911">2015/09/11 - config(8) update</a>
<li><a href="#r20150912">2015/09/12 - ifmedia extended to 64 bits</a>
<li><a href="#r20150918">2015/09/18 - [ports] php-fpm rc script renamed</a>
<li><a href="#r20151019">2015/10/19 - [xenocara] freetype update</a>
<li><a href="#r20151023">2015/10/23 - ntpd.conf(5) remove rtable for server</a>
<li><a href="#r20151024">2015/10/24 - [ports] node module ports removed</a>
<li><a href="#r20151026">2015/10/26 - [ports] puppetboard configuration update</a>
<li><a href="#r20151116">2015/11/16 - /dev/tun -> /dev/tap</a>
<li><a href="#r20151130">2015/11/30 - smtpd tables removed</a>
<li><a href="#r20151203">2015/12/03 - termcap.db and terminfo.db removed</a>
<li><a href="#r20151203a">2015/12/03 - vmmctl(8) and vmm.conf(8) renamed</a>
<li><a href="#r20151205">2015/12/05 - netstart(8) options "multicast_host" and
	"multicast_router" merged</a>
<li><a href="#r20151207">2015/12/07 - smtpd makemap(8) merged into smtpctl(8)</a>
<li><a href="#r20151212">2015/12/12 - smtpd.conf(5) "pki" keyword change and "ca" keyword addition</a>
<li><a href="#r20151227">2015/12/27 - amd64 and i386 support for rdseed instruction</a>
<li><a href="#r20151231">2015/12/31 - [ports] gophernicus moved</a>
<li><a href="#r20160105">2016/01/05 - pf.conf(5) <em>set debug</em> syntax change</a>
<li><a href="#r20160106">2016/01/06 - pledge(2) path whitelist disabled</a>
<li><a href="#r20160307">2016/03/07 - lpd(8) spool directory change</a>
<li><a href="#r20160319">2016/03/19 - csu and ld.so update</a>
</ul>

d305 1
a305 1
<small>$OpenBSD: current.html,v 1.656 2016/03/25 03:41:44 deraadt Exp $</small>
@


1.656
log
@improve lead text, with tj
@
text
@a15 2
<<<<<<< current.html
=======
a55 1
>>>>>>> 1.654
d340 1
a340 1
<small>$OpenBSD: current.html,v 1.655 2016/03/25 03:12:51 deraadt Exp $</small>
@


1.655
log
@delete massive header, ok tj
@
text
@d7 2
a8 1
<meta name= "copyright"     content= "This document copyright 2005-2015 by OpenBSD">
d63 8
a70 9
This document is for people who wish to follow <i>-current</i>.
It contains information about changes from 5.8-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 5.7 or earlier, or people
wishing to follow <a href="../stable.html"><i>-stable</i></a>.

<p>
If you wish to upgrade to 5.8-release or 5.8-stable from previous
versions, see the <a href="upgrade58.html">upgrade guide</a> instead,
as what is here does not apply to 5.8.
d343 1
a343 1
<small>$OpenBSD: current.html,v 1.654 2016/03/22 10:54:47 sthen Exp $</small>
@


1.654
log
@fix URIs, the / before querystring isn't optional, if it isn't fixed up
by the browser the server returns 400 Bad Request
@
text
@d15 2
d57 1
d59 1
a61 2
<!-- XXXversion -->
<h2 id="Intro">Introduction</h2>
d343 1
a343 1
<small>$OpenBSD: current.html,v 1.653 2016/03/21 21:16:46 tb Exp $</small>
@


1.653
log
@anchors must not start with a digit, so prepend the letter 'r' for
'revision' for the lack of a better idea. while there, add some
escaping to manual links so the document passes the validator.w3.org
test. wrap some long lines and start new sentences on new lines.

based on a diff from lists () wrant ! com, thanks!
@
text
@d104 1
a104 1
<a href="http://man.openbsd.org?query=config&amp;sec=8">
d114 1
a114 1
<a href="http://man.openbsd.org?query=release&amp;sec=8">
d207 1
a207 1
<a href="http://man.openbsd.org?query=tun&amp;sec=4">tun(4)</a>
d212 1
a212 1
<a href="http://man.openbsd.org?query=tap&amp;sec=4">tap(4)</a>
d215 1
a215 1
<a href="http://man.openbsd.org?query=MAKEDEV&amp;sec=8">MAKEDEV(8)</a>
d341 1
a341 1
<small>$OpenBSD: current.html,v 1.652 2016/03/21 13:49:47 tb Exp $</small>
@


1.652
log
@add missing </a> tag, from lists () wrant ! com

while there, zap some trailing whitespace
@
text
@d31 14
a44 14
<li><a href="#20150822">2015/08/22 - [xenocara] libdrm update</a>
<li><a href="#20150825">2015/08/25 - [ports] security/cfs removed</a>
<li><a href="#20150911">2015/09/11 - config(8) update</a>
<li><a href="#20150912">2015/09/12 - ifmedia extended to 64 bits</a>
<li><a href="#20150918">2015/09/18 - [ports] php-fpm rc script renamed</a>
<li><a href="#20151019">2015/10/19 - [xenocara] freetype update</a>
<li><a href="#20151023">2015/10/23 - ntpd.conf(5) remove rtable for server</a>
<li><a href="#20151024">2015/10/24 - [ports] node module ports removed</a>
<li><a href="#20151026">2015/10/26 - [ports] puppetboard configuration update</a>
<li><a href="#20151116">2015/11/16 - /dev/tun -> /dev/tap</a>
<li><a href="#20151130">2015/11/30 - smtpd tables removed</a>
<li><a href="#20151203">2015/12/03 - termcap.db and terminfo.db removed</a>
<li><a href="#20151203a">2015/12/03 - vmmctl(8) and vmm.conf(8) renamed</a>
<li><a href="#20151205">2015/12/05 - netstart(8) options "multicast_host" and
d46 8
a53 8
<li><a href="#20151207">2015/12/07 - smtpd makemap(8) merged into smtpctl(8)</a>
<li><a href="#20151212">2015/12/12 - smtpd.conf(5) "pki" keyword change and "ca" keyword addition</a>
<li><a href="#20151227">2015/12/27 - amd64 and i386 support for rdseed instruction</a>
<li><a href="#20151231">2015/12/31 - [ports] gophernicus moved</a>
<li><a href="#20160105">2016/01/05 - pf.conf(5) <em>set debug</em> syntax change</a>
<li><a href="#20160106">2016/01/06 - pledge(2) path whitelist disabled</a>
<li><a href="#20160307">2016/03/07 - lpd(8) spool directory change</a>
<li><a href="#20160319">2016/03/19 - csu and ld.so update</a>
d84 1
a84 1
<h3 id="20150822">2015/08/22 - [xenocara] libdrm updated</h3>
d92 1
a92 1
<h3 id="20150825">2015/08/25 - [ports] security/cfs removed</h3>
d94 4
a97 3
another data encryption method.  Possible alternatives are softraid(4)
CRYPTO, encrypted vnd(4) devices or the security/encfs port.  To remove
an existing cfs package, use:
d102 1
a102 1
<h3 id="20150911">2015/09/11 - config(8) update</h3>
d104 1
a104 1
<a href="http://man.openbsd.org?query=config&sektion=8">
d114 1
a114 1
<a href="http://man.openbsd.org?query=release&sektion=8">
d117 1
a117 1
<h3 id="20150912">2015/09/12 - ifmedia extended to 64 bits</h3>
d121 2
a122 1
grows struct ifmediareq. Upgrading from snapshots is recommended.
d148 1
a148 1
<h3 id="20150918">2015/09/18 - [ports] php-fpm rc script renamed</h3>
d155 1
a155 1
<h3 id="20151019">2015/10/19 - [xenocara] freetype update</h3>
d158 2
a159 1
around. As a result, some old files needs to be removed manually:
d173 1
a173 1
<h3 id="20151023">2015/10/23 - ntpd.conf(5) remove rtable for server</h3>
d176 2
a177 2
"servers".  Users of "server * rtable X" will need to switch to
launching ntpd with
d183 1
a183 1
<h3 id="20151024">2015/10/24 - [ports] node module ports removed</h3>
d187 2
a188 1
Native modules need to be built with "-std=gnu++0x", so npm internally sets CXX=eg++ when building native modules.
d201 1
a201 1
<h3 id="20151026">2015/10/26 - [ports] puppetboard configuration update</h3>
d206 2
a207 2
<h3 id="20151116">2015/11/16 - /dev/tun -> /dev/tap</h3>
<a href="http://man.openbsd.org?query=tun&sektion=4">tun(4)</a>
d212 1
a212 1
<a href="http://man.openbsd.org?query=tap&sektion=4">tap(4)</a>
d215 1
a215 1
<a href="http://man.openbsd.org?query=MAKEDEV&sektion=8">MAKEDEV(8)</a>
d227 1
a227 1
<h3 id="20151130">2015/11/30 - smtpd tables removed</h3>
d238 1
a238 1
<h3 id="20151203">2015/12/03 - termcap.db and terminfo.db removed</h3>
d245 1
a245 1
<h3 id="20151203a">2015/12/03 - vmmctl(8) and vmm.conf(5) renamed</h3>
d255 1
a255 1
<h3 id="20151205">2015/12/05 - netstart(8) options "multicast_host" and
d258 3
a260 2
single "multicast" option.  In order to enable multicast the
following line should be added in rc.conf.local(8).
d268 1
a268 1
<h3 id="20151207">2015/12/07 - smtpd makemap(8) merged into smtpctl(8)</h3>
d274 2
a275 1
<h3 id="20151212">2015/12/12 - smtpd.conf(5) "pki" keyword change and "ca" keyword addition</h3>
d282 4
a285 2
<h3 id="20151227">2015/12/27 - amd64 and i386 support for rdseed instruction</h3>
Binutils needs to be built and installed before building an amd64 or i386 kernel to install an assembler with support for the rdseed instruction.
d293 3
a295 2
<h3 id="20151231">2015/12/31 - [ports] gophernicus moved</h3>
<em>in.gophernicus</em> moved from <tt>/usr/local/sbin/</tt> to <tt>/usr/local/libexec</tt>.
d298 4
a301 3
<h3 id="20160105">2016/01/05 - pf.conf(5) <em>set debug</em> syntax change</h3>
<em>set debug</em> no longer accepts the <tt>none</tt>, <tt>urgent</tt>, <tt>misc</tt> and
<tt>loud</tt> arguments, which were deprecated several releases ago.
d303 2
a304 2
<tt>warning</tt>, <tt>notice</tt>, <tt>info</tt> or <tt>debug</tt>
instead. Change this before updating, or your pf.conf will not load.
d306 1
a306 1
<h3 id="20160106">2016/01/06 - pledge(2) path whitelist disabled</h3>
d319 1
a319 1
<h3 id="20160307">2016/03/07 - lpd(8) default spool directory change</h3>
d322 3
a324 2
Make sure to point the <b>sd</b> path in /etc/printcap(5) to a subdirectory where the
<b>daemon</b> group has write access (default to /var/spool/output/lpd).
d326 1
a326 1
<h3 id="20160319">2016/03/19 - csu and ld.so update</h3>
d341 1
a341 1
<small>$OpenBSD: current.html,v 1.651 2016/03/21 05:46:21 beck Exp $</small>
@


1.651
log
@change http://www.openbsd.org/cgi-bin/man.cgi to be http://man.openbsd.org
this points stuff to the new place and gets us ready to deprecate the old
place we did this.
@
text
@d53 1
a53 1
<li><a href="#20160319">2016/03/19 - csu and ld.so update
d124 1
a124 1
with new headers to run properly on top of a new kernel. 
d184 1
a184 1
Native modules need to be built with "-std=gnu++0x", so npm internally sets CXX=eg++ when building native modules. 
d270 2
a271 1
In smtpd.conf(5), the "pki" keyword no longer accepts a "ca" parameter. Custom CA certificates must be declared using the new "ca" keyword:
d330 1
a330 1
<small>$OpenBSD: current.html,v 1.650 2016/03/20 02:33:23 guenther Exp $</small>
@


1.650
log
@Need to build ld.so first
@
text
@d103 1
a103 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">
d113 1
a113 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">
d203 1
a203 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tun&sektion=4">tun(4)</a>
d208 1
a208 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tap&sektion=4">tap(4)</a>
d211 1
a211 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MAKEDEV&sektion=8">MAKEDEV(8)</a>
d329 1
a329 1
<small>$OpenBSD: current.html,v 1.649 2016/03/08 00:07:50 ajacoutot Exp $</small>
@


1.649
log
@Mention lpd(8) top spool dir permissions change.

ok sthen@@ deraadt@@
@
text
@d53 1
d307 1
d314 13
d329 1
a329 1
<small>$OpenBSD: current.html,v 1.648 2016/01/11 04:37:13 jsg Exp $</small>
@


1.648
log
@Add a note about the pledge(2) path whitelist change requiring tsort(1)
to be built and installed before running make build.
@
text
@d52 1
d306 5
d314 1
a314 1
<small>$OpenBSD: current.html,v 1.647 2016/01/08 17:01:28 abieber Exp $</small>
@


1.647
log
@Update process for installing native node modules with npm
@
text
@d51 1
d293 13
d308 1
a308 1
<small>$OpenBSD: current.html,v 1.646 2016/01/05 22:52:40 benno Exp $</small>
@


1.646
log
@document pf.conf syntax change: remove long deprecated "set debug
"none|urgent|misc|loud" levels in pf.conf.
@
text
@d181 2
a182 4
Native modules need to be built with "-std=gnu++0x", so set CXX=eg++ when building native modules. 
<pre>
	env CXX=eg++ npm install sqlite3
</pre>
d294 1
a294 1
<small>$OpenBSD: current.html,v 1.645 2015/12/31 07:49:50 jasper Exp $</small>
@


1.645
log
@mention in.gophernicus' path change
@
text
@d50 1
d287 7
d296 1
a296 1
<small>$OpenBSD: current.html,v 1.644 2015/12/27 05:00:26 jsg Exp $</small>
@


1.644
log
@An assembler that supports the rdseed instruction is now required
to build amd64 or i386 kernels.
@
text
@d49 1
d282 4
d288 1
a288 1
<small>$OpenBSD: current.html,v 1.643 2015/12/16 23:19:29 sthen Exp $</small>
@


1.643
log
@expand again; multicast_host as well as multicast_router could take an
interface as the option
@
text
@d48 1
d272 9
d283 1
a283 1
<small>$OpenBSD: current.html,v 1.642 2015/12/16 23:16:13 sthen Exp $</small>
@


1.642
log
@expand previous with "to something other than the default route"
@
text
@d255 3
a257 2
If you previously used "multicast_router" pointing to something other than
the default route, you will also need to add a static route for 224/4.
d273 1
a273 1
<small>$OpenBSD: current.html,v 1.641 2015/12/16 23:13:29 sthen Exp $</small>
@


1.641
log
@people who used multicast_router now need to add a static route
@
text
@d255 2
a256 2
If you previously used "multicast_router" you will also need to add a
static route for 224/4.
d272 1
a272 1
<small>$OpenBSD: current.html,v 1.640 2015/12/12 20:17:48 gilles Exp $</small>
@


1.640
log
@document pki "ca" parameter removal and new ca keyword
@
text
@d250 1
a250 1
single "multicast" option.  In order to enable multicast routing the
d255 2
d272 1
a272 1
<small>$OpenBSD: current.html,v 1.639 2015/12/07 16:17:56 sunil Exp $</small>
@


1.639
log
@Indent.

Ok mpi@@
@
text
@d47 1
d262 6
d270 1
a270 1
<small>$OpenBSD: current.html,v 1.638 2015/12/07 12:40:50 sunil Exp $</small>
@


1.638
log
@Document merging of makemap(8) into smtpctl(8).

Ok gilles@@, jung@@
@
text
@d170 1
a170 1
# route -T X exec /usr/sbin/ntpd
d252 1
a252 1
multicast=YES
d263 1
a263 1
<small>$OpenBSD: current.html,v 1.637 2015/12/05 18:43:56 mpi Exp $</small>
@


1.637
log
@Document the merge of "multicast_host" and "multicast_router".
@
text
@d46 1
d255 6
d263 1
a263 1
<small>$OpenBSD: current.html,v 1.636 2015/12/03 22:07:51 reyk Exp $</small>
@


1.636
log
@vmmctl has been renamed to vmctl and vmm.conf has been renamed to vm.conf.
@
text
@d44 2
d245 9
d256 1
a256 1
<small>$OpenBSD: current.html,v 1.635 2015/12/03 11:43:05 nicm Exp $</small>
@


1.635
log
@2015/12/03 - termcap.db and terminfo.db removed
@
text
@d43 1
d233 10
d245 1
a245 1
<small>$OpenBSD: current.html,v 1.634 2015/12/01 14:39:31 jung Exp $</small>
@


1.634
log
@missed the man page, also spaces->tab
@
text
@d42 1
d225 7
d234 1
a234 1
<small>$OpenBSD: current.html,v 1.633 2015/11/30 20:00:46 jung Exp $</small>
@


1.633
log
@mention smtpd tables removal
@
text
@d216 4
a219 3
         rm -f /usr/libexec/smtpd/table-ldap
         rm -f /usr/libexec/smtpd/table-passwd
         rm -f /usr/libexec/smtpd/table-sqlite
d226 1
a226 1
<small>$OpenBSD: current.html,v 1.632 2015/11/16 23:44:55 sthen Exp $</small>
@


1.632
log
@talk about tun->tap change for "link0" mode. prompted by a query from aja@@
@
text
@d41 1
d213 10
d225 1
a225 1
<small>$OpenBSD: current.html,v 1.631 2015/10/26 18:08:16 jasper Exp $</small>
@


1.631
log
@mention puppetboard configuration file changes
@
text
@d40 1
d191 21
d214 1
a214 1
<small>$OpenBSD: current.html,v 1.629 2015/10/25 14:45:29 abieber Exp $</small>
@


1.630
log
@un-uglify: close pre tags
@
text
@d39 1
d184 6
@


1.629
log
@Add blurb about removal of node-* (and coffeescript) ports. Also mention
building of native modules with CXX defined.

thanks aja@@ for the reminder.
@
text
@d172 1
a172 1
<pre>
d182 1
d185 1
a185 1
<small>$OpenBSD: current.html,v 1.628 2015/10/23 16:24:43 phessler Exp $</small>
@


1.628
log
@Mention the removal of "servers ... rtable X" in ntpd.conf.

reminded by benno@@
@
text
@d38 1
d165 17
d184 1
a184 1
<small>$OpenBSD: current.html,v 1.627 2015/10/19 20:05:20 matthieu Exp $</small>
@


1.627
log
@Freetype headers cleanup after moving headers.
@
text
@d37 1
d154 10
d166 1
a166 1
<small>$OpenBSD: current.html,v 1.626 2015/10/18 19:45:12 nick Exp $</small>
@


1.626
log
@
remove 5.7->5.8 stuff
@
text
@d36 1
d136 17
d155 1
a155 1
<small>$OpenBSD: current.html,v 1.625 2015/09/18 09:18:32 sthen Exp $</small>
@


1.625
log
@php_fpm scripts have been renamed.
@
text
@a30 16
<li><a href="#20150404">2015/04/04 - [ports] rc script name changes</a>
<li><a href="#20150424">2015/04/24 - tip(1) removed</a>
<li><a href="#20150427">2015/04/27 - _file user added</a>
<li><a href="#20150428">2015/04/28 - sshd default changed to PermitRoot no</a>
<li><a href="#20150502">2015/05/02 - pf_rules and ipsec_rules removed from rc.conf(5)</a>
<li><a href="#20150515">2015/05/15 - [ports] www/apache-httpd update to 2.4.12</a>
<li><a href="#20150517">2015/05/17 - isatty(3) depends on new feature in fcntl(2)</a>
<li><a href="#20150518">2015/05/18 - spamd(8) PF rule change: rdr-to to divert-to</a>
<li><a href="#20150523">2015/05/23 - ipsec.conf(5) default Diffie-Hellman group change</a>
<li><a href="#20150528">2015/05/28 - CUPS GTK+2 plugin is now in a separate package</a>
<li><a href="#20150601">2015/06/01 - alpha switches to <i>secureplt</i></a>
<li><a href="#20150602">2015/06/02 - sparc switches to PIE</a>
<li><a href="#20150605">2015/06/05 - [ports] default PHP version switched to 5.6</a>
<li><a href="#20150703">2015/07/03 - sudo has moved to ports</a>
<li><a href="#20150720">2015/07/20 - [ports] freeradius rc script renamed</a>
<!-- OpenBSD 5.8 -->
d43 2
a44 2
It contains information about changes from 5.7-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 5.6 or earlier, or people
d48 3
a50 3
If you wish to upgrade to 5.7-release or 5.7-stable from previous
versions, see the <a href="upgrade57.html">upgrade guide</a> instead,
as what is here does not apply to 5.7.
a65 208
<h3 id="20150404">2015/04/04 - [ports] rc script name changes</h3>
The rc scripts for some ports have changed their name to better match
the original upstream names and/or binary name:
<ul>
  <li><tt>dbus_daemon</tt> &#8594; <tt>messagebus</tt></li>
  <li><tt>puppetmasterd</tt> &#8594; <tt>puppetmaster</tt></li>
  <li><tt>puppetd</tt> &#8594; <tt>puppet</tt></li>
</ul>

Modify <tt>/etc/rc.conf.local</tt> accordingly:
<pre>
	perl -pi -e 's/dbus_daemon/messagebus/;' -e 's/puppetmasterd/puppetmaster/;' -e 's/puppetd/puppet/;' /etc/rc.conf.local
</pre>

<h3 id="20150424">2015/04/24 - tip(1) removed</h3>
tip(1) has been removed in favour of cu(1):

<pre>
	rm /usr/bin/tip /usr/share/man/man1/tip.1
</pre>

<h3 id ="20150427">2015/04/27 - _file user added</h3>
A new <em>_file</em> user and group have been added to support privilege
separation in file(1). sysmerge(8) should be run to ensure it is added. 

<h3 id ="20150428">2015/04/28 - sshd default changed to PermitRootLogin no</h3>
sshd no longer allows root logins by default.
If you rely on this, you can reinstate it by adding "PermitRootLogin
without-password" or "PermitRootLogin yes" to /etc/ssh/sshd_config, and
reloading sshd configuration ("rcctl reload sshd").
Beware that root is a common target of password-guessing attacks,
so consider your options carefully before deviating from the default.

<h3 id ="20150502">2015/05/02 - pf_rules and ipsec_rules removed from rc.conf(5)</h3>
The pf_rules and ipsec_rules variables have been removed from rc.conf(5): rc(8) will
now always use the default paths: <tt>/etc/pf.conf</tt> and <tt>/etc/ipsec.conf</tt>.
<br>
If you were relying on those to set a custom configuration path for
<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/pfctl.8">pfctl(8)</a>
or
<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ipsecctl.8">ipsecctl(8)</a>,
you must move your configuration to the standard path or create a default configuration
that will include your custom one.
For example:
<pre>
    echo 'include "/path/to/custom/pf.conf"' >/etc/pf.conf
</pre>

<h3 id ="20150515">2015/05/15 - [ports] www/apache-httpd updated to 2.4.12</h3>
Apache HTTPD is now at 2.4.12. When upgrading from 2.2.x releases manual
configuration changes may be required. See the <a href="http://httpd.apache.org/docs/2.4/upgrading.html"/>Apache HTTPD 2.4 upgrade guide</a> for details.
<br>
The ap2-mod_fastcgi and ap2-mod_fcgid ports have been superseded by
mod_proxy_fcgi which ships with Apache HTTPD 2.4 out of the box.

<h3 id ="20150517">2015/05/17 - isatty(3) depends on new feature in fcntl(2)</h3>
An F_ISATTY feature was added to fcntl(2), and isatty(3) requires it.
Build a new kernel before updating libc.

<h3 id="20150518">2015/05/18 - spamd(8) PF rule change: rdr-to to divert-to</h3>
pf(4) rules for spamd(8) must be changed from rdr-to to divert-to rules; a
simple replacement should work.  Additionally, spamd(8) now listens on 127.0.0.1
by default instead of 0.0.0.0.

<h3 id="20150523">2015/05/23 - ipsec.conf(5) default Diffie-Hellman group change</h3>
Automatic keying rules in ipsec.conf(5) now default to the modp3072
Diffie-Hellman group in both main mode and quick mode.  isakmpd(8)
will fail to negotiate flows and security associations unless both
sides use the same cryptographic parameters.  To make <i>old</i>
setups that still use the previous defaults communicate with the
new parameters, add "main group modp3072" and "quick group modp3072"
to the rules.
For example:
<pre>
    ike from 192.168.1.1 to 192.168.1.2 \
        main group modp3072 quick group modp3072
</pre>

<h3 id="20150528">2015/05/28 - CUPS GTK+2 plugin is now in a separate package</h3>
The plugin to allow printer selection from GTK+2 applications, previously in
the main GTK+2 package, has now been separated.
To be able to use CUPS printers from these applications (including GIMP,
Firefox, etc), install the gtk+2-cups package.

<h3 id="20150601">2015/06/01 - alpha switches to <i>secureplt</i></h3>
The toolchain of the alpha port has been updated to produce binaries with a
faster and smaller plt format.
In order to support this format, <tt>ld.so</tt> and <tt>libc.so</tt> need to
be updated before any of the new binaries can run.
While upgrading from a snapshot remains the preferred way to update, it is
possible to update by source by following this order:
<ul>
<li>Make sure your Makefile machinery is up-to-date:
<pre>
# cd /usr/src/share/mk
# make install
</pre>
<li>Build and install a new <tt>ld.so</tt>:
<pre>
# cd /usr/src/libexec/ld.so
# make cleandir &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
</pre>
<li>Build and install a new <tt>libc.so</tt>:
<pre>
# cd /usr/src/lib/libc
# make cleandir &amp;&amp; make obj &amp;&amp; make depend &amp;&amp; make NOMAN= NOPROFILE= &amp;&amp; make NOMAN= NOPROFILE= install
</pre>
<li>Build, but do not install, new binutils:
<pre>
# cd /usr/src/gnu/usr.bin/binutils-2.17
# make -f Makefile.bsd-wrapper cleandir &amp;&amp; make -f Makefile.bsd-wrapper obj &amp;&amp; make -f Makefile.bsd-wrapper
</pre>
<li>Build and install the compiler:
<pre>
# cd /usr/src/gnu/usr.bin/cc
# make cleandir &amp;&amp; make obj &amp;&amp; make &amp;&amp; install
</pre>
<li>Install new binutils:
<pre>
# cd /usr/src/gnu/usr.bin/binutils-2.17
# make -f Makefile.bsd-wrapper install
</pre>
</ul>
You can then proceed to rebuild your system as usual.

<h3 id="20150602">2015/06/02 - sparc switches to PIE</h3>
The sparc port is now using PIE binaries.
To upgrade by source, follow these steps:
<ul>
<li>Make sure your Makefile machinery is up-to-date:
<pre>
# cd /usr/src/share/mk
# make install
</pre>
<li>Build, but do not install, new binutils:
<pre>
# cd /usr/src/gnu/usr.bin/binutils-2.17
# make -f Makefile.bsd-wrapper cleandir &amp;&amp; make -f Makefile.bsd-wrapper obj &amp;&amp; make -f Makefile.bsd-wrapper
</pre>
<li>Build and install the compiler:
<pre>
# cd /usr/src/gnu/usr.bin/cc
# make cleandir &amp;&amp; make obj &amp;&amp; make &amp;&amp; install
</pre>
<li>Install new binutils:
<pre>
# cd /usr/src/gnu/usr.bin/binutils-2.17
# make -f Makefile.bsd-wrapper install
</pre>
</ul>
You can then proceed to rebuild your system as usual.

<h3 id="20150605">2015/06/05 - [ports] default PHP version switched to 5.6</h3>

The default version of PHP has been switched to 5.6.
After updating to new packages, you will need to move the configuration
across from 5.5.
Check for local changes in /etc/php-5.5.ini and apply them to php-5.6.ini,
and create new symbolic links for any required extensions in /etc/php-5.6.
For the common case where you would like to keep existing extensions
you can do this:
<pre>
# cd /etc/php-5.5
# for i in *; do ln -s ../php-5.6.sample/$i ../php-5.6/; done
</pre>
Note that pkg_add -u will <b>not</b> move to the newer php-fpm release
version; most users will need to manually pkg_delete php-fpm and then
pkg_add the new version.<p>
Additionally note that there have been <a href="http://php.net/manual/en/migration56.openssl.php">changes
to PHP 5.6's SSL/TLS support</a>.
When a PHP script makes an SSL/TLS client connection, peer certificates
are now verified by default, which was not the case previously.
Since the standard CA certificate bundle is outside the chroot jail
frequently used with PHP on OpenBSD, you may need to copy this across
to allow client connections to function.
<pre>
# mkdir -p /var/www/etc/ssl
# cp /etc/ssl/cert.pem /var/www/etc/ssl/
</pre>

<h3 id="20150703">2015/07/03 - sudo has moved to ports</h3>

sudo(8) has been removed from the base OS.
The old binaries and manual pages should be removed:
<pre>
       rm -f /usr/bin/sudo /usr/bin/sudoedit /usr/sbin/visudo
       rm -f /usr/share/man/man8/sudo.8 /usr/share/man/man8/sudoedit.8
       rm -f /usr/share/man/man8/visudo.8 /usr/share/man/man5/sudoers.5
       rm -f /usr/libexec/sudo_noexec.so
</pre>
If you would like to continue using sudo(8), install it from packages:
<pre>
       pkg_add sudo
</pre>
Otherwise, remove its configuration as well:
<pre>
       rm -f /etc/sudoers
</pre>
<b>Caution</b>: If you rely on sudo as your primary means of gaining
root privileges, you should install and test it from packages (taking
care to test using /usr/local/bin/sudo) before removing the old binary.

<h3 id="20150720">2015/07/20 - [ports] freeradius rc script renamed</h3>

The rc script for freeradius has been renamed from radiusd to freeradius.
Adjust rc.conf.local if necessary.

<!-- OpenBSD 5.8 -->
d137 1
a137 1
<small>$OpenBSD: current.html,v 1.624 2015/09/12 14:04:01 stsp Exp $</small>
@


1.624
log
@fix incorrect ifmedia build instructions; recommend a full 'make build'
@
text
@d51 1
d352 7
d361 1
a361 1
<small>$OpenBSD: current.html,v 1.623 2015/09/12 13:46:12 stsp Exp $</small>
@


1.623
log
@Manual source upgrade steps for ifmedia.
Only for people who don't use snapshots or don't use 'make build'.
@
text
@d333 13
a345 11
install -m 444 -o root -g bin /usr/src/sys/net/if.h /usr/include/net/if.h
install -m 444 -o root -g bin /usr/src/sys/net/if_media.h /usr/include/net/if_media.h
install -m 444 -o root -g bin /usr/src/sys/sys/sockio.h /usr/include/sys/sockio.h
cd /usr/src/sbin/ifconfig
make obj
make depend
make install
cd /usr/src/sbin/dhclient
make obj
make depend
make install
d348 3
d353 1
a353 1
<small>$OpenBSD: current.html,v 1.622 2015/09/11 07:24:33 miod Exp $</small>
@


1.622
log
@Mention config(8) update.
@
text
@d50 1
d321 25
d348 1
a348 1
<small>$OpenBSD: current.html,v 1.621 2015/08/30 12:43:25 schwarze Exp $</small>
@


1.621
log
@typo, no content change; Jan Stary <hans at stare dot cz> on misc@@
@
text
@d49 1
d305 15
d322 1
a322 1
<small>$OpenBSD: current.html,v 1.620 2015/08/25 11:23:15 jca Exp $</small>
@


1.620
log
@Add a note about the removal of security/encfs.  Suggested by sthen@@
@
text
@d114 1
a114 1
now always use the default paths: <tt>/etc/pf.conf</tt> and <tt>/etc/ipsec.conf</tt>).
d119 1
a119 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/ipsecctl.8">ipsecctl(8)</a>.
d306 1
a306 1
<small>$OpenBSD: current.html,v 1.619 2015/08/22 22:16:30 matthieu Exp $</small>
@


1.619
log
@libdrm update needs to remove old files.
I added <!-- OpenBSD 5.8 --> markers to ease purging the file on release.
@
text
@d48 1
d295 8
d306 1
a306 1
<small>$OpenBSD: current.html,v 1.618 2015/07/21 02:28:02 sthen Exp $</small>
@


1.618
log
@mention freeradius rc script renaming
@
text
@d46 2
d285 10
d297 1
a297 1
<small>$OpenBSD: current.html,v 1.617 2015/07/08 11:40:34 jca Exp $</small>
@


1.617
log
@Also remove sudo_noexec.so; from Max Fillinger
@
text
@d45 1
d278 5
d285 1
a285 1
<small>$OpenBSD: current.html,v 1.616 2015/07/07 21:27:09 jca Exp $</small>
@


1.616
log
@Typo; spotted by Daniel Jakots.
@
text
@d263 1
d279 1
a279 1
<small>$OpenBSD: current.html,v 1.615 2015/07/04 15:11:47 millert Exp $</small>
@


1.615
log
@sudo removal; from Steven McDonald
@
text
@d246 1
a246 1
re now verified by default, which was not the case previously.
d278 1
a278 1
<small>$OpenBSD: current.html,v 1.614 2015/07/02 05:49:04 bentley Exp $</small>
@


1.614
log
@Clean up meta tags.

name=distribution, name=keywords, and name=resource-type have no effect
in modern search engines and just clutter up the page source.

From Pavel Plamenov.
@
text
@d44 1
d255 21
d278 1
a278 1
<small>$OpenBSD: current.html,v 1.613 2015/06/25 11:36:20 sthen Exp $</small>
@


1.613
log
@expand php note about SSL/TLS client connections, and link to upstream's
migration guide.
@
text
@a5 1
<meta name= "resource-type" content= "document">
a6 2
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
d256 1
a256 1
<small>$OpenBSD: current.html,v 1.612 2015/06/25 11:12:46 sthen Exp $</small>
@


1.612
log
@additional note for PHP; 5.6 now verifies client SSL certs when making a
connection, so you may need to copy /etc/ssl/cert.pem into the chroot jail.
@
text
@d245 11
a255 5
Additionally note that when a PHP script makes an SSL client connection,
in 5.6 peers are now verified by default, which was not the case previously.
Since the usual CA certificate bundle in /etc/ssl/cert.pem is outside the
chroot jail, you may need to copy this to /var/www/etc/ssl/cert.pem to
allow client connections to function.
d259 1
a259 1
<small>$OpenBSD: current.html,v 1.611 2015/06/25 10:18:05 sthen Exp $</small>
@


1.611
log
@add information about the PHP release version bump (5.5->5.6).

since most PHP users on OpenBSD will now be using php-fpm, specifically
call out the fact that php-fpm won't automatically switch to the 5.6 version
@
text
@d239 2
a240 2
cd /etc/php-5.5
for i in *; do ln -s ../php-5.6.sample/$i ../php-5.6/; done
d244 6
a249 1
pkg_add the new version.
d253 1
a253 1
<small>$OpenBSD: current.html,v 1.610 2015/06/02 20:36:10 miod Exp $</small>
@


1.610
log
@the PIE sparcles
@
text
@d46 1
d229 17
d248 1
a248 1
<small>$OpenBSD: current.html,v 1.609 2015/06/01 19:04:23 miod Exp $</small>
@


1.609
log
@Instructions to switch alpha to secureplt for the daring people.
@
text
@d45 1
d176 1
a176 1
# make obj &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
d181 1
a181 1
# make obj &amp;&amp; make cleandir &amp;&amp; make depend &amp;&amp; make NOMAN= NOPROFILE= &amp;&amp; make NOMAN= NOPROFILE= install
d186 1
a186 1
# make -f Makefile.bsd-wrapper obj &amp;&amp; make -f Makefile.bsd-wrapper cleandir &amp;&amp; make -f Makefile.bsd-wrapper
d191 28
a218 1
# make obj &amp;&amp; make cleandir &amp;&amp; make &amp;&amp; install
d230 1
a230 1
<small>$OpenBSD: current.html,v 1.608 2015/05/28 00:38:05 sthen Exp $</small>
@


1.608
log
@Note the fact that, since the gtk+2 cups plugin was split off into a
separate package, users now need to manually install it if they want to
print using cups from firefox/gimp/etc.
@
text
@d44 1
d159 41
d202 1
a202 1
<small>$OpenBSD: current.html,v 1.607 2015/05/25 19:30:15 naddy Exp $</small>
@


1.607
log
@ipsec.conf(5) default Diffie-Hellman group change; ok djm@@
@
text
@d43 1
d152 6
d160 1
a160 1
<small>$OpenBSD: current.html,v 1.606 2015/05/19 02:35:13 lteo Exp $</small>
@


1.606
log
@Format the spamd PF rule change section to match the others.
@
text
@d42 1
d137 14
d153 1
a153 1
<small>$OpenBSD: current.html,v 1.605 2015/05/18 17:03:06 okan Exp $</small>
@


1.605
log
@add note about pf rule changes for spamd
@
text
@d41 1
a41 1
<li><a href="#20150518">2015/05/18 - switch from rdr-to to dirvert-to pf(4) rules for spamd(8)</a>
d131 4
a134 3
<h3 id="20150518">2015/05/18 - pf(4) rules for spamd(8) must change
from rdr-to to dirvert-to rules; a simple replacement should work.
Additionally, spamd(8) now listens on 127.0.0.1 by default instead of 0.0.0.0.
d138 1
a138 1
<small>$OpenBSD: current.html,v 1.604 2015/05/17 22:51:20 deraadt Exp $</small>
@


1.604
log
@mention new-kernel-before-libc for isatty(3)
@
text
@d41 1
d131 4
d137 1
a137 1
<small>$OpenBSD: current.html,v 1.603 2015/05/15 08:23:01 stsp Exp $</small>
@


1.603
log
@Upgrade notes for www/apache-httpd 2.4 port.
@
text
@d40 1
d126 4
d132 1
a132 1
<small>$OpenBSD: current.html,v 1.602 2015/05/11 11:18:29 sthen Exp $</small>
@


1.602
log
@Add 'link rel="canonical"' to pages, acting as a hint to search engines
to list the copies on www.openbsd.org rather than mirrors.

From Carlin Bingham, ok millert@@ nick@@
@
text
@d39 1
d118 7
d127 1
a127 1
<small>$OpenBSD: current.html,v 1.601 2015/05/02 09:37:57 ajacoutot Exp $</small>
@


1.601
log
@pf_rules are ipsec_rules are gone; wording checked by sthen@@
@
text
@d11 1
d119 1
a119 1
<small>$OpenBSD: current.html,v 1.600 2015/04/30 23:53:04 nick Exp $</small>
@


1.600
log
@
why do I remember the stuff I forgot seconds after committing?
@
text
@d37 1
d101 15
d118 1
a118 1
<small>$OpenBSD: current.html,v 1.599 2015/04/30 23:50:42 nick Exp $</small>
@


1.599
log
@
remove 5.6->5.7 stuff
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 2005-2014 by OpenBSD">
d44 2
a45 2
It contains information about changes from 5.6-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 5.5 or earlier, or people
d49 3
a51 2
If you wish to upgrade to 5.6-release or 5.6-stable from previous
versions, see the <a href="upgrade56.html">upgrade guide</a>.
d102 1
a102 1
<small>$OpenBSD: current.html,v 1.598 2015/04/28 16:42:27 sthen Exp $</small>
@


1.598
log
@Add a heads-up that the default for PermitRootLogin in sshd has changed.
@
text
@a32 29
<li><a href="#20140813">2014/08/13 - X resource files moved to /usr/X11R6/share/X11</a>
<li><a href="#20140822">2014/08/22 - BIND has moved to ports</a>
<li><a href="#20140826">2014/08/26 - openssl(1) moved to /usr/bin</a>
<li><a href="#20140826b">2014/08/26 - nginx has moved to ports</a>
<li><a href="#20140829">2014/08/29 - puppetdb split single config file into multiple files</a>
<li><a href="#20140908">2014/09/08 - procfs removed</a>
<li><a href="#20140915">2014/09/15 - sendmail moved to packages, updated</a>
<li><a href="#20140919">2014/09/19 - rc.conf(8) moved to the base set</a>
<li><a href="#20140925">2014/09/25 - [ports] collectd updated to 5.4.1</a>
<li><a href="#20141013">2014/10/13 - lkm removed</a>
<li><a href="#20141030">2014/10/30 - [ports] symon package split</a>
<li><a href="#20141031">2014/10/31 - libressl renamed to libtls</a>
<li><a href="#20141031b">2014/10/31 - [ports] sendmail port uid/gid change</a>
<li><a href="#20141106">2014/11/06 - [ports] php version bump</a>
<li><a href="#20141117">2014/11/17 - /var/tmp becomes a symlink to /tmp</a>
<li><a href="#20141120">2014/11/20 - login.conf and crypt changes</a>
<li><a href="#20141123">2014/11/23 - sparc64 switched to new installboot(8)</a>
<li><a href="#20141203">2014/12/03 - rtsol(8) and rtsold(8) removed</a>
<li><a href="#20141209">2014/12/09 - [ports] login_duo file location moved</a>
<li><a href="#20141212">2014/12/12 - relayd(8) and httpd(8) changed &quot;ssl&quot keyword to &quot;tls&quot;</a>
<li><a href="#20141222">2014/12/22 - static PIE</a>
<li><a href="#20141224">2014/12/24 - crypt_checkpass changes</a>
<li><a href="#20150104">2015/01/04 - [ports] gnustep sudoku renamed</a>
<li><a href="#20150108">2015/01/08 - [ports] PostgreSQL 9.4.0</a>
<li><a href="#20150121">2015/01/21 - carp(4) setups now require a "carpdev" argument</a>
<li><a href="#20150125">2015/01/25 - [ports] wordpress 4.1</a>
<li><a href="#20150206">2015/02/06 - [ports] MariaDB 10.0.16</a>
<li><a href="#20150221">2015/02/21 - Mesa changed back to 10.2</a>
<!-- 5.8 -->
a64 399
<h3 id="20140813">2014/08/13 - X resources files moved to /usr/X11R6/share/X11/</h3>
The X resource files have moved their installation directory
from <tt>/etc/X11/app-defaults/</tt>
to <tt>/usr/X11R6/share/X11/app-defaults/</tt>
<tt>/etc/X11/app-defaults</tt> stays 1st in the libXt search path so, people
and ports can put customized versions there if needed.
If you didn't customize the versions in <tt>/etc/X11/app-defaults</tt>, they
should be removed to avoid future issues when one file changes:
<pre>
	cd /etc/X11/app-defaults
	rm Beforelight Bitmap Bitmap-color Bitmap-nocase Chooser Clock-color
	rm Editres Editres-color KOI8RXTerm SshAskpass UXTerm Viewres
	rm Viewres-color XCalc XCalc-color XClipboard XClock
	rm XClock-color XConsole XFontSel XLoad XLock XLogo
	rm XLogo-color XMore XSm XTerm XTerm-color Xedit
	rm Xedit-color Xfd Xgc Xgc-color Xmag Xman Xmessage
	rm Xmessage-color Xsystrace Xvidtune
</pre>

<h3 id="20140822">2014/08/22 - BIND has moved to ports</h3>
named(8) a.k.a. BIND has been removed from the base OS.
In many cases, unbound(8) and nsd(8) will make good replacements,
however users with some configurations (for example split horizon
DNS) may find it simpler to continue with BIND (which is available
in packages). The old binaries and manual pages should be removed:
<pre>
	rm -f /etc/rc.d/named
	rm -f /usr/sbin/dnssec-keygen
	rm -f /usr/sbin/dnssec-signzone
	rm -f /usr/sbin/named
	rm -f /usr/sbin/named-checkconf
	rm -f /usr/sbin/named-checkzone
	rm -f /usr/sbin/nsupdate
	rm -f /usr/sbin/rndc
	rm -f /usr/sbin/rndc-confgen
	rm -f /usr/share/man/man5/named.conf.5
	rm -f /usr/share/man/man5/rndc.conf.5
	rm -f /usr/share/man/man8/dnssec-keygen.8
	rm -f /usr/share/man/man8/dnssec-signzone.8
	rm -f /usr/share/man/man8/named.8
	rm -f /usr/share/man/man8/named-checkconf.8
	rm -f /usr/share/man/man8/named-checkzone.8
	rm -f /usr/share/man/man8/nsupdate.8
	rm -f /usr/share/man/man8/rndc-confgen.8
	rm -f /usr/share/man/man8/rndc.8
</pre>
If you would like to move to BIND from packages, install it:
<pre>
	pkg_add isc-bind
</pre>
This will run as a different user id ("_bind" instead of "named"),
so check that file and directory permissions permit access - in many
cases, this should work:
<pre>
	find /var/named -group named -print0 | xargs -r0 chgrp _bind
</pre>
To enable startup at boot time:
<pre>
	rcctl enable isc_named
</pre>
<b>Caution</b>: as this is from a package, it will start relatively late
in the boot process, so if you normally have 'nameserver 127.0.0.1' or
similar in resolv.conf and require working name resolution during system
startup, you may need to make alternative arrangements.
Options include running unbound on localhost only, or adding a fallback
server to /etc/resolv.conf.

<h3 id="20140826">2014/08/26 - openssl(1) has moved to /usr/bin</h3>
The openssl(1) binary has moved from /usr/sbin to /usr/bin.
As such, the old binary should be removed:
<pre>
	rm -f /usr/sbin/openssl
</pre>

<h3 id="20140826b">2014/08/26 - nginx has moved to ports</h3>
nginx(8) has been removed from the base OS.
The old binaries and manual pages should be removed:
<pre>
	rm -f /etc/rc.d/nginx
	rm -f /usr/sbin/nginx
	rm -f /usr/share/man/man8/nginx.8
	rm -f /usr/share/man/man5/nginx.conf.5
</pre>
If you would like to move to nginx from packages, install it:
<pre>
	pkg_add nginx
</pre>
To enable startup at boot time:
<pre>
	rcctl enable nginx
</pre>
<b>Caution</b>: as the nginx package is using the same rc.d script that was
used by the base system it is mandatory to remove the old nginx rc.d script
to avoid installation issues of the nginx packages.

<h3 id="20140829">2014/08/29 - puppetdb split single config file into multiple files</h3>
With puppetdb-2.1.0p1 the single puppetdb.ini file was split into multiple
.ini files. The configuration needs to be adapted after upgrade. More
information in the puppetdb package README.

<h3 id="20140908">2014/09/08 - procfs removed</h3>
procfs has been removed, thus the binary and manual page should be deleted:
<pre>
	rm -f /sbin/mount_procfs
	rm -f /usr/share/man/man8/mount_procfs.8
</pre>

<h3 id="20140915">2014/09/15 - sendmail moved to packages, updated</h3>
Sendmail has moved from the base OS to packages.
The following binaries, libraries, headers, and manual pages should
be deleted:
<pre>
	rm -rf /usr/include/libmilter
	rm -rf /usr/libdata/perl5/site_perl/`uname -p`-openbsd/libmilter
	rm -rf /usr/libexec/sendmail
	rm -rf /usr/share/sendmail  # preserve mc files first if needed

	rm -f /etc/rc.d/sendmail
	rm -f /usr/lib/{libmilter.a,libmilter.so.3.0,libmilter_p.a}
	rm -f /usr/libexec/smrsh
	rm -f /usr/sbin/{editmap,mailstats,praliases}
	rm -f /usr/share/man/man1/{hoststat.1,praliases.1,purgestat.1}
	rm -f /usr/share/man/man8/{editmap.8,mailq.8,mailstats.8,smrsh.8}
	rm -f /var/log/sendmail.st

	rmdir /usr/libexec/sm.bin

	userdel smmsp
	groupdel smmsp
</pre>

If you are going to continue to use sendmail, install it from packages
and adjust permissions:

<pre>
	pkg_add sendmail
	chown -R _smmsp:_smmsp /var/spool/clientmqueue
</pre>

Compare your configuration files against the new default files in
/usr/local/share/examples/sendmail.
In particular, submit.cf must be updated as the userid has changed.
Review your file for local changes and if safe, copy the new file across:

<pre>
	diff /usr/local/share/examples/sendmail/submit.cf /etc/mail/
	cp /usr/local/share/examples/sendmail/submit.cf /etc/mail/
</pre>

If you will be moving to another MTA, for example <a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man8/smtpd.8">smtpd(8)</a>,
check that there is nothing you need to keep (e.g. unsent messages in the
queue), then the following files can be removed:

<pre>
	rm -f /etc/mail/{README,access,access.db,genericstable,genericstable.db}
	rm -f /etc/mail/{helpfile,local-host-names,localhost.cf,mailertable}
	rm -f /etc/mail/{mailertable.db,relay-domains,sendmail.cf,submit.cf}
	rm -f /etc/mail/{trusted-users,virtusertable,virtusertable.db}

	rm -rf /var/spool/clientmqueue
	rm -rf /var/spool/mqueue
</pre>

<h3 id="20140919">2014/09/19 - rc.conf(8) moved to the base set</h3>
/etc/rc.conf has moved away from the <i>etc</i> to the <i>base</i> set.<br><br>
Effectively this means that:<br>
<b>any manual changes made to /etc/rc.conf will be lost
at next upgrade.
If such changes were made, they must be merged into /etc/rc.conf.local</b>.<br><br>
Note that a backup version of rc.conf(8) can be found under /var/backups/.

<h3 id="20140925">2014/09/25 - [ports] collectd updated to 5.4.1</h3>
<tt>sysutils/collectd</tt> has been updated to version 5.4.1, users of previous
4.10.1 version should review this
<a href="https://collectd.org/wiki/index.php/V4_to_v5_migration_guide">upgrade guide</a>
to migrate their existing setups.

<h3 id="20141013">2014/10/13 - lkm removed</h3>
The lkm interface has been removed; thus several binaries, manual pages,
the lkm directory, and the group _lkm should be removed:
<pre>
	rm -rf /usr/lkm /usr/share/lkm /dev/lkm
	rm -f /usr/bin/modstat
	rm -f /sbin/mod{,un}load
	rm -f /usr/share/man/man8/mod{stat,load,unload}.8
	rm -f /usr/share/man/man4/lkm.4
	rm -f /usr/share/mk/bsd.lkm.mk /usr/include/sys/lkm.h
	groupdel _lkm
</pre>


<h3 id="20141030">2014/10/30 - [ports] symon package split</h3>
The split between subpackages for symon has been adjusted.
Depending on which subpackage you installed previously, you may lose
the "symux" monitor after a pkg_add -u, if so, just run "pkg_add symux".


<h3 id="20141031">2014/10/31 - libressl renamed to libtls</h3>
The libressl library has been renamed to libtls to avoid confusion and to make
it easier to distinguish between LibreSSL (the project) and libressl (the
library). There are several files that should be removed post update:
<pre>
	rm -f /usr/include/ressl.h
	rm -f /usr/lib/libressl.* /usr/lib/libressl_*
	rm -f /usr/share/man/man3/ressl_*
</pre>

<h3 id="20141031b">2014/10/31 - [ports] sendmail port uid/gid change</h3>
<!-- XXX bug in post-5.6 port; doesn't affect 5.6->5.7 so skip for upgrade57.html -->
The uid and gid used by the enqueuer have changed.
<pre>
	/etc/rc.d/sendmail stop
	groupmod -g 745 _smmsp
	usermod -u 745 -g 745 _smmsp
	chown -R _smmsp:_smmsp /var/spool/clientmqueue
	chgrp _smmsp /usr/local/libexec/sendmail/sendmail
	chmod g+s /usr/local/libexec/sendmail/sendmail
	/etc/rc.d/sendmail start
</pre>

<h3 id="20141106">2014/11/06 - [ports] php version bump</h3>
The default version of PHP has been switched to 5.5.
After updating to new packages when they are available, you will need
to move the configuration across from 5.4.
Check for local changes in /etc/php-5.4.ini and apply them to php-5.5.ini,
and create new symbolic links for any required extensions in /etc/php-5.5.
For the common case where you would like to keep existing extensions
you can do this:

<pre>
	cd /etc/php-5.4
	for i in *; do ln -s ../php-5.5.sample/$i ../php-5.5/; done
</pre>

pecl-APC does not support newer PHP versions and has been retired;
xcache is still available, or you can use the new opcode cache built-in
to 5.5:

<pre>
	ln -s ../php-5.5.sample/opcache.ini /etc/php-5.5
</pre>

<h3 id="20141117">2014/11/17 - /var/tmp becomes a symlink to /tmp</h3>
/var/tmp is now a symlink to /tmp.  Recommend updating the
/etc/daily script (with sysmerge or by hand), since the /tmp
purge has been adjusted for vi.recover, and extended to 7 days.

<pre>
	rm -r /var/tmp
	ln -s /tmp /var/tmp
</pre>

<h3 id="20141120">2014/11/20 - login.conf and crypt changes</h3>
Support for creating DES hashed passwords has been removed from most userland
utilities. <em>login.conf</em> only supports the blowfish option; this
was previously the default for <em>localcipher</em>. Additionally, the
<em>ypcipher</em> capability is no longer used; the localcipher cap will
be used for both local and YP passwords. These changes should not affect default
installations.

<h3 id="20141123">2014/11/23 - sparc64 switched to new installboot(8)</h3>
The sparc64 architecture has been switched to the new installboot(8)
implementation /usr/sbin/installboot. Old installboot files can be removed:

<pre>
	rm /usr/mdec/installboot /usr/share/man/man8/sparc64/installboot.8
</pre>

<h3 id="20141203">2014/12/03 - rtsol(8) and rtsold(8) removed</h3>
Sending of router solicitations was moved to the kernel some time ago.
There is no longer a need for rtsol(8):

<pre>
	rm /etc/rc.d/rtsold /sbin/rtsol /usr/sbin/rtsold
	rm /usr/share/man/man8/rtsol.8 /usr/share/man/man8/rtsold.8
</pre>

<h3 id="20141209">2014/12/09 - [ports] login_duo file location moved</h3>
<!-- XXX port added post-5.6 so this is not needed for 5.7 release notes -->
The login_duo port now installs under /usr/local/sbin rather than
/usr/local/libexec/auth (which is normally only used for bsd-auth programs).
If you use this, update paths in your ForceCommand strings.

<h3 id="20141212">2014/12/12 - relayd(8) and httpd(8) changed &quot;ssl&quot keyword to &quot;tls&quot;</h3>
The occurences of the <b>ssl</b> have been changed to <b>tls</b> in
<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/relayd.conf.5">relayd.conf(5)</a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi/OpenBSD-current/man5/httpd.conf.5">httpd.conf(5)</a>.
The configuration files have to be updated accordingly.

<h3 id="20141222">2014/12/22 - static PIE</h3>
Work is progressing to build OpenBSD's static binaries as Position
Independent Executables such that they fully benefit from address
space randomization.  Since many of these static binaries are
essential for system recovery, we strongly advise people to upgrade
from snapshots.  For those who are stubborn enough to upgrade from
source, here are some instructions to get yourself over this bump:

<p>
Start with building and installing a new kernel and reboot.<br>
Build and install rcrt0.o:

<pre>
	cd /usr/src/lib/csu
	make obj
	make depend
	make
	make install
</pre>

Build and install new binutils:

<pre>
	cd /usr/src/gnu/usr.bin/binutils
	make -f Makefile.bsd-wrapper obj
	make -f Makefile.bsd-wrapper
	make -f Makefile.bsd-wrapper install
</pre>

Build and install new gcc:

<pre>
	cd /usr/src/gnu/usr.bin/cc
	make obj
	make depend
	make
	make install
</pre>

Then proceed with doing a full build.  It is essential that you don't
install the files in /usr/src/share/mk before completing the steps
outlined above!

<p>
At this point in time static PIE support is available for amd64, hppa
and sparc64.  Other architectures will follow soon and will require
these same steps.

<h3 id="20141224">2014/12/24 - crypt_checkpass changes</h3>
The crypt_checkpass function used to verify a user's password no longer
supports obsolete DES crypt password hashes. Effectively, this means if a
user's passwd hash is DES (not the default), they will be unable to login
via password authentication.

<h3 id="20150104">2015/01/04 - [ports] gnustep sudoku renamed</h3>
Because the ports games/sudoku and x11/gnustep/sudoku used the same
package name, the gnustep one had been renamed to gnustep-sudoku.
If you have the gnustep version installed (the exact package is
currently sudoku-0.7p5), you should delete it before and re-add it
after updating installed packages, like this:

<pre>
	pkg_delete sudoku-0.7p5
	pkg_add -u
	pkg_add gnustep-sudoku
</pre>

<h3 id="20150108">2015/01/08 - [ports] PostgreSQL 9.4.0</h3>
Major update to 9.4.0. A dump/restore is required.

<h3 id="20150121">2015/01/21 - carp(4) setups now require a "carpdev" argument</h3>
carp(4) interfaces no longer look for a compatible parent interface with
the same subnet if no "carpdev" argument has been specified with ifconfig(8)
or in the corresponding /etc/hostname.carp* file.  Such setups are now
treated as invalid and should be updated.

<h3 id="20150125">2015/01/25 - [ports] wordpress 4.1</h3>
The twentytwelve theme from wordpress 4.0.x is no longer included with
wordpress 4.1.x. If you are using this theme, back it up before updating:
<pre>
	cd /var/www/wordpress/wp-content/themes &&
	cp -Rp twentytwelve twentytwelve.bak
</pre>
and restore it after wordpress update:
<pre>
	cd /var/www/wordpress/wp-content/themes &&
	mv twentytwelve.bak twentytwelve
</pre>

<h3 id="20150206">2015/02/06 - [ports] MySQL replaced with MariaDB, updated</h3>
MySQL has been replaced with the MariaDB fork.
The changeover should be straightforward and package updates will be handled
by <tt>pkg_add -u</tt>, but there are a couple of additional steps to take:
<ul>
<li>Before upgrading to OpenBSD 5.7, run <tt>mysqladmin flush-logs</tt> to simplify recovery in case of problems
<li>After upgrading, run <tt>mysql_upgrade</tt> to upgrade system tables
<li>Replace "skip-locking" in /etc/my.cnf with "skip-external-locking"
</ul>

Note that replication between MySQL 5.1.x and MariaDB 10.x should work,
but is not a supported configuration.<br>

<h3 id="20150221">2015/02/21 - Mesa changed back to 10.2</h3>
The Mesa 10.4 update done in January has been reverted back to 10.2
due to various issues.  The following include files should be removed.
<pre>
	rm -f /usr/X11R6/include/GL/glcorearb.h
	rm -f /usr/X11R6/include/EGL/eglextchromium.h
</pre>
d101 1
a101 1
<small>$OpenBSD: current.html,v 1.597 2015/04/27 14:59:54 nicm Exp $</small>
@


1.597
log
@New _file user.
@
text
@d65 1
d519 7
d529 1
a529 1
<small>$OpenBSD: current.html,v 1.596 2015/04/26 17:03:51 nicm Exp $</small>
@


1.596
log
@Add tip(1) removal.
@
text
@d64 1
d514 5
d521 1
a521 1
<small>$OpenBSD: current.html,v 1.595 2015/04/04 09:29:08 jasper Exp $</small>
@


1.595
log
@mention rc script name changes for dbus and puppet
@
text
@d63 1
d506 7
d515 1
a515 1
<small>$OpenBSD: current.html,v 1.594 2015/04/04 09:05:45 jasper Exp $</small>
@


1.594
log
@whitespace
@
text
@d61 2
d491 14
d507 1
a507 1
<small>$OpenBSD: current.html,v 1.593 2015/02/25 16:49:06 sthen Exp $</small>
@


1.593
log
@tweak previous; discussed with ajacoutot
@
text
@d99 1
a99 1
	rm Beforelight Bitmap Bitmap-color Bitmap-nocase Chooser Clock-color 
d205 1
a205 1
	
d452 1
a452 1
or in the corresponding /etc/hostname.carp* file.  Such setups are now 
d491 1
a491 1
<small>$OpenBSD: current.html,v 1.592 2015/02/25 16:07:11 giovanni Exp $</small>
@


1.592
log
@Update instructions for MySQL -> MariaDB upgrade
ok sthen@@ on a similar diff
@
text
@d468 12
a479 7
<h3 id="20150206">2015/02/06 - [ports] MariaDB 10.0.16, updated</h3>
The option "skip-locking" (previously deprecated) has now been removed
and will cause a startup failure if present in /etc/my.cnf.
Replace with skip-external-locking.<br>
Before upgrading you should run <pre>mysqladmin flush-logs</pre> to be able to easily recover in case MariaDB won't start after upgrading.<br>
After upgrading you should run <pre>mysql_upgrade</pre> to upgrade system tables.<br>
Note that replica between MySQL 5.1.x and MariaDB 10.x should work but is not supported.
d491 1
a491 1
<small>$OpenBSD: current.html,v 1.591 2015/02/25 10:24:51 sthen Exp $</small>
@


1.591
log
@add a hint about submit.cf to the sendmail upgrade section
@
text
@d468 1
a468 1
<h3 id="20150206">2015/02/06 - [ports] MariaDB 10.0.16</h3>
d471 4
a474 1
Replace with skip-external-locking.
d486 1
a486 1
<small>$OpenBSD: current.html,v 1.590 2015/02/21 01:35:35 jsg Exp $</small>
@


1.590
log
@Add an entry for removing headers from Mesa 10.4
now we're back to Mesa 10.2

rm -f /usr/X11R6/include/GL/glcorearb.h
rm -f /usr/X11R6/include/EGL/eglextchromium.h
@
text
@d228 10
d483 1
a483 1
<small>$OpenBSD: current.html,v 1.589 2015/02/06 14:22:29 sthen Exp $</small>
@


1.589
log
@the MariaDB update requires a config change (replace "skip-locking" with
"skip-external-locking") otherwise mysqld will not start.
@
text
@d60 1
d463 8
d473 1
a473 1
<small>$OpenBSD: current.html,v 1.588 2015/01/25 16:16:57 kirby Exp $</small>
@


1.588
log
@update notes for wordpress-4.1
@
text
@d59 1
d457 5
a462 3
<p>

<br>
d464 1
a464 1
<small>$OpenBSD: current.html,v 1.587 2015/01/21 11:34:39 mpi Exp $</small>
@


1.587
log
@carp(4) setups now require a "carpdev" argument.
@
text
@d58 1
d443 13
d461 1
a461 1
<small>$OpenBSD: current.html,v 1.586 2015/01/08 15:02:20 pea Exp $</small>
@


1.586
log
@Add the PostgreSQL update
@
text
@d57 1
d436 6
d447 1
a447 1
<small>$OpenBSD: current.html,v 1.585 2015/01/04 20:41:33 kili Exp $</small>
@


1.585
log
@Mention the renaming of the x11/gnustep sudoku package.
@
text
@d56 1
d432 3
d440 1
a440 1
<small>$OpenBSD: current.html,v 1.584 2014/12/29 09:16:42 tedu Exp $</small>
@


1.584
log
@note that crypt_checkpass doesn't like DES. upgrade your hashes posthaste.
@
text
@d55 1
d418 13
d436 1
a436 1
<small>$OpenBSD: current.html,v 1.583 2014/12/23 21:18:11 naddy Exp $</small>
@


1.583
log
@typos; from Jungle Boogie and Dorian Buettner
@
text
@d54 1
d411 6
d422 1
a422 1
<small>$OpenBSD: current.html,v 1.582 2014/12/22 20:44:49 kettenis Exp $</small>
@


1.582
log
@Instructions for static PIE changes.
@
text
@d386 3
a388 3
	make -f Makefile.bsdwrapper obj
	make -f Makefile.bsdwrapper
	make -f Makefile.bsdwrapper install
d401 1
a401 1
Then proceed with doing a full build.  It is essention that you don't
d415 1
a415 1
<small>$OpenBSD: current.html,v 1.581 2014/12/12 14:48:14 reyk Exp $</small>
@


1.581
log
@Update relayd.conf and httpd.conf to replace the "ssl" keyword with "tls".
@
text
@d53 1
d362 49
d415 1
a415 1
<small>$OpenBSD: current.html,v 1.580 2014/12/09 18:04:49 sthen Exp $</small>
@


1.580
log
@login_duo binary moved
@
text
@d52 1
d354 9
d365 1
a365 1
<small>$OpenBSD: current.html,v 1.579 2014/12/03 20:47:56 florian Exp $</small>
@


1.579
log
@rtsol is gone
@
text
@d51 1
d347 5
d355 1
a355 1
<small>$OpenBSD: current.html,v 1.578 2014/12/02 07:03:51 bentley Exp $</small>
@


1.578
log
@More id="" under faq/.
@
text
@d50 1
d337 9
d349 1
a349 1
<small>$OpenBSD: current.html,v 1.577 2014/11/24 12:05:48 stsp Exp $</small>
@


1.577
log
@fix date of login.conf and crypt changes entry
@
text
@a53 1
<a name="Intro"></a>
d55 1
a55 1
<h2>Introduction</h2>
d78 1
a78 4
<p>

<a name="20140813"></a>
<h3>2014/08/13 - X resources files moved to /usr/X11R6/share/X11/</h3>
d97 1
a97 2
<a name="20140822"></a>
<h3>2014/08/22 - BIND has moved to ports</h3>
d145 1
a145 2
<a name="20140826"></a>
<h3>2014/08/26 - openssl(1) has moved to /usr/bin</h3>
d152 1
a152 2
<a name="20140826b"></a>
<h3>2014/08/26 - nginx has moved to ports</h3>
d173 1
a173 2
<a name="20140829"></a>
<h3>2014/08/29 - puppetdb split single config file into multiple files</h3>
d178 1
a178 2
<a name="20140908"></a>
<h3>2014/09/08 - procfs removed</h3>
d185 1
a185 2
<a name="20140915"></a>
<h3>2014/09/15 - sendmail moved to packages, updated</h3>
d231 1
a231 2
<a name="20140919"></a>
<h3>2014/09/19 - rc.conf(8) moved to the base set</h3>
d239 1
a239 2
<a name="20140925"></a>
<h3>2014/09/25 - [ports] collectd updated to 5.4.1</h3>
d245 1
a245 2
<a name="20141013"></a>
<h3>2014/10/13 - lkm removed</h3>
a257 1
<a name="20141030"></a>
d259 1
a259 1
<h3>2014/10/30 - [ports] symon package split</h3>
a263 1
<a name="20141031"></a>
d265 1
a265 1
<h3>2014/10/31 - libressl renamed to libtls</h3>
d275 1
a275 2
<a name="20141031b"></a>
<h3>2014/10/31 - [ports] sendmail port uid/gid change</h3>
d288 1
a288 2
<a name="20141106"></a>
<h3>2014/11/06 - [ports] php version bump</h3>
d310 1
a310 2
<a name="20141117"></a>
<h3>2014/11/17 - /var/tmp becomes a symlink to /tmp</h3>
d320 1
a320 2
<a name="20141120"></a>
<h3>2014/11/20 - login.conf and crypt changes</h3>
d328 1
a328 2
<a name="20141123"></a>
<h3>2014/11/23 - sparc64 switched to new installboot(8)</h3>
d339 1
a339 1
<small>$OpenBSD: current.html,v 1.576 2014/11/24 12:02:46 stsp Exp $</small>
@


1.576
log
@recommend removing old installboot on sparc64, else the wrong man page comes up
@
text
@d339 1
a339 1
<h3>2014/11/17 - login.conf and crypt changes</h3>
d359 1
a359 1
<small>$OpenBSD: current.html,v 1.575 2014/11/20 15:20:14 tedu Exp $</small>
@


1.575
log
@a few notes about login.conf. no real action required, but heads up.
@
text
@d49 1
d347 9
d359 1
a359 1
<small>$OpenBSD: current.html,v 1.574 2014/11/18 04:18:36 deraadt Exp $</small>
@


1.574
log
@few more recommendations for /var/tmp
@
text
@d48 1
d337 10
d349 1
a349 1
<small>$OpenBSD: current.html,v 1.573 2014/11/18 04:10:46 tedu Exp $</small>
@


1.573
log
@crude instructions for /var/tmp -> /tmp symlink
@
text
@d327 3
a329 1
/var/tmp is now a symlink to /tmp.
d338 1
a338 1
<small>$OpenBSD: current.html,v 1.572 2014/11/10 22:27:53 sthen Exp $</small>
@


1.572
log
@add html comment to mark "sendmail port uid/gid change" as not for upgrade57
(it only relates to something in the port which was added post-5.6)
@
text
@d47 1
d325 9
d336 1
a336 1
<small>$OpenBSD: current.html,v 1.571 2014/11/06 21:25:34 sthen Exp $</small>
@


1.571
log
@mention replacements for pecl-APC
@
text
@d289 1
d326 1
a326 1
<small>$OpenBSD: current.html,v 1.570 2014/11/06 21:14:51 sthen Exp $</small>
@


1.570
log
@notes on php bump
@
text
@d315 8
d325 1
a325 1
<small>$OpenBSD: current.html,v 1.569 2014/11/06 20:05:22 sthen Exp $</small>
@


1.569
log
@change "sendmail removed" to "sendmail moved to packages"

split the "files to remove" into "files to always remove" and "files to
remove if you stop using sendmail".

make a little suggestion that people might want to check their queue
before blindly pasting in a "rm -r /var/spool/mqueue" line.
@
text
@d46 1
d300 15
d317 1
a317 1
<small>$OpenBSD: current.html,v 1.568 2014/11/05 00:51:10 nick Exp $</small>
@


1.568
log
@
group _lkm should be removed, too.  Based on diff from Max dot Fillinger
at cwi dot nl, thanks!
@
text
@d39 1
a39 1
<li><a href="#20140915">2014/09/15 - sendmail removed</a>
d191 4
a194 3
<h3>2014/09/15 - sendmail removed</h3>
sendmail has been removed, thus several binaries, libraries, headers,
manual pages and configuration files should be deleted:
d199 1
a199 1
	rm -rf /usr/share/sendmail
a200 4
	rm -f /etc/mail/{README,access,access.db,genericstable,genericstable.db}
	rm -f /etc/mail/{helpfile,local-host-names,localhost.cf,mailertable}
	rm -f /etc/mail/{mailertable.db,relay-domains,sendmail.cf,submit.cf}
	rm -f /etc/mail/{trusted-users,virtusertable,virtusertable.db}
a209 3
        
        rm -rf /var/spool/clientmqueue
        rm -rf /var/spool/mqueue
d211 1
a211 1
        userdel smmsp
d215 22
d301 1
a301 1
<small>$OpenBSD: current.html,v 1.567 2014/11/02 05:02:29 doug Exp $</small>
@


1.567
log
@For the ressl to tls conversion, also need to delete libressl_p.a.

Discussed with jsing@@
@
text
@d239 2
a240 2
The lkm interface has been removed, thus several binaries and manual pages
and the lkm directory should be deleted:
d248 1
d285 1
a285 1
<small>$OpenBSD: current.html,v 1.566 2014/11/01 13:43:44 nick Exp $</small>
@


1.566
log
@
roll out 5.5->5.6 stuff
@
text
@d265 1
a265 1
	rm -f /usr/lib/libressl.*
d284 1
a284 1
<small>$OpenBSD: current.html,v 1.565 2014/10/31 15:56:57 jca Exp $</small>
@


1.565
log
@Add instructions for the sendmail uid/gid change.
"looks fine" ajacoutot@@
@
text
@a32 37
<li><a href="#20140312b">2014/03/12 - smtpd becomes default MTA</a>
<li><a href="#20140312c">2014/03/12 - spray removed</a>
<li><a href="#20140313">2014/03/13 - _smtpq user added</a>
<li><a href="#20140313b">2014/03/13 - httpd(8) removed</a>
<li><a href="#20140316">2014/03/16 - [ports] unbound(8) moved to base, updated</a>
<li><a href="#20140317">2014/03/17 - ftpd(8) disallows uid &lt; 1000 by default</a>
<li><a href="#20140317b">2014/03/17 - userland agp(4) interfaces removed</a>
<li><a href="#20140317c">2014/03/17 - userland ppp(8) and pppoe(8) implementations removed</a>
<li><a href="#20140319">2014/03/19 - rcp(1) removed</a>
<li><a href="#20140323">2014/03/23 - powerpc is now PIE</a>
<li><a href="#20140323b">2014/03/23 - librt removed</a>
<li><a href="#20140323c">2014/03/23 - Miscellaneous functions removed</a>
<li><a href="#20140323d">2014/03/23 - mount(2) changes for NFS, mfs, msdosfs, and ntfs</a>
<li><a href="#20140324">2014/03/24 - tcpwrappers removed</a>
<li><a href="#20140326">2014/03/26 - rmail(8) and uucpd(8) moved to ports, updated</a>
<li><a href="#20140329">2014/03/29 - pflow(4) pflowproto 9 removed</a>
<li><a href="#20140414">2014/04/14 - snmpd(8), snmpctl(8), and relayd(8) now communicate via AgentX protocol</a>
<li><a href="#20140419">2014/04/19 - altq removed</a>
<li><a href="#20140420">2014/04/20 - [ports] roundcubemail update needs config changes</a>
<li><a href="#20140421">2014/04/21 - lpd(8): hosts.equiv removed</a>
<li><a href="#20140422">2014/04/22 - kerberosV removed</a>
<li><a href="#20140503">2014/05/03 - bcrypt hash advanced to $2b$ mode</a>
<li><a href="#20140527">2014/05/27 - route(8) -priority 1 reserved for the kernel</a>
<li><a href="#20140603">2014/06/03 - sshd(8) change of default MACs, modes, ciphers</a>
<li><a href="#20140612">2014/06/12 - nginx(8) syslog logging config change</a>
<li><a href="#20140613">2014/06/13 - changes to minherit(2) and new getentropy(2)</a>
<li><a href="#20140623">2014/06/23 - [ports] Bacula packaging changes</a>
<li><a href="#20140630">2014/06/30 - strict nat-to/rdr-to translation pool checks</a>
<li><a href="#20140709">2014/07/09 - relayd(8) filter grammar changed</a>
<li><a href="#20140710">2014/07/10 - ifconfig(8) ABI break</a>
<li><a href="#20140711">2014/07/11 - IPv6 autoconf changes</a>
<li><a href="#20140713">2014/07/13 - Addition of sendsyslog(2) system call</a>
<li><a href="#20140716">2014/07/16 - lynx(1) moved to ports</a>
<li><a href="#20140722">2014/07/22 - [ports] Increased file descriptor use in KDE4</a>
<li><a href="#20140723">2014/07/23 - Changes to /etc infrastructure</a>
<li><a href="#20140727">2014/07/27 - rc scripts of both apache webservers renamed</a>
<!-- OpenBSD 5.6 release -->
d54 2
a55 2
It contains information about changes from 5.5-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 5.4 or earlier, or people
d59 2
a60 2
If you wish to upgrade to 5.5-release or 5.5-stable from previous
versions, see the <a href="upgrade55.html">upgrade guide</a>.
a76 634
<a name="20140312b"></a>
<h3>2014/03/12 - smtpd becomes default MTA</h3>
The default system MTA is now smtpd. If you are running sendmail with anything
other than the default configuration, please exercise caution and care
when upgrading. The sendmail cronjob should be disabled, /etc/mailer.conf
and /etc/rc.conf{,local} should be checked to verify one and only one MTA is
enabled, and newaliases run.
<pre>
    crontab -e
    vi /etc/mailer.conf
    vi /etc/rc.conf
    vi /etc/rc.conf.local
    newaliases
</pre>

<a name="20140312c"></a>
<h3>2014/03/12 - spray removed</h3>
/usr/sbin/spray and the associated rpc daemon have been removed.
<pre>
    rm -f /usr/sbin/spray
    rm -f /usr/libexec/rpc.sprayd
    rm -f /usr/share/man/man8/{,rpc.}spray{,d}.8
    vi /etc/inetd.conf
</pre>

<a name="20140313"></a>
<h3>2014/03/13 - _smtpq user added</h3>
A new <em>_smtpq</em> user and group have been added to support privilege
separation in smtpd. Add the following passwd line using vipw.
<pre>
    _smtpq:*:103:103::0:0:SMTP Daemon:/var/empty:/sbin/nologin
</pre>
Add the following line to /etc/group.
<pre>
    _smtpq:*:103:
</pre>
If you have previously started smtpd, you will need to change the owner of
the queue subdirectories.
<pre>
    cd /var/spool/smtpd
    chown -R _smtpq corrupt incoming purge queue temporary
</pre>

<a name="20140313b"></a>
<h3>2014/03/13 - httpd(8) removed</h3>
/usr/sbin/httpd and the associated tools and files have been removed.
Consider using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nginx&sektion=8">nginx(8)</a>
for your http serving needs, but note that nginx is not a drop-in replacement.
If you need the old httpd(8) or tools (e.g. logresolve, htdigest,
etc) and cannot switch at this time, see the port www/apache-httpd-openbsd.
If using modules, change the path in LoadModule configuration lines from
"/usr/lib/apache/modules" to "/usr/local/lib/apache/modules" otherwise you will
most likely have library conflicts and "size mismatch, relink your program"
errors logged.
All users need to remove the following files and directories:
<pre>
    rm -rf /usr/lib/apache
    rm -rf /usr/share/doc/html/httpd
    rm -f /usr/bin/{dbmmanage,htdigest}
    rm -f /usr/sbin/{apachectl,apxs,logresolve,rotatelogs,suexec}
    rm -f /usr/share/man/man1/{dbmmanage.1,htdigest.1}
    rm -f /usr/share/man/man8/{apachectl.8,apxs.8,logresolve.8}
    rm -f /usr/share/man/man8/{rotatelogs.8,suexec.8}
</pre>
This is revised from the list in previous versions of this page due to
the inclusion of httpd(8).<p>

The following files are associated with httpd(8) and can be deleted in some
cases, but may have been replaced with user content or configuration.
<b>Warning: On systems which currently or have previously used any http daemon,
care must be taken and files analyzed case by case to avoid accidental deletion
of user content or important configuration files.</b>
In particular, users moving to apache-httpd-openbsd will want to keep many
of these files.
<pre>
    rm -rf /var/www/icons
    rmdir /var/www/conf/{modules,modules.sample}
    rmdir /var/www/users
    rm -f /var/www/cgi-bin/{printenv,test-cgi}
    rm -f /var/www/conf/{httpd.conf,magic,mime.types}
    rm -f /var/www/htdocs/{apache_pb.gif,blowfish.jpg,bsd_small.gif,index.html}
    rm -f /var/www/htdocs/{lock.gif,logo23.jpg,logo24.jpg,mod_ssl_sb.gif}
    rm -f /var/www/htdocs/{openbsd_pb.gif,openbsdpower.gif,openssl_ics.gif}
    rm -f /var/www/htdocs/smalltitle.gif
</pre>
Many PHP applications will work under nginx with few or minimal changes;
in most cases php-fpm is the preferred method of running PHP under nginx.

<a name="20140316"></a>
<h3>2014/03/16 - [ports] unbound(8) moved to base</h3>
Unbound has moved to the base OS.<p>

If the package is installed, remove it before upgrading to avoid a
conflict in /etc/rc.d/unbound, and edit rc.conf.local to remove "unbound"
from "pkg_scripts=..." lines, and add "unbound_flags=" instead.

<pre>
    pkg_delete unbound
    vi /etc/rc.conf.local
</pre>

The following applies only to those updating from source, or updating from a
snapshot without using sysmerge: The _unbound user should be added using vipw
(or the UID should be modified if you were previously using Unbound from
ports).
<pre>
    _unbound:*:53:53::0:0:Unbound Daemon:/var/unbound:/sbin/nologin
</pre>

And _unbound group.

<pre>
    _unbound:*:53:
</pre>

On or before March 19, sysmerge(8) was unable to do the /etc/group
crossing automatically if updating from source.  Manual intervention will
be required in those situations.

<a name="20140317"></a>
<h3>2014/03/17 - ftpd(8) disallows uid &lt; 1000 by default</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8">ftpd(8)</a>
now defaults to denying access to user accounts with uid below 1000.
See the -m option if you need to change this.

<a name="20140317b"></a>
<h3>2014/03/17 - userland agp(4) interfaces removed</h3>
With the introduction of KMS, userland access to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=agp&sektion=4">agp(4)</a>
is no longer needed.  Since these interfaces provided low-level access
to the hardware, they have been removed.  You should remove the associated header file:
<pre>
    rm -f /usr/include/sys/agpio.h
</pre>

<a name="20140317c"></a>
<h3>2014/03/17 - userland ppp(8) and pppoe(8) implementations removed</h3>
The userland <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ppp&sektion=8&manpath=OpenBSD+5.4">ppp(8)</a>
daemon and its associated PPPoE helper,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&sektion=8&manpath=OpenBSD+5.4">pppoe(8)</a>,
have been removed.
As a result, the old binaries and manual pages should be removed:
<pre>
    rm -f /etc/ppp/ppp.{conf,linkdown,linkup,secret}.sample
    rm -f /usr/sbin/ppp /usr/share/man/man8/ppp.8
    rm -f /usr/sbin/pppctl /usr/share/man/man8/pppctl.8
    rm -f /usr/sbin/pppoe /usr/share/man/man8/pppoe.8
</pre> 
Many users will be able to migrate to the kernel implementations:
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&sektion=4">pppoe(4)</a>
(for PPPoE),
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ppp&sektion=4">ppp(4)</a>
and its associated control program
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppd&sektion=8">pppd(8)</a>
(for modems, mobile data, and some use with userland programs via a pipe).<p>
Another option for some users is
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=npppd&sektion=8">npppd(8)</a>
which supports L2TP, PPTP and PPPoE (currently server-side, IPv4 only).

<a name="20140319"></a>
<h3>2014/03/19 - rcp(1) removed</h3>
rcp(1) has been removed.
As a result, the binary and manual page should be removed:
<pre>
    rm -f /bin/rcp /usr/share/man/man1/rcp.1
</pre>

<a name="20140323"></a>
<h3>2014/03/23 - powerpc is now PIE</h3>
The powerpc platform has been switched to
PIE (position-independent executables) by default.
Everyone is encouraged to update via snapshots (dated after 2014/03/23); if you
want to upgrade via sources, follow these instructions:
<p>
First, make sure you are running an up-to-date kernel.
Second, install the new system Makefiles with the change to PIE_ARCH in
bsd.own.mk:
<blockquote><pre>
    cd /usr/src/share/mk && make install
</pre></blockquote>
Then, recompile and install gcc and binutils.
<blockquote><pre>
    cd /usr/src/gnu/usr.bin/binutils
    make -f Makefile.bsd-wrapper clean && make -f Makefile.bsd-wrapper obj && \
        make -f Makefile.bsd-wrapper depend && make -f Makefile.bsd-wrapper
    cd /usr/src/gnu/usr.bin/cc
    make clean && make obj && make depend && make && make install
    cd /usr/src/gnu/usr.bin/binutils && make -f Makefile.bsd-wrapper install
</pre></blockquote>
Finally, recompile your system by following the procedure outlined in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<a name="20140323b"></a>
<h3>2014/03/23 - librt removed</h3>
The librt static stub library has been removed. The leftover files must be deleted.

<pre>
    rm -f /usr/lib/librt{,_p}.a
</pre>

<a name="20140323c"></a>
<h3>2014/03/23 - Miscellaneous functions removed</h3>
Miscellaneous functions have been removed from libc.
The corresponding header files must be deleted.

<pre>
    rm -f /usr/include/bm.h
    rm -f /usr/include/md4.h
</pre>


<a name="20140323d"></a>
<h3>2014/03/23 - mount(2) changes for NFS, mfs, msdosfs, and ntfs</h3>

Changes to the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&sektion=2">mount(2)</a>
API/ABI means that NFS servers must rebuild
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mountd&sektion=8">mountd(8)</a>
against the updated headers and restart it after rebooting to the
new kernel.
<br>
Similarly, the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_mfs&sektion=8">mount_mfs(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_msdos&sektion=8">mount_msdos(8)</a>, and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_ntfs&sektion=8">mount_ntfs(8)</a>
must be recompiled and reinstalled.
Installing a new snapshot is&mdash;as always&mdash;recommended.

<a name="20140324"></a>
<h3>2014/03/24 - tcpwrappers removed</h3>
libwrap and tcpd have been removed. The leftover remnants must be purged.
The entries in /etc/host.{allow,deny} can be converted into filtering 
rules in /etc/pf.conf.

<pre>
    rm -f /usr/lib/libwrap{,_p}.*
    rm -f /usr/libexec/tcpd
    rm -f /usr/include/tcpd.h
    rm -f /usr/sbin/tcpd{chk,match}
    rm -f /usr/share/man/man3/hosts_access.3
    rm -f /usr/share/man/man5/hosts.{allow,deny}.5
    rm -f /usr/share/man/man5/hosts_{access,options}.5
    rm -f /usr/share/man/man8/tcpd{,chk,match}.8
    rm -f /etc/hosts.{allow,deny}
</pre>

<a name="20140326"></a>
<h3>2014/03/26 - rmail(8) and uucpd(8) moved to ports</h3>
/bin/rmail and uucpd(8) have been removed from the base system and added
to the ports tree.
As a result, the old binaries and manual pages should be removed:
<pre>
    rm -f /bin/rmail
    rm -f /usr/share/man/man8/rmail.8
    rm -f /usr/libexec/uucpd
    rm -f /usr/share/man/man8/uucpd.8
</pre>
Users of these programs should install the rmail and uucpd packages instead.

<a name="20140329"></a>
<h3>2014/03/29 - pflow(4) pflowproto 9 removed</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflow&sektion=4">pflow(4)'s</a> pflowproto 9 has been removed. Consider using pflowproto 10.

<a name="20140414"></a>
<h3>2014/04/14 - snmpd(8), snmpctl(8), and relayd(8) now communicate via AgentX protocol</h3>
The communications channel over which snmpd(8) accepts trap requests has been
converted to the AgentX protocol.
Users who have configured relayd(8) to send traps on host status changes will have to
modify their configurations for both snmpd(8) and relayd(8):<br>
snmpd.conf(5):<br>
<pre>
    # listen for AgentX connections
    socket "/var/run/agentx.sock" agentx
</pre>
relayd.conf(5) syntax has changed, from &quot;send trap&quot; to &quot;snmp trap&quot;:
<pre>
    # used to be "send trap"
    snmp trap "/var/run/agentx.sock"
</pre>

<a name="20140419"></a>
<h3>2014/04/19 - altq removed</h3>
The old queueing subsystem, altq, has been removed.
If any <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>
rules mentioning "altq" or "oldqueue" are still present, loading the ruleset
will now fail, so must be removed or migrated to the new queue configuration.
Old headers should also be removed:

<pre>
    rm -rf /usr/include/altq
</pre>

<a name="20140420"></a>
<h3>2014/04/20 - [ports] roundcubemail update needs config changes</h3>
Roundcube configuration files have been rearranged, if upgrading an
existing system you will need to migrate your settings from old config
files (db.inc.php and main.inc.php) to the new file (config.inc.php).

<a name="20140421"></a>
<h3>2014/04/21 - lpd(8): hosts.equiv removed</h3>
hosts.equiv usage has been deprecated and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lpd&sektion=8">lpd(8)</a>
does not use it anymore for access control.
Users of this file should migrate to use <u>/etc/hosts.lpd</u>.

<a name="20140422"></a>
<h3>2014/04/22 - kerberosV removed</h3>
kerberosV has been removed. The login methods &quot;krb5&quot; and
&quot;krb5-or-pwd&quot; are not supported anymore and should be
removed from
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=login.conf&sektion=5">login.conf(5)</a>.
Many dependencies and packages have to be updated.
The libraries, headers and other related files should be removed from
the system.

<pre>
	rm -rf /etc/kerberosV/
	rm -f /etc/rc.d/{kadmind,kdc,kpasswdd,ipropd_master,ipropd_slave}
	rm -f /usr/bin/asn1_compile
	rm -f /usr/bin/compile_et
	rm -f /usr/bin/kcc
	rm -f /usr/bin/kdestroy
	rm -f /usr/bin/kf
	rm -f /usr/bin/kgetcred
	rm -f /usr/bin/kinit
	rm -f /usr/bin/klist
	rm -f /usr/bin/krb5-config
	rm -f /usr/bin/slc
	rm -f /usr/bin/string2key
	rm -f /usr/bin/verify_krb5_conf
	rm -rf /usr/include/kerberosV/
	rm -f /usr/lib/libasn1{,_p}.*
	rm -f /usr/lib/libcom_err{,_p}.*
	rm -f /usr/lib/libgssapi{,_p}.*
	rm -f /usr/lib/libhdb{,_p}.*
	rm -f /usr/lib/libheimbase{,_p}.*
	rm -f /usr/lib/libkadm5clnt{,_p}.*
	rm -f /usr/lib/libkadm5srv{,_p}.*
	rm -f /usr/lib/libkafs{,_p}.*
	rm -f /usr/lib/libkdc{,_p}.*
	rm -f /usr/lib/libkrb5{,_p}.*
	rm -f /usr/lib/libroken{,_p}.*
	rm -f /usr/lib/libwind{,_p}.*
	rm -rf /usr/libdata/perl5/site_perl/*-openbsd/kerberosV/
	rm -f /usr/libexec/auth/login_krb5{,-or-pwd}
	rm -f /usr/libexec/hprop{,d}
	rm -f /usr/libexec/ipropd-{master,slave}
	rm -f /usr/libexec/kadmind
	rm -f /usr/libexec/kdc
	rm -f /usr/libexec/kfd
	rm -f /usr/libexec/kpasswdd
	rm -f /usr/sbin/iprop-log
	rm -f /usr/sbin/kadmin
	rm -f /usr/sbin/kimpersonate
	rm -f /usr/sbin/kstash
	rm -f /usr/sbin/ktutil
	rm -f /usr/share/info/heimdal.info
	rm -f /usr/share/man/man1/kdestroy.1
	rm -f /usr/share/man/man1/kf.1
	rm -f /usr/share/man/man1/kgetcred.1
	rm -f /usr/share/man/man1/kinit.1
	rm -f /usr/share/man/man1/klist.1
	rm -f /usr/share/man/man1/krb5-config.1
	rm -f /usr/share/man/man1/kswitch.1
	rm -f /usr/share/man/man3/ecalloc.3
	rm -f /usr/share/man/man3/getarg.3
	rm -f /usr/share/man/man3/{gss,krb5,krb}_*.3
	rm -f /usr/share/man/man3/gssapi.3
	rm -f /usr/share/man/man3/gsskrb5_extract_authz_data_from_sec_context.3
	rm -f /usr/share/man/man3/gsskrb5_register_acceptor_identity.3
	rm -f /usr/share/man/man3/k_afs_cell_of_file.3
	rm -f /usr/share/man/man3/k_hasafs.3
	rm -f /usr/share/man/man3/k_hasafs_recheck.3
	rm -f /usr/share/man/man3/k_pioctl.3
	rm -f /usr/share/man/man3/k_setpag.3
	rm -f /usr/share/man/man3/k_unlog.3
	rm -f /usr/share/man/man3/kadm5_pwcheck.3
	rm -f /usr/share/man/man3/kafs*.3
	rm -f /usr/share/man/man3/krb524_*.3
	rm -f /usr/share/man/man3/parse_time.3
	rm -f /usr/share/man/man3/rtbl.3
	rm -f /usr/share/man/man5/krb5.conf.5
	rm -f /usr/share/man/man5/mech.5
	rm -f /usr/share/man/man8/hprop{,d}.8
	rm -f /usr/share/man/man8/iprop{,-log}.8
	rm -f /usr/share/man/man8/ipropd-{master,slave}.8
	rm -f /usr/share/man/man8/kadmin{,d}.8
	rm -f /usr/share/man/man8/kdc.8
	rm -f /usr/share/man/man8/kerberos.8
	rm -f /usr/share/man/man8/kfd.8
	rm -f /usr/share/man/man8/kimpersonate.8
	rm -f /usr/share/man/man8/kpasswdd.8
	rm -f /usr/share/man/man8/kstash.8
	rm -f /usr/share/man/man8/ktutil.8
	rm -f /usr/share/man/man8/login_krb5{,-or-pwd}.8
	rm -f /usr/share/man/man8/string2key.8
	rm -f /usr/share/man/man8/verify_krb5_conf.8
</pre>

Remaining users of kerberosV should download and install the software
manually or use the kerberos packages when they become available.

<a name="20140503"></a>
<h3>2014/05/03 - bcrypt hash advanced to $2b$ mode</h3>
The bcrypt(3) hash has been advanced to the new $2b$ mode.  Newly
created hashes will follow this form.  Older systems may not
understand this format.

<a name="20140527"></a>
<h3>2014/05/27 - route(8) -priority 1 reserved for the kernel</h3>
The route(8) priority 1 has been reserved for the kernel and it is
no longer possible to set it from userland.

<a name="20140603"></a>
<h3>2014/06/03 - sshd(8) change of default MACs, modes, ciphers</h3>
This refers to a change made on 2014/03/25.
Weak or broken hashes, ciphers and modes were removed from the default
sshd(8) configuration.
Some clients do not support any of the methods which are now available
by default, so will not be able to connect without changes.
In those cases, the client should be updated or replaced.
If this is impossible, the weak methods can be enabled via 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sshd_config&sektion=5">sshd_config(5)</a>.
<ul>
<li>Some mobile phone clients (including bbssh) only support CBC cipher modes.
For those with no upgrade path on the client side, see
<tt>Ciphers</tt> in sshd_config(5).
<li>Paramiko (Python SSH library, used for MySQL Workbench and some
versions of Ansible, amongst others) does not support any of the default
key exchange algorithms.
For those with no alternative on the client side, you will need to add
<tt>diffie-hellman-group-exchange-sha1</tt> to <tt>KexAlgorithms</tt>
</tt> in sshd_config(5), e.g.
<blockquote>KexAlgorithms curve25519-sha256@@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha1,diffie-hellman-group-exchange-sha1</blockquote>
</ul>
See <tt>/var/log/authlog</tt> after a failed connection for information
that will help track down these issues.

<a name="20140612"></a>
<h3>2014/06/12 - nginx(8) syslog logging config change</h3>
The configuration options for logging to syslog in nginx(8) have changed
(external patch now replaced by a backported patch from newer nginx).
If you have enabled these options in /etc/nginx/nginx.conf (not used by
default), you will need to update them; e.g.

<pre>
	error_log  syslog:server=unix:/dev/log,severity=notice;
	access_log syslog:server=unix:/dev/log,severity=notice main;
</pre>

<a name="20140613"></a>
<h3>2014/06/13 - changes to minherit(2) and new getentropy(2)</h3>
Some upcoming changes are being pushed into the kernel over a few days.
Update a new kernel and userland now, to avoid failure.

<a name="20140623"></a>
<h3>2014/06/23 - [ports] Bacula packaging changes</h3>
Bacula has been split into subpackages for different database backends.
Users of the recommended PostgreSQL backend won't need to make any changes;
users of other backends should run uninstall Bacula and then add it again
with pkg_add, selecting the preferred database backend from the list offered.

<a name="20140630"></a>
<h3>2014/06/30 - strict nat-to/rdr-to translation pool checks</h3>
pfctl(8) will now raise an error for a range of ambiguous <tt>nat-to</tt>
and <tt>rdr-to</tt> specifications.  In particular, when a translation pool
contains entries with different address families such as
<tt>{ 127.0.0.1 ::1 }</tt> or entries that when expanded result in similar
specifications: for example <tt>nat-to em0</tt> may expand to an IPv4 and
an IPv6 addresses.

<a name="20140709"></a>
<h3>2014/07/09 - relayd(8) filter grammar changed</h3>
The ability to filter HTTP connections in relayd(8) has been
reimplemented.  relayd.conf(5) syntax has changed; the &quot;tag&quot;
keyword in the redirect section has been renamed to &quot;pftag&quot;
and various HTTP-specific configuration directives in the protocol
section have been replaced with new generic filter rules.
<p>
The port sysutils/relayd-updateconf is provided to convert the old
configuration directives to the new filter grammar.
It is provided as a convenience, but the resulting file must be
inspected for correctness.

<a name="20140710"></a>
<h3>2014/07/10 - ifconfig(8) ABI break</h3>
ifconfig(8) now shows whether an encrypted wifi network is using WEP or WPA.
Old ifconfig binaries running on a new kernel will not be able to scan
for wireless networks:

<pre>
	ifconfig: SIOCG80211ALLNODES: Inappropriate ioctl for device
</pre>

Upgrading from snapshots is recommended.
When upgrading from source, ifconfig should be recompiled with new net80211
headers after upgrading the kernel:
<pre>
	cd /usr/src
	make includes
	cd /usr/src/sbin/ifconfig
	make clean
	make obj
	make depend
	make
	make install
</pre>

<a name="20140711"></a>
<h3>2014/07/11 - IPv6 autoconf changes</h3>
<!-- hint for 5.6 upgrade instructions: before 5.6, netstart will move
to the base set, so a upgrade using snaphots/final 5.6 will not run
into problems. Users might want to use ifconfig <if> inet6 autoconf,
but the rtsol vs. /etc/netstart problem mentioned below should not be
an issue. -->
The sysctl to globally accept IPv6 router advertisements has been replaced
with a per-interface "AUTOCONF6" flag, set by "<tt>ifconfig &lt;if&gt; inet6
autoconf</tt>".
<p>
This is set automatically on a given interface where rtsol/rtsold is used,
so for typical use cases no changes will be needed, however rare configurations
which do not use rtsol but just rely on the periodic announcements will need
to manually set this flag.
<p>
If you upgrade from source and depend on rtsol for network access to
work after rebooting the new kernel, then install new headers, rebuild
rtsol/rtsold/ifconfig and apply <a
href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/etc/netstart.diff?r1=1.140&r2=1.141">revision
1.141</a> to <tt>/etc/netstart</tt> before the reboot. 
<p>
For pppoe(4) interfaces, IPV6CP negotiation will only occur if an interface
has an IPv6 address.
This can be done with "ifconfig pppoe0 inet6 eui64" or a hostname.pppoe0
entry like "inet6 eui64".

<a name="20140713"></a>
<h3>2014/07/13 - Addition of sendsyslog(2) system call</h3>
The syslog_r(3) function has been switched over to rely on the
sendsyslog(2) system call introduced around 2014/07/10.
<p>
A kernel containing the system call is required perhaps even for getting
single user; so use of upgrades is recommended.

<a name="20140716"></a>
<h3>2014/07/16 - lynx(1) moved to ports</h3>
Lynx has been removed from the base system and has been moved to ports.
The following files and directories should be deleted (the latter is
optional; if you plan to install Lynx from packages you may prefer to
keep it).
<pre>
	rm -f /usr/bin/lynx
	rm -f /usr/share/man/man1/lynx.1
	rm -rf /usr/share/doc/html/lynx_help
	rm -f /etc/lynx.cfg
</pre>
To install Lynx from packages:
<pre>
	pkg_add lynx
</pre>

<a name="20140722"></a>
<h3>2014/07/22 - [ports] Increased file descriptor use in KDE4</h3>
Some KDE4 components (kded4, Akonadi, Digikam database and others) now
monitor directories for changes via kqueue(2).
This saves CPU time, but kqueue requires one file descriptor per
monitored file.
Thus limits for system (<tt>kern.maxfiles</tt> sysctl) and/or process
(<tt>openfiles</tt> in login.conf(5)) need to be adjusted:
<ul>
<li>about 3500 descriptors will be always eaten by kded4;
<li>one file descriptor per message in each local maildir used by Akonadi;
<li>one file descriptor per picture in Digikam database;
<li>one file descriptor per file in each folder view window;
<li>one file descriptor per each folder being monitored itself;
<li>and so on.
</ul>

<a name="20140723"></a>
<h3>2014/07/23 - Changes to /etc infrastructure</h3>
Many sample configuration files have moved from /etc to /etc/examples;
if wishing to configure the relevant software on a new system, you could
copy the file (use -p to preserve permissions), or create a new file
from scratch with correct ownership and permissions.
sysmerge will warn when an example file has changed and a matching
file under /etc exists, so that the admin can check if the modifications
apply to his setup.
<p>
Some files which may have local modifications, notably /etc/rc and
/etc/netstart, have been moved from the etc*.tgz file set to the base*.tgz
file set.
If you are reliant on services started from modified versions of these
files to login, you will need to take action <b>before</b> upgrading.<p>
The installation instructions with many ports have suggested using the
following method to add to the "pkg_scripts" or "syslogd_flags" variables:
<pre>
	pkg_scripts="${pkg_scripts} somescript"
</pre>
This is no longer supported.
You must replace these with one long pkg_scripts line - continuation lines
are not possible.
Recent changes to the syslog(3) function calls have removed the need for
additional log sockets in most cases, so in general lines like this can be
removed:
<pre>
	syslogd_flags="${syslogd_flags} -a /path/to/dev/log"
</pre>
<b>After</b> upgrading, be sure to run <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysmerge&amp;sektion=8">sysmerge(8)</a>
to update files from the <tt>etc56.tgz</tt> set, notably <tt>rc.conf</tt>.
Changes to <tt>/etc/rc</tt> depend on having up-to-date versions of these files.
Seeing the message "no closing quote" during system startup is an indication
that these files have not been updated.

<a name="20140727"></a>
<h3>2014/07/27 - [ports] rc scripts of both apache webservers renamed</h3>
The rc scripts of the apache-httpd-openbsd and apache-httpd packages had
been renamed from httpd to apache resp. httpd2 to apache2, to avoid
conflicts with the base httpd.
If you're running one or both of them, you have to replace "httpd"
by "apache" in your pkg_scripts and httpd?_flags entries in rc.conf.local,
and use the new names in any cronjobs or scripts which restart Apache (e.g.
for log rotation).
<p>
After upgrading the apache-httpd-openbsd package, you'll also have to reinstate
the rc script of the base http, which
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pkg_add&sektion=1">pkg_add(1)</a>
has moved out of the way, and you should remove partial package probably left around:
<pre>
	mv -i /etc/rc.d/httpd.* /etc/rc.d/httpd
	pkg_delete partial-apache-httpd-openbsd
</pre>

<!-- OpenBSD 5.6 -->

d284 1
a284 1
<small>$OpenBSD: current.html,v 1.564 2014/10/31 13:52:10 jsing Exp $</small>
@


1.564
log
@Document clean up for libressl to libtls rename.
@
text
@d82 1
d940 13
d955 1
a955 1
<small>$OpenBSD: current.html,v 1.563 2014/10/30 17:07:14 sthen Exp $</small>
@


1.563
log
@mention symon/symux split adjustment
@
text
@d81 1
d927 12
d941 1
a941 1
<small>$OpenBSD: current.html,v 1.562 2014/10/19 13:21:42 matthieu Exp $</small>
@


1.562
log
@More sendmail bits to remove
@
text
@d80 1
d919 7
d928 1
a928 1
<small>$OpenBSD: current.html,v 1.561 2014/10/14 15:56:39 sthen Exp $</small>
@


1.561
log
@/dev/lkm; Mark Patruck
@
text
@d881 6
d920 1
a920 1
<small>$OpenBSD: current.html,v 1.560 2014/10/14 14:33:19 sthen Exp $</small>
@


1.560
log
@tweak notes about apache move from base; more explicit information on how to
handle LoadModule lines, found the hard way by me.
@
text
@d904 1
a904 1
	rm -rf /usr/lkm /usr/share/lkm
d914 1
a914 1
<small>$OpenBSD: current.html,v 1.559 2014/10/13 14:00:10 sthen Exp $</small>
@


1.559
log
@more lkm files, some from jmc, some from examing sets diff
@
text
@d161 5
a165 3
etc) and cannot switch at this time, see the port www/apache-httpd-openbsd
(if using modules, note that LoadModule configuration lines will need to
be adjusted).
d914 1
a914 1
<small>$OpenBSD: current.html,v 1.558 2014/10/13 13:22:03 sthen Exp $</small>
@


1.558
log
@lkm removal, from Theo Buehler
@
text
@d902 1
a902 2
	rm -rf /usr/lkm

d906 2
d912 1
a912 1
<small>$OpenBSD: current.html,v 1.557 2014/10/06 15:43:04 sthen Exp $</small>
@


1.557
log
@adjust comment about ipv6 on pppoe(4) to use "ifconfig .. inet6 eui64"
instead of ".. inet6 autoconf" which does additional things on -current
@
text
@d79 1
d897 11
d911 1
a911 1
<small>$OpenBSD: current.html,v 1.556 2014/10/05 11:39:10 sthen Exp $</small>
@


1.556
log
@note some more problems caused by renaming apache's rc scripts
@
text
@a631 4
It is also necessary to set this on pppoe(4) interfaces if the link-local
address is not created automatically by some means (e.g. if you do not
hard-code an IPv6 address).
<p>
d637 5
d899 1
a899 1
<small>$OpenBSD: current.html,v 1.555 2014/10/04 10:47:12 sthen Exp $</small>
@


1.555
log
@tweak previous sections

- update apache removal instructions so people don't zap /usr/sbin/httpd etc

- ipv6 "autoconf" flag must be added manually for pppoe(4) to work if you
don't hardcode the address
@
text
@d726 3
a728 1
by "apache" in your pkg_scripts and httpd?_flags entries.
d730 1
a730 1
After upgrading the apache-httpd-openbsd package, you'll also have to bring
d898 1
a898 1
<small>$OpenBSD: current.html,v 1.554 2014/09/25 20:53:07 landry Exp $</small>
@


1.554
log
@Add a note about collectd update.
@
text
@d168 1
a168 1
    rm -f /usr/sbin/{apachectl,apxs,httpd,logresolve,rotatelogs,suexec}
d170 1
a170 1
    rm -f /usr/share/man/man8/{apachectl.8,apxs.8,httpd.8,logresolve.8}
a171 1
    rm -f /etc/rc.d/httpd
d173 2
d632 4
d896 1
a896 1
<small>$OpenBSD: current.html,v 1.553 2014/09/19 11:16:31 ajacoutot Exp $</small>
@


1.553
log
@Add a note about the rc.conf move.
@
text
@d78 1
d881 8
d891 1
a891 1
<small>$OpenBSD: current.html,v 1.552 2014/09/16 17:16:32 ajacoutot Exp $</small>
@


1.552
log
@Another sendmail directory to remove.
@
text
@d77 1
d871 9
d882 1
a882 1
<small>$OpenBSD: current.html,v 1.551 2014/09/16 10:59:17 sthen Exp $</small>
@


1.551
log
@reorder <br> after previous
@
text
@d866 2
d872 1
a872 1
<small>$OpenBSD: current.html,v 1.550 2014/09/16 10:57:59 sthen Exp $</small>
@


1.550
log
@zap stray <hr>
@
text
@d868 1
d870 1
a870 2
<br>
<small>$OpenBSD: current.html,v 1.549 2014/09/16 10:55:06 sthen Exp $</small>
@


1.549
log
@typo s/enables/enable//
@
text
@d870 1
a870 3
<hr>
<br>
<small>$OpenBSD: current.html,v 1.548 2014/09/15 22:51:00 matthieu Exp $</small>
@


1.548
log
@Sendmail removed
@
text
@d825 1
a825 1
	rcctl enables nginx
d872 1
a872 1
<small>$OpenBSD: current.html,v 1.547 2014/09/13 14:02:19 brad Exp $</small>
@


1.547
log
@Mention removal of procfs.

From Mark Patruck <mark at wrapped dot cx>
@
text
@d76 1
d825 1
a825 1
	rcctl enable nginx
d845 23
d872 1
a872 1
<small>$OpenBSD: current.html,v 1.546 2014/09/09 08:43:01 sthen Exp $</small>
@


1.546
log
@expand the notes about /etc/rc changes making an explicit note that updating
etc* files (especially rc.conf) is a required step
@
text
@d75 1
d836 8
d848 1
a848 1
<small>$OpenBSD: current.html,v 1.545 2014/08/29 11:39:18 sebastia Exp $</small>
@


1.545
log
@mention split of puppetdb configuration file with puppetdb-2.1.0p1
@
text
@d704 6
d839 1
a839 1
<small>$OpenBSD: current.html,v 1.544 2014/08/26 23:28:19 brad Exp $</small>
@


1.544
log
@Also remove the rc.d script for BIND.

From Jiri B
@
text
@d74 1
d823 6
d833 1
a833 1
<small>$OpenBSD: current.html,v 1.543 2014/08/26 21:16:10 rpe Exp $</small>
@


1.543
log
@remove redundant entry about openssl move and revert TOC entry

noted by dorian buettner at gmx.de, thanks
@
text
@d751 1
d805 1
a805 1
	rm -rf /etc/rc.d/nginx
d826 1
a826 1
<small>$OpenBSD: current.html,v 1.542 2014/08/26 21:02:22 rpe Exp $</small>
@


1.542
log
@Add move of openssl to TOC
@
text
@a73 1
<li><a href="#20140826c">2014/08/26 - openssl(1) has moved to /usr/bin<a>
a820 8
<a name="20140826c"></a>
<h3>2014/08/26 - openssl(1) has moved to /usr/bin</h3>
The openssl(1) binary has moved from /usr/sbin to /usr/bin.
As such, the old binary should be removed:
<pre>
	rm -f /usr/sbin/openssl
</pre>

d825 1
a825 1
<small>$OpenBSD: current.html,v 1.541 2014/08/26 19:42:35 robert Exp $</small>
@


1.541
log
@add notes about nginx moving to ports
@
text
@d74 1
d822 1
a822 1
<a name="20140826"></a>
d834 1
a834 1
<small>$OpenBSD: current.html,v 1.540 2014/08/26 18:06:56 jsing Exp $</small>
@


1.540
log
@Document the migration of openssl(1) from /usr/sbin to /usr/bin.
@
text
@d73 1
d799 32
d833 1
a833 1
<small>$OpenBSD: current.html,v 1.539 2014/08/25 07:40:35 doug Exp $</small>
@


1.539
log
@Fix the path to rndc.conf.5
@
text
@d72 1
d790 8
d800 1
a800 1
<small>$OpenBSD: current.html,v 1.538 2014/08/22 23:52:00 brad Exp $</small>
@


1.538
log
@Also clear out the man pages for BIND.
@
text
@d758 1
a758 1
	rm -f /usr/share/man/man8/rndc.conf.5
d791 1
a791 1
<small>$OpenBSD: current.html,v 1.537 2014/08/22 20:53:44 sthen Exp $</small>
@


1.537
log
@bind->ports
@
text
@d747 1
a747 1
in packages). The old executables should be removed:
d749 18
a766 3
	cd /usr/sbin
	rm dnssec-keygen dnssec-signzone named named-checkconf
	rm named-checkzone nsupdate rndc rndc-confgen
d791 1
a791 1
<small>$OpenBSD: current.html,v 1.536 2014/08/15 10:31:57 matthieu Exp $</small>
@


1.536
log
@Explicit list of X resource files to delete.

There may be files installed by packages there that should not be removed.
@
text
@d71 1
d740 34
d776 1
a776 1
<small>$OpenBSD: current.html,v 1.535 2014/08/13 21:17:10 matthieu Exp $</small>
@


1.535
log
@moved X resource files...
I've added <!-- OpenBSD 5.6 --> markers to ease rotation of the file
once it's released.
@
text
@d730 8
a737 1
	rm /etc/X11/app-defaults/*
d741 1
a741 1
<small>$OpenBSD: current.html,v 1.534 2014/08/13 17:02:21 nick Exp $</small>
@


1.534
log
@
move to cvsweb.openbsd.org
@
text
@d69 2
a70 1

d718 14
d734 1
a734 1
<small>$OpenBSD: current.html,v 1.533 2014/07/27 10:54:07 kili Exp $</small>
@


1.533
log
@Note about apache-httpd* rc script renaming.

ok sthen@@
@
text
@d625 1
a625 1
href="http://openbsd.cs.toronto.edu/cgi-bin/cvsweb/src/etc/netstart.diff?r1=1.140&r2=1.141">revision
d719 1
a719 1
<small>$OpenBSD: current.html,v 1.532 2014/07/24 17:48:08 stsp Exp $</small>
@


1.532
log
@fix link to /etc/netstart r1.141 diff
@
text
@d68 1
d700 17
d719 1
a719 1
<small>$OpenBSD: current.html,v 1.531 2014/07/23 19:07:17 zhuk Exp $</small>
@


1.531
log
@Nitpicking from Pablo Mndez Hernndez, thanks!
@
text
@d624 1
a624 1
href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/netstart.diff?r1=1.140;r2=1.141;sortby=date">revision
d701 1
a701 1
<small>$OpenBSD: current.html,v 1.530 2014/07/23 10:33:45 ajacoutot Exp $</small>
@


1.530
log
@Fix the sysmerge part; there is no need to keep the CVS IDs around for the
examples.

ok sthen@@
@
text
@d66 1
a66 1
<li><a href="#20140722">2014/07/22 - Increased file descriptor use in KDE4</a>
d653 1
a653 1
<h3>2014/07/22 - Increased file descriptor use in KDE4</h3>
d701 1
a701 1
<small>$OpenBSD: current.html,v 1.529 2014/07/23 08:55:35 sthen Exp $</small>
@


1.529
log
@attempt to document the /etc changes, prompted by noticing that my modified
/etc/rc had been overwritten. oops.
@
text
@d673 6
a678 4
copy the file (use -p to preserve permissions), leaving the &#36;OpenBSD$
"RCS id" line intact if you would like sysmerge to notify you of updates
to the "examples" file, or create a new file from scratch with correct
ownership and permissions.<p>
d701 1
a701 1
<small>$OpenBSD: current.html,v 1.528 2014/07/22 21:54:26 sthen Exp $</small>
@


1.528
log
@- lynx removal, from Maximilian Fillinger plus small tweak
- add missing toc entry for KDE4 FD use
- tweak wording for KDE4 FD use
@
text
@d67 1
d669 28
d699 1
a699 1
<small>$OpenBSD: current.html,v 1.527 2014/07/22 19:26:46 zhuk Exp $</small>
@


1.527
log
@Notify KDE4 users about increased file descriptors pressure.
@
text
@d65 2
d634 17
d652 1
a652 1
<h3>2014/07/22 - Increased file descriptors pressure in KDE4</h3>
d654 3
a656 2
monitor directories for changes via kqueue(2). This saves CPU time alot,
but now those components keep a lot of files open at the same time.
d661 1
a661 1
<li>one file descriptor per letter in each local maildir used by Akonadi;
d670 1
a670 1
<small>$OpenBSD: current.html,v 1.526 2014/07/14 05:48:51 deraadt Exp $</small>
@


1.526
log
@argh, be clear
@
text
@d632 16
d650 1
a650 1
<small>$OpenBSD: current.html,v 1.525 2014/07/14 05:25:52 deraadt Exp $</small>
@


1.525
log
@clarify
@
text
@d627 1
a627 1
sendsyslog(2) system call introduced on 2014/07/10.
d630 1
a630 2
single user; so use of upgrades are required, or install a new kernel
from around 2014/07/13.
d634 1
a634 1
<small>$OpenBSD: current.html,v 1.524 2014/07/14 04:05:29 deraadt Exp $</small>
@


1.524
log
@major crank.  A new kernel interface arrived on the 10th, and now we are
starting to use it.  Be very careful crossing this: kernel first, then
build new userland.
@
text
@d626 2
a627 4
syslog_r(3) has been switched over to use the sendsyslog(2) system
introduced on 2014/07/13.  A new kernel is required for operation;
use of upgrades are required, or install a new kernel from 2-3 days
earlier.
d629 3
a631 2
The sendsyslog(2) system call was added around 2014/07/10, so a very
recent kernel may suffice.
d635 1
a635 1
<small>$OpenBSD: current.html,v 1.523 2014/07/13 15:54:24 benno Exp $</small>
@


1.523
log
@add a note to the ipv6 autoconf change for users that do not have ipv4
anymore. discussed with henning florian and naddy.
@
text
@d64 1
d623 11
d636 1
a636 1
<small>$OpenBSD: current.html,v 1.522 2014/07/11 16:57:14 sthen Exp $</small>
@


1.522
log
@mention autoconf6, because there's probably a user somewhere who doesn't
run rtsol
@
text
@d603 5
d611 1
d616 6
a621 1

d624 1
a624 1
<small>$OpenBSD: current.html,v 1.521 2014/07/11 14:50:56 sthen Exp $</small>
@


1.521
log
@sha1 reprieve; drop some sections of the list of known incompatible ssh clients
(but expand the section for paramiko with more information about kexalgorithms
and common affected software)
@
text
@d63 1
d601 10
d613 1
a613 1
<small>$OpenBSD: current.html,v 1.520 2014/07/10 14:34:29 stsp Exp $</small>
@


1.520
log
@Add entry about ifconfig scan change.
@
text
@d519 7
a525 11
<li>Some mobile phone clients (including iSSH) do not support SHA2.
For those with no upgrade path on the client side, see
<tt>MACs</tt> in sshd_config(5).
<li>Paramiko (Python SSH library, used for old Ansible and others) does not
support SHA2 hashes or any of the default key exchange algorithms.
For those with no alternative on the client side, see
<tt>MACs</tt> and <tt>KexAlgorithms</tt> in sshd_config(5).
<li>SHA2 hashes were not added to PuTTY until 0.63; while it is
possible to adjust server configuration to allow them to connect,
users of earlier versions should upgrade anyway as there were
important security fixes in that release.
d602 1
a602 1
<small>$OpenBSD: current.html,v 1.519 2014/07/09 16:54:58 reyk Exp $</small>
@


1.519
log
@relayd's filter grammar has been changed.  See the port
sysutils/relayd-updateconf for a conversion helper.
@
text
@d62 2
d580 24
d606 1
a606 1
<small>$OpenBSD: current.html,v 1.518 2014/06/30 13:31:51 mikeb Exp $</small>
@


1.518
log
@mention stricter translation pool checks; reminded by sthen@@
@
text
@d61 1
d565 13
d580 1
a580 1
<small>$OpenBSD: current.html,v 1.517 2014/06/23 15:04:23 sthen Exp $</small>
@


1.517
log
@bacula package split
@
text
@d60 1
d555 9
d566 1
a566 1
<small>$OpenBSD: current.html,v 1.516 2014/06/13 18:53:33 deraadt Exp $</small>
@


1.516
log
@oops, date
@
text
@d58 2
a59 1
<li><a href="#20140613">2014/06/13 - changes to minherit(2) and new getentropy(2)</h3>
d547 7
d556 1
a556 1
<small>$OpenBSD: current.html,v 1.515 2014/06/13 08:14:55 deraadt Exp $</small>
@


1.515
log
@mention new syscalls coming
@
text
@d58 1
a58 1
<li><a href="#20140612">2014/07/13 - changes to minherit(2) and new getentropy(2)</h3>
d541 2
a542 2
<a name="20140612"></a>
<h3>2014/07/13 - changes to minherit(2) and new getentropy(2)</h3>
d548 1
a548 1
<small>$OpenBSD: current.html,v 1.514 2014/06/12 19:41:20 sthen Exp $</small>
@


1.514
log
@add a note about config changes for nginx users using syslog logging
@
text
@d58 1
d541 5
d548 1
a548 1
<small>$OpenBSD: current.html,v 1.513 2014/06/04 12:33:44 sthen Exp $</small>
@


1.513
log
@add a note about paramiko to the ssh section (no common MACs or KexAlgorithms)
@
text
@d57 1
d528 12
d542 1
a542 1
<small>$OpenBSD: current.html,v 1.512 2014/06/03 16:33:52 sthen Exp $</small>
@


1.512
log
@additional information for some ssh clients, and point people at authlog.
prompted by a mail from Nick Fleisher.
@
text
@d509 1
a509 1
<li>Some mobile phone clients (including bbssh) are restricted to CBC modes.
d512 1
a512 1
<li>Some mobile phone clients (including iSSH) do not support SHA2 hashes.
d515 4
d529 1
a529 1
<small>$OpenBSD: current.html,v 1.511 2014/06/03 12:03:40 sthen Exp $</small>
@


1.511
log
@I keep getting bitten by the changes made to sshd defaults in March and I'm
sure others will too; add an entry to current.html warning them.
@
text
@d505 3
a507 3
In those cases, either the client must be updated or replaced, or the
server configuration must be modified to allow common methods.
Notably:
d509 1
a509 1
<li>Some mobile phone clients are restricted to CBC modes.
d512 3
d520 2
d525 1
a525 1
<small>$OpenBSD: current.html,v 1.510 2014/05/28 22:21:52 sthen Exp $</small>
@


1.510
log
@tweak httpd bits; drop "packages are not yet available" line, add a short
note about config changes needed for modules
@
text
@d56 1
a378 1

a384 1

a391 1

a488 1

a494 1

d498 20
d520 1
a520 1
<small>$OpenBSD: current.html,v 1.509 2014/05/27 09:40:29 mpi Exp $</small>
@


1.509
log
@If you are using the highest priority (route -priority 1) in some of
your config files/scripts, you need to update them.
@
text
@d137 3
a139 2
etc) and cannot switch at this time, see the port www/apache-httpd-openbsd.
Packages are not yet available due to release engineering, but will follow.
d504 1
a504 1
<small>$OpenBSD: current.html,v 1.508 2014/05/07 13:38:43 jca Exp $</small>
@


1.508
log
@Fix date for the bcrypt minor version bump.
From vigdis at chown dot me.
@
text
@d55 1
d495 6
d503 1
a503 1
<small>$OpenBSD: current.html,v 1.507 2014/05/03 17:17:32 deraadt Exp $</small>
@


1.507
log
@bcrypt moves to $2b$
@
text
@d488 1
a488 1
<h3>2014/04/03 - bcrypt hash advanced to $2b$ mode</h3>
d496 1
a496 1
<small>$OpenBSD: current.html,v 1.506 2014/05/01 15:02:29 nick Exp $</small>
@


1.506
log
@
remove 5.4->5.5 stuff
@
text
@d54 1
d487 7
d496 1
a496 1
<small>$OpenBSD: current.html,v 1.505 2014/04/23 09:58:16 ajacoutot Exp $</small>
@


1.505
log
@Remove krb5 rc.d(8) scripts.

ok reyk@@
@
text
@a31 30
<li><a href="#20130806">2013/08/06 - vax port switches to gcc 3</a>
<li><a href="#20130812">2013/08/12 - kernel modesetting in radeondrm(4)</a>
<li><a href="#20130813">2013/08/13 - system ABI break: time_t and others changed</a>
<li><a href="#20130813b">2013/08/13 - new identd(8) implementation</a>
<li><a href="#20130816">2013/08/16 - vlan(4) and pppoe(4) ABI breaks</a>
<li><a href="#20130823">2013/08/23 - [ports] php 5.4</a>
<li><a href="#20130914">2013/09/14 - [ports] dspam 3.10.2</a>
<li><a href="#20130919">2013/09/19 - [ports] wordpress 3.6.1</a>
<li><a href="#20131010">2013/10/10 - [ports] Apache Subversion 1.8.3</a>
<li><a href="#20131012">2013/10/12 - pf queue changes</a>
<li><a href="#20131014">2013/10/14 - [ports] PostgreSQL 9.3.0</a>
<li><a href="#20131019">2013/10/17 - [ports] Lout 3.40</a>
<li><a href="#20131031">2013/10/31 - new routing message version</a>
<li><a href="#20131103">2013/11/03 - [ports] ngircd 21</a>
<li><a href="#20131105">2013/11/05 - [ports] RRDtool 1.4.8</a>
<li><a href="#20131106">2013/11/06 - smtpd.conf changes</a>
<li><a href="#20131119">2013/11/19 - [ports] Icinga 1.10</a>
<li><a href="#20131126">2013/11/26 - NSD 4.0.0</a>
<li><a href="#20131204">2013/12/04 - libcompat removed</a>
<li><a href="#20131204">2013/12/08 - libcompat removal, updated</a>
<li><a href="#20131215">2013/12/15 - popa3d removed</a>
<li><a href="#20131216">2013/12/16 - cwm(1) default keybinding change</a>
<li><a href="#20131228">2013/12/28 - i386 is now PIE</a>
<li><a href="#20131228b">2013/12/28 - atexit(3) moved</a>
<li><a href="#20131126">2014/01/07 - NSD 4.0.0, updated</a>
<li><a href="#20140112">2014/01/12 - freetype 2.5.2</a>
<li><a href="#20140120">2014/01/20 - amd64/i386 installboot</a>
<li><a href="#20140210">2014/02/10 - [ports] No Java on i386</a>
<li><a href="#20140214">2014/02/14 - amd64/i386 serial consoles need current bootloader</a>
<!-- 5.5 entries start below here -->
d62 2
a63 2
It contains information about changes from 5.4-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 5.3 or earlier, or people
d67 2
a68 2
If you wish to update to 5.4-release or 5.4-stable from previous
versions, see the <a href="upgrade54.html">upgrade guide</a>.
a83 512
<a name="20130806"></a>
<h3>2013/08/06 - vax port switches to gcc 3</h3>
The vax port now uses gcc 3.3.6 as its system compiler. Upgrading with a recent
snapshot is recommended; however, for reference, the manual upgrade steps are:
<br>
<ul>
<li>Build the new C compiler with the existing compiler:
<pre>
   cd /usr/src/gnu/usr.bin/gcc
   make -f Makefile.bsd-wrapper clean
   make -f Makefile.bsd-wrapper obj
   make -f Makefile.bsd-wrapper -DBOOTSTRAP depend
   make -f Makefile.bsd-wrapper -DBOOTSTRAP
   make -f Makefile.bsd-wrapper -DBOOTSTRAP includes
   make -f Makefile.bsd-wrapper -DBOOTSTRAP install
</pre>
<li>Let the rest of the system know the platform now runs gcc 3:
<pre>
   cd /usr/src/share/mk
   make install
</pre>
<li>Build and install an up-to-date preprocessor:
<pre>
   cd /usr/src/usr.bin/cpp
   make clean
   make obj
   make depend
   make
   make install
</pre>
<li>Build and install the C runtime startup files:
<pre>
   cd /usr/src/lib/csu
   make clean
   make depend
   make
   make install
</pre>
<li>Now rebuild the compiler set again:
<pre>
   cd /usr/src/gnu/usr.bin/gcc
   make -f Makefile.bsd-wrapper clean
   make -f Makefile.bsd-wrapper obj
   make -f Makefile.bsd-wrapper depend
   make -f Makefile.bsd-wrapper
   make -f Makefile.bsd-wrapper install
</pre>
<li>The system is now ready to be rebuild with gcc3:
<pre>
   cd /usr/src
   rm -fR /usr/include/g++
   make obj
   make build
</pre>
</ul>

<p>
<a name="20130812"></a>
<h3>2013/08/12 - kernel modesetting in radeondrm(4)</h3>
radeondrm(4) now uses kernel modesetting, either install the firmware and wait
for a snapshot or follow the steps below:
<ul>
<li>Install the Radeon firmware:
<pre>
    pkg_add http://firmware.openbsd.org/firmware/snapshots/radeondrm-firmware-20131002p0.tgz
</pre>
<li>Build xenocara as usual
<li>Build and install a kernel as usual
<li>Reboot
</ul>

<p>
<a name="20130813"></a>
<h3>2013/08/13 - system ABI break: time_t and others changed</h3>
The system ABI has been changed to expand time_t, ino_t, and
clock_t and the <i>ident</i> and <i>data</i> members of struct
kevent to 64bit types.  A GENERIC kernel with this change will not
run old binaries and the /etc/{pwd,spwd}.db files must be regenerated
after updating the system binaries.  Rolling back to stock
5.4 will require reinstalling.
<br>
To update across this change you must now use a snapshot.
The recommended steps for updating are:
<ol>
<li>Save a record of what packages you had installed, manually and
automatically:
<pre>
    pkg_info -mq >/root/pkg_list_manual
    pkg_info -q >/root/pkg_list_full
</pre>
</li>
<li>Review the "package notes" below for information about known problems with
packages during the changeover. Some will need additional steps taking before the
update.
</li>
<li>While their uninstall programs can still execute, remove all packages
(except firmware packages):
<pre>
    pkg_delete -X /var/db/pkg/*-firmware-[0-9]*
</pre>
</li>
<li>Install/upgrade to the new snapshot.
If you upgrade instead of doing a fresh install,
then <b>BEFORE</b> rebooting, run
<pre>
    /mnt/usr/sbin/pwd_mkdb -d /mnt/etc /mnt/etc/master.passwd
    cp /dev/null /mnt/var/log/lastlog
    cp /dev/null /mnt/var/log/wtmp
</pre>
</li>
<li>Now that the base and X are updated, install new packages:
<pre>
    pkg_add -z -l /root/pkg_list_manual
    pkg_add -za -l /root/pkg_list_full
</pre>
</li>
</ol>

<h3>Package notes</h3>

<ul>
<li>Reminder: if you rely on anything from packages for management
access to the system (for example: shells, VPN software, routing daemons,
etc), arrange alternative access before removing packages.
<li>Various packages use non-portable data formats in cache files etc.
If you run into problems it may be necessary to remove these.
<li>If using the <b>rrdtool</b> package, note that the binary RRD database file
format on 32-bit architectures will not be compatible.
Export any RRD files to XML format before updating:
<pre>
    # Single file:
    rrdtool dump filename.rrd filename.xml

    # To convert a batch:
    for i in *.rrd; do rrdtool dump $i ${i%.rrd}.xml; done
</pre>
After updating, restore them as follows:
<pre>
    # Single file:
    rrdtool restore filename.xml filename.rrd

    # To convert a batch:
    for i in *.xml; do rrdtool restore $i ${i%.xml}.rrd; done
</pre>
This is not necessary on 64-bit architectures (amd64, sparc64, etc).
<li>If using the <b>postgresql</b> package, this has had a major version update
which requires the usual dump+restore cycle as described in the update notes
(see /usr/local/share/doc/pkg-readmes/postgresql*).
<b>The old database must be dumped *before* upgrading OpenBSD.</b>
Also note that because all old packages are removed, the normal warning
from pkg_add at update time is not triggered.
</ul>

<p>
<a name="20130813b"></a>
<h3>2013/08/13 - new identd(8) implementation</h3>
/usr/libexec/identd has been replaced by a new libevent-based daemon,
/usr/sbin/identd.
You should remove the old version:
<pre>
   rm -f /usr/libexec/identd
</pre>
If you are currently using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=identd&sektion=8">identd(8)</a>
as a standalone daemon (identd_flags is set in /etc/rc.conf.local),
check the manual to confirm that the flags are still valid.<p>
If you are currently using it from
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inetd&sektion=8">inetd(8)</a>,
remove the "ident" entries from /etc/inetd.conf, set identd_flags instead,
reload inetd and start identd:
<pre>
   $EDITOR /etc/inetd.conf
   $EDITOR /etc/rc.conf.local
   /etc/rc.d/inetd reload
   /etc/rc.d/identd start
</pre>
Note that if you have not yet run sysmerge, "/etc/rc.d/identd start" will
report a failure.

<p>
<a name="20130816"></a>
<h3>2013/08/16 - vlan(4) and pppoe(4) ABI breaks</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vlan&sektion=4">vlan(4)</a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&sektion=4">pppoe(4)</a>
now use their own set of dedicated ioctls. So make sure to compile and install
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a> against the new headers if you are building your kernel from source.
<p>
This specially applies to people relying on these interfaces and willing to cross
the <a href="#20130813">time_t ABI break</a> by updating with source.

<p>
<a name="20130823"></a>
<h3>2013/08/23 - [ports] php 5.4</h3>
The primary PHP version used in ports has switched to 5.4.
This change means that if you run PHP applications packaged in ports,
you will need to switch your webserver config to use the newer version
of PHP.
Check /etc/php-5.3.ini for changes from the default configuration:
<pre>   diff /usr/local/share/examples/php-5.3/php.ini-production /etc/php-5.4.ini</pre>
and carry them across to /etc/php-5.4.ini.
You will also need to check for links to any active PHP extension modules
in /etc/php-5.3 and re-create them in /etc/php-5.4, e.g.
<pre>   cd /etc/php-5.4
   ls -l ../php-5.4.sample
   ln -s ../php-5.4.sample/pdo_mysql.ini .
   # (etc)
</pre>
If you are currently using PHP with Apache in base, you will also need to
adjust your Apache configuration:
<pre>   cd /var/www/conf/modules
   ln -fs /var/www/conf/modules.sample/php-5.4.conf /var/www/conf/modules/php.conf</pre>

<p>
<a name="20130914"></a>
<h3>2013/09/14 - [ports] dspam 3.10.2</h3>
If you were using one of the mysql or pgsql FLAVORS of the <b>dspam</b> package
you will have to manually install the corresponding driver subpackage after the
update to the 3.10.2 version.
If you were using dspam with the PostgreSQL driver:
<pre>
   pkg_add dspam-pgsql
</pre>
If you were using dspam with the MySQL driver:
<pre>
   pkg_add dspam-mysql
</pre>

<p>
<a name="20130919"></a>
<h3>2013/09/19 - [ports] wordpress 3.6.1</h3>
The twentyeleven theme from wordpress 3.5.x is no longer included with
wordpress 3.6.x. If you are using this theme, back it up before updating:
<pre>
   cd /var/www/wordpress/wp-content/themes &&
   cp -Rp twentyeleven twentyeleven.bak
</pre>
and restore it after wordpress update:
<pre>
   cd /var/www/wordpress/wp-content/themes &&
   mv twentyeleven.bak twentyeleven
</pre>

<p>
<a name="20131010"></a>
<h3>2013/10/10 - [ports] Apache Subversion 1.8.3</h3>
Apache Subversion has been upgraded to version 1.8.3.
This release of Subversion updates the working copy format (client-side).
Existing working copies need to be upgraded using <tt>svn upgrade</tt>
because Subversion 1.8 cannot operate with older working copy formats.
See the <a href="http://subversion.apache.org/docs/release-notes/1.8.html#wc-upgrade"
>section about working copy upgrades</a> in Subversion's release notes for details.
The server is fully backwards compatible and will serve existing repositories just fine.
However, to take advantage of new FSFS repository features a repository upgrade is necessary.
See the <a href="http://subversion.apache.org/docs/release-notes/1.8.html#fsfs-enhancements"
>section about FSFS enhancements</a> for details.

<p>
<a name="20131012"></a>
<h3>2013/10/12 - pf queue changes</h3>
PF has a new implementation of packet queueing - the configuration syntax
is different to that used by altq.
During a transition period, the old mechanism is still available by
replacing "queue" keywords in /etc/pf.conf with "oldqueue".
If instead you wish to switch to the new implementation, review the
documentation in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>.

<p>
<a name="20131014"></a>
<h3>2013/10/14 - [ports] PostgreSQL 9.3.0</h3>
Major update to 9.3.0. A dump/restore is required.

<p>
<a name="20131019"></a>
<h3>2013/10/17 - [ports] Lout 3.40</h3>
<!-- XXX 5.4->5.5 upgrade notes do not need to mention this as we are
         telling people to remove/reinstall all packages  -->
Lout packages were merged and require removal before upgrade: 
<pre>
    pkg_delete lout lout-doc
    pkg_add lout
</pre>

<p>
<a name="20131031"></a>
<h3>2013/10/31 - new routing message version</h3>
To convert the route expire time to 64 bit, it was necessary to
change the routing message structure.
Make sure that you boot a new kernel before replacing the user land
programs.
<br>
A small compatibility layer allows to configure addresses with old
ifconfig and new kernel.
Old route get also works in this setup.
Old dhclient with new kernel assigns the address but hangs.
Make sure to reboot your machine sucessfully during transition.

<p>
<a name="20131103"></a>
<h3>2013/11/03 - [ports] ngircd 21</h3>
ngircd's configuration directory has changed; if updating from a previous
version, you will need to move your old configuration file into place:
<pre>
   mv /etc/ngircd.conf /etc/ngircd/ngircd.conf
</pre>
Additional steps may be needed if you have configured it to use a motd file,
ssl or chroot.

<p>
<a name="20131105"></a>
<h3>2013/11/05 - [ports] RRDtool 1.4.8</h3>
RRDtool has changed to using Cairo/Pango for graph and text generation.
If using it in a chroot jail (for cgi/php scripts, etc), you will need to
take additional steps to install the relevant files.
A script is provided to copy the relevant libraries and support files;
see <a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/ports/net/rrdtool/pkg/README-main">/usr/local/share/doc/pkg-readmes/rrdtool-1.4.8</a>
for more details.

<p>
<a name="20131106"></a>
<h3>2013/11/06 - smtpd.conf changes</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd&sektion=8">smtpd(8)</a>
configuration file parser was updated.
Some changes might require existing setups to be adapted.
<p>
SSL certificates must be explicitely defined,
and the "certificate" keyword becomes "pki" in listen and relay rules.
<pre>
    pki mail.example.com certificate "/etc/ssl/mail.example.com.crt" \
                         key "/etc/ssl/private/mail.example.com.key"
    listen on egress tls pki mail.example.com auth
</pre>
<p>
The "ssl" keyword in relay urls becomes "secure".
<pre>
    table secrets file:/etc/mail/secrets
    accept for any relay via secure+auth://label@@some.mx auth &lt;secrets&gt;
</pre>
<p>
Rules matching on source address must use "from source" rather than just "from".
<pre>
    accept from source "192.168.0.0/16" for any relay
</pre>
<p>
The "helo" keyword in relay rules becomes "hostnames".
<pre>
    accept for any relay source &lt;source&gt; hostnames &lt;htable&gt;
</pre>
<p>
See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd.conf&sektion=5">smtpd.conf(5)</a>
for more details.

<p>
<a name="20131119"></a>
<h3>2013/11/19 - [ports] Icinga 1.10</h3>
Note that the deprecated (and ignored) "log_external_commands_user" option
has been removed from Icinga.
If this is present in your configuration, Icinga will fail to start until
you remove it.
This is in addition to the database schema upgrades that are needed as
usual for Icinga-web/NDOUtils users (see the pkg-readme for more
information).

<p>
<a name="20131126"></a>
<h3>2013/11/26 - NSD 4.0.0 (updated 2014/01/07 with info about zonec)</h3>
NSD has had a major update to 4.0.0 which requires some changes.

<pre>
    mv /etc/nsd.conf /var/nsd/etc/nsd.conf
    cd /usr/sbin &amp;&amp; rm nsd-notify nsd-patch nsd-xfer nsd-zonec nsdc
    cd /usr/share/man/man8 &amp;&amp; rm nsd-notify.8 nsd-patch.8 nsd-xfer.8 \
        nsd-zonec.8 nsdc.8
    chown _nsd /var/nsd/db/nsd.db
    printf '\nremote-control:\n\tcontrol-enable: yes\n' &gt;&gt; /var/nsd/etc/nsd.conf
</pre>

<ul>
<li>If you use "include" lines in nsd.conf, move the files into the chroot
path (/var/nsd) and change the include lines to specify the full path
(include: "/var/nsd/etc/nsd.local").
NSD strips the chroot prefix as needed.</li>

<li>Remove any old cronjobs that run "nsdc patch", this is no longer needed.
If you wish to write slaved zones to the readable data files, you may like
to change this for a 'nsdc-control write' job.</li>

<li>Check nsd_flags in /etc/rc.conf.local; NSD is now started by
nsd-control(8) so nsd(8) flags are no longer available.</li>

<li>It is no longer necessary to compile zone files manually with zonec.
This is now handled automatically by the main program.</li>
</ul>

<p>
<a name="20131204"></a>
<h3>2013/12/04 - libcompat removed (updated 2013/12/08)</h3>
libcompat has been removed from base:
<pre>
    rm -f /usr/lib/libcompat.a /usr/lib/libcompat_p.a
    rm -f /usr/include/{re_comp,regexp,sgtty,sys/timeb}.h
    rm -f /usr/share/man/man3/{re_comp,re_exec,rexec,regexp}.3
    rm -f /usr/share/man/man3/{cuserid,ftime,gtty,setrgid,setruid,stty}.3
</pre>

<p>
<a name="20131215"></a>
<h3>2013/12/15 - popa3d removed</h3>
popa3d has been removed from base:
<pre>
    rm -f /etc/rc.d/popa3d
    rm -f /usr/sbin/popa3d
    rm -f /usr/share/man/man8/popa3d.8
</pre>

<p>
<a name="20131216"></a>
<h3>2013/12/16 - cwm(1) default keybinding change</h3>
Default keybinding changed for 'maximize' from CM-f to CM-m.  CM-f is now
bound to the new 'fullscreen' mode.  See
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwmrc&sektion=5">cwmrc(5)</a> for re-mapping details.

<a name="20131228"></a>
<h3>2013/12/28 - i386 is now PIE</h3>
The i386 platform has been switched to
PIE (position-independent executables) by default.
Everyone is encouraged to update via snapshots (dated after 2013/12/28); if you
want to upgrade via sources, follow these instructions:
<p>
First, install the new system Makefiles with the change to PIE_ARCH in
bsd.own.mk:
<blockquote><pre>
    cd /usr/src/share/mk && make install
</pre></blockquote>
Then, recompile and install gcc and binutils.
<blockquote><pre>
    cd /usr/src/gnu/usr.bin/binutils
    make -f Makefile.bsd-wrapper clean && make -f Makefile.bsd-wrapper obj && \
        make -f Makefile.bsd-wrapper depend && make -f Makefile.bsd-wrapper
    cd /usr/src/gnu/usr.bin/cc
    make clean && make obj && make depend && make && make install
    cd /usr/src/gnu/usr.bin/binutils && make -f Makefile.bsd-wrapper install
</pre></blockquote>
Finally, recompile your system by following the procedure outlined in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<a name="20131228b"></a>
<h3>2013/12/28 - atexit(3) moved</h3>
To support the use of atexit(3) in dynamically loaded shared objects,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=atexit&sektion=3">atexit(3)</a>
is now provided by the C runtime startup files.
If you want to upgrade via source you will need to build and install
new C runtime startup files first:
<pre>
    cd /usr/src/lib/csu
    make clean
    make obj
    make depend
    make
    make install
</pre>
Now you can follow the standard procedure outlined in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<a name="20140112"></a>
<h3>2014/01/12 - freetype updated</h3>
Freetype in Xenocara was updated to 2.5.2. This update moves the
headers files around. Old headers need to be manually removed:
<pre>
    rm -rf /usr/X11R6/include/freetype2/freetype
    rm -f /usr/X11R6/include/ft2build.h
</pre>

<a name="20140120"></a>
<h3>2014/01/20 - amd64/i386 installboot</h3>
The amd64 and i386 architectures have switched to the new
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&sektion=8">installboot(8)</a>.
As a result, the old binary and manual should be removed:
<pre>
    rm -f /usr/mdec/installboot
    rm -f /usr/share/man/man8/{amd64,i386}/installboot.8
</pre>

<a name="20140210"></a>
<h3>2014/02/10 - [ports] No Java on i386</h3>
Be aware that Java is currently broken on i386 so packages are not available.
If you rely on Java on OpenBSD, you will either need to make a new installation
with the amd64 architecture (which supports 64-bit Intel CPUs as well as AMD
CPUs), or stay with an older version of OpenBSD.

<a name="20140214"></a>
<h3>2014/02/14 - amd64/i386 serial consoles need current bootloader</h3>
This is a reminder of a change which
<a href="http://permalink.gmane.org/gmane.os.openbsd.cvs/124092">took place
earlier</a>: backward compatibility for learning about a serial console device
from old boot loaders was removed.
This only affects those who will be doing a <b>remote</b> upgrade <b>via serial
console</b> on <b>amd64/i386</b> who do not already have "BOOT 3.20" (amd64)
or "BOOT 3.18" (i386).<p>
The boot loader is updated as part of the normal upgrade procedure
via the install media, but users who have previously upgraded from
OpenBSD 5.2 or earlier using the "without install kernel" method on a
running system may have missed this step.
If this is the case, you can either do a ramdisk-based update to
OpenBSD 5.4 first (even if you are already running 5.4), or manually
use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&manpath=OpenBSD+5%2e4&arch=i386">installboot(8)</a>
<!-- XXX do not update 5.4 link above to 5.5, this needs to show the old
installboot syntax which has now changed -->
to update to boot blocks from OpenBSD 5.3 or 5.4, before attempting to
boot a 5.5 kernel or installer.

<!-- 5.5 entries start below here -->
d488 1
a488 1
<small>$OpenBSD: current.html,v 1.504 2014/04/22 18:51:40 henning Exp $</small>
@


1.504
log
@Herr Reyk not only tried to rm -f a directory, he also assumes all the
world is amd64. Scandalous! I'll claim a beer from him tonite.
@
text
@d943 1
d1030 1
a1030 1
<small>$OpenBSD: current.html,v 1.503 2014/04/22 18:48:58 jca Exp $</small>
@


1.503
log
@Fix instructions for Kerberos removal.  From Kent R. Spillner.
@
text
@d968 1
a968 1
	rm -rf /usr/libdata/perl5/site_perl/amd64-openbsd/kerberosV/
d1029 1
a1029 1
<small>$OpenBSD: current.html,v 1.502 2014/04/22 15:19:10 reyk Exp $</small>
@


1.502
log
@kerberosV removed
@
text
@d968 1
a968 1
	rm -f /usr/libdata/perl5/site_perl/amd64-openbsd/kerberosV/
d1029 1
a1029 1
<small>$OpenBSD: current.html,v 1.501 2014/04/20 22:35:47 ajacoutot Exp $</small>
@


1.501
log
@Document hosts.equiv removal for lpd(8).
@
text
@d83 1
d930 97
d1029 1
a1029 1
<small>$OpenBSD: current.html,v 1.500 2014/04/20 22:26:11 ajacoutot Exp $</small>
@


1.500
log
@Fix bogus altq <li> tag.
@
text
@d82 1
d921 8
d931 1
a931 1
<small>$OpenBSD: current.html,v 1.499 2014/04/20 20:03:24 sthen Exp $</small>
@


1.499
log
@ports/mail/roundcubemail update
@
text
@a912 1
<li><a href="#20140420">2014/04/20 - altq removed</a>
d922 1
a922 1
<small>$OpenBSD: current.html,v 1.498 2014/04/19 18:41:38 jturner Exp $</small>
@


1.498
log
@Fix up some html in TOC and remove extra html that crept in
@
text
@d81 1
d913 8
d923 1
a923 1
<small>$OpenBSD: current.html,v 1.497 2014/04/19 16:17:51 sthen Exp $</small>
@


1.497
log
@bye bye altq
@
text
@d55 1
a55 1
<li><a href="#20131228b">2013/12/28 - atexit(3) moved</h3>
a899 1
<li><a href="#20140419">2014/04/19 - altq removed</a>
d914 1
a914 1
<small>$OpenBSD: current.html,v 1.496 2014/04/14 14:50:36 jturner Exp $</small>
@


1.496
log
@Add AgentX entry to TOC
@
text
@d80 1
d900 13
d915 1
a915 1
<small>$OpenBSD: current.html,v 1.495 2014/04/14 13:37:04 blambert Exp $</small>
@


1.495
log
@Instructions for dealing with AgentX traps.

ok reyk@@
@
text
@d79 1
d901 1
a901 1
<small>$OpenBSD: current.html,v 1.494 2014/03/31 12:50:44 sthen Exp $</small>
@


1.494
log
@Update unbound notes; previous users from packages will also need to adjust
pkg_scripts/unbound_flags lines. Clarify which situations require manually
adding users.
@
text
@d881 17
d900 1
a900 1
<small>$OpenBSD: current.html,v 1.493 2014/03/30 19:21:46 nick Exp $</small>
@


1.493
log
@
remove www@@ refs
@
text
@d709 5
a713 2
Unbound has moved to the base OS; if the package is installed,
remove it before upgrading to avoid a conflict in /etc/rc.d/unbound.
d717 1
d720 4
a723 2
The _unbound user should be added using vipw (or the UID should be
modified if you were previously using Unbound from ports).
d735 2
a736 2
crossing automatically.  Manual intervention will be required in those
situations.
d883 1
a883 1
<small>$OpenBSD: current.html,v 1.492 2014/03/29 11:33:29 florian Exp $</small>
@


1.492
log
@pflowproto 9 is no more.
@
text
@a4 1
<link rev= "made" href= "mailto:www@@openbsd.org">
a875 2
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
d877 1
a877 1
<small>$OpenBSD: current.html,v 1.491 2014/03/28 20:01:06 nigel Exp $</small>
@


1.491
log
@Additional files to remove for wrap removal

Ok aja
@
text
@d79 1
d872 4
d880 1
a880 1
<small>$OpenBSD: current.html,v 1.490 2014/03/27 22:38:08 jca Exp $</small>
@


1.490
log
@Updated instructions for rmail/uucpd.  ok sthen@@ naddy@@
@
text
@d843 2
d850 6
d875 1
a875 1
<small>$OpenBSD: current.html,v 1.489 2014/03/26 09:08:56 fgsch Exp $</small>
@


1.489
log
@Fix an error and a few more corrections, mostly cosmetic
@
text
@a63 1
<li><a href="#20140312">2014/03/12 - rmail removed</a>
a71 1
<li><a href="#20140317d">2014/03/17 - uucpd(8) removed</a>
d78 1
a621 8
<a name="20140312"></a>
<h3>2014/03/12 - rmail removed</h3>
/bin/rmail has been removed.
<pre>
    rm -f /bin/rmail
    rm -f /usr/share/man/man8/rmail.8
</pre>

a771 9
<a name="20140317d"></a>
<h3>2014/03/17 - uucpd(8) removed</h3>
uucpd(8) has been removed.
As a result, the old binaries and manual pages should be removed:
<pre>
    rm -f /usr/libexec/uucpd
    rm -f /usr/share/man/man8/uucpd.8
</pre>

d850 13
d867 1
a867 1
<small>$OpenBSD: current.html,v 1.488 2014/03/25 09:55:25 ajacoutot Exp $</small>
@


1.488
log
@Remove all of libwrap; ok sthen@@
@
text
@d437 3
a439 3
  pki mail.example.com certificate "/etc/ssl/mail.example.com.crt" \
                       key "/etc/ssl/private/mail.example.com.key"
  listen on egress tls pki mail.example.com auth
d444 2
a445 2
  table secrets file:/etc/mail/secrets
  accept for any relay via secure+auth://label@@some.mx auth &lt;secrets&gt;
d450 1
a450 1
  accept from source "192.168.0.0/16" for any relay
d455 1
a455 1
  accept for any relay source &lt;source&gt; hostnames &lt;htable&gt;
d478 6
a483 6
  mv /etc/nsd.conf /var/nsd/etc/nsd.conf
  cd /usr/sbin &amp;&amp; rm nsd-notify nsd-patch nsd-xfer nsd-zonec nsdc
  cd /usr/share/man/man8 &amp;&amp; rm nsd-notify.8 nsd-patch.8 nsd-xfer.8 \
    nsd-zonec.8 nsdc.8
  chown _nsd /var/nsd/db/nsd.db
  printf '\nremote-control:\n\tcontrol-enable: yes\n' &gt;&gt; /var/nsd/etc/nsd.conf
d508 4
a511 4
   rm -f /usr/lib/libcompat.a /usr/lib/libcompat_p.a
   rm -f /usr/include/{re_comp,regexp,sgtty,sys/timeb}.h
   rm -f /usr/share/man/man3/{re_comp,re_exec,rexec,regexp}.3
   rm -f /usr/share/man/man3/{cuserid,ftime,gtty,setrgid,setruid,stty}.3
d519 3
a521 3
   rm -f /etc/rc.d/popa3d
   rm -f /usr/sbin/popa3d
   rm -f /usr/share/man/man8/popa3d.8
d541 1
a541 1
cd /usr/src/share/mk && make install
d545 7
a551 7
cd /usr/src/gnu/usr.bin/binutils
make -f Makefile.bsd-wrapper clean && make -f Makefile.bsd-wrapper obj && \
       make -f Makefile.bsd-wrapper depend && make -f Makefile.bsd-wrapper
cd /usr/src/gnu/usr.bin/cc
make clean && make obj && make depend && make && make install
cd /usr/src/gnu/usr.bin/binutils && make -f Makefile.bsd-wrapper install<
/pre></blockquote>
d661 1
a661 1
_smtpq:*:103:103::0:0:SMTP Daemon:/var/empty:/sbin/nologin
d665 1
a665 1
_smtpq:*:103:
d685 8
a692 8
    rm -r /usr/lib/apache
    rm -r /usr/share/doc/html/httpd
    rm /usr/bin/{dbmmanage,htdigest}
    rm /usr/sbin/{apachectl,apxs,httpd,logresolve,rotatelogs,suexec}
    rm /usr/share/man/man1/{dbmmanage.1,htdigest.1}
    rm /usr/share/man/man8/{apachectl.8,apxs.8,httpd.8,logresolve.8}
    rm /usr/share/man/man8/{rotatelogs.8,suexec.8}
    rm /etc/rc.d/httpd
d703 1
a703 1
    rm -r /var/www/icons
d706 6
a711 6
    rm /var/www/cgi-bin/{printenv,test-cgi}
    rm /var/www/conf/{httpd.conf,magic,mime.types}
    rm /var/www/htdocs/{apache_pb.gif,blowfish.jpg,bsd_small.gif,index.html}
    rm /var/www/htdocs/{lock.gif,logo23.jpg,logo24.jpg,mod_ssl_sb.gif}
    rm /var/www/htdocs/{openbsd_pb.gif,openbsdpower.gif,openssl_ics.gif}
    rm /var/www/htdocs/smalltitle.gif
d728 1
a728 1
_unbound:*:53:53::0:0:Unbound Daemon:/var/unbound:/sbin/nologin
d734 1
a734 1
_unbound:*:53:
d809 1
a809 1
cd /usr/src/share/mk && make install
d813 6
a818 6
cd /usr/src/gnu/usr.bin/binutils
make -f Makefile.bsd-wrapper clean && make -f Makefile.bsd-wrapper obj && \
       make -f Makefile.bsd-wrapper depend && make -f Makefile.bsd-wrapper
cd /usr/src/gnu/usr.bin/cc
make clean && make obj && make depend && make && make install
cd /usr/src/gnu/usr.bin/binutils && make -f Makefile.bsd-wrapper install
d865 1
a865 1
    rm -r /usr/include/tcpd.h
d872 1
a872 1
<small>$OpenBSD: current.html,v 1.487 2014/03/24 17:51:52 tedu Exp $</small>
@


1.487
log
@do you want to live forever?
@
text
@d863 1
a863 1
    rm -f /usr/lib/libwrap.*
d872 1
a872 1
<small>$OpenBSD: current.html,v 1.486 2014/03/24 16:26:13 deraadt Exp $</small>
@


1.486
log
@typo
@
text
@d79 1
d858 10
d872 1
a872 1
<small>$OpenBSD: current.html,v 1.485 2014/03/24 15:38:21 guenther Exp $</small>
@


1.485
log
@Note the mount(2) change's effects
@
text
@d736 1
a736 1
On or before March 19, sysmerge(8) was unable to do the /ec/group
d861 1
a861 1
<small>$OpenBSD: current.html,v 1.484 2014/03/23 23:53:33 naddy Exp $</small>
@


1.484
log
@document bm.h and md4.h removal
@
text
@d78 1
d840 17
d861 1
a861 1
<small>$OpenBSD: current.html,v 1.483 2014/03/23 19:03:49 tedu Exp $</small>
@


1.483
log
@die librt, die
@
text
@d77 1
d829 10
d843 1
a843 1
<small>$OpenBSD: current.html,v 1.482 2014/03/23 18:10:45 deraadt Exp $</small>
@


1.482
log
@unify PIE instructions with others
@
text
@d76 1
d820 8
d832 1
a832 1
<small>$OpenBSD: current.html,v 1.481 2014/03/23 18:01:07 kettenis Exp $</small>
@


1.481
log
@Tell people to update their kernel before going PIE on powerpc.
@
text
@d537 2
a538 2
<b>cd /usr/src/share/mk && sudo make install
</b></pre></blockquote>
d541 1
a541 1
<b>cd /usr/src/gnu/usr.bin/binutils
d545 3
a547 3
make clean && make obj && make depend && make && sudo make install
cd /usr/src/gnu/usr.bin/binutils && sudo make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
d805 2
a806 2
<b>cd /usr/src/share/mk && sudo make install
</b></pre></blockquote>
d809 1
a809 1
<b>cd /usr/src/gnu/usr.bin/binutils
d813 3
a815 3
make clean && make obj && make depend && make && sudo make install
cd /usr/src/gnu/usr.bin/binutils && sudo make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
d823 1
a823 1
<small>$OpenBSD: current.html,v 1.480 2014/03/23 17:50:20 deraadt Exp $</small>
@


1.480
log
@Mention that for the _unbound group, older sysmerge cannot do this
automatically, but manual intervention was required.  Thankfully that
has been improved...
@
text
@d801 2
a802 1
First, install the new system Makefiles with the change to PIE_ARCH in
d823 1
a823 1
<small>$OpenBSD: current.html,v 1.479 2014/03/23 17:31:43 pascal Exp $</small>
@


1.479
log
@Update instructions for the PIE switch on powerpc.
@
text
@d733 4
d822 1
a822 1
<small>$OpenBSD: current.html,v 1.478 2014/03/21 19:41:58 sthen Exp $</small>
@


1.478
log
@- say "updated" in the contents list for Unbound.
- previous users of the package shouldn't add a duplicate user.
@
text
@d75 1
d790 23
d818 1
a818 1
<small>$OpenBSD: current.html,v 1.477 2014/03/21 19:11:48 tedu Exp $</small>
@


1.477
log
@unbound user and group
@
text
@d69 1
a69 1
<li><a href="#20140316">2014/03/16 - [ports] unbound(8) moved to base</a>
d714 1
a714 1
remove it before upgrading to avoid a conflict in /etc/rc.d/unbound:
d720 2
a721 1
The _unbound user should be added as well.
d794 1
a794 1
<small>$OpenBSD: current.html,v 1.476 2014/03/21 03:11:16 lteo Exp $</small>
@


1.476
log
@Fix typo in rm command for uucpd.  Diff from Daniel Bolgheroni.
@
text
@d720 11
d793 1
a793 1
<small>$OpenBSD$</small>
@


1.475
log
@consistent formatting of command line pre chunks, at least for 2014
@
text
@d765 1
a765 1
    rm -f /usr/libxec/uucpd
d782 1
a782 1
<small>$OpenBSD: current.html,v 1.474 2014/03/19 19:55:49 okan Exp $</small>
@


1.474
log
@rcp(1) removal
@
text
@d383 2
a384 2
   pkg_delete lout lout-doc
   pkg_add lout
d558 6
a563 6
  cd /usr/src/lib/csu
  make clean
  make obj
  make depend
  make
  make install
d665 2
a666 2
cd /var/spool/smtpd
chown -R _smtpq corrupt incoming purge queue temporary
d698 9
a706 9
    # rm -r /var/www/icons
    # rmdir /var/www/conf/{modules,modules.sample}
    # rmdir /var/www/users
    # rm /var/www/cgi-bin/{printenv,test-cgi}
    # rm /var/www/conf/{httpd.conf,magic,mime.types}
    # rm /var/www/htdocs/{apache_pb.gif,blowfish.jpg,bsd_small.gif,index.html}
    # rm /var/www/htdocs/{lock.gif,logo23.jpg,logo24.jpg,mod_ssl_sb.gif}
    # rm /var/www/htdocs/{openbsd_pb.gif,openbsdpower.gif,openssl_ics.gif}
    # rm /var/www/htdocs/smalltitle.gif
d717 1
a717 1
    # pkg_delete unbound
d733 1
a733 1
  rm -f /usr/include/sys/agpio.h
d782 1
a782 1
<small>$OpenBSD: current.html,v 1.473 2014/03/18 15:41:19 sthen Exp $</small>
@


1.473
log
@uucpd, ppp(8) ("user-ppp") and pppoe(8) were removed - suggest possible
alternatives. Tweaked from a diff from okan@@
@
text
@d74 1
d769 8
d782 1
a782 1
<small>$OpenBSD: current.html,v 1.472 2014/03/17 22:10:33 kettenis Exp $</small>
@


1.472
log
@<sys/agpio.h> removal.
@
text
@d72 2
d735 34
d773 1
a773 1
<small>$OpenBSD: current.html,v 1.471 2014/03/17 21:05:27 sthen Exp $</small>
@


1.471
log
@ftpd now denies uid < 1000 by default
@
text
@d71 1
d723 10
d737 1
a737 1
<small>$OpenBSD: current.html,v 1.470 2014/03/17 12:50:55 florian Exp $</small>
@


1.470
log
@welcome back htpasswd(1)
@
text
@d70 1
d716 6
d726 1
a726 1
<small>$OpenBSD: current.html,v 1.469 2014/03/17 01:43:57 sthen Exp $</small>
@


1.469
log
@Add a quick mention of php to the httpd/nginx notes, and point out php-fpm
@
text
@d670 1
a670 1
If you need the old httpd(8) or tools (e.g. htpasswd, logresolve, htdigest,
d677 1
a677 1
    rm /usr/bin/{dbmmanage,htdigest,htpasswd}
d679 1
a679 1
    rm /usr/share/man/man1/{dbmmanage.1,htdigest.1,htpasswd.1}
d719 1
a719 1
<small>$OpenBSD: current.html,v 1.468 2014/03/16 22:26:25 sthen Exp $</small>
@


1.468
log
@pkg_delete unbound before upgrading, to avoid a conflict with /etc/rc.d/unbound
reminded by benno@@
@
text
@d703 2
d719 1
a719 1
<small>$OpenBSD: current.html,v 1.467 2014/03/14 08:43:20 sthen Exp $</small>
@


1.467
log
@tweak httpd removal text; make it clear that users moving to
apache-httpd-openbsd still need to remove the first set of files and
probably want to keep many of the second set.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2005-2013 by OpenBSD">
d69 1
d374 2
d704 8
d717 1
a717 1
<small>$OpenBSD: current.html,v 1.466 2014/03/14 01:10:40 tedu Exp $</small>
@


1.466
log
@tweak http wording
@
text
@d667 2
a668 2
For people who need the old httpd(8) and cannot switch at this time,
see the port www/apache-httpd-openbsd.
d670 1
a670 1
The following files and directories need to be removed:
d687 2
d706 1
a706 1
<small>$OpenBSD: current.html,v 1.465 2014/03/14 01:02:33 sthen Exp $</small>
@


1.465
log
@tweak httpd notes
@
text
@d666 1
a666 3
for your http serving needs.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nginx&sektion=8">nginx(8)</a>
is not a drop-in replacement.
d704 1
a704 1
<small>$OpenBSD: current.html,v 1.464 2014/03/14 00:37:12 tedu Exp $</small>
@


1.464
log
@mistakes here too, by tim van der molen
@
text
@d669 3
a671 2
People who need the old httpd(8) and cannot switch at this time a port is
forthcoming.
d674 1
a674 1
    rm -r /usr/lib/apache 
d684 5
a688 4
<b>Warning: On systems running (or ran in the past) an http daemon of any kind
care must be taken and files analyzed case by case or user content or
important configuration files might be deleted.</b>
Otherwise the following files and directories can be savely removed.
d706 1
a706 1
<small>$OpenBSD: current.html,v 1.463 2014/03/13 23:59:47 florian Exp $</small>
@


1.463
log
@httpd(8) is no more.
@
text
@d648 1
a648 1
smtpq:*:103:103::0:0:SMTP Daemon:/var/empty:/sbin/nologin
d658 1
a658 1
chown _smtpq corrupt incoming purge queue temporary
d704 1
a704 1
<small>$OpenBSD: current.html,v 1.462 2014/03/13 20:55:45 tedu Exp $</small>
@


1.462
log
@instructions for _smtpq
@
text
@d68 1
d661 37
d704 1
a704 1
<small>$OpenBSD: current.html,v 1.461 2014/03/13 15:22:37 tedu Exp $</small>
@


1.461
log
@no need to edit rpc
@
text
@d67 1
d642 19
d666 1
a666 1
<small>$OpenBSD: current.html,v 1.460 2014/03/12 19:05:03 tedu Exp $</small>
@


1.460
log
@no rest for the wicked
@
text
@a637 1
    vi /etc/rpc
d646 1
a646 1
<small>$OpenBSD: current.html,v 1.459 2014/03/07 23:16:55 sthen Exp $</small>
@


1.459
log
@add markers for 5.5 cutoff
@
text
@d64 3
d608 34
d647 1
a647 1
<small>$OpenBSD: current.html,v 1.458 2014/02/16 13:00:03 sthen Exp $</small>
@


1.458
log
@Warn people about the removed backwards-compat for passing serial console
from the bootloader on amd64/i386 so they can be sure to install a new
boot loader if required before they potentially start on a remote flag-day
upgrade. juanfra@@ nick@@ and ajacoutot@@ agree (wording heavily tweaked since
diff sent out, in particular to make it clear who is/isn't affected by this).

Antoine suggested including the installboot commands to use, I have
punted on this slightly by suggesting that people do a ramdisk update to
5.4 first and pointed them at the old installboot manpage if they want to
do it manually (this entry is already long enough without having to explain
about the recent installboot changes etc.)
@
text
@d62 1
d603 2
d610 1
a610 1
<small>$OpenBSD: current.html,v 1.457 2014/02/11 14:23:00 okan Exp $</small>
@


1.457
log
@Also list popa3d's rc.d script removal; ok sthen
@
text
@d61 1
d580 23
d607 1
a607 1
<small>$OpenBSD: current.html,v 1.456 2014/02/10 21:07:15 sthen Exp $</small>
@


1.456
log
@Add a note about the lack of Java on i386, so any users relying on this are
forewarned, to hopefully reduce the chance of them moving their system post
the flag day, unable to get things working, and then be faced with a messy
downgrade to get things back up and running.
@
text
@d499 1
d583 1
a583 1
<small>$OpenBSD: current.html,v 1.455 2014/02/10 20:59:35 sthen Exp $</small>
@


1.455
log
@update radeon firmware url
@
text
@d60 1
d571 7
d582 1
a582 1
<small>$OpenBSD: current.html,v 1.454 2014/01/21 01:20:22 jsing Exp $</small>
@


1.454
log
@Document the amd64/i386 installboot switch.
@
text
@d155 1
a155 1
    pkg_add http://firmware.openbsd.org/firmware/snapshots/radeondrm-firmware-20130808.tgz
d574 1
a574 1
<small>$OpenBSD: current.html,v 1.453 2014/01/12 15:23:19 matthieu Exp $</small>
@


1.453
log
@cleanup after freetype update.
@
text
@d59 1
d560 10
d574 1
a574 1
<small>$OpenBSD: current.html,v 1.452 2014/01/07 22:34:24 sthen Exp $</small>
@


1.452
log
@update the NSD entry to add a quick note mentioning that it longer uses zonec
prompted by a question from weerd@@
@
text
@d58 1
d550 9
d563 1
a563 1
<small>$OpenBSD: current.html,v 1.451 2013/12/31 02:57:14 schwarze Exp $</small>
@


1.451
log
@Revert previous.  I have been told that faq/current.html is for critical
things, such that when you look into the file, you can be sure what you
find there is something you really do not want to miss.
Disturbing a service that isn't installed by default and can easily be
repaired is not critical, so refrain from diluting important information
in the file.
@
text
@d57 1
d451 1
a451 1
<h3>2013/11/26 - NSD 4.0.0</h3>
d475 3
d553 1
a553 1
<small>$OpenBSD: current.html,v 1.449 2013/12/29 07:09:57 deraadt Exp $</small>
@


1.450
log
@Tell mandocdb(8) users how to survive the upcoming switch from Berkeley DB
to SQLite.  Actually, i doubt there still are any such users, but better
safe than sorry.
@
text
@a56 1
<li><a href="#20131230">2013/12/30 - mandocdb(8) switch to SQLite</h3>
a543 22

<a name="20131230"></a>
<h3>2013/12/30 - mandocdb(8) switch to SQLite</h3>
On machines where you do not actively use the old Berkeley-DB-based
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandocdb&sektion=8&manpath=OpenBSD+5.0">mandocdb(8)</a>, just ignore this entry.
Note that the mandocdb(8)/apropos(1)-combo has not been installed
by default for nearly two years, since Jan 16, 2012,
so very probably you are not using it.
<p>
Before installing a new snapshot, make sure that <tt>/usr/bin/mandocdb</tt>
and <tt>/usr/bin/apropos.m</tt> are copies of <tt>/usr/bin/mandoc</tt>,
not symlinks.  Continue to use them until you decide to switch to the new,
SQLite-based mandocdb(8).  There is no problem with doing so while using
the new <tt>/usr/bin/mandoc</tt> (version 1.13.0) at the same time.
If you already clobbered your old mandocdb binary, rebuild it from
cvs checkout -D 2013-12-29.
<p>
If you decide to switch to the new mandocdb(8), be warned that it
is going to be under very active development and database format
changes will not be announced on this page until further notice.
For now, guinea pigs are expected to simply rebuild their databases
(running just "mandocdb" with no options) whenever needed.
@


1.449
log
@typo, man.cgi ref
@
text
@d57 1
d546 22
d572 1
a572 1
<small>$OpenBSD: current.html,v 1.448 2013/12/28 21:35:16 kettenis Exp $</small>
@


1.448
log
@Explain how to handle the atexit(3) move.
@
text
@d529 3
a531 2
To support the use of atexit(3) in dymaically loaded shared objects,
atexit(3) is now provided by the C runtime startup files.
d549 1
a549 1
<small>$OpenBSD: current.html,v 1.447 2013/12/28 17:09:00 deraadt Exp $</small>
@


1.447
log
@i386 moves to PIE
@
text
@d56 1
d527 17
d548 1
a548 1
<small>$OpenBSD: current.html,v 1.446 2013/12/25 20:58:53 espie Exp $</small>
@


1.446
log
@"bump" libcompat removal, there are new instructions, and I missed them.
okay jca@@
@
text
@d55 1
d502 24
d530 1
a530 1
<small>$OpenBSD: current.html,v 1.445 2013/12/16 19:05:09 okan Exp $</small>
@


1.445
log
@add a note for the cwm(1) default 'maximize' keybinding change
@
text
@d52 1
d476 1
a476 1
<h3>2013/12/04 - libcompat removed</h3>
d505 1
a505 1
<small>$OpenBSD: current.html,v 1.444 2013/12/16 09:57:27 martin Exp $</small>
@


1.444
log
@byebye popa3d
@
text
@d53 1
d493 7
d504 1
a504 1
<small>$OpenBSD: current.html,v 1.443 2013/12/08 22:09:19 naddy Exp $</small>
@


1.443
log
@libcompat removal: sys/timeb.h
@
text
@d52 1
d483 9
d496 1
a496 1
<small>$OpenBSD: current.html,v 1.442 2013/12/08 18:15:07 naddy Exp $</small>
@


1.442
log
@final part of libcompat removal: sgtty.h
@
text
@d477 1
a477 1
   rm -f /usr/include/{re_comp,regexp,sgtty}.h
d486 1
a486 1
<small>$OpenBSD: current.html,v 1.441 2013/12/06 17:00:58 lteo Exp $</small>
@


1.441
log
@Document libcompat removal.

feedback deraadt@@
@
text
@d477 1
a477 1
   rm -f /usr/include/{re_comp,regexp}.h
d486 1
a486 1
<small>$OpenBSD$</small>
@


1.440
log
@more for NSD
@
text
@d51 1
d471 11
d486 1
a486 1
<small>$OpenBSD: current.html,v 1.439 2013/11/26 13:13:09 sthen Exp $</small>
@


1.439
log
@notes for NSD 4
@
text
@d452 2
d456 13
a468 3
Additionally, if you use "include" lines in nsd.conf, change these to
specify the full path (include: "/var/nsd/etc/nsd.local").
NSD strips the chroot prefix as needed.
d474 1
a474 1
<small>$OpenBSD: current.html,v 1.438 2013/11/19 15:46:30 sthen Exp $</small>
@


1.438
log
@add a note for Icinga, it was updated a while ago, I've just noticed that
a deprecated option was removed causing startup to fail if it's present
in your configuration.
@
text
@d50 1
d442 16
d462 1
a462 1
<small>$OpenBSD: current.html,v 1.437 2013/11/18 18:29:12 sthen Exp $</small>
@


1.437
log
@reinstate the pwd_mkdb step in the notes for crossing time_t, for people
with insane update situations who can't use bsd.rd properly. ok deraadt
@
text
@d49 1
d430 11
d445 1
a445 1
<small>$OpenBSD: current.html,v 1.436 2013/11/06 10:03:20 eric Exp $</small>
@


1.436
log
@smtpd.conf changes
@
text
@d185 1
d433 1
a433 1
<small>$OpenBSD: current.html,v 1.435 2013/11/05 17:54:41 sthen Exp $</small>
@


1.435
log
@mention the rrdtool update
@
text
@d48 1
d394 34
d432 1
a432 1
<small>$OpenBSD: current.html,v 1.434 2013/11/04 01:27:25 fgsch Exp $</small>
@


1.434
log
@ngircd has changed its configuration directory. suggested and wording
from sthen@@ with minor tweaks from me.
sthen@@ ok.
@
text
@d47 1
d383 10
d397 1
a397 1
<small>$OpenBSD: current.html,v 1.433 2013/11/01 14:06:35 nick Exp $</small>
@


1.433
log
@
remove 5.3->5.4
@
text
@d46 1
d371 11
d386 1
a386 1
<small>$OpenBSD: current.html,v 1.432 2013/10/31 18:40:46 bluhm Exp $</small>
@


1.432
log
@Explain update with new routing message version.
@
text
@a32 23
<li><a href="#20130310">2013/03/10 - fontconfig update</a>
<li><a href="#20130311">2013/03/11 - pf translation counter added</a>
<li><a href="#20130325">2013/03/25 - Perl update</a>
<li><a href="#20130404">2013/04/04 - com(4) devices on amd64 and i386</a>
<li><a href="#20130415">2013/04/15 - struct statfs change</a>
<li><a href="#20130416">2013/04/16 - [ports] mail/roundcubemail update</a>
<li><a href="#20130419">2013/04/19 - struct swdevt change</a>
<li><a href="#20130429">2013/04/29 - rc.conf(8) pre-rc.d(8) backward compatibility removed</a>
<li><a href="#20130501">2013/05/01 - [ports] sysutils/cfengine update</a>
<li><a href="#20130601">2013/06/01 - Directories in /usr/share/locale to delete</a>
<li><a href="#20130601b">2013/06/01 - Removed /usr/include/spinlock.h header</a>
<li><a href="#20130602">2013/06/02 - bgplg(8) and slowcgi(8) sockets moved to /var/www/run</a>
<li><a href="#20130602b">2013/06/02 - some mg(1) dired commands renamed</a>
<li><a href="#20130604">2013/06/04 - Manpages to delete</a>
<li><a href="#20130607">2013/06/07 - X server modules to delete</a>
<li><a href="#20130607b">2013/06/07 - inteldrm(4) ABI break</a>
<li><a href="#20130617">2013/06/17 - KerberosV update needs build tools to be compiled first</a>
<li><a href="#20130618">2013/06/18 - Removed /usr/include/pcap-int.h header</a>
<li><a href="#20130621">2013/06/21 - Several files are not needed after the KerberosV update</a>
<li><a href="#20130705">2013/07/05 - vax port switches to ELF</a>
<li><a href="#20130710">2013/07/10 - Default KerberosV database directory has moved</a>
<li><a href="#20130806">2013/08/06 - [ports] net/nagios/nsca update</a>
<!-- 5.4 cutoff point is here. Please keep following entries when rotating this file -->
d55 2
a56 2
It contains information about changes from 5.3-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 5.2 or earlier, or people
d60 2
a61 2
If you wish to update to 5.3-release or 5.3-stable from previous
versions, see the <a href="upgrade53.html">upgrade guide</a>.
a76 418
<a name="20130310"></a>
<h3>2013/03/10 - fontconfig update</h3>
Fontconfig in xenocara has been updated to version 2.10.91 and has
switched to a BSD make build system.
This new version of fontconfig deprecates the use of
<tt>~/.fonts.conf</tt> for local configuration. Make sure the users
who have created this file move it to its new location:
<blockquote><pre><b>
    mkdir -p ~/.config/fontconfig
    mv ~/.fonts.conf ~/.config/fontconfig/fonts.conf
</b></pre></blockquote>
Until all ports have been updated to use the new fontconfig, expect
some (mostly harmless) warnings about syntax of some of the new files
in <tt>/etc/fonts/conf.d</tt>.

<p>
<a name="20130311"></a>
<h3>2013/03/11 - pf translation counter added</h3>
A separate "translation" counter was added to identify when NAT has failed
due to a lack of ports in the range configured in the rule.
Packages using PFIOCGETSTATUS (e.g. symon and pfstat) need to be updated
to current versions (and as usual kernel and userland must be in sync).
Package version numbers have been bumped so pkg_add -u will update them
when new packages are available.

<p>
<a name="20130325"></a>
<h3>2013/03/25 - Perl update</h3>
Perl has been updated to 5.16.3. Please note that any packages using
XS modules will need to be updated. If you are updating close to the time
of this being committed and rely on such packages, you might like to wait
for updated packages to become available to save the trouble of building
them yourself.

<p>
<a name="20130404"></a>
<h3>2013/04/04 - com(4) devices on amd64 and i386</h3>

Device configuration lines for all four standard
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isa&sektion=4">isa(4)</a>
serial ports have been added to the GENERIC kernel configuration on
these platforms.  As a result the numbering of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=com&sektion=4">com(4)</a>
devices may change on your system.  Serial ports provided by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=puc&sektion=4">puc(4)</a>
or other multi-port serial cards will now start at com4.  If you are
using any of these devices as serial console or in a console server
setup, please review the appropriate configuration files.

<p>
<a name="20130415"></a>
<h3>2013/04/15 - struct statfs change</h3>

In order to complete the support for DUIDs,
<q>struct statfs</q> and the system calls that use it have changed.
To upgrade across this change, you must either
<ul>
<li>Upgrade with a snapshot (recommended), OR
<li>Configure and build a kernel with the compatibility support
</ul>
The support is enabled by default, but you <b>MUST</b> run config(8)
and build a clean kernel for it to be enabled.
The manual upgrade steps are:
<ul>
<li>Update entire source tree using cvs
<li>configure and build a new kernel:
<blockquote><pre><b>   cd /usr/src/sys/arch/`uname -m`/conf
   config GENERIC		# or GENERIC.MP or whatever config you use
   cd ../compile/GENERIC	# or GENERIC.MP or ...
   make clean
   make
</b></pre></blockquote>
<li>Install the new kernel
<li>Reboot to the new kernel
<li><a href="faq5.html#BldUserland">Build userland</a>
</ul>
Failure to do so may result in a system that cannot boot.

<p>
<a name="20130416"></a>
<h3>2013/04/16 - [ports] mail/roundcubemail update</h3>
Roundcube now uses PDO for database access. Be sure to follow the
update instructions in /usr/local/share/doc/pkg-readmes/roundcubemail*.

<p>
<a name="20130419"></a>
<h3>2013/04/19 - struct swdevt change</h3>

Cleanup of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskless&sektion=8">
diskless(8)</a> code in the kernel moved <q>sw_vp</q> from <q>struct swdevt</q>
to <q>struct nfs_diskless</q>.
<br>
An up to date
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">
config(8)</a> is needed to build ramdisk kernels.
Following
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">
release(8)</a> takes care of this.

<p>
<a name="20130429"></a>
<h3>2013/04/29 - rc.conf(8) pre-rc.d(8) backward compatibility removed</h3>
As of today, rc.conf.local(8) only supports rc.d(8) variables to control
daemons startup.<br><br>
The following variables have been renamed to their _flags counterpart:
<i>amd</i> <i>inetd</i> <i>portmap</i> <i>rwhod</i>.
<br>
<pre>
    <b>amd=YES</b> becomes <b>amd_flags=</b>
    <b>inetd=YES</b> becomes <b>inetd_flags=</b>
    <b>portmap=YES</b> becomes <b>portmap_flags=</b>
    <b>rwhod=YES</b> becomes <b>rwhod_flags=</b>
</pre>
The <i>lockd</i> variable has been removed. Similar functionality can be
achieved by setting:
<pre>
    <b>lockd_flags=</b>
    <b>statd_flags=</b>
</pre>

The <i>aucat_flags</i> variable has been renamed to <i>sndiod_flags</i>.
<pre>
    <b>aucat_flags=NO</b> becomes <b>sndiod_flags=NO</b>
</pre>

<p>
<a name="20130501"></a>
<h3>2013/05/01 - [ports] sysutils/cfengine update</h3>
CFEngine has been updated to version 3.4; this is a major upgrade and
is not a drop-in replacement for CFEngine 2.
Existing users should see upstream's
<a href="https://cfengine.com/manuals/cf3-upgrade">upgrade documentation</a>
for further information.

<p>
<a name="20130601"></a>
<h3>2013/06/01 - Directories in /usr/share/locale to delete</h3>
After upgrading, obsolete directories can be deleted from /usr/share/locale.
Any directory that has a dot in its name is obsolete.
The de_AT directory is obsolete as well.
<blockquote><pre>
rm -rf /usr/share/locale/*.*
rm -rf /usr/share/locale/de_AT
</pre></blockquote>

<p>
<a name="20130601b"></a>
<h3>2013/06/01 - Removed /usr/include/spinlock.h header</h3>
After upgrading, the obsolete file /usr/include/spinlock.h can be deleted.
<blockquote><pre>
rm -f /usr/include/spinlock.h
rm -f /usr/libdata/perl5/site_perl/*/spinlock.ph
</pre></blockquote>

<p>
<a name="20130602"></a>
<h3>2013/06/02 - bgplg(8) and slowcgi(8) sockets moved to /var/www/run</h3>
When running a bgp looking glass or using bgplgsh(8) the restricted socket in
<i>/etc/bgpd.conf</i> needs to be changed:
<blockquote><pre>
socket "/var/www/run/bgpd.rsock" restricted
</pre></blockquote>
Early adopters of slowcgi(8) need to update <i>/etc/nginx/nginx.conf</i>.

<p>
<a name="20130602b"></a>
<h3>2013/06/02 - mg(1) dired commands</h3>
Some of the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg&sektion=1">
mg(1)</a> editor's dired commands changed to be more in line with
GNU Emacs dired commands.
<p>
<table border=1><tr><td>
OLD
</td><td>
&nbsp;
</td><td>
NEW
</td></tr><tr><td>
dired-backup-unflag
</td><td>
->
</td><td>
dired-unmark-backward
</td></tr>
<tr><td>
dired-copy-file
</td><td>
->
</td><td>
dired-do-copy
</td></tr>
<tr><td>
dired-do-deletions
</td><td>
->
</td><td>
dired-do-flagged-deletions
</td></tr>
<tr><td>
dired-flag-file-deleted
</td><td>
->
</td><td>
dired-flag-file-deletion
</td></tr>
<tr><td>
dired-rename-file
</td><td>
->
</td><td>
dired-do-rename
</td></tr>
<tr><td>
dired-unflag
</td><td>
->
</td><td>
dired-unmark
</td></tr></table>

<p>
<a name="20130604"></a>
<h3>2013/06/04 - Manpages to delete</h3>
A number of files should be deleted from your system.
Note that these may not exist on all systems; that's ok.
Copy and paste the following line:
<blockquote><pre>
rm -f /usr/share/man/man{9/{re,}lookup.9,/_Exit.3}
</pre></blockquote>

<p>
<a name="20130607"></a>
<h3>2013/06/07 - X server modules to delete</h3>
After the update to X server 1.14, a number of modules have been
obsoleted or merged in the main server. Older versions sould be
deleted:
<blockquote><pre>
cd /usr/X11R6/include/xorg
rm -f mibstore.h synaptics.h xaa.h xaalocal.h
cd /usr/X11R6/lib/modules
rm -f extensions/lib{dbe,dri,dri2,extmod,record}.{la,so}
rm -f libxaa.{la,so}
</pre></blockquote>

<p>
<a name="20130607b"></a>
<h3>2013/06/07 - inteldrm(4) ABI break</h3>
Some of the GEM ioctls were changed to be more compatible with Linux.
After updating your kernel, you should update libdrm as well:
<blockquote><pre>
cd /usr/xenocara/lib/libdrm
make obj
make build
</pre></blockquote>

<p>
<a name="20130617"></a>
<h3>2013/06/17 - KerberosV update needs build tools to be compiled first</h3>
Some of the build tools required by kerberosV need to be compiled and installed
before kerberosV itself or a release can be built.
To compile and install the required build tools (asn1_compile, compile_et, slc)
please do the following:
<blockquote><pre>
cd /usr/src/kerberosV/tools
make obj
make
make install
</pre></blockquote>

<p>
<a name="20130618"></a>
<h3>2013/06/18 - Removed /usr/include/pcap-int.h header</h3>
After upgrading, the /usr/include/pcap-int.h header must be deleted.
<blockquote><pre>
rm -f /usr/include/pcap-int.h
rm -f /usr/libdata/perl5/site_perl/*/pcap-int.ph
</pre></blockquote>

<p>
<a name="20130621"></a>
<h3>2013/06/21 - Several files must be deleted after the KerberosV update</h3>
After upgrading, the following files must be deleted:
<blockquote><pre>
rm -f /etc/kerberosV/README
rm -f /usr/bin/{afslog,hxtool,kauth,kadmin,ksu,pagsh,kswitch}
rm -f /usr/lib/lib{heimntlm.*,heimntlm_p.*,hx509.*,hx509_p.*}
rm -f /usr/libdata/perl5/site_perl/*-openbsd/com_err.ph
rm -f /usr/libdata/perl5/site_perl/*-openbsd/kerberosV/{crmf_asn1,heimntlm-protos,heimntlm,hx509-private,hdb-private}.ph
rm -f /usr/libdata/perl5/site_perl/*-openbsd/kerberosV/{hx509-protos,hx509,hx509_err,kx509_asn1,ntlm_err,ocsp_asn1,pkcs10_asn1}.ph
rm -f /usr/libdata/perl5/site_perl/*-openbsd/kerberosV/{pkcs12_asn1,pkcs8_asn1,pkcs9_asn1,pkinit_asn1,gssapi/gssapi_spnego,spnego_asn1}.ph
rm -f /usr/libexec/{digest-service,kimpersonate,kdigest,kcm}
rm -f /usr/include/com_err.h
rm -f /usr/include/kerberosV/{crmf_asn1,hdb-private,heimntlm-protos,heimntlm,hx509-private}.h
rm -f /usr/include/kerberosV/{hx509-protos,hx509,hx509_err,kx509_asn1,ntlm_err,ocsp_asn1,pkcs10_asn1,pkcs12_asn1}.h
rm -f /usr/include/kerberosV/{pkcs8_asn1,pkcs9_asn1,pkinit_asn1,spnego_asn1,gssapi/gssapi_spnego}.h
rm -f /usr/sbin/kdigest
</pre></blockquote>

<p>
<a name="20130705"></a>
<h3>2013/07/05 - vax port switches to ELF</h3>
OpenBSD/vax now uses ELF instead of a.out as its native binary file format.
Upgrading with a recent snapshot is recommended; however, for reference, the
manual upgrade steps are:
<ul>
<li>Get the buildsystem aware vax is becoming ELF:
<blockquote><pre><b>
  cd /usr/src/share/mk
  make install
</b></pre></blockquote>
<li>Build, but do not install, binutils:
<blockquote><pre><b>
  cd /usr/src/gnu/usr.bin/binutils
  make -f Makefile.bsd-wrapper obj
  make -f Makefile.bsd-wrapper -DBOOTSTRAP depend
  make -f Makefile.bsd-wrapper -DBOOTSTRAP
</b></pre></blockquote>
<li>Build the C compiler:
<blockquote><pre><b>
  cd /usr/src/gnu/egcs/gcc
  make -f Makefile.bsd-wrapper obj
  make -f Makefile.bsd-wrapper -DBOOTSTRAP depend
  make -f Makefile.bsd-wrapper -DBOOTSTRAP
</b></pre></blockquote>
<li>The compiler build fails when building libgcc.a. This is normal at this point.
  It needs the new binutils binaries you had been building, so now is the time
  to install them:
<blockquote><pre><b>
  cd /usr/src/gnu/usr.bin/binutils
  make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
<li>Now resume compiler build, and install it:
<blockquote><pre><b>
  cd /usr/src/gnu/egcs/gcc
  make -f Makefile.bsd-wrapper -DBOOTSTRAP
  make -f Makefile.bsd-wrapper -DBOOTSTRAP install
</b></pre></blockquote>
<li>Update machine-dependent includes, or you won't be able to build libc:
<blockquote><pre><b>
  cd /usr/src/sys/arch/vax/include
  install -m 444 -o root -g bin *.h /usr/include/vax
</b></pre></blockquote>
<li>Build and install a few core libraries:
<blockquote><pre><b>
  cd /usr/src/lib/csu
  make obj
  make depend
  make NOMAN=
  make install
  cd /usr/src/lib/libc
  make obj
  make depend
  make NOMAN= NOPROFILE=
  make install
  cd /usr/src/lib/libm
  make obj
  make depend
  make NOMAN= NOPROFILE=
  make install
  cd /usr/src/lib/libutil
  make obj
  make depend
  make NOMAN= NOPROFILE=
  make install
  cd /usr/src/gnu/lib/libiberty
  make -f Makefile.bsd-wrapper obj
  make -f Makefile.bsd-wrapper depend
  make -f Makefile.bsd-wrapper
  make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
<li>Now rebuild the complete compiler suite:
<blockquote><pre><b>
  cd /usr/src/gnu/egcs/gcc
  make -f Makefile.bsd-wrapper -DBOOTSTRAP clean
  make -f Makefile.bsd-wrapper depend
  make -f Makefile.bsd-wrapper
  make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
<li>You can now proceed with a regular `make build'
</ul>

<p>
<a name="20130710"></a>
<h3>2013/07/10 - Default KerberosV database directory has moved</h3>
The default database directory for KerberosV has been moved from
<i>/var/heimdal</i> to <i>/var/kerberosV</i> which is more generic and
independant of the implementation.<br>
<b>Make sure you have a way to log into the machine without using Kerberos
before performing the upgrade.</b><br>
Before upgrading, stop the Kerberos services and copy the database directory
to the new location:
<blockquote><pre>
/etc/rc.d/kadmind stop
/etc/rc.d/kpasswdd stop
/etc/rc.d/kdc stop
cp -Rp /var/heimdal /var/kerberosV
</pre></blockquote>
Then proceed with the upgrade as usual...<br>
After upgrading, check that Kerberos services are working properly then
remove the old database directory:
<blockquote><pre>
rm -rf /var/heimdal
</pre></blockquote>

<p>
<a name="20130806"></a>
<h3>2013/08/06 - [ports] net/nagios/nsca update</h3>
The NSCA update involves a change in packet format to allow longer messages.
The new server is backwards-compatible and accepts messages from either old
or new clients, but the new client is not compatible with the old server.
Therefore, the NSCA server should be updated before updating clients.
Note that it is strongly recommended that you switch to nsca-ng where
possible.

<!-- 5.4 cutoff point is here. Please keep following entries when rotating this file -->
<p>
d155 1
a155 1
after updating the system binaries.  Rolling back to stock 5.3 or
d374 1
a374 1
<small>$OpenBSD: current.html,v 1.431 2013/10/19 10:36:02 jung Exp $</small>
@


1.431
log
@mention lout 3.40 update
@
text
@d68 1
d797 14
d815 1
a815 1
<small>$OpenBSD: current.html,v 1.430 2013/10/15 09:32:17 sthen Exp $</small>
@


1.430
log
@Add an extra warning to the time_t update notes for packages about pgsql
because the usual warning from pkg_add won't be triggered in this situation;
users need to dump the old database *before* crossing over.
@
text
@d67 1
d787 9
d800 1
a800 1
<small>$OpenBSD: current.html,v 1.429 2013/10/15 02:26:12 jeremy Exp $</small>
@


1.429
log
@Mention PostgreSQL 9.3.0 update
@
text
@d660 6
d790 1
a790 1
<small>$OpenBSD: current.html,v 1.428 2013/10/12 12:52:30 sthen Exp $</small>
@


1.428
log
@queue->oldqueue
@
text
@d66 1
d775 5
d784 1
a784 1
<small>$OpenBSD: current.html,v 1.427 2013/10/10 10:12:48 stsp Exp $</small>
@


1.427
log
@Add upgrade notes for Subversion 1.8.
@
text
@d65 1
d763 11
d778 1
a778 1
<small>$OpenBSD: current.html,v 1.426 2013/09/29 17:41:39 nick Exp $</small>
@


1.426
log
@
standardize...  ports/pkg changes are marked with [ports].
@
text
@d64 1
d747 15
d766 1
a766 1
<small>$OpenBSD: current.html,v 1.425 2013/09/18 21:22:27 kirby Exp $</small>
@


1.425
log
@add a note about wordpress update.
tweaks and wording from sthen@@ and kili, thanks!
ok merdely@@, "sure" sthen@@
@
text
@d38 1
a38 1
<li><a href="#20130416">2013/04/16 - Ports: mail/roundcubemail update</a>
d41 1
a41 1
<li><a href="#20130501">2013/05/01 - Ports: sysutils/cfengine update</a>
d54 1
a54 1
<li><a href="#20130806">2013/08/06 - Ports: net/nagios/nsca update</a>
d175 1
a175 1
<h3>2013/04/16 - Ports: mail/roundcubemail update</h3>
d223 1
a223 1
<h3>2013/05/01 - Packages: sysutils/cfengine update</h3>
d503 1
a503 1
<h3>2013/08/06 - Ports: net/nagios/nsca update</h3>
d750 1
a750 1
<small>$OpenBSD: current.html,v 1.424 2013/09/18 14:13:11 okan Exp $</small>
@


1.424
log
@pwd_mkdb is run during upgrade unconditionally now, so remove from here (other bits are still under discussion); ok guenther
@
text
@d63 1
d731 15
d750 1
a750 1
<small>$OpenBSD: current.html,v 1.423 2013/09/18 07:24:09 guenther Exp $</small>
@


1.423
log
@Strip out some dangling bits about upgrading via source; snapshots only,
baby!
@
text
@a616 1
    /mnt/usr/sbin/pwd_mkdb -d /mnt/etc /mnt/etc/master.passwd
d734 1
a734 1
<small>$OpenBSD: current.html,v 1.422 2013/09/15 22:31:31 okan Exp $</small>
@


1.422
log
@wtmp is in /var/log/
@
text
@d593 2
a594 7
You are <b>strongly</b> recommended to wait until snapshots and
packages with this change are available and then update with them.
Updating with source is (obviously) possible, but if you're not
completely careful you'll leave it unable to finish booting or to
login afterwards.
<br>
The recommended steps for updating with a snapshot are:
d735 1
a735 1
<small>$OpenBSD: current.html,v 1.421 2013/09/14 17:23:40 landry Exp $</small>
@


1.421
log
@Add a note about the dspam update and the need to manually install the
mysql or pgsql driver if needed.
@
text
@d624 1
a624 1
    cp /dev/null /mnt/var/run/wtmp
d740 1
a740 1
<small>$OpenBSD: current.html,v 1.420 2013/09/14 02:03:26 guenther Exp $</small>
@


1.420
log
@option T32 is gone, so remove the instruction for upgrading via source
instead of truncating utmp, truncate wtmp (suggested by many)
@
text
@d62 1
d722 14
d740 1
a740 1
<small>$OpenBSD: current.html,v 1.419 2013/08/23 22:56:41 sthen Exp $</small>
@


1.419
log
@php default switched to 5.4, show people how to update their configs.

while there, add a note to the identd section (if you haven't run sysmerge
to update rc.d scripts, /etc/rc.d/identd start will report a failure as the
pexp doesn't match), and tweak grammar in pppoe/vlan section.
@
text
@d623 1
a623 1
    cp /dev/null /mnt/var/run/utmp
a632 49
<br>
If you're foolhardy and want to update via source, your best bet are these
steps:
<ol>
<li>While their uninstall programs can still execute, remove all packages
(except firmware packages):
<pre>
    pkg_delete -X /var/db/pkg/*-firmware-[0-9]*
</pre>
</li>
<li>Configure and build a custom kernel named T32 with these
additional options:
<pre>
    option          T32
    rmoption        SYSVMSG
    rmoption        SYSVSEM
    rmoption        SYSVSHM
    rmoption        COMPAT_O48
    rmoption        COMPAT_O51
</pre>
Reboot to that kernel.  Note that this kernel should be considered
only good enough for building the system and shouldn't be trusted
with anything beyond that.  Do this on an internal network and don't
expose it to untrusted traffic or any users but yourself.
</li>
<li>Open a root shell on that and keep it open across the following
</li>
<li>Build the base system
</li>
<li><b>BEFORE REBOOTING</b>, run the following using that root shell
from two steps back:
<pre>
    pwd_mkdb /etc/master.passwd
    cp /dev/null /var/log/lastlog
    cp /dev/null /var/run/utmp
</pre>
</li>
<li>Reboot
</li>
<li>Arrrgh, you forgot to run pwd_mkdb and now you can't login!  Reboot
into single user mode and fix it.  If you really screwed things up,
you may have to use an old bsd.rd to recover.  Good luck!
</li>
<li>Build a GENERIC/GENERIC.MP kernel (<b>without</b> the T32 option)
and reboot to it
</li>
<li>Build X, ports, whatever else, etc.
</li>
</ol>
d725 1
a725 1
<small>$OpenBSD: current.html,v 1.418 2013/08/23 08:28:17 mpi Exp $</small>
@


1.418
log
@Add a note about vlan(4) and pppoe(4) ABI breaks, this specially matters
for people depending on such interfaces and fool enough to cross the
time_t ABI break by updating with source.
@
text
@d61 1
d735 2
d745 1
a745 1
This specially apply to people relying on these interfaces and willing to cross
d748 22
d774 1
a774 1
<small>$OpenBSD: current.html,v 1.417 2013/08/19 09:47:12 sthen Exp $</small>
@


1.417
log
@Add a hint that some packages may have cache files etc. which may be
stored in a non-portable format and need to be cleared during the update
to 64-bit time_t.
@
text
@d60 1
d735 10
d749 1
a749 1
<small>$OpenBSD: current.html,v 1.416 2013/08/17 08:58:57 sthen Exp $</small>
@


1.416
log
@additional comment for rrdtool: the database format change only affects
32-bit arch, there is no need to dump/restore on 64-bit arch.
@
text
@d687 5
a691 3
<li>If using the rrdtool package, note that the binary RRD file format
on 32-bit architectures will not be compatible.
Export any RRD files to XML format before updating.
d738 1
a738 1
<small>$OpenBSD: current.html,v 1.415 2013/08/16 11:23:44 sthen Exp $</small>
@


1.415
log
@Remind people that uninstalling packages means they will have no packages
installed ;) (in case they rely on them for shells, vpn access, etc, which
may be needed during the upgrade). Prompted by a comment from form via mikeb,
ok nick@@, phessler likes it too.
@
text
@d687 2
a688 2
<li>If using the rrdtool package, note that the binary RRD file format will
not be compatible.
d705 1
d736 1
a736 1
<small>$OpenBSD: current.html,v 1.414 2013/08/14 07:45:04 guenther Exp $</small>
@


1.414
log
@Simplify the 'remove all but firmware' command

suggested by sthen@@
@
text
@d684 3
d735 1
a735 1
<small>$OpenBSD: current.html,v 1.413 2013/08/14 07:24:15 guenther Exp $</small>
@


1.413
log
@Exclude firmware packages when removing packages before the time_t jump
@
text
@d612 1
a612 1
    pkg_delete -X `pkg_info -q | grep -e '-firmware-[0-9]'`
d638 1
a638 1
    pkg_delete -X `pkg_info -q | grep -e '-firmware-[0-9]'`
d732 1
a732 1
<small>$OpenBSD: current.html,v 1.412 2013/08/13 11:36:05 sthen Exp $</small>
@


1.412
log
@add a section for notes about handling specific packages with the time_t
change, with the first entry being rrdtool as pointed out by landry@@.

(while there, also commit entry for the switch to /usr/sbin/identd that
has been in my tree for a few days.)
@
text
@d610 1
d612 1
a612 1
    pkg_delete -X
d636 1
d638 1
a638 1
    pkg_delete -X
d732 1
a732 1
<small>$OpenBSD: current.html,v 1.411 2013/08/13 06:55:04 guenther Exp $</small>
@


1.411
log
@Document the time_t/ino_t ABI change
Fix some HTML glitches while we're here
@
text
@d59 1
d605 4
d679 47
d730 1
a730 1
<small>$OpenBSD: current.html,v 1.410 2013/08/12 19:05:56 matthieu Exp $</small>
@


1.410
log
@No need to remove libkafs{,_p}.* anymore since libkafs5 was renamed.
@
text
@d51 1
a51 1
<li><a href="#20130621">2013/06/21 - Several files are not needed after the KerberosV update</h3>
d58 1
d483 1
a483 1
<pre><blockquote>
d492 1
a492 1
<pre><blockquote>
d579 95
d678 1
a678 1
<small>$OpenBSD: current.html,v 1.409 2013/08/12 04:20:21 jsg Exp $</small>
@


1.409
log
@mention radeondrm changes
@
text
@d376 1
a376 1
rm -f /usr/lib/lib{heimntlm.*,heimntlm_p.*,hx509.*,hx509_p.*,kafs.*,kafs_p.*}
d582 1
a582 1
<small>$OpenBSD: current.html,v 1.408 2013/08/06 22:45:46 sthen Exp $</small>
@


1.408
log
@mention ports/net/nagios/nsca packet format change in upgrade notes, it
happened a while ago but this might help save some people from trouble
when updating to 5.4. found the hard way by henning. (hint: update the
server first to get over the bump, then switch everything you can to
nsca-ng)..

while there, use consistent notation for things affecting ports/packages.
@
text
@d57 1
d563 15
d582 1
a582 1
<small>$OpenBSD: current.html,v 1.407 2013/08/06 20:16:01 miod Exp $</small>
@


1.407
log
@Vax manual upgrade instructions.
@
text
@d41 1
a41 1
<li><a href="#20130501">2013/05/01 - Packages: sysutils/cfengine update</a>
d54 1
d494 10
d566 1
a566 1
<small>$OpenBSD: current.html,v 1.406 2013/07/10 05:14:24 ajacoutot Exp $</small>
@


1.406
log
@Handle the Kerberos DB dir move from /var/heimdal to /var/kerverosV.

with and ok sthen@@
@
text
@d54 2
d493 58
d555 1
a555 1
<small>$OpenBSD: current.html,v 1.405 2013/07/06 18:03:15 miod Exp $</small>
@


1.405
log
@vax manual upgrade instructions
@
text
@d53 1
d370 1
d468 23
d495 1
a495 1
<small>$OpenBSD: current.html,v 1.404 2013/07/02 23:39:03 beck Exp $</small>
@


1.404
log
@Indicate that removal of old kerberos cruft is not optional. Stuff doesn't
build without it.
@
text
@d52 1
d235 2
a236 2
rm /usr/include/spinlock.h
rm /usr/libdata/perl5/site_perl/*/spinlock.ph
d360 2
a361 2
rm /usr/include/pcap-int.h
rm /usr/libdata/perl5/site_perl/*/pcap-int.ph
d383 83
d470 1
a470 1
<small>$OpenBSD: current.html,v 1.403 2013/06/21 13:47:08 ajacoutot Exp $</small>
@


1.403
log
@Finally, kcm and kswitch are gone -- this should end up the kerberos
update removal list.
@
text
@d357 1
a357 1
After upgrading, the /usr/include/pcap-int.h header can be deleted.
d365 2
a366 2
<h3>2013/06/21 - Several files are not needed after the KerberosV update</h3>
After upgrading, the following files can be deleted:
d386 1
a386 1
<small>$OpenBSD: current.html,v 1.402 2013/06/21 12:27:14 ajacoutot Exp $</small>
@


1.402
log
@One too many.
@
text
@d51 1
a51 1
<li><a href="#20130620">2013/06/20 - Several files are not needed after the KerberosV update</h3>
d364 2
a365 2
<a name="20130620"></a>
<h3>2013/06/20 - Several files are not needed after the KerberosV update</h3>
d368 1
a368 1
rm -f /usr/bin/{afslog,hxtool,kauth,kadmin,ksu,pagsh}
d374 1
a374 1
rm -f /usr/libexec/{digest-service,kimpersonate,kdigest}
d386 1
a386 1
<small>$OpenBSD: current.html,v 1.401 2013/06/20 09:40:53 ajacoutot Exp $</small>
@


1.401
log
@Forgot the perl headers in previous.
@
text
@d371 1
a371 1
rm -f /usr/libdata/perl5/site_perl/*-openbsd/kerberosV/{crmf_asn1,digest_asn1,heimntlm-protos,heimntlm,hx509-private,hdb-private}.ph
d376 1
a376 1
rm -f /usr/include/kerberosV/{crmf_asn1,digest_asn1,hdb-private,heimntlm-protos,heimntlm,hx509-private}.h
d386 1
a386 1
<small>$OpenBSD: current.html,v 1.400 2013/06/20 08:43:00 ajacoutot Exp $</small>
@


1.400
log
@Even more files can be removes after the kerberosV update.

ok robert@@
@
text
@d370 4
a373 1
rm -f /usr/libdata/perl5/site_perl/*-openbsd/{com_err.ph,kerberosV/hdb-private.ph,kerberosV/spnego_asn1.ph}
d376 3
a378 2
rm -f /usr/include/kerberosV/{crmf_asn1,digest_asn1,hdb-private,heimntlm-protos,heimntlm,hx509-private,hx509-protos,hx509,hx509_err}.h
rm -f /usr/include/kerberosV/{kx509_asn1,ntlm_err,ocsp_asn1,pkcs10_asn1,pkcs12_asn1,pkcs8_asn1,pkcs9_asn1,pkinit_asn1,spnego_asn1}.h
d386 1
a386 1
<small>$OpenBSD: current.html,v 1.399 2013/06/19 07:16:44 ajacoutot Exp $</small>
@


1.399
log
@Add the list of files to remove after the kerberos update.
ok robert@@
@
text
@d51 1
a51 1
<li><a href="#20130619">2013/06/19 - Several files are not needed after the KerberosV update</h3>
d364 3
a366 3
<a name="20130619"></a>
<h3>2013/06/19 - Several files are not needed after the KerberosV update</h3>
After upgrading to the new KerberosV, the following files can be deleted:
d368 4
a371 1
rm -f /usr/bin/{afslog,kauth,kadmin,ksu,pagsh}
d373 3
a375 3
rm -f /usr/libexec/{kimpersonate,kdigest}
rm -f /usr/lib/libkafs*
rm -f /usr/libdata/perl5/site_perl/*-openbsd/{com_err.ph,kerberosV/hdb-private.ph,kerberosV/spnego_asn1.ph}
d382 1
a382 1
<small>$OpenBSD: current.html,v 1.398 2013/06/19 03:53:16 lteo Exp $</small>
@


1.398
log
@pcap-int.h is no longer installed to /usr/include
@
text
@d49 1
a49 1
<li><a href="#20130617">2013/06/17 - kerberosV update needs build tools to be compiled first</a>
d51 1
d342 1
a342 1
<h3>2013/06/17 - kerberosV update needs build tools to be compiled first</h3>
a352 4
The old <i>/usr/include/com_err.h</i> link must also be removed:
<blockquote><pre>
rm -f /usr/include/com_err.h
</pre></blockquote>
d363 12
d379 1
a379 1
<small>$OpenBSD: current.html,v 1.397 2013/06/18 12:22:09 ajacoutot Exp $</small>
@


1.397
log
@One more Kerberos step: the old /usr/include/com_err.h symlink should be
removed; nothing uses it in base and it confuses ports.

discussed with and ok robert@@ sthen@@
@
text
@d50 1
d357 9
d370 1
a370 1
<small>$OpenBSD: current.html,v 1.396 2013/06/17 21:51:25 jturner Exp $</small>
@


1.396
log
@Fix kerberosV entries date, tweak wording and some other html fixes
@
text
@d351 4
d360 1
a360 1
<small>$OpenBSD: current.html,v 1.395 2013/06/17 21:08:18 robert Exp $</small>
@


1.395
log
@add note about the kerberosV update and the required steps to do before
building
@
text
@d49 1
a49 1
<li><a href="#20130617b">2013/06/17 - kerberosV update needs build tools to be compiled first</a>
d314 1
a314 1
<a name="20130607"</a>
d328 1
a328 1
<a name="20130607b"</a>
d339 2
a340 2
<a name="20130617b"</a>
<h3>2013/06/07 - kerberosV update needs build tools to be compiled first</h3>
d342 1
a342 1
before a kerberosV itself or a release can be built.
d356 1
a356 1
<small>$OpenBSD: current.html,v 1.394 2013/06/07 20:59:06 kettenis Exp $</small>
@


1.394
log
@Mention inteldrm(4) ABI break.
@
text
@d49 1
d338 14
d356 1
a356 1
<small>$OpenBSD: current.html,v 1.393 2013/06/07 20:05:11 matthieu Exp $</small>
@


1.393
log
@Xserver update makes some files obsolete
@
text
@d47 2
a48 1
<li><a href="#20130607">2013/06/07 - X server modules do delete</a>
d326 11
d341 1
a341 1
<small>$OpenBSD: current.html,v 1.392 2013/06/05 04:10:00 guenther Exp $</small>
@


1.392
log
@Another manpage gone
@
text
@d47 1
a47 1

d311 13
d329 1
a329 1
<small>$OpenBSD: current.html,v 1.391 2013/06/02 23:11:35 tedu Exp $</small>
@


1.391
log
@perl creates another copy of spinlock.h because perl.
reminded by naddy
@
text
@a41 1
<li><a href="#20130531">2013/05/31 - Manpages to delete</a>
d46 1
a214 10
<a name="20130531"></a>
<h3>2013/05/31 - Manpages to delete</h3>
A number of files should be deleted from your system.
Note that these may not exist on all systems; that's ok.
Copy and paste the following line:
<blockquote><pre>
rm -f /usr/share/man/man9/{re,}lookup.9
</pre></blockquote>

<p>
a243 1

d301 10
d316 1
a316 1
<small>$OpenBSD: current.html,v 1.390 2013/06/02 21:13:39 miod Exp $</small>
@


1.390
log
@Fix pasto.
@
text
@d241 1
d317 1
a317 1
<small>$OpenBSD: current.html,v 1.389 2013/06/02 18:52:23 lum Exp $</small>
@


1.389
log
@Add mg's dired command changes. Suggested by jasper@@.
@
text
@d44 1
a44 1
<li><a href="#20130601b">2013/06/01 - Directories in /usr/share/locale to delete</a>
d316 1
a316 1
<small>$OpenBSD: current.html,v 1.388 2013/06/02 16:12:22 tedu Exp $</small>
@


1.388
log
@i deleted something. so should you.
@
text
@d46 1
d251 61
a311 1
Early adopters of slowcgi(8) need to update <i>/etc/nginx/nginx.conf<i>.
d316 1
a316 1
<small>$OpenBSD: current.html,v 1.387 2013/06/02 14:27:31 florian Exp $</small>
@


1.387
log
@/var/www/run
@
text
@d44 1
d235 8
d255 1
a255 1
<small>$OpenBSD: current.html,v 1.386 2013/06/01 20:28:40 ajacoutot Exp $</small>
@


1.386
log
@Better display.
@
text
@d44 1
d233 9
d246 1
a246 1
<small>$OpenBSD: current.html,v 1.385 2013/06/01 20:22:37 stsp Exp $</small>
@


1.385
log
@Add entry for removal frenzy within /usr/share/locale.
@
text
@d192 4
a195 4
<pre><b>
    lockd_flags=
    statd_flags=
</b></pre>
d236 1
a236 1
<small>$OpenBSD: current.html,v 1.384 2013/05/31 20:11:20 guenther Exp $</small>
@


1.384
log
@A couple manpages to delete
@
text
@d43 1
d221 11
d236 1
a236 1
<small>$OpenBSD: current.html,v 1.383 2013/05/22 02:47:29 lteo Exp $</small>
@


1.383
log
@Bump release to 5.3
@
text
@d42 1
d210 10
d224 1
a224 1
<small>$OpenBSD: current.html,v 1.382 2013/05/01 21:13:36 sthen Exp $</small>
@


1.382
log
@CFEngine
@
text
@d52 2
a53 2
It contains information about changes from 5.2-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 5.1 or earlier, or people
d57 2
a58 2
If you wish to update to 5.2-release or 5.2-stable from previous
versions, see the <a href="upgrade52.html">upgrade guide</a>.
d213 1
a213 1
<small>$OpenBSD: current.html,v 1.381 2013/05/01 13:18:27 nick Exp $</small>
@


1.381
log
@
5.3 updates
@
text
@d41 1
d200 9
d213 1
a213 1
<small>$OpenBSD: current.html,v 1.380 2013/04/29 14:12:07 ajacoutot Exp $</small>
@


1.380
log
@Document how to move from old-style pre-rc.d(8) variables to the new ones.
@
text
@a32 21
<li><a href="#20120808">2012/08/08 - xf86-video-ati 6.14.6 is now selected by default</a>
<li><a href="#20120821">2012/08/21 - IPv6 SLAAC defaults to privacy addresses</a>
<li><a href="#20120823">2012/08/23 - New toolchain behavior</a>
<li><a href="#20120830">2012/08/30 - pmdb(1) removed</a>
<li><a href="#20120831">2012/08/31 - gcc(1) now uses __guard_local instead of __guard on ELF/GCC4 architectures</a>
<li><a href="#20120831a">2012/08/31 - amd64, sgi, loongson and sparc64 are now PIE</a>
<li><a href="#20120901">2012/09/01 - alpha is now PIE</a>
<li><a href="#20120902">2012/09/02 - hppa is now PIE</a>
<li><a href="#20120912">2012/09/12 - landisk is now PIE</a>
<li><a href="#20120920">2012/09/20 - pf enforces 'frags' limit</a>
<li><a href="#20120923">2012/09/23 - imake moved to ports</a>
<li><a href="#20120924">2012/09/24 - [ports] Major PostgreSQL update</a>
<li><a href="#20121011">2012/10/11 - smtpd.conf syntax change</a>
<li><a href="#20121123">2012/11/23 - sndiod(1) options changes</a>
<li><a href="#20121201">2012/12/01 - m88k ports switch to gcc 3</a>
<li><a href="#20121222">2012/12/22 - ld.so(1) update required</a>
<li><a href="#20130105">2013/01/05 - m88k ports switch to ELF</a>
<li><a href="#20130116">2013/01/16 - pf.conf syntax change</a>
<li><a href="#20130131">2013/01/31 - m88k ports gain shared libraries support</a>
<li><a href="#20130202">2013/02/02 - m68k ports switch to ELF</a>
<!-- 5.3 -->
a72 443
<a name="20120808"></a>
<h3>2012/08/08 - xf86-video-ati 6.14.6 is now selected by default</h3>
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon&sektion=4">radeon(4)</a>
X.Org driver has been updated to version 6.14.6 and is now selected by
default when running without an <tt>xorg.conf</tt> file.<br>
To force the use of the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeonold&sektion=4">radeonold(4)</a>
driver, add the following to <tt>/etc/X11/xorg.conf</tt>:
<pre>
Section "Device"
    Identifier "Old Radeon Card"
    Driver "radeonold"
EndSection
</pre>

<p>
<a name="20120821"></a>
<h3>2012/08/21 - IPv6 SLAAC defaults to privacy addresses</h3>
IPv6 stateless automatic address configuration (as used when you
configure an interface's address using "rtsol") now defaults to using
RFC4941 privacy addresses.<p>
This means that when making outgoing connections, predictable addresses
based on the MAC address are no longer used as a source address, instead
temporary addresses are generated periodically and used (see
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a>'s
description of "autoconfprivacy" for more information).<p>
Incoming connections aren't affected by this; the IPv6 address based on
the MAC address is still configured on the interface and can be used for
incoming connections.
However if connections to other machines are restricted based on source
IPv6 addresses or reverse DNS lookups, you may need to make configuration
changes and either disable privacy addresses (e.g. <tt>echo
"up -autoconfprivacy" &gt;&gt; /etc/hostname.em0</tt>) or configure
addresses manually instead.

<p>
<a name="20120823"></a>
<h3>2012/08/23 - New toolchain behavior</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ld&sektion=1">ld(1)</a>'s
linker scripts now recognizes .openbsd.randomdata sections, which libc has
also been updated to make use of.  Normally ld(1) is not built until after libc,
so to explicitly build it first use:
<blockquote><pre>
<b>cd /usr/src/gnu/usr.bin/binutils
make -f Makefile.bsd-wrapper obj
make -f Makefile.bsd-wrapper
make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
You can verify that ld(1) is up to date by checking the output from
ld --verbose:
<blockquote><pre>
$ <b>ld --verbose | grep randomdata</b>
  .openbsd.randomdata     :
    PROVIDE_HIDDEN (__openbsd_randomdata_start = .);
    *(.openbsd.randomdata .openbsd.randomdata.*)
    PROVIDE_HIDDEN (__openbsd_randomdata_end = .);
</pre></blockquote>

<p>
<a name="20120830"></a>
<h3>2012/08/30 - pmdb(1) removed</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pmdb&sektion=1">pmdb(1)</a>
was removed from base. The binary and it's manual page can be removed:
<blockquote><pre>
<b>rm /usr/bin/pmdb /usr/share/man/man1/pmdb.1
</b></pre></blockquote>

<p>
<a name="20120831"></a>
<h3>2012/08/31 - gcc(1) now uses __guard_local instead of __guard on ELF/GCC4 architectures</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gcc&sektion=1">gcc(1)</a>
now emits stack-smashing protection code that references __guard_local instead
__guard on ELF/GCC4 architectures.  Because GCC is built at the end of a normal
"make build", it's necessary to either do two full builds, or you can short-cut
the first build by updating just the C runtime files and compiler:
<blockquote><pre>
<b>cd /usr/src/lib/csu
make depend && make && sudo make install
cd /usr/src/gnu/usr.bin/cc
make depend && make && sudo make install
</b></pre></blockquote>
You can then proceed with a normal "make build" as per
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
<a name="20120831a"></a>
<h3>2012/08/31 - amd64, sgi, loongson and sparc64 are now PIE</h3>
The amd64, sgi, loongson and sparc64 platforms have been switched to
PIE (position-independent executables) by default.
Everyone is encouraged to update via snapshots (dated after 2012/08/31); if you
want to upgrade via sources, follow these instructions:
<p>
First, install the new system Makefiles with the change to PIE_ARCH in
bsd.own.mk:
<blockquote><pre>
<b>cd /usr/src/share/mk && sudo make install
</b></pre></blockquote>
Then, recompile and install gcc and binutils.
<blockquote><pre>
<b>cd /usr/src/gnu/usr.bin/binutils
make -f Makefile.bsd-wrapper clean && make -f Makefile.bsd-wrapper obj && \
	make -f Makefile.bsd-wrapper depend && make -f Makefile.bsd-wrapper
cd /usr/src/gnu/usr.bin/cc
make clean && make obj && make depend && make && sudo make install
cd /usr/src/gnu/usr.bin/binutils && sudo make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
Finally, recompile your system by following the procedure outlined in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
<a name="20120901"></a>
<h3>2012/08/31 - alpha is now PIE</h3>
The alpha platform has been switched to PIE (position-independent executables)
by default.
Everyone is encouraged to update via snapshots (dated after 2012/09/01).
To do this conversion yourself, see the
<a href="#20120831a">instructions for PIE conversion</a> on other architectures.

<p>
<a name="20120902"></a>
<h3>2012/09/02 - hppa is now PIE</h3>
The hppa platform has been switched to PIE (position-independent executables)
by default.
Everyone is encouraged to update via snapshots (dated after 2012/09/02).
To do this conversion yourself, see the
<a href="#20120831a">instructions for PIE conversion</a> on other architectures.

<p>
<a name="20120912"></a>
<h3>2012/09/12 - landisk is now PIE</h3>
The landisk platform has been switched to PIE (position-independent executables)
by default.
Everyone is encouraged to update via snapshots (dated after 2012/09/12).
To do this conversion yourself, see the
<a href="#20120831a">instructions for PIE conversion</a> on other architectures.

<p>
<a name="20120920"></a>
<h3>2012/09/20 - pf enforces 'frags' limit</h3>
pfctl will abort and fail to load the ruleset if the 'frags' limit in
pf.conf is higher than the kern.maxclusters sysctl.
This is to guard against allowing a system to run out of mbuf clusters.
If it is not set, the new default is 25% of kern.maxclusters.

<p>
<a name="20120923"></a>
<h3>2012/09/23 - imake moved to ports</h3>
Imake, the old X build system has been moved to ports, as none of the packages in xenocara uses it anymore. The version installed in <tt>/usr/X11R6</tt> need to be manually removed:
<blockquote><pre><b>
sudo rm -rf /usr/X11R6/lib/X11/config
sudo rm -f /usr/X11R6/bin/{ccmakedep,cleanlinks,imake,makeg,mergelib,mkdirhier,mkhtmlindex,revpath,xmkmf}
sudo rm -f /usr/X11R6/man/man1/{ccmakedep,cleanlinks,imake,makeg,mergelib,mkdirhier,mkhtmlindex,revpath,xmkmf}.1
</b></pre></blockquote>

<p>
<a name="20120924"></a>
<h3>2012/09/24 - [ports] Major PostgreSQL update</h3>
Major update to 9.2.1. A dump/restore is required.

<p>
<a name="20121011"></a>
<h3>2012/10/11 - smtpd.conf syntax change</h3>
The <tt>"all"</tt> keyword becomes <tt>"any"</tt>. You need to update your config. Be careful to really rewrite rules like:
<pre>	accept from all [...]</pre>
to
<pre>	accept from any [...]</pre>
because the former syntax is still valid, but it behaves completely differently now and it would break your ruleset.

<p>
<a name="20121123"></a>
<h3>2012/11/23 - sndiod(1) options changes</h3>
The rate (-r) and the encoding (-e) become per-device settings and as
such must precede the device they apply to (-f). Example, rewrite:
<blockquote><pre><b>sndiod -frsnd/1 -r44100</b></pre></blockquote>
by
<blockquote><pre><b>sndiod -r44100 -frsnd/1</b></pre></blockquote>
MIDI thru boxes are created dynamically so -M options must be removed.
MIDI ports (-q) cannot be connected to the sndiod control port,
so an external program must be used for that (eg. aucat(1) or the
audio/midish port). For instance, to make rmidi/5 control snd/0 do:
<blockquote><pre><b>aucat -M -mmidi -qrmidi/5 -qsnd/0</b></pre></blockquote>

<p>
<a name="20121201"></a>
<h3>2012/12/01 - m88k ports switch to gcc 3</h3>
OpenBSD/luna88k and OpenBSD/mvme88k now use gcc 3.3.6 as their system compiler.
Upgrading with a recent snapshot is recommended; however, for reference, the
manual upgrade steps are:
<ul>
<li>Build and install a new assembler:
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/gas
   make clean
   make obj
   make depend
   make
   make install
</b></pre></blockquote>
<li>Build the new C compiler with the existing compiler:
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/gcc
   make -f Makefile.bsd-wrapper clean
   make -f Makefile.bsd-wrapper obj
   make -f Makefile.bsd-wrapper -DBOOTSTRAP depend
   make -f Makefile.bsd-wrapper -DBOOTSTRAP
   make -f Makefile.bsd-wrapper -DBOOTSTRAP includes
   make -f Makefile.bsd-wrapper -DBOOTSTRAP install
</b></pre></blockquote>
<li>Let the rest of the system know the platform now runs gcc 3:
<blockquote><pre><b>
   cd /usr/src/share/mk
   make install
</b></pre></blockquote>
<li>Build and install an up-to-date preprocessor:
<blockquote><pre><b>
   cd /usr/src/usr.bin/cpp
   make clean
   make obj
   make depend
   make
   make install
</b></pre></blockquote>
<li>Rebuild libc and libiberty with the new C compiler:
<blockquote><pre><b>
   cd /usr/src/lib/libc
   make clean
   make obj
   make NOMAN= NOPROFILE= depend
   make NOMAN= NOPROFILE=
   make NOMAN= NOPROFILE= install

   cd /usr/src/gnu/lib/libiberty
   make -f Makefile.bsd-wrapper clean
   make -f Makefile.bsd-wrapper obj
   make -f Makefile.bsd-wrapper NOMAN= NOPROFILE= depend
   make -f Makefile.bsd-wrapper NOMAN= NOPROFILE=
   make -f Makefile.bsd-wrapper NOMAN= NOPROFILE= install
</b></pre></blockquote>
<li>Now rebuild the compiler set again:
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/gcc
   make -f Makefile.bsd-wrapper clean
   make -f Makefile.bsd-wrapper obj
   make -f Makefile.bsd-wrapper depend
   make -f Makefile.bsd-wrapper
   make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
<li>The system is now ready to be rebuilt with gcc3:
<blockquote><pre><b>
   cd /usr/src
   rm -fR /usr/include/g++
   make obj
   make build
</b></pre></blockquote>
</ul>

<p>
<a name="20121222"></a>
<h3>2012/12/22 - ld.so(1) update required</h3>
As a first step towards a better mechanism to properly support
destructors in dynamic libraries it is necessary to build and install
a new dynamic linker on all OpenBSD platforms except for OpenBSD/m68k,
OpenBSD/m88k and OpenBSD/vax:
<blockquote><pre><b>
   cd /usr/src/libexec/ld.so
   make clean
   make obj
   make depend
   make
   make install
</b></pre></blockquote>

<p>
<a name="20130105"></a>
<h3>2013/01/05 - m88k ports switch to ELF</h3>
OpenBSD/luna88k and OpenBSD/mvme88k now use ELF instead of a.out as their native
binary file format.
Upgrading with a recent snapshot is recommended; however, for reference, the
manual upgrade steps are:
<ul>
<li>Install new include files:
<blockquote><pre><b>
   cd /usr/src
   make obj
   make cleandir
   make includes
</b></pre></blockquote>
<li>Build, but do not install, binutils:
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/binutils
   make -f Makefile.bsd-wrapper
</b></pre></blockquote>
<li>Partially build the new C compiler: (this will fail because as(1) is still
the a.out assembler; this step must be done nevertheless before binutils can
be installed)
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/gcc
   make -f Makefile.bsd-wrapper -DBOOTSTRAP depend
   make -f Makefile.bsd-wrapper -DBOOTSTRAP -k
</b></pre></blockquote>
<li>Install binutils:
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/binutils
   make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
<li>Resume compiler build and install it:
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/gcc
   make -f Makefile.bsd-wrapper -DBOOTSTRAP
   make -f Makefile.bsd-wrapper -DBOOTSTRAP install
</b></pre></blockquote>
<li>Let the rest of the system know the platform now uses an ELF toolchain:
<blockquote><pre><b>
   cd /usr/src/share/mk
   make install
</b></pre></blockquote>
<li>Rebuild csu, libc, libm, libutil and libiberty with the new C compiler:
<blockquote><pre><b>
   cd /usr/src/lib/csu
   make NOMAN= NOPROFILE= depend
   make NOMAN= NOPROFILE=
   make NOMAN= NOPROFILE= install

   cd /usr/src/lib/libc
   make NOMAN= NOPROFILE= depend
   make NOMAN= NOPROFILE=
   make NOMAN= NOPROFILE= install

   cd /usr/src/lib/libm
   make NOMAN= NOPROFILE= depend
   make NOMAN= NOPROFILE=
   make NOMAN= NOPROFILE= install

   cd /usr/src/lib/libutil
   make NOMAN= NOPROFILE= depend
   make NOMAN= NOPROFILE=
   make NOMAN= NOPROFILE= install

   cd /usr/src/gnu/lib/libiberty
   make -f Makefile.bsd-wrapper NOMAN= NOPROFILE= depend
   make -f Makefile.bsd-wrapper NOMAN= NOPROFILE=
   make -f Makefile.bsd-wrapper NOMAN= NOPROFILE= install
</b></pre></blockquote>
<li>Now rebuild the compiler set again:
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/gcc
   make -f Makefile.bsd-wrapper clean
   make -f Makefile.bsd-wrapper depend
   make -f Makefile.bsd-wrapper
   make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
<li>The system is now ready to be rebuilt:
<blockquote><pre><b>
   cd /usr/src
   make build
</b></pre></blockquote>
</ul>

<p>
<a name="20130116"></a>
<h3>2013/01/16 - pf.conf syntax change</h3>
Queue assignment is now done using &quot;set queue&quot; instead of just
&quot;queue&quot;.
The new syntax is documented in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>

<p>
<a name="20130131"></a>
<h3>2013/01/31 - m88k ports gain shared libraries support</h3>
OpenBSD/luna88k and OpenBSD/mvme88k now build and use ELF shared libraries.
Upgrading with a recent snapshot is recommended; however, for reference, the
manual upgrade steps are:
<ul>
<li>Install new include files:
<blockquote><pre><b>
   cd /usr/src
   make obj
   make cleandir
   make includes
</b></pre></blockquote>
<li>Rebuild and install binutils:
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/binutils
   make -f Makefile.bsd-wrapper obj
   make -f Makefile.bsd-wrapper
   make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
<li>Rebuild and install the compiler:
<blockquote><pre><b>
   cd /usr/src/gnu/usr.bin/gcc
   make -f Makefile.bsd-wrapper obj
   make -f Makefile.bsd-wrapper depend
   make -f Makefile.bsd-wrapper
   make -f Makefile.bsd-wrapper install
</b></pre></blockquote>
<li>Build and install ld.so:
<blockquote><pre><b>
   cd /usr/src/libexec/ld.so
   make obj
   make depend
   make
   make install
</b></pre></blockquote>
<li>Let the rest of the system know the platform is now able to build and use
  shared libraries:
<blockquote><pre><b>
   cd /usr/src/share/mk
   make install
</b></pre></blockquote>
<li>The system is now ready to be rebuilt:
<blockquote><pre><b>
   cd /usr/src
   make build
</b></pre></blockquote>
</ul>

<p>
<a name="20130202"></a>
<h3>2013/02/02 - m68k ports switch to ELF</h3>
OpenBSD/hp300 and OpenBSD/mvme68k now use ELF instead of a.out as their native
binary file format.
<br>
There is <b>no compatibility support</b> for now old a.out binaries.
<br>
Third-party software, such as packages, will need to be reinstalled with ELF
binaries.
<br>
Reinstalling with a recent snapshot is recommended; upgrades will work since
all a.out components of the base system will get replaced with their ELF
counterparts.
<br>
Upgrading by source <b>roughly</b> involves building a static ELF toolchain
(forcing NOPIC to be set in <tt>share/mk/bsd.own.mk</tt>), building as many
static ELF binaries as possible (but <tt>ld.so</tt>), building a new kernel,
building new boot blocks, installing the new boot blocks, rebooting on the new
kernel, resuming userland build up to the point the whole userland is statically
linked, then removing all a.out shared libraries, removing <tt>NOPIC</tt> from
<tt>share/mk/bsd.own.mk</tt>, installing <tt>ld.so</tt>, and rebuilding the
system. You do not want to suffer through this.

<!-- 5.3 -->
<p>
d203 1
a203 1
<small>$OpenBSD: current.html,v 1.379 2013/04/19 15:05:59 florian Exp $</small>
@


1.379
log
@struct swdevt requires up to date config(8).
@
text
@d61 1
d637 26
d667 1
a667 1
<small>$OpenBSD: current.html,v 1.378 2013/04/16 13:41:31 sthen Exp $</small>
@


1.378
log
@roundcube update moves to PDO and sqlite2->sqlite3; remind people to
follow the instructions.
@
text
@d60 1
d620 16
d640 1
a640 1
<small>$OpenBSD: current.html,v 1.377 2013/04/16 11:11:14 nick Exp $</small>
@


1.377
log
@
config -> conf, pointed out by Michal Markowski (markowski1 at gmail), thanks!
@
text
@d59 1
d613 6
d623 1
a623 1
<small>$OpenBSD: current.html,v 1.376 2013/04/16 04:26:10 guenther Exp $</small>
@


1.376
log
@Tweak previous
@
text
@d600 1
a600 1
<blockquote><pre><b>   cd /usr/src/sys/arch/`uname -m`/config
d616 1
a616 1
<small>$OpenBSD: current.html,v 1.375 2013/04/16 03:56:24 guenther Exp $</small>
@


1.375
log
@statfs change requires strict following of the build steps, or you'll
end up with a userland that can't mount (or remount!) critical filesystems
@
text
@d58 1
a58 1
<li><a href="#20130415">2013/04/15 - struct statfs(8) change</a>
d585 1
a585 1
<h3>2013/04/15 - struct statfs(8) change</h3>
d595 1
a595 1
and build a clean kernel for it to work.
d616 1
a616 1
<small>$OpenBSD: current.html,v 1.374 2013/04/06 08:44:14 kettenis Exp $</small>
@


1.374
log
@Add a heads-up about the renumbering of com(4) devices on amd64 and i386.
@
text
@d57 2
a58 1
<li><a href="#20130325">2013/04/04 - com(4) devices on amd64 and i386</a>
d583 29
d616 1
a616 1
<small>$OpenBSD: current.html,v 1.373 2013/03/28 21:49:08 martynas Exp $</small>
@


1.373
log
@Actually, this step is not needed.  But please make sure includes
are propagated because GCC won't tell you if they're not, will do
the wrong thing, and then will laugh at you.  Thanks to guenther@@
and matthew@@ for diagnosing.
@
text
@d57 1
d567 15
d586 1
a586 1
<small>$OpenBSD: current.html,v 1.371 2013/03/25 21:40:54 sthen Exp $</small>
@


1.372
log
@Add a note about cleaning /usr/obj/* if updating post-libc.so.67.0
and libm.so.8.0.  Found the hard way by a few, sthen@@ built successfuly
with this.
@
text
@a56 1
<li><a href="#20130328">2013/03/28 - libc and libm update</a>
a564 10

<p>
<a name="20130328"></a>
<h3>2013/03/28 - libc and libm update</h3>
Updating to <tt>libc.so.67.0</tt> and <tt>libm.so.8.0</tt> requires
a clean object directory.  Please run the following and then continue
on building userland as usual.
<blockquote><pre><b>
    rm -fR /usr/obj/*
</b></pre></blockquote>
@


1.371
log
@in an attempt to pre-empt "why don't some of my perl packages work" mails,
remind users that packages with XS modules need to be updated to versions
built against current perl.
@
text
@d57 1
d567 10
d581 1
a581 1
<small>$OpenBSD: current.html,v 1.370 2013/03/24 14:16:01 sthen Exp $</small>
@


1.370
log
@Point out the need for updated packages after adding pf translation counter.
Fix typo (fontfonfig) while there.
@
text
@d56 1
d557 8
d570 1
a570 1
<small>$OpenBSD: current.html,v 1.369 2013/03/14 00:05:40 matthieu Exp $</small>
@


1.369
log
@libfontconfig.la is back. Remove the part telling to remove it.
@
text
@d54 2
a55 1
<li><a href="#20130310">2013/03/10 - fontfonfig update</a>
d545 12
d561 1
a561 1
<small>$OpenBSD: current.html,v 1.368 2013/03/11 11:57:35 krw Exp $</small>
@


1.368
log
@Type (sould -> should) and spacing nit.
@
text
@d534 1
a534 8
<p>
Before building xenocara manually (or after upgrading from a
snapshot), the <tt>libfontconfig.la</tt> file from 
previous versions should be removed:
<blockquote><pre><b>
    rm /usr/X11R6/lib/libfontconfig.la
</b><pre></blockquote>
Also, this new version of fontconfig deprecates the use of
d548 1
a548 1
<small>$OpenBSD: current.html,v 1.367 2013/03/11 08:15:19 matthieu Exp $</small>
@


1.367
log
@More precise fontconfig upgrade instructions.
@
text
@d534 1
a534 1
<br>
d537 1
a537 1
previous versions sould be removed:
d555 1
a555 1
<small>$OpenBSD: current.html,v 1.366 2013/03/11 07:11:22 matthieu Exp $</small>
@


1.366
log
@Fontconfig update
@
text
@d535 2
a536 1
After upgrading xenocara, the <tt>libfontconfig.la</tt> file from
d555 1
a555 1
<small>$OpenBSD: current.html,v 1.365 2013/02/02 18:22:48 miod Exp $</small>
@


1.365
log
@Document m88k gaining shared libraries and m68k switching to ELF.
@
text
@d53 2
d528 22
d554 1
a554 1
<small>$OpenBSD: current.html,v 1.364 2013/01/16 02:15:06 henning Exp $</small>
@


1.364
log
@queue -> set queue
@
text
@d51 2
d276 1
a276 1
<pre>
d283 1
a283 1
</pre>
d285 1
a285 1
<pre>
d293 1
a293 1
</pre>
d295 1
a295 1
<pre>
d298 1
a298 1
</pre>
d300 1
a300 1
<pre>
d307 1
a307 1
</pre>
d309 1
a309 1
<pre>
d323 1
a323 1
</pre>
d325 1
a325 1
<pre>
d332 1
a332 1
</pre>
d334 1
a334 1
<pre>
d339 1
a339 1
</pre>
d349 1
a349 1
<blockquote><pre>
d356 1
a356 1
</pre></blockquote>
d367 1
a367 1
<pre>
d372 1
a372 1
</pre>
d374 1
a374 1
<pre>
d377 1
a377 1
</pre>
d381 1
a381 1
<pre>
d385 1
a385 1
</pre>
d387 1
a387 1
<pre>
d390 1
a390 1
</pre>
d392 1
a392 1
<pre>
d396 1
a396 1
</pre>
d398 1
a398 1
<pre>
d401 1
a401 1
</pre>
d403 1
a403 1
<pre>
d428 1
a428 1
</pre>
d430 1
a430 1
<pre>
d436 1
a436 1
</pre>
d438 1
a438 1
<pre>
d441 1
a441 1
</pre>
d452 74
d530 1
a530 1
<small>$OpenBSD: current.html,v 1.363 2013/01/16 02:10:13 henning Exp $</small>
@


1.363
log
@bonjour miod, c'est 2013
@
text
@d50 1
d442 8
d454 1
a454 1
<small>$OpenBSD: current.html,v 1.362 2013/01/05 20:28:21 miod Exp $</small>
@


1.362
log
@Instructions to manually switch an m88k port to ELF. Assuming you're a fool
enough not to use the snapshots (soon to hit a ftp mirror near you), that is.
@
text
@d49 1
a49 1
<li><a href="#20120105">2013/01/05 - m88k ports switch to ELF</a>
d356 1
a356 1
<a name="20120105"></a>
d445 1
a445 1
<small>$OpenBSD: current.html,v 1.361 2012/12/22 12:01:05 kettenis Exp $</small>
@


1.361
log
@Tell people to update their ld.so.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2005-2012 by OpenBSD">
d49 1
d355 86
d445 1
a445 1
<small>$OpenBSD: current.html,v 1.360 2012/12/21 20:31:57 sthen Exp $</small>
@


1.360
log
@Tweak text about PF frags limits to make it clear that the ruleset will
not be loaded if the value in config is higher than the limit. Found the
hard way by me.
@
text
@d48 1
d338 16
d358 1
a358 1
<small>$OpenBSD: current.html,v 1.359 2012/12/04 19:00:02 miod Exp $</small>
@


1.359
log
@typo; rustyBSD
@
text
@d220 2
a221 2
pfctl will abort if the 'frags' limit in pf.conf is higher than
the kern.maxclusters sysctl.
d341 1
a341 1
<small>$OpenBSD: current.html,v 1.358 2012/12/01 21:11:37 miod Exp $</small>
@


1.358
log
@m88k compiler upgrade instructions (not for the faint of the heart)
@
text
@d328 1
a328 1
<li>The system is now ready to be rebuild with gcc3:
d341 1
a341 1
<small>$OpenBSD: current.html,v 1.357 2012/11/23 07:56:53 ratchov Exp $</small>
@


1.357
log
@mention sndiod options changes
@
text
@d47 1
d263 74
d341 1
a341 1
<small>$OpenBSD: current.html,v 1.356 2012/11/17 16:28:30 ajacoutot Exp $</small>
@


1.356
log
@Revert previous for now.
@
text
@d46 1
d248 14
d266 1
a266 1
<small>$OpenBSD: current.html,v 1.355 2012/11/17 12:40:05 ajacoutot Exp $</small>
@


1.355
log
@fix date format, spotted by "f5b".
@
text
@a45 1
<li><a href="#20121117">2012/11/17 - rc.conf(8) pre-rc.d(8) backward compatibility removed</a>
a246 41
<p>
<a name="20121117"></a>
<h3>2012/11/17 - rc.conf(8) pre-rc.d(8) backward compatibility removed</h3>
As of today, rc.conf.local(8) only supports rc.d(8) variables to control
daemons startup.<br><br>
The following variables have been renamed to their _flags counterpart:
<i>amd</i> <i>inetd</i> <i>portmap</i> <i>rwhod</i>.
<br>
<pre>
    <b>amd=YES</b> becomes <b>amd_flags=</b>
    <b>inetd=NO</b> becomes <b>inetd_flags=NO</b>
    <b>portmap=YES</b> becomes <b>portmap_flags=</b>
    <b>rwhod=YES</b> becomes <b>rwhod_flags=</b>
</pre>
The <i>nfs_server</i> and <i>lockd</i> variables have been removed.
Enabling the NFS server is done by setting:
<pre><b>    nfsd_flags="-tun 4"
    mountd_flags=
</b></pre>
<i>rpc.lockd</i> and <i>rpc.statd</i> can be started by setting:
<pre><b>    lockd_flags=
    statd_flags=
</b></pre>

The <i>krb5_master_kdc</i> variable has been removed.
Enabling a KerberosV master is done by setting:
<pre><b>    kdc_flags=
    kadmind_flags=
    kpasswdd_flags=
</b></pre>

The <i>krb5_slave_kdc</i> variable has been removed.
Enabling a KerberosV slave is done by setting:
<pre><b>    kdc_flags=
</b></pre>

The <i>aucat_flags</i> variable has been renamed to <i>sndiod_flags</i>.
<pre>
    <b>aucat_flags=NO</b> becomes <b>sndiod_flags=NO</b>
</pre>

d251 1
a251 1
<small>$OpenBSD: current.html,v 1.354 2012/11/17 07:53:04 ajacoutot Exp $</small>
@


1.354
log
@Document how to move from old-style pre-rc.d(8) variables to the new ones.

input from and ok sthen@@
@
text
@d46 1
a46 1
<li><a href="#20121711">2012/17/11 - rc.conf(8) pre-rc.d(8) backward compatibility removed</a>
d249 2
a250 2
<a name="20121711"></a>
<h3>2012/17/11 - rc.conf(8) pre-rc.d(8) backward compatibility removed</h3>
d293 1
a293 1
<small>$OpenBSD: current.html,v 1.353 2012/11/10 04:15:29 nick Exp $</small>
@


1.353
log
@
roll to 5.2 (missed on release day! :-/).  Pointed out by Scott McEachern,
scott at blackstaff dot ca, thanks!
@
text
@d46 1
d248 41
d293 1
a293 1
<small>$OpenBSD: current.html,v 1.352 2012/11/04 04:17:17 lteo Exp $</small>
@


1.352
log
@Remove 5.2 stuff.

ok nick
@
text
@d56 2
a57 2
It contains information about changes from 5.1-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 5.0 or earlier, or people
d61 2
a62 2
If you wish to update to 5.1-release or 5.1-stable from previous
versions, see the <a href="upgrade51.html">upgrade guide</a>.
d251 1
a251 1
<small>$OpenBSD: current.html,v 1.351 2012/10/21 14:44:14 nick Exp $</small>
@


1.351
log
@
add [ports] marker to PostgreSQL notes.
@
text
@a32 14
<li><a href="#20120304">2012/03/04 - xf86-video-ati update is back</a>
<li><a href="#20120406">2012/04/06 - RAIDframe removed</a>
<li><a href="#20120412">2012/04/12 - [landisk] gcc4 for landisk</a>
<li><a href="#20120428">2012/04/28 - [ports] Subversion gnome-keyring is now a subpackage</a>
<li><a href="#20120606">2012/06/06 - [ports] xpdf-utils replaced with poppler-utils</a>
<li><a href="#20120607">2012/06/07 - [ports] ser removed</a>
<li><a href="#20120607a">2012/06/07 - [ports] scrotwm renamed to spectrwm</a>
<li><a href="#20120607b">2012/06/07 - [ports] xxxterm renamed to xombrero</a>
<li><a href="#20120608">2012/06/08 - [ports] dovecot update</a>
<li><a href="#20120623">2012/06/23 - nginx.conf default SSL file locations changed</a>
<li><a href="#20120708">2012/07/08 - smtpd.conf syntax change</a>
<li><a href="#20120709">2012/07/09 - smtpd queue layout changed</a>
<li><a href="#20120709a">2012/07/09 - HID usage table changed</a>
<!-- 5.2 -->
a77 181
<a name="20120304"></a>
<h3>2012/03/04 - return of the xf86-video-ati update</h3>

The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon">radeon(4)</a>
driver has been re-updated to version 6.14.3, but it's not selected by
auto-configuration code.
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeonold">radeonold(4)</a>
driver is providing a frozen version of the last working driver, until
all issues in the new driver are fixed.<br>
Users with cards needing the new driver should create an
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a> file containing just
<pre>
Section "Device"
    Identifier "RadeonCard"
    Driver "radeon"
EndSection
</pre>
Or merge this section in their existing <tt>/etc/X11/xorg.conf</tt> file.<br>
The <b>radeonhd</b> driver is now deprecated.
Users of this this driver should update their <tt>/etc/X11/xorg.conf</tt> file
by replacing
<pre>
      Driver "radeonhd"
</pre>
with
<pre>
      Driver "radeon"
</pre>

<p>
<a name="20120406"></a>
<h3>2012/04/06 - RAIDframe removed</h3>
The RAIDframe disk driver and configuration utility have been removed.
After upgrading, the following files can be removed:
<blockquote><pre>
<b>rm /sbin/raidctl
rm /usr/share/man/man4/raid.4
rm /usr/share/man/man8/raidctl.8
</b></pre></blockquote>
Users of RAIDframe will need to consider alternatives such as
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid">softraid(4)</a>.

<p>
<a name="20120412"></a>
<h3>2012/04/12 - [landisk] gcc4 for landisk</h3>

landisk has changed from gcc3 to gcc4.  It is strongly recommended
to use snapshots instead of the following method.
Updated makefiles, gcc, cpp and libstdc++ must be installed with these
steps.
<p>
Firstly, gcc4 and csu must be compiled with the existing compiler:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/share/mk && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make
cd /usr/src/lib/csu
make obj && make depend && make && make install
cd /usr/src/gnu/usr.bin/cc
make install
</b></pre></blockquote>
Secondly, gcc4 must be rebuilt with itself:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/usr.bin/cpp
make obj && make && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Thirdly, libstdc++-v3 must be installed after removing the old C++ headers:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
cd /usr/src/gnu/lib/libstdc++-v3
make obj && make includes && make depend && make && make install
</b></pre></blockquote>
And lastly the entire system rebuilt with the usual procedure documented in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
For people updating using snapshots, don't forget to:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
</b></pre></blockquote>
before installing newer snapshot.

<p>
<a name="20120428"></a>
<h3>2012/04/28 - [ports] Subversion gnome-keyring is now a subpackage</h3>
gnome-keyring support in Subversion was previously a FLAVOR of the port,
as it required the main program to link with libpthread causing some
side-effects with the previous uthread library (notably, strange
behaviour with "svn diff | more" due to how I/O on file descriptors
was handled).<p>

As this is no longer an issue with rthreads, the FLAVOR has been removed.
To continue using gnome-keyring with Subversion, after updating packages you
will need to "pkg_add gnome-keyring-subversion".

<p>
<a name="20120606"></a>
<h3>2012/06/06 - [ports] xpdf-utils replaced with poppler-utils</h3>
The PDF-related tools from xpdf-utils (pdffonts, pdfimages, pdfinfo,
pdftotext) have been replaced with equivalents in poppler-utils.
Note that these no longer read xpdfrc files and are now only configured
using command-line options.

<p>
<a name="20120607"></a>
<h3>2012/06/07 - [ports] ser removed</h3>
The ser port has been removed. Users of ser are advised to migrate
to kamailio for now.

<p>
<a name="20120607a"></a>
<h3>2012/06/07 - [ports] scrotwm renamed to spectrwm</h3>
scrotwm has changed its name to spectrwm.
The package update will be handled automatically but you will need to
rename your configuration file/s:
<tt>mv /etc/scrotwm.conf /etc/spectrwm.conf</tt> for the system
configuration file, and any ".scrotwm.conf" files in user home directories
will need to be renamed to ".spectrwm.conf".
You will also need to adapt any entries in .xsession, etc., to start the
window manager.

<p>
<a name="20120607b"></a>
<h3>2012/06/07 - [ports] xxxterm renamed to xombrero</h3>
xxxterm has changed its name to Xombrero.
The package update will be handled automatically but you will need to
rename your configuration file/s and directories.
There is no system configuration file, but any ".xxxterm.conf" files in
user home directories will need to be renamed to ".xombrero.conf".

<p>
<a name="20120608"></a>
<h3>2012/06/08 - [ports] dovecot update</h3>
Dovecot was updated to 2.1 which may require minor changes to configuration.
See the <a href="http://wiki2.dovecot.org/Upgrading/2.1">upgrade notes</a>
for information.

<p>
<a name="20120623"></a>
<h3>2012/06/23 - nginx.conf default SSL file locations changed</h3>
The <tt>ssl_certificate</tt> and <tt>ssl_certificate_key</tt> values in the
default <tt>/etc/nginx/nginx.conf</tt> file have been changed to
<tt>/etc/ssl/server.crt</tt> and <tt>/etc/ssl/private/server.key</tt>
respectively to match the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8">ssl(8)</a>
man page.

<p>
<a name="20120708"></a>
<h3>2012/07/08 - smtpd.conf syntax change</h3>
<tt>relay via</tt> rules should now be expressed with a relay URL:
<pre>	accept [...] relay via "mx1.example.org" smtps port 465</pre>
becomes
<pre>	accept [...] relay via "smtps://mx1.example.org"</pre>
The new relay URL syntax is documented in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=smtpd.conf&sektion=5">smtpd.conf(5)</a>

<p>
<a name="20120709"></a>
<h3>2012/07/09 - smtpd queue layout changed</h3>
A change to the queue layout was introduced, you will want to empty your
queue before updating.

<p>
<a name="20120709a"></a>
<h3>2012/07/09 - HID usage table changed</h3>
The HID usage table (as used by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=uhid&sektion=4">uhid(4)</a>)
has been updated and certain entry names have been changed. If you are
using <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usbhidaction&sektion=1">usbhidaction(1)</a>
you may need to adjust your config with the new entry names. These can be
obtained with:
<blockquote><pre>usbhidctl -l</pre></blockquote>

<!-- 5.2 -->
<p>
d251 1
a251 1
<small>$OpenBSD: current.html,v 1.350 2012/10/12 19:16:02 eric Exp $</small>
@


1.350
log
@warn about the smtpd.conf syntax change
@
text
@d58 1
a58 1
<li><a href="#20120924">2012/09/24 - Major PostgreSQL update</a>
d430 1
a430 1
<h3>2012/09/24 - Major PostgreSQL update</h3>
d446 1
a446 1
<small>$OpenBSD: current.html,v 1.349 2012/09/25 19:16:46 sthen Exp $</small>
@


1.349
log
@adjust English, partly pointed out by "rustyBSD" on www@@.
@
text
@d59 1
d433 9
d446 1
a446 1
<small>$OpenBSD: current.html,v 1.348 2012/09/25 06:27:10 camield Exp $</small>
@


1.348
log
@pf now enforces a sane 'frags' limit.
@
text
@d412 4
a415 3
pfctl will abort if the 'frags' limit in pf.conf is higher then kern.maxclusters.
This is to guard a system against running out of mbuf clusters.
If it is not set the new default is 25% of kern.maxclusters.
d436 1
a436 1
<small>$OpenBSD: current.html,v 1.347 2012/09/24 20:54:04 pea Exp $</small>
@


1.347
log
@Add the PostgreSQL update
@
text
@d56 1
d408 8
d435 1
a435 1
<small>$OpenBSD: current.html,v 1.346 2012/09/23 08:26:15 matthieu Exp $</small>
@


1.346
log
@imake moved to ports
@
text
@d57 1
d417 5
d426 1
a426 1
<small>$OpenBSD: current.html,v 1.345 2012/09/13 01:57:59 lteo Exp $</small>
@


1.345
log
@Mention that landisk has switched to PIE.

Requested by deraadt@@
@
text
@d56 1
d406 9
d420 1
a420 1
<small>$OpenBSD: current.html,v 1.344 2012/09/04 04:32:02 deraadt Exp $</small>
@


1.344
log
@hppa switched to PIE; once again, if you do not manage to cross over, go get a snapshot
@
text
@d55 1
a386 1
<p>
d396 1
d398 7
d410 1
a410 1
<small>$OpenBSD: current.html,v 1.343 2012/09/02 03:50:45 deraadt Exp $</small>
@


1.343
log
@clarify
@
text
@d53 2
a54 1
<li><a href="#20120831a">2012/09/01 - alpha is now PIE</a>
d387 11
d402 1
a402 1
<small>$OpenBSD: current.html,v 1.342 2012/09/02 03:49:49 deraadt Exp $</small>
@


1.342
log
@alpha got some PIE
@
text
@d380 2
d390 1
a390 1
<small>$OpenBSD: current.html,v 1.341 2012/08/31 21:26:28 fgsch Exp $</small>
@


1.341
log
@show commands in bold and use sudo when installing
@
text
@d53 1
d378 6
d388 1
a388 1
<small>$OpenBSD: current.html,v 1.340 2012/08/31 18:52:10 naddy Exp $</small>
@


1.340
log
@fix PIE upgrade instructions and link/anchor
@
text
@d331 2
a332 2
rm /usr/bin/pmdb /usr/share/man/man1/pmdb.1
</pre></blockquote>
d343 2
a344 2
cd /usr/src/lib/csu
make depend && make && make install
d346 2
a347 2
make depend && make && make install
</pre></blockquote>
d381 1
a381 1
<small>$OpenBSD: current.html,v 1.339 2012/08/31 17:21:52 pascal Exp $</small>
@


1.339
log
@Document upgrade process for PIE.  Comments from aja@@, nick@@ and deraadt@@.

ok deraadt@@ and sthen@@ on a previous version
@
text
@d52 1
a52 1
<li><a href="#201208XX">2012/08/31 - amd64, sgi, loongson and sparc64 are now PIE</a>
d352 1
a352 1
<a name="20120831"></a>
d371 1
a371 1
cd /usr/src/gnu/usr.bin/binutils && sudo make install
d381 1
a381 1
<small>$OpenBSD: current.html,v 1.338 2012/08/31 17:11:07 matthew Exp $</small>
@


1.338
log
@Document the upgrade process for switching from __guard to
__guard_local.
@
text
@d52 1
d352 25
d381 1
a381 1
<small>$OpenBSD: current.html,v 1.337 2012/08/31 06:34:32 jasper Exp $</small>
@


1.337
log
@pmdb is gone
@
text
@d51 1
d334 17
d355 1
a355 1
<small>$OpenBSD: current.html,v 1.336 2012/08/24 08:01:22 kettenis Exp $</small>
@


1.336
log
@Add missing make obj step in previous.
@
text
@d50 1
d260 1
a260 1
<pre>usbhidctl -l</pre>
d324 9
d337 1
a337 1
<small>$OpenBSD: current.html,v 1.335 2012/08/24 05:30:39 matthew Exp $</small>
@


1.335
log
@Tweak styling to match other entries.
@
text
@d308 2
a309 1
make -f Makefile.bsd-wrapper all
d327 1
a327 1
<small>$OpenBSD: current.html,v 1.334 2012/08/24 05:26:20 matthew Exp $</small>
@


1.334
log
@Add missing TOC entry; pointed out by jmc.
@
text
@d304 1
a304 1
been updated to make use of.  Normally ld(1) is not built until after libc,
d306 5
a310 5
<pre>
$ cd /usr/src/gnu/usr.bin/binutils
$ make -f Makefile.bsd-wrapper all
$ make -f Makefile.bsd-wrapper install
</pre>
d313 2
a314 2
<pre>
$ ld --verbose | grep randomdata
d319 1
a319 1
</pre>
d326 1
a326 1
<small>$OpenBSD: current.html,v 1.333 2012/08/24 01:34:30 matthew Exp $</small>
@


1.333
log
@Warn about binutils/libc dependency and instruct users how to upgrade
safely.
@
text
@d49 1
d326 1
a326 1
<small>$OpenBSD: current.html,v 1.332 2012/08/23 20:29:57 sthen Exp $</small>
@


1.332
log
@Talk about the change in default for autoconfigured IPv6 addresses, from SLAAC
to RFC 4941 privacy addresses. With feedback from bluhm, sperreault and stsp.
@
text
@d299 22
d325 1
a325 1
<small>$OpenBSD: current.html,v 1.331 2012/08/08 16:56:02 matthieu Exp $</small>
@


1.331
log
@radeon driver update.
@
text
@d48 1
d279 20
d303 1
a303 1
<small>$OpenBSD: current.html,v 1.330 2012/07/18 13:20:12 jj Exp $</small>
@


1.330
log
@Misspelled port name, ok jasper
@
text
@d46 2
d259 18
d282 1
a282 1
<small>$OpenBSD: current.html,v 1.329 2012/07/16 16:47:32 jasper Exp $</small>
@


1.329
log
@mention recent usb_hid_usages update

ok sthen@@
@
text
@d190 1
a190 1
to kamaillio for now.
d262 1
a262 1
<small>$OpenBSD: current.html,v 1.328 2012/07/15 17:16:39 gilles Exp $</small>
@


1.328
log
@document recent updates

from Marcus Merighi <mcmer-openbsd@@tor.at> and Robert <robert@@peichaer.org>
@
text
@d45 1
d247 11
d262 1
a262 1
<small>$OpenBSD: current.html,v 1.327 2012/07/09 21:47:14 gonzalo Exp $</small>
@


1.327
log
@Add directories to save xxxterm certs, or another files there.

Pointed out from Juan Francisco Cantero Hurtado, thanks!

Ok sthen@@
@
text
@d43 2
d229 15
d250 1
a250 1
<small>$OpenBSD: current.html,v 1.326 2012/06/24 03:24:49 lteo Exp $</small>
@


1.326
log
@Mention the nginx.conf SSL file location change.

Even though the SSL lines are commented by default, nick@@ pointed out
that there is no harm mentioning it here to make people aware of it,
since the process for setting up HTTPS with nginx on their next system
will be slightly different; henning@@, haesbaert@@, and I agree.

ok nick haesbaert henning
@
text
@d206 1
a206 1
rename your configuration file/s.
d233 1
a233 1
<small>$OpenBSD: current.html,v 1.325 2012/06/08 23:00:17 sthen Exp $</small>
@


1.325
log
@Mention dovecot upgrade, minor config changes may be needed
@
text
@d42 1
d217 10
d233 1
a233 1
<small>$OpenBSD: current.html,v 1.324 2012/06/08 13:47:19 sthen Exp $</small>
@


1.324
log
@scrotwm and xxxterm have new politically-correct names so users get
to rename some config files and adjust .xsession etc. Reworked from a
diff from gonzalo@@.
@
text
@d41 1
d210 8
d222 1
a222 1
<small>$OpenBSD: current.html,v 1.323 2012/06/07 12:23:29 jasper Exp $</small>
@


1.323
log
@add ser

ok sthen@@
@
text
@d39 2
d188 21
d213 1
a213 1
<small>$OpenBSD: current.html,v 1.322 2012/06/07 07:04:30 kili Exp $</small>
@


1.322
log
@Mention the move from xpdf-utils to poppler-utils, especially that the
latter doesn't read xpdfrc.

From sthen, with a little correction by me. ok sthen@@ ajacoutot@@
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2005-2011 by OpenBSD">
d38 1
d179 5
d190 1
a190 1
<small>$OpenBSD: current.html,v 1.321 2012/05/11 11:18:56 nick Exp $</small>
@


1.321
log
@
remove stuff that went into 5.1.  Found sitting in my 51 tree, forgot to
commit!
@
text
@d37 1
d170 8
d184 1
a184 1
<small>$OpenBSD: current.html,v 1.320 2012/04/28 10:18:55 sthen Exp $</small>
@


1.320
log
@tweak, suggested by stsp@@
@
text
@a32 17
<li><a href="#20110919">2011/09/19 - [alpha, landisk] thread model posix enabled for gcc 3</a>
<li><a href="#20110923">2011/09/23 - [ports] PostgreSQL update</a>
<li><a href="#20111013">2011/10/13 - [ports] Subversion update</a>
<li><a href="#20111015">2011/10/15 - [xenocara] xkeyboard-config update</a>
<li><a href="#20111017">2011/10/17 - midicat hardlink to aucat(1) removed</a>
<li><a href="#20111119">2011/11/19 - bogus libssl/src/src directory</a>
<li><a href="#20111124">2011/11/24 - [alpha] gcc4 for alpha</a>
<li><a href="#20111212">2011/12/12 - [ports] QEMU binary name change</a>
<li><a href="#20120112">2012/01/12 - [ports] php 5.3</a>
<li><a href="#20120120">2012/01/20 - apropos/whatis change reverted</a>
<li><a href="#20120123">2012/01/23 - [ports] courier-imap 4.10</a>
<li><a href="#20120123a">2012/01/23 - npppd/pipex ingress filter is now configurable</a>
<li><a href="#20120125">2012/01/25 - xf86-video-ati update</a>
<li><a href="#20120126">2012/01/26 - [ports] www/ntlmaps removed</a>
<li><a href="#20120204">2012/02/04 - nsd update; rebuild database</a>
<li><a href="#20120207">2012/02/07 - revert the xf86-video-ati update</a>
<!-- post 5.1 updates -->
d47 2
a48 2
It contains information about changes from 5.0-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.9 or earlier, or people
d52 2
a53 2
If you wish to update to 5.0-release or 5.0-stable from previous
versions, see the <a href="upgrade50.html">upgrade guide</a>.
a68 254
<a name="20110919"></a>
<h3>2011/09/19 - [alpha, landisk] thread model posix enabled for gcc 3</h3>
Thread model posix has been enabled for gcc 3 which makes dwarf2 exception
handling thread safe and enables thread safety for libstdc++.
This only applies to alpha and landisk platforms.
To upgrade follow these steps:
<ul>
<li>Build and install gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">Build and install userland</a>
</ul>

<p>
<a name="20110923"></a>
<h3>2011/09/23 - [ports] PostgreSQL update</h3>
Major upgrade to PostgreSQL 9.1.0.
A dump/restore is required.

<p>
<a name="20111013"></a>
<h3>2011/10/13 - [ports] Subversion update</h3>
Major upgrade to Subversion 1.7.0.
Existing working copies need to be upgraded manually.
See the <a href="http://subversion.apache.org/docs/release-notes/1.7.html#wc-ng"
>Subversion 1.7 release notes</a> for details.

<p>
<a name="20111015"></a>
<h3>2011/10/15 - [xenocara] xkeyboard-config update</h3>
Update to xkeyboard-config 2.4.1 replaces the <tt>/usr/X11R6/share/X11/xkb/symbols/srvr_ctrl</tt> by a bare file.
When updating from source, you need to remove that directory before building Xenocara:
<pre>
  # cd /usr/X11R6/share/X11/xkb/symbols
  # rm -rf srvr_ctrl
</pre>

<p>
<a name="20111017"></a>
<h3>2011/10/17 - midicat hardlink to aucat(1) removed</h3>
MIDI files can be manipulated and MIDI thru boxes can be created with
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aucat">aucat(1)</a>
thus midicat was removed.
For instance, to create a MIDI thru box:
<pre>
  # aucat -M
</pre>
and to record a MIDI file:
<pre>
  # aucat -M -o dump.syx
</pre>
Consequently,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio">sndio(7)</a>
MIDI thru box port names have the "aucat" prefix instead of "midithru".
User scripts and MIDI application settings using the old port name should be
updated to use new "aucat" prefix if possible.
<p>
The old midicat binary and its manual page could be removed:
<pre>
  # rm -f /usr/bin/midicat /usr/share/man/man1/midicat.1
</pre>

<p>
<a name="20111119"></a>
<h3>2011/11/19 - bogus lib/libssl/src/src directory</h3>
When importing OpenSSL 1.0.0e, a bogus <tt>src/lib/libssl/src/src</tt>
directory was imported.
This has been fixed manually by removing this extra directory from
the master CVS repository.
<p>
If a <tt>src</tt> tree was checked-out or updated with that
directory, it needs to be removed manually:
<pre>
 # rm -rf /usr/src/lib/libssl/src/src
</pre>
to avoid a warning from CVS server on future updates.

<p>
<a name="20111124"></a>
<h3>2011/11/24 - [alpha] gcc4 for alpha</h3>

alpha has changed from gcc3 to gcc4.
Updated makefiles, gcc, cpp and libstdc++ must be installed with these four
steps.
<p>
Firstly, gcc4 must be compiled with the existing compiler:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/share/mk && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Secondly, gcc4 must be rebuilt with itself:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/usr.bin/cpp
make obj && make && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Thirdly, libstdc++-v3 must be installed after removing the old C++ headers:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
cd /usr/src/gnu/lib/libstdc++-v3
make obj && make includes && make depend && make && make install
</b></pre></blockquote>
And lastly the entire system rebuilt with the usual procedure documented in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
For people updating using snapshots, don't forget to:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
</b></pre></blockquote>
before installing newer snapshot.

<p>
<a name="20111212"></a>
<h3>2011/12/12 - [ports] QEMU binary name change</h3>

As of QEMU 1.0 the i386 target has been renamed from qemu to
qemu-system-i386, you will need to change scripts/command lines as necessary.

<p>
<a name="20120112"></a>
<h3>2012/01/12 - [ports] php 5.3</h3>

(As of November) the primary PHP version used in ports was switched to 5.3.
This change means that if you run PHP applications packaged in ports,
you will need to switch your webserver config to use the newer version
of PHP.
If you are currently using PHP with Apache in base, you will need to
adjust your configuration:
<blockquote><pre><b>cd /var/www/conf/modules
ln -fs /var/www/conf/modules.sample/php-5.3.conf /var/www/conf/modules/php.conf
</b></pre></blockquote>
You will also need to check for links to any active PHP extension modules
in /etc/php-5.2 and re-create them in /etc/php-5.3, e.g.
<blockquote><pre><b>cd /etc/php-5.3
ls -l ../php-5.3.sample
ln -s ../php-5.3.sample/pdo_mysql.ini .
# (etc)
</b></pre></blockquote>
Note that mhash is now part of the main php-5.3 package so an
existing mhash.ini symbolic link can be ignored.

<p>
<a name="20120120"></a>
<h3>2012/01/20 - apropos/whatis change reverted</h3>

Activation of the new
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makewhatis">makewhatis(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apropos">apropos(1)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=whatis">whatis(1)</a>
suite had to be reverted because of insufficient speed
and because of some other regressions.

No matter which version you are coming from and how you updated,
some files can be removed:

<pre>
  # rm -f /usr/bin/makewhatis /usr/bin/mandocdb /usr/share/man/man8/mandocdb.8
</pre>

In contrast to some old versions of this FAQ, do not remove
<tt>/usr/libdata/perl5/OpenBSD/Makewhatis*</tt> or any <tt>whatis.db</tt>
files.

If you update from source by running <tt>make build</tt>,
rebuild the whatis databases afterwards:

<pre>
  # /usr/libexec/makewhatis
</pre>

<p>
<a name="20120123"></a>
<h3>2012/01/23 - [ports] courier-imap 4.10</h3>
Courier-imap has reset its epoch for the internal sequence number generator
for new mail folders.
Please read the UPGRADING section of the
<a href="http://fossies.org/unix/misc/courier-imap-4.10.0.tar.gz:a/courier-imap-4.10.0/INSTALL">INSTALL</a>
notes for details.

<p>
<a name="20120123a"></a>
<h3>2012/01/23 - npppd/pipex ingress filter is now configurable</h3>

Users of pipex and npppd (which is not currently built by default)
should note that the ingress filter is now configurable.
Previously it was always enabled.
It is no longer enabled by default; if it is needed, add the following
to /etc/npppd/npppd.conf:
<pre>
  ppp.ingress_filter: true
</pre>

<p>
<a name="20120125"></a>
<h3>2012/01/25 - xf86-video-ati update</h3>

The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon">radeon(4)</a>
driver has been updated to version 6.14.3.
The <b>radeonhd</b> driver is now deprecated.
A few users may be affected by a bug is zaphod mode support in the
new radeon driver, so the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeonold">radeonold(4)</a>
driver is now providing a frozen version of the last working driver, until
zaphod mode support in the main driver is fixed.
<ul>
<li>users with
   <pre>
     Driver "radeonhd"
   </pre>
   in their <tt>/etc/X11/xorg.conf</tt> can replace this with
   <pre>
     Driver "radeon"
   </pre>
   or just remove <tt>xorg.conf</tt> completely.
<li>users of zaphod configurations (2 or more <b>Screen</b> sections
   in <tt>xorg.conf</tt>) with the ati or radeon driver should replace
   the <tt>Driver</tt> lines in their xorg.conf with
   <pre>Driver "radeonold"</pre>.
</ul>

<p>
<a name="20120126"></a>
<h3>2012/01/26 - [ports] www/ntlmaps removed</h3>
www/ntlmaps has been removed. You can use www/cntlm as a replacement.

<p>
<a name="20120204"></a>
<h3>2012/02/04 - nsd update; rebuild database</h3>
NSD was updated to v3.2.9.
The binary database format has changed; after upgrading, you will need
to rebuild it from the zone files and re-start nsd:
<pre>
  # nsdc rebuild
  # /etc/rc.d/nsd restart
</pre>

<p>
<a name="20120207"></a>
<h3>2012/02/07 - revert the xf86-video-ati update</h3>
The <a href="#20120125">radeon driver update </a> has been reverted. So
<tt>xorg.conf</tt> modifications described there should be undone.

<p>
d175 1
a175 1
<small>$OpenBSD: current.html,v 1.319 2012/04/28 09:54:15 sthen Exp $</small>
@


1.319
log
@subversion--gnome-keyring FLAVOR -> gnome-keyring-subversion subpackage
@
text
@d437 2
a438 2
To continue using this functionality, after updating packages you will need
to "pkg_add gnome-keyring-subversion".
d446 1
a446 1
<small>$OpenBSD: current.html,v 1.318 2012/04/15 12:58:40 jsing Exp $</small>
@


1.318
log
@Document RAIDframe removal.

Based on a diff from Remi Locherer <remi.locherer@@relo.ch>
@
text
@d53 1
d428 14
d446 1
a446 1
<small>$OpenBSD: current.html,v 1.317 2012/04/12 13:05:34 jsg Exp $</small>
@


1.317
log
@mention landisk gcc4 switch
ok miod@@
@
text
@d51 1
d370 13
d431 1
a431 1
<small>$OpenBSD: current.html,v 1.316 2012/03/04 16:27:45 matthieu Exp $</small>
@


1.316
log
@Re-update of the radeon driver.
@
text
@d51 1
d369 44
d417 1
a417 1
<small>$OpenBSD: current.html,v 1.315 2012/02/07 07:53:46 matthieu Exp $</small>
@


1.315
log
@revert the radeon driver update.
@
text
@d49 2
d239 1
a239 1
Activation of the new 
d267 1
a267 1
Courier-imap has reset its epoch for the internal sequence number generator 
d294 1
a294 1
new radeon driver, so the 
d299 1
a299 1
<li>users with 
d302 2
a303 2
   </pre> 
   in their <tt>/etc/X11/xorg.conf</tt> can replace this with 
d308 3
a310 3
<li>users of zaphod configurations (2 or more <b>Screen</b> sections 
   in <tt>xorg.conf</tt>) with the ati or radeon driver should replace 
   the <tt>Driver</tt> lines in their xorg.conf with 
d333 1
a333 1
The <a href="#20120125">radeon driver update </a> has been reverted. So 
d337 31
d372 1
a372 1
<small>$OpenBSD: current.html,v 1.314 2012/02/04 21:26:57 sthen Exp $</small>
@


1.314
log
@nsd needs a database rebuild.
@
text
@d48 2
d329 6
d339 1
a339 1
<small>$OpenBSD: current.html,v 1.313 2012/01/27 10:44:47 dcoppa Exp $</small>
@


1.313
log
@Add "<p>", missed from previous commit
@
text
@d47 1
d316 11
d331 1
a331 1
<small>$OpenBSD: current.html,v 1.312 2012/01/26 09:04:30 dcoppa Exp $</small>
@


1.312
log
@Mention www/ntlmaps removal.

As requested by sthen@@
@
text
@d314 1
d319 1
a319 1
<small>$OpenBSD: current.html,v 1.311 2012/01/25 22:10:20 matthieu Exp $</small>
@


1.311
log
@Radeon driver updates.
@
text
@d46 1
d309 5
d318 1
a318 1
<small>$OpenBSD: current.html,v 1.310 2012/01/23 10:13:40 yasuoka Exp $</small>
@


1.310
log
@delete a garbage line.
@
text
@d45 1
d280 28
d312 1
a312 1
<small>$OpenBSD: current.html,v 1.309 2012/01/23 09:57:04 sthen Exp $</small>
@


1.309
log
@Mention that npppd/pipex ingress filter is no longer enabled by default
@
text
@a44 1
>>>>>>> 1.308
d283 1
a283 1
<small>$OpenBSD: current.html,v 1.308 2012/01/23 09:19:55 giovanni Exp $</small>
@


1.308
log
@
Mention courier-imap update.
From william@@
ok sthen@@
@
text
@d44 2
d267 13
d284 1
a284 1
<small>$OpenBSD: current.html,v 1.307 2012/01/21 00:55:01 schwarze Exp $</small>
@


1.307
log
@Remove outdated instructions after the apropos/whatis backout
and explicitly say which part of the old instructions still holds
and which parts must not be followed any longer.
@
text
@d43 1
d256 9
d269 1
a269 1
<small>$OpenBSD: current.html,v 1.306 2012/01/12 09:33:48 sthen Exp $</small>
@


1.306
log
@belatedly add info about the switch from php-5.2 to php-5.3
@
text
@a40 1
<li><a href="#20120110">2012/01/08 - apropos/whatis database format change</a>
d42 1
a203 36
<a name="20120110"></a>
<h3>2012/01/10 - apropos/whatis database format change</h3>

Enabling the new 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=makewhatis">makewhatis(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apropos">apropos(1)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=whatis">whatis(1)</a>
suite obsoleted the <tt>whatis.db</tt> database files and requires new
<tt>mandoc.db</tt> and <tt>mandoc.index</tt> database files
for apropos and whatis.

When upgrading via snapshots, new base and Xenocara database files
are installed from the install sets, so it is sufficient to run:
<pre>
  # makewhatis /usr/local/man
</pre>

If you have added any <tt>_whatdb</tt> lines to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=man.conf">man.conf(5)</a>,
rebuild those databases manually, in the same way.

In case of doubt or when upgrading by compiling from source,
just rebuild all configured databases:
<pre>
  # makewhatis
</pre>

Some old files can be removed:

<pre>
  # rm -f /usr/share/man/whatis.* /usr/X11R6/man/whatis.* /usr/local/man/whatis.*
  # rm -f /usr/bin/mandocdb /usr/share/man/man8/mandocdb.8
  # rm -rf /usr/libdata/perl5/OpenBSD/Makewhatis*
</pre>

<p>
d226 29
d259 1
a259 1
<small>$OpenBSD: current.html,v 1.305 2012/01/10 10:01:31 schwarze Exp $</small>
@


1.305
log
@Continue using the traditional name makewhatis(8), as requested by espie@@.
This hopefully finishes the user-visible changes.
@
text
@d42 1
d239 23
d266 1
a266 1
<small>$OpenBSD: current.html,v 1.304 2012/01/09 10:37:37 schwarze Exp $</small>
@


1.304
log
@Update the apropos/whatis database entry after the change of the
database names.  The new instructions both work for people coming
directly from the old whatis.db and for those who had a snapshot
with the short-lived whatis.{db,index}.  No need to muck with
unused package-related databases not referenced in man.conf(5);
pkg_delete(1) now copes with those.
@
text
@d41 1
a41 1
<li><a href="#20120108">2012/01/08 - apropos/whatis database format change</a>
d203 2
a204 2
<a name="20120108"></a>
<h3>2012/01/08 - apropos/whatis database format change</h3>
d217 1
a217 1
  # mandocdb /usr/local/man
d227 1
a227 1
  # mandocdb
d230 1
a230 1
The old database files can be removed:
d234 2
d242 1
a242 1
<small>$OpenBSD: current.html,v 1.303 2012/01/06 17:19:15 schwarze Exp $</small>
@


1.303
log
@whatis.db format change;
triggered by a report from nigel@@
@
text
@d41 1
a41 1
<li><a href="#20120106">2012/01/06 - whatis.db format change</a>
d203 2
a204 2
<a name="20120106"></a>
<h3>2012/01/06 - whatis.db format change</h3>
d210 3
a212 1
suite changed the <tt>whatis.db</tt> database format.
d214 1
a214 1
When upgrading via snapshots, new base and Xenocara whatis database files
d222 1
a222 1
rebuild those whatis databases manually, in the same way.
d225 1
a225 1
just rebuild all configured whatis databases:
d230 6
d240 1
a240 1
<small>$OpenBSD: current.html,v 1.302 2011/12/12 11:03:03 sthen Exp $</small>
@


1.302
log
@qemu binay name change
@
text
@d41 1
d202 26
d232 1
a232 1
<small>$OpenBSD: current.html,v 1.301 2011/11/28 03:24:31 nick Exp $</small>
@


1.301
log
@
html fixes from Jason Filley (jason at snakelegs dot org).  Thanks!
@
text
@d40 1
d194 7
d205 1
a205 1
<small>$OpenBSD: current.html,v 1.300 2011/11/25 06:01:37 miod Exp $</small>
@


1.300
log
@alpha gcc upgrade
@
text
@d91 1
a91 1
<a name="20110923">
d197 1
a197 1
<small>$OpenBSD: current.html,v 1.299 2011/11/20 11:00:05 matthieu Exp $</small>
@


1.299
log
@document libssl/src/src glitch
@
text
@d39 1
d153 40
d197 1
a197 1
<small>$OpenBSD: current.html,v 1.298 2011/11/15 21:20:03 ajacoutot Exp $</small>
@


1.298
log
@Missing full stop.
@
text
@d38 1
d138 14
d156 1
a156 1
<small>$OpenBSD: current.html,v 1.297 2011/11/01 10:47:46 nick Exp $</small>
@


1.297
log
@
out with -->5.0 stuff
@
text
@d92 1
a92 1
A dump/restore is required
d141 1
a141 1
<small>$OpenBSD: current.html,v 1.296 2011/10/18 06:19:28 ratchov Exp $</small>
@


1.296
log
@tweak last entry to look like all other entries
@
text
@a32 24
<li><a href="#20110313">2011/03/13 - -current mklocale required</a>
<li><a href="#20110319">2011/03/19 - [ports] incompatible groff update</a>
<li><a href="#20110414">2011/04/14 - Kernel "make depend" now no-op</a>
<li><a href="#20110417">2011/04/17 - New security(8) script</a>
<li><a href="#20110418">2011/04/18 - vnd removed, svnd renamed to vnd</a>
<li><a href="#20110422">2011/04/22 - [ports] SOGo update</a>
<li><a href="#20110422a">2011/04/22 - [ports] www/opera-flashplugin removed</a>
<li><a href="#20110428">2011/04/28 - ftp-proxy(8) pf.conf change required</a>
<li><a href="#20110505">2011/05/05 - tftp-proxy(8) pf.conf change required</a>
<li><a href="#20110520">2011/05/20 - pf.conf 'set skip' now handles groups</a>
<li><a href="#20110525">2011/05/25 - removed support for legacy audio and MIDI device names</a>
<li><a href="#20110528">2011/05/28 - [ports] Dovecot update</a>
<li><a href="#20110531">2011/05/31 - -current config(8) required to build kernel</a>
<li><a href="#20110602">2011/06/02 - [xenocara] switched to xkeyboard-config</a>
<li><a href="#20110629">2011/06/29 - [xenocara] new input driver configuration code</a>
<li><a href="#20110704">2011/07/04 - pf.conf "set require-order" removed</a>
<li><a href="#20110706">2011/07/06 - [ports] pstoraster moved to its own package</a>
<li><a href="#20110707">2011/07/07 - rc.conf 'rc_scripts' variable renamed to 'pkg_scripts'</a>
<li><a href="#20110708">2011/07/08 - OpenBSD/sparc switched to gcc4</a>
<li><a href="#20110710">2011/07/10 - OpenBSD/armish and OpenBSD/zaurus switched to gcc4</a>
<li><a href="#20110714">2011/07/14 - [ports] PHP: support for multiple versions.</a>
<li><a href="#20110717">2011/07/17 - [ports] change in startup procedure for Postfix and exim</a>
<li><a href="#20110720">2011/07/20 - [ports] Amavisd-new update</a>
<li><a href="#20110804">2011/08/04 - [ports] pecl-imagick needs pthread</a>
d47 2
a48 2
It contains information about changes from 4.9-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.7 or earlier, or people
d52 2
a53 2
If you wish to update to 4.9-release or 4.9-stable from previous
versions, see the <a href="upgrade49.html">upgrade guide</a>.
a67 354
<a name="20110313"></a>
<h3>2011/03/13 - -current mklocale required</h3>
mklocale needs to be built and installed to avoid a
&quot;conflicting map entries&quot; error:
<blockquote><pre><b>cd /usr/src/usr.bin/mklocale
make obj
make depend
make
make install
</b></pre></blockquote>

<a name="20110319"></a>
<h3>2011/03/19 - [ports] incompatible groff update</h3>
In case you are building ports, update src/usr.sbin/pkg_add/OpenBSD
at the same time as upgrading from groff-1.15 to groff-1.21.
New groff and old pkg_create build manuals with ANSI escapes,
old groff and new pkg_create cause ports build failures.

<a name="20110414"></a>
<h3>2011/04/14 - Kernel "make depend" now no-op</h3>
Kernel Makefiles now autogenerate dependencies during compilation,
so the "make depend" target now quietly exits, doing nothing.
Users of most platforms will not have to do anything about this.

<p>
Users of gcc2-based platforms (hp300, mvme68k, mvme88k, sparc, vax)
will have to rebuild gcc before this will work to implement
the required gcc options.

<blockquote><pre><b># gcc2 platforms only!!
rm -r /usr/obj/gnu/egcs/gcc/*
cd /usr/src/gnu/egcs/gcc
make -f Makefile.bsd-wrapper clean
make -f Makefile.bsd-wrapper obj
make -f Makefile.bsd-wrapper depend
make -f Makefile.bsd-wrapper
make -f Makefile.bsd-wrapper install
make -f Makefile.bsd-wrapper clean
make -f Makefile.bsd-wrapper depend
make -f Makefile.bsd-wrapper
make -f Makefile.bsd-wrapper install
</b></pre></blockquote>

But as always, starting from a newer snapshot is a much better idea.

<a name="20110417"></a>
<h3>2011/04/17 - new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=security&sektion=8">security(8)</a> script</a></h3>
Apply <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/daily.diff?r1=1.69;r2=1.70">revision 1.70</a>
to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&sektion=8">daily(8)</a>.
In case you have added code to the file <tt>/etc/security</tt>,
move that code to <tt>/etc/daily.local</tt>.
Delete the file <tt>/etc/security</tt>, it has been replaced by the
file <tt>/usr/libexec/security</tt> now contained in the base file set.
Also delete the line containing <tt>/etc/security</tt>
from the file <tt>/etc/changelist</tt>.

<a name="20110418"></a>
<h3>2011/04/18 - vnd removed, svnd renamed to vnd</h3>
The traditional vnd that bypasses the buffer cache has been removed, and svnd
has been renamed to vnd. It is also no longer possible to swap to vnds. Users
running current will notice that the kernel will treat svndX and vndX as the
same device from now, so older svnd device nodes will continue to function.

<a name="20110422"></a>
<h3>2011/04/22 - [ports] SOGo update</h3>
SOGo has been updated to 1.3.6.
The new session handling requires a new configuration default named
OCSSessionsFolderURL.
For more information consult the package README file or the general
SOGo Installation Guide installed with the package.

<a name="20110422a"></a>
<h3>2011/04/22 - [ports] www/opera-flashplugin removed</h3>
www/opera-flashplugin has been removed. You can install GNU Gnash as a
replacement.
<!-- XXX remove FAQ 13.14 for 5.0 -->

<a name="20110428"></a>
<h3>2011/04/28 - ftp-proxy(8) pf.conf change required</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy(8)</a>
has changed to using divert-to instead of rdr-to, avoiding an expensive
state lookup using the DIOCNATLOOK ioctl.
PF rules must be adjusted to compensate - old rules like these:

<blockquote><pre><b>pass in quick proto tcp to port ftp rdr-to 127.0.0.1 port 8021</b></pre></blockquote>

should be replaced with:

<blockquote><pre><b>pass in quick inet proto tcp to port ftp divert-to 127.0.0.1 port 8021</b></pre></blockquote>

Note that with divert-to, the address family (in this example <tt>inet</tt>)
must be specified explicitly.

<a name="20110505"></a>
<h3>2011/05/05 - tftp-proxy(8) pf.conf change required</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&sektion=8">tftp-proxy(8)</a>
has also changed to using divert-to.
PF rules must be adjusted to compensate - old rules like these:

<blockquote><pre><b>pass in quick on internal proto udp to port tftp rdr-to 127.0.0.1 port 6969</b></pre></blockquote>

should be replaced with:

<blockquote><pre><b>pass in quick on internal inet proto udp to port tftp divert-to 127.0.0.1 port 6969</b></pre></blockquote>

Again note that the address family must be specified explicitly.

<a name="20110520"></a>
<h3>2011/05/20 - pf.conf 'set skip' now handles groups</h3>

In pf.conf, '<tt>set skip on &lt;...&gt;</tt>' now works with interface groups.
Previously if an interface type (without number) was used, e.g. '<tt>set skip
on vlan</tt>' or '<tt>set skip on em</tt>' was used, it would have the
undocumented behaviour of matching any interface of that type.
Now it will only match an interface which is a member of the named group.<p>

This results in changed behaviour for some users:
If you currently use "set skip" with a physical interface type (e.g.
"<tt>set skip on ix</tt>") you will need to add the interface to a group
of that name: '<tt>ifconfig ix0 group ix</tt>' or add '<tt>group ix</tt>'
to hostname.ix0.<p>

Interfaces cloned at runtime (e.g. lo, trunk, vlan, pppoe, carp, gif,
mpe and others) default to being in a group named after the interface type,
so for these interfaces there will be no change in behaviour unless you
have deliberately changed groups, e.g. with '<tt>ifconfig carp456 -group
carp</tt>'.

<p>
<a name="20110525"></a>
<h3>2011/05/25 - removed support for legacy audio and MIDI device names</h3>
Legacy naming won't work any longer so any scripts or configuration
files of applications using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio&amp;sektion=7">sndio(7)</a>
should be updated.
Examples:

<pre>
     /dev/audio0   --&gt;   sun:0
     /dev/audio1   --&gt;   sun:1
     /dev/rmidi2   --&gt;   rmidi:2
     default       --&gt;   aucat:0
     mystuff       --&gt;   aucat:0.mystuff
</pre>

<p>
<a name="20110528"></a>
<h3>2011/05/28 - [ports] Dovecot update</h3>
Dovecot has had a major update, needing some changes in configuration files.
See the <a href="http://wiki2.dovecot.org/Upgrading/2.0">notes on upgrading
from 1.1 to 2.0</a> on Dovecot's wiki for more information about how to handle
this.<p>
The database support has been moved from flavoured versions of Dovecot
(dovecot-1.2.16p5-ldap, -mysql, -postgresql, -sqlite, etc) to plugins
in subpackages (dovecot-ldap-2.0.13, etc).
All older versions will be upgraded to the new main package; if you're
using a flavoured version for database support, you will need to add the
relevant subpackage/s yourself.
Berkeley DB is no longer supported, if you're using this you will need
to switch to a SQL database instead.

<p>
<a name="20110531"></a>
<h3>2011/05/31 - -current config(8) required to build kernel</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8">config(8)</a>
needs to be built and installed to avoid "excess elements in
struct initializer" errors in ioconf.o during a kernel build:
<blockquote><pre><b>cd /usr/src/usr.sbin/config
make obj
make depend
make
make install
</b></pre></blockquote>
Afterwards, any existing kernel compilation directories must be
rebuilt by running config again:
<blockquote><pre><b>cd /usr/src/sys/arch/${ARCH}/conf
config ${CONFIG}
</b></pre></blockquote>
Finally, the kernel can be built:
<blockquote><pre><b>cd /usr/src/sys/arch/${ARCH}/compile/${CONFIG}
make
</b></pre></blockquote>

<p>
<a name="20110602"></a>
<h3>2011/06/02 - [Xenocara] switched to xkeyboard-config</h3>
Keyboard definition files from the old xkb-data package in
/etc/X11/xkb have been replaced by files from
<a href="http://www.freedesktop.org/wiki/Software/XKeyboardConfig">xkeyboard-config</a>,
which are now  installed in /usr/X11R6/share/X11/xkb.
The old ones can be removed:
<blockquote><pre><b>rm -rf /etc/X11/xkb
</b></pre></blockquote>
If you have an <pre>/etc/X11/xorg.conf</pre> file that exists mainly
to set keyboard type and nationality that file should be removed,
otherwise you may find yourself without keyboard functionality in X.

<p>
<a name="20110629"></a>
<h3>2011/06/29 - [Xenocara] New input device configuration code</h3>
A new autoconfiguration mechanism for input devices has been implemented
in the X server. It provides even better support for various input
devices: synaptics touchpads (not yet ready) or touchscreens without a
configuration file.
The <b>InputDevice</b> sections can be removed from <tt>xorg.conf</tt>
in most cases.<br>
To override the autoconfiguration with an <b>InputDevice</b> section for
an input device that would normally be auto-configured, the following
needs to be added to <tt>/etc/X11/xorg.conf</tt>:
<blockquote><pre><b>
Section "ServerFlags"
    Option "AutoAddDevices" "False"
EndSection
</b></pre></blockquote>

<p>
<a name="20110704"></a>
<h3>2011/07/04 - pf.conf "set require-order" removed</h3>
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>
<tt>set require-order</tt> option has been removed; you must remove it
from any ruleset which uses it or the ruleset will not load.
This option was used to relax requirements on ruleset ordering; these
have not been enforced by default for some time.

<p>
<a name="20110706"></a>
<h3>2011/07/06 - [ports] pstoraster moved to its own package</h3>
The pstoraster print filter has moved out of ghostscript into the
gstoraster package. If you use a CUPS print filter that requires pstoraster
to run, you need to install the new package manually:
<blockquote><pre><b># pkg_add gstoraster
</b></pre></blockquote>

<p>
<a name="20110707"></a>
<h3>2011/07/07 - rc.conf 'rc_scripts' variable renamed to 'pkg_scripts'</h3>
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&sektion=8">rc.conf(8)</a>
<tt>rc_scripts</tt> variable has been renamed to <tt>pkg_scripts</tt>.
Edit
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf.local&sektion=8">rc.conf.local(8)</a>
accordingly to be able to start package daemons automatically on boot.
<br>
This change was introduced to make it clear that <tt>pkg_scripts</tt> should only be used to store
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=packages&sektion=7">packages(7)</a>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.d&sektion=8">rc.d(8)</a>
scripts names.

<p>
<a name="20110708"></a>
<h3>2011/07/08 - OpenBSD/sparc switched to gcc4</h3>
OpenBSD/sparc now uses gcc4.
Upgrade from source is non-trivial and time consuming, and will not be
supported.
Upgrade by snapshot dated after July 9 before attempting to build from
source.

<p>
Make sure your boot loader is up to date -- use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&arch=sparc">installboot</a>
if you don't use bsd.rd to install the snapshot.

<p>
<a name="20110710">
<h3>2011/07/10 - OpenBSD/armish and OpenBSD/zaurus switched to gcc4</h3>
The ARM based platforms now use gcc4.
Upgrade from source is non-trivial and time consuming, and will not be
supported.
Upgrade by snapshot dated after July 10 before attempting to build from
source.

<p>
<a name="20110714">
<h3>2011/07/14 - [ports] PHP: support for multiple versions</h3>
Multiple PHP versions are now supported in packages.
<br><br>

<i>php.ini moved</i><br>
The directory layout of the PHP port has been adjusted.
/var/www/conf/php.ini has been replaced by /etc/php-$VERSION.ini.
If you have made changes to /var/www/conf/php.ini file, make sure
they are carried across to the relevant file for whichever version
you will be running (/etc/php-5.2.ini or /etc/php-5.3.ini).
<br><br>

<i>php5.conf renamed to php-5.2.conf</i><br>
If you are currently using PHP with the web server in base, you will
need to adjust your configuration:
<blockquote><pre><b>cd /var/www/conf/modules
rm php5.conf
ln -s /var/www/conf/modules.sample/php-5.2.conf /var/www/conf/modules/php.conf
</b></pre></blockquote>

<i>php module changes</i><br>
The various PHP modules (for example gd, mysql, postgresql, xcache,
and various other modules which are part of PHP or from PECL) had their
configuration files in /var/www/conf/php5.sample; symbolic links for
active modules were placed in /var/www/conf/php5.
These have moved to /etc/php-5.2.sample and /etc/php-5.2 respectively.
You will need to check for existing links in /var/www/conf/php5 and
create equivalent links in /etc/php-5.2.
Note that mbstring is now part of the main php-5.2 package so an
existing mbstring.ini symbolic link can be ignored.

<p>
<a name="20110717">
<h3>2011/07/17 - [ports] change in startup procedure for Postfix and exim</h3>
The base OS has moved to using scripts in /etc/rc.d to start all daemons.
The script for sendmail does not function fully for alternative MTAs (in
particular it will display "failed" at startup, although the daemon will
still be started, and "/etc/rc.d/sendmail reload" or "...stop" will not
work as expected).
If you were using Postfix or exim and starting it using the standard
method of setting sendmail_flags in rc.conf.local, you should set
sendmail_flags=NO and start the relevant daemon via pkg_scripts,
e.g.
<blockquote><pre><b>pkg_scripts="${pkg_scripts} postfix"
</b></pre></blockquote>

<p>
<a name="20110720">
<h3>2011/07/20 - [ports] Amavisd-new update</h3>
Amavisd-new has had a major update, needing some changes in sql schema.
See the notes on <a href="http://www.amavis.org/release-notes.txt">upgrading from 2.6 to 2.7</a>
on Amavisd-new's web site for more information about how to handle this.

<p>
<a name="20110804">
<h3>2011/08/04 - [ports] pecl-imagick needs pthread</h3>
ImageMagick has been updated to a version which now requires threads support.<p>
Due to the current userland threading mechanism in OpenBSD it is necessary
that programs calling libraries needing threads do themselves load the thread
library to ensure that i/o wrapper functions are used.<p>
This can be done by linking the programs with the -pthread compiler flag,
which is commonly done in ports, but can't always be done so sometimes
extra configuration is needed - common examples are Perl and httpd in the
base OS.<p>
The typical symptom is a failure of the program to start, with complaints
about missing pthread-related library functions.
In those cases you can run the program with LD_PRELOAD=libpthread.so set
in the environment which has the desired effect.
For pecl-imagick (notably required by Horde/IMP), the simplest way is to
create a login(1) class under /etc/login.conf(5) named after the
Apache rc.d(8) script, i.e. "httpd":
<blockquote><pre><b> httpd:\
	:setenv=LD_PRELOAD=/usr/lib/libpthread.so:\
	:tc=daemon:
</b></pre></blockquote>
and ensure that /etc/rc.d/httpd is used to start/restart the server
(N.B. log rotation scripts might need to be adjusted).

<!-- 5.0 -->

d141 1
a141 1
<small>$OpenBSD: current.html,v 1.295 2011/10/17 21:38:14 ratchov Exp $</small>
@


1.295
log
@mention that midicat was removed
@
text
@d61 1
a61 1
<li><a href="#20111017">2011/10/17 - [aucat] midicat hardlink removed</a>
d492 1
a492 1
<h3>2011/10/17 - [aucat] midicat hardlink removed</h3>
d519 1
a519 1
<small>$OpenBSD: current.html,v 1.294 2011/10/17 18:16:30 matthieu Exp $</small>
@


1.294
log
@Document xkeyboard-config upgrade. Thanks to shadchin@@ for figuring out
what is needed exactly.
@
text
@d61 1
d490 25
d519 1
a519 1
<small>$OpenBSD: current.html,v 1.293 2011/10/14 16:23:28 stsp Exp $</small>
@


1.293
log
@Use a better release-notes link in the Subversion 1.7 entry.
Pointed out by stephan@@.
@
text
@d60 1
d479 10
d493 1
a493 1
<small>$OpenBSD: current.html,v 1.292 2011/10/13 11:35:45 stsp Exp $</small>
@


1.292
log
@Add entry for the Subversion 1.7 upgrade in ports.
@
text
@d475 1
a475 1
See the <a href="http://subversion.apache.org/docs/release-notes/1.7.html"
d482 1
a482 1
<small>$OpenBSD: current.html,v 1.291 2011/09/23 09:57:46 pea Exp $</small>
@


1.291
log
@Add the PostgreSQL update

ok jasper@@
@
text
@d59 1
d470 8
d482 1
a482 1
<small>$OpenBSD: current.html,v 1.290 2011/09/23 00:18:46 nick Exp $</small>
@


1.290
log
@
#20110919 ONLY applies to landisk and alpha.
@
text
@d58 1
d463 6
d473 1
a473 1
<small>$OpenBSD: current.html,v 1.289 2011/09/19 19:40:19 naddy Exp $</small>
@


1.289
log
@build instructions for thread model posix for gcc 3; originally from kurt@@
@
text
@d57 1
a57 1
<li><a href="#20110919">2011/09/19 - thread model posix enabled for gcc 3</a>
d444 1
a444 1
<h3>2011/09/19 - thread model posix enabled for gcc 3</h3>
d447 1
d466 1
a466 1
<small>$OpenBSD: current.html,v 1.288 2011/08/18 19:13:19 sthen Exp $</small>
@


1.288
log
@- In the entry about pecl-imagick needing LD_PRELOAD=libpthread.so for
Apache, point out that log-rotation scripts may need adjusting.

- Add comment with a 5.0 marker.
@
text
@d57 1
d442 19
d465 1
a465 1
<small>$OpenBSD: current.html,v 1.287 2011/08/04 09:12:09 sthen Exp $</small>
@


1.287
log
@talk about programs needing LD_PRELOAD=libpthread.so with a particular
mention for ImageMagick and pecl-imagick (needed by imp/horde).

unbreak some strange html tags while there.
@
text
@d430 5
a434 2
follow the installation message:
<blockquote><pre><b>$ pkg_info pecl-imagick
d436 4
d445 1
a445 1
<small>$OpenBSD: current.html,v 1.286 2011/07/29 06:44:32 ajacoutot Exp $</small>
@


1.286
log
@Merge the php sections and fix the command to create the link to
/var/www/conf/modules/php.conf.

ok sthen@@
@
text
@d49 8
a56 7
<li><a href="#20110706">2011/07/06 - [ports] pstoraster moved to its own package<a/>
<li><a href="#20110707">2011/07/07 - rc.conf 'rc_scripts' variable renamed to 'pkg_scripts'<a/>
<li><a href="#20110708">2011/07/08 - OpenBSD/sparc switched to gcc4
<li><a href="#20110710">2011/07/10 - OpenBSD/armish and OpenBSD/zaurus switched to gcc4
<li><a href="#20110714">2011/07/14 - [ports] PHP: support for multiple versions.<a/>
<li><a href="#20110717">2011/07/17 - [ports] change in startup procedure for Postfix and exim<a/>
<li><a href="#20110720">2011/07/20 - [ports] Amavisd-new update<a/>
d414 20
d438 1
a438 1
<small>$OpenBSD: current.html,v 1.285 2011/07/28 07:16:41 sthen Exp $</small>
@


1.285
log
@Make it very clear that rulesets using "set require-order" won't be loaded
(yes I got bitten by this ;)
@
text
@d53 1
a53 1
<li><a href="#20110714">2011/07/14 - [ports] php.ini moved<a/>
a54 1
<li><a href="#20110719">2011/07/19 - [ports] php5.conf renamed to php-5.2.conf<a/>
a55 1
<li><a href="#20110724">2011/07/24 - [ports] php module changes</a>
d360 5
a364 1
<h3>2011/07/14 - [ports] php.ini moved</h3>
d370 20
a406 11
<a name="20110719">
<h3>2011/07/19 - [ports] php5.conf renamed to php-5.2.conf</h3>
Multiple PHP versions are now supported in packages.
If you are currently using PHP with the web server in base, you will
need to adjust your configuration:
<blockquote><pre><b>cd /var/www/conf/modules
rm php5.conf
ln -s ../php-5.2.conf
</b></pre></blockquote>

<p>
a412 13
<p>
<a name="20110724">
<h3>2011/07/24 - [ports] php module changes</h3>
The various PHP modules (for example gd, mysql, postgresql, xcache,
and various other modules which are part of PHP or from PECL) had their
configuration files in /var/www/conf/php5.sample; symbolic links for
active modules were placed in /var/www/conf/php5.
These have moved to /etc/php-5.2.sample and /etc/php-5.2 respectively.
You will need to check for existing links in /var/www/conf/php5 and
create equivalent links in /etc/php-5.2.
Note that mbstring is now part of the main php-5.2 package so an
existing mbstring.ini symbolic link can be ignored.

d417 1
a417 1
<small>$OpenBSD: current.html,v 1.284 2011/07/26 10:52:47 sthen Exp $</small>
@


1.284
log
@PHP module changes; /var/www/conf/php5 is now /etc/php-5.2, you will need
to re-create symlinks.
@
text
@d308 2
a309 2
<tt>set require-order</tt> option has been removed; remove it from any
ruleset which uses it.
d419 1
a419 1
<small>$OpenBSD: current.html,v 1.283 2011/07/20 16:23:16 giovanni Exp $</small>
@


1.283
log
@
talk about mail/amavisd-new upgrade
ok sthen@@
@
text
@d57 1
d402 13
d419 1
a419 1
<small>$OpenBSD: current.html,v 1.282 2011/07/19 11:10:05 sthen Exp $</small>
@


1.282
log
@php5.conf -> php-5.2.conf
@
text
@d56 1
d385 1
a385 1
<h3>2011/07/19 - [ports] [ports] php5.conf renamed to php-5.2.conf</h3>
d392 1
a392 1
<b></pre></blockquote>
d394 6
d405 1
a405 1
<small>$OpenBSD: current.html,v 1.281 2011/07/17 20:22:14 sthen Exp $</small>
@


1.281
log
@sendmail_flags is now restricted to sendmail, start alternative MTAs using
their own scripts instead.
@
text
@d55 1
d380 11
a393 1

d398 1
a398 1
<small>$OpenBSD: current.html,v 1.280 2011/07/14 15:39:33 sthen Exp $</small>
@


1.280
log
@php.ini moved.
@
text
@d54 1
d366 16
d387 1
a387 1
<small>$OpenBSD: current.html,v 1.279 2011/07/14 11:44:03 pirofti Exp $</small>
@


1.279
log
@Fix typo.
@
text
@d53 1
a307 1
</p>
a331 1
</p>
d356 8
d370 1
a370 1
<small>$OpenBSD: current.html,v 1.278 2011/07/11 12:00:50 ajacoutot Exp $</small>
@


1.278
log
@Ports: warn people about the pstoraster move from ghostscript to
gstoraster which could break CUPS printing.

discussed with kili@@
@
text
@d52 1
a52 1
<li><a href="#20110710">2011/07/10 - OpenBSD/armish amd OpenBSD/zaurus switched to gcc4
d350 1
a350 1
<h3>2011/07/10 - OpenBSD/armish amd OpenBSD/zaurus switched to gcc4</h3>
d363 1
a363 1
<small>$OpenBSD: current.html,v 1.277 2011/07/10 18:36:58 nick Exp $</small>
@


1.277
log
@
need new boot loader for sparc, or at least not the two year old one I had
on my system.
@
text
@d49 1
d310 9
d363 1
a363 1
<small>$OpenBSD: current.html,v 1.276 2011/07/10 18:29:34 nick Exp $</small>
@


1.276
log
@
sparc, armish, zaurus now use gcc4.  Just upgrade via snapshots, m'kay?
They'll be out soon, you won't be done doing it the hard way before they
are out.
@
text
@d334 5
d353 1
a353 1
<small>$OpenBSD: current.html,v 1.275 2011/07/08 07:40:16 ajacoutot Exp $</small>
@


1.275
log
@Mention the rc_scripts -> pkg_scripts renaming.
@
text
@d50 2
d324 20
d348 1
a348 1
<small>$OpenBSD: current.html,v 1.274 2011/07/04 07:37:23 sthen Exp $</small>
@


1.274
log
@byebye "set require-order", and linewrap previous entries.
@
text
@d49 1
d306 16
d326 1
a326 1
<small>$OpenBSD: current.html,v 1.273 2011/06/29 20:18:31 matthieu Exp $</small>
@


1.273
log
@Xenocara xserver autoconfiguration code.
@
text
@d46 3
a48 1
<li><a href="#20110602">2011/06/02 - [xenocara] switched to xkeyboard-config</a><li><a href="#20110629">2011/06/29 - [xenocara] new input driver configuration code</a>
d272 3
a274 1
If you have an <pre>/etc/X11/xorg.conf</pre> file that exists mainly to set keyboard type and nationality that file should be removed, otherwise you may find yourself without keyboard functionality in X.
d279 9
a287 3
A new autoconfiguration mechanism for input devices has been implemented in the X server. It provides even better support for various input devices: synaptics touchpads (not yet ready) or  touchscreens without a configuration file.
The <b>InputDevice</b> sections can be removed from <tt>xorg.conf</tt> in most cases.<br>
To override the autoconfiguration with an <b>InputDevice</b> section for an input device that would normally be auto-configured, the following needs to be added to <tt>/etc/X11/xorg.conf</tt>:
d294 11
d309 1
a309 1
<small>$OpenBSD: current.html,v 1.272 2011/06/07 10:18:11 pirofti Exp $</small>
@


1.272
log
@Fix upgrade guide link to point to 4.9.
@
text
@d46 1
a46 1
<li><a href="#20110602">2011/06/02 - [xenocara] switched to xkeyboard-config</a>
d270 14
d288 1
a288 1
<small>$OpenBSD: current.html,v 1.271 2011/06/04 15:47:23 matthieu Exp $</small>
@


1.271
log
@Mention xkeyboard-config and removal of /etc/X11/xkb
@
text
@d62 1
a62 1
versions, see the <a href="upgrade48.html">upgrade guide</a>.
d274 1
a274 1
<small>$OpenBSD: current.html,v 1.270 2011/06/02 13:03:11 sthen Exp $</small>
@


1.270
log
@talk about "config(8)" rather than just "config", it's clearer
@
text
@d46 1
d260 10
d274 1
a274 1
<small>$OpenBSD: current.html,v 1.269 2011/06/01 08:53:59 sthen Exp $</small>
@


1.269
log
@- add "-current config required" to the index
- tidy whitespace while there
@
text
@d45 1
a45 1
<li><a href="#20110531">2011/05/31 - -current config required to build kernel</a>
d239 3
a241 2
<h3>2011/05/31 - -current config required to build kernel</h3>
config needs to be built and installed to avoid "excess elements in
d263 1
a263 1
<small>$OpenBSD: current.html,v 1.268 2011/06/01 04:59:24 matthew Exp $</small>
@


1.268
log
@Add an entry about requiring a -current config(8) to build the kernel.
@
text
@d16 1
a16 1
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
d45 1
d80 1
a80 4
<blockquote>
<pre>
<b>
cd /usr/src/usr.bin/mklocale
d85 1
a85 3
</b>
</pre>
</blockquote>
d106 11
a116 11
rm -r /usr/obj/gnu/egcs/gcc/* 
cd /usr/src/gnu/egcs/gcc         
make -f Makefile.bsd-wrapper clean       
make -f Makefile.bsd-wrapper obj         
make -f Makefile.bsd-wrapper depend      
make -f Makefile.bsd-wrapper     
make -f Makefile.bsd-wrapper install     
make -f Makefile.bsd-wrapper clean       
make -f Makefile.bsd-wrapper depend      
make -f Makefile.bsd-wrapper     
make -f Makefile.bsd-wrapper install     
d242 1
a242 4
<blockquote>
<pre>
<b>
cd /usr/src/usr.sbin/config
d247 1
a247 3
</b>
</pre>
</blockquote>
d250 1
a250 4
<blockquote>
<pre>
<b>
cd /usr/src/sys/arch/${ARCH}/conf
d252 1
a252 3
</b>
</pre>
</blockquote>
d254 1
a254 4
<blockquote>
<pre>
<b>
cd /usr/src/sys/arch/${ARCH}/compile/${CONFIG}
d256 1
a256 3
</b>
</pre>
</blockquote>
d262 1
a262 1
<small>$OpenBSD: current.html,v 1.267 2011/05/28 19:50:45 sthen Exp $</small>
@


1.267
log
@talk about the Dovecot upgrade and switch to subpackages.
@
text
@d241 36
d281 1
a281 1
<small>$OpenBSD: current.html,v 1.266 2011/05/26 07:06:42 ratchov Exp $</small>
@


1.266
log
@remind audio and MIDI device naming scheme changed.
suggested by Christopher Zimmermann and pirofti@@
@
text
@d44 1
d225 16
d245 1
a245 1
<small>$OpenBSD: current.html,v 1.265 2011/05/20 22:56:09 sthen Exp $</small>
@


1.265
log
@talk about 'set skip', bump copyright year while there.
@
text
@d43 1
d207 17
d228 1
a228 1
<small>$OpenBSD: current.html,v 1.264 2011/05/10 02:34:57 nick Exp $</small>
@


1.264
log
@
opera-flashplugin has been removed, this will require some updates for 5.0.
From Nicolas P. M. Legrand, thanks!
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2005-2010 by OpenBSD">
d42 1
d185 21
d210 1
a210 1
<small>$OpenBSD: current.html,v 1.263 2011/05/05 12:30:08 sthen Exp $</small>
@


1.263
log
@tftp-proxy
@
text
@d39 1
d148 6
d188 1
a188 1
<small>$OpenBSD: current.html,v 1.262 2011/05/01 13:04:13 nick Exp $</small>
@


1.262
log
@
remove 4.8 stuff for 4.9
@
text
@d40 1
d163 14
d181 1
a181 1
<small>$OpenBSD: current.html,v 1.261 2011/04/28 10:14:41 sthen Exp $</small>
@


1.261
log
@- tidy previous
- ftp-proxy now uses divert-to rules instead of rdr-to
@
text
@a32 10
<li><a href="#20100923">2010/09/23 - [ports] ruby split into 1.8/1.9</a>
<li><a href="#20100923">2010/09/24 - gcc4 for mips64 and mips64el</a>
<li><a href="#20101019">2010/10/19 - groff moved to ports</a>
<li><a href="#20101023">2010/10/23 - vgrind(1) moved to ports</a>
<li><a href="#20101031">2010/10/31 - wpa configuration changes</a>
<li><a href="#20101108">2010/11/08 - [ports] PostgreSQL update</a>
<li><a href="#20101111">2010/11/11 - Xenocara updates</a>
<li><a href="#20101208">2010/12/08 - [ports] Ruby on Rails update</a>
<li><a href="#20110107">2011/01/07 - [ports] OpenLDAP update</a>
<li><a href="#20110126">2011/01/26 - [ports] Asterisk update</a>
d49 1
a49 1
It contains information about changes from 4.8-release to <i>-current</i>,
d54 1
a54 1
If you wish to update to 4.8-release or 4.8-stable from previous
a69 220
<a name="20100923"></a>
<h3>2010/09/23 - [ports] ruby split into 1.8/1.9</h3>

The ruby port was split into two separate ports for ruby 1.8 and
ruby 1.9, similar to how the python port is handled.
The ruby 1.8 binaries are now installed with a 18 suffix, and
the ruby 1.9 binaries are installed with a 19 suffix.
The ruby-gems and ruby-rake packages also install the binaries with
a 18 suffix, as those packages are included in ruby 1.9.
If you want to make ruby 1.8 (or 1.9) the default system ruby, you
need to follow the instructions that are displayed after
installing/updating the package.

<a name="20100924"></a>
<h3>2010/09/24 - gcc4 for mips64 and mips64el</h3>

The various mips64 architectures (loongson, sgi) have moved to gcc4.
/usr/libexec/ld.so has a bug that is exposed by gcc4, so make sure
it's up-to-date (rebuild it after updating the sources):
<blockquote><pre>
<b>cd /usr/src/libexec/ld.so
make clean
make depend && make && make install
</b></pre></blockquote>

Updated makefiles, gcc, cpp and libstdc++ must be installed with these four
steps.
<p>
Firstly, gcc4 must be compiled with the existing compiler:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/share/mk && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Secondly, gcc4 must be rebuilt with itself:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/usr.bin/cpp
make obj && make && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Thirdly, libstdc++-v3 must be installed after removing the old C++ headers:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
cd /usr/src/gnu/lib/libstdc++-v3
make obj && make includes && make depend && make && make install
</b></pre></blockquote>
And lastly the entire system rebuilt with the usual procedure documented in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
For people updating using snapshots, don't forget to:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
</b></pre></blockquote>
before installing newer snapshot.


<a name="20101019"></a>
<h3>2010/10/19 - groff moved to ports</h3>

The groff(1) document formatting system (notably used to render
manual pages) has been replaced in base with <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=mandoc&sektion=1">mandoc(1)</a>.
First update /etc/man.conf (sysmerge recommended if you have modified it;
otherwise install a new file from etc48.tgz or updated /usr/src/etc)
which switches to using mandoc(1) to render installed unformatted
manpages.
Then remove old groff files:
<blockquote><pre>
<b>cd /usr/bin
rm addftinfo afmtodit eqn grodvi groff grog grohtml grolj4 grops grotty \
hpftodit indxbib lkbib lookbib neqn nroff pfbtops pic psbb refer soelim \
tbl tfmtodit troff
cd /usr/share
rm -r dict/eign groff_font tmac doc/psd doc/smm doc/usd groff
cd /usr/share/man/cat1
rm addftinfo.0 afmtodit.0 eqn.0 grodvi.0 groff.0 grog.0 grohtml.0 grolj4.0 \
grops.0 grotty.0 hpftodit.0 indxbib.0 lkbib.0 lookbib.0 neqn.0 nroff.0 \
pfbtops.0 pic.0 psbb.0 refer.0 soelim.0 tbl.0 tfmtodit.0 troff.0
cd ../cat5
rm groff_font.0 groff_out.0
cd ../cat7
rm groff_char.0 groff_me.0 groff_mm.0 groff_mmse.0 groff_ms.0 groff_msafer.0 \
me.0 mm.0 ms.0</b></blockquote></pre>
If you require groff reinstall it from /usr/ports/textproc/groff or
install the groff package.

<a name="20101023"></a>
<h3>2010/10/23 - vgrind(1) moved to ports</h3>

The vgrind(1) source file formatter has moved to ports after the
<a href="#20101019">groff removal</a> from the base system.
You should remove the old vgrind files:
<blockquote>
<pre>
<b>
cd /usr/bin/
rm vgrind
cd /usr/share/man/cat1
rm vgrind.0
cd /usr/share/man/cat5
rm vgrindefs.0
cd /usr/share/
rm misc/vgrindefs  misc/vgrindefs.db
</b>
</pre>
</blockquote>
You can install vgrind from /usr/ports/textproc/vgrind or
<tt>pkg_add vgrind</tt>.

<a name="20101029"></a>
<h3>2010/10/29 - colcrt removal</h3>

The colcrt(1) utility has been removed as it is only useful
on very old (glass) terminals.
You should remove the old colcrt files:
<blockquote>
<pre>
<b>
rm /usr/bin/colcrt /usr/share/man/cat1/colcrt.0
</b>
</pre>
</blockquote>

<a name="20101029"></a>
<h3>2010/10/29 - checknr removal</h3>

The checknr(1) utility has been removed after the
<a href="#20101019">groff removal</a> from the base system.
Man pages can now be checked for common errors by running
<tt>mandoc -Tlint</tt>.
You should remove the old checknr files:
<blockquote>
<pre>
<b>
rm /usr/bin/checknr /usr/share/man/cat1/checknr.0
</b>
</pre>
</blockquote>

<a name="20101029"></a>
<h3>2010/10/29 - soelim removal</h3>

The soelim(1) utility has been removed after the
<a href="#20101019">groff removal</a> from the base system.
The groff package includes its own copy of soelim(1).
You should remove the old soelim files:
<blockquote>
<pre>
<b>
rm /usr/bin/soelim /usr/share/man/cat1/soelim.0
</b>
</pre>
</blockquote>

<a name="20101031"></a>
<h3>2010/10/31 - wpa configuration changes</h3>

wpa-psk(8) was deleted because wpakey support is now built directly
into ifconfig(8).  Inspect your /etc/hostname.* files for wireless
devices using WPA and replace:
<blockquote><pre><b>
nwid myssid wpapsk `wpa-psk myssid wpapassword`
</b></pre></blockquote>
with the simpler form:
<blockquote><pre><b>
nwid myssid wpakey wpapassword
</b></pre></blockquote>

<a name="20101108"></a>
<h3>2010/11/08 - [ports] PostgreSQL update</h3>
PostgreSQL has been updated to 9.0.1. It's a major upgrade and you need 
to dump/restore your databases.
You can look at this small <a href="http://openbsd.raveland.org/ports/postgresql/UPGRADE_HOWTO.txt">
howto</a> if you want more details about this.
Note that pkg_add will warn you about this upgrade.

<a name="20101111"></a>
<h3>2010/11/11 - Xenocara updates</h3>
libXft and libXext have been updated. You should remove those obsoleted files:
<blockquote><pre><b>
rm /usr/X11R6/bin/xft-config  /usr/X11R6/man/man1/xft-config.1 \
   /usr/X11R6/include/X11/extensions/lbxbuf.h \
   /usr/X11R6/include/X11/extensions/lbxbufstr.h \
   /usr/X11R6/include/X11/extensions/lbximage.h
</b></pre></blockquote>

<a name="20101208"></a>
<h3>2010/12/08 - [ports] Ruby on Rails update</h3>
Ruby on Rails has been updated to 3.0.3. It's a major upgrade and you need 
to make significant changes to your Rails app to update it from the previous
version (2.3.4). The
<a href="http://edgeguides.rubyonrails.org/3_0_release_notes.html">
Rails 3 Release Notes</a> have a lot of helpful information
about the upgrade process.


<a name="20110107"></a>
<h3>2011/01/07 - [ports] OpenLDAP update</h3>
OpenLDAP has been updated to 2.4.23. It's a major upgrade and you need 
to backup all your data before this upgrade. Please read this 
<a href="http://marc.info/?l=openbsd-ports&m=129440451210138&w=2"> message</a> 
for more details.


<a name="20110126"></a>
<h3>2011/01/26 - [ports] Asterisk update</h3>
Asterisk has had a major update to the 1.8 branch.
Although many configurations will not require changes,
users should review the <a
href="http://svn.asterisk.org/svn/asterisk/tags/1.8.2.2/UPGRADE.txt">upgrade
notes</a>.
Memory use has increased; if this causes a problem and you
do not require IAX2, adding 'noload=chan_iax2.so' to
/etc/asterisk/modules.conf will significantly reduce memory use.


d166 1
a166 1
<small>$OpenBSD: current.html,v 1.260 2011/04/22 05:37:23 sebastia Exp $</small>
@


1.260
log
@Point out the need for new configuration default for www/sogo.
@
text
@d48 2
a49 1
<li><a href="#20110422">2011/04/22 - [ports]SOGo update</a>
d370 21
a390 3
SOGo has been updated to 1.3.6. The new session handling requires a new configuration
default named OCSSessionsFolderURL. For more information consulte the package README file
or the general SOGo Installation Guide installed with the package.
d396 1
a396 1
<small>$OpenBSD: current.html,v 1.259 2011/04/21 00:59:46 matthew Exp $</small>
@


1.259
log
@Typo.
@
text
@d48 1
d367 6
d377 1
a377 1
<small>$OpenBSD: current.html,v 1.258 2011/04/19 22:04:01 schwarze Exp $</small>
@


1.258
log
@minor addition: delete /etc/security from /etc/changelist as well;
noticed by Mattieu Baptiste <mattieu dot b at gmail dot com>.
@
text
@d362 1
a362 1
has been renamed to vnd. It is also no longer possible to swap too vnds. Users
d370 1
a370 1
<small>$OpenBSD: current.html,v 1.257 2011/04/18 19:21:18 thib Exp $</small>
@


1.257
log
@blurb about the vnd churn
@
text
@d356 2
d370 1
a370 1
<small>$OpenBSD: current.html,v 1.256 2011/04/18 11:14:31 nick Exp $</small>
@


1.256
log
@
s/exists/exits/   from Amit Kulkarni
s/quickly/quietly/  from jmc@@ (who also spotted "exists")
@
text
@d47 1
d357 7
d368 1
a368 1
<small>$OpenBSD: current.html,v 1.255 2011/04/17 22:06:39 schwarze Exp $</small>
@


1.255
log
@Bye bye /etc/security, and don't forget to update /etc/daily.
@
text
@d323 1
a323 1
so the "make depend" target now quickly exists, doing nothing.
d360 1
a360 1
<small>$OpenBSD: current.html,v 1.254 2011/04/17 15:37:59 nick Exp $</small>
@


1.254
log
@
guenther@@'s "make depend" change needs to be documented here for two
reasons: 1) gcc2 users need to get a snapshot or rebuild their gcc,
2) I need to remember to rework a lot of documentation for 5.0
@
text
@d46 1
d347 8
d360 1
a360 1
<small>$OpenBSD: current.html,v 1.253 2011/03/19 17:51:24 schwarze Exp $</small>
@


1.253
log
@Groff and pkg_create must be upgraded together.
@
text
@d45 1
d319 28
d351 1
a351 1
<small>$OpenBSD: current.html,v 1.252 2011/03/13 16:05:12 stsp Exp $</small>
@


1.252
log
@Mention that -current mklocale is required for a clean build.
@
text
@d44 1
d311 7
d322 1
a322 1
<small>$OpenBSD: current.html,v 1.251 2011/01/26 11:26:22 sthen Exp $</small>
@


1.251
log
@- add some missing [ports] markers

- add details about Asterisk 1.8, including a suggestion from fgsch@@ with
a way to reduce memory use (IAX2 uses significantly more memory than previous
versions; expected to be fixed later, see asterisk bug 18194).

ok fgsch@@
@
text
@d43 1
d294 16
d314 1
a314 1
<small>$OpenBSD: current.html,v 1.250 2011/01/10 13:09:06 pea Exp $</small>
@


1.250
log
@Add the OpenLDAP upgrade.
ok jasper@@
@
text
@d38 1
a38 1
<li><a href="#20101108">2010/11/08 - PostgreSQL update</a>
d41 2
a42 1
<li><a href="#20110107">2011/01/07 - OpenLDAP update</a>
d246 1
a246 1
<h3>2010/11/08 - PostgreSQL update</h3>
d264 1
a264 1
<h3>2010/12/08 - Ruby on Rails update</h3>
d274 1
a274 1
<h3>2011/01/07 - OpenLDAP update</h3>
d281 12
d297 1
a297 1
<small>$OpenBSD: current.html,v 1.249 2010/12/09 00:04:26 jeremy Exp $</small>
@


1.249
log
@Add note about www/ruby-rails port upgrade

ok sthen
@
text
@d41 1
d272 8
d284 1
a284 1
<small>$OpenBSD: current.html,v 1.248 2010/11/11 15:07:55 matthieu Exp $</small>
@


1.248
log
@Note obsoleted files to be removed after recent libXft and libXext
updates.
@
text
@d40 1
d261 9
d275 1
a275 1
<small>$OpenBSD: current.html,v 1.247 2010/11/08 14:42:28 pea Exp $</small>
@


1.247
log
@Mention the PostgreSQL update.

ok jasper@@
@
text
@d39 1
d250 11
d265 1
a265 1
<small>$OpenBSD: current.html,v 1.246 2010/11/04 08:38:59 sthen Exp $</small>
@


1.246
log
@upgrade46.html->upgrade48.html
@
text
@d38 1
d241 8
d253 1
a253 1
<small>$OpenBSD: current.html,v 1.245 2010/11/03 19:57:57 pirofti Exp $</small>
@


1.245
log
@4.8
@
text
@d53 1
a53 1
versions, see the <a href="upgrade46.html">upgrade guide</a>.
d244 1
a244 1
<small>$OpenBSD: current.html,v 1.244 2010/11/02 15:29:28 millert Exp $</small>
@


1.244
log
@mention colcrt, soelim and checknr removal
@
text
@d47 2
a48 2
It contains information about changes from 4.7-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.6 or earlier, or people
d52 1
a52 1
If you wish to update to 4.6-release or 4.6-stable from previous
d244 1
a244 1
<small>$OpenBSD: current.html,v 1.243 2010/11/01 20:44:30 matthieu Exp $</small>
@


1.243
log
@add latest to index.
@
text
@d181 45
d244 1
a244 1
<small>$OpenBSD: current.html,v 1.242 2010/11/01 16:39:03 deraadt Exp $</small>
@


1.242
log
@clarify
@
text
@d37 1
d199 1
a199 1
<small>$OpenBSD: current.html,v 1.241 2010/11/01 16:00:45 deraadt Exp $</small>
@


1.241
log
@document wpa changes
@
text
@d187 1
a187 1
wpapsk `wpa-psk wpapassword`
d191 1
a191 1
wpakey wpapassword
d198 1
a198 1
<small>$OpenBSD: current.html,v 1.240 2010/11/01 15:54:04 nick Exp $</small>
@


1.240
log
@
upgrade-old.html was just for historic curiosity.  If you are curious,
look in cvs.  People keep trying to use this, so remove.  "remove the
lies" deraadt@@
@
text
@d180 14
d198 1
a198 1
<small>$OpenBSD: current.html,v 1.239 2010/11/01 09:57:46 nick Exp $</small>
@


1.239
log
@
remove 4.7->4.8 stuff (already in upgrade-old.html)
@
text
@a66 6
<p>
If you wish to see upgrade information for earlier versions of OpenBSD,
see <a href= "upgrade-old.html">upgrade-old.html</a>.
This is provided as a historical record -- it should NOT be used as
an upgrade procedure guide.

d184 1
a184 1
<small>$OpenBSD: current.html,v 1.238 2010/10/29 00:27:01 nick Exp $</small>
@


1.238
log
@
the amd64/i386 instructions will be going away soon, so dup 'em here.
@
text
@a32 18
<li><a href="#20100323">2010/03/23 - [ports] Major Dovecot upgrade</a>
<li><a href="#20100326">2010/03/26 - softraid(4) metadata changes</a>
<li><a href="#20100403">2010/04/03 - mandoc(1) required now</a>
<li><a href="#20100417">2010/04/17 - ahci(4) no longer attaches to RAID-mode disks</a>
<li><a href="#20100421">2010/04/21 - removal of libevent evdns.h</a>
<li><a href="#20100424">2010/04/24 - new user and group for aucat and midicat</a>
<li><a href="#20100426">2010/04/26 - [ports] samba default user db backend changed</a>
<li><a href="#20100509">2010/05/09 - system Makefile changes</a>
<li><a href="#20100510">2010/05/10 - Intel X driver changes</a>
<li><a href="#20100515">2010/05/15 - X.Org libs updates and removal</a>
<li><a href="#20100525">2010/05/25 - new config(8) for kernel builds</a>
<li><a href="#20100526">2010/05/26 - gcc4 for amd64 and sparc64</a>
<li><a href="#20100526a">2010/05/26 - f77 moved to ports</a>
<li><a href="#20100607">2010/06/07 - new users/groups for iked, ldapd</a>
<li><a href="#20100627">2010/06/27 - bgpd options moved to config</a>
<li><a href="#20100705">2010/07/05 - aucat options order changes</a>
<li><a href="#20100708">2010/07/08 - gcc4 for hppa, i386 and powerpc</a>
<li><a href="#20100809">2010/08/09 - [ports] Firefox 3.0 -&gt; 3.6</a>
a72 228
<a name="20100323"></a>
<h3>2010/03/23 - [Ports] Major Dovecot upgrade</h3>
Dovecot has been updated from 1.1.20 to 1.2.11. The configuration file changed 
and the old cmusieve plugin has been removed in favor of the new Dovecot sieve 
implementation. The 
<a href="http://permalink.gmane.org/gmane.os.openbsd.ports.cvs/42080">commit 
log entry</a> has more details.

<p>
<a name="20100326"></a>

<h3>2010/03/26 - softraid(4) metadata changes</h3>
<del>
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4">softraid(4)</a>
metadata format has changed and is not compatible with previous versions.
As a result, any softraid volumes created with older kernels will not assemble.
Data on existing volumes should be backed up before upgrading.
The volume should then be recreated and the data restored.
</del>
<p>
This is no longer relevant because a transparent metadata upgrade is performed
automatically when moving to current.  In the future certain softraid features
might not be enabled because of this however this will be documented.

<a name="20100403"></a>
<h3>2010/04/03 - mandoc(1) required now</h3>
mandoc(1) has been added to the build tree, and is now required for
building the system.  If you do not have it, either install a snapshot
or:
<blockquote><pre>
<b>cd /usr/src/usr.bin/mandoc
make obj
NOMAN= make &amp;&amp; NOMAN= make install</b>
</pre></blockquote>

<a name="20100417"></a>
<h3>2010/04/17 - ahci(4) no longer attaches to RAID-mode disks</h3>
To avoid risk of corrupting metadata on certain Intel RAID devices,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&sektion=4">ahci(4)</a>
no longer attaches to the PCI device IDs used by these controllers
when set to RAID mode.
If you lose access to your disks, you'll need to change the
controller type from RAID to AHCI in the BIOS to get them back.

<a name="20100421"></a>
<h3>2010/04/21 - removal of libevent evdns.h</h3>
As part of updating libevent from 1.3 to 1.4, the asynchronous DNS
component was removed. You should delete the headers manually:
<blockquote><pre>
<b>rm /usr/include/evdns.h
rm /usr/libdata/perl5/site_perl/*-openbsd/evdns.ph</b>
</pre></blockquote>

<a name="20100424"></a>
<h3>2010/04/24 - new user and group for aucat(1) and midicat(1)</h3>
The following needs to be run:
<blockquote><pre>
<b>useradd -u 99 -g =uid -c "sndio privsep" -d /var/empty -s /sbin/nologin _sndio</b>
</pre></blockquote>

<a name="20100426"></a>
<h3>2010/04/26 - [ports] samba default user db backend changed</h3>
The default user database backend for the Samba port has changed.
If you currently use smbpasswd, you must either adjust your configuration,
or convert your database. See <a href="http://www.openbsd.org/cgi-bin/cvsweb/ports/net/samba/files/README.OpenBSD?rev=1.12">README.OpenBSD</a>
for more information.

<a name="20100509"></a>
<h3>2010/05/09 - system Makefile changes</h3>
Makefiles now assume the COMPILER_VERSION variable is set.
The following needs to be run before building userland:
<blockquote><pre>
<b>cd /usr/src/share/mk
make install</b>
</pre></blockquote>

<a name="20100510"></a>
<h3>2010/05/10 - Intel X driver changes</h3>

The new Intel X driver now requires a GEM kernel. if X is
out of date the following config fragment is necessary in
the driver section of xorg.conf:
<blockquote><pre>
Option "AccelMethod" "UXA"
</pre></blockquote>
Preferable is to update X at the same time as updating the
kernel.

<a name="20100515"></a>
<h3>2010/05/15 - X.Org libs updates and removal</h3>

Several X libraries have been deprecated recenlty (Xp, Xtrap, Xevie, 
lbxutil) and an other has undergone a major clean-up (Xext).
As a result, several old headers and autotools configuration files have
been removed.
You should remove them manually from your system to
prevent them from interfering with your ports (or other software) builds.
<blockquote><pre>
<b>cd /usr/X11R6/include/X11
rm Xaw/Print.h Xaw/PrintSP.h
rm -r XprintAppUtil XprintUtil
cd extensions
rm Print.h Printstr.h XEVIstr.h Xagstr.h Xcupstr.h Xdbeproto.h Xevie.h \
   Xeviestr.h dpmsstr.h lbxdeltastr.h lbxopts.h lbxstr.h lbxzlib.h \
   mitmiscstr.h multibufst.h securstr.h shapestr.h shmstr.h syncstr.h \
   xteststr.h xtrapbits.h xtrapddmi.h xtrapdi.h xtrapemacros.h \
   xtraplib.h xtraplibp.h xtrapproto.h
cd /usr/X11R6/lib/pkgconfig
rm evieproto.pc lbxutil.pc printproto.pc trapproto.pc xaw8.pc \
   xevie.pc xp.pc xprintapputil.pc xprintutil.pc xtrap.pc
rm /usr/X11R6/share/aclocal/xaw.m4</b>
</pre></blockquote>

<a name="20100525"></a>
<h3>2010/05/25 - Need new config(8) for kernel builds</h3>

A new version of config(8) is needed to build kernels.
Rebuild it using
<blockquote><pre>
<b>cd /usr/src/usr.sbin/config
make obj && make depend && make && make install</b>
</pre></blockquote>

<a name="20100526"></a>
<h3>2010/05/26 - gcc4 for amd64 and sparc64</h3>

amd64 and sparc64 have changed from gcc3 to gcc4.
Updated makefiles, gcc, cpp and libstdc++ must be installed with these four
steps.
<p>
Firstly, gcc4 must be compiled with the existing compiler:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/share/mk && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Secondly, gcc4 must be rebuilt with itself:
<blockquote><pre>
<b>rm -rf /usr/obj/*
cd /usr/src/usr.bin/cpp
make obj && make && make install
cd /usr/src/gnu/usr.bin/cc
make obj && make depend && make && make install
</b></pre></blockquote>
Thirdly, libstdc++-v3 must be installed after removing the old C++ headers:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
cd /usr/src/gnu/lib/libstdc++-v3
make obj && make includes && make depend && make && make install
</b></pre></blockquote>
And lastly the entire system rebuilt with the usual procedure documented in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&sektion=8">release(8)</a>.

<p>
For people updating using snapshots, don't forget to:
<blockquote><pre>
<b>rm -rf /usr/include/g++/*
</b></pre></blockquote>
before installing newer snapshot.

<a name="20100526a"></a>
<h3>2010/05/26 - f77 moved to ports</h3>
The Fortran compiler has moved from the base OS to ports.
Remove the following files after updating:
<blockquote><pre><b>rm -f /usr/bin/f77 /usr/bin/g77 /usr/include/f2c.h /usr/include/g2c.h \
   /usr/lib/gcc-lib/*-unknown-openbsd*/3.3.5/f771 /usr/lib/libfrtbegin.a \
   /usr/lib/libfrtbegin_p.a /usr/lib/libfrtbegin_pic.a /usr/lib/libg2c.a \
   /usr/lib/libg2c_p.a /usr/lib/libg2c_pic.a /usr/share/info/g77.info \
   /usr/share/man/cat1/f77.0 /usr/share/man/cat1/g77.0
</b></pre></blockquote>

<a name="20100607"></a>
<h3>2010/06/07 - new users and groups for ldapd(8) and iked(8)</h3>
Newly added daemons
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldapd&sektion=8">ldapd(8)</a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iked&sektion=8">iked(8)</a>
require the following users/groups to be created:
<blockquote><pre>
<b>useradd -u 100 -g =uid -c "LDAP Daemon" -d /var/empty -s /sbin/nologin _ldapd
useradd -u 101 -g =uid -c "IKEv2 Daemon" -d /var/empty -s /sbin/nologin _iked
</b></pre></blockquote>

<a name="20100627"></a>
<h3>2010/06/27 - bgpd(8) options moved to config</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd&sektion=8">bgpd(8)</a>
command-line options -s and -r to set the paths of the control socket
and the restricted control socket have been replaced with settings in the
configuration file.<p>
Replace <tt>-s /path/to/bgpd.sock</tt> with <tt>socket "/path/to/bgpd.sock"</tt> in bgpd.conf<br>
Replace <tt>-r /path/to/bgpd.rsock</tt> with <tt>socket "/path/to/bgpd.rsock" restricted</tt> in bgpd.conf<p>
If the -s/-r options are used on the command-line or in rc.conf.local,
bgpd will not start up.

<a name="20100705"></a>
<h3>2010/07/05 - aucat options order changes</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aucat&sektion=1">aucat(1)</a>
command line options ordering has become more strict in order to support
multiple devices.
Per-stream parameters (-Ccehjmrtvx) must precede stream definitions (-ios)
and per-device parameters (-abz) and stream definitions (-ios) must precede
device definitions (-f).<p>

<a name="20100708"></a>
<h3>2010/07/08 - gcc4 for hppa, i386 and powerpc</h3>

hppa, i386 and the various powerpc architectures (macppc, mvmeppc,
socppc) have moved to gcc4.
Please refer to the
<a href="#20100526">amd64 and sparc64 instructions</a>
for the procedure.

<a name="20100809"></a>
<h3>2010/08/09 - [ports] Firefox 3.0 -&gt; 3.6</h3>

In this OpenBSD release, the main mozilla-firefox package was updated
from 3.0 to 3.6.
Although most people will have no problem with the update, some have
seen problems with Firefox not functioning correctly.
In this case it may be necessary to create a new profile:
see /usr/local/mozilla-firefox/README.OpenBSD for more details.
Also note that the Java plugins do not yet support Firefox 3.6;
in this case you should instead use the 3.5 package:
<tt>pkg_add firefox35</tt>.
Both versions of Firefox may be installed in parallel.

d190 1
a190 1
<small>$OpenBSD: current.html,v 1.237 2010/10/24 10:33:49 jasper Exp $</small>
@


1.237
log
@- tmac.vgrind already got removed along with groff
@
text
@d344 34
a377 3
Please refer to the
<a href="#20100526">amd64 and sparc64 instructions</a>
for the rest of the procedure.
d436 1
a436 1
<small>$OpenBSD: current.html,v 1.236 2010/10/23 21:46:02 jasper Exp $</small>
@


1.236
log
@- vgrind moved to ports
@
text
@d394 1
a394 1
rm tmac/tmac.vgrind misc/vgrindefs  misc/vgrindefs.db
d405 1
a405 1
<small>$OpenBSD: current.html,v 1.235 2010/10/20 21:06:47 sthen Exp $</small>
@


1.235
log
@groff removal; help from naddy@@
@
text
@d54 1
d378 23
d405 1
a405 1
<small>$OpenBSD: current.html,v 1.234 2010/10/16 06:56:27 matthieu Exp $</small>
@


1.234
log
@add gcc4 for mips
@
text
@d53 1
d347 30
d381 1
a381 1
<small>$OpenBSD: current.html,v 1.233 2010/09/24 01:24:54 jeremy Exp $</small>
@


1.233
log
@Add a note to current.html about the ruby port being split into separate
ports for 1.8 and 1.9.

OK nick@@
@
text
@d52 1
d55 1
a55 1
    
d330 16
d350 1
a350 1
<small>$OpenBSD: current.html,v 1.232 2010/08/09 15:02:59 sthen Exp $</small>
@


1.232
log
@Mention possible problem with Firefox profile dirs, and also 3.5 and Java.
ok nick@@ with a few tweaks.
@
text
@d51 1
d316 13
d333 1
a333 1
<small>$OpenBSD: current.html,v 1.231 2010/07/13 01:18:27 sthen Exp $</small>
@


1.231
log
@Users must still rm -rf /usr/include/g++/* if moving over the gcc4 bump
via snapshots; refer everyone, not just people building from source, back
to amd64/sparc64 instructions. Pointed out by chris@@.
@
text
@d50 1
d301 14
d319 1
a319 1
<small>$OpenBSD: current.html,v 1.230 2010/07/12 23:46:18 sthen Exp $</small>
@


1.230
log
@Be a bit clearer about bgpd -s/-r; if you have these in the
command line (probably via rc.conf.local), bgpd will not start.
@
text
@d296 1
a296 2
If you are building from source rather than installing a snapshot,
please refer to the
d304 1
a304 1
<small>$OpenBSD: current.html,v 1.229 2010/07/08 23:01:09 marco Exp $</small>
@


1.229
log
@Document softraid metadata update and strikethrough old text.
@
text
@d277 4
a280 2
Replace <tt>-s /path/to/bgpd.sock</tt> with <tt>socket "/path/to/bgpd.sock" in bgpd.conf</tt><br>
Replace <tt>-r /path/to/bgpd.rsock</tt> with <tt>socket "/path/to/bgpd.rsock" restricted in bgpd.conf</tt>
d305 1
a305 1
<small>$OpenBSD: current.html,v 1.228 2010/07/08 21:43:31 sthen Exp $</small>
@


1.228
log
@i386, hppa and powerpc moved to gcc4.
@
text
@d96 1
d98 1
d105 5
d303 1
a303 1
<small>$OpenBSD: current.html,v 1.227 2010/07/06 19:55:57 ratchov Exp $</small>
@


1.227
log
@explain that command line options ordering has become more strict
in order to support multiple devices.

from jakemsr
@
text
@d49 1
d281 11
d296 1
a296 1
<small>$OpenBSD: current.html,v 1.226 2010/06/27 20:00:41 claudio Exp $</small>
@


1.226
log
@Mention the bgpd change that I just commited.
All this work was done by sthen@@, I just commit it since he is not around.
@
text
@d48 1
d272 8
a279 1

d284 1
a284 1
<small>$OpenBSD: current.html,v 1.225 2010/06/07 11:25:47 sthen Exp $</small>
@


1.225
log
@new uid/gid for ldapd, iked
@
text
@d47 1
d262 9
d276 1
a276 1
<small>$OpenBSD: current.html,v 1.224 2010/06/05 16:56:00 landry Exp $</small>
@


1.224
log
@Remember people using snapshots that they still need to rm -Rf
/usr/include/g++/* before installing newer snaps.
@
text
@d46 1
d237 1
d249 12
d266 1
a266 1
<small>$OpenBSD: current.html,v 1.223 2010/05/30 21:40:35 robert Exp $</small>
@


1.223
log
@Remove all files from /usr/include/g++ before installing libstdc++-v3 because
some old files will make some ports fail to build.
@
text
@d230 6
d252 1
a252 1
<small>$OpenBSD: current.html,v 1.222 2010/05/28 01:21:56 sthen Exp $</small>
@


1.222
log
@pastable instructions are better here. ok nick@@
@
text
@d221 1
a221 1
Thirdly, libstdc++-v3 must be installed:
d223 2
a224 1
<b>cd /usr/src/gnu/lib/libstdc++-v3
d246 1
a246 1
<small>$OpenBSD: current.html,v 1.221 2010/05/27 14:11:42 deraadt Exp $</small>
@


1.221
log
@for the f77 delete: it is ok to delete f77, but a bad idea to delete the
'shared object' type things which existing packages might use.
@
text
@d123 5
a127 2
component was removed. You should delete the /usr/include/evdns.h
and /usr/libdata/perl5/site_perl/*-openbsd/evdns.ph header files manually.
d245 1
a245 1
<small>$OpenBSD: current.html,v 1.220 2010/05/27 10:21:54 sthen Exp $</small>
@


1.220
log
@use rm -f, suggested by thib
@
text
@d204 2
a205 2
<blockquote><pre><b>
rm -rf /usr/obj/*
d211 2
a212 2
<blockquote><pre><b>
rm -rf /usr/obj/*
d219 2
a220 2
<blockquote><pre><b>
cd /usr/src/gnu/lib/libstdc++-v3
d233 1
a233 3
   /usr/lib/libg2c.so.8.0 /usr/lib/libg2c.so.8.1 /usr/lib/libg2c_p.a \
   /usr/lib/libg2c_pic.a /usr/libdata/perl5/site_perl/*-openbsd/f2c.ph \
   /usr/libdata/perl5/site_perl/*-openbsd/g2c.ph /usr/share/info/g77.info \
d242 1
a242 1
<small>$OpenBSD: current.html,v 1.219 2010/05/26 20:45:07 sthen Exp $</small>
@


1.219
log
@add instructions to remove f77. tweak from robert@@
@
text
@d230 1
a230 1
<blockquote><pre><b>rm /usr/bin/f77 /usr/bin/g77 /usr/include/f2c.h /usr/include/g2c.h \
d244 1
a244 1
<small>$OpenBSD: current.html,v 1.218 2010/05/26 15:56:57 nicm Exp $</small>
@


1.218
log
@Update procedure for gcc3->gcc4 on amd64 and sparc64.
@
text
@d45 1
d226 14
d244 1
a244 1
<small>$OpenBSD: current.html,v 1.217 2010/05/26 09:29:12 deraadt Exp $</small>
@


1.217
log
@typo
@
text
@d44 1
d195 30
d229 1
a229 1
<small>$OpenBSD: current.html,v 1.216 2010/05/26 07:01:51 jmc Exp $</small>
@


1.216
log
@config changes missing from the index;
@
text
@d191 1
a191 1
make obj && make depend && make obj && make install</b>
d198 1
a198 1
<small>$OpenBSD: current.html,v 1.215 2010/05/25 17:23:15 deraadt Exp $</small>
@


1.215
log
@new config(8) will be needed for making kernels
@
text
@d43 1
d198 1
a198 1
<small>$OpenBSD: current.html,v 1.214 2010/05/21 22:33:16 nick Exp $</small>
@


1.214
log
@
yes, consistency is good, but let's have more usable (copy/pastable)
results.  # signs are great to show "do as root", but prevent
copy/paste.  As virtually all system modifications that will be on this
page need to be done as root, so add a statement to that effect, and
remove the prompt chars and put stuff to be entered "as is" in bold face
(may reconsider that later).  Also, using <blockquote><pre> ...
</pre></blockquote> instead of "some number of spaces" for hopefully
better consistency.
@
text
@d182 11
d197 1
a197 1
<small>$OpenBSD: current.html,v 1.213 2010/05/19 12:50:31 nick Exp $</small>
@


1.213
log
@
remove stuff in 4.7
@
text
@d71 3
d100 7
a106 6
building the system.  If you do not have it:
<pre>
    # cd /usr/src/usr.bin/mandoc
    # make obj
    # NOMAN= make &amp;&amp; NOMAN= make install
</pre>
d126 3
a128 3
<pre>
    # useradd -u 99 -g =uid -c "sndio privsep" -d /var/empty -s /sbin/nologin _sndio
</pre>
d141 4
a144 4
<pre>
    # cd /usr/src/share/mk
    # make install
</pre>
d152 3
a154 3
<pre>
	Option "AccelMethod" "UXA"
</pre>
d167 15
a181 15
<pre>
    # cd /usr/X11R6/include/X11
    # rm Xaw/Print.h Xaw/PrintSP.h
    # rm -r XprintAppUtil XprintUtil
    # cd extensions
    # rm Print.h Printstr.h XEVIstr.h Xagstr.h Xcupstr.h Xdbeproto.h Xevie.h \
        Xeviestr.h dpmsstr.h lbxdeltastr.h lbxopts.h lbxstr.h lbxzlib.h \
        mitmiscstr.h multibufst.h securstr.h shapestr.h shmstr.h syncstr.h \
        xteststr.h xtrapbits.h xtrapddmi.h xtrapdi.h xtrapemacros.h \
        xtraplib.h xtraplibp.h xtrapproto.h
    # cd /usr/X11R6/lib/pkgconfig
    # rm evieproto.pc lbxutil.pc printproto.pc trapproto.pc xaw8.pc \
        xevie.pc xp.pc xprintapputil.pc xprintutil.pc xtrap.pc
    # rm /usr/X11R6/share/aclocal/xaw.m4
</pre>
d186 1
a186 1
<small>$OpenBSD: current.html,v 1.212 2010/05/19 08:37:44 johan Exp $</small>
@


1.212
log
@Consistency is good...
sthen agrees.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
d33 1
a33 23
<li><a href="#20090721">2009/07/01 - [ports] New postgresql release</a>
<li><a href="#20090724">2009/07/24 - thread model posix enabled for gcc 3</a>
<li><a href="#20090725">2009/07/25 - audio and MIDI device naming change</a>
<li><a href="#20090726">2009/07/26 - thread model posix reverted for gcc 3</a>
<li><a href="#20090801">2009/08/01 - "split-horizon" default behaviour and syntax change in ripd(8)</a>
<li><a href="#20090818">2009/08/18 - sysmerge(8) default running mode change</a>
<li><a href="#20090826">2009/08/26 - ftp(1) auto-fetch redirection handling change</a>
<li><a href="#20090901">2009/09/01 - pf(4) address translation changes</a>
<li><a href="#20090902">2009/09/02 - pf(4) route-to/reply-to syntax change</a>
<li><a href="#20090904">2009/09/04 - bgpd(8), dvmrpd(8) additonal syntax checking</a>
<li><a href="#20091001">2009/10/01 - [ports] Bacula major update</a>
<li><a href="#20091006">2009/10/06 - bgpd(8) capability announcement changes</a>
<li><a href="#20091019">2009/10/19 - need new config(8) to build the kernel</a>
<li><a href="#20091021">2009/10/21 - two packages come with perl 5.10.1</a>
<li><a href="#20091025">2009/10/25 - iwn(4) requires a firmware package update</a>
<li><a href="#20091103">2009/11/03 - pflogd(3) requires new method of logfile rotation</a>
<li><a href="#20091122">2009/11/22 - brconfig(8)/bridgename.if(5) replaced by ifconfig(8)/hostname.if(5)</a>
<li><a href="#20091213">2009/12/13 - [ports] New asterisk release and app_conference</a>
<li><a href="#20091220">2009/12/20 - Makefile.yp(8) support for mknetid(8) -P</a>
<li><a href="#20100110">2010/01/10 - IPsec/HMAC-SHA2 incompatible change</a>
<li><a href="#20100116">2010/01/16 - new user and group for nsd</a>
<li><a href="#20100203">2010/02/03 - make(1) update required</a>
<li><a href="#20100222">2010/02/22 - new user and group for ldpd</a>
a34 1
<li><a href="#20100323">2010/03/23 - [ports] Major Dovecot upgrade</a>
d52 2
a53 2
It contains information about changes from 4.6-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.5 or earlier, or people
d76 7
a82 291
<p>
<a name="20090721"></a>
<h3>2009/07/21 - [ports] New postgresql version</h3>
The new version of postgresql requires that your databases be dumped
before upgrade and reloaded after.

<p>
<a name="20090724"></a>
<h3>2009/07/24 - thread model posix enabled for gcc 3</h3>
This change was reverted. No special steps are needed now.

<p>
<a name="20090725"></a>
<h3>2009/07/25 - audio and MIDI device naming change</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio&amp;sektion=7">sndio(7)</a>
now uses a different scheme for audio and MIDI device naming.
Though the old naming will continue working for some time, it's recommended
to start updating any scripts or configuration files of applications using 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio&amp;sektion=7">sndio(7)</a>,
as follows:

<ul>
<li>Convert old device names to new names, examples:
<pre>
     /dev/audio0   --&gt;   sun:0
     /dev/audio1   --&gt;   sun:1
     /dev/rmidi2   --&gt;   rmidi:2
     default       --&gt;   aucat:0
     mystuff       --&gt;   aucat:0.mystuff
</pre>
<li>If multiple instances of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aucat&amp;sektion=1">aucat(1)</a>
are running, then the -U option must be used to assign unit numbers to aucat(1)
processes. For instance, the following commands:
<pre>
     $ aucat -U 0 -l -f sun:3
     $ aucat -U 1 -l -s default -s mystuff -f sun:2
</pre>
will expose <tt>aucat:0</tt>, <tt>aucat:1</tt> and <tt>aucat:1.mystuff</tt> respectively.
</ul>

<p>
<a name="20090726"></a>
<h3>2009/07/26 - thread model posix reverted for gcc 3</h3>
For users who upgraded userland to enable thread model posix for gcc3,
follow these steps to upgrade. Otherwise no special steps are needed.
<ul>
<li>Build and install gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">Build and install userland</a>
</ul>

<p>
<a name="20090801"></a>
<h3>2009/08/01 - "split-horizon" default behaviour and syntax change in ripd(8)</h3>
<ul>
<li>The accepted values for "split-horizon" in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ripd.conf&sektion=5">ripd.conf(5)</a> are now:
none, simple, poisoned.
<br>
The "default" parameter, used to force simple split horizon with no poisoned
reverse, has now been replaced with "simple".
<li>The default behaviour of split horizon is now set to poisoned reverse instead of none.
</ul>

<p>
<a name="20090818"></a>
<h3>2009/08/18 - sysmerge(8) default running mode change</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysmerge&sektion=8">sysmerge(8)</a>
now runs in auto-mode by default.<br>
The "-a" switch has been replaced by "-b" which can be used to get the
former behaviour (full diff mode).

<p>
<a name="20090826"></a>
<h3>2009/08/26 - ftp(1) auto-fetch redirection handling change</h3>
In <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp(1)</a>,
when auto-fetching (command line operation) is used without specifying a
filename with <tt>-o</tt>, the file is now always saved under a filename
derived from the command line. Previous behaviour was to derive the
filename from the redirection URL.

<p>
<a name="20090901"></a>
<h3>2009/09/01 - pf(4) address translation changes</h3>
As described in more detail in
<a href="http://marc.info/?l=openbsd-misc&m=125181847818600&w=2">this
mailing list post</a>, PF's separate nat/rdr/binat (translation) rules
have been replaced with actions on regular match/filter rules.
Simple rulesets may be converted like this:<p>

<pre>   nat on $ext_if from 10/8 -&gt; ($ext_if)
   rdr on $ext_if to ($ext_if) -&gt; 1.2.3.4</pre>
becomes<br>
<pre>   match out on $ext_if from 10/8 nat-to ($ext_if)
   match in on $ext_if to ($ext_if) rdr-to 1.2.3.4</pre><p>

and...

<pre>   binat on $ext_if from $web_serv_int to any -&gt; $web_serv_ext</pre>
becomes<br>
<pre>   match on $ext_if from $web_serv_int to any binat-to $web_serv_ext</pre>

nat-anchor and/or rdr-anchor lines, e.g. for 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd">relayd(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy">ftp-proxy(8)</a>
and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy">tftp-proxy(8)</a>,
are no longer used and should be removed from
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf">pf.conf(5)</a>,
leaving only the anchor lines. Translation rules relating to these and 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd">spamd(8)</a>
will need to be adjusted as appropriate.<p>

N.B.: Previously, translation rules had "stop at first match" behaviour,
with binat being evaluated first, followed by nat/rdr depending on direction
of the packet. Now the filter rules are subject to the usual "last match"
behaviour, so care must be taken with rule ordering when converting.

<p>
<a name="20090902"></a>
<h3>2009/09/02 - pf(4) route-to/reply-to syntax change</h3>
The route-to, reply-to, dup-to and fastroute options in pf.conf
move to filteropts;
<pre>   pass in on $ext_if route-to (em1 192.168.1.1) from 10.1.1.1
   pass in on $ext_if reply-to (em1 192.168.1.1) to 10.1.1.1</pre>
becomes<br>
<pre>   pass in on $ext_if from 10.1.1.1 route-to (em1 192.168.1.1)
   pass in on $ext_if to 10.1.1.1 reply-to (em1 192.168.1.1)</pre>

<p>
<a name="20090904"></a>
<h3>2009/09/04 - bgpd(8), dvmrpd(8) additonal syntax checking</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd">bgpd(8)</a>
and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dvmrpd">dvmrpd(8)</a>
now strictly check whether something other than yes or no is used
in a yes/no token. If your existing syntax is incorrect (e.g. using
"announce capabilities none" instead of "no") this will produce an
error at startup rather than starting up and silently giving incorrect
behaviour.

<p>
<a name="20091001"></a>
<h3>2009/10/01 - [ports] Bacula major version update</h3>
Bacula has been upgraded from 2.4.4 to 3.0.2; this has a new catalog
format which requires a database schema change on the director. The
<a href="http://permalink.gmane.org/gmane.os.openbsd.ports.cvs/39031">commit
log entry</a> and
<a href="http://sourceforge.net/project/shownotes.php?release_id=674473">release
notes</a> have more details.

The server components (storage daemons and director) are not compatible
between major versions so these must be upgraded together.

<ul>
<li>3.x server components (sd/dir) <b>are</b> backwards compatible with 2.4.x clients.
<li>3.x clients are <b>not</b> compatible with 2.4.x server components.
</ul>

<p>
<a name="20091006"></a>
<h3>2009/10/06 - bgpd(8) capability announcement changes</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd">bgpd(8)</a>
now announces 4-byte ASN and graceful restart capabilities by default.
Previously graceful restart was not announced by default, and 4-byte
ASN support was only advertised when one or other peer used an ASN
above 65535. There is now per-session control over which capabilities
are announced:
<pre>   announce refresh yes # was already on by default
   announce restart no
   announce as-4byte no # was only set on sessions to peers with 4byte AS nums </pre>

<p>
<a name="20091019"></a>
<h3>2009/10/19 - need new config(8) to build the kernel</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config">config(8)</a>
has been changed. You must install a new version before building a kernel
from newly updated sources.
<pre>
   # cd /usr/src/usr.sbin/config
   # make
   # make install</pre>

<p>
<a name="20091021"></a>
<h3>2009/10/21 - two packages come with perl 5.10.1</h3>
p5-parent and p5-Parse-CPAN-Meta now come with base Perl.
If you have installed the packages, delete them.
<pre>
   # pkg_delete p5-parent p5-Parse-CPAN-Meta </pre>

<p>
<a name="20091025"></a>
<h3>2009/10/25 - iwn(4) requires a firmware package update</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iwn">iwn(4)</a>
now needs iwn-firmware package version 5.2.
You can install the iwn-firmware-5.2 package with:
<pre>
   # pkg_add http://damien.bergamini.free.fr/packages/openbsd/iwn-firmware-5.2.tgz </pre>

<p>
<a name="20091103"></a>
<h3>2009/11/03 - pflogd(8) requires new method of logfile rotation</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd">pflogd(8)</a>
has lost its <tt>-p</tt> option. Change <tt>/etc/newsyslog.conf</tt> to
include:
<pre>
   /var/log/pflog	600  3     250  *     ZB "pkill -HUP -u root -U root -t - -x pflogd"
</pre>

<p>
<a name="20091122"></a>
<h3>2009/11/22 - brconfig(8)/bridgename.if(5) replaced by ifconfig(8)/hostname.if(5)</h3>
The functionality of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=brconfig">brconfig(8)</a>
has been integrated into
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig">ifconfig(8)</a>.
Since the <tt>priority</tt> argument to set the spanning tree priority
on a bridge conflicts with the existing ifconfig(8) interface priority,
it has been renamed to <tt>spanpriority</tt>.
<p>
Existing /etc/bridgename.bridge* files should be replaced with
/etc/hostname.bridge* files; if you use <tt>priority</tt>, replace
it with <tt>spanpriority</tt>.

<p>
<a name="20091213"></a>
<h3>2009/12/13 - [ports] New asterisk release and app_conference</h3>
The Asterisk package was updated to 1.6.0.x, you might need to make some
configuration changes; please see /usr/local/share/doc/asterisk/UPGRADE-16.txt.
The old app_conference plugin is incompatible with the new version, you must use
appkonference instead.

<p>
<a name="20091220"></a>
<h3>2009/12/20 - Makefile.yp(8) support for mknetid(8) -P</h3>
On YP server hosts, merge
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/usr.sbin/ypserv/ypinit/Makefile.yp#rev1.15">Makefile.yp rev. 1.15</a>
into all your copies of the YP Makefile, <tt>/var/yp/*/Makefile</tt>.
Strictly speaking, this is only required if you have set the DIR variable
to a non-standard YP source directory AND you do not provide a passwd(5)
file in your YP source directory.  For maximum security to never leak group
information from <tt>/etc/master.passwd</tt> into your netid(5) YP map,
it is recommended that all YP server hosts be updated.

<a name="20100110"></a>
<h3>2010/01/10 - IPsec/HMAC-SHA2 incompatible change</h3>
Two bugs in
<a href="http://marc.info/?l=openbsd-cvs&m=126312766621593&w=2">IPsec/HMAC-SHA2</a>
were fixed, resulting in an incompatibility with the HMAC-SHA-256/384/512
hash algorithms with previous versions of OpenBSD and other IPsec
implementations sharing the bugs.
In particular the default authentication algorithm HMAC-SHA-256
is affected.
Upgrade both sides together, or switch to another authentication
algorithm during the transition.
The per-packet overhead has increased; if you are clamping the
MSS to exact values (i.e. without slack), this will need to be
recalculated.

<a name="20100116"></a>
<h3>2010/01/16 - new user and group for nsd</h3>
The following needs to be run:
<pre>
   # useradd -u 97 -g =uid -c "NSD Daemon" -d /var/empty -s /sbin/nologin _nsd
</pre>

<a name="20100203"></a>
<h3>2010/02/03 - make(1) update required</h3>
Changes in the build infrastructure to build the
<a href="../loongson.html">OpenBSD/loongson</a> port require the use of a new
make(1) binary, providing the <tt>MACHINE_CPU</tt> variable to Makefiles.
You must install a new version before building userland
from newly updated sources.
<pre>
   # cd /usr/src/usr.bin/make
   # make depend
   # make
   # make install</pre>

<a name="20100222"></a>
<h3>2010/02/22 - new user and group for ldpd(8)</h3>
The following needs to be run:
<pre>
    # useradd -u 98 -g =uid -c "LDP Daemon" -d /var/empty -s /sbin/nologin _ldpd
</pre>
a93 8
<a name="20100323"></a>
<h3>2010/03/23 - [Ports] Major Dovecot upgrade</h3>
Dovecot has been updated from 1.1.20 to 1.2.11. The configuration file changed 
and the old cmusieve plugin has been removed in favor of the new Dovecot sieve 
implementation. The 
<a href="http://permalink.gmane.org/gmane.os.openbsd.ports.cvs/42080">commit 
log entry</a> has more details.

d182 1
a182 1
<small>$OpenBSD: current.html,v 1.211 2010/05/18 02:12:13 nick Exp $</small>
@


1.211
log
@
missing </a>
@
text
@d367 3
a369 3
<blockquote><pre>
useradd -u 97 -g =uid -c "NSD Daemon" -d /var/empty -s /sbin/nologin _nsd
</pre></blockquote>
d387 3
a389 3
<blockquote><pre>
useradd -u 98 -g =uid -c "LDP Daemon" -d /var/empty -s /sbin/nologin _ldpd
</pre></blockquote>
d437 3
a439 3
<blockquote><pre>
useradd -u 99 -g =uid -c "sndio privsep" -d /var/empty -s /sbin/nologin _sndio
</pre></blockquote>
d479 5
a483 5
    cd /usr/X11R6/include/X11
    rm Xaw/Print.h Xaw/PrintSP.h
    rm -r XprintAppUtil XprintUtil
    cd extensions
    rm Print.h Printstr.h XEVIstr.h Xagstr.h Xcupstr.h Xdbeproto.h Xevie.h \
d488 2
a489 2
    cd /usr/X11R6/lib/pkgconfig
    rm evieproto.pc lbxutil.pc printproto.pc trapproto.pc xaw8.pc \
d491 1
a491 1
    rm /usr/X11R6/share/aclocal/xaw.m4
d497 1
a497 1
<small>$OpenBSD: current.html,v 1.210 2010/05/15 14:44:40 sthen Exp $</small>
@


1.210
log
@use rm -r for dir's; pointed out by Joachim Schipper.
@
text
@d55 1
a55 1
<li><a href="#20100222">2010/02/22 - new user and group for ldpd
d497 1
a497 1
<small>$OpenBSD: current.html,v 1.209 2010/05/15 13:49:51 sthen Exp $</small>
@


1.209
log
@Rather than list the X autoconf/pkgconfig/header files that should
be removed, include a set of shell commands to do the job.
@
text
@d480 2
a481 2
    rm Xaw/Print.h Xaw/PrintSP.h XprintAppUtil XprintAppUtil/xpapputil.h \
        XprintUtil XprintUtil/xprintutil.h
d497 1
a497 1
<small>$OpenBSD: current.html,v 1.208 2010/05/15 08:50:24 matthieu Exp $</small>
@


1.208
log
@Mention the list of headers and autotools/pkgconfig files that
needs to be removed after X libs updates/deletion.
@
text
@d479 13
a491 44
    /usr/X11R6/include/X11/Xaw/Print.h
    /usr/X11R6/include/X11/Xaw/PrintSP.h
    /usr/X11R6/include/X11/XprintAppUtil
    /usr/X11R6/include/X11/XprintAppUtil/xpapputil.h
    /usr/X11R6/include/X11/XprintUtil
    /usr/X11R6/include/X11/XprintUtil/xprintutil.h
    /usr/X11R6/include/X11/extensions/Print.h
    /usr/X11R6/include/X11/extensions/Printstr.h
    /usr/X11R6/include/X11/extensions/XEVIstr.h
    /usr/X11R6/include/X11/extensions/Xagstr.h
    /usr/X11R6/include/X11/extensions/Xcupstr.h
    /usr/X11R6/include/X11/extensions/Xdbeproto.h
    /usr/X11R6/include/X11/extensions/Xevie.h
    /usr/X11R6/include/X11/extensions/Xeviestr.h
    /usr/X11R6/include/X11/extensions/dpmsstr.h
    /usr/X11R6/include/X11/extensions/lbxdeltastr.h
    /usr/X11R6/include/X11/extensions/lbxopts.h
    /usr/X11R6/include/X11/extensions/lbxstr.h
    /usr/X11R6/include/X11/extensions/lbxzlib.h
    /usr/X11R6/include/X11/extensions/mitmiscstr.h
    /usr/X11R6/include/X11/extensions/multibufst.h
    /usr/X11R6/include/X11/extensions/securstr.h
    /usr/X11R6/include/X11/extensions/shapestr.h
    /usr/X11R6/include/X11/extensions/shmstr.h
    /usr/X11R6/include/X11/extensions/syncstr.h
    /usr/X11R6/include/X11/extensions/xteststr.h
    /usr/X11R6/include/X11/extensions/xtrapbits.h
    /usr/X11R6/include/X11/extensions/xtrapddmi.h
    /usr/X11R6/include/X11/extensions/xtrapdi.h
    /usr/X11R6/include/X11/extensions/xtrapemacros.h
    /usr/X11R6/include/X11/extensions/xtraplib.h
    /usr/X11R6/include/X11/extensions/xtraplibp.h
    /usr/X11R6/include/X11/extensions/xtrapproto.h
    /usr/X11R6/lib/pkgconfig/evieproto.pc
    /usr/X11R6/lib/pkgconfig/lbxutil.pc
    /usr/X11R6/lib/pkgconfig/printproto.pc
    /usr/X11R6/lib/pkgconfig/trapproto.pc
    /usr/X11R6/lib/pkgconfig/xaw8.pc
    /usr/X11R6/lib/pkgconfig/xevie.pc
    /usr/X11R6/lib/pkgconfig/xp.pc
    /usr/X11R6/lib/pkgconfig/xprintapputil.pc
    /usr/X11R6/lib/pkgconfig/xprintutil.pc
    /usr/X11R6/lib/pkgconfig/xtrap.pc
    /usr/X11R6/share/aclocal/xaw.m4
d497 1
a497 1
<small>$OpenBSD: current.html,v 1.207 2010/05/10 23:13:48 oga Exp $</small>
@


1.207
log
@Mention that GEM is now the default and so action may be required for X.
@
text
@d65 1
d469 55
d528 1
a528 1
<small>$OpenBSD: current.html,v 1.206 2010/05/10 21:42:11 jsg Exp $</small>
@


1.206
log
@mention the need for a bsd.own.mk that sets COMPILER_VERSION.
@
text
@d64 1
d456 12
d472 1
a472 1
<small>$OpenBSD: current.html,v 1.205 2010/05/06 20:32:14 naddy Exp $</small>
@


1.205
log
@remove evdns.ph as well; ok nicm@@
@
text
@d63 1
d446 9
d459 1
a459 1
<small>$OpenBSD: current.html,v 1.204 2010/04/26 17:38:29 sthen Exp $</small>
@


1.204
log
@Mention changes need for updating ports/net/samba.
(the cvsweb url referenced will become active shortly).
@
text
@d429 1
a429 1
header file manually.
d449 1
a449 1
<small>$OpenBSD: current.html,v 1.203 2010/04/24 07:53:01 ratchov Exp $</small>
@


1.203
log
@add new _sndio user for aucat(1) and midicat(1)
@
text
@d62 1
d438 7
d449 1
a449 1
<small>$OpenBSD: current.html,v 1.202 2010/04/21 20:14:16 nicm Exp $</small>
@


1.202
log
@Add libevent /usr/include/evdns.h removal.
@
text
@d53 1
a53 1
<li><a href="#20100116">2010/01/16 - new user and group for nsd
d61 1
d412 1
a412 1
    # NOMAN= make && NOMAN= make install
d430 7
d441 1
a441 1
<small>$OpenBSD: current.html,v 1.201 2010/04/18 17:43:22 nick Exp $</small>
@


1.201
log
@
missed a couple new users: _nsd and _ldpd.
Someone please check this over for dyslexic issues...
@
text
@d60 1
d423 6
d433 1
a433 1
<small>$OpenBSD: current.html,v 1.200 2010/04/17 12:00:08 sthen Exp $</small>
@


1.200
log
@Warn people that ahci(4) no longer attaches to disks on Intel
controllers set to RAID mode.
@
text
@d53 1
d55 1
d358 7
d378 7
d426 1
a426 1
<small>$OpenBSD: current.html,v 1.199 2010/04/04 02:26:42 nick Exp $</small>
@


1.199
log
@
sync tags and targets
@
text
@d57 1
d397 9
d410 1
a410 1
<small>$OpenBSD: current.html,v 1.198 2010/04/03 21:39:33 schwarze Exp $</small>
@


1.198
log
@mandoc(1) is required now, not soon;
and use NOMAN= to build it if you don't have it;
found the hard way by miod@@
@
text
@d56 1
a56 1
<li><a href="#20100402">2010/04/03 - mandoc(1) required now</a>
d400 1
a400 1
<small>$OpenBSD: current.html,v 1.197 2010/04/02 23:59:00 deraadt Exp $</small>
@


1.197
log
@mandoc(1) soon required
@
text
@d56 1
a56 1
<li><a href="#20100402">2010/04/02 - mandoc(1) required soon</a>
d386 3
a388 3
<a name="20100402"></a>
<h3>2010/04/02 - mandoc(1) required soon</h3>
mandoc(1) has been added to the build tree, and will soon be required for
d393 1
a393 1
    # make && make install
d400 1
a400 1
<small>$OpenBSD: current.html,v 1.196 2010/03/29 13:23:28 pea Exp $</small>
@


1.196
log
@Document the Dovecot upgrade

ok sthen@@
@
text
@d56 1
d386 10
d400 1
a400 1
<small>$OpenBSD: current.html,v 1.195 2010/03/26 11:22:58 jsing Exp $</small>
@


1.195
log
@Document softraid(4) metadata changes.
@
text
@d55 1
d377 8
d389 1
a389 1
<small>$OpenBSD: current.html,v 1.194 2010/02/04 05:57:00 benoit Exp $</small>
@


1.194
log
@- typo

ok miod@@
@
text
@d54 1
d366 10
d380 1
a380 1
<small>$OpenBSD: current.html,v 1.193 2010/02/03 21:52:00 miod Exp $</small>
@


1.193
log
@2010/02/03 - make(1) update required
@
text
@d355 1
a355 1
<a href="loongson.html">OpenBSD/loongson</a> port require the use of a new
d369 1
a369 1
<small>$OpenBSD: current.html,v 1.192 2010/01/13 23:56:45 sthen Exp $</small>
@


1.192
log
@naddy@@ pointed out that the per-packet overhead has changed with the
hmac-sha2 change; mention it here too.
@
text
@d53 1
d352 13
d369 1
a369 1
<small>$OpenBSD: current.html,v 1.191 2010/01/13 09:11:28 sthen Exp $</small>
@


1.191
log
@adjust wording, from markus@@
@
text
@d347 3
d355 1
a355 1
<small>$OpenBSD: current.html,v 1.190 2010/01/12 23:38:37 sthen Exp $</small>
@


1.190
log
@Mention the incompatible change with IPsec SHA-256/384/512.
@
text
@d340 7
a346 4
were fixed, resulting in an incompatibility with SHA-256/384/512 with
previous versions of OpenBSD and other IPsec implementations sharing the
bugs. In particular the default SHA-256 cipher is affected. Upgrade
both sides together, or switch to another cipher during the transition.
d352 1
a352 1
<small>$OpenBSD: current.html,v 1.189 2009/12/20 13:44:22 schwarze Exp $</small>
@


1.189
log
@tiny update to /var/yp/*/Makefile on your YP server hosts
@
text
@d52 1
d336 9
d349 1
a349 1
<small>$OpenBSD: current.html,v 1.188 2009/12/13 12:53:35 sthen Exp $</small>
@


1.188
log
@asterisk port
@
text
@d51 1
d323 12
d339 1
a339 1
<small>$OpenBSD: current.html,v 1.187 2009/11/22 23:17:44 sthen Exp $</small>
@


1.187
log
@mention brconfig -> ifconfig, bridgename.bridge* -> hostname.bridge*.
ok deraadt claudio
@
text
@d50 1
d314 8
d326 1
a326 1
<small>$OpenBSD: current.html,v 1.186 2009/11/09 09:37:01 otto Exp $</small>
@


1.186
log
@pretty
@
text
@d48 2
a49 1
<li><a href="#20091103">2009/11/03 - pflogd(3) requires new method of logfile rotation
d292 1
a292 1
has lost its <tt>-p<tt> option. Change <tt>/etc/newsyslog.conf</tt> to
d298 14
d317 1
a317 1
<small>$OpenBSD: current.html,v 1.185 2009/11/09 09:35:19 otto Exp $</small>
@


1.185
log
@mention pflogd(8) logfile rotation changes
@
text
@d290 2
a291 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd">pflogd(3)</a>
has lost it's -p option. Change <tt>/etc/newsyslog.conf</tt> to
d294 1
a294 1
/var/log/pflog	600  3     250  *     ZB "pkill -HUP -u root -U root -t - -x pflogd"
d302 1
a302 1
<small>$OpenBSD: current.html,v 1.184 2009/11/03 13:31:52 nick Exp $</small>
@


1.184
log
@
Bacula update should have a [ports] in front of it.
@
text
@d48 1
d287 10
d302 1
a302 1
<small>$OpenBSD: current.html,v 1.183 2009/10/25 17:41:12 nick Exp $</small>
@


1.183
log
@
rotate 4.6 stuff from current.html to upgrade-old.html...on to 4.7!
@
text
@d229 1
a229 1
<h3>2009/10/01 - Bacula major version update</h3>
d291 1
a291 1
<small>$OpenBSD: current.html,v 1.182 2009/10/24 20:24:49 damien Exp $</small>
@


1.182
log
@man iwn is section 4 not 8.
@
text
@a32 14
<li><a href="#20090304">2009/03/04 - new user and group for smtpd</a>
<li><a href="#20090316">2009/03/16 - makemap(8) now run through mailwrapper(8)</a>
<li><a href="#20090324">2009/03/24 - "redistribute default" behaviour change in ospfd(8) and ripd(8)</a>
<li><a href="#20090406">2009/04/06 - incompatible changes to pf(4)</a>
<li><a href="#20090407">2009/04/07 - fragment reassembly on by default</a>
<li><a href="#20090426">2009/04/26 - require-order off by default in pfctl(8)</a>
<li><a href="#20090520">2009/05/20 - new user and group for rpc.rwalld</a>
<li><a href="#20090525">2009/05/25 - update of daily(8), weekly, monthly,
                                     security(8)</a>
<li><a href="#20090531">2009/05/31 - pf enabled by default</a>
<li><a href="#20090602">2009/06/02 - tmux(1) moved from ports to base</a>
<li><a href="#20090603">2009/06/03 - httpd ABI change</a>
<li><a href="#20090626">2009/06/26 - updated lynx(1)</a>
<li><a href="#20090703">2009/07/03 - updated bnx(4) driver</a>
d57 2
a58 2
It contains information about changes from 4.5-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.4 or earlier, or people
d62 2
a63 2
If you wish to update to 4.5-release or 4.5-stable from previous
versions, see the <a href="upgrade45.html">upgrade guide</a>.
a80 159

<p>
<a name="20090304"></a>
<h3>2009/03/04 - new user and group for smtpd</h3>
The following needs to be run:
<pre>
useradd -u 95 -g =uid -c "SMTP Daemon" -d /var/empty -s /sbin/nologin _smtpd
</pre>

<p>
<a name="20090316"></a>
<h3>2009/03/16 - makemap(8) now run through mailwrapper(8)</h3>
Since the connection of smtpd(8) to the build, makemap(8) is run through
mailwrapper(8) to avoid conflict between sendmail and smtpd version of
the binary. For this to work, one has to manually add the following line to
/etc/mailer.conf:
<pre>
makemap		/usr/libexec/sendmail/makemap
</pre>

<p>
<a name="20090324"></a>
<h3>2009/03/24 - "redistribute default" behaviour change in ospfd(8) and ripd(8)</h3>
"redistribute default", set in ospfd.conf(5) and ripd.conf(5) configuration
files, require now the presence of a default route in the kernel routing
table otherwise no route will be announced by ospfd(8) and ripd(8).

<p>
<a name="20090406"></a>
<h3>2009/04/06 - incompatible changes to pf(4)</h3>
Packet normalization ("scrubbing") has been integrated with the
main ruleset. This is now specified by adding the "scrub (options)"
parameter to rules. For example:

<pre>
        scrub in all no-df max-mss 1440
</pre>

can be replaced with a rule using the new "match" action:

<pre>
        match in all scrub (no-df max-mss 1440)
</pre>

Since ruleset ordering is enforced by default, this will either
have to be moved to the main ruleset (before "pass quick" rules),
or ruleset order checking must be disabled:

<pre>
        set require-order no
</pre>

Packet reassembly has been simplified. "Crop" and "drop-ovl" have
been removed; only full reassembly remains. It's enabled like this:

<pre>
        set reassemble yes|no [no-df]
</pre>

If "no-df" is given, fragments (and only fragments!) with the df bit
set have it cleared before entering the fragment cache, and thus the
reassembled packet doesn't have df set either. Non-fragmented packets
are unaffected by no-df.

<p>
<a name="20090407"></a>
<h3>2009/04/07 - fragment reassembly on by default in pf(4)</h3>
Since there is little to no reason not to use fragment reassembly,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
was changed so that it is now enabled by default.

<p>
<a name="20090426"></a>
<h3>2009/04/26 - require-order off by default in pfctl(8)</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>
was changed so that "set require-order" is now disabled by default.
This is advisory only, no configuration change is necessary.

<p>
<a name="20090520"></a>
<h3>2009/05/20 - new user and group for rpc.rwalld</h3>
The following needs to be run:
<pre>
useradd -u 96 -g =uid -c "rpc.rwalld" -d /var/empty -s /sbin/nologin _rwalld
</pre>

<p>
<a name="20090525"></a>
<h3>2009/05/25 - update of daily(8), weekly, monthly, security(8)</h3>
When updating your periodic maintenance scripts to the latest versions,
pay attention to the following changes:
<ul>
<li>The scripts daily, weekly, and monthly now all use the PATH variable
from the root crontab(5), which is /bin:/sbin:/usr/bin:/usr/sbin by default.
The daily(8) PATH no longer includes /usr/local/bin, the weekly(8) PATH no
longer includes /usr/libexec.  In daily.local, weekly.local and monthly.local,
you can still add additional directories to the PATH.
<li>All four scripts now suppress section headers when there is no content
to follow.  When a script produces no output whatsoever, it does not send
mail to root any more.  This may require adjustment of your parser scripts.
<li>The security(8) script now uses some shell functions from daily(8),
so it cannot run stand-alone.  Use "sudo /bin/sh /etc/daily" in case you
need to run it manually.
</ul>

<p>
<a name="20090531"></a>
<h3>2009/05/31 - pf enabled by default</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
is now enabled by default in rc.conf.

<p>
<a name="20090602"></a>
<h3>2009/06/02 - tmux(1) moved from ports to base</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tmux&amp;sektion=1">tmux(1)</a>
has moved from ports to base. If you installed it from ports,
please remove it with pkg_delete.

<p>
<a name="20090603"></a>
<h3>2009/06/03 - httpd ABI change</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>
was fixed to report correct size of big files, this introduced a change
to its ABI. Because of this some third party modules will have to be rebuilt
or packages updated.

<p>
<a name="20090626"></a>
<h3>2009/06/26 - lynx(1) update</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lynx&amp;sektion=1">lynx(1)</a>
has been updated to 2.8.6rel.5.  Some directives of configuration
file /etc/lynx.cfg have changed therefore you have to update it:
<blockquote><pre>
# cd /tmp
# ftp ftp://mirror/path/to/snapshots/arch/etc46.tgz
# tar xzpf etc46.tgz ./etc/lynx.cfg
# mv etc/lynx.cfg /etc
</pre></blockquote>
Merge your local changes afterwards.

<p>
<a name="20090703"></a>
<h3>2009/07/03 - updated bnx(4) driver</h3>
<!-- this shouldn't be needed in the 4.6 notes -->
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bnx&amp;sektion=4">bnx(4)</a>
driver has been updated to support new controllers.
This includes a change in the way firmware handling is done.
Users with bnx must create the new firmware files before booting a new kernel:
<blockquote><pre>
# cd /sys/dev/microcode/bnx 
# make obj clean
# make 
# make install 
</pre></blockquote>
Alternatively, if upgrading from a binary snapshot on a running system (rather
than via the installer), be sure to extract base46.tgz before rebooting onto the
new kernel.

d291 1
a291 1
<small>$OpenBSD: current.html,v 1.181 2009/10/24 19:20:11 damien Exp $</small>
@


1.181
log
@iwn(4) requires a firmware package update.

reminded by halex@@
@
text
@d453 1
a453 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iwn">iwn(8)</a>
d464 1
a464 1
<small>$OpenBSD: current.html,v 1.180 2009/10/21 23:02:07 sthen Exp $</small>
@


1.180
log
@pkg_delete p5-parent p5-Parse-CPAN-Meta if you have them installed, they're
in base perl now.
@
text
@d61 1
d450 9
d464 1
a464 1
<small>$OpenBSD: current.html,v 1.179 2009/10/21 16:54:24 sthen Exp $</small>
@


1.179
log
@You need new config(8) to build the kernel.
@
text
@d60 1
d441 8
d454 1
a454 1
<small>$OpenBSD: current.html,v 1.178 2009/10/07 19:46:48 sthen Exp $</small>
@


1.178
log
@New bgpd default capability announcements.
@
text
@d59 1
d429 10
d445 1
a445 1
<small>$OpenBSD: current.html,v 1.177 2009/10/02 08:48:16 sthen Exp $</small>
@


1.177
log
@Add a note about the Bacula update. Reworked from merdely@@'s version,
ok merdely@@.
@
text
@d58 1
d415 14
d434 1
a434 1
<small>$OpenBSD: current.html,v 1.176 2009/09/07 12:47:27 sthen Exp $</small>
@


1.176
log
@Simplify the binat conversion example, now we have binat-to.
@
text
@d57 1
d396 19
d419 1
a419 1
<small>$OpenBSD: current.html,v 1.175 2009/09/04 20:46:07 benoit Exp $</small>
@


1.175
log
@- typos

ok ajacoutot@@, sthen@@
@
text
@d356 1
a356 2
<pre>   match out on $ext_if from $web_serv_int to any nat-to $web_serv_ext static-port
   match in on $ext_if from any to $web_serv_ext rdr-to $web_serv_int</pre><p>
d399 1
a399 1
<small>$OpenBSD: current.html,v 1.174 2009/09/04 13:36:04 sthen Exp $</small>
@


1.174
log
@Note that bgpd/dvmrpd will now give a syntax error for invalid
text where yes/no is expected rather than silently failing.
@
text
@a384 1
<li><a href="#20090904">2009/09/04 - bgpd(8), dvmrpd(8) additonal syntax checking</a>
d400 1
a400 1
<small>$OpenBSD: current.html,v 1.173 2009/09/03 09:44:06 sthen Exp $</small>
@


1.173
log
@Add a binat example. ok phessler@@
@
text
@d56 1
d385 12
d401 1
a401 1
<small>$OpenBSD: current.html,v 1.172 2009/09/02 23:19:29 sthen Exp $</small>
@


1.172
log
@Remove &sektion=X from the URLs so man.cgi actually picks up the pages
from -current rather than 4.5; pointed out by cnst@@.
@
text
@d348 9
a356 2
<pre>   match out on $ext-if from 10/8 nat-to ($ext_if)
   match in on $ext-if to ($ext_if) rdr-to 1.2.3.4</pre><p>
d368 4
a371 3
N.B.: Translation rules had "stop at first match" behaviour, whereas
filter rules have "last match" behaviour, so care must be taken with rule
ordering.
d388 1
a388 1
<small>$OpenBSD: current.html,v 1.171 2009/09/02 22:16:04 sthen Exp $</small>
@


1.171
log
@The manpages on http://www.openbsd.org/ are now updated, so add some
man.cgi links for the pf changes.
@
text
@d352 3
a354 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&sektion=8">relayd(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&sektion=8">ftp-proxy(8)</a>
and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy&sektion=8">tftp-proxy(8)</a>,
d356 1
a356 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&sektion=5">pf.conf(5)</a>,
d358 1
a358 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&sektion=8">spamd(8)</a>
d380 1
a380 1
<small>$OpenBSD: current.html,v 1.170 2009/09/02 16:57:47 sthen Exp $</small>
@


1.170
log
@dup-to and fastroute are also affected by the last change
@
text
@d351 9
a359 5
nat-anchor and/or rdr-anchor lines, e.g. for relayd(8), ftp-proxy(8)
and tftp-proxy(8), are no longer used and should be removed from
/etc/pf.conf. Translation rules for these and spamd(8) will need to
be adjusted as appropriate.<p>
<!-- add links to man.cgi after pages are updated -->
d361 1
a361 1
N.B. translation rules had "stop at first match" behaviour, whereas
d380 1
a380 1
<small>$OpenBSD: current.html,v 1.169 2009/09/02 13:34:41 sthen Exp $</small>
@


1.169
log
@Note that route-to/reply-to have moved to filteropts.
@
text
@d364 2
a365 1
The route-to and reply-to options in pf.conf move to filteropts;
d376 1
a376 1
<small>$OpenBSD: current.html,v 1.168 2009/09/02 08:13:14 sthen Exp $</small>
@


1.168
log
@better ruleset examples, prompted by a mail from marc@@
@
text
@d55 1
d361 10
d375 1
a375 1
<small>$OpenBSD: current.html,v 1.167 2009/09/01 23:28:22 sthen Exp $</small>
@


1.167
log
@Note the PF nat-to changes and give brief details about converting
rules; more is likely to be needed but that can be filled in later.
@
text
@d344 2
a345 2
<pre>   nat on $ext_if to ($ext_if)
   rdr on $ext_if to 1.2.3.4</pre>
d347 2
a348 2
<pre>   match out on $ext-if nat-to ($ext_if)
   match in on $ext-if rdr-to 1.2.3.4</pre><p>
d364 1
a364 1
<small>$OpenBSD: current.html,v 1.166 2009/08/26 12:03:34 sthen Exp $</small>
@


1.166
log
@Note that ftp(1) auto-fetch changed behaviour with redirected HTTP URLs
@
text
@d54 1
d335 25
d364 1
a364 1
<small>$OpenBSD: current.html,v 1.165 2009/08/18 08:28:22 ajacoutot Exp $</small>
@


1.165
log
@Document sysmerge(8) default behaviour change.

"sure" sthen@@
@
text
@d53 1
d325 9
d338 1
a338 1
<small>$OpenBSD: current.html,v 1.164 2009/08/01 15:05:57 michele Exp $</small>
@


1.164
log
@Document new split horizon syntax in ripd.conf(5) and
new split horizon default behaviour.

ok jmc@@
@
text
@d52 1
d316 8
d328 1
a328 1
<small>$OpenBSD: current.html,v 1.163 2009/07/27 07:35:18 ratchov Exp $</small>
@


1.163
log
@quickly explain how to switch from old-style to new-style audio/midi
device names.
suggested by and help from jmc@@
@
text
@d51 1
d303 12
d319 1
a319 1
<small>$OpenBSD: current.html,v 1.162 2009/07/26 22:52:03 kurt Exp $</small>
@


1.162
log
@- revert thread model posix instructions
@
text
@d49 2
a50 1
<li><a href="#20090724">2009/07/26 - thread model posix reverted for gcc 3</a>
d255 30
d306 1
a306 1
<small>$OpenBSD: current.html,v 1.161 2009/07/25 02:06:00 kurt Exp $</small>
@


1.161
log
@build instructions for thread model posix for gcc 3
@
text
@d49 1
d251 7
a257 3
Thread model posix has been enabled for gcc 3 which makes dwarf2 exception
handling thread safe and enables thread safety for libstdc++.
To upgrade follow these steps:
d275 1
a275 1
<small>$OpenBSD: current.html,v 1.160 2009/07/23 11:19:47 nick Exp $</small>
@


1.160
log
@
idea several people seem to have come up with at about the same time --
henning@@, sthen@@, and me (and probably a bunch of others who looked at
it and said, "of course!").  current.html is supposed to help people
follow current, ports and packages issues impact people following
current, so..put them here, too.  Makes my life easier for
upgradeXX.html, too.
@
text
@d48 1
d248 18
d270 1
a270 1
<small>$OpenBSD: current.html,v 1.159 2009/07/03 13:49:50 sthen Exp $</small>
@


1.159
log
@adjust bnx warning slightly; bnx users upgrading from binaries on a running
system also need to take care to extract the firmware before rebooting.
@
text
@d47 1
d241 6
d251 1
a251 1
<small>$OpenBSD: current.html,v 1.158 2009/07/03 11:46:49 sthen Exp $</small>
@


1.158
log
@tell people to build bnx firmware before a kernel. discussed with dlg
@
text
@d228 1
a228 1
If upgrading from source, create new firmware files before building a new kernel:
d235 3
a237 1
Alternatively upgrade from a binary snapshot.
d244 1
a244 1
<small>$OpenBSD: current.html,v 1.157 2009/06/26 21:57:22 martynas Exp $</small>
@


1.157
log
@lynx update needs new configuration file to be copied over;  ok sthen@@
@
text
@d46 1
d221 17
d242 1
a242 1
<small>$OpenBSD: current.html,v 1.156 2009/06/10 14:05:23 johan Exp $</small>
@


1.156
log
@
ooops...
Fix previous.
@
text
@d45 1
d205 13
d224 1
a224 1
<small>$OpenBSD: current.html,v 1.155 2009/06/10 13:31:36 johan Exp $</small>
@


1.155
log
@
Remind everyone about the httpd ABI change.
With and ok pyr
@
text
@a189 7
<a name="20090603"></a>
<h3>2009/06/03 - httpd ABI change</h3>
httpd was fixed to report correct size of big files, this introduced a change
to its ABI. Because of this some third party modules will have to be rebuilt
to work properly.

<p>
d210 1
a210 1
<small>$OpenBSD: current.html,v 1.154 2009/06/03 18:09:04 nicm Exp $</small>
@


1.154
log
@tmux added; from sthen, thanks
@
text
@d44 1
d190 7
d204 9
d217 1
a217 1
<small>$OpenBSD: current.html,v 1.153 2009/06/02 02:40:17 sthen Exp $</small>
@


1.153
log
@document that bombs turn into flowers, water into beer, swine flu
eradicated, and pf enabled by default.
@
text
@d43 1
d189 7
d200 1
a200 1
<small>$OpenBSD: current.html,v 1.152 2009/05/25 16:16:42 schwarze Exp $</small>
@


1.152
log
@list consequences of daily/weekly/monthly/security changes; ok sthen@@
@
text
@d42 1
d182 6
d192 1
a192 1
<small>$OpenBSD: current.html,v 1.151 2009/05/20 21:29:10 thib Exp $</small>
@


1.151
log
@mention the addition of _rwalld
@
text
@d40 2
d162 19
d185 1
a185 1
<small>$OpenBSD: current.html,v 1.150 2009/04/30 17:23:22 nick Exp $</small>
@


1.150
log
@
roll 4.4->4.5 stuff to archive
@
text
@d39 1
d152 8
d164 1
a164 1
<small>$OpenBSD: current.html,v 1.149 2009/04/26 12:34:55 sthen Exp $</small>
@


1.149
log
@note the change in require-order default; no config change needed
@
text
@a32 16
<li><a href="#20080907">2008/09/07 - ifconfig(8) syntax change</a>
<li><a href="#20080913">2008/09/13 - xcompmgr(1) moved from ports to xbase</a>
<li><a href="#20080929">2008/09/29 - Perl updated to 5.10.0</a>
<li><a href="#20081003">2008/10/03 - sm-client.st moved</a>
<li><a href="#20081102">2008/11/02 - Xserver updated to 1.5.2</a>
<li><a href="#20081103">2008/11/03 - Perl updated to 5.10.0</a>
<li><a href="#20081105">2008/11/05 - Perl updated to 5.10.0</a>
<li><a href="#20081106">2008/11/06 - Xserver updated to 1.5.2</a>
<li><a href="#20081107">2008/11/07 - Perl updated to 5.10.0</a>
<li><a href="#20081111">2008/11/11 - PIE support added to gcc 3.3.5 & csu</a>
<li><a href="#20081116">2008/11/16 - mixerctl(1) name changes</a>
<li><a href="#20081126">2008/11/26 - btd needs user and group</a>
<li><a href="#20090204">2009/02/04 - Perl updated to 5.10.0</a>
<li><a href="#20090215">2009/02/15 - ifconfig(8) syntax change</a>
<li><a href="#20090218">2009/02/18 - pfsync(4) version number incremented</a>
<!-- 4.5 -->
d48 2
a49 2
It contains information about changes from 4.4-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.3 or earlier, or people
d53 2
a54 2
If you wish to update to 4.4-release or 4.4-stable from previous
versions, see the <a href="upgrade44.html">upgrade guide</a>.
a71 174
<p>
<a name="20080907"></a>
<h3>2008/09/07 - ifconfig(8) syntax change</h3>
Some <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
options have changed. To list supported media types, you should now use:
<pre>
    <b>ifconfig &lt;interface&gt; media</b>
</pre>
The option to scan for wireless networks was also changed, but was
<a href="#20090215">revised later</a>.

<p>
<a name="20080913"></a>
<h3>2008/09/13 - xcompmgr(1) moved from ports to xbase</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xcompmgr&amp;sektion=1">xcompmgr(1)</a>
has moved from ports to xbase. If you installed it from ports,
please remove it with pkg_delete.

<p>
<a name="20080929"></a>
<h3>2008/09/29 - update to Perl 5.10.0</h3>
Due to the changes in the Perl distribution, you will need to manually
remove the old perl obj directory before building.  e.g.
<pre>
    # rm -rf /usr/obj/gnu/usr.bin/perl
</pre>
You can then recreate the obj dir:
<pre>
    # cd /usr/src/gnu/usr.bin/perl
    # make -f Makefile.bsd-wrapper obj
</pre>

Note that because this is a major Perl update, you will need to
rebuild/reinstall any Perl XS modules.  These are modules that
include a shared object that is loaded into the running perl process.
To see a list of XS modules installed via the package subsystem,
run:
<pre>
    # cd /var/db/pkg
    # fgrep .so p5-*/+CONTENTS | sed 's/+CONTENTS.*//' | sort -u
</pre>
Updating to the latest package snapshots with "pkg_add -ui" will take
care of these updates. After you have updated, you need to uninstall
several modules which are now provided as part of Perl in base:

<pre>
    # pkg_delete p5-Archive-Tar p5-Compress-Raw-Zlib p5-Compress-Zlib \
      p5-IO-Compress-Base p5-IO-Compress-Zlib p5-IO-Zlib p5-Module-Build \
      p5-Module-CoreList p5-Module-Load p5-version p5-Digest-SHA
</pre>

<p>
<a name="20081003"></a>
<h3>2008/10/03 - sm-client.st moved</h3>
The (optional) sendmail status file for email submission has moved
from <tt>/var/spool/clientmqueue/sm-client.st</tt> to
<tt>/var/log/sm-client.st</tt> to be consistent with the location
of the <tt>/var/log/sendmail.st</tt> file.

<p>
<a name="20081102"></a>
<h3>2008/11/02 - Xserver updated to 1.5.2</h3>
<tt>RgbPath</tt> is no longer a valid keyword in the <b>Files</b>
section of the <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a>
configuration file. The corresponding entry should be removed from
existing configuration files. This directive was ignored for a couple
of releases already.
<p>
The <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=i810">i810(4)</a>
driver for intel chipset has been completely replaced by the 
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=intel">intel(4)</a>
driver. <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a>
configuration files should be updated accordingly.

<p>
<a name="20081103"></a>
<h3>2008/11/03 - update to Perl 5.10.0</h3>
Another module now installed by base Perl was found - please remove it.
<pre>
    # pkg_delete p5-Locale-Maketext-Simple
</pre>

<p>
<a name="20081105"></a>
<h3>2008/11/05 - update to Perl 5.10.0</h3>
There are a couple more modules installed by base Perl to remove.
<pre>
    # pkg_delete p5-Pod-Escapes p5-Pod-Simple
</pre>

<p>
<a name="20081106"></a>
<h3>2008/11/06 - Xserver updated to 1.5.2</h3>
Several xserver modules and drivers have been deprecated. To make sure
that <tt>X -configure</tt> doesn't try to configure the obsolete
modules, it is recommended to prune old contents of
<tt>/usr/X11R6/lib/modules</tt> before installing a new snapshot.

<p>
<a name="20081107"></a>
<h3>2008/11/07 - update to Perl 5.10.0</h3>
More modules moved to base, as above.
<pre>
    # pkg_delete p5-ExtUtils-ParseXS p5-ExtUtils-CBuilder \
      p5-Module-Pluggable p5-Time-Piece
</pre>

<p>
<a name="20081111"></a>
<h3>2008/11/11 - PIE support added to gcc 3.3.5 & csu</h3>
Support for position independent executables (PIE) has been added to
gcc 3.3.5 and csu.  To upgrade follow these steps:
<ul>
<li>Build and install gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">Build and install userland</a>
</ul>

<p>
<a name="20081116"></a>
<h3>2008/11/16 - mixerctl(1) name changes</h3>
The mixer item name <tt>headphones</tt> was shortened to <tt>hp</tt>,
and <tt>speaker</tt> was shortened to <tt>spkr</tt>.
This may require changes to mixerctl.conf(5).

<p>
<a name="20081126"></a>
<h3>2008/11/26 - btd needs new user and group</h3>
The newly added Bluetooth daemon <tt>btd</tt> drops privileges to a new user
and group _btd.
As <i>root</i>, add both the new user and its corresponding group using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:
<blockquote><pre>
# useradd -u94 -g=uid -c"Bluetooth Daemon" -d/var/empty -s/sbin/nologin _btd</b>
</pre></blockquote>

<p>
<a name="20090204"></a>
<h3>2009/02/04 - update to Perl 5.10.0</h3>
Another module moved to base, please remove it.
<pre>
    # pkg_delete p5-Module-Loaded
</pre>

<p>
<a name="20090215"></a>
<h3>2009/02/15 - ifconfig(8) syntax change</h3>
The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
option for scanning wireless networks has changed.
You should now use:
<pre>
    <b>ifconfig &lt;interface&gt; scan</b>
</pre>

<p>
<a name="20090218"></a>
<h3>2009/02/18 - pfsync(4) version number incremented</h3>
Due to protocol and implementation changes to the pfsync(4) interface, the
pfsync(4) protocol number has been incremented. Firewalls with differing
versions will be unable to synchronise state tables, and existing connections
will be terminated on failover.

<!-- cut-off point for 4.5 -->
d155 1
a155 1
<small>$OpenBSD: current.html,v 1.148 2009/04/25 08:54:09 chl Exp $</small>
@


1.148
log
@revert r1.147

/etc/magic is now included in base45.tgz, no need to extract it from etc45.tgz.

spotted by Emilio Perea <eperea walkereng com>
@
text
@d54 1
d334 7
d345 1
a345 1
<small>$OpenBSD: current.html,v 1.147 2009/04/24 21:31:51 chl Exp $</small>
@


1.147
log
@The update to file(1) requires a new /etc/magic

ok nick@@
@
text
@a53 1
<li><a href="#20090424">2009/04/24 - file(1) updated, needs new /etc/magic</a>
a332 14
<a name="20090424"></a>
<h3>2009/04/24 - file(1) updated, needs new /etc/magic</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file">file(1)</a>
has been updated to a newer version which requires a new
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=magic">magic(5)</a>
file to be installed:
<blockquote><pre>
# cd /tmp
# ftp ftp://mirror/path/to/snapshots/arch/etc45.tgz
# tar xzpf etc45.tgz ./etc/magic
# mv etc/magic /etc
</pre></blockquote>

<p>
d337 1
a337 1
<small>$OpenBSD: current.html,v 1.146 2009/04/09 20:46:05 jacekm Exp $</small>
@


1.146
log
@mention new _smtpd user and group, pointed out by henning@@
@
text
@d54 1
d334 14
d352 1
a352 1
<small>$OpenBSD: current.html,v 1.145 2009/04/07 17:09:08 sthen Exp $</small>
@


1.145
log
@typo, thanks Simon Kuhnle.
@
text
@d49 1
d263 8
d337 1
a337 1
<small>$OpenBSD: current.html,v 1.144 2009/04/07 16:18:56 sthen Exp $</small>
@


1.144
log
@fragment reassembly is now on by default; from johan@@, thanks!
@
text
@d319 1
a319 1
Since there is little to no reason not to use fragment rassembly,
d328 1
a328 1
<small>$OpenBSD: current.html,v 1.143 2009/04/06 19:08:11 jmc Exp $</small>
@


1.143
log
@fix previous;
@
text
@d52 1
d317 7
d328 1
a328 1
<small>$OpenBSD: current.html,v 1.142 2009/04/06 14:55:18 sthen Exp $</small>
@


1.142
log
@tell people about the pf.conf changes; "put it in" henning@@
@
text
@d279 1
a279 1
<a name="#20090406"></a>
d320 1
a320 1
<small>$OpenBSD: current.html,v 1.141 2009/04/01 22:19:19 sthen Exp $</small>
@


1.141
log
@replace a confusing reference to "ifconfig chan" with a link to lower
in the page where "ifconfig scan" is documented, thanks thib@@ for pointing
out & checking. while there fix a tag closure, and add a comment marking
the cut-off point for 4.5.
@
text
@d51 1
d278 36
d320 1
a320 1
<small>$OpenBSD: current.html,v 1.140 2009/03/27 14:05:49 jacekm Exp $</small>
@


1.140
log
@mention mailer.conf addition; ok gilles@@
@
text
@d48 2
a49 1
<li><a href="#20090316">2009/03/16 - makemap(8) now run through mailwrapper(8)</h3>
d88 1
a88 6
options have changed. To scan for wireless networks you should
now use:
<pre>
    <b>ifconfig &lt;interface&gt; chan</b>
</pre>
and to list supported media types, you should now use:
d92 2
d257 2
d283 1
a283 1
<small>$OpenBSD: current.html,v 1.139 2009/03/25 11:17:23 michele Exp $</small>
@


1.139
log
@Mention the behaviour change of "redistribute default" in ospfd(8) and ripd(8).

ok and input claudio@@, ok jmc@@
@
text
@d48 1
d260 11
d283 1
a283 1
<small>$OpenBSD: current.html,v 1.138 2009/03/15 18:04:40 nick Exp $</small>
@


1.138
log
@
another ifconfig change, this one wasn't in current.  Spotted by Pierre Riteau
(pierre dot riteau at gmail.com)
@
text
@d48 1
d258 7
d271 1
a271 1
<small>$OpenBSD: current.html,v 1.137 2009/02/18 03:38:59 dlg Exp $</small>
@


1.137
log
@otto pointed out that i should mention the pfsync changes here.
@
text
@d46 1
d240 10
d263 1
a263 1
<small>$OpenBSD: current.html,v 1.136 2009/02/04 08:55:37 jasper Exp $</small>
@


1.136
log
@- don't forget to pkg_delete p5-Module-Loaded, as it's part of perl 5.10 now
@
text
@d46 1
d238 8
d252 1
a252 1
<small>$OpenBSD: current.html,v 1.135 2008/11/26 00:26:25 sthen Exp $</small>
@


1.135
log
@mention the new user and group needed by btd.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2005-2008 by OpenBSD">
d45 1
d230 9
d243 1
a243 1
<small>$OpenBSD: current.html,v 1.134 2008/11/17 03:23:22 jakemsr Exp $</small>
@


1.134
log
@
mixer name changes

ok nick@@
@
text
@d44 1
d218 11
d233 1
a233 1
<small>$OpenBSD: current.html,v 1.133 2008/11/12 01:40:33 pirofti Exp $</small>
@


1.133
log
@Change 4.2 to 4.3 and 4.3 to 4.4.

okay nick@@.
@
text
@d43 1
d210 7
d221 1
a221 1
<small>$OpenBSD: current.html,v 1.132 2008/11/11 23:51:17 kurt Exp $</small>
@


1.132
log
@PIE flag day build instructions
@
text
@d52 2
a53 2
It contains information about changes from 4.3-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.2 or earlier, or people
d57 2
a58 2
If you wish to update to 4.3-release or 4.3-stable from previous
versions, see the <a href="upgrade43.html">upgrade guide</a>.
d213 1
a213 1
<small>$OpenBSD: current.html,v 1.131 2008/11/07 15:13:35 sthen Exp $</small>
@


1.131
log
@list the rest of the Perl modules that moved to base.
@
text
@d42 1
d191 18
d213 1
a213 1
<small>$OpenBSD: current.html,v 1.130 2008/11/06 21:39:52 matthieu Exp $</small>
@


1.130
log
@Recommend to remove old Xserver modules during upgrade.
@
text
@d40 2
a41 1
<li><a href="#20081106">2008/11/02 - Xserver updated to 1.5.2</a>
d174 1
a174 1
<h3>2008/11/02 - Xserver updated to 1.5.2</h3>
d181 9
d194 1
a194 1
<small>$OpenBSD: current.html,v 1.129 2008/11/06 10:00:19 sthen Exp $</small>
@


1.129
log
@tidy
@
text
@d40 1
d172 8
d184 1
a184 1
<small>$OpenBSD: current.html,v 1.128 2008/11/06 01:27:38 kevlo Exp $</small>
@


1.128
log
@Both p5-Pod-Escapes and p5-Pod-Simple were moved to base Perl,
show people how to remove it.
@
text
@a157 2
<li><a href="#20081103">2008/11/03 - Perl updated to 5.10.0</a>

d165 1
a165 3
Another module now installed by base Perl was found - please remove it.
<li><a href="#20081105">2008/11/05 - Perl updated to 5.10.0</a>

d175 1
a175 1
<small>$OpenBSD: current.html,v 1.127 2008/11/03 11:52:13 sthen Exp $</small>
@


1.127
log
@p5-Locale-Maketext-Simple was also moved to base Perl, show
people how to remove it. separate section so people notice it,
Nick agrees.
@
text
@d39 1
d158 1
d165 10
d179 1
a179 1
<small>$OpenBSD: current.html,v 1.126 2008/11/02 21:54:31 matthieu Exp $</small>
@


1.126
log
@Changes for xserver 1.5.
@
text
@d38 1
d152 10
d167 1
a167 1
<small>$OpenBSD: current.html,v 1.125 2008/10/31 16:47:44 nick Exp $</small>
@


1.125
log
@
rotate ->4.4 stuff to upgrade-old.html
@
text
@d37 1
d134 18
d156 1
a156 1
<small>$OpenBSD: current.html,v 1.124 2008/10/20 13:07:41 sthen Exp $</small>
@


1.124
log
@mention the changes in ifconfig(8) syntax to list the supported
media types for a device, or to scan wireless networks.
@
text
@a32 19
<li><a href="#20080323">2008/03/23 - cwm configuration and command line options changed</a>
<li><a href="#20080328">2008/03/28 - landisk shared libraries enabled</a>
<li><a href="#20080421">2008/04/21 - command line options for rtadvd(8) changed</a>
<li><a href="#20080508">2008/05/08 - file(1) updated, needs new /etc/magic</a>
<li><a href="#20080522">2008/05/22 - spamd(8) sync mode protocol version changed</a>
<li><a href="#20080606">2008/06/06 - httpd(8) manual moved</a>
<li><a href="#20080607">2008/06/07 - support for dhcpd.interfaces removed</a>
<li><a href="#20080609">2008/06/09 - nmeaattach(8) removed</a>
<li><a href="#20080609b">2008/06/09 - New user and group _rtadvd</a>
<li><a href="#20080610">2008/06/10 - per-address counters off by default on pf(4) tables</a>
<li><a href="#20080613">2008/06/13 - mailmode in mg(1) removed</a>
<li><a href="#20080616">2008/06/16 - pfsync(4) version number incremented</a>
<li><a href="#20080627">2008/06/27 - New user and group _ypldap</a>
<li><a href="#20080709">2008/07/09 - yacc(1) updated</a>
<li><a href="#20080710">2008/07/10 - TCP/UDP baddynamic lists, sysctl(8), named(8) and /etc/rc</a>
<li><a href="#20080711-0">2008/07/11 - openchrome(4) video driver</a>
<li><a href="#20080711-1">2008/07/11 - ati(4) video driver updated</a>
<li><a href="#20080719">2008/07/19 - softraid metadata handling rewrite</a>
<li><a href="#20080724">2008/07/24 - changes in libc and libm</a>
a70 312
<a name="20080323"></a>
<h3>2008/03/23 - cwm configuration and command line options changed</h3>
The cwm(1) window manager got a new config parser, so the configuration
needs to be changed according to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cwmrc&amp;sektion=5">cwmrc(5)</a>.
The command line option "-f" (font) and "-s" (sticky) were replaced by
config directives.
Remove these options from your .xsession, or your xdm(1) login will
fail!

<p>
<a name="20080328"></a>
<h3>2008/03/28 - landisk shared libraries enabled</h3>
To switch from static build on landisk to shared it is necessary to first
build and install gcc and ld.so before building the rest of the system:
<blockquote><pre>
# <b>cd /usr/src/gnu/usr.bin/gcc</b>
# <b>make -f Makefile.bsd-wrapper obj</b>
# <b>make -f Makefile.bsd-wrapper depend</b>
# <b>make -f Makefile.bsd-wrapper</b>
# <b>make -f Makefile.bsd-wrapper install</b>
# <b>cd /usr/src/share/mk</b>
# <b>make install</b>
# <b>cd /usr/src/libexec/ld.so</b>
# <b>make obj</b>
# <b>make depend</b>
# <b>make</b>
# <b>make install</b>
</pre></blockquote>
Then follow the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">
release(8)</a>:
directions to build the full system.

<p>
<a name="20080421"></a>
<h3>2008/04/21 - command line options for rtadvd(8) changed</h3>
The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rtadvd">rtadvd(8)</a>
IPv6 router advertisement daemon had the command line options
<tt>"-f"</tt> (foreground), <tt>"-d"</tt> (debug) and <tt>"-D"</tt>
(even more debug).
These options were merged to <tt>-d</tt> which does the same now as the
combination of the three old options and is more OpenBSD-like.

<p>
<a name="20080508"></a>
<h3>2008/05/08 - file(1) updated, needs new /etc/magic</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=file">file(1)</a>
has been updated to a newer version which requires a new
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=magic">magic(5)</a>
file to be installed:
<blockquote><pre>
# <b>cd /tmp</b>
# <b>ftp ftp://mirror/path/to/snapshots/arch/etc43.tgz</b>
# <b>tar xzpf etc43.tgz ./etc/magic</b>
# <b>mv etc/magic /etc</b>
</pre></blockquote>

<p>
<a name="20080522"></a>
<h3>2008/05/22 - spamd(8) sync mode protocol version changed</h3>
The protocol that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd">spamd(8)</a> 
uses when run in sync mode was changed to fix a number of bugs and the
protocol version was incremented.
Because of this, new versions of spamd can not sync with old versions
(they will skip packets from one another).
Therefore all instances in a spamd sync group must be upgraded at the
same time.

<p>
<a name="20080606"></a>
<h3>2008/06/06 - httpd(8) manual moved</h3>
The Apache manual for
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd">httpd(8)</a> 
has been moved out of <tt>/var/www/htdocs/manual/</tt> to
<tt>/usr/share/doc/html/httpd/</tt>.
It has also been moved from the <i>etcXX</i> set to the <i>miscXX</i>
file set.

<p>
<a name="20080607"></a>
<h3>2008/06/07 - support for dhcpd.interfaces removed</h3>
Support for <tt>/etc/dhcpd.interfaces</tt> has been removed.
The file has been deprecated in favor of the <tt>dhcpd_flags</tt>
setting in <tt>/etc/rc.conf.local</tt>.

<p>
<a name="20080609"></a>
<h3>2008/06/09 - nmeaattach(8) removed</h3>
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=nmeaattach">nmeaattach(8)</a>
command and the nmeaattach_flags option in /etc/rc.conf have been
removed in -current.
Use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldattach">
ldattach(8)</a> instead.
It has a slightly different synopsis than nmeaattach(8): <tt>nmeaattach
cuaU0</tt> becomes <tt>ldattach nmea cuaU0</tt>.

<p>
<a name="20080609b"></a>
<h3>2008/06/09 - New user and group _rtadvd</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rtadvd&amp;sektion=8">rtadvd(8)</a>
daemon now drops privileges after initialization to a new user and group _rtadvd.
As <i>root</i>, add the user and group using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:
<blockquote><pre>
<b>useradd -u92 -g=uid -c"IPv6 Router Advertisement Daemon" -d/var/empty -s/sbin/nologin _rtadvd</b>
</pre></blockquote>

<p>
<a name="20080610"></a>
<h3>2008/06/10 - per-address counters off by default on pf(4) tables</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf">pf(4)</a>
tables now require the <tt>counters</tt> option in order to enable
per-address byte and packet counters, eg:
<br>
<blockquote><tt>
table &lt;webservers&gt; counters { 192.168.33.4, 192.168.33.16/29 }
</tt></blockquote>
See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf">pf.conf(5)</a>
for details.

<p>
<a name="20080613"></a>
<h3>2008/06/13 - mailmode in mg(1) removed</h3>
Because mail-mode in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg">mg(1)</a>
was merely a buggy reimplementation of auto-fill-mode it has been
removed.
If you are using this please change your commands accordingly:<br>
<blockquote><tt>
mail-mode => auto-fill-mode<br>
mail-set-margin => set-fill-column
</tt></blockquote>
Don't forget to change your .mg file as well.

<p>
<a name="20080616"></a>
<h3>2008/06/16 - pfsync(4) version number incremented</h3>
Due to changes in the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf">pf(4)</a>
state table, the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync">pfsync(4)</a>
protocol version number has been incremented; firewalls with differing
version numbers will be unable to synchronise state tables, and existing
connections will be terminated on failover.

<a name="20080627"></a>
<h3>2008/06/27 - New user and group _ypldap</h3>
An upcoming ypldap(8) daemon needs a new user and group.
As <i>root</i>, add the user and group using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:
<blockquote><pre>
useradd -u93 -g=uid -c"YP to LDAP Daemon" -d/var/empty -s/sbin/nologin _ypldap
</pre></blockquote>

<p>
<a name="20080709"></a>
<h3>2008/07/09 - yacc(1) updated</h3>
A rebuild and install of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yacc">yacc(1)</a>
is needed before doing a make build with a clean obj dir to make sure all
yacc generated parsers get regenerated.

<p>
<a name="20080710"></a>
<h3>2008/07/10 - TCP/UDP baddynamic lists, sysctl(8), named(8) and /etc/rc</h3>
The kernel 
<em>net.inet.tcp.baddynamic</em> and <em>net.inet.udp.baddynamic</em> sysctls
and the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>
utility
have been extended to cover the full range of TCP/UDP ports. These lists 
identify source ports to never allocate dynamically so to avoid conflicts with
well-known services. The <tt>/etc/rc</tt>
script now automatically populates these lists from <tt>/etc/services</tt>
at boot time. 
<p>
The new version of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&amp;sektion=8">named(8)</a>
(9.4.2-P1) that has just been imported uses random source ports for queries and
requires this facility for robust operation.
<p>
To avoid any incompatibility, the kernel,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&amp;sektion=8">named(8)</a> and
<tt>/etc/rc</tt>
should be updated in unison (build and install kernel before "make build").
<p>
<a name="20080711-0"></a>
<h3>2008/07/11 - openchrome(4) driver for Xenocara</h3>
The <a href="http://www.openchrome.org">xf86-video-openchrome</a> driver has been added to Xenocara for via chipsets in place of the old, obsolete, version of xf86-video-via that was there before.
<br>
If you're using a VIA chipset with a configuration file, replace
<blockquote><tt>
  Driver "via"
</tt></blockquote>
with
<blockquote><tt>
  Driver "openchrome"
</tt></blockquote>
in <tt>/etc/X11/xorg.conf</tt> to use the new driver. See the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openchrome&amp;sektion=4">openchrome(4)</a>
manual page for more configuration options.

<p>
<a name="20080711-1"></a>
<h3>2008/07/11 - ati(4) video driver updated</h3>
The ati(4) driver has been updated. This update of xf86-video-ati brings about some important changes.
<br>
<p>
No more <a href="http://dri.freedesktop.org/wiki/MergedFB">MergedFB</a>:
<br>
<blockquote>
Support for MergedFB mode has been removed in favor of xrandr(1).
</blockquote>

<p>
Quirk option for Macbooks changed:
<blockquote>
Users with Macs or Macbooks that use the following quirk
<blockquote>
<pre>
Option      "iBookHacks" "on"
</pre>
</blockquote>
should read the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon&amp;sektion=4">radeon(4)</a>
man page, specifically the <tt>"MacModel"</tt> section, if there are problems.
<br>
As of this revision this quirk has been removed.
</blockquote>

<p>
<a name="20080719"></a>
<h3>2008/07/19 - softraid metadata handling rewrite</h3>
The metadata handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&amp;sektion=4">softraid(4)</a>
has been rewritten from scratch. The new code is not compatible with the old metadata format and hence users must
backup and recreate their softraid volumes. Softraid volumes made prior to this change will not assemble when
booting a kernel with this code.

<p>
<a name="20080724"></a>
<h3>2008/07/24 - changes in libc and libm</h3>
Due to the changes in libc and libm, the following steps have to
be taken before the rest of the system is built.

<p>0. Make sure you have obj.

<blockquote><pre>
# <b>cd /usr/src</b>
# <b>make obj</b>
</pre></blockquote>

<p>1. Install headers, build and install libc.

<blockquote><pre>
# <b>cd /usr/src/include</b>
# <b>make prereq</b>
# <b>make includes</b>
# <b>cd /usr/src/lib/libc</b>
# <b>make cleandir</b>
# <b>make depend</b>
# <b>make</b>
# <b>make install</b>
</pre></blockquote>

<p>2. Build and install libm.

<blockquote><pre>
# <b>cd /usr/src/lib/libm</b>
# <b>make cleandir</b>
# <b>make depend</b>
# <b>make</b>
# <b>make install</b>
</pre></blockquote>

<p>3. Build and install libiberty.

<blockquote><pre>
# <b>cd /usr/src/gnu/lib/libiberty</b>
# <b>make -f Makefile.bsd-wrapper cleandir</b>
# <b>make -f Makefile.bsd-wrapper depend</b>
# <b>make -f Makefile.bsd-wrapper</b>
# <b>make -f Makefile.bsd-wrapper install</b>
</pre></blockquote>

<p>4. Build and install gcc.

<pre>
    <b>If your platform uses gcc 2.95.3:</b>
       # <b>rm -r /usr/obj/gnu/egcs/gcc/*</b>
       # <b>cd /usr/src/gnu/egcs/gcc</b>
        <i>- or -</i>
    <b>If your platform uses gcc 3.3.5:</b>

       # <b>rm -r /usr/obj/gnu/usr.bin/gcc/*</b>
       # <b>cd /usr/src/gnu/usr.bin/gcc</b>

    <b>Common build procedure for v3.3.5 or v2.95.3</b>
    # <b>make -f Makefile.bsd-wrapper clean</b>
    # <b>make -f Makefile.bsd-wrapper obj</b>
    # <b>make -f Makefile.bsd-wrapper depend</b>
    # <b>make -f Makefile.bsd-wrapper</b>
    # <b>make -f Makefile.bsd-wrapper install</b>
</pre>

As usual, starting from a snapshot is CONSIDERABLY easier and highly
recommended.

<p>
d137 1
a137 1
<small>$OpenBSD: current.html,v 1.123 2008/10/11 20:46:17 sthen Exp $</small>
@


1.123
log
@xcompmgr moved from ports to xbase.
@
text
@d52 1
d402 14
d468 1
a468 1
<small>$OpenBSD: current.html,v 1.122 2008/10/11 20:35:05 sthen Exp $</small>
@


1.122
log
@Advise that people pkg_delete the Perl modules which moved to base
(after they've updated the rest of their packages). Looks good to kili@@.
@
text
@d52 1
d401 7
d453 1
a453 1
<small>$OpenBSD: current.html,v 1.121 2008/10/05 22:10:25 millert Exp $</small>
@


1.121
log
@Document perl and submit.cf changes
@
text
@d422 9
d445 1
a445 1
<small>$OpenBSD: current.html,v 1.120 2008/10/03 03:12:57 nick Exp $</small>
@


1.120
log
@
validation errors.
@
text
@d52 2
d400 32
d436 1
a436 1
<small>$OpenBSD: current.html,v 1.119 2008/09/05 11:21:41 nick Exp $</small>
@


1.119
log
@
Missing _ypldap user from back in June.  *grumble*
@
text
@d257 1
a257 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8">sysctl(8)</a>
d266 1
a266 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&sektion=8">named(8)</a>
d271 2
a272 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&sektion=8">sysctl(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=named&sektion=8">named(8)</a> and
d289 1
a289 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=openchrome&sektion=4">openchrome(4)</a>
d314 1
a314 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=radeon&sektion=4">radeon(4)</a>
d323 1
a323 1
The metadata handling in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4">softraid(4)</a>
a326 1
</p>
d334 1
a334 1
<p>0. Make sure you have obj.</p>
d339 1
a339 1
</blockquote>
d341 1
a341 1
<p>1. Install headers, build and install libc.</p>
d354 1
a354 1
<p>2. Build and install libm.</p>
d364 1
a364 1
<p>3. Build and install libiberty.</p>
d374 1
a374 1
<p>4. Build and install gcc.</p>
d402 1
a402 1
<small>$OpenBSD: current.html,v 1.118 2008/07/27 14:39:14 nick Exp $</small>
@


1.118
log
@
Sam Smith suggested pointing out using a snapshot is easier.  I thought,
"Eh, that's already covered at the top of the page".  Then I had to do
it, first on a not fast machine, and now on a truly glacial machine...so
yes, a reminder is in order...
@
text
@d45 1
d187 1
a187 1
<h3>2008/06/09 New user and group _rtadvd</h3>
d234 9
d403 1
a403 1
<small>$OpenBSD: current.html,v 1.117 2008/07/25 12:30:42 espie Exp $</small>
@


1.117
log
@fix build instructions: have to run make prereq to be able to build includes...
and for that, you want obj everywhere.

okay kettenis@@
@
text
@d385 3
d393 1
a393 1
<small>$OpenBSD: current.html,v 1.116 2008/07/24 17:12:09 deraadt Exp $</small>
@


1.116
log
@cleandirs are needed
@
text
@d325 7
d336 1
a338 1
# <b>make obj</b>
a348 1
# <b>make obj</b>
a358 1
# <b>make -f Makefile.bsd-wrapper obj</b>
d390 1
a390 1
<small>$OpenBSD: current.html,v 1.115 2008/07/24 17:06:03 martynas Exp $</small>
@


1.115
log
@due to the changes in libc and libm, these steps have to be taken
before the rest of the system is built
@
text
@d332 1
d343 1
d354 1
d385 1
a385 1
<small>$OpenBSD: current.html,v 1.114 2008/07/20 01:33:13 johan Exp $</small>
@


1.114
log
@
mention that softraid(4) users must backup and recreate their softraid volumes because of the recent metadata handling rewrite.

"groovy" marco@@
@
text
@d50 1
d320 58
d382 1
a382 1
<small>$OpenBSD: current.html,v 1.113 2008/07/13 00:37:56 johan Exp $</small>
@


1.113
log
@
mention the ati(4) update
ok oga@@
@
text
@d49 1
d310 9
d323 1
a323 1
<small>$OpenBSD: current.html,v 1.112 2008/07/12 13:23:34 matthieu Exp $</small>
@


1.112
log
@Mention xf86-video-openchrome.
@
text
@d47 2
a48 1
<li><a href="#20080711">2008/07/11 - openchrome(4) video driver</a>
d264 1
a264 1
<a name="20080711"></a>
d279 29
d313 1
a313 1
<small>$OpenBSD: current.html,v 1.111 2008/07/12 09:18:22 tobias Exp $</small>
@


1.111
log
@Added missing </a>.
@
text
@d47 1
d263 16
d283 1
a283 1
<small>$OpenBSD: current.html,v 1.110 2008/07/12 08:38:04 tobias Exp $</small>
@


1.110
log
@This sentence doesn't take a comma.
@
text
@d46 1
a46 1
<li><a href="#20080710">2008/07/10 - TCP/UDP baddynamic lists, sysctl(8), named(8) and /etc/rc
d266 1
a266 1
<small>$OpenBSD: current.html,v 1.109 2008/07/10 12:26:18 djm Exp $</small>
@


1.109
log
@mention net.inet.(tcp|udp).baddynamic lists, named(8), sysctl(8) and
/etc/rc changes; prodded by jsg@@
@
text
@d233 1
a233 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=yacc">yacc(1)</a>,
d266 1
a266 1
<small>$OpenBSD: current.html,v 1.108 2008/07/09 10:53:21 nick Exp $</small>
@


1.108
log
@
add TOC entry
@
text
@d46 1
a236 1

d238 23
a260 3
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
</font>
d266 1
a266 1
<small>$OpenBSD: current.html,v 1.107 2008/07/09 05:49:53 otto Exp $</small>
@


1.107
log
@add advise te rebuild yacc before make build
@
text
@d45 1
d246 1
a246 1
<small>$OpenBSD: current.html,v 1.106 2008/06/21 14:29:53 nick Exp $</small>
@


1.106
log
@
reformatting.  Reasonable line lengths, new sentence, new line, other
misc. formatting improvements.
@
text
@d228 9
d245 1
a245 1
<small>$OpenBSD: current.html,v 1.105 2008/06/21 14:05:33 nick Exp $</small>
@


1.105
log
@
back on 6/9, the new user _rtadvd was added, but not included here.
Diff from Xavier Venient (xavier at toutafon dot org).  Thanks!
@
text
@d81 2
a82 2
The cwm(1) window manager got a new config parser, so the configuration needs
to be changed according to
d84 4
a87 2
The command line option "-f" (font) and "-s" (sticky) were replaced by config directives.
Remove these options from your .xsession, or your xdm(1) login will fail!
d95 12
a106 12
# cd /usr/src/gnu/usr.bin/gcc
# make -f Makefile.bsd-wrapper obj
# make -f Makefile.bsd-wrapper depend
# make -f Makefile.bsd-wrapper 
# make -f Makefile.bsd-wrapper install
# cd /usr/src/share/mk
# make install
# cd /usr/src/libexec/ld.so
# make obj
# make depend
# make 
# make install
d115 1
a115 1
<h3>2008/04/21 - command line options for rtadvd changed</h3>
d119 3
a121 3
(even more debug). These options were merged to <tt>-d</tt> which does the
same now as the combination of the three old options and is more
OpenBSD-like.
d131 4
a134 4
# cd /tmp
# ftp ftp://mirror/path/to/snapshots/arch/etc43.tgz
# tar xzpf etc43.tgz ./etc/magic
# mv etc/magic /etc
d141 6
a146 4
uses when run in sync mode was changed to fix a number of bugs and the protocol version 
was incremented. Because of this, new versions of spamd can not sync with old versions 
(they will skip packets from one another).  Therefore all instances in a spamd sync group 
must be upgraded at the same time.
d151 6
a156 3
The Apache manual for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd">httpd(8)</a> 
has been moved out of <tt>/var/www/htdocs/manual/</tt> to <tt>/usr/share/doc/html/httpd/</tt>.
It has also been moved from the <i>etcXX</i> set to the <i>miscXX</i> file set.
d161 3
a163 2
Support for <tt>/etc/dhcpd.interfaces</tt> has been removed.  The file has been deprecated in 
favor of the <tt>dhcpd_flags</tt> setting in <tt>/etc/rc.conf.local</tt>.
d170 3
a172 2
command and the nmeaattach_flags option in /etc/rc.conf have been removed
in -current. Use
d174 3
a176 2
ldattach(8)</a> instead. It has a slightly different synopsis than
nmeaattach(8): <tt>nmeaattach cuaU0</tt> becomes <tt>ldattach nmea cuaU0</tt>.
d192 4
a195 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf">pf(4)</a> tables now require the <tt>counters</tt> option in order to enable per-address byte and packet counters, eg: <br>
d199 2
a200 1
See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf">pf.conf(5)</a> for details.
d205 5
a209 2
Because mail-mode in <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mg">mg(1)</a> was merely a buggy reimplementation of auto-fill-mode
it has been removed. If you are using this please change your commands accordingly:<br>
d219 7
a225 1
Due to changes in the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf">pf(4)</a> state table, the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync">pfsync(4)</a> protocol version number has been incremented; firewalls with differing version numbers will be unable to synchronise state tables, and existing connections will be terminated on failover.
d236 1
a236 1
<small>$OpenBSD: current.html,v 1.104 2008/06/17 16:48:18 tobias Exp $</small>
@


1.104
log
@spacing and typos

ok nick
@
text
@d35 1
a35 1
<li><a href="#20080421">2008/04/21 - command line options for rtadvd changed</a>
d41 1
d169 11
d213 1
a213 1
<small>$OpenBSD: current.html,v 1.103 2008/06/17 05:56:20 mcbride Exp $</small>
@


1.103
log
@Mention optional pf table counters and pfsync version crank.
@
text
@d115 2
a116 2
<tt>"-f"</tt>(foreground), <tt>"-d"</tt>(debug) and <tt>"-D"</tt>
(even more debug). This options were merged to <tt>-d</tt> which does the
d118 1
a118 1
OpenBSD like.
d139 1
a139 1
was incremented. Because of this new versions of spamd can not sync with old versions 
d201 1
a201 1
<small>$OpenBSD: current.html,v 1.102 2008/06/13 22:36:27 johan Exp $</small>
@


1.102
log
@
mention removal of mail-mode in mg
ok kjell
@
text
@d41 1
d43 1
d168 9
d188 5
d201 1
a201 1
<small>$OpenBSD: current.html,v 1.101 2008/06/10 03:16:19 sthen Exp $</small>
@


1.101
log
@mention nmeaattach removal, ok mbalmer
@
text
@d41 1
d166 11
d185 1
a185 1
<small>$OpenBSD: current.html,v 1.100 2008/06/08 20:11:15 nick Exp $</small>
@


1.100
log
@
proper target for 20080607
@
text
@d40 1
d154 11
d173 1
a173 1
<small>$OpenBSD: current.html,v 1.99 2008/06/08 18:18:03 jdixon Exp $</small>
@


1.99
log
@Entries for the Apache manual and dhcpd.interfaces changes.  Also minor cleanups.
@
text
@d147 1
a147 1
<a name="20080522"></a>
d161 1
a161 1
<small>$OpenBSD: current.html,v 1.98 2008/06/01 06:04:08 brad Exp $</small>
@


1.98
log
@Fix capitalization for IPv6.
@
text
@d38 2
d133 18
a150 4
The protocol that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd">spamd(8)</a> uses when run in sync mode was changed to fix a number
of bugs and the protocol version number was incremented. Because of this new versions
of spamd can not sync with old versions (they will skip packets from one another).
Therefore all instances in a spamd sync group must be upgraded at the same time.
d161 1
a161 1
<small>$OpenBSD: current.html,v 1.97 2008/05/28 22:53:31 sthen Exp $</small>
@


1.97
log
@The update to file(1) requires a new /etc/magic, or there will be
problems, especially building ports (many configure scripts use file
and are easily confused).

Discussed with ian, chl, jmc, and/ok nick.
@
text
@d108 1
a108 1
ipv6 router advertisement daemon had the command line options
d145 1
a145 1
<small>$OpenBSD: current.html,v 1.96 2008/05/23 01:42:39 johan Exp $</small>
@


1.96
log
@
mention the spamd sync protocol changes
"Sounds good" deraadt
@
text
@d36 1
d115 14
d145 1
a145 1
<small>$OpenBSD: current.html,v 1.95 2008/05/15 00:07:15 nick Exp $</small>
@


1.95
log
@
4.1 -> 4.2.  From Darrin Chandler (dwchandler at stilyagin dot com)
Thanks!
@
text
@d36 1
d114 8
d130 1
a130 1
<small>$OpenBSD: current.html,v 1.94 2008/04/30 21:51:36 nick Exp $</small>
@


1.94
log
@
move 4.2->4.3 stuff to upgrade-old.html
@
text
@d46 1
a46 1
and should NOT be used by anyone upgrading from 4.1 or earlier, or people
d121 1
a121 1
<small>$OpenBSD: current.html,v 1.93 2008/04/21 20:49:36 rainer Exp $</small>
@


1.93
log
@mention the changes of command line options of rtadvd(8)

ok fkr@@
@
text
@a32 10
<li><a href="#20070903">2007/09/03 - _cxa_atexit support and sys/net headers flag day</a>
<li><a href="#20071008">2007/10/08 - new user for ospf6d</a>
<li><a href="#20071020">2007/10/20 - libexpat moved to base</a>
<li><a href="#20071030">2007/10/30 - httpd.conf changes for module configuration</a>
<li><a href="#20071125">2007/11/25 - config(8) flag day</a>
<li><a href="#20071128">2007/11/28 - AGP updates</a>
<li><a href="#20071207">2007/12/07 - _hoststated user gets renamed to _relayd</a>
<li><a href="#20080131">2008/01/31 - new user for snmpd</a>
<li><a href="#20080205">2008/02/05 - carp(4) flag day</a>
<li><a href="#20080303">2008/03/03 - default xenocara location changed</a>
d45 1
a45 1
It contains information about changes from 4.2-release to <i>-current</i>,
d50 2
a51 2
If you wish to update to 4.2-release or 4.2-stable from previous
versions, see the <a href="upgrade42.html">upgrade guide</a>.
a69 161
<a name="20070903"></a>
<h3>2007/09/03 - _cxa_atexit support and sys/net headers flag day</h3>
<p>
Support for _cxa_atexit has been added to csu, libc, gcc and libstdc++ as well as changes to sys/net headers require special handling.
To upgrade follow these steps:
<ul>
<li><a href="faq5.html#BldKernel">Build and install a new kernel</a>
<li>Reboot
<li>Build and install csu:
<pre>
     # cd /usr/src/lib/csu
     # make obj && make depend && make && make install && make clean
</pre>
<li>Build and install gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">Build and install userland</a>
</ul>

<a name="20071020"></a>
<h3>2007/10/20 - libexpat moved to base</h3>
<p>
libexpat has been moved from xenocara (xbase) to src (base);
if you are using binary snapshots and packages, things will just
update as they should, once new snapshots are available.
<p>
If you are building software from source, it is vital that
you clean up your system:
<pre>
	# mv /usr/X11R6/lib/libexpat.so.* /usr/lib
	# rm /usr/X11R6/lib/libexpat*
	# rm /usr/X11R6/include/expat*
</pre>

<a name="20071008"></a>
<h3>2007/10/08 - new user for ospf6d</h3>

<i>A ospf6d daemon has been imported</i> in order to use this daemon, a new
user and group are required.

As <i>root</i>, add the following user and group, using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
# useradd -u90 -g=uid -c"OSPF6 Daemon" -d/var/empty -s/sbin/nologin _ospf6d
</pre></blockquote>

This step will add both the new user and its corresponding group.
Your environment may allow you to copy/paste those commands.

<a name="20071030"></a>
<h3>2007/10/30 - httpd.conf changes for module configuration</h3>
<p>
Packages for <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd">httpd(8)</a>
modules now install configuration files in <tt>/var/www/conf/modules.samples</tt>
and direct the user to create symbolic links in <tt>/var/www/conf/modules</tt>.
Add the following lines to <tt>/var/www/conf/httpd.conf</tt> after the
<tt>LoadModule</tt> directives (towards the end of section 1):
<pre>
	#
	# Include extra module configuration files
	#
	Include /var/www/conf/modules/*.conf
</pre>

<a name="20071125"></a>
<h3>2007/11/25 - config(8) flag day</h3>
<p>
Extended capabilities require
<a href=http://www.openbsd.org/cgi-bin/man.cgi?query=config>config(8)</a> to
be rebuilt on your system:
<pre>
	# cd /usr/src/usr.sbin/config
	# make clean
	# make obj
	# make depend
	# make
	# make install
</pre>
Then <a href="faq5.html#BldKernel">build and install a new kernel</a> as usual.

<a name="20071128"></a>
<h3>2007/11/28 - new AGP driver</h3>
<p>
The new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=agp">agp(4)</a>
driver requires an update to the X server after installing
a new kernel if your machine requires AGP support for X or XVideo.
<p>
After installing a new kernel, install new kernel headers, rebuild the X server
(or install a new X snapshot) and make sure <tt>/dev/agp0</tt> is created.
<pre>
	# cd /usr/src/include
	# make includes
	# cd /usr/src/xenocara/xserver
	# make -f Makefile.bsd-wrapper build
	# cd /usr/src/etc/etc.`uname -m`
	# install -c MAKEDEV /dev
	# cd /dev
	# ./MAKEDEV agp0
</pre>

<a name="20071207"></a>
<h3>2007/12/07 - _hoststated user gets renamed to _relayd</h3>
The hoststated(8) daemon has been renamed to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd&amp;sektion=8">relayd(8)</a>,
so the user and group need to be changed accordingly.

<p>
Use
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>,
edit the password files and your favorite editor to edit the
<tt>/etc/group</tt> file, changing "<tt>_hoststated</tt>" to
"<tt>_relayd</tt>" in both.
Leave the rest of the line alone in each case.

<a name="20080131"></a>
<h3>2008/01/31 - new user for snmpd</h3>

<i>A SNMP daemon has been imported</i> in order to use this daemon, a new
user and group are required.

As <i>root</i>, add the following user and group, using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
# useradd -u91 -g=uid -c"SNMP Daemon" -d/var/empty -s/sbin/nologin _snmpd
</pre></blockquote>

This step will add both the new user and its corresponding group.
Your environment may allow you to copy/paste those commands.

<a name="20080205"></a>
<h3>2008/02/05 - carp(4) flag day</h3>
carp(4) has been changed to make it easier to configure.
If you are running carp with ARP or IP balancing your configuration needs to be changed accordingly:
<ul>
<li> Multiple carp(4) interfaces sharing an IP have been replaced with the <tt>carpnodes</tt> option.
<li> The <tt>net.inet.carp.arpbalance</tt> sysctl has been replaced with balancing mode <tt>arp</tt>.
<li> The <tt>LINK0,1,2</tt> flags used for IP balancing have been replaced with the balancing modes <tt>ip</tt>, <tt>ip-stealth</tt> and <tt>ip-unicast</tt>. 
</ul>

<a name="20080303"></a>
<h3>2008/03/03 - default xenocara tree location changed</h3>
The default location of the xenocara source tree is now <tt>/usr/xenocara</tt>.
This is important for people who <a href="faq5.html#Xbld">build X
from source</a>.
Just move your xenocara tree:

<blockquote><pre>
# mv /usr/src/xenocara /usr
</pre></blockquote>

and update it to -current.

<p>
d121 1
a121 1
<small>$OpenBSD: current.html,v 1.92 2008/04/15 18:55:40 simon Exp $</small>
@


1.92
log
@add the cwm config and command line changes

notice, wording help and ok mpf@@
@
text
@d45 1
d274 10
d292 1
a292 1
<small>$OpenBSD: current.html,v 1.91 2008/03/30 22:34:46 maja Exp $</small>
@


1.91
log
@This will work. -moj
@
text
@d43 1
d240 9
d281 1
a281 1
<small>$OpenBSD: current.html,v 1.90 2008/03/30 14:22:57 drahn Exp $</small>
@


1.90
log
@As maja points out ld.so must be installed before the full build.
@
text
@d249 2
d252 4
a255 4
# make -f Makefile.bsd-wrapper obj
# make -f Makefile.bsd-wrapper depend
# make -f Makefile.bsd-wrapper 
# make -f Makefile.bsd-wrapper install
d271 1
a271 1
<small>$OpenBSD: current.html,v 1.89 2008/03/28 17:47:09 drahn Exp $</small>
@


1.89
log
@Some hints on how to update landisk from static to shared build.
@
text
@d241 2
a242 2
To switch from static build on landisk to shared it is necessary to
first build and install gcc before building the rest of the system:
d244 10
a253 5
cd /usr/src/gnu/usr.bin/gcc
make -f Makefile.bsd-wrapper obj
make -f Makefile.bsd-wrapper depend
make -f Makefile.bsd-wrapper 
make -f Makefile.bsd-wrapper install
a254 2
Optionally src/libexec/ld.so can  be built and installed as above, but
this should not be necessary.
d269 1
a269 1
<small>$OpenBSD: current.html,v 1.88 2008/03/09 15:11:21 steven Exp $</small>
@


1.88
log
@mention new default location for xenocara tree in /usr/xenocara

ok nick@@
@
text
@d43 1
d239 19
d266 1
a266 1
<small>$OpenBSD: current.html,v 1.87 2008/03/01 11:31:08 steven Exp $</small>
@


1.87
log
@bump copyright year
@
text
@d42 1
d224 13
d246 1
a246 1
<small>$OpenBSD: current.html,v 1.86 2008/02/27 15:14:45 sthen Exp $</small>
@


1.86
log
@talk about the httpd.conf "include /var/www/conf/modules/*.conf" change

faq/current.html needs to be kept up to date with this sort of thing so it
doesn't get missed from upgradeXX.html

discussed with nick
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2007 by OpenBSD">
d232 1
a232 1
<small>$OpenBSD: current.html,v 1.85 2008/02/24 19:12:16 nick Exp $</small>
@


1.85
log
@
Come on, devs...please do your part to keep this file up-to-date.
 '
Pierre Riteau (pierre dot riteau at gmail dot com) sent me the _snmpd user
update that should have been done by the person who added the user. Thanks!
(and thanks for the reminder because it was sitting in my inbox for way
too long).
@
text
@d36 1
d132 15
d232 1
a232 1
<small>$OpenBSD: current.html,v 1.84 2008/02/10 17:15:35 mpf Exp $</small>
@


1.84
log
@Mention carp(4) load balancing changes.
Diff from Johan Mson Lindman.
@
text
@d39 1
d181 16
d216 1
a216 1
<small>$OpenBSD: current.html,v 1.83 2007/12/28 01:03:00 nick Exp $</small>
@


1.83
log
@
and another forgotten user change, _hoststated -> _relayd from 2007/12/07.
@
text
@d39 1
d180 10
d199 1
a199 1
<small>$OpenBSD: current.html,v 1.82 2007/12/28 00:47:30 nick Exp $</small>
@


1.82
log
@
when you add a user, please update this file.  _ospfd6, from 2007/10/08.
@
text
@d38 1
d165 14
d188 1
a188 1
<small>$OpenBSD: current.html,v 1.81 2007/12/04 21:56:11 matthieu Exp $</small>
@


1.81
log
@new agp(4) needs new X.
@
text
@d34 1
d112 16
d173 1
a173 1
<small>$OpenBSD: current.html,v 1.80 2007/11/26 16:30:11 martin Exp $</small>
@


1.80
log
@config(8) changes require a rebuild before attempting to configure a new
kernel
@
text
@d36 1
d127 20
d156 1
a156 1
<small>$OpenBSD: current.html,v 1.79 2007/11/04 15:21:30 aanriot Exp $</small>
@


1.79
log
@also remove expat headers from /usr/X11R6/include/ during the cleanup.

ok matthieu@@
@
text
@d35 1
d110 16
d135 1
a135 1
<small>$OpenBSD: current.html,v 1.78 2007/11/01 03:27:09 nick Exp $</small>
@


1.78
log
@
rotate 4.1->4.2 stuff out of current.html into upgrade-old.html.
@
text
@d106 1
d118 1
a118 1
<small>$OpenBSD: current.html,v 1.77 2007/10/27 11:48:32 nick Exp $</small>
@


1.77
log
@
need to disable apm(4) if you enable acpi(4) if you have both.
Written and carried through by Pierre Riteau, who gets a prize for
persistenece.
Yes, putting this in a document that is getting flushed in a few
days is of minimal value, we need to find someplace else to put
this info.
@
text
@a32 10
<li><a href="#20070326">2007/03/26 - Xenocara replaces XF4 in <i>-current</i></a>
<li><a href="#20070327">2007/03/27 - updated ahci(4) may cause device
name change for SATA disks</a>
<li><a href="#20070331">2007/03/31 - bgpd filter language change</a>
<li><a href="#20070510">2007/05/10 - packages are using libexpat shipped with xenocara</a>
<li><a href="#20070529">2007/05/29 - [i386] apm(4) takes precedence over acpi(4)</a>
<li><a href="#20070710">2007/07/10 - updated wpi(4) requires new firmware</a>
<li><a href="#20070726">2007/07/26 - changes in the way sudo(8) passes environment</a>
<li><a href="#20070801">2007/08/01 - [alpha] some de(4) NICs will become dc(4)</a>
<!-- Preserve additions below when reset to 4.2 -->
d44 2
a45 2
It contains information about changes from 4.1-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 4.0 or earlier, or people
d49 2
a50 2
If you wish to update to 4.1-release or 4.1-stable from previous
versions, see the <a href="upgrade41.html">upgrade guide</a>.
a68 177
<a name="20070326"></a>
<h3>2007/03/26 - Xenocara replaces XF4 in <i>-current</i></h3>
The <a href="http://www.xenocara.org/">xenocara</a> tree is to be used
now instead of the XF4 tree to build X for OpenBSD.
More details can be found on
<a href="http://undeadly.org/cgi?action=article&sid=20070328153001">undeadly.org</a>.
<p>
If you still have <tt>Option "xkbrules" "xfree86"</tt> in your
<tt>/etc/X11/xorg.conf</tt> configuration file, you now need to change
it to <tt>Option "xkbrules" "xorg"</tt>.
<p>
If you really wish to build Xenocara from source (don't, use snapshots!)
<a href="http://www.openbsd.org/cgi-bin/cvsweb.cgi/xenocara/README?rev=HEAD&content-type=text/x-cvsweb-markup"
>xenocara/README</a> and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">release(8)</a>


<a name="20070327"></a>
<h3>2007/03/27 - updated ahci(4) may cause device name change for SATA disks</h3>
<p>
Recent changes to the <tt>ahci(4)</tt> subsystem can cause SATA disks
which were formerly recognized as wd* (e.g <tt>wd0</tt>) devices to turn
up as sd* (e.g <tt>sd0</tt>) devices instead.

<p>
This is a potential problem if you upgrade from an earlier snapshot.
Watch the <tt>dmesg</tt> output at boot.
A drive which turned up earlier as:

<p>
<blockquote><tt>
pciide1 at pci0 dev 31 function 2 "Intel 82801GBM AHCI SATA" rev 0x02: DMA, channel 0 wired to native-PCI, channel 1 wired to native-PCI<br>
pciide1: using apic 2 int 11 (irq 11) for native-PCI interrupt<br>
wd0 at pciide1 channel 0 drive 0: &lt;FUJITSU MHV2080BH&gt;<br>
wd0: 16-sector PIO, LBA48, 76319MB, 156301488 sectors<br>
wd0(pciide1:0:0): using PIO mode 4, Ultra-DMA mode 5
</tt></blockquote>

now instead turns up as

<p>
<blockquote><tt>
ahci0 at pci0 dev 31 function 2 "Intel 82801GBM AHCI SATA" rev 0x02: AHCI 1.1: apic 2 int 16 (irq 11)<br>
scsibus1 at ahci0: 32 targets<br>
sd0 at scsibus1 targ 0 lun 0: &lt;ATA, FUJITSU MHV2080B, 0084&gt; SCSI2 0/direct fixed<br>
sd0: 76319MB, 76319 cyl, 64 head, 32 sec, 512 bytes/sec, 156301488 sec total
</tt></blockquote>

<p>
The recommended workaround is to edit your <tt>/etc/fstab</tt> file,
changing the relevant <tt>/dev/wd</tt> entries to refer to
<tt>/dev/sd</tt> devices and partitions instead.

<p>
The other option is to disable <tt>ahci</tt> using <tt>config(8)</tt> or
<tt>boot -c</tt>.

<p>
Refer to the manpages for
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&amp;sektion=4">ahci(4)</a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>
for all the details.

<a name="20070331"></a>
<h3>2007/03/31 - bgpd filter language change</h3>
<p>
bgpd filters using only <tt>prefixlen</tt> as filter parameter need to include
now a address family identifier like <tt>inet</tt> or <tt>inet6</tt>:

<p>
<blockquote><tt>
allow from any inet prefixlen 8 - 24<br>
deny from any inet6 prefixlen &gt; 64<br>
</tt></blockquote>

<a name="20070510"></a>
<h3>2007/05/10 - packages are using libexpat shipped with xenocara</h3>
The libexpat port has been removed.
Packages now use the libexpat which is shipped with xenocara instead.

<p>
Many packages depend on libexpat through other dependencies. For instance,
the many packages which use gettext, also depend on libexpat.

<p>
This means that before you can install new packages or upgrade your system
to a more recent snapshot of packages, you most likely need to have
<tt>xbase42.tgz</tt> installed, even if the packages you are installing
don't have a graphical operation.
Refer to the
<a href="faq4.html#AddFileSet">FAQ</a> about adding
<tt>xbase42.tgz</tt> to an installed system.
If you don't do this and try to install a package that requires libexpat,
pkg_add(1) will give an error message.

<p>
If this is the first time any X file sets are installed on your system,
the shared library cache must be updated after the installation using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ldconfig&amp;sektion=8"
>ldconfig(8)</a>.
To add all the X libraries to the cache:

<blockquote><pre>
# <b>ldconfig -m /usr/X11R6/lib</b>
</pre></blockquote>

Alternatively, you can just reboot your system, and this will happen
automatically.

<p>
Finally, after upgrading all your packages to a more recent snapshot,
clean up by removing the old expat package from your system:

<blockquote><pre>
# <b>pkg_delete expat</b>
</pre></blockquote>


<a name="20070529"></a>
<h3>2007/05/29 - [i386] apm(4) takes precedence over acpi(4)</h3>
<p>
The device detection on i386 has been modified to make
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apm&amp;sektion=4&amp;arch=i386">
apm(4)</a> take precedence over
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=acpi&amp;sektion=4">
acpi(4)</a>.
It means that if your hardware has both apm and acpi devices, only apm will
attach.
If for some reason you prefer to use acpi, disable <tt>apm</tt> on your
acpi-enabled kernel using <tt>config(8)</tt> or <tt>boot -c</tt>.


<a name="20070710"></a>
<h3>2007/07/10 - updated wpi(4) requires new firmware</h3>
<p>
Recent changes to the <tt>wpi(4)</tt> driver require that the <tt>wpi-firmware</tt> package be updated to revision 2.14.4.

<p>
As usual, you can find a prepackaged version of the firmware at:<br>
<a href="http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-2.14.4.tgz">http://damien.bergamini.free.fr/packages/openbsd/wpi-firmware-2.14.4.tgz</a>

<a name="20070726"></a>
<h3>2007/07/10 - changes in the way sudo(8) passes environment</h3>

For
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8#SECURITY+NOTES"
>security reasons</a>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo(8)</a>
will now reset the environment to a small default set
with only certain variables preserved from the previous environment.

<p>
In order for many things to continue to work as expected, add the following
line to your <tt>/etc/sudoers</tt> file using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=visudo&amp;sektion=8">visudo(8)</a>:
<blockquote><pre>
# Defaults specification
Defaults env_keep +="DESTDIR FETCH_CMD FLAVOR FTPMODE MAKE MULTI_PACKAGES OKAY_FILES PKG_DBDIR PKG_DESTDIR PKG_CACHE PKG_PATH PKG_TMPDIR PORTSDIR RELEASEDIR SUBPACKAGE"
</pre></blockquote>

<a name="20070801"></a>
<h3>2007/08/01 - [alpha] some de(4) NICs will become dc(4)</h3>
On the <a href="../alpha.html">alpha</a> platform, some NICs which had
been supported by the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=de&amp;sektion=4">de(4)</a>
driver will now be supported by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dc&amp;sektion=4">dc(4)</a>.

<p>
IF your NIC is one of these, you will need to alter at least your <tt>/etc/hostname.deX</tt>
(hint: hard link) and your pf.conf files as appropriate.

<p>
Again, this is <i>only</i> on the Alpha platform.

<!-- Preserve additions below when reset to 4.2 -->
d117 1
a117 1
<small>$OpenBSD: current.html,v 1.76 2007/10/22 21:51:02 sthen Exp $</small>
@


1.76
log
@talk about libexpat move to base

ok nick@@
@
text
@d38 1
d198 14
d304 1
a304 1
<small>$OpenBSD: current.html,v 1.75 2007/09/04 22:14:52 steven Exp $</small>
@


1.75
log
@make hrefs relative
@
text
@d43 1
d266 14
d289 1
a289 1
<small>$OpenBSD: current.html,v 1.74 2007/09/04 21:44:59 kurt Exp $</small>
@


1.74
log
@add instructions for yesterday's flag day. okay claudio@@ millert@@
@
text
@d246 1
a246 1
<li><a href="http://www.openbsd.org/faq/faq5.html#BldKernel">Build and install a new kernel</a>
d262 1
a262 1
<li><a href="http://www.openbsd.org/faq/faq5.html#BldUserland">Build and install userland</a>
d274 1
a274 1
<small>$OpenBSD: current.html,v 1.73 2007/08/20 06:15:51 steven Exp $</small>
@


1.73
log
@zap duplicate article
@
text
@d40 3
a42 1
<li><a href="#20070801">2007/08/01 - [alpha] some de(4) NICs will become dc(4)
d239 26
d274 1
a274 1
<small>$OpenBSD: current.html,v 1.72 2007/08/16 17:27:13 steven Exp $</small>
@


1.72
log
@some more explanation about libexpat removal and addition of xbase.

absolutely ok nick@@
@
text
@d167 1
a167 1
<tt>xbase42.tgz</tt> to a an installed system.
d246 1
a246 1
<small>$OpenBSD: current.html,v 1.71 2007/08/15 23:49:28 nick Exp $</small>
@


1.71
log
@
ajacoutot@@ spotted that somehow, I managed to pull in the env_keep line
from a previous version of /etc/sudoers.  Good thing I drive more
accurately than I click.
While there, add link to #SECURITY+NOTES in sudo(8) and improve wording.
@
text
@d37 1
a37 1
<li><a href="#20070510">2007/05/10 - ports using the libexpat shipped with xenocara</a>
d152 3
a154 3
<h3>2007/05/10 - ports are using the libexpat shipped with xenocara</h3>
The textproc/libexpat port has been removed from ports dependencies,
now all ports use the libexpat that's shipped with xenocara.
d157 8
a164 3
This means that for many ports to work you need to have
<tt>xbase42.tgz</tt> installed, even if they don't obviously have a
graphical operation.
d166 4
a169 2
<a href="file://localhost/usr/www/faq/faq4.html#AddFileSet">FAQ</a> on
how to add <tt>xbase42.tgz</tt> to a an installed system.
d172 12
a183 2
Ports affected by this include (but is not limited to!) bash, mutt and
all ports with devel/gettext as a dependency.
d186 6
a191 1
This affects package installation as well as ports builds.
d246 1
a246 1
<small>$OpenBSD: current.html,v 1.70 2007/08/15 20:18:24 nick Exp $</small>
@


1.70
log
@
kill another pesky </li>
@
text
@d184 3
a186 1
For security reasons,
d188 1
a188 1
will by default reset the environment to a small default set
d197 1
a197 1
Defaults env_keep +="DESTDIR FETCH_CMD FLAVOR FTPMODE MULTI_PACKAGES OKAY_FILES PKG_DBDIR PKG_DESTDIR PKG_CACHE PKG_PATH PKG_TMPDIR RELEASEDIR SUBPACKAGE"
d224 1
a224 1
<small>$OpenBSD: current.html,v 1.69 2007/08/15 20:01:11 nick Exp $</small>
@


1.69
log
@
another little addition that will bite people running -current.
Devs: PLEASE keep this file up-to-date.  This provides a big chunk of
the content that goes into upgrade42.html.  Don't make me or users
chase you down for this.
@
text
@d38 1
a38 1
<li><a href="#20070710">2007/07/10 - updated wpi(4) requires new firmware</a></li>
d222 1
a222 1
<small>$OpenBSD: current.html,v 1.68 2007/08/15 19:46:33 nick Exp $</small>
@


1.68
log
@
hey..did everyone forgot about this file??
+2007/05/10 - ports are using the libexpat shipped with xenocara
+2007/07/10 - changes in the way sudo(8) passes environment
from from Tilo Stritzky (.stritzky at teles dot de), with a bit of
alteration from me.
@
text
@d37 1
a37 1
<li><a href="#20070510">2007/05/10 - ports using the libexpat shipped with xenocara</a></li>
d39 2
a40 1
<li><a href="#20070726">2007/07/26 - changes in the way sudo(8) passes environment</a></li>
d198 15
d222 1
a222 1
<small>$OpenBSD: current.html,v 1.67 2007/07/10 20:42:24 damien Exp $</small>
@


1.67
log
@document that an update of the wpi-firmware package is required.

reminded by nick@@
@
text
@d37 1
d39 1
d150 21
d180 16
d206 1
a206 1
<small>$OpenBSD: current.html,v 1.66 2007/05/01 16:30:13 nick Exp $</small>
@


1.66
log
@
move 4.0 stuff out of current.html into upgrade-old.html
@
text
@d37 1
d148 10
d167 1
a167 1
<small>$OpenBSD: current.html,v 1.65 2007/04/07 18:03:08 matthieu Exp $</small>
@


1.65
log
@Note that xkbrules should now be xorg. xfree86 is gone. ok sturm@@.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2006 by OpenBSD">
a32 11
<li><a href="#20060926">2006/09/26 - Switch to gcc3 (alpha)</a>
<li><a href="#20061006">2006/10/06 - 'flags S/SA keep state' implicit in pf.conf(5)</a>
<li><a href="#20061011">2006/10/11 - disklabel not in FreeBSD or NetBSD partitions</a>
<li><a href="#20061012">2006/10/12 - don't boot from NetBSD partitions</a>
<li><a href="#20061029">2006/10/29 - new user for ripd(8)</a>
<li><a href="#20061227">2006/12/27 - ARM (zaurus/armish) Flag day</a>
<li><a href="#20070131">2007/01/31 - new user for hoststated(8)</a>
<li><a href="#20070202">2007/02/02 - new way to enable/disable system
accounting on boot</a>
<li><a href="#20070226">2007/02/26 - spamd: greylisting on by
default; config files moved to /etc/mail</a>
d46 2
a47 2
It contains information about changes from 4.0-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 3.9 or earlier, or people
d51 2
a52 2
If you wish to update to 4.0-release or 4.0-stable from previous
versions, see the <a href="upgrade40.html">upgrade guide</a>.
a70 134


<a name="20060926"></a>
<h3>2006/09/26 - Switch to gcc3 (alpha)</h3>
OpenBSD/alpha has converted to gcc3.
To upgrade,
<pre>
    # rm -rf /usr/include/g++
    # cp /usr/src/share/mk/bsd.own.mk /usr/share/mk/
</pre>
Now, <a href="faq5.html#NewCompiler">build gcc3</a>, (using the gcc3
directory) then build new ld.so:
<pre>
    cd /usr/src/libexec/ld.so
    make clean
    make obj
    make depend
    make
    make install
</pre>

Now, build the kernel and system as <a href="faq5.html#Bld">usual</a>.
<p>

<a name="20061006"></a>
<h3>2006/10/06 - 'flags S/SA keep state' implicit in pf.conf(5)</h3>
<i>flags S/SA keep state</i> is now the default for pass rules in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5">pf.conf(5)</a>,
and new <i>no state</i> and <i>flags any</i> options have been added to
override these defaults.  Current rulesets will continue to load, but the
behaviour may be slightly changed as these defaults are more restrictive.
Rulesets with stateless filtering (<i>no state</i>) or a requirement to
create states on intermediate packets (<i>flags any</i>) should be updated
to explicitly request the desired behaviour.
<p>
In particular care should be taken with the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=enc&amp;sektion=4">enc0</a>
interface, as floating states are a potential problem for filtering IPsec
traffic: states need to be interface bound, to avoid permitting unencrypted
traffic should
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=isakmpd&amp;sektion=8">isakmpd(8)</a>
exit. Therefore all rules on the enc0 interface should explicitly set
<i>keep state (if-bound)</i>.
<p>

<a name="20061011"></a>
<h3>2006/10/11 - disklabel not in FreeBSD or NetBSD partitions</h3>
<i>FreeBSD and NetBSD DOS MBR partitions</i> are no longer used to store
disklabels, and are no longer searched for a disklabel. As a result disks with
only FreeBSD or NetBSD DOS MBR partitions will no longer have an 'a' partition
created in the spoofed disklabel. The disklabel on such disks will be stored
and loaded from sector 1, and this could find an old accidental disklabel. Use
fdisk(8) to change the partition type to OpenBSD ('A6') to use the existing
disklabel.
<p>
 
<a name="20061012"></a>
<h3>2006/10/12 - don't boot from NetBSD partitions</h3>
<i>amd64, i386, macppc, and mvmeppc</i> no longer try to boot from the first
NetBSD partition when no OpenBSD partition is found.
<p>

<a name="20061029"></a>
<h3>2006/10/29 - new user for ripd(8)</h3>
<i>A new RIP daemon has been imported</i> in order to use this daemon, a new
user and group are required.

As <i>root</i>, add the following user and group, using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
# useradd -u88 -g=uid -c"RIP Daemon" -d/var/empty -s/sbin/nologin _ripd
</pre></blockquote>

This step will add both the new user and its corresponding group.
Your environment may allow you to copy/paste those commands.
<p>

<a name="20061227"></a>
<h3>2006/12/27 - ARM (zaurus/armish) Flag day</h3>
<i>The syscall mechanism for arm has changed</i> which will cause binaries
and shared libraries from before Nov 7 to no longer work. It is necessary to
update from snapshot to get past this ABI change.
<p>

<a name="20070131"></a>
<h3>2007/01/31 - new user for hoststated(8)</h3>
<i>A HostState daemon has been imported</i> in order to use this daemon, a new
user and group are required.

As <i>root</i>, add the following user and group, using
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>:

<blockquote><pre>
# useradd -u89 -g=uid -c"HostState Daemon" -d/var/empty -s/sbin/nologin _hoststated
</pre></blockquote>

This step will add both the new user and its corresponding group.
Your environment may allow you to copy/paste those commands.
<p>

<a name="20070202"></a>
<h3>2007/02/02 - new way to enable/disable system accounting on boot</h3>
In order to enable accounting on boot you need to set the new rc.conf
variable "accounting=YES". The presence of the /var/account/acct file
does not make it start automatically anymore.
<p>

<a name="20070226"></a>
<h3>2007/02/26 - spamd: greylisting on by default; config files moved
to /etc/mail</h3>
<p>
Greylisting is now the default runtime mode for spamd(8); the
<tt>-g</tt> flag is obsolete.
To disable greylisting and run in blacklist-only mode, use the
<tt>-b</tt> flag.
In order to control which address spamd binds to, use the new
<tt>-l</tt> flag.

<p>
spamd-setup(8) can also be told to run in blacklist-only mode by passing
the new <tt>-b</tt> flag.

<p>
The spamd.conf(5) file has moved from <tt>/etc</tt> to <tt>/etc/mail</tt>.

<p>
Refer to the manpages for
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd&amp;sektion=8">spamd(8)</a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd-setup&amp;sektion=8">spamd-setup(8)</a>
for all the details.
 

d156 1
a156 1
<small>$OpenBSD: current.html,v 1.64 2007/04/01 13:28:39 claudio Exp $</small>
@


1.64
log
@bgpd filter language changed, warn users about it. OK henning@@, nick@@
@
text
@d222 4
a225 1

d301 1
a301 1
<small>$OpenBSD: current.html,v 1.63 2007/04/01 01:42:40 nick Exp $</small>
@


1.63
log
@
Dyslexics Untie!  Spotted by Pierre Riteau (pierre dot riteau at free
dot fr) and Pedro Almeida (openbsd at wire-consulting dot com).  Don't
want to talk about how long it took for me to recognize the error they
pointed out (ahci vs. achi).
@
text
@d47 1
d277 12
d298 1
a298 1
<small>$OpenBSD: current.html,v 1.62 2007/03/31 03:33:52 nick Exp $</small>
@


1.62
log
@
dlg@@ had a better idea of how to handle the very long dmesg lines in
here, plus remove some debug output.  thanks!
@
text
@d271 1
a271 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&amp;sektion=4">achi(4)</a>
d285 1
a285 1
<small>$OpenBSD: current.html,v 1.61 2007/03/30 06:22:57 jasper Exp $</small>
@


1.61
log
@typo
@
text
@d241 6
a246 6
<blockquote><pre>
pciide1 at pci0 dev 31 function 2 "Intel 82801GBM AHCI SATA" rev 0x02: DMA,
 channel 0 wired to native-PCI, channel 1 wired to native-PCI
pciide1: using apic 2 int 11 (irq 11) for native-PCI interrupt
wd0 at pciide1 channel 0 drive 0: <FUJITSU MHV2080BH>
wd0: 16-sector PIO, LBA48, 76319MB, 156301488 sectors
d248 1
a248 1
</pre></blockquote>
d251 6
a256 10
<blockquote><pre>
ahci0 at pci0 dev 31 function 2 "Intel 82801GBM AHCI SATA" rev 0x02 GHC 0x0:
 AHCI 1.1: apic 2 int 16 (irq 11)
ahci0: capabilities: 0xc710ff03<S64A,NCQ,SALP,SAL,SCLO,PMD,SSC,PSC> ports: 4
 ncmds: 32 gen: 1 (1.5Gbps)
ahci0: ports implemented: 0x00000001
ahci0.0: port reset
ahci0: detected device on port 0
scsibus1 at ahci0: 32 targets
sd0 at scsibus1 targ 0 lun 0: <ATA, FUJITSU MHV2080B, 0084> SCSI2 0/direct fixed
d258 1
a258 1
</pre></blockquote>
d285 1
a285 1
<small>$OpenBSD: current.html,v 1.60 2007/03/29 23:04:55 nick Exp $</small>
@


1.60
log
@
backfill with info about Xenocara.
Remove remaining </p>s while here.
@
text
@d234 1
a234 1
up as sd* (e.g <tt>wd0</tt>) devices instead.
d289 1
a289 1
<small>$OpenBSD: current.html,v 1.59 2007/03/29 22:33:33 nick Exp $</small>
@


1.59
log
@
add ahci(4) change.  Text by Peter N. M. Hansteen <peter at bsdly dot net>,
thanks!
@
text
@d44 1
a198 1
</p>
a202 1
</p>
a205 1
</p>
d213 15
a227 1
</p>
d289 1
a289 1
<small>$OpenBSD: current.html,v 1.58 2007/03/02 02:01:19 joel Exp $</small>
@


1.58
log
@small tweak from Okan Demirmen <okan..demirmen.com>
@
text
@d44 2
d217 20
d238 31
d277 1
a277 1
<small>$OpenBSD: current.html,v 1.57 2007/03/01 04:12:54 joel Exp $</small>
@


1.57
log
@spamd flag day


wording/format ok nick@@
@
text
@d191 1
a191 1
<tt>-g</tt> flag is no longer required.
d224 1
a224 1
<small>$OpenBSD: current.html,v 1.56 2007/02/02 14:55:18 ajacoutot Exp $</small>
@


1.56
log
@- document the new way of starting accounting.

ok mk@@
@
text
@d42 2
d186 30
d224 1
a224 1
<small>$OpenBSD: current.html,v 1.55 2007/01/31 13:37:40 pyr Exp $</small>
@


1.55
log
@document the import of hoststated.
ok henning@@
@
text
@d40 2
d177 7
d192 1
a192 1
<small>$OpenBSD: current.html,v 1.54 2006/12/31 17:49:16 aanriot Exp $</small>
@


1.54
log
@add the ARM Flag day in the TOC.

"sure" drahn@@
@
text
@d39 1
d159 16
d183 1
a183 1
<small>$OpenBSD: current.html,v 1.53 2006/12/27 17:58:19 drahn Exp $</small>
@


1.53
log
@ARM abi change.
@
text
@d38 1
d150 1
d166 1
a166 1
<small>$OpenBSD: current.html,v 1.52 2006/11/05 20:36:43 norby Exp $</small>
@


1.52
log
@The new RIP daemon ripd(8) needs the user and group _ripd
@
text
@d149 6
d164 1
a164 1
<small>$OpenBSD: current.html,v 1.51 2006/11/01 01:43:27 nick Exp $</small>
@


1.51
log
@
move 3.9->4.0 stuff to old
@
text
@d37 1
d134 16
d158 1
a158 1
<small>$OpenBSD: current.html,v 1.50 2006/10/20 13:39:21 mcbride Exp $</small>
@


1.50
log
@Specifically mention 'keep state (if-bound)' when filtering on enc0.
@
text
@a32 6
<li><a href="#20060327">2006/03/27 - New iwi(4) firmware</a>
<li><a href="#20060518">2006/05/18 - spppcontrol(8) removal</a>
<li><a href="#20060526">2006/05/26 - ipsecadm(8) removal</a>
<li><a href="#20060621">2006/06/21 - dvmrpd(8) added</a>
<li><a href="#20060625">2006/06/25 - wicontrol(8) removal</a>
<li><a href="#20060727">2006/07/27 - new compiler option</a>
d46 2
a47 2
It contains information about changes from 3.9-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 3.8 or earlier, or people
d51 2
a52 2
If you wish to update to 3.9-release or 3.9-stable from previous
versions, see the <a href="upgrade39.html">upgrade guide</a>.
a71 87
<a name="20060327"></a>
<h3>2006/03/27 - New iwi(4) firmware</h3>
iwi(4) now requires firmware version 3.0 to run.  Due to license problems
the firmware is not currently distributed with OpenBSD.
The firmware can be installed via the pkg tools with the
package at
<a href="http://damien.bergamini.free.fr/iwifw/OpenBSD/iwi-firmware-3.0.tgz">http://damien.bergamini.free.fr/iwifw/OpenBSD/iwi-firmware-3.0.tgz</a>.
<p>


<a name="20060518"></a>
<h3>2006/05/18 - spppcontrol(8) removal</h3>
In-kernel PPP configuration is now fully supported by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>.
The obsolete
<em><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spppcontrol&amp;sektion=8&amp;manpath=OpenBSD+3.9">spppcontrol(8)</a></em>
utility has been removed from the tree.
See the manual pages
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sppp&amp;sektion=4">sppp(4)</a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&amp;sektion=4">pppoe(4)</a>
for configuration examples.
<p>
Previously, the /etc/hostname.pppoe0 file looked like this:
<pre>
pppoedev ne0
!/sbin/ifconfig ne0 up
!/usr/sbin/spppcontrol \$if myauthproto=pap myauthname=testcaller \
        myauthkey=donttell
!/sbin/ifconfig \$if inet 0.0.0.0 0.0.0.1 netmask 0xffffffff
!/sbin/route add default 0.0.0.1
up
</pre>
This should be updated according to the following example:
<pre>
inet 0.0.0.0 255.255.255.255 0.0.0.1 pppoedev ne0 \
	authproto pap authname testcaller authkey donttell up
!/sbin/route add default 0.0.0.1
</pre>
And the physical interface must be marked UP:
<pre>
# echo "up" > /etc/hostname.ne0
</pre>
<p>

<a name="20060526"></a>
<h3>2006/05/26 - ipsecadm(8) removal</h3>
IPsec configuration is now fully supported by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecctl&amp;sektion=8">ipsecctl(8)</a>.
The obsolete
<em><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecadm&amp;sektion=8&amp;manpath=OpenBSD+3.9">ipsecadm(8)</a></em>
utility has been removed from the tree.
See the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec.conf&amp;sektion=5">ipsec.conf(5)</a>
manual page for configuration examples.
<p>

<a name="20060621"></a>
<h3>2006/06/21 - dvmrpd(8) added</h3>
A mrouted(8) replacement has been started and imported, in order to use
(note: not very useful yet) this new daemon the user _dvmrpd must be added:<p>
<pre>
# useradd -u87 -g=uid -c"DVMRP Daemon" -d/var/empty -s/sbin/nologin _dvmrpd
</pre>

<a name="20060625"></a>
<h3>2006/06/25 - wicontrol(8) removal</h3>
Wireless configuration for
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a>
is now fully supported by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>.
The obsolete
<em><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wicontrol&amp;sektion=8&amp;manpath=OpenBSD+3.9">wicontrol(8)</a></em>
utility has been removed from the tree.
<p>

<a name="20060727"></a>
<h3>2006/07/27 - new compiler option</h3>
The kernel on all platforms is now built with the recently introduced
<i>-Wstack-larger-than</i> compiler option. Before building a kernel, the
compiler needs to be built and installed.

<p>
Follow the instructions in
<a href="faq5.html#NewCompiler">FAQ 5 - How do I bootstrap a newer version of
the compiler</a> for details.
<p>
d141 1
a141 1
<small>$OpenBSD: current.html,v 1.49 2006/10/12 12:18:36 krw Exp $</small>
@


1.49
log
@Mention modified treatment of FreeBSD and NetBSD MBR partitions when
booting and when reading/storing disklabels. Prodded by nick@@.
@
text
@d199 9
d234 1
a234 1
<small>$OpenBSD: current.html,v 1.48 2006/10/06 17:57:36 mcbride Exp $</small>
@


1.48
log
@'flags S/SA keep state' implicit in pf.conf(5)
@
text
@d41 2
d200 17
d225 1
a225 1
<small>$OpenBSD: current.html,v 1.47 2006/09/27 09:59:01 martin Exp $</small>
@


1.47
log
@better build new ld.so after new gcc was built
@
text
@d40 1
d186 12
d206 1
a206 1
<small>$OpenBSD: current.html,v 1.46 2006/09/26 23:40:40 martin Exp $</small>
@


1.46
log
@upgrade guide for the alpha gcc3 switch
@
text
@d171 2
a172 1
Build new ld.so:
d182 1
a182 3
Now, <a href="faq5.html#NewCompiler">build gcc3</a>, (using the gcc3
directory) then build the kernel and system as
<a href="faq5.html#Bld">usual</a>.
d193 1
a193 1
<small>$OpenBSD: current.html,v 1.45 2006/07/27 06:11:42 miod Exp $</small>
@


1.45
log
@Mention a recent compiler is necessary to build a kernel.
@
text
@d39 1
d163 23
d194 1
a194 1
<small>$OpenBSD: current.html,v 1.44 2006/07/20 05:03:13 david Exp $</small>
@


1.44
log
@mention wicontrol(8) removal
@
text
@d38 1
d150 12
d170 1
a170 1
<small>$OpenBSD: current.html,v 1.43 2006/06/22 15:16:21 steven Exp $</small>
@


1.43
log
@typo, wrap long line while here
@
text
@d37 1
d138 11
d157 1
a157 1
<small>$OpenBSD: current.html,v 1.42 2006/06/21 06:47:50 norby Exp $</small>
@


1.42
log
@remember to add the _dvmrpd user for the new dvmrpd(8) daemon.

requested by jsg@@
@
text
@d131 2
a132 2
A mrouted(8) replacement has been started and imported, in order to use (note: not very usefull yet) this new daemon the user
_dvmrpd must be added:<p>
d145 1
a145 1
<small>$OpenBSD: current.html,v 1.41 2006/06/21 04:20:28 david Exp $</small>
@


1.41
log
@HTML validation fixes; ok nick@@
@
text
@d36 1
d129 8
d145 1
a145 1
<small>$OpenBSD: current.html,v 1.40 2006/06/19 19:59:59 david Exp $</small>
@


1.40
log
@mention the ipsecadm(8) removal
ok hshoexer@@
@
text
@d42 1
a42 1
<XXXversion>
d84 1
a84 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&sektion=8">ifconfig(8)</a>.
d86 1
a86 1
<em><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spppcontrol&sektion=8&manpath=OpenBSD+3.9">spppcontrol(8)</a></em>
d89 1
a89 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sppp&sektion=4">sppp(4)</a>
d91 1
a91 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pppoe&sektion=4">pppoe(4)</a>
d136 1
a136 1
<small>$OpenBSD: current.html,v 1.39 2006/05/19 20:17:24 reyk Exp $</small>
@


1.39
log
@mention the spppcontrol removal and how to update the configuration.

help + ok jmc@@ canacar@@
@
text
@d35 1
d116 12
d136 1
a136 1
<small>$OpenBSD: current.html,v 1.38 2006/05/01 08:43:32 steven Exp $</small>
@


1.38
log
@3.9
@
text
@d34 1
d77 35
d123 1
a123 1
<small>$OpenBSD: current.html,v 1.37 2006/05/01 01:19:28 nick Exp $</small>
@


1.37
log
@
move 3.8->3.9 stuff from current.html to upgrade-old.html
@
text
@d43 2
a44 2
It contains information about changes from 3.8-release to <i>-current</i>,
and should NOT be used by anyone upgrading from 3.7 or earlier, or people
d48 2
a49 2
If you wish to update to 3.8-release or 3.8-stable from previous
versions, see the <a href="upgrade38.html">upgrade guide</a>.
d87 1
a87 1
<small>$OpenBSD: current.html,v 1.36 2006/04/06 11:27:03 jsg Exp $</small>
@


1.36
log
@Add an entry for iwi(4) now requiring version 3.0 firmware.
Requested by sturm@@
@
text
@a32 8
<li><a href="#20050927">2005/09/27 - build requires new xargs feature</a>
<li><a href="#20051006">2005/10/06 - Changes to MAKEDEV(8) and ksh(1)</a>
<li><a href="#20051116">2005/11/16 - New version of ftp-proxy(8)</a>
<li><a href="#20051216">2005/12/16 - libresolv removed</a>
<li><a href="#20060104">2006/01/04 - mac68k switch to wscons(4)</a>
<li><a href="#20060113">2006/01/13 - types changes</a>
<li><a href="#20060131">2006/01/31 - XKB configuration updates</a>
<li><a href="#20060221">2006/02/21 - ipsec.conf(5) updates</a>
a67 169
<a name="20050927"></a>
<h3>2005/09/27 - build requires new xargs feature</h3>

Build and install xargs(1).
<pre>
     # cd /usr/src/usr.bin/xargs && make obj && make && make install
</pre>
Then run make build.

<p>
<a name="20051006"></a>
<h3>2005/10/06 - Changes to MAKEDEV(8)</h3>

Changes were done to MAKEDEV to greatly increase its speed.
These changes depend on changes made to ksh earlier.
Therefore install media built prior to this date can not be used.
<br>

<p>
<a name="20051116"></a>
<h3>2005/11/16 - New version of ftp-proxy(8)</h3>

ftp-proxy was replaced by what was previously called pftpx.
The new ftp-proxy runs stand-alone and not from inetd.conf as it used to.
<p>
Upgrade instructions are as follows:
<p>
Stop the old ftp-proxy by installing a new /etc/inetd.conf or just disable
its entry in /etc/inetd.conf manually.

<pre>
cp /usr/src/etc/inetd.conf /etc/inetd.conf
</pre>

Then send inetd a HUP signal via kill:
<p>
<pre>
kill -HUP `cat /var/run/inetd.pid`
</pre>

Start the new ftp-proxy by installing new
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8"><i>/etc/rc</i></a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8"><i>/etc/rc.conf</i></a>
and setting ftpproxy_flags="" in /etc/rc.conf.local.

<pre>
cp /usr/src/etc/{rc,rc.conf} /etc
echo 'ftpproxy_flags=""' >> /etc/rc.conf.local
</pre>

Alternatively, it can be started by simply calling
/usr/sbin/ftp-proxy from /etc/rc.local
<p>

The new proxy uses <a href="pf/anchors.html"><i>anchors</i></a> to allow
data connections which means that
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5"><i>/etc/pf.conf</i></a>
must be adapted.  In the NAT section you need:
<p>

<pre>
nat-anchor "ftp-proxy/*"
rdr-anchor "ftp-proxy/*"
</pre>

They are mandatory, even if you don't use NAT otherwise.
The following rule, that is probably already there for the old ftp-proxy,       
must stay: 
<pre>
rdr pass on $int_if proto tcp from $lan to any port 21 -> \
    127.0.0.1 port 8021
</pre>

In the rule section this is needed:

<pre>
anchor "ftp-proxy/*"
</pre>

Rules that allow the proxy to make FTP control connections
(destination port 21/tcp) must stay. 
Rules that allow FTP data connections are no longer needed.
Those rules may contain "user proxy" or "to port > 49151".

Care has been taken to keep the commandline switches similar, but some
may differ.
See the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy&amp;sektion=8">ftp-proxy</a>
man page.
<p>

One case warrants special mention: if you have old clients that rely on
active mode data connections which use 20/tcp as a source port, you need the
'-r' switch.  (for this you had to run the old proxy with "-u root").
<p>
Run ftp-proxy with "-d -D7" if you run into trouble and want to diagnose
what's happening.

<p>
<a name="20051216"></a>
<h3>2005/12/16 - libresolv removed</h3>

You need to remove libresolv from your machine as it is no
longer installed.
<pre>
     # rm /usr/lib/libresolv*
</pre>

<p>
<a name="20060104"></a>
<h3>2006/01/04 - mac68k switch to wscons(4)</h3>
Before rebooting the new kernel, system files have to be updated for
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wscons&amp;sektion=4">wscons(4)</a>.
</p>

<pre>
     # cp /usr/src/etc/etc.mac68k/MAKEDEV /dev
     # cd /dev &amp;&amp; sh ./MAKEDEV wscons
</pre>

<p>
In <tt>/etc/ttys</tt>, change the getty on <em>ttye0</em> to <em>ttyC0</em>
and reboot into the new kernel.
</p>

<p>
<a name="20060113"></a>
<h3>2006/01/13 - types changes</h3>
Before doing a "make build", the compiler needs to be built and installed.
Otherwise, you will be unable to build libstdc++.

<p>
Follow the instructions in <a href="faq5.html#NewCompiler">FAQ 5 -
How do I bootstrap a newer version of the compiler</a> for details.

<a name="20060131"></a>
<h3>2006/01/31 - xkb configuration updates</h3>
After the X.Org 6.9 merge, XKB configuration has changed, 
requiring changes to /etc/X11/xorg.conf. The most noticeable changes are:
<ul>
<li><b>us_intl</b> layout replaced by the <b>alt-intl</b> variant 
of the <b>us</b> layout.
Update your configuration file to use: 
<pre>
      Option "XkbLayout" "us"
      Option "XkbVariant" "alt-intl"
</pre>
<li><b>de_CH</b> and <b>fr_CH</b> layouts have been replaced by the
<b>ch</b> layout with <b>de</b> and <b>fr</b> variants:
<pre>
      Option "XkbLayout" "ch"
      Option "XkbVariant" "de"
</pre>
</ul>
<p>

<a name="20060221"></a>
<h3>2006/02/21 - ipsec.conf(5) updates</h3>
When <b>ike rules</b> do not include main mode parameters,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsecctl&amp;sektion=8">ipsecctl(8)</a>
will now choose AES instead of 3DES for main mode encryption.
To interoperate with peers using stable, add these values to their
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec.conf&amp;sektion=5">ipsec.conf(5)</a>
files to switch to the new defaults:
<pre>
	main auth hmac-sha1 enc aes
</pre>
<p>
d87 1
a87 1
<small>$OpenBSD: current.html,v 1.35 2006/02/23 22:42:28 steven Exp $</small>
@


1.35
log
@fix wrong date
@
text
@d41 1
d245 11
d264 1
a264 1
<small>$OpenBSD: current.html,v 1.34 2006/02/21 17:34:46 hshoexer Exp $</small>
@


1.34
log
@document changes in ipsecctl/ipsec.conf; suggested by otto@@
help + ok grunk@@ jmc@@
@
text
@d40 1
a40 1
<li><a href="#20060221">2006/01/31 - ipsec.conf(5) updates</a>
d252 1
a252 1
<small>$OpenBSD: current.html,v 1.33 2006/02/15 16:53:39 ian Exp $</small>
@


1.33
log
@Broken 'a' tag, reported by Tobias Stoeckmann
@
text
@d40 1
d232 11
d252 1
a252 1
<small>$OpenBSD: current.html,v 1.32 2006/02/14 19:47:15 matthieu Exp $</small>
@


1.32
log
@grammar fixes by jmc@@
@
text
@d210 1
a210 1
<a name="20060131"</a>
d240 1
a240 1
<small>$OpenBSD: current.html,v 1.31 2006/02/14 18:24:40 steven Exp $</small>
@


1.31
log
@fix typos and spacing
@
text
@d212 2
a213 2
After merging of X.Org 6.9, some XKB configuration has changed, 
requiring changes in /etc/X11/xorg.conf. The most noticeable changes are:
d240 1
a240 1
<small>$OpenBSD: current.html,v 1.30 2006/02/13 22:19:10 matthieu Exp $</small>
@


1.30
log
@Document xkb configuration changes for X.Org 6.9. ok nick@@
@
text
@d212 2
a213 2
After merging of X.Org 6.9, some XKB configuration have changed, 
requiring changes in /etc/X11/xorg.conf. The most noticeceable changes are:
d223 1
a223 1
 <b>ch</b> layout with <b>de</b> and <b>fr</b> variants:
d225 2
a226 2
    Option "XkbLayout" "ch"
    Option "XkbVariant" "de"
d240 1
a240 1
<small>$OpenBSD: current.html,v 1.29 2006/01/24 01:47:10 nick Exp $</small>
@


1.29
log
@
Redundancy elimination.  Besides, I think that "make ... clean" step
may be important for 2.95.3 platforms.  On the other hand, I wouldn't
bet it wasn't me doing something stupid over and over, either.
@
text
@d39 1
d210 19
d240 1
a240 1
<small>$OpenBSD: current.html,v 1.28 2006/01/13 18:58:36 millert Exp $</small>
@


1.28
log
@fix typo
@
text
@a203 1
</p>
d205 3
a207 19
For i386, amd64, cats, hppa, zaurus, sgi, sparc64 and macppc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
</pre>

For all others:
<pre>
     # cd /usr/src/gnu/egcs/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
</pre>

You may now proceed with a normal "make build".
d220 1
a220 1
<small>$OpenBSD: current.html,v 1.27 2006/01/13 18:50:45 millert Exp $</small>
@


1.27
log
@types changes
@
text
@d209 4
a212 4
     # make -f Makefile.bsd-wraper obj
     # make -f Makefile.bsd-wraper depend
     # make -f Makefile.bsd-wraper
     # make -f Makefile.bsd-wraper install
d218 4
a221 4
     # make -f Makefile.bsd-wraper obj
     # make -f Makefile.bsd-wraper depend
     # make -f Makefile.bsd-wraper
     # make -f Makefile.bsd-wraper install
d237 1
a237 1
<small>$OpenBSD: current.html,v 1.26 2006/01/04 22:05:37 martin Exp $</small>
@


1.26
log
@steps needed for using glass console after mac68k switch to wscons(4)
@
text
@d38 1
d198 29
a226 1
	
d237 1
a237 1
<small>$OpenBSD: current.html,v 1.25 2006/01/03 08:48:29 steven Exp $</small>
@


1.25
log
@link to FAQ 5, shorten man page links, some minor tweaks.
feedback/ok nick@@
@
text
@d37 1
d182 18
d208 1
a208 1
<small>$OpenBSD: current.html,v 1.24 2005/12/18 21:25:42 pvalchev Exp $</small>
@


1.24
log
@libresolv is removed from current so add a step
to rm /usr/lib/libresolv* when upgrading.
@
text
@d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 2005 by OpenBSD">
d47 1
a47 1
and should NOT be used for anyone upgrading from 3.7 or earlier, or people
d52 1
a52 1
versions, see the <a href="upgrade38.html">upgrade</a> guide.
d55 3
a57 4
If you wish to see upgrade information for earlier versions of OpenBSD,
see <a href= "upgrade-old.html">upgrade-old.html</a>.
This is provided as a historical record -- it should NOT be used as
a upgrade procedure guide.
d63 6
a68 1
   
d111 5
a115 1
Start the new ftp-proxy by installing new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/rc</i></a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/rc.conf</i></a> and setting ftpproxy_flags="" in /etc/rc.conf.local.
d127 3
a129 1
data connections which means that <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/pf.conf</i></a> must be adapted.  In the NAT section you need:
d157 4
a160 3
may differ.  See the <a href="http://www.openbsd.org/cgi-bin/man.cgi?
query=ftp-proxy&apropos=0&sektion=0&manpath=OpenBSD
+Current&arch=i386&format=html">ftp-proxy</a> manpage.
d189 1
a189 1
<small>$OpenBSD: current.html,v 1.23 2005/11/18 19:30:15 camield Exp $</small>
@


1.23
log
@typo, from Brent Graveland
@
text
@d36 1
d160 10
d178 1
a178 1
<small>$OpenBSD: current.html,v 1.22 2005/11/18 12:25:25 camield Exp $</small>
@


1.22
log
@ftp-proxy upgrade instructions

Mostly from Johan Mson Lindman, with suggestions from nick and saad.

ok nick@@, "looks good" grunk@@
@
text
@d106 1
a106 1
Start the new ftp-proxy by installing new <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/rc/</i></a> and <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&apropos=0&sektion=0&manpath=OpenBSD+Current&arch=i386&format=html"><i>/etc/rc.conf</i></a> and setting ftpproxy_flags="" in /etc/rc.conf.local.
d167 1
a167 1
<small>$OpenBSD: current.html,v 1.21 2005/11/02 02:02:07 nick Exp $</small>
@


1.21
log
@
typos, wordos, etc.  Fixed by Steven Mestdagh, thanks!
@
text
@d35 1
d82 75
d167 1
a167 1
<small>$OpenBSD: current.html,v 1.20 2005/11/01 11:50:01 nick Exp $</small>
@


1.20
log
@
Rotate current info for 3.8
@
text
@d56 1
a56 1
a upgrade proceedure guide.
d91 1
a91 1
<small>$OpenBSD: current.html,v 1.19 2005/10/19 10:04:13 nick Exp $</small>
@


1.19
log
@
"make obj" is a good thing.
From Eduardo Alvarenga (eduardo dot alvarenga at gmail dot com>, thanks!
@
text
@a32 8
<li><a href="#20050329">2005/03/29 - Exception handling flag day (i386)</a>
<li><a href="#20050331">2005/03/31 - mmap(2) flag day (vax)</a>
<li><a href="#20050413">2005/04/13 - New user and group: _hostapd</a>
<li><a href="#20050527">2005/05/27 - pf <i>log-all</i> becomes <i>log (all)</i></a>
<li><a href="#20050601">2005/06/01 - mmap now counted in datasize rlimit</a>
<li><a href="#20050609">2005/06/09 - bgpd configuration change</a>
<li><a href="#20050802">2005/08/02 - New features in crunchgen</a>
<li><a href="#20050806">2005/08/06 - building LC_CTYPE locales</a>
d41 1
d44 2
a45 2
It contains information about changes from 3.7-release to <i>-current</i>,
and should NOT be used for anyone upgrading from 3.6 or earlier, or people
d49 2
a50 2
If you wish to update to 3.7-release or 3.7-stable from previous
versions, see the <a href="upgrade37.html">upgrade</a> guide.
d55 2
a64 116
<a name="20050329"></a>
<h3>2005/03/29 - Exception handling flag day (i386)</h3>

OpenBSD/i386 has converted to DWARF-based exception handling.  To
upgrade, first <a href="faq5.html#NewCompiler">build and install
gcc3</a> and then build and install a new version of libstdc++:
<pre>
     # cd /usr/src/gnu/lib/libstdc++
     # make -f Makefile.bsd-wrapper cleandir
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
</pre>

<p>


<a name="20050331"></a>
<h3>2005/03/31 - mmap(2) flag day (vax)</h3>

Virtual memory limits have changed on OpenBSD/vax. The statical-linked nature
of OpenBSD/vax requires special handling of this. The following steps must be
followed to build a usable system.
<ul>
<li>Update your source tree
<li>Build and install a new kernel, do not reboot yet
<li>Build and install a new libc:
<pre>
     # cd /usr/src/lib/libc && make depend && make && env NOMAN=1 make install
</pre>
<li><a href="faq5.html#NewCompiler">Build and install gcc2</a>
<li>Build and install a new make:
<pre>
     # cd /usr/src/usr.bin/make && make depend && make && make install
</pre>
<li>Build and install new binutils:
<pre>
    # cd /usr/src/gnu/usr.bin/binutils
    # make -f Makefile.bsd-wrapper depend
    # make -f Makefile.bsd-wrapper
    # make -f Makefile.bsd-wrapper install
</pre>
<li>Reboot.
<li>Build and install the system as usual:
<pre>
    # cd /usr/src && make build
</pre>
</ul>

<p>
<a name="20050413"></a>
<h3>2005/04/13 - New user and group: _hostapd</h3> 
The new, privilege separated HostAP daemon needs
a new user and group "_hostapd".
Add the user and group by running

<pre>
    useradd -u86 -g=uid -c"HostAP Daemon" -d/var/empty -s/sbin/nologin _hostapd
</pre>
as root.


<p>
<a name="20050527"></a>
<h3>2005/05/27 - pf <i>log-all</i> becomes <i>log (all)</i></h3>

The pf.conf(5) keyword <i>log-all</i> has been removed. The new syntax
for this feature is now <i>log (all)</i>.


<p>
<a name="20050601"></a>
<h3>2005/06/01 - mmap now counted in datasize rlimit</h3>

Anonymous memory allocated via mmap(2) is now counted towards a
process's datasize resource limit.  As a result, processes will
appear to be taking up more memory than they used to and the old
resource limits may be too small.  To fix the resource limit problem,
update <tt>/etc/login.conf</tt>:
<pre>
     # cd /usr/src/etc
     # cp login.conf /etc
</pre>
then log out and log back in again.


<p>
<a name="20050609"></a>
<h3>2005/06/09 - bgpd configuration change</h3>

The bgpd.conf(5) keywords <i>network connected [set ...]</i> and
<i>network static [set ...]</i> are deprecated. They should be replaced
with <i>network inet connected [set ...]</i> respectively <i>network
inet static [set ...]</i>.


<p>
<a name="20050802"></a>
<h3>2005/08/02 - New features in crunchgen</h3>

crunchgen(1) has been updated to handle supplementary library directories.
Be sure to rebuild and reinstall crunchgen before you attempt to make
a release or rebuild any install media.


<p>
<a name="20050806"></a>
<h3>2005/08/06 - building LC_CTYPE locales</h3>

Build and install mklocale(1).
<pre>
     # cd /usr/src/usr.bin/mklocale && make obj && make depend && make && make install
</pre>
Then run make build.

<p>
d91 1
a91 1
<small>$OpenBSD: current.html,v 1.18 2005/10/08 18:11:53 otto Exp $</small>
@


1.18
log
@Warn people not to try to run new MAKEDEV with old ksh. From
Johan M:son Lindman.
@
text
@d181 1
a181 1
     # cd /usr/src/usr.bin/mklocale && make depend && make && make install
d191 1
a191 1
     # cd /usr/src/usr.bin/xargs && make && make install
d212 1
a212 1
<small>$OpenBSD: current.html,v 1.17 2005/10/08 08:55:27 mpf Exp $</small>
@


1.17
log
@Build requires new xargs(1).
OK nick@@
@
text
@d42 1
d196 8
d212 1
a212 1
<small>$OpenBSD: current.html,v 1.16 2005/08/09 15:32:26 martin Exp $</small>
@


1.16
log
@proper way of handling mklocale

ok espie@@
@
text
@d41 1
d185 10
d203 1
a203 1
<small>$OpenBSD: current.html,v 1.15 2005/08/09 10:51:12 espie Exp $</small>
@


1.15
log
@document locale-related changes
@
text
@d177 1
a177 2
The first make build will error out, since mklocale(1) is not yet installed.
Wait for the error, then simply install it and finish the build manually:
d179 1
a179 2
     # cd /usr/src/usr.bin/mklocale; make install
     # cd /usr/src; make all; make install
d181 1
d192 1
a192 1
<small>$OpenBSD: current.html,v 1.14 2005/06/09 17:58:36 nick Exp $</small>
@


1.14
log
@
Put things back in order.  Most recent on bottom.  Add comments to remind.
@
text
@d39 2
d165 20
d193 1
a193 1
<small>$OpenBSD: current.html,v 1.13 2005/06/09 17:06:08 claudio Exp $</small>
@


1.13
log
@Document recent bgpd config change. While there kill a unneeded <\i>.
OK henning@@
@
text
@d32 1
a32 3
<li><a href="#20050609">2005/06/09 - bgpd configuration change</a>
<li><a href="#20050601">2005/06/01 - mmap now counted in datasize rlimit</a>
<li><a href="#20050527">2005/05/27 - pf <i>log-all</i> becomes <i>log (all)</i></a>
d36 4
d65 1
a65 31
<a name="20050609"></a>
<h3>2005/06/09 - bgpd configuration change</h3>

The bgpd.conf(5) keywords <i>network connected [set ...]</i> and
<i>network static [set ...]</i> are deprecated. They should be replaced
with <i>network inet connected [set ...]</i> respectively <i>network
inet static [set ...]</i>.


<a name="20050601"></a>
<h3>2005/06/01 - mmap now counted in datasize rlimit</h3>

Anonymous memory allocated via mmap(2) is now counted towards a
process's datasize resource limit.  As a result, processes will
appear to be taking up more memory than they used to and the old
resource limits may be too small.  To fix the resource limit problem,
update <tt>/etc/login.conf</tt>:
<pre>
     # cd /usr/src/etc
     # cp login.conf /etc
</pre>
then log out and log back in again.


<a name="20050527"></a>
<h3>2005/05/27 - pf <i>log-all</i> becomes <i>log (all)</i></h3>

The pf.conf(5) keyword <i>log-all</i> has been removed. The new syntax
for this feature is now <i>log (all)</i>.


a115 1

d127 25
d153 8
d171 1
a171 1
<small>$OpenBSD: current.html,v 1.12 2005/06/09 15:38:15 claudio Exp $</small>
@


1.12
log
@Fix anchor for the mmap entry so that the link in the TOC works.
@
text
@d32 2
a33 1
<li><a href="#20050601">2005/06/01 - mmap now counted in datasize rlimit</i></a>
d63 9
d167 1
a167 1
<small>$OpenBSD: current.html,v 1.11 2005/06/07 13:42:32 millert Exp $</small>
@


1.11
log
@mention resource limits
@
text
@d62 1
a62 1
<a name="20050329"></a>
d157 1
a157 1
<small>$OpenBSD: current.html,v 1.10 2005/05/28 00:21:45 dhartmei Exp $</small>
@


1.10
log
@mention the pf 'log-all' -> 'log (all)' syntax change in -current.
@
text
@d32 1
d62 15
d157 1
a157 1
<small>$OpenBSD: current.html,v 1.9 2005/05/23 18:03:32 jaredy Exp $</small>
@


1.9
log
@typo, xcitor <xcitor@@sdf.lonestar.org>
@
text
@d32 1
d61 7
d141 1
a141 1
<small>$OpenBSD: current.html,v 1.8 2005/05/19 17:00:22 nick Exp $</small>
@


1.8
log
@
move 3.6 stuff from current.html to upgrade-old.html for 3.7
@
text
@d113 1
a113 1
The new, privilege seperated HostAP daemon needs
d133 1
a133 1
<small>$OpenBSD: current.html,v 1.7 2005/04/16 12:48:21 nick Exp $</small>
@


1.7
log
@
Get consistant with ":"'s.  From translator Christophe Plasschaert
(christophe dot plasschaert at wanadoo dot fr), thanks!
@
text
@a31 9
<li><a href="#20041027">2004/10/27 - Exception handling flag day (amd64, cats,
    hppa, sgi, sparc64)</a>
<li><a href="#20041029">2004/10/29 - Switch to gcc3 (macppc)</a>
<li><a href="#20041111">2004/11/11 - bgpd behaviour change</a>
<li><a href="#20041124">2004/11/24 - New user and group: _ftp</a>
<li><a href="#20041230">2004/12/30 - Switch to gcc3 (i386)</a>
<li><a href="#20050118">2005/01/18 - New user and group: _ospfd</a>
<li><a href="#20050124">2005/01/24 - pfsync takes syncdev instead of syncif</a>
<li><a href="#20050202">2005/02/02 - POSIX hex and octal constants in (k)sh</a>
d42 2
a43 2
It contains information about changes from 3.6-release to <i>-current</i>,
and should NOT be used for anyone upgrading from 3.5 or earlier, or people
d47 2
a48 2
If you wish to update to 3.6-release or 3.6-stable from previous
versions, see the <a href="upgrade36.html">upgrade</a> guide.
a59 116
<a name="20041027"></a>
<h2>2004/10/27 - Exception handling flag day (amd64, cats,  hppa, sgi, sparc64)</h2>
Changes have been made to gcc3 to make it possible to use
DWARF-based exception handling on OpenBSD.  Since these changes
depend on some fairly recent changes to libc, the following
steps must be followed to build a usable system.
<ul>
<li>Update your source code tree
<li>Build a new kernel
<li>Install the new kernel and reboot
<li>Install new header files:
<pre>
     # cd /usr/src && make obj && make cleandir && make includes
</pre>
<li>Build and install a new version of libc:
<pre>
     # cd /usr/src/lib/libc && make depend && make && env NOMAN=1 make install
</pre>
<li><a href="faq5.html#NewCompiler">Build and install gcc3</a>
<li>Build and install a new version of libstdc++:
<pre>
     # cd /usr/src/gnu/lib/libstdc++
     # make -f Makefile.bsd-wrapper cleandir
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
</pre>
<li>Build and install the system as usual:
<pre>
     # cd /usr/src && make build
</pre>
</ul>


<a name="20041029"></a>
<h2>2004/10/29 - Switch to gcc3 (macppc)</h2>
OpenBSD/macppc has converted to gcc3.
To upgrade,
<pre>
    # rm -rf /usr/include/g++
</pre>

Now, <a href="faq5.html#NewCompiler">build gcc3</a>, (using the gcc3
directory) then build the kernel and system as
<a href="faq5.html#Bld">usual</a>.

<a name="20041111"></a>
<h2>2004/11/11 - bgpd behaviour change</h2>
The new <i>rde route-age [evaluate|ignore]</i> changed behaviour of bgpd.
Until now <i>evaluate</i> was the implicit default but now the default
is <i>ignore</i>.
Route age evaluation is not specified in RFC 1771 and results in non
deterministic decisions in preference for more stable links.


<a name="20041124"></a>
<h2>2004/11/24 - New user and group: _ftp</h2> 
The FTP daemon is being reworked to use privilege separation.
Thus a new user and group "_ftp" are required.
Add the user and group by running

<pre>
    useradd -u84 -g=uid -c"FTP Daemon" -d/var/empty -s/sbin/nologin _ftp
</pre>
as root.


<a name="20041230"></a>
<h2>2004/12/30 - Switch to gcc3 (i386)</h2>
OpenBSD/i386 has converted to gcc3.
To upgrade,

<pre>
    # rm -rf /usr/include/g++
</pre>

Now, <a href="faq5.html#NewCompiler">build gcc3</a>, (using the gcc3
directory) then build the kernel and system as
<a href="faq5.html#Bld">usual</a>.

<p>

<a name="20050118"></a>
<h2>2005/01/18 - New user and group: _ospfd</h2> 
The upcoming ospf daemon needs its own user and group _ospfd.
Add them by running

<pre>
    useradd -u85 -g=uid -c"OSPF Daemon" -d/var/empty -s/sbin/nologin _ospfd
</pre>
as root.


<a name="20050124"></a>
<h2>2005/01/24 - pfsync takes syncdev instead of syncif</h2>
When configuring the
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfsync&amp;sektion=4">pfsync</a>
device, use 'syncdev' instead of the deprecated keyword 'syncif'. 


<a name="20050202"></a>
<h2>2005/02/02 - POSIX hex and octal constants in (k)sh</h2>
Both
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">sh(1)</a>
and
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh(1)</a>
now interpret c-like hex (0x...) and octal (0...) constants in arithmetic
expressions.
As a consequence, the MAKEDEV script needs to be updated:
<pre>
     # cp /usr/src/etc/etc.`machine`/MAKEDEV /dev
</pre>

<p>


d61 1
a61 1
<h2>2005/03/29 - Exception handling flag day (i386)</h2>
d78 1
a78 1
<h2>2005/03/31 - mmap(2) flag day (vax)</h2>
d112 1
a112 1
<h2>2005/04/13 - New user and group: _hostapd</h2> 
d133 1
a133 1
<small>$OpenBSD: current.html,v 1.6 2005/04/13 21:43:24 henning Exp $</small>
@


1.6
log
@new user/group _hostapd
@
text
@d38 1
a38 1
<li><a href="#20050118">2005/01/18 - New user and group _ospfd</a>
d125 1
a125 1
<h2>2004/11/24 - New user and group _ftp</h2> 
d152 1
a152 1
<h2>2005/01/18 - New user and group _ospfd</h2> 
d237 1
a237 1
<h2>2005/04/13 - New user and group _hostapd</h2> 
d258 1
a258 1
<small>$OpenBSD: current.html,v 1.5 2005/04/01 14:16:27 henning Exp $</small>
@


1.5
log
@vax is gcc2 of course!
@
text
@d43 1
d236 13
d258 1
a258 1
<small>$OpenBSD: current.html,v 1.4 2005/04/01 11:27:10 martin Exp $</small>
@


1.4
log
@mmap(2) VAX flag day

ok tdeval@@
@
text
@d214 1
a214 1
<li><a href="faq5.html#NewCompiler">Build and install gcc3</a>
d244 1
a244 1
<small>$OpenBSD: current.html,v 1.2 2005/03/29 18:39:28 kettenis Exp $</small>
@


1.3
log
@
typo, spotted by Sam Smith
@
text
@d42 1
d200 34
@


1.2
log
@Exception handling flag day (i386).
@
text
@d188 1
a188 1
gcc3</a> and the build and install a new version of libstdc++:
d209 1
a209 1
<small>$OpenBSD: current.html,v 1.1 2005/02/09 19:32:13 nick Exp $</small>
@


1.1
log
@
replacement for upgrade-minifaq.html's -current info.  Part of Henning's
Master Plan: a "Following -current" document.  ok henning@@, pvalchev@@,
mcbride@@ and a bunch who looked and kept quiet. :)
@
text
@d41 1
d183 17
d209 1
a209 1
<small>$OpenBSD$</small>
@

