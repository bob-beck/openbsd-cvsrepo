head	1.290;
access;
symbols;
locks; strict;
comment	@# @;


1.290
date	2017.03.12.20.45.24;	author tj;	state Exp;
branches;
next	1.289;
commitid	1mKmvUN6in4brUc8;

1.289
date	2017.03.11.19.17.22;	author tb;	state Exp;
branches;
next	1.288;
commitid	ZyLzokTNEPTblnBq;

1.288
date	2017.03.01.20.15.39;	author tj;	state Exp;
branches;
next	1.287;
commitid	UdxEVD3DMCKreymu;

1.287
date	2017.02.09.17.22.19;	author tb;	state Exp;
branches;
next	1.286;
commitid	T7p2qUf6sgevbhcO;

1.286
date	2017.01.04.17.01.44;	author tb;	state Exp;
branches;
next	1.285;
commitid	6rDnmWLDFTzWGcX5;

1.285
date	2016.11.15.10.51.28;	author tb;	state Exp;
branches;
next	1.284;
commitid	FXxbj9UfVSl1qsoU;

1.284
date	2016.11.01.00.08.35;	author tb;	state Exp;
branches;
next	1.283;
commitid	o7AhqDNz7foezjHt;

1.283
date	2016.10.31.20.59.33;	author tb;	state Exp;
branches;
next	1.282;
commitid	ABDGm0dFUogoBybA;

1.282
date	2016.10.20.13.43.32;	author tb;	state Exp;
branches;
next	1.281;
commitid	3pxw51EykvV76qaf;

1.281
date	2016.09.21.10.56.01;	author tb;	state Exp;
branches;
next	1.280;
commitid	JVtBuFI5yfEs3Ezh;

1.280
date	2016.09.09.15.06.30;	author tb;	state Exp;
branches;
next	1.279;
commitid	mValxflnVyBSVaxW;

1.279
date	2016.09.09.14.44.09;	author tb;	state Exp;
branches;
next	1.278;
commitid	xn25Yywlq8gCggmp;

1.278
date	2016.09.09.14.32.44;	author tb;	state Exp;
branches;
next	1.277;
commitid	6fvbsefHxwmEO1Tc;

1.277
date	2016.09.01.12.05.14;	author tj;	state Exp;
branches;
next	1.276;
commitid	246a4S45DY24D3JM;

1.276
date	2016.08.15.02.22.13;	author tb;	state Exp;
branches;
next	1.275;
commitid	3DeixV5YkPOb78RN;

1.275
date	2016.06.19.19.16.52;	author tj;	state Exp;
branches;
next	1.274;
commitid	GLeYXZv1n2JJBxbx;

1.274
date	2016.06.18.22.22.29;	author tj;	state Exp;
branches;
next	1.273;
commitid	MvJ3CtS93kLIrgeV;

1.273
date	2016.06.17.15.12.02;	author tb;	state Exp;
branches;
next	1.272;
commitid	lmTcvwQYhsABNECe;

1.272
date	2016.06.17.10.40.41;	author tb;	state Exp;
branches;
next	1.271;
commitid	m20TJDY4Mr6W2G0Q;

1.271
date	2016.06.16.18.13.56;	author tj;	state Exp;
branches;
next	1.270;
commitid	PaFjTWl73gdttkaj;

1.270
date	2016.06.13.22.41.07;	author tj;	state Exp;
branches;
next	1.269;
commitid	eAzyVfqucmrtowTW;

1.269
date	2016.05.06.05.33.13;	author tb;	state Exp;
branches;
next	1.268;
commitid	t2cXt1zsz5fRWSml;

1.268
date	2016.05.06.05.27.33;	author tb;	state Exp;
branches;
next	1.267;
commitid	bxyaYb9FN9sCPD2a;

1.267
date	2016.05.01.16.59.24;	author tj;	state Exp;
branches;
next	1.266;
commitid	wQHTVXn4QW0tBAwG;

1.266
date	2016.04.27.22.53.06;	author tb;	state Exp;
branches;
next	1.265;
commitid	OgdWcPXevW01EJgO;

1.265
date	2016.04.27.22.47.46;	author tb;	state Exp;
branches;
next	1.264;
commitid	b0DjuSnogv8Gl3sc;

1.264
date	2016.04.27.09.28.12;	author tb;	state Exp;
branches;
next	1.263;
commitid	uXLzmF3fHqWmE9KB;

1.263
date	2016.04.27.09.26.05;	author tb;	state Exp;
branches;
next	1.262;
commitid	4GRUOsA5Lp0Og9Lv;

1.262
date	2016.04.22.00.22.25;	author tb;	state Exp;
branches;
next	1.261;
commitid	KPEqP6HJWt8sRSmy;

1.261
date	2016.04.21.22.48.29;	author tb;	state Exp;
branches;
next	1.260;
commitid	M1DyPMRgiNyiYn7n;

1.260
date	2016.04.21.00.47.30;	author tb;	state Exp;
branches;
next	1.259;
commitid	sKLcSVXJQumhAMaJ;

1.259
date	2016.04.18.05.36.57;	author tb;	state Exp;
branches;
next	1.258;
commitid	Es6lOUJSRkKVHZnF;

1.258
date	2016.04.17.22.07.43;	author tb;	state Exp;
branches;
next	1.257;
commitid	mUgMgUjqv0jLhvpV;

1.257
date	2016.04.17.16.49.37;	author tb;	state Exp;
branches;
next	1.256;
commitid	yZIY1vdgVYIMX090;

1.256
date	2016.04.17.15.53.09;	author tj;	state Exp;
branches;
next	1.255;
commitid	4FmpFCTeSFXifXPE;

1.255
date	2016.04.17.15.18.42;	author tb;	state Exp;
branches;
next	1.254;
commitid	fn92Nlp9YFz4JyVp;

1.254
date	2016.04.17.00.11.18;	author tb;	state Exp;
branches;
next	1.253;
commitid	VKOXy7SAqpdQzWWK;

1.253
date	2016.04.16.23.57.35;	author tb;	state Exp;
branches;
next	1.252;
commitid	Luyk8l4R6PzoHhsZ;

1.252
date	2016.04.16.22.21.51;	author tb;	state Exp;
branches;
next	1.251;
commitid	1x6CZt09AVQwtKeZ;

1.251
date	2016.04.16.12.11.39;	author tb;	state Exp;
branches;
next	1.250;
commitid	u6bhcM9vmXK1DJ6O;

1.250
date	2016.04.16.08.48.39;	author tb;	state Exp;
branches;
next	1.249;
commitid	z6O0kK3A6Nm6fNoN;

1.249
date	2016.04.16.00.30.41;	author tj;	state Exp;
branches;
next	1.248;
commitid	rTxoenHHaeutOff1;

1.248
date	2016.04.15.22.19.22;	author tj;	state Exp;
branches;
next	1.247;
commitid	SbVa2HBPaB5JhGVM;

1.247
date	2016.04.15.20.39.49;	author tb;	state Exp;
branches;
next	1.246;
commitid	jwteSMEb4rFzI8UA;

1.246
date	2016.04.15.16.42.34;	author tj;	state Exp;
branches;
next	1.245;
commitid	4iGhbtsBAhiGE70P;

1.245
date	2016.04.13.19.42.15;	author tj;	state Exp;
branches;
next	1.244;
commitid	Upud14cEsG7kKcj0;

1.244
date	2016.04.02.13.12.28;	author tb;	state Exp;
branches;
next	1.243;
commitid	RWtypMNiIiLQH4nb;

1.243
date	2016.04.02.12.56.39;	author rpe;	state Exp;
branches;
next	1.242;
commitid	kI0Hky3IbItvVLNM;

1.242
date	2016.04.02.10.48.10;	author matthieu;	state Exp;
branches;
next	1.241;
commitid	OxAb8YbgukwgJK4Q;

1.241
date	2016.04.02.08.56.31;	author tb;	state Exp;
branches;
next	1.240;
commitid	FEP63olPO5jcxTAr;

1.240
date	2016.04.02.08.51.24;	author rpe;	state Exp;
branches;
next	1.239;
commitid	2jUx8ARxaxCuCtJP;

1.239
date	2016.04.02.08.37.15;	author rpe;	state Exp;
branches;
next	1.238;
commitid	5bzB7p8mURVpafUR;

1.238
date	2016.04.02.02.58.32;	author tb;	state Exp;
branches;
next	1.237;
commitid	TiSSVv5qCZfy21vH;

1.237
date	2016.03.29.18.05.58;	author tb;	state Exp;
branches;
next	1.236;
commitid	tMiY4YsWwXJd5WDP;

1.236
date	2016.03.29.01.27.39;	author tb;	state Exp;
branches;
next	1.235;
commitid	4Y8oU6GBrSY1UOfW;

1.235
date	2016.03.27.19.52.09;	author sthen;	state Exp;
branches;
next	1.234;
commitid	hi2ObFv9LGB98JY5;

1.234
date	2016.03.22.10.54.47;	author sthen;	state Exp;
branches;
next	1.233;
commitid	cyODCFvIgxpUoVc0;

1.233
date	2016.03.21.08.24.24;	author tb;	state Exp;
branches;
next	1.232;
commitid	FszPYViUktw26pO0;

1.232
date	2016.03.21.05.46.21;	author beck;	state Exp;
branches;
next	1.231;
commitid	zEx6zFkNSFFExu0v;

1.231
date	2016.03.20.22.24.57;	author tj;	state Exp;
branches;
next	1.230;
commitid	oo3sAEjx5cFwFwEI;

1.230
date	2016.02.25.00.15.41;	author tj;	state Exp;
branches;
next	1.229;
commitid	qHjvJKo2USP0goCw;

1.229
date	2016.02.25.00.06.19;	author tj;	state Exp;
branches;
next	1.228;
commitid	AhXnbgDOGCt5vCMC;

1.228
date	2016.02.22.21.00.07;	author tj;	state Exp;
branches;
next	1.227;
commitid	8tMVwTSDhETmt9xc;

1.227
date	2016.02.20.22.59.20;	author tj;	state Exp;
branches;
next	1.226;
commitid	8IPwAs1etKEHjS9q;

1.226
date	2016.02.04.23.37.30;	author tj;	state Exp;
branches;
next	1.225;
commitid	rssN7PHWqaFiAVtj;

1.225
date	2016.01.31.16.17.00;	author tj;	state Exp;
branches;
next	1.224;
commitid	dnjfhmtu4OiaWSeV;

1.224
date	2016.01.27.15.27.08;	author tj;	state Exp;
branches;
next	1.223;
commitid	FCbVeKm2Of27Crl1;

1.223
date	2016.01.26.20.58.30;	author tj;	state Exp;
branches;
next	1.222;
commitid	elNG1gXRQ2O8fy29;

1.222
date	2016.01.25.05.27.44;	author tj;	state Exp;
branches;
next	1.221;
commitid	9ohAreU5iLPDZbdn;

1.221
date	2016.01.24.21.40.35;	author tj;	state Exp;
branches;
next	1.220;
commitid	bFaFSpgHCeTHjIC5;

1.220
date	2016.01.18.16.15.55;	author tj;	state Exp;
branches;
next	1.219;
commitid	IAxTIv5FSULzkGQJ;

1.219
date	2016.01.11.06.30.13;	author tb;	state Exp;
branches;
next	1.218;
commitid	kpxTb5fPDcXr5p29;

1.218
date	2015.11.24.00.18.50;	author sthen;	state Exp;
branches;
next	1.217;
commitid	hlGS2bvAPUY4zgIu;

1.217
date	2015.11.23.03.16.31;	author deraadt;	state Exp;
branches;
next	1.216;
commitid	agWVJvjBEQwPNRmg;

1.216
date	2015.10.18.19.42.11;	author nick;	state Exp;
branches;
next	1.215;
commitid	HJnmhJAcdZq1TNFu;

1.215
date	2015.09.27.19.20.00;	author nick;	state Exp;
branches;
next	1.214;
commitid	go1TTouoZxSLQXce;

1.214
date	2015.08.25.15.00.17;	author nick;	state Exp;
branches;
next	1.213;
commitid	Js4efBFkC91Jo18e;

1.213
date	2015.08.19.01.35.04;	author nick;	state Exp;
branches;
next	1.212;
commitid	vpGLDdtluUjPtLY7;

1.212
date	2015.08.19.01.30.21;	author nick;	state Exp;
branches;
next	1.211;
commitid	DFqXWGIfnub0Kgzn;

1.211
date	2015.07.02.05.49.04;	author bentley;	state Exp;
branches;
next	1.210;
commitid	AP3UllesavMDEUhQ;

1.210
date	2015.05.11.11.18.30;	author sthen;	state Exp;
branches;
next	1.209;
commitid	wRrXxcro6dFYiwF8;

1.209
date	2015.05.01.12.54.25;	author nick;	state Exp;
branches;
next	1.208;
commitid	82X28PemkSo0iraJ;

1.208
date	2015.04.30.23.38.57;	author nick;	state Exp;
branches;
next	1.207;
commitid	uIacNW3dhb39XNuY;

1.207
date	2015.04.01.12.06.58;	author nick;	state Exp;
branches;
next	1.206;
commitid	NABAiFRWxXO59Ow2;

1.206
date	2014.12.01.09.49.47;	author bentley;	state Exp;
branches;
next	1.205;
commitid	VffT7s4nM0NK88NG;

1.205
date	2014.11.17.12.39.32;	author nick;	state Exp;
branches;
next	1.204;
commitid	z7oVmCoJiYuZYbYM;

1.204
date	2014.11.03.03.56.35;	author nick;	state Exp;
branches;
next	1.203;
commitid	9T278faEvg5QPjoZ;

1.203
date	2014.11.01.13.42.51;	author nick;	state Exp;
branches;
next	1.202;
commitid	ZgANDuwHdulMn8Ng;

1.202
date	2014.08.07.01.51.34;	author nick;	state Exp;
branches;
next	1.201;
commitid	RZYBSFOBtVHeVEME;

1.201
date	2014.07.22.11.33.06;	author nick;	state Exp;
branches;
next	1.200;
commitid	fCZw3cXiq1GZU0yP;

1.200
date	2014.07.22.00.49.08;	author nick;	state Exp;
branches;
next	1.199;
commitid	QGz07i8BxDNqlMsw;

1.199
date	2014.05.01.15.01.13;	author nick;	state Exp;
branches;
next	1.198;

1.198
date	2014.03.30.19.13.39;	author nick;	state Exp;
branches;
next	1.197;

1.197
date	2013.11.01.14.05.56;	author nick;	state Exp;
branches;
next	1.196;

1.196
date	2013.07.19.14.41.04;	author bcallah;	state Exp;
branches;
next	1.195;

1.195
date	2013.05.01.13.16.32;	author nick;	state Exp;
branches;
next	1.194;

1.194
date	2013.02.10.17.12.59;	author nick;	state Exp;
branches;
next	1.193;

1.193
date	2012.11.01.15.05.30;	author nick;	state Exp;
branches;
next	1.192;

1.192
date	2012.05.01.14.35.14;	author nick;	state Exp;
branches;
next	1.191;

1.191
date	2012.03.27.00.22.22;	author nick;	state Exp;
branches;
next	1.190;

1.190
date	2011.12.31.09.49.59;	author jj;	state Exp;
branches;
next	1.189;

1.189
date	2011.11.28.03.24.31;	author nick;	state Exp;
branches;
next	1.188;

1.188
date	2011.11.01.10.52.27;	author nick;	state Exp;
branches;
next	1.187;

1.187
date	2011.07.30.01.44.53;	author nick;	state Exp;
branches;
next	1.186;

1.186
date	2011.05.16.23.27.43;	author nick;	state Exp;
branches;
next	1.185;

1.185
date	2011.05.01.13.08.58;	author nick;	state Exp;
branches;
next	1.184;

1.184
date	2011.04.04.11.08.30;	author lum;	state Exp;
branches;
next	1.183;

1.183
date	2011.04.04.01.32.28;	author lum;	state Exp;
branches;
next	1.182;

1.182
date	2011.02.04.03.25.14;	author lum;	state Exp;
branches;
next	1.181;

1.181
date	2011.01.29.03.33.30;	author nick;	state Exp;
branches;
next	1.180;

1.180
date	2010.11.05.02.35.14;	author nick;	state Exp;
branches;
next	1.179;

1.179
date	2010.11.01.09.48.45;	author nick;	state Exp;
branches;
next	1.178;

1.178
date	2010.05.19.12.41.02;	author nick;	state Exp;
branches;
next	1.177;

1.177
date	2009.11.30.03.06.52;	author nick;	state Exp;
branches;
next	1.176;

1.176
date	2009.11.30.03.05.29;	author nick;	state Exp;
branches;
next	1.175;

1.175
date	2009.11.01.18.43.01;	author nick;	state Exp;
branches;
next	1.174;

1.174
date	2009.10.16.19.07.37;	author nick;	state Exp;
branches;
next	1.173;

1.173
date	2009.09.09.02.02.54;	author nick;	state Exp;
branches;
next	1.172;

1.172
date	2009.09.01.00.39.14;	author nick;	state Exp;
branches;
next	1.171;

1.171
date	2009.04.30.17.19.11;	author nick;	state Exp;
branches;
next	1.170;

1.170
date	2009.03.11.23.30.48;	author nick;	state Exp;
branches;
next	1.169;

1.169
date	2009.03.11.23.29.39;	author nick;	state Exp;
branches;
next	1.168;

1.168
date	2008.11.30.11.01.26;	author tobias;	state Exp;
branches;
next	1.167;

1.167
date	2008.11.25.00.59.46;	author nick;	state Exp;
branches;
next	1.166;

1.166
date	2008.11.12.01.48.08;	author nick;	state Exp;
branches;
next	1.165;

1.165
date	2008.10.31.16.52.29;	author nick;	state Exp;
branches;
next	1.164;

1.164
date	2008.05.24.03.28.14;	author nick;	state Exp;
branches;
next	1.163;

1.163
date	2008.05.11.08.02.09;	author tobias;	state Exp;
branches;
next	1.162;

1.162
date	2008.04.30.21.24.58;	author nick;	state Exp;
branches;
next	1.161;

1.161
date	2007.11.18.10.00.45;	author steven;	state Exp;
branches;
next	1.160;

1.160
date	2007.11.13.01.56.19;	author nick;	state Exp;
branches;
next	1.159;

1.159
date	2007.11.07.06.10.52;	author jmc;	state Exp;
branches;
next	1.158;

1.158
date	2007.11.05.07.56.27;	author steven;	state Exp;
branches;
next	1.157;

1.157
date	2007.11.03.13.48.01;	author tobias;	state Exp;
branches;
next	1.156;

1.156
date	2007.11.01.02.11.00;	author nick;	state Exp;
branches;
next	1.155;

1.155
date	2007.10.25.16.51.00;	author tobias;	state Exp;
branches;
next	1.154;

1.154
date	2007.10.24.22.17.46;	author nick;	state Exp;
branches;
next	1.153;

1.153
date	2007.09.19.07.26.59;	author steven;	state Exp;
branches;
next	1.152;

1.152
date	2007.08.16.03.06.27;	author nick;	state Exp;
branches;
next	1.151;

1.151
date	2007.08.07.22.22.06;	author nick;	state Exp;
branches;
next	1.150;

1.150
date	2007.07.09.17.42.06;	author aanriot;	state Exp;
branches;
next	1.149;

1.149
date	2007.05.01.16.27.46;	author nick;	state Exp;
branches;
next	1.148;

1.148
date	2007.04.29.02.46.01;	author nick;	state Exp;
branches;
next	1.147;

1.147
date	2007.03.18.21.09.08;	author nick;	state Exp;
branches;
next	1.146;

1.146
date	2007.03.18.19.45.46;	author nick;	state Exp;
branches;
next	1.145;

1.145
date	2006.12.08.01.21.57;	author nick;	state Exp;
branches;
next	1.144;

1.144
date	2006.11.01.06.24.30;	author steven;	state Exp;
branches;
next	1.143;

1.143
date	2006.11.01.01.41.18;	author nick;	state Exp;
branches;
next	1.142;

1.142
date	2006.10.08.13.43.39;	author aanriot;	state Exp;
branches;
next	1.141;

1.141
date	2006.10.07.21.41.18;	author nick;	state Exp;
branches;
next	1.140;

1.140
date	2006.05.14.15.57.39;	author nick;	state Exp;
branches;
next	1.139;

1.139
date	2006.05.03.01.47.19;	author nick;	state Exp;
branches;
next	1.138;

1.138
date	2006.05.03.01.43.33;	author nick;	state Exp;
branches;
next	1.137;

1.137
date	2006.05.01.01.02.59;	author nick;	state Exp;
branches;
next	1.136;

1.136
date	2006.02.15.03.40.53;	author nick;	state Exp;
branches;
next	1.135;

1.135
date	2006.01.01.19.23.12;	author nick;	state Exp;
branches;
next	1.134;

1.134
date	2005.12.06.20.34.28;	author steven;	state Exp;
branches;
next	1.133;

1.133
date	2005.12.03.23.12.10;	author nick;	state Exp;
branches;
next	1.132;

1.132
date	2005.11.24.05.41.56;	author steven;	state Exp;
branches;
next	1.131;

1.131
date	2005.11.16.15.18.35;	author saad;	state Exp;
branches;
next	1.130;

1.130
date	2005.11.14.11.42.01;	author nick;	state Exp;
branches;
next	1.129;

1.129
date	2005.11.14.03.12.11;	author nick;	state Exp;
branches;
next	1.128;

1.128
date	2005.11.02.02.23.27;	author nick;	state Exp;
branches;
next	1.127;

1.127
date	2005.11.01.11.39.57;	author nick;	state Exp;
branches;
next	1.126;

1.126
date	2005.09.29.10.49.49;	author nick;	state Exp;
branches;
next	1.125;

1.125
date	2005.09.22.23.43.30;	author nick;	state Exp;
branches;
next	1.124;

1.124
date	2005.08.11.01.21.35;	author nick;	state Exp;
branches;
next	1.123;

1.123
date	2005.05.28.15.21.43;	author david;	state Exp;
branches;
next	1.122;

1.122
date	2005.05.27.23.09.36;	author nick;	state Exp;
branches;
next	1.121;

1.121
date	2005.05.21.00.45.03;	author nick;	state Exp;
branches;
next	1.120;

1.120
date	2005.05.20.10.28.32;	author nick;	state Exp;
branches;
next	1.119;

1.119
date	2005.05.19.16.54.27;	author nick;	state Exp;
branches;
next	1.118;

1.118
date	2005.04.19.01.00.00;	author nick;	state Exp;
branches;
next	1.117;

1.117
date	2005.03.24.01.15.32;	author nick;	state Exp;
branches;
next	1.116;

1.116
date	2005.03.12.16.02.02;	author nick;	state Exp;
branches;
next	1.115;

1.115
date	2005.02.12.19.08.41;	author nick;	state Exp;
branches;
next	1.114;

1.114
date	2005.02.10.13.07.19;	author nick;	state Exp;
branches;
next	1.113;

1.113
date	2005.02.09.19.59.33;	author nick;	state Exp;
branches;
next	1.112;

1.112
date	2005.02.09.03.17.59;	author nick;	state Exp;
branches;
next	1.111;

1.111
date	2005.02.08.23.14.44;	author nick;	state Exp;
branches;
next	1.110;

1.110
date	2005.02.08.22.57.20;	author nick;	state Exp;
branches;
next	1.109;

1.109
date	2005.02.08.22.40.27;	author nick;	state Exp;
branches;
next	1.108;

1.108
date	2005.02.08.11.45.08;	author tom;	state Exp;
branches;
next	1.107;

1.107
date	2005.02.07.23.10.24;	author tom;	state Exp;
branches;
next	1.106;

1.106
date	2005.02.07.12.43.13;	author tom;	state Exp;
branches;
next	1.105;

1.105
date	2005.02.07.12.34.40;	author tom;	state Exp;
branches;
next	1.104;

1.104
date	2005.02.07.12.26.07;	author tom;	state Exp;
branches;
next	1.103;

1.103
date	2005.02.07.12.22.26;	author tom;	state Exp;
branches;
next	1.102;

1.102
date	2005.02.06.22.26.12;	author nick;	state Exp;
branches;
next	1.101;

1.101
date	2005.02.06.21.31.18;	author nick;	state Exp;
branches;
next	1.100;

1.100
date	2005.02.06.18.33.09;	author nick;	state Exp;
branches;
next	1.99;

1.99
date	2004.11.01.23.31.53;	author nick;	state Exp;
branches;
next	1.98;

1.98
date	2004.10.29.17.26.01;	author nick;	state Exp;
branches;
next	1.97;

1.97
date	2004.10.20.23.04.26;	author nick;	state Exp;
branches;
next	1.96;

1.96
date	2004.09.22.15.05.56;	author nick;	state Exp;
branches;
next	1.95;

1.95
date	2004.08.17.16.08.17;	author nick;	state Exp;
branches;
next	1.94;

1.94
date	2004.04.30.18.06.20;	author nick;	state Exp;
branches;
next	1.93;

1.93
date	2004.03.18.23.53.53;	author nick;	state Exp;
branches;
next	1.92;

1.92
date	2004.02.26.21.27.59;	author jufi;	state Exp;
branches;
next	1.91;

1.91
date	2004.02.06.01.43.21;	author nick;	state Exp;
branches;
next	1.90;

1.90
date	2004.01.01.04.13.34;	author nick;	state Exp;
branches;
next	1.89;

1.89
date	2003.11.24.03.20.00;	author nick;	state Exp;
branches;
next	1.88;

1.88
date	2003.10.30.22.43.42;	author nick;	state Exp;
branches;
next	1.87;

1.87
date	2003.10.10.00.37.54;	author nick;	state Exp;
branches;
next	1.86;

1.86
date	2003.06.26.19.31.32;	author nick;	state Exp;
branches;
next	1.85;

1.85
date	2003.06.26.19.26.42;	author nick;	state Exp;
branches;
next	1.84;

1.84
date	2003.06.16.13.29.00;	author pb;	state Exp;
branches;
next	1.83;

1.83
date	2003.05.01.01.47.41;	author nick;	state Exp;
branches;
next	1.82;

1.82
date	2003.04.10.18.18.43;	author nick;	state Exp;
branches;
next	1.81;

1.81
date	2003.04.10.02.11.12;	author nick;	state Exp;
branches;
next	1.80;

1.80
date	2003.04.04.17.49.08;	author nick;	state Exp;
branches;
next	1.79;

1.79
date	2003.03.18.03.41.04;	author nick;	state Exp;
branches;
next	1.78;

1.78
date	2003.02.28.00.34.28;	author nick;	state Exp;
branches;
next	1.77;

1.77
date	2003.02.20.03.09.55;	author nick;	state Exp;
branches;
next	1.76;

1.76
date	2003.02.18.03.02.18;	author nick;	state Exp;
branches;
next	1.75;

1.75
date	2003.01.01.13.02.00;	author nick;	state Exp;
branches;
next	1.74;

1.74
date	2002.11.04.18.18.38;	author nick;	state Exp;
branches;
next	1.73;

1.73
date	2002.11.01.15.27.13;	author nick;	state Exp;
branches;
next	1.72;

1.72
date	2002.09.03.01.30.29;	author nick;	state Exp;
branches;
next	1.71;

1.71
date	2002.09.02.02.48.31;	author nick;	state Exp;
branches;
next	1.70;

1.70
date	2002.09.02.00.56.22;	author nick;	state Exp;
branches;
next	1.69;

1.69
date	2002.08.07.23.35.32;	author nick;	state Exp;
branches;
next	1.68;

1.68
date	2002.07.22.00.41.22;	author nick;	state Exp;
branches;
next	1.67;

1.67
date	2002.07.21.23.15.31;	author nick;	state Exp;
branches;
next	1.66;

1.66
date	2002.07.12.02.51.35;	author nick;	state Exp;
branches;
next	1.65;

1.65
date	2002.07.02.00.30.16;	author nick;	state Exp;
branches;
next	1.64;

1.64
date	2002.06.28.19.50.12;	author jufi;	state Exp;
branches;
next	1.63;

1.63
date	2002.06.17.12.49.59;	author miod;	state Exp;
branches;
next	1.62;

1.62
date	2002.06.08.12.05.26;	author nick;	state Exp;
branches;
next	1.61;

1.61
date	2002.06.07.23.05.13;	author nick;	state Exp;
branches;
next	1.60;

1.60
date	2002.06.03.21.42.15;	author nick;	state Exp;
branches;
next	1.59;

1.59
date	2002.05.20.01.03.28;	author nick;	state Exp;
branches;
next	1.58;

1.58
date	2002.04.24.02.51.24;	author nick;	state Exp;
branches;
next	1.57;

1.57
date	2002.03.20.03.54.33;	author nick;	state Exp;
branches;
next	1.56;

1.56
date	2002.02.20.03.09.02;	author nick;	state Exp;
branches;
next	1.55;

1.55
date	2002.01.25.03.44.01;	author nick;	state Exp;
branches;
next	1.54;

1.54
date	2002.01.21.20.28.25;	author nick;	state Exp;
branches;
next	1.53;

1.53
date	2002.01.13.00.00.32;	author ericj;	state Exp;
branches;
next	1.52;

1.52
date	2002.01.12.01.39.30;	author ericj;	state Exp;
branches;
next	1.51;

1.51
date	2001.09.03.15.37.01;	author mickey;	state Exp;
branches;
next	1.50;

1.50
date	2001.08.25.09.31.33;	author jufi;	state Exp;
branches;
next	1.49;

1.49
date	2001.08.08.21.06.32;	author jsyn;	state Exp;
branches;
next	1.48;

1.48
date	2001.05.05.02.45.13;	author ericj;	state Exp;
branches;
next	1.47;

1.47
date	2001.03.26.17.14.10;	author todd;	state Exp;
branches;
next	1.46;

1.46
date	2001.01.27.22.19.47;	author ericj;	state Exp;
branches;
next	1.45;

1.45
date	2000.09.17.19.56.18;	author ericj;	state Exp;
branches;
next	1.44;

1.44
date	2000.05.14.21.24.25;	author chris;	state Exp;
branches;
next	1.43;

1.43
date	2000.03.10.02.47.22;	author wvdputte;	state Exp;
branches;
next	1.42;

1.42
date	2000.02.24.16.08.12;	author chris;	state Exp;
branches;
next	1.41;

1.41
date	2000.02.12.21.35.42;	author aaron;	state Exp;
branches;
next	1.40;

1.40
date	2000.01.05.07.36.00;	author chris;	state Exp;
branches;
next	1.39;

1.39
date	2000.01.05.07.26.36;	author chris;	state Exp;
branches;
next	1.38;

1.38
date	2000.01.05.07.21.50;	author chris;	state Exp;
branches;
next	1.37;

1.37
date	99.12.11.00.44.13;	author ericj;	state Exp;
branches;
next	1.36;

1.36
date	99.12.05.21.54.32;	author chris;	state Exp;
branches;
next	1.35;

1.35
date	99.12.05.21.52.36;	author chris;	state Exp;
branches;
next	1.34;

1.34
date	99.11.08.19.23.04;	author ericj;	state Exp;
branches;
next	1.33;

1.33
date	99.10.27.20.27.43;	author ericj;	state Exp;
branches;
next	1.32;

1.32
date	99.09.24.01.46.14;	author ericj;	state Exp;
branches;
next	1.31;

1.31
date	99.09.15.05.16.23;	author ericj;	state Exp;
branches;
next	1.30;

1.30
date	99.09.07.20.38.28;	author ericj;	state Exp;
branches;
next	1.29;

1.29
date	99.09.07.18.30.16;	author ericj;	state Exp;
branches;
next	1.28;

1.28
date	99.09.02.03.54.01;	author ericj;	state Exp;
branches;
next	1.27;

1.27
date	99.07.26.15.10.46;	author ericj;	state Exp;
branches;
next	1.26;

1.26
date	99.07.22.20.34.26;	author ericj;	state Exp;
branches;
next	1.25;

1.25
date	99.07.06.20.44.23;	author ericj;	state Exp;
branches;
next	1.24;

1.24
date	99.07.03.20.16.25;	author ericj;	state Exp;
branches;
next	1.23;

1.23
date	99.07.03.05.51.35;	author ericj;	state Exp;
branches;
next	1.22;

1.22
date	99.06.30.16.01.27;	author ericj;	state Exp;
branches;
next	1.21;

1.21
date	99.06.27.21.32.23;	author ericj;	state Exp;
branches;
next	1.20;

1.20
date	99.06.27.18.47.42;	author ericj;	state Exp;
branches;
next	1.19;

1.19
date	99.06.25.17.51.22;	author ericj;	state Exp;
branches;
next	1.18;

1.18
date	99.06.25.15.57.35;	author ericj;	state Exp;
branches;
next	1.17;

1.17
date	99.06.25.00.41.44;	author ericj;	state Exp;
branches;
next	1.16;

1.16
date	99.06.24.21.47.27;	author ericj;	state Exp;
branches;
next	1.15;

1.15
date	99.06.08.23.37.52;	author ericj;	state Exp;
branches;
next	1.14;

1.14
date	99.06.08.23.10.02;	author ericj;	state Exp;
branches;
next	1.13;

1.13
date	99.06.08.21.23.24;	author ericj;	state Exp;
branches;
next	1.12;

1.12
date	99.05.25.21.23.32;	author ericj;	state Exp;
branches;
next	1.11;

1.11
date	99.03.14.19.19.19;	author ericj;	state Exp;
branches;
next	1.10;

1.10
date	99.03.08.00.45.07;	author wvdputte;	state Exp;
branches;
next	1.9;

1.9
date	99.02.21.21.43.33;	author wvdputte;	state Exp;
branches;
next	1.8;

1.8
date	99.01.04.22.28.19;	author ericj;	state Exp;
branches;
next	1.7;

1.7
date	99.01.03.20.22.04;	author ericj;	state Exp;
branches;
next	1.6;

1.6
date	99.01.03.00.24.10;	author ericj;	state Exp;
branches;
next	1.5;

1.5
date	99.01.01.21.56.04;	author ericj;	state Exp;
branches;
next	1.4;

1.4
date	98.12.21.21.37.28;	author ericj;	state Exp;
branches;
next	1.3;

1.3
date	98.12.18.03.47.52;	author deraadt;	state Exp;
branches;
next	1.2;

1.2
date	98.12.17.22.44.54;	author ericj;	state Exp;
branches;
next	1.1;

1.1
date	98.12.17.21.00.33;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.290
log
@despite its name, the faq has very few <h2> titles written in the form
of a question. rename these last survivors to the standard "topic" title.
zap a short blurb about df while here.

ok tb
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>

<!-- If you make edits to any FAQ documents, please start each sentence
     on a new line, and try to keep the general formatting consistent
     with the rest of the pages -->

<title>OpenBSD FAQ: Building the System from Source</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="copyright" content="This document copyright 1998-2017 by OpenBSD.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../openbsd.css">
<link rel="canonical" href="https://www.openbsd.org/faq/faq5.html">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<h2>
<a href="../index.html">
<font color="#0000ff"><i>Open</i></font><font color="#000084">BSD</font></a>
<font color="#e00000">FAQ - Building the System from Source</font>
<small>
<a href="index.html" style="font-weight:normal; float:right">[FAQ Index]</a>
</small>
</h2>
<hr>

<ul>
<li><a href="#Flavors"    >OpenBSD's flavors</a>
<li><a href="#Snapshots"  >Development snapshots</a>
<li><a href="#Bld"        >Building OpenBSD from source</a>
<li><a href="#Release"    >Making a release</a>
<li><a href="#Xbld"       >Building X</a>
<li><a href="#buildprobs" >Common problems when compiling</a>
<li><a href="#Miscellanea">Miscellaneous questions and tips</a>
<li><a href="#Custom"     >Custom kernels</a>
</ul>
<hr>

<h2 id="Flavors">OpenBSD's flavors</h2>

There are three flavors of OpenBSD:

<ul>
  <li><b>-release:</b> The version of OpenBSD shipped every six months.
  <li><b>-stable:</b> The <i>-stable</i> branch is <i>-release</i> plus patches
      found on the <a href="../errata.html">errata page</a>.
      When very important fixes are made to <i>-current</i>, they are backported
      to the supported <i>-stable</i> branches.
  <li><b>-current:</b> The <i>-current</i> branch is where active development
      work is done.
      Every six months, <i>-current</i> is tagged and becomes the next
      <i>-release</i>.
</ul>

Graphically, the development of these flavors looks something like this:

<blockquote><pre>
       ,------o-----------o----X                    5.7 Stable
       |      .           .
       |      .    ,------o---------o----X          5.8 Stable
       |      .    |      .         .
       |      .    |      .    ,----o----------o--&gt; 5.9 Stable
       |      .    |      .    |    .          .
       |      .    |      .    |    .    ,-----o--&gt; 6.0 Stable
       |      .    |      .    |    .    |     .
       |      .    |      .    |    .    |     .
 --&gt;5.7Rel-----&gt;5.8Rel-----&gt;5.9Rel-----&gt;6.0Rel----&gt; Current

          Time ---&gt;
</pre></blockquote>
<!-- XXXrelease -->

In the above illustration, the vertical dotted lines denote bug fixes being
incorporated into the <i>-stable</i> branches.

<p>
The name <i>-stable</i> refers to API-stability: the way programs talk to the
OS is not changed in this branch.
In contrast, in <i>-current</i>, the APIs are changing and evolving.

<p>
New users should be running either <i>-stable</i> or <i>-release</i>.
That being said, many people do run <i>-current</i> on production systems to
help catch bugs and test new features.

<h2 id="Snapshots">Development snapshots</h2>

Between formal releases of OpenBSD, <i>snapshots</i> are made available through
the <a href="../ftp.html">mirrors</a>.
These are builds of whatever code is in the tree at the instant the builder
grabbed a copy of the code for that particular platform.

<p>
It is possible that you may uncover bugs in snapshots.
This is one of the reasons why they are built and distributed.
If you find a bug, make sure it is <a href="../report.html">reported</a>.

<p>
A recent snapshot is usually all you need to run <i>-current</i>.
If you wish to build it from source, starting from the latest snapshot is
required.
Check <a href="current.html">following <i>-current</i> and using snapshots</a>
for any configuration changes or extra steps necessary to build <i>-current</i>
from source.

<h2 id="Bld">Building OpenBSD from source</h2>

Building OpenBSD from source involves a number of steps:

<ul>
  <li>Upgrading to the closest available binaries
  <li>Fetching the source code
  <li>Building a new kernel and userland, as explained in steps 2 and 3 of
      <a href="http://man.openbsd.org/OpenBSD-6.0/release">release(8)</a>
  <li>Optionally, <a href="#Release">making a release</a> and
      <a href="#Xbld">building X</a>
</ul>

This FAQ section is intended to help you with the necessary preparation.
The main reference is
<a href="http://man.openbsd.org/OpenBSD-6.0/release">release(8)</a>.

<h3 id="BldBinary">Upgrading to the closest available binaries</h3>

Do not attempt to go from one release to another by compiling from source.

<p>
Make sure you have the closest available binaries installed.
This is either OpenBSD x.y<i>-release</i> if you want to build
OpenBSD x.y<i>-stable</i>, or the latest snapshot if you wish to build
<i>-current</i>.

<h3 id="BldGetSrc">Fetching the source code</h3>

OpenBSD uses the <a href="https://savannah.nongnu.org/projects/cvs">CVS</a>
version control system to manage its source.
The <a href="http://man.openbsd.org/cvs">cvs(1)</a> program is used to pull a
copy of the desired source to your local machine for compilation.
You can also maintain a local CVS repository using the
<a href="../cvsync.html">CVSync</a> or rsync programs, available as
<a href="faq15.html#PkgMgmt">packages</a>.
An introduction to <a href="http://man.openbsd.org/cvs">cvs(1)</a>
and detailed instructions for fetching the source trees are on the
<a href="../anoncvs.html">anonymous CVS</a> page.
First, you must <tt>cvs checkout</tt> the source tree.
After that, you maintain the tree by running <tt>cvs update</tt> to pull
updated files to your local tree.

<h4 id="wsrc">Avoiding root privileges</h4>

Avoid running <a href="http://man.openbsd.org/cvs">cvs(1)</a> as root.
The <tt>/usr/src</tt> directory (where your source will typically go) is
writable by the <tt>wsrc</tt> group by default, so add users that need
to use <a href="http://man.openbsd.org/cvs">cvs(1)</a> to that group.

<blockquote><pre>
# <b>user mod -G wsrc exampleuser</b>
</pre></blockquote>

This change takes effect with exampleuser's next login.

<p>
If you want to fetch xenocara or ports as this user, you must create the
directories and set their permissions manually.

<blockquote><pre>
# <b>cd /usr</b>
# <b>mkdir -p   xenocara ports</b>
# <b>chgrp wsrc xenocara ports</b>
# <b>chmod 775  xenocara ports</b>
</pre></blockquote>

<h4>Example: Fetching the <i>-stable</i> trees</h4>
<!-- XXXrelease: bump -rOPENBSD_X_Y twice -->

To fetch the <i>-stable</i> <tt>src</tt> tree, specify the branch you want with
the <tt>-r</tt> flag

<blockquote><pre>
$ <b>cd /usr</b>
$ <b>cvs -qd anoncvs@@anoncvs.example.org:/cvs checkout -rOPENBSD_6_0 -P src</b>
</pre></blockquote>

Once you have the tree checked out, you can update it at a later time with:

<blockquote><pre>
$ <b>cd /usr/src</b>
$ <b>cvs -q up -Pd</b>
</pre></blockquote>

Replace <tt>src</tt> with <tt>xenocara</tt> or <tt>ports</tt> as appropriate.
As all parts of OpenBSD must be kept in sync, all the trees you use should be
checked out and updated at the same time.

<h4>Example: Fetching the <i>-current</i> trees</h4>

To fetch a <i>-current</i> src tree, you can use the following:

<blockquote><pre>
$ <b>cd /usr</b>
$ <b>cvs -qd anoncvs@@anoncvs.example.org:/cvs checkout -P src</b>
</pre></blockquote>

Update the tree with:

<blockquote><pre>
$ <b>cd /usr/src</b>
$ <b>cvs -q up -Pd</b>
</pre></blockquote>

Replace <tt>src</tt> with the module you want, such as <tt>xenocara</tt> or
<tt>ports</tt>.

<h3>Building OpenBSD</h3>

<!-- XXXrelease - spell out the commands for the new build process? -->
At this point you are ready to build OpenBSD from source.

<p>
If you are building <i>-current</i>, review changes and special build
instructions listed on <a href="current.html">current.html</a>.

<p>
Follow the detailed instructions in steps 2 and 3 of
<!-- XXXrelease - remove "OpenBSD-6.0/" from man link -->
<a href="http://man.openbsd.org/OpenBSD-6.0/release">release(8)</a>.

<h2 id="Release">Making a release</h2>

A release is the complete set of files that can be used to install or upgrade
OpenBSD on another system.
An example use would be to build <i>-stable</i> on a fast machine, then make a
release to be installed on all your other machines.
If you have only one computer running OpenBSD, you really don't have any reason
to make a release, as the above build process will do everything you need.

<p>
The instructions on making a release are in
<!-- XXXrelease - remove "OpenBSD-6.0/" from man link -->
<a href="http://man.openbsd.org/OpenBSD-6.0/release">release(8)</a>.
The release process uses the binaries created in the <tt>/usr/obj</tt>
directory in the building process above.

<p>
Note: if you wish to distribute the resulting file sets by HTTP for use by
the upgrade or install scripts, you will need to add an <tt>index.txt</tt> file
that contains the list of all the files in your newly created release.

<blockquote><pre>
# <b>ls -nT > index.txt</b>
</pre></blockquote>

If you'd like to cryptographically sign the sets you created, the
<a href="http://man.openbsd.org/signify">signify(1)</a> man page has details
on how to do so.

<h2 id="Xbld">Building X</h2>

Starting with <a href="https://www.x.org/wiki/">X.Org</a> v7, X switched to a
modular build system, splitting the X.Org source tree into more than
three hundred more-or-less independent packages.

<p>
To simplify life for OpenBSD users, a meta-build called
<a href="http://xenocara.org">Xenocara</a> was developed.
This system converts X back into one big tree to be built in one process.
As an added bonus, this build process is much more similar to the build
process used by the rest of OpenBSD than the previous versions were.

<p>
The official instructions for building X exist in the
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/xenocara/README">
<tt>xenocara/README</tt></a> file and in step 5 of
<!-- XXXrelease - remove "OpenBSD-6.0/" from man link -->
<a href="http://man.openbsd.org/OpenBSD-6.0/release">release(8)</a>.

<h3>Further reading on the build process</h3>

<ul>
  <li><a href="http://man.openbsd.org/mk.conf">mk.conf(5)</a>
  <li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/Makefile">
    <tt>src/Makefile</tt></a>
  <li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/share/mk/bsd.README">
    <tt>/usr/share/mk/bsd.README</tt></a>
  <li><a href="http://man.openbsd.org/config">config(8)</a>
  <li><a href="http://man.openbsd.org/options">options(4)</a>
</ul>

<h2 id="buildprobs">Common problems when compiling</h2>

Most of the time, problems in the build process are caused by not following the
directions carefully.
There are occasional real problems with building <i>-current</i> from the most
recent snapshot, but failures when building <i>-release</i> or <i>-stable</i>
are almost always user error.

<p>
Most problems are usually one of the following:

<ul>
  <li>Failing to start from the <a href="#BldBinary">appropriate binaries</a>.
  <li><a href="#BldGetSrc">Checking out</a> the wrong branch of the tree.
  <li>Forgetting to read <a href="current.html">following -current</a>
      before building <i>-current</i>.
  <li>Skipping the reboot step after building and installing a new kernel.
</ul>

<h3 id="ProbObj">I forgot to <tt>make obj</tt> before <tt>make build</tt></h3>

By doing a <tt>make build</tt> before doing a <tt>make obj</tt>, you will
end up with the object files scattered in your <tt>/usr/src</tt> directory.
This is a bad thing.
If you wish to try to avoid re-fetching your entire src tree again, you
can try the following to clean out obj files:

<blockquote><pre>
$ <b>cd /usr/src</b>
$ <b>find . -type l -name obj | xargs rm</b>
$ <b>make cleandir</b>
$ <b>rm -rf /usr/obj/*</b>
$ <b>make obj</b>
</pre></blockquote>

<h3 id="sig11">The build stopped with a "Signal 11" error</h3>

Building OpenBSD and other programs from source is a task which pushes hardware
harder than most others, making intensive use of CPU, disk and memory.
Signal 11 failures are <i>typically</i> caused by hardware problems.

<p>
You will probably find it best to repair or replace the components that are
causing trouble, as problems may show themselves in other ways in the future.

<p>
For much more information, see the
<a href="http://www.bitwizard.nl/sig11/">Sig11 FAQ</a>.

<h2 id="Miscellanea">Miscellaneous questions and tips</h2>
<!-- XXX add a brief section on tags, cscope, ag? -->

<h3>Why is <tt>/usr/obj</tt> on its own partition?</h3>

If you build often, one benefit is simple: it is typically much faster to...

<blockquote><pre>
# <b>umount /usr/obj</b>
# <b>newfs <i>YourObjPartition</i></b>
# <b>mount /usr/obj</b>
</pre></blockquote>

...than to remove the contents of the directory with <tt>rm</tt>.

<h3>How do I skip building parts of the tree?</h3>

Use the <tt>SKIPDIR</tt> option of
<a href="http://man.openbsd.org/mk.conf">mk.conf(5)</a>.

<h3>Can I cross-compile?</h3>

Cross-compiling tools are in the system, for use by developers bringing
up a new platform.
However, they are not maintained for general use.

<p>
When the developers bring up support for a new platform, one of the
first big tests is a native-build.
Building the system from source puts considerable load on the OS and machine,
and does a very good job of testing how well the system really works.
For this reason, OpenBSD does all the build process on the platform the build
is being used for.

<h2 id="Custom">Custom kernels</h2>

There are three ways to customize a kernel:

<ul>
  <li>boot-time configuration using
    <a href="http://man.openbsd.org/boot_config">boot_config(8)</a>
  <li>permanent modification of a compiled kernel using
    <a href="http://man.openbsd.org/config">config(8)</a>
  <li>compilation of a custom kernel
</ul>

It is recommended that you read
<a href="http://man.openbsd.org/config">config(8)</a> first.

<h3 id="BootConfig">Boot-time configuration</h3>

Sometimes when booting your system you might notice that the kernel finds
your device but maybe at the wrong IRQ.
Without rebuilding the kernel, you can use OpenBSD's boot time kernel
configuration, <a href="http://man.openbsd.org/boot_config">boot_config(8)</a>.

<p>
However, this will only correct your problem for one time.
If you reboot, you will have to repeat this procedure.
So, this is only a temporary fix, and you should correct the problem using
<a href="http://man.openbsd.org/config">config(8)</a>.

<p>
To boot into the User Kernel Config, or UKC, use the <tt>-c</tt> option at
boot-time.

<blockquote><pre>
boot> <b>boot hd0a:/bsd -c</b>
</pre></blockquote>

Doing this will bring up a UKC prompt.
Type <b><tt>help</tt></b> for a list of available commands.

<h3 id="config">Using config(8) to change your kernel</h3>

The <tt>-e</tt> and <tt>-u</tt> options of
<a href="http://man.openbsd.org/config">config(8)</a>
can be extremely helpful and save wasted time compiling your kernel.
The <tt>-e</tt> flag allows you to enter the UKC or User Kernel Config on
a running system.
These changes will then take place on your next reboot.
The <tt>-u</tt> flag tests to see if any changes were made to the running
kernel during boot, meaning you used <tt>boot -c</tt> to enter the UKC
while booting your system.

<p>
For safety's sake, use the <tt>-o</tt> option which writes the changes out to
the file specified.
For example: <tt>config -e -o bsd.new /bsd</tt> will write the changes to
<tt>bsd.new</tt>.

Kernel modification examples are given in the
<a href="http://man.openbsd.org/config">config(8)</a> man page.

<h3 id="Options">Building a custom kernel</h3>

Only the <tt>GENERIC</tt> and <tt>GENERIC.MP</tt> kernels are supported by the
OpenBSD team.
The <tt>GENERIC</tt> kernel configuration is the combination of the options in
<tt>/usr/src/sys/arch/$(machine)/conf/GENERIC</tt>
and <tt>/usr/src/sys/conf/GENERIC</tt>.
Reporting a problem on a customized kernel will almost always result in
you being told to try to reproduce the problem with a <tt>GENERIC</tt> kernel.

<p>
Read the <a href="http://man.openbsd.org/config">config(8)</a> and the
<a href="http://man.openbsd.org/options">options(4)</a> man pages first.
The following steps are part of compiling a custom kernel:

<blockquote><pre>
$ <b>cd /usr/src/sys/arch/$(machine)/conf</b>
$ <b>cp GENERIC CUSTOM</b>
$ <b>vi CUSTOM    # make your changes</b>
$ <b>config CUSTOM</b>
$ <b>cd ../compile/CUSTOM</b>
$ <b>make</b>
</pre></blockquote>

<p>
</body>
</html>
@


1.289
log
@start reworking faq5.html for 6.1; streamline and shorten introductory
blurb. reduce opinionated advice; shorten overview over build process;
zap an ugly table whose whole content is a short sentence: in short,
the usual minor polishing.

joint work with & ok tj
@
text
@d31 1
a31 1
<li><a href="#Snapshots"  >What are snapshots?</a>
d88 1
a88 1
<h2 id="Snapshots">What are snapshots?</h2>
@


1.288
log
@begin removing mentions of the cd sets...
@
text
@d79 3
a81 5
It is worth pointing out that the name <i>-stable</i> is not intended
to imply that <i>-current</i> is unreliable or less robust in production.
Rather, the APIs (how the programs talk to the OS) and features of
<i>-current</i> are changing and evolving, whereas the operation and APIs
of <i>-stable</i> are the same as the release it is based on.
d84 3
a86 3
Most users should be running either <i>-stable</i> or <i>-release</i>.
That being said, many people do run <i>-current</i> on production systems,
and it is important that people do so to identify bugs and test new features.
d98 1
a98 2
If you find a bug in a snapshot, make sure it is
<a href="../report.html">reported</a>.
d101 5
a105 2
If you desire to run <i>-current</i>, a recent snapshot is usually all you need.
Upgrading to a snapshot is the starting point before building <i>-current</i>
a107 4
<p>
Details for building <i>-current</i> from source can be found on
<a href="current.html">this page</a>.

a109 8
The main reference is
<!-- XXXrelease - remove "OpenBSD-6.0/" from man link -->
<a href="http://man.openbsd.org/OpenBSD-6.0/release">release(8)</a>.
This FAQ section is intended to help you with the necessary preparation.
Read that man page before you proceed.

<h3>Overview</h3>

a111 3
<p>
Preparation:

d115 4
d121 3
a123 15
The actual process of building the base system is explained in steps 2 and 3 of
<!-- XXXrelease - remove "OpenBSD-6.0/" from man link -->
<a href="http://man.openbsd.org/OpenBSD-6.0/release">release(8)</a>:

<ul>
  <li>Building a new kernel and booting from it
  <li>Building the userland
</ul>

The next two steps are optional:

<ul>
  <li><a href="#Release">Making a release</a>
  <li><a href="#Xbld"   >Building X</a>
</ul>
d131 3
a133 36
Use this table to look at where you are, where you wish to go, and what binary
installation you should start with:

<p>
<table border="1" style="empty-cells: show;">
<tr>
  <td><b>You are at</b></td> <td><b>Goal</b></td>
  <td><b>Binary upgrade to</b></td> <td><b>then ...</b></td>
</tr>
<tr>
  <td> Old -release </td> <td> New release </td> <td> Newest release </td>
  <td> Done! </td>
</tr>
<tr>
  <td> -release </td> <td> -stable </td> <td> Newest release </td>
  <td>Fetch &amp; build <i>-stable</i></td>
</tr>
<tr>
  <td> Old -stable</td> <td> -stable </td> <td> Newest release </td>
  <td>Fetch &amp; build <i>-stable</i></td>
</tr>
<tr>
  <td> -release </td> <td> -current </td> <td> Latest snapshot </td>
  <td> (optional) Fetch &amp; build <i>-current</i></td>
</tr>
<tr>
  <td> Old -current </td> <td> -current </td> <td> Latest snapshot </td>
  <td> (optional) Fetch &amp; build <i>-current</i></td>
</tr>
</table>

<p>
It is recommended that you install the binary sets by using the
<tt>(U)pgrade</tt> option of the install media.
If that is not possible, you can also unpack the binary sets as described
in the upgrade instructions of the release.
a146 2

<p>
@


1.287
log
@2017
@
text
@d46 9
a54 17
  <li><b>-release:</b>
    <!-- XXXrelease - remove cd mentions for 6.1 -->
    The version of OpenBSD shipped every six months on
    <a href="../orders.html">CD</a> and the <a href="../ftp.html">mirrors</a>.
  <p>
  <li><b>-stable:</b>
    The <i>-stable</i> branch is <i>-release</i> plus patches found on the
    <a href="../errata.html">errata page</a>.
    <p>
    When very important fixes are made to <i>-current</i>, they are backported
    into the two supported <i>-stable</i> branches.
  <li><b>-current:</b>
    The <i>-current</i> branch is where active development work is done.

    <p>
    Every six months, <i>-current</i> is tagged and becomes the next
    <i>-release</i>: a frozen point in the history of the source tree.
@


1.286
log
@remove the 'CVS tips' section: some good advice, some strange advice and
some excerpts of the man page. the good advice alone is not enough reason
to keep this section.

ok tj
@
text
@d11 1
a11 2
<meta name="copyright"          content="This document copyright 1998-2016
                                         by OpenBSD.">
@


1.285
log
@add an XXX marker for a mention of tags and cscope that might fit here
when i overhaul the page for 6.1.
@
text
@a38 1
<li><a href="#CVSTips"    >CVS tips</a>
a523 61

<h2 id="CVSTips">CVS tips</h2>

<ul>
  <li>Some <a href="http://man.openbsd.org/cvs">cvs(1)</a>
    options are mandatory to get a valid OpenBSD <tt>src</tt> tree:

    <p>
    The <tt>-P</tt> option removes directories that are empty.
    Sometimes the names of old directories are currently used as file names.

    <p>
    The <tt>-d</tt> option on the <tt>update</tt> command creates new
    directories that may have been added to the tree since the initial checkout.

  <li>A <tt>.cvsrc</tt> file in your home directory specifies defaults for
    some of these options:
    <!-- XXXrelease - remove this item for 6.1? these are the defaults now -->

    <blockquote><pre>
    cvs -q -d anoncvs@@anoncvs.example.org:/cvs
    diff -uNp
    update -Pd
    checkout -P
    rdiff -u
    </pre></blockquote>

  <li>
    Many people recommend <i>always</i> specifying the repository explicitly in
    the command line.
    While the Anonymous CVS server is recorded in the checked out tree, there
    are enough times where one may need to override it.

    <p>
    Note also that the <tt>CVSROOT</tt> environment variable is only used if
    <a href="http://man.openbsd.org/cvs">cvs(1)</a>
    would throw an error without it.

  <li>As the source trees consist of large numbers of mostly small files,
    turning on <a href="faq14.html#SoftUpdates">soft updates</a> for the
    partition the source tree is on will often give significantly better
    performance.

  <p>
  <!-- XXXrelease - replace version strings in cvs commands -->
  <li>
    To see the changes of the defaults in the <tt>/etc</tt> directory between
    5.9 and 6.0, run:

    <blockquote><pre>
    $ <b>cd /usr/src/etc</b>
    $ <b>cvs diff -u -rOPENBSD_5_9 -rOPENBSD_6_0</b>
    </pre></blockquote>

    To see the changes between 6.0 and <i>-current</i>, use:

    <blockquote><pre>
    $ <b>cd /usr/src/etc</b>
    $ <b>cvs diff -u -rOPENBSD_6_0 -rHEAD</b>
    </pre></blockquote>
</ul>
@


1.284
log
@the faq documents -release and -stable, so link to the 6.0 version
of the release(8) manual.
@
text
@d409 1
@


1.283
log
@XXXrelease marker for the sample .cvsrc file
@
text
@d124 3
a126 1
The main reference is <a href="http://man.openbsd.org/release">release(8)</a>.
d143 2
a144 1
<a href="http://man.openbsd.org/release">release(8)</a>:
d295 2
a296 1
<a href="http://man.openbsd.org/release">release(8)</a>.
d309 2
a310 1
<a href="http://man.openbsd.org/release">release(8)</a>.
d344 2
a345 1
<a href="http://man.openbsd.org/release">release(8)</a>.
@


1.282
log
@add release markers: update details of the build process for 6.1
@
text
@d535 1
@


1.281
log
@do not attempt to go from one release to another by compiling from source
@
text
@d283 1
@


1.280
log
@tweak wording of previous; prodded by Raf Czlonka
@
text
@d157 3
d162 1
a162 1
you should start with:
@


1.279
log
@add a <p>
@
text
@d224 1
a224 1
Note that this change only takes effect after exampleuser's next login.
@


1.278
log
@clarify that the usermod -G change only takes effect after the next
login.
@
text
@d225 2
@


1.277
log
@6.0 faq updates: setenv in doas.conf, proot, wxneeded, bump cvs examples
to -rOPENBSD_6_0 and link to the 6.0 upgrade guide.

ok tb
@
text
@d224 1
@


1.276
log
@tls on openbsd.org is now real:
- link to https://www.openbsd.org from the sub-projects' pages
- make internal links relative
- switch link rel=canonical to https to please some search engines
"go ahead" from beck, "do it!!!!" tj
@
text
@d49 1
d70 1
a70 1
       ,------o-----------o----X                    5.6 Stable
d72 1
a72 1
       |      .    ,------o---------o----X          5.7 Stable
d74 1
a74 1
       |      .    |      .    ,----o----------o--&gt; 5.8 Stable
d76 1
a76 1
       |      .    |      .    |    .    ,-----o--&gt; 5.9 Stable
d79 1
a79 1
 --&gt;5.6Rel-----&gt;5.7Rel-----&gt;5.8Rel-----&gt;5.9Rel----&gt; Current
d119 2
a120 1
Details can be found on the <a href="current.html">following -current</a> page.
d217 1
a217 1
writable for the <tt>wsrc</tt> group by default, so add users that need
d242 1
a242 1
$ <b>cvs -qd anoncvs@@anoncvs.example.org:/cvs checkout -rOPENBSD_5_9 -P src</b>
d249 1
a249 1
$ <b>cvs -q up -rOPENBSD_5_9 -Pd</b>
d557 1
a557 1
    5.8 and 5.9, run:
d561 1
a561 1
    $ <b>cvs diff -u -rOPENBSD_5_8 -rOPENBSD_5_9</b>
d564 1
a564 1
    To see the changes between 5.9 and <i>-current</i>, use:
d568 1
a568 1
    $ <b>cvs diff -u -rOPENBSD_5_9 -rHEAD</b>
@


1.275
log
@- merge (a condensed version of) "more on flavors" into main flavor section
- remove "what code was used to build a snapshot?"
- remove a few redundant links
- provide some insight on how to sign releases after building them

input and ok tb
@
text
@d15 1
a15 1
<link rel="canonical" href="http://www.openbsd.org/faq/faq5.html">
@


1.274
log
@switch a few <h2> items to <h3> and reclaim some space on the index.
@
text
@a38 1
<li><a href="#MoreFlavors">More on OpenBSD's flavors</a>
d88 10
a97 1
Further thoughts on the three flavors are <a href="#MoreFlavors">here</a>.
a119 20
<h3>What code was used to build a snapshot?</h3>

It is sometimes asked if there is any way to get a copy of exactly the code
used to build a snapshot.
The answer is no.

<ol>
  <li>There is no significant benefit to this.
  <p>
  <li>Snapshots are built as desired, as time permits and as resources become
    available.
    <p>
    On fast platforms, several snapshots may be released in one day.
    On slower platforms, it may take a week or more to build a snapshot.
    Providing tags or markers in the source tree for each snapshot would be
    quite impractical.
  <li>Snapshots often contain experimental code that isn't yet committed
    to the CVS tree.
</ol>

d134 2
a135 2
 <li>Upgrading to the closest available binaries
 <li>Fetching the source code
d142 2
a143 2
 <li>Building a new kernel and booting from it
 <li>Building the userland
d147 1
d149 2
a150 2
 <li><a href="#Release">Making a release</a>
 <li><a href="#Xbld"   >Building X</a>
a198 1
This can be done by using an <a href="../anoncvs.html">Anonymous CVS server</a>.
d202 3
a210 7
<p>
An introduction to <a href="http://man.openbsd.org/cvs">cvs(1)</a>
and detailed instructions for fetching the source trees are on the
<a href="../anoncvs.html">Anonymous CVS page</a>.
If you are new to using <a href="http://man.openbsd.org/cvs">cvs(1)</a>,
you may also want to read the <a href="#CVSTips">CVS tips</a> below.

d214 3
a216 3
The <tt>/usr/src</tt> directory is writable for <tt>wsrc</tt> by default.
So, add users that need to use <a href="http://man.openbsd.org/cvs">cvs(1)</a>
to the <tt>wsrc</tt> group:
d222 2
a223 2
Since they're not part of the base install, you must create the directories
and set their permissions manually to make use of the <tt>wsrc</tt> group:
a234 1
Choose an <a href="../anoncvs.html">Anonymous CVS server</a> near you.
d243 1
a243 1
Once you have the tree checked out, you can update it at a later time with
d251 1
a251 1
As all parts of OpenBSD must be kept in sync, all trees you use should be
d267 1
a267 1
$ <b>cvs -qd anoncvs@@anoncvs.example.org:/cvs up -Pd</b>
d287 2
a288 5
A release is the complete set of files that can be used to
<a href="faq4.html">install</a> or upgrade OpenBSD on another computer.
If you have only one computer running OpenBSD, you really don't have any reason
to make a release, as the above <a href="#Bld">build process</a> will do
everything you need.
d291 2
d301 1
a301 1
Note: if you wish to distribute the resultant file sets by HTTP for use by
d309 3
a311 1
<!-- XXX: add something on using signify(1) here? -->
d359 1
a359 1
    before building <i>-current</i>.
d439 1
a439 2
<a href="http://man.openbsd.org/config">config(8)</a>
first.
d484 1
a484 2
<a href="http://man.openbsd.org/config">config(8)</a>
man page.
a508 40

<h2 id="MoreFlavors">More on OpenBSD's flavors</h2>

It is worth pointing out that the name <i>-stable</i> is not intended
to imply that <i>-current</i> is unreliable or less robust in production.
Rather, the APIs (how the programs talk to the OS) and features of
<i>-current</i> are changing and evolving, whereas the operation and APIs
of <i>-stable</i> are the same as the release it is based on.
This means you shouldn't have to relearn features of your system, change
any configuration files, or have any problem adding additional applications
to your system.

<p>
In fact, as our hope is to continually improve OpenBSD, the goal is that
<i>-current</i> should be more reliable, more secure and, of course, have
greater features than <i>-stable</i>.
Put bluntly, the "best" version of OpenBSD is <i>-current</i>.

<p>
Most users should be running either <i>-stable</i> or <i>-release</i>.
That being said, many people do run <i>-current</i> on production systems,
and it is important that people do so to identify bugs and test new features.
However, if you don't know how to properly describe, diagnose and deal with
a problem, don't tell yourself (or anyone else) that you're "helping the
project" by running <i>-current</i>.
"It didn't work!" is not a useful
<a href="../report.html#bugtypes">bug report</a>.
"The recent changes to the pciide driver broke compatibility with my
Slugchip-based IDE interface, dmesg of working and broken systems follow..."
might be a useful report.

<p>
There are times when "normal" users may wish to live on the cutting
edge and run <i>-current</i>.
The most common reason is that the user has a device which is not supported
by <i>-release</i> (and thus, not <i>-stable</i>), or wishes to use a new
feature of <i>-current</i>.
In this case, the choice may be either <i>-current</i> or not using the
device, and <i>-current</i> may be the better option.
However, one should not expect hand-holding from the developers.
@


1.273
log
@unify spelling of 'man page'
@
text
@a35 1
<li><a href="#References" >Further reading on the build process</a>
d348 1
a348 1
<h2 id="References">Further reading on the build process</h2>
a350 1
  <li><a href="http://man.openbsd.org/release">release(8)</a>
a353 2
  <li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/xenocara/README">
    <tt>xenocara/README</tt></a>
@


1.272
log
@update x.org link
@
text
@d137 1
a137 1
Read that manpage before you proceed.
d506 1
a506 1
manpage.
d520 1
a520 1
<a href="http://man.openbsd.org/options">options(4)</a> manpages first.
@


1.271
log
@silence w3 validator warnings.
@
text
@d332 1
a332 1
Starting with <a href="http://x.org/">X.Org</a> v7, X switched to a
@


1.270
log
@"how do i not build parts of the tree?"

a better question is "how do i not write sentences like this?"
@
text
@d228 1
a228 1
<h2 id="wsrc"><h4>Avoiding root privileges</h4></h2>
@


1.269
log
@some more minor fixes: one title was missing an -ing and be a bit
more specific in a reference to release(8)
@
text
@d427 1
a427 1
<h3>How do I not build parts of the tree?</h3>
@


1.268
log
@there was a missing sentence. shuffle things around a bit to fix that.

pointed out by gabriel guzman, thanks
@
text
@d291 1
a291 1
<h3>Build OpenBSD</h3>
d300 1
a300 1
Follow the detailed instructions in
@


1.267
log
@add a link to the wsrc instructions in the "applying patches" section
and remove some redundant text.

with tb
@
text
@d249 2
a250 1
<h4>Example: Fetching the <i>-current</i> trees</h4>
d252 3
a254 6
We'll assume you are using a public Anonymous CVS server,
<tt>anoncvs@@anoncvs.example.org:/cvs</tt>.
We also assume that <a href="http://man.openbsd.org/sh">sh(1)</a> is the shell.

<p>
To checkout a <i>-current</i> src tree, you can use the following:
d258 1
a258 1
$ <b>cvs -qd anoncvs@@anoncvs.example.org:/cvs checkout -P src</b>
d261 1
a261 2
Replace <tt>src</tt> with the module you want, such as <tt>xenocara</tt>
or <tt>ports</tt>.
d265 1
a265 1
$ <b>cvs -qd anoncvs@@anoncvs.example.org:/cvs up -Pd</b>
d268 1
d272 1
a272 2
<h4>Example: Fetching the <i>-stable</i> trees</h4>
<!-- XXXrelease: bump -rOPENBSD_X_Y twice -->
d274 1
a274 2
To fetch the <i>-stable</i> <tt>src</tt> tree, specify the branch you want with
the <tt>-r</tt> flag
d278 1
a278 1
$ <b>cvs -qd anoncvs@@anoncvs.example.org:/cvs checkout -rOPENBSD_5_9 -P src</b>
d281 1
a281 1
Once you have the tree checked out, you can update it at a later time with
d285 1
a285 1
$ <b>cvs -q up -rOPENBSD_5_9 -Pd</b>
d288 2
a289 1
Replace <tt>src</tt> with <tt>xenocara</tt> or <tt>ports</tt> as appropriate.
@


1.266
log
@these pages used a different style of wrapping links. adjust to
the rest of the faq
@
text
@d228 1
a228 1
<h4>Avoiding root privileges</h4>
@


1.265
log
@some polishing with tj
@
text
@d135 1
a135 2
The main reference is
<a href="http://man.openbsd.org/release">release(8)</a>.
d207 1
a207 2
OpenBSD uses the
<a href="https://savannah.nongnu.org/projects/cvs">CVS</a>
d209 3
a211 6
The
<a href="http://man.openbsd.org/cvs">cvs(1)</a>
program is used to pull a copy of the desired source to your local machine
for compilation.
This can be done by using an
<a href="../anoncvs.html">Anonymous CVS server</a>.
d222 1
a222 2
An introduction to
<a href="http://man.openbsd.org/cvs">cvs(1)</a>
d225 2
a226 5
If you are new to using
<a href="http://man.openbsd.org/cvs">cvs(1)</a>,
you may also want to read the
<a href="#CVSTips">CVS tips</a>
below.
d230 1
a230 3
Avoid running
<a href="http://man.openbsd.org/cvs">cvs(1)</a>
as root.
d232 1
a232 2
So, add users that need to use
<a href="http://man.openbsd.org/cvs">cvs(1)</a>
d253 1
a253 3
We also assume that
<a href="http://man.openbsd.org/sh">sh(1)</a>
is the shell.
d470 1
a470 2
configuration,
<a href="http://man.openbsd.org/boot_config">boot_config(8)</a>.
d522 2
a523 5
Read the
<a href="http://man.openbsd.org/config">config(8)</a>
and the
<a href="http://man.openbsd.org/options">options(4)</a>
manpages first.
d559 2
a560 2
"It didn't work!" is not a useful <a href="../report.html#bugtypes">
bug report</a>.
@


1.264
log
@deraadt@@ confirms that the "upgrade" vs "update" distinction doesn't exist
@
text
@d129 1
a129 2
  <li>
    Snapshots often contain experimental code that isn't yet committed
a136 1
Read this manpage before you proceed.
d138 1
d148 2
a149 2
 <li>Upgrade to the closest available binaries
 <li>Fetch the source code
d156 2
a157 2
 <li>Build a new kernel and boot from it
 <li>Build the userland
d160 1
a160 2
Some users may also wish to

d162 2
a163 2
 <li><a href="#Release">Make a release</a>
 <li><a href="#Xbld"   >Build X</a>
d166 1
a166 4
which are the subject of the remainder of
<a href="http://man.openbsd.org/release">release(8)</a>.

<h3 id="BldBinary">Upgrade to the closest available binaries</h3>
d208 1
a208 1
OpenBSD source is managed using the
d210 1
a210 1
version control system.
d218 1
a218 1
<a href="../cvsync.html">CVSync</a> or rsync programs available as
d263 1
a263 1
We assume you are using a public Anonymous CVS server,
d274 1
a274 2
$ <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
$ <b>cvs -d$CVSROOT checkout -P src</b>
d277 2
a278 1
Once you have a tree, you can update it at a later time:
d282 1
a282 9
$ <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
$ <b>cvs -d$CVSROOT up -Pd</b>
</pre></blockquote>

If you want them, you can fetch the <tt>xenocara</tt> and <tt>ports</tt>
trees with

<blockquote><pre>
$ <b>cvs -d$CVSROOT checkout -P xenocara ports</b>
d289 1
d291 2
a292 1
To checkout the <i>-stable</i> trees, do
a293 1
<!-- XXXrelease: bump -rOPENBSD_X_Y twice -->
d296 1
a296 2
$ <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
$ <b>cvs -d$CVSROOT checkout -rOPENBSD_5_9 -P src xenocara ports</b>
d299 1
a299 1
and to update, issue
d306 1
a306 1
and similarly for <tt>/usr/xenocara</tt> and <tt>/usr/ports</tt>.
d314 1
a314 1
instructions listed in <a href="current.html">current.html</a>.
d547 1
a547 1
$ <b>vi CUSTOM</b>
@


1.263
log
@merge three very long and separate sections on kernel customization
into one shorter one. nuke verbose boot example. fix some cross
references.  discussed with deraadt@@
@
text
@a40 1
<li><a href="#Upgrade"    >What do "upgrading" and "updating" mean?</a>
a604 56

<h2 id="Upgrade">What do "upgrading" and "updating" mean?</h2>

You will often see references to upgrading and updating OpenBSD installs.
Even though these words have similar meanings, they are used slightly
differently in OpenBSD.

<h3>Upgrading</h3>

This is the process of installing a newer version of OpenBSD, with new
functionality.
For example, going from one release to another, or going from the June 12th
snapshot to the June 20th snapshot.
When upgrading, you will typically have to consult either
<a href="current.html">following -current</a> or the upgrade guide (when
changing releases) to make the changes required to run the upgraded version
of OpenBSD.

<h3>Updating</h3>

The process of applying patches to a system to improve the operation
<b>without</b> changing the basic functionality or binary compatibility.
This is typically done by following the
<a href="faq10.html#Patches">source patching process</a>
or by following the
<a href="../stable.html">stable process</a>.
When you update your system, it goes from a <i>-release</i> to <i>-stable</i>
(or patched <i>-release</i>) of the same release version.
You may then later update it to a newer <i>-stable</i> of the same release
version.
The update process is typically very painless, as no <tt>/etc</tt> files
or other system configurations need to be changed.

<p>
So, you may install a -release system from CD, then update it to -stable
a few times, then upgrade it to the next release from CD, and update that
a few times before upgrading it again to the following release.

<h3>Keeping things in sync</h3>

It is important to understand that OpenBSD is an operating system intended
to be taken as a whole, not a kernel with a bunch of utilities stuck on.

<p>
You must make sure your kernel, userland (the supporting utilities and files)
and <a href="faq15.html#Ports">ports</a> tree are all in sync, or unpleasant
things will happen.

<p>
One should also understand that the upgrade process is supported in
<b>only one direction: from older to newer</b>, and from <i>-stable</i> to
<i>-current</i>.
You can not run <i>-current</i> (or a snapshot), then decide you are living
too dangerously, and step back to <i>-stable</i>.
You are on your own if you choose any path other than the supported option
of reloading your system from scratch.
@


1.262
log
@spell out anonymous cvs to match the references page
@
text
@d39 1
a39 4
<li><a href="#Options"    >Building a custom kernel</a>
<li><a href="#BootConfig" >Boot-time configuration</a>
<li><a href="#config"     >Using config(8) to change your kernel</a>
<li><a href="#VerboseBoot">Getting more verbose output during boot</a>
d477 1
a477 1
<h2 id="Options">Building a custom kernel</h2>
d479 1
a479 57
It is assumed you really enjoy pain.
It is also assumed that you have a goal that can not be achieved by
either a <a href="#BootConfig">boot time configuration</a> (UKC) or
by <a href="#config">configuring a GENERIC kernel</a>.
If all of this is not true, you should stick to using GENERIC.
Really.

<p>
OpenBSD kernel generation is controlled by configuration files,
which are located in the <tt>/usr/src/sys/arch/<i>&lt;arch&gt;</i>/conf/</tt>
directory by default.
All architectures have a file, <tt>GENERIC</tt>, which is used to generate
the standard OpenBSD kernel for that platform.
There may also be other configuration files which are used to create
kernels with different focuses, for example, for minimal RAM, diskless
workstations, etc.

<p>
The configuration file is processed by
<a href="http://man.openbsd.org/config">config(8)</a>,
which creates and populates a compilation directory in <tt>../compile</tt>,
on a typical installation, that would be in
<tt>/usr/src/sys/arch/<i>&lt;arch&gt;</i>/compile/</tt>.
config(8) also creates a
<a href="http://man.openbsd.org/make">Makefile</a>,
and other files required to successfully build the kernel.

<p>
Kernel configuration options are options that you add to your kernel
configuration that place certain features into your kernel.
This allows you to have exactly the support you want, without having support
for unneeded devices.
There are a multitude of options that allow you to customize your kernel.
Here we will go over only some of them, those that are most commonly used.
Check the <a href="http://man.openbsd.org/options">options(4)</a>
man page for a complete list of options.
As these change from time to time, you should make sure you use a man page
for the same version of OpenBSD you are building.
You can also check the example configuration files that are available for
your architecture.

<p>
<b>Do not add, remove, or change options in your kernel unless you
actually have a reason to do so!  Do not edit the <tt>GENERIC</tt>
configuration file!!</b>
The only kernel configuration which is supported by the OpenBSD team is
the GENERIC kernel, the combination of the options in
<tt>/usr/src/sys/arch/&lt;<i>arch</i>&gt;/conf/GENERIC</tt>
and <tt>/usr/src/sys/conf/GENERIC</tt> <i>as shipped by the OpenBSD
team</i> (i.e., NOT edited).
Reporting a problem on a customized kernel will almost always result in
you being told to try to reproduce the problem with a GENERIC kernel.
Not all options are compatible with each other, and many options are
required for the system to work.
There is no guarantee that a custom-configured kernel can be built.
There is also no guarantee that a custom-configured kernel will actually
run, even if it compiles properly.
d481 7
a487 7
<p>
You can see all the platform-specific configuration files in the
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/">
src/sys/arch</a> directory.
As an example, the files for an amd64 kernel would be in
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/amd64/conf">
src/sys/arch/amd64/conf</a>.
d489 3
a491 64
<p>
Look closely at these files and you will notice a line near the top
similar to:

<blockquote><pre>
include "../../../conf/GENERIC"
</pre></blockquote>

This means that it is referencing another configuration file, one
that stores platform-independent options.
When creating your kernel configuration, be sure to look through
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/conf/GENERIC">
sys/conf/GENERIC</a>.

<p>
Kernel configuration options should be placed in your kernel configuration
file in the format of:

<blockquote><pre>
option      <i>name</i>
</pre></blockquote>

or

<blockquote><pre>
option      <i>name=value</i>
</pre></blockquote>

For example, to place option "DEBUG" in the kernel, add a line like this:

<blockquote><pre>
option      DEBUG
</pre></blockquote>

Options in the OpenBSD kernel are translated into compiler preprocessor
options, therefore an option like DEBUG would have the source compiled
with option -DDEBUG, which is equivalent to doing a <tt>#define DEBUG</tt>
throughout the kernel.

<p>
Sometimes, you may wish to disable an option that is already defined,
typically in the <tt>src/sys/conf/GENERIC</tt> file.
While you could modify a copy of that file, a better choice would be to
use the <i>rmoption</i> statement.
For example, if you really wanted to disable the in-kernel debugger
(<i>not recommended!</i>), you would add a line such as:

<blockquote><pre>
rmoption DDB
</pre></blockquote>

in your kernel configuration file.  <tt>option DDB</tt> is defined in
<tt>src/sys/conf/GENERIC</tt>, but the above <tt>rmoption</tt> line
deactivates it.

<p>
Once again, please see
<a href="http://man.openbsd.org/options">options(4)</a>
for more information about the specifics of these options.
Also note that many of the options also have their own manual pages --
always read everything available about an option before adding or removing
it from your kernel.

<h3>Building a custom kernel</h3>
d493 1
a493 43
In this case, we will build a kernel that supports the
<a href="http://man.openbsd.org/boca">boca(4)</a>
ISA multi-port serial card.
This card is not in the GENERIC kernel, due to conflicts with other drivers.
There are two common ways to make a custom kernel.

<p>
The first method is to create a "wrapper" file that "includes" the standard
GENERIC kernel and any options you need that aren't in GENERIC.
In this case, our wrapper file looks like this:

<blockquote><pre>
include "arch/i386/conf/GENERIC"

boca0  at       isa? port 0x100 irq 10     # BOCA 8-port serial cards
com*   at       boca? slave ?
</pre></blockquote>

The two lines regarding the boca(4) card are copied from the commented
out lines in <tt>GENERIC</tt>, with the IRQ adjusted as needed.
The advantage to using this "wrapper" file is any unrelated changes in
GENERIC are updated automatically with any other source code update.
The disadvantage is one can not remove devices (though in general, that's
a bad idea, anyway).

<p>
The other way to generate a custom kernel is to make a copy of the
standard <tt>GENERIC</tt> config file, giving it another name, then
edit as needed.
The disadvantage to this method is that later updates to the GENERIC
configuration file have to be merged into your copy, or you have to remake
your configuration file.

<p>
In either event, after making your custom kernel configuration file,
use config(8) and make the kernel as documented <a href="#BldKernel">above</a>.

<p>
Full instructions for creating your own custom kernel are in the
<a href= "http://man.openbsd.org/config">config(8)</a>
man page.

<h2 id="BootConfig">Boot-time configuration</h2>
d497 3
a499 9
And maybe you need to use this device right away.
Well, without rebuilding the kernel, you can use OpenBSD's boot time kernel
configuration.
This will only correct your problem for one time.
If you reboot, you will have to repeat this procedure.
So, this is only meant as a temporary fix, and you should correct the problem
using <a href="#config">config(8)</a>.
Your kernel does however need <strong>option BOOT_CONFIG</strong> in the
kernel, which GENERIC does have.
d502 4
a505 2
Most of this document can be found in the man page
<a href="http://man.openbsd.org/boot_config">boot_config(8)</a>.
d509 1
a509 1
boot time.
a514 1
Or whichever kernel it is you want to boot.
d516 1
a516 5
From here you can issue commands directly to the kernel specifying devices
you want to change or disable or even enable.

<p>
Here is a list of common commands in the UKC.
d518 1
a518 24
<ul>
<li><tt>add <strong>device</strong></tt> - Add a device through copying another
<li><tt>change <strong>devno | device </strong></tt> - Modify one or more
devices
<li><tt>disable <strong>devno | device </strong></tt> - Disable one or more
devices
<li><tt>enable <strong>devno | device </strong></tt> - Enable one or more
devices
<li><tt>find <strong>devno | device </strong></tt> - Find one or more devices
<li><tt>help</tt> - Short summary of these commands
<li><tt>list</tt> - List ALL known devices
<li><tt>exit/quit</tt> - Continue Booting
<li><tt>show <strong>[attr [val]]</strong></tt> - Show devices with an
attribute and optional with a specified value
</ul>

<p>
Once you have your kernel configured, use <tt>quit</tt> or <tt>exit</tt>
and continue booting.
After doing so, you should make the change permanent in your
kernel image, as described in <a href="#config">Using config(8) to change
your kernel</a>.

<h2 id="config">Using config(8) to change your kernel</h2>
d531 2
a532 3
The following example shows the disabling of the ep* devices in the kernel.
For safety's sake, you must use the <tt>-o</tt> option which writes the
changes out to the file specified.
d535 2
a536 3
The example doesn't use the <tt>-o</tt> option, therefore changes are just
ignored and not written back to the kernel binary.
For more information pertaining to error and warning messages, read the
d538 19
a556 1
man page.
d559 6
a564 87
# <b>config -e /bsd</b>
[...]
ukc> <b>?</b>
        help                                Command help list
        add             dev                 Add a device
        base            8|10|16             Base on large numbers
        change          devno|dev           Change device
        disable         attr val|devno|dev  Disable device
        enable          attr val|devno|dev  Enable device
        find            devno|dev           Find device
        list                                List configuration
        lines           count               # of lines per page
        show            [attr [val]]        Show attribute
        exit                                Exit, without saving changes
        quit                                Quit, saving current changes
        timezone        [mins [dst]]        Show/change timezone
        bufcachepercent [number]            Show/change BUFCACHEPERCENT
        nkmempg         [number]            Show/change NKMEMPAGES
ukc> <b>list</b>
  0 video* at uvideo* flags 0x0
  1 audio* at uaudio*|sb0|sb*|gus0|pas0|ess*|wss0|wss*|ym*|eap*|envy*|eso*|sv*|n
eo*|cmpci*|clcs*|clct*|auacer*|auglx*|auich*|auixp*|autri*|auvia*|azalia*|fms*|m
aestro*|esa*|yds*|emu* flags 0x0
  2 midi* at umidi*|sb0|sb*|ym*|mpu*|mpu*|autri*|eap*|envy* flags 0x0
  3 drm* at inteldrm*|radeondrm* flags 0x0
  4 inteldrm* at vga0|vga* flags 0x0
  5 radeondrm* at vga0|vga* flags 0x0
  6 radio* at udsbr*|bktr0|fms* flags 0x0
  7 vscsi0 at root flags 0x0
  8 softraid0 at root flags 0x0
  9 nsphy* at url*|udav*|mos*|axe*|aue*|xe*|ef*|hme*|lii*|bce*|ale*|alc*|age*|jm
e*|et*|nfe*|stge*|vge*|bnx*|bge*|lge*|nge*|msk*|sk*|ste*|se*|sis*|wb*|tl*|vte*|v
r*|pcn*|sf*|ti*|gem*|ne0|ne1|ne2|ne*|ne*|ne*|epic*|sm0|sm*|dc*|dc*|re*|re*|rl*|r
l*|mtd*|fxp*|fxp*|xl*|xl*|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
 10 nsphyter* at url*|udav*|mos*|axe*|aue*|xe*|ef*|hme*|lii*|bce*|ale*|alc*|age*
|jme*|et*|nfe*|stge*|vge*|bnx*|bge*|lge*|nge*|msk*|sk*|ste*|se*|sis*|wb*|tl*|vte
*|vr*|pcn*|sf*|ti*|gem*|ne0|ne1|ne2|ne*|ne*|ne*|epic*|sm0|sm*|dc*|dc*|re*|re*|rl
*|rl*|mtd*|fxp*|fxp*|xl*|xl*|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
[...snip...]
ukc> <b>disable ep</b>
 98 ep* disabled
 99 ep* disabled
301 ep0 disabled
302 ep* disabled
303 ep* disabled
360 ep* disabled
ukc> <b>quit</b>
not forced
</pre></blockquote>

In the above example, all <tt>ep</tt> devices are disabled in the kernel
and will not be probed.
In some situations where you have used the UKC during boot, via
<tt>boot -c</tt>, you will need these changes to be written out permanently.
To do this you need to use the <tt>-u</tt> option.
In the following example, the computer was booted into the UKC and the
<a href="http://man.openbsd.org/wi">wi(4)</a> device
was disabled.
Since changes made with <tt>boot -c</tt> are NOT permanent, these changes
must be written out.
This example writes the changes made from <tt>boot -c</tt> into a new kernel
binary: <tt>bsd.new</tt>.

<blockquote><pre>
# <b>config -e -u -o bsd.new /bsd</b>
[...]
Processing history...
167 wi* disabled
168 wi* disabled
443 wi* disabled
Enter 'help' for information
ukc> <b>quit</b>
</pre></blockquote>

<h2 id="VerboseBoot">Getting more verbose output during boot</h2>

Getting more verbose output can be very helpful when trying to debug
problems when booting.
If you have a problem wherein your boot media won't boot and need to get
more information, simply reboot.
When you get to the "boot&gt;" prompt, boot with <tt>boot -c</tt>.
This will bring you into the UKC&gt;, then do:

<blockquote><pre>
UKC> <b>verbose</b>
autoconf verbose enabled
UKC> <b>quit</b>
a565 2

Now you will be given extremely verbose output upon boot.
@


1.261
log
@add back an example containing -rOPENBSD_5_9
@
text
@d224 2
a225 1
This can be done by using an <a href="../anoncvs.html">AnonCVS server</a>.
d239 1
a239 1
<a href="../anoncvs.html">AnonCVS page</a>.
d272 1
a272 1
We assume you are using a public AnonCVS server,
d952 2
a953 2
    While the AnonCVS server is recorded in the checked out tree, there are
    enough times where one may need to override it.
@


1.260
log
@delete section numbers. constantly out of sync, not really used.
@
text
@d304 20
@


1.259
log
@fix a markup glitch and clean up the toc (lists ! wrant com).
use the project page of CVS instead of its wikipedia page
@
text
@d9 2
a10 2
<title>5 - Building the System from Source</title>
<meta name="description"        content="The OpenBSD FAQ page">
a12 1
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
d23 1
a23 1
<font color="#e00000">FAQ 5 - Building the System from Source</font>
d31 15
a45 15
<li><a href="#Flavors"     >5.1 - OpenBSD's flavors</a>
<li><a href="#Snapshots"   >5.2 - What are snapshots?</a>
<li><a href="#Bld"         >5.3 - Building OpenBSD from source</a>
<li><a href="#Release"     >5.4 - Making a release</a>
<li><a href="#Xbld"        >5.5 - Building X</a>
<li><a href="#References"  >5.6 - Further reading on the build process</a>
<li><a href="#buildprobs"  >5.7 - Common problems when compiling</a>
<li><a href="#Miscellanea" >5.8 - Miscellaneous questions and tips</a>
<li><a href="#Options"     >5.9 - Building a custom kernel</a>
<li><a href="#BootConfig"  >5.10 - Boot-time configuration</a>
<li><a href="#config"      >5.11 - Using config(8) to change your kernel</a>
<li><a href="#VerboseBoot" >5.12 - Getting more verbose output during boot</a>
<li><a href="#MoreFlavors" >5.13 - More on OpenBSD's flavors</a>
<li><a href="#Upgrade"     >5.14 - What do "upgrading" and "updating" mean?</a>
<li><a href="#CVSTips"     >5.15 - CVS tips</a>
d49 1
a49 1
<h2 id="Flavors">5.1 - OpenBSD's flavors</h2>
d96 1
a96 1
<h2 id="Snapshots">5.2 - What are snapshots?</h2>
d138 1
a138 1
<h2 id="Bld">5.3 - Building OpenBSD from source</h2>
d316 1
a316 1
<h2 id="Release">5.4 - Making a release</h2>
d343 1
a343 1
<h2 id="Xbld">5.5 - Building X</h2>
d362 1
a362 1
<h2 id="References">5.6 - Further reading on the build process</h2>
d377 1
a377 1
<h2 id="buildprobs">5.7 - Common problems when compiling</h2>
d426 1
a426 1
<h2 id="Miscellanea">5.8 - Miscellaneous questions and tips</h2>
d459 1
a459 1
<h2 id="Options">5.9 - Building a custom kernel</h2>
d634 1
a634 1
<h2 id="BootConfig">5.10 - Boot-time configuration</h2>
d691 1
a691 1
<h2 id="config">5.11 - Using config(8) to change your kernel</h2>
d790 1
a790 1
<h2 id="VerboseBoot">5.12 - Getting more verbose output during boot</h2>
d807 1
a807 1
<h2 id="MoreFlavors">5.13 - More on OpenBSD's flavors</h2>
d847 1
a847 1
<h2 id="Upgrade">5.14 - What do "upgrading" and "updating" mean?</h2>
d903 1
a903 1
<h2 id="CVSTips">5.15 - CVS tips</h2>
@


1.258
log
@break "common problems when compiling" into several sections:

- further reading
- common problems
- miscellaneous questions and tips

move these three questions up, they seem better placed right after
"building X". drop a few arcane things.
@
text
@d32 15
a46 17
<li><a href="#Flavors"         >5.1 - OpenBSD's flavors</a>
<li><a href="#Snapshots"       >5.2 - What are snapshots?</a>
<li><a href="#Bld"             >5.3 - Building OpenBSD from source</a>
<li><a href="#Release"         >5.4 - Making a release</a>
<li><a href="#Xbld"            >5.5 - Building X</a>
<li><a href="#References"      >5.6 - Further reading on the build process</a>
<li><a href="#buildprobs"      >5.7 - Common problems when compiling</a>
<li><a href="#Miscellanea"     >5.8 - Miscellaneous questions and tips</h2>
<li><a href="#Options"         >5.9 - Building a custom kernel</a>
<li><a href="#BootConfig"      >5.10 - Boot-time configuration</a>
<li><a href="#config"          >5.11 - Using config(8) to change your kernel</a>
<li><a href="#VerboseBoot"     >5.12 - Getting more verbose output during
                                boot</a>
<li><a href="#MoreFlavors"     >5.13 - More on OpenBSD's flavors</a>
<li><a href="#Upgrade"         >5.14 - What do "upgrading" and "updating"
                                mean?</a>
<li><a href="#CVSTips"         >5.15 - CVS tips</a>
d219 1
a219 1
<a href="https://en.wikipedia.org/wiki/Concurrent_Versions_System">CVS</a>
@


1.257
log
@remove the copy-paste release(8) bits from "making a release" and
"building X" as well. + tidying and shortening, as usual
@
text
@d37 7
a43 4
<li><a href="#Options"         >5.6 - Building a custom kernel</a>
<li><a href="#BootConfig"      >5.7 - Boot-time configuration</a>
<li><a href="#config"          >5.8 - Using config(8) to change your kernel</a>
<li><a href="#VerboseBoot"     >5.9 - Getting more verbose output during
d45 2
a46 21
<li><a href="#buildprobs"      >5.10 - Common problems when compiling</a>
   <ul>
   <li><a href="#sig11"        >5.10.1 - The build stopped with a "Signal 11"
                                error</a>
   <li><a href="#snake"        >5.10.2 - "make build" fails with "cannot open
                                output file snake: is a directory"</a>
   <li><a href="#ProbObj"      >5.10.3 - Oops! I forgot to make the /usr/obj
                                directory first!</a>
   <li><a href="#ProbObjPt"    >5.10.4 - Put /usr/obj on its own partition</a>
   <li><a href="#ProbSKIPDIR"  >5.10.5 - How do I not build parts of the
                                tree?</a>
   <li><a href="#ProbMoreInfo" >5.10.6 - Where can I learn more about the
                                build process?</a>
   <li><a href="#UpdateEtc"    >5.10.7 - What is the best way to update
                                /etc, /var, and /dev?</a>
   <li><a href="#Hierarchy"    >5.10.8 - Is there an easy way to make all
                                the file hierarchy changes?</a>
   <li><a href="#ProbXComp"    >5.10.9 - Can I cross-compile?  Why not?</a>
   </ul>
<li><a href="#MoreFlavors"     >5.11 - More on OpenBSD's flavors</a>
<li><a href="#Upgrade"         >5.12 - What do "upgrading" and "updating"
d48 1
a48 1
<li><a href="#CVSTips"         >5.13 - CVS tips</a>
d365 98
a462 1
<h2 id="Options">5.6 - Building a custom kernel</h2>
d637 1
a637 1
<h2 id="BootConfig">5.7 - Boot-time configuration</h2>
d694 1
a694 1
<h2 id="config">5.8 - Using config(8) to change your kernel</h2>
d793 1
a793 1
<h2 id="VerboseBoot">5.9 - Getting more verbose output during boot</h2>
d810 1
a810 181
<h2 id="buildprobs">5.10 - Common problems when compiling</h2>

Most of the time, problems in the build process are caused by not
following the above directions carefully.
There are occasional real problems with building <i>-current</i> from
the most recent snapshot, but failures when building <i>-release</i> or
<i>-stable</i> are almost always user error.

<p>
Most problems are usually one of the following:

<ul>
<li>Failing to start from the <a href="#BldBinary">appropriate binaries</a>,
including attempting to upgrade from source or assuming a week old snapshot
is "close enough"
<li><a href="#BldGetSrc">Checking out</a> the wrong branch of the tree
<li>Trying to customize or "optimize" your system
</ul>

Here are some additional problems you might encounter, however:

<h3 id="sig11">5.10.1 - The build stopped with a "Signal 11" error</h3>

Building OpenBSD and other programs from source is a task which pushes
hardware harder than most others, making intensive use of CPU, disk and
memory.
As a result, if you have hardware which has a problem, the most likely time
for that problem to appear is during a build.
Signal 11 failures are <i>typically</i> caused by hardware problems, very
often memory problems, but can also be CPU, main board, or heat issues.
Your system may actually be very stable otherwise, but unable to compile
programs.

<p>
You will probably find it best to repair or replace the components that
are causing trouble, as problems may show themselves in other ways in
the future.
If you have hardware which you really wish to use and causes you no other
problem, simply install a snapshot or a release.

<p>
For much more information, see the
<a href="http://www.bitwizard.nl/sig11/">Sig11 FAQ</a>.

<h3 id="snake">5.10.2 - "make build" fails with "cannot open output file
snake: is a directory"</h3>

This is the result of two separate errors:

<ul>
<li><b>You did not fetch or update your CVS tree properly.</b>
When doing a CVS checkout operation, you must use the <tt>-P</tt> option,
when you update your source tree with CVS, you must use <tt>-Pd</tt> options
to <a href="http://man.openbsd.org/cvs">cvs(1)</a>,
as documented <a href="#BldGetSrc">above</a>.
These options make sure new directories are added and removed from the
tree as OpenBSD evolves.

<li><b>You did not properly create the <tt>obj</tt> directory before your
build.</b>
Building the tree without a <tt>/usr/obj</tt> directory is not supported.

</ul>
It is important to carefully follow the instructions when <a href="#BldGetSrc">
fetching</a> and <a href="#Bld">building</a> your tree.

<h3 id="ProbObj">5.10.3 - Oops! I forgot to make the <tt>/usr/obj</tt>
directory first!</h3>

By doing a <tt>make build</tt> before doing a <tt>make obj</tt>, you will
end up with the object files scattered in your <tt>/usr/src</tt> directory.
This is a bad thing.
If you wish to try to avoid re-fetching your entire src tree again, you
can try the following to clean out obj files:

<blockquote><pre>
# <b>cd /usr/src</b>
# <b>find . -type l -name obj | xargs rm</b>
# <b>make cleandir</b>
# <b>rm -rf /usr/obj/*</b>
# <b>make obj</b>
</pre></blockquote>

<h3 id="ProbObjPt">5.10.4 - Put <tt>/usr/obj</tt> on its own partition</h3>

If you build often, you may find it faster to put <tt>/usr/obj</tt> on its
own partition.
The benefit is simple: it is typically much faster to...

<blockquote><pre>
# <b>umount /usr/obj</b>
# <b>newfs <i>YourObjPartition</i></b>
# <b>mount /usr/obj</b>
</pre></blockquote>

...than to remove the contents of the directory with <tt>rm</tt>.

<h3 id="ProbSKIPDIR">5.10.5 - How do I not build parts of the tree?</h3>

Sometimes, you may wish to not build certain parts of the tree,
typically because you have installed a replacement for an included
application from packages, or wish to make a "smaller" release for
whatever reason.
The solution to this is to use the <tt>SKIPDIR</tt> option of
<a href="http://man.openbsd.org/mk.conf">mk.conf(5)</a>.

<p>
Note: it is possible to make a broken system this way.
The results of this option are not supported by the OpenBSD project.

<h3 id="ProbMoreInfo">5.10.6 - Where can I learn more about the build
process?</h3>

Here are some other resources:

<ul>
<li><a href="http://man.openbsd.org/release">release(8)</a>
<li><a href="http://man.openbsd.org/config">config(8)</a>
<li><a href="http://man.openbsd.org/mk.conf">mk.conf(5)</a>
<li><a href="http://man.openbsd.org/options">options(4)</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/Makefile">
<tt>/usr/src/Makefile</tt></a>
<li><a href="../stable.html">Patch Branches</a> (<i>-stable</i>)
<li>(for X) <tt>/usr/xenocara/README</tt> on your installed system
</ul>

<h3 id="UpdateEtc">5.10.7 - What is the best way to update <tt>/etc</tt>,
<tt>/var</tt>, and <tt>/dev</tt>?</h3>

Building the OpenBSD tree doesn't modify files in <tt>/etc</tt> automatically.
This means it is <i>always</i> up to the administrator to make the necessary
modifications there.
To update files in these directories, use the
<a href="http://man.openbsd.org/sysmerge">sysmerge(8)</a>
utility.

<p>
This process is detailed in the upgrade document of each release.

<h3 id="Hierarchy">5.10.8 - Is there an easy way to make all the file
hierarchy changes?</h3>

From time to time, files or directories are added to or removed from the
<a href="http://man.openbsd.org/hier">filesystem hierarchy</a>.
Also, ownership information for portions of the filesystem may change.
This is done automatically by the
<a href="http://man.openbsd.org/sysmerge">sysmerge(8)</a>
utility, but for reference, it can also be done using the
<a href="http://man.openbsd.org/mtree">mtree(8)</a>
utility.

<p>
First, fetch the latest source, then do the following:

<blockquote><pre>
# <b>cd /usr/src/etc/mtree</b>
# <b>install -c -o root -g wheel -m 600 special /etc/mtree</b>
# <b>install -c -o root -g wheel -m 444 4.4BSD.dist /etc/mtree</b>
# <b>mtree -qdef /etc/mtree/4.4BSD.dist -p / -u</b>
</pre></blockquote>

Your file hierarchy should now be up to date (but running sysmerge(8) is
easier).

<h3 id="ProbXComp">5.10.9 - Can I cross-compile? Why not?</h3>

Cross-compiling tools are in the system, for use by developers bringing
up a new platform.
However, they are not maintained for general use.

<p>
When the developers bring up support for a new platform, one of the
first big tests is a native-build.
Building the system from source puts considerable load on the OS and machine,
and does a very good job of testing how well the system really works.
For this reason, OpenBSD does all the build process on the platform the build
is being used for, also known as "native" building.
Without native building, it is much more difficult to be sure that the various
platforms are actually running reliably, and not just booting.

<h2 id="MoreFlavors">5.11 - More on OpenBSD's flavors</h2>
d850 1
a850 1
<h2 id="Upgrade">5.12 - What do "upgrading" and "updating" mean?</h2>
d906 1
a906 1
<h2 id="CVSTips">5.13 - CVS tips</h2>
@


1.256
log
@better wording.
@
text
@d35 1
a35 1
<li><a href="#Release"         >5.4 - Building a release</a>
d335 1
a335 1
<h2 id="Release">5.4 - Building a release</h2>
d337 7
a343 10
<h3>What is a "release" and why would I want to make one?</h3>

A release is the complete set of files that can be used to install OpenBSD
on another computer.
If you have only one computer running OpenBSD, you really don't have any
reason to make a release, as the <a href="#Bld">above</a> build process
will do everything you need.
An example use of the release process would be to build <i>-stable</i>
on a fast machine, then make a release to be installed on all your other
machines in your office.
d346 1
a346 1
Note that the authoritative instructions on making a release are in
a347 3
This guide is mostly an expanded summary of that man page.

<p>
d349 1
a349 54
directory in the building process above, so you must successfully complete
the build first, and nothing must disturb the <tt>/usr/obj</tt> directory.
A time where this might be a problem is if you use a
<a href="http://man.openbsd.org/mount_mfs">memory disk</a>
as your <tt>/usr/obj</tt> for a little extra performance in the build process.
In that case, you would not want to reboot the computer between the "build"
and "release" steps!

<p>
The release process requires two work directories, which we will call
<tt>DESTDIR</tt> and <tt>RELEASEDIR</tt>.
All the files that are part of a "clean" OpenBSD install will be copied
to their proper place within the <tt>DESTDIR</tt>.
They will then be tarred up and placed in the <tt>RELEASEDIR</tt>.
At the end of the process, <tt>RELEASEDIR</tt> will hold the completed
OpenBSD release.
The release process will also use the <tt>/mnt</tt> location, so this
should not be used by anything while the release process is running.
For the purpose of example, we will use the <tt>DESTDIR</tt> of
<tt>/usr/dest</tt> and the <tt>RELEASEDIR</tt> of <tt>/usr/rel</tt>.

<p>
The release process involves using the
<a href="http://man.openbsd.org/crunchgen">crunchgen(8)</a> utility,
which creates a single executable file made up of many individual binaries.
The name this single executable file is invoked by determines which
component binary is run.
This is how a number of individual program files are squeezed into
the ramdisk kernel that exists on boot floppies and other boot media.

<p>
You must have root privileges to make a release.

<h3>Doing a release</h3>

Define our <tt>DESTDIR</tt> and <tt>RELEASEDIR</tt> environment variables:

<blockquote><pre>
# <b>export DESTDIR=/usr/dest</b>
# <b>export RELEASEDIR=/usr/rel</b>
</pre></blockquote>

We now clear the DESTDIR and create the directories if needed:

<blockquote><pre>
# <b>test -d ${DESTDIR} && mv ${DESTDIR} ${DESTDIR}.old && rm -rf ${DESTDIR}.old &</b>
# <b>mkdir -p ${DESTDIR} ${RELEASEDIR}</b>
</pre></blockquote>

<tt>RELEASEDIR</tt> does not normally need to be empty before starting the
release process.
However, if there are changes in the release files or their names, old files
may be left laying around.
You may wish to also erase this directory before starting.
d352 2
a353 21
We now make the release itself:

<blockquote><pre>
# <b>cd /usr/src/etc</b>
# <b>make release</b>
</pre></blockquote>

After the release is made, it is a good idea to check the release to
make sure the file sets are matching what is in the <tt>DESTDIR</tt>.
The output of this step should be very minimal.

<blockquote><pre>
# <b>cd /usr/src/distrib/sets</b>
# <b>sh checkflist</b>
</pre></blockquote>

You now have complete and checked release file sets in the <tt>RELEASEDIR</tt>.

<p>
Note: if you wish to distribute the resultant files by HTTP for use by
the upgrade or install scripts, you will need to add an "index.txt" file
d357 1
a357 1
# <b>/bin/ls -nT > index.txt</b>
d360 1
a360 2
Once you have the complete release made, you can use those files for
an <a href="faq4.html">install</a> or an upgrade on another machine.
d364 2
a365 2
Starting with <a href="http://x.org/">X.org</a> v7, X switched to a
"modular build" system, splitting the x.org source tree into more than
d369 1
a369 1
To simplify life for OpenBSD users, a "meta-build" called
d371 1
a371 1
This system "converts" X back into one big tree to be built in one process.
d376 3
a378 2
The official instructions for building X exist in your machine's
<tt>/usr/xenocara/README</tt> file and in
a379 57

<h3>Getting source code</h3>
The "usual" location for the xenocara source tree is <tt>/usr/xenocara</tt>,
and the source is stored in the <tt>xenocara</tt> module in CVS.
With your user in the <tt>wsrc</tt> group, the checkout process is as follows:

<blockquote><pre>
# <b>mkdir -p   /usr/xenocara</b>
# <b>chgrp wsrc /usr/xenocara</b>
# <b>chmod 775  /usr/xenocara</b>
$ <b>cd /usr</b>
$ <b>cvs -qdanoncvs@@anoncvs.example.org:/cvs checkout -P xenocara</b>
</pre></blockquote>

<h3>Building Xenocara</h3>
For building the standard xenocara tree as supported by OpenBSD, no external
tools are needed.

<blockquote><pre>
# <b>cd /usr/xenocara</b>
# <b>rm -rf /usr/xobj/*</b>
# <b>make bootstrap</b>
# <b>make obj</b>
# <b>make build</b>
</pre></blockquote>

If you wish to make actual modifications to the source code, you will
probably need to add several <a href="faq15.html">packages</a>.
Details are in the <tt>/usr/xenocara/README</tt> file.

<h3>Making a release</h3>
This is similar to the main system release process.
After successfully building X, you will define a <tt>DESTDIR</tt> and
<tt>RELEASEDIR</tt>, with the same purposes as above.
The <tt>RELEASEDIR</tt> can be the same directory as the main system
<tt>RELEASEDIR</tt>, but <tt>DESTDIR</tt> will be erased and rebuilt in
this process.
If done carefully, this is not a problem, but using a separate <tt>DESTDIR</tt>
may be "safer."

<p>
For this example, we will use a <tt>DESTDIR</tt> and <tt>RELEASEDIR</tt>
of <tt>/usr/dest</tt> and <tt>/usr/rel</tt>, respectively.
This must be done after the above build process.

<blockquote><pre>
# <b>cd /usr/xenocara</b>
# <b>export DESTDIR=/usr/dest</b>
# <b>export RELEASEDIR=/usr/rel</b>
# <b>test -d ${DESTDIR} && mv ${DESTDIR} ${DESTDIR}- && \</b>
  <b>   rm -rf ${DESTDIR}- &</b>
# <b>mkdir -p ${DESTDIR} ${RELEASEDIR}</b>
# <b>make release</b>
</pre></blockquote>

When this process is completed, you will have a set of release files
in the <tt>RELEASEDIR</tt>.
@


1.255
log
@reorganize 5.3 - building from source:

simply explain the preparation steps and refer to release(8) instead
of duplicating its contents in a much more verbose fashion.

similarly, don't repeat all the instructions from anoncvs.html.
refer to it, keep the tips on running cvs without root and stick to
doing -current as an example.

move the cvs tips to the end of the page for now.
@
text
@d134 1
a134 1
Details are on the page on <a href="current.html">following -current</a>.
@


1.254
log
@typo + move a sentence
@
text
@a34 8
<ul>
  <li><a href="#BldOverview"   >5.3.1 - Overview</a>
  <li><a href="#BldBinary"     >5.3.2 - Upgrade to the closest available
                                binaries</a>
  <li><a href="#BldGetSrc"     >5.3.3 - Fetching the appropriate source code</a>
  <li><a href="#BldKernel"     >5.3.4 - Building the kernel</a>
  <li><a href="#BldUserland"   >5.3.5 - Building userland</a>
</ul>
d64 1
d161 2
d164 1
a164 1
<h3 id="BldOverview">5.3.1 - Overview</h3>
d168 11
d180 2
a181 4
 <li><a href="#BldBinary"  >Upgrade to the closest available binaries</a>
 <li><a href="#BldGetSrc"  >Fetch the appropriate source code</a>
 <li><a href="#BldKernel"  >Build a new kernel and boot from it</a>
 <li><a href="#BldUserland">Build the userland</a>
d184 1
a184 1
Some users may also wish to:
d187 1
a187 1
 <li><a href="#Release">Build a release</a>
d191 4
a194 1
<h3 id="BldBinary">5.3.2 - Upgrade to the closest available binaries</h3>
d234 1
a234 1
<h3 id="BldGetSrc">5.3.3 - Fetching the appropriate source code</h3>
d249 3
a251 3
First, you must "checkout" the source tree.
After that, you maintain the tree by running "updates" to pull updated files
to your local tree.
d254 12
d273 1
d278 9
d288 3
a290 4
<p>
<b>Following <i>-current</i></b>
<p>
In this case, we will assume we are using a public AnonCVS server,
d292 1
a292 1
We will also assume you are using
d294 1
a294 1
as your command shell.
d297 1
a297 1
To checkout a <i>-current</i> CVS src tree, you can use the following:
d313 2
a314 38
<!-- XXXrelease - replace version string in lots of cvs commands -->
<b>Following <i>-stable</i></b>
<p>
If you wish to check out an alternative branch of the tree, such as
the <i>-stable</i> branch, you will use the <tt>-r</tt> modifier on
your checkout command:

<blockquote><pre>
$ <b>cd /usr</b>
$ <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
$ <b>cvs -d$CVSROOT checkout -rOPENBSD_5_9 -P src</b>
</pre></blockquote>

This will pull the src files from the OPENBSD_5_9 branch, which is also
known as the "patch branch" or <a href="../stable.html">-stable</a>.
You would update the code similarly:

<blockquote><pre>
$ <b>cd /usr/src</b>
$ <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
$ <b>cvs -d$CVSROOT up -rOPENBSD_5_9 -Pd</b>
</pre></blockquote>

Actually, CVS is nice enough to stick a "Tag" in the checked out file
system, so you don't have to remember the <tt>-rOPENBSD_5_9</tt> part
of the command line.
It will remember this until you explicitly clear them or set a new tag
by using the <tt>-A</tt> option to <tt>update</tt>.
However, it is probably better to provide too much info in your CVS
commands than too little.

<p>
<b>Fetching the <tt>xenocara</tt> and <tt>ports</tt> trees</b>
<p>
While only the <tt>src</tt> tree has been shown so far, you can do the
same steps for <tt>xenocara</tt> and <tt>ports</tt>.
Since they're not part of the base install, you must create the directories
and set their permissions manually to make use of the <tt>wsrc</tt> group:
d317 1
a317 4
# <b>cd /usr</b>
# <b>mkdir -p   xenocara ports</b>
# <b>chgrp wsrc xenocara ports</b>
# <b>chmod 775  xenocara ports</b>
d323 1
a323 1
<h4>Pre-loading the tree: <tt>src.tar.gz, sys.tar.gz</tt></h4>
d325 1
a325 6
While you can download the entire source tree from an AnonCVS server,
you can sometimes save time and bandwidth by "pre-loading" your source
tree with the source files from either the OpenBSD CD or a mirror.
This is particularly true if you are running <a href="../stable.html">
<i>-stable</i></a>, as relatively few files change between this version
and the <i>-release</i> it is based on.
d328 2
a329 2
To extract the source tree from the CD to <tt>/usr/src</tt>, assuming the
CD is mounted on <tt>/mnt</tt>, you would do the following:
d332 2
a333 204
First, verify the contents with the
<a href="http://man.openbsd.org/signify">signify(1)</a>
utility.

<blockquote><pre>
$ <b>cd /mnt</b>
$ <b>signify -Cp /etc/signify/openbsd-$(uname -r | cut -c 1,3)-base.pub -x SHA256.sig src.tar.gz</b>
</pre></blockquote>

Assuming you've added your user to the <tt>wsrc</tt> group, the archive
can now be extracted:

<blockquote><pre>
$ <b>cd /usr/src</b>
$ <b>tar xzf /mnt/src.tar.gz</b>
</pre></blockquote>

The source files available for download from the mirrors are separated
into two files to minimize the download time for those wishing to work
with only one part of the tree.
The two files are <tt>sys.tar.gz</tt>, which contains the files used to
create the kernel, and <tt>src.tar.gz</tt>, which contains all the other
userland utilities except the ports tree and the X11 sources.
In general, however, you will usually want both of them installed.
Assuming <tt>src.tar.gz</tt> and <tt>sys.tar.gz</tt> are in <tt>/mnt</tt>
and have been checked with
<a href="http://man.openbsd.org/signify">signify(1)</a>
as explained above, you can do the following:

<blockquote><pre>
$ <b>cd /usr/src</b>
$ <b>tar xzf /mnt/src.tar.gz</b>
$ <b>tar xzf /mnt/sys.tar.gz</b>
</pre></blockquote>

Not all people will wish to unpack all the file sets, but as the system
must be kept in sync, you will generally need to set up all parts of the tree.

<h4 id="CVSTips">CVS tips</h4>

<ul>
  <li>Some <a href="http://man.openbsd.org/cvs">cvs(1)</a>
    options are mandatory to get a valid OpenBSD <tt>src</tt> tree:

    <p>
    The <tt>-P</tt> option removes directories that are empty.
    Sometimes the names of old directories are currently used as file names.

    <p>
    The <tt>-d</tt> option on the <tt>update</tt> command creates new
    directories that may have been added to the tree since the initial checkout.

  <li>A <tt>.cvsrc</tt> file in your home directory specifies defaults for
    some of these options:

    <blockquote><pre>
    cvs -q -d anoncvs@@anoncvs.example.org:/cvs
    diff -uNp
    update -Pd
    checkout -P
    rdiff -u
    </pre></blockquote>

  <li>
    Many people recommend <i>always</i> specifying the repository explicitly in
    the command line.
    While the AnonCVS server is recorded in the checked out tree, there are
    enough times where one may need to override it.

    <p>
    Note also that the <tt>CVSROOT</tt> environment variable is only used if
    <a href="http://man.openbsd.org/cvs">cvs(1)</a>
    would throw an error without it.

  <li>As the source trees consist of large numbers of mostly small files,
    turning on <a href="faq14.html#SoftUpdates">soft updates</a> for the
    partition the source tree is on will often give significantly better
    performance.

  <p>
  <!-- XXXrelease - replace version strings in cvs commands -->
  <li>
    To see the changes of the defaults in the <tt>/etc</tt> directory between
    5.8 and 5.9, run:

    <blockquote><pre>
    $ <b>cd /usr/src/etc</b>
    $ <b>cvs diff -u -rOPENBSD_5_8 -rOPENBSD_5_9</b>
    </pre></blockquote>

    To see the changes between 5.9 and <i>-current</i>, use:

    <blockquote><pre>
    $ <b>cd /usr/src/etc</b>
    $ <b>cvs diff -u -rOPENBSD_5_9 -rHEAD</b>
    </pre></blockquote>
</ul>

<h3 id="BldKernel">5.3.4 - Building the kernel</h3>

We will assume you wish to build a standard (GENERIC or GENERIC.MP)
kernel here.
Normally, this is what you want to do.
Do <i>not</i> consider building a custom kernel if you have not mastered
the standard building process.

<p>
Obviously, the kernel is a VERY hardware-dependent portion of the system.
The source for the kernel is in the <tt>/usr/src/sys</tt> directory.
Some parts of the OpenBSD kernel code are used on all platforms, others
are very specific to one processor or one architecture.

<p>
Kernels are built based on <a href="#Options">kernel configuration
files</a>, which are located in the
<tt>/usr/src/sys/arch/&lt;<i>your platform</i>&gt;/conf</tt> directory.
Building the kernel consists of using the
<a href="http://man.openbsd.org/config">config(8)</a>
program to create and populate a kernel compile directory, which will
end up in
<tt>/usr/src/sys/arch/&lt;<i>your platform</i>&gt;/compile/&lt;<i>KernelName</i>&gt;</tt>.
For this example, we will assume you are using the i386 platform:

<blockquote><pre>
$ <b>cd /usr/src/sys/arch/i386/conf</b>
$ <b>config GENERIC</b>
$ <b>cd ../compile/GENERIC</b>
$ <b>make clean && make</b>
    <i>[...lots of output...]</i>
# <b>make install</b>
</pre></blockquote>

Replace <tt>i386</tt> in the first line with your platform name.
The <a href="http://man.openbsd.org/machine">machine(1)</a>
command can tell you what your platform name is, so an
obvious generalization would be to use the command
<tt>cd /usr/src/sys/arch/$(machine)/conf</tt> instead on the first line.

<p>
At this point, reboot your machine to activate this new kernel.
Note that the new kernel should be running before the next step, though
if you have followed the <a href="#BldBinary">above</a> advice about upgrading
to the most recent available snapshot, it may not matter as much.
However, sometimes APIs change, and the old kernel will be unable to run
new applications, but the new kernel will generally support the old ones.

<p>
Note that you can <i>build</i> a kernel without root access, but you must
have root to <i>install</i> the kernel.

<h3 id="BldUserland">5.3.5 - Building the userland</h3>

There is a specific process used by OpenBSD.
Processes used on other OSs you may have been familiar with will most likely
not work on OpenBSD, and will get you laughed at when you ask why.

<p>
<ul>
<li>Clear your <tt>/usr/obj</tt> directory and rebuild symbolic links:

<blockquote><pre>
# <b>rm -rf /usr/obj/*</b>
# <b>cd /usr/src</b>
# <b>make obj</b>
</pre></blockquote>

Note that the use of the <tt>/usr/obj</tt> directory is mandatory.
Failing to do this step before building the rest of the tree will likely
leave your <tt>src</tt> tree in bad shape.

<p>
<li>Make sure all the appropriate directories are created.

<blockquote><pre>
# <b>cd /usr/src/etc && env DESTDIR=/ make distrib-dirs</b>
</pre></blockquote>

<p>
<li>Build the system:

<blockquote><pre>
# <b>cd /usr/src</b>
# <b>make build</b>
</pre></blockquote>

This compiles and installs all the userland utilities in the appropriate order.
This is a fairly time consuming step -- a very fast machine may be able to
complete it in well under an hour, a very slow machine may take many days.
When this step is complete, you have newly compiled binaries in place on
your system.

<p>
<li><b>If building <i>-current</i></b>
  <ul>
    <li>review changes listed in <a href="current.html">current.html</a>
    <li>update configuration files using
      <a href="http://man.openbsd.org/sysmerge">sysmerge(8)</a>
    <li>update <tt>/dev</tt> using
      <a href="http://man.openbsd.org/MAKEDEV">MAKEDEV(8)</a>
  </ul>
  If following -stable after a proper upgrade process or an install of the
  <a href="#BldBinary">proper starting binaries</a>, these steps are not needed
  or desired.
</ul>
d1139 60
@


1.253
log
@break "5.1 - OpenBSD's flavors" into four questions:

5.1 - OpenBSD's flavors
5.2 - What are snapshots?

temporarily moved out of the way:

5.11 - More on OpenBSD's flavors
5.12 - What do "upgrading" and "updating" mean.

plus the usual share of polishing and pruning
@
text
@d120 1
a120 1
Further thoughts on the three flavours are <a href="#MoreFlavors">here</a>.
a123 3
More details are on the page on <a href="current.html">following -current</a>.

<p>
d139 3
@


1.252
log
@looks like two versions of the same text were merged together and
both copies were kept. extract the essence and lose the rest.

keep further remarks in a separate subsection for now.
@
text
@d33 2
a34 1
<li><a href="#Bld"             >5.2 - Building OpenBSD from source</a>
d36 2
a37 2
  <li><a href="#BldOverview"   >5.2.1 - Overview</a>
  <li><a href="#BldBinary"     >5.2.2 - Upgrade to the closest available
d39 3
a41 3
  <li><a href="#BldGetSrc"     >5.2.3 - Fetching the appropriate source code</a>
  <li><a href="#BldKernel"     >5.2.4 - Building the kernel</a>
  <li><a href="#BldUserland"   >5.2.5 - Building userland</a>
d43 6
a48 6
<li><a href="#Release"         >5.3 - Building a release</a>
<li><a href="#Xbld"            >5.4 - Building X</a>
<li><a href="#Options"         >5.5 - Building a custom kernel</a>
<li><a href="#BootConfig"      >5.6 - Boot-time configuration</a>
<li><a href="#config"          >5.7 - Using config(8) to change your kernel</a>
<li><a href="#VerboseBoot"     >5.8 - Getting more verbose output during
d50 1
a50 1
<li><a href="#buildprobs"      >5.9 - Common problems when compiling</a>
d52 1
a52 1
   <li><a href="#sig11"        >5.9.1 - The build stopped with a "Signal 11"
d54 1
a54 1
   <li><a href="#snake"        >5.9.2 - "make build" fails with "cannot open
d56 1
a56 1
   <li><a href="#ProbObj"      >5.9.3 - Oops! I forgot to make the /usr/obj
d58 2
a59 2
   <li><a href="#ProbObjPt"    >5.9.4 - Put /usr/obj on its own partition</a>
   <li><a href="#ProbSKIPDIR"  >5.9.5 - How do I not build parts of the
d61 1
a61 1
   <li><a href="#ProbMoreInfo" >5.9.6 - Where can I learn more about the
d63 1
a63 1
   <li><a href="#UpdateEtc"    >5.9.7 - What is the best way to update
d65 1
a65 1
   <li><a href="#Hierarchy"    >5.9.8 - Is there an easy way to make all
d67 1
a67 1
   <li><a href="#ProbXComp"    >5.9.9 - Can I cross-compile?  Why not?</a>
d69 3
d119 4
a122 1
<h3>Further remarks on the three flavors</h3>
d124 1
a124 8
It is worth pointing out that the name <i>-stable</i> is not intended
to imply that <i>-current</i> is unreliable or less robust in production.
Rather, the APIs (how the programs talk to the OS) and features of
<i>-current</i> are changing and evolving, whereas the operation and APIs
of <i>-stable</i> are the same as the release it is based on.
This means you shouldn't have to relearn features of your system, change
any configuration files, or have any problem adding additional applications
to your system.
d127 4
a130 4
In fact, as our hope is to continually improve OpenBSD, the goal is that
<i>-current</i> should be more reliable, more secure and, of course, have
greater features than <i>-stable</i>.
Put bluntly, the "best" version of OpenBSD is <i>-current</i>.
d133 4
a136 11
Most users should be running either <i>-stable</i> or <i>-release</i>.
That being said, many people do run <i>-current</i> on production systems,
and it is important that people do so to identify bugs and test new features.
However, if you don't know how to properly describe, diagnose and deal with
a problem, don't tell yourself (or anyone else) that you're "helping the
project" by running <i>-current</i>.
"It didn't work!" is not a useful <a href="../report.html#bugtypes">
bug report</a>.
"The recent changes to the pciide driver broke compatibility with my
Slugchip-based IDE interface, dmesg of working and broken systems follow..."
might be a useful report.
d139 3
a141 8
There are times when "normal" users may wish to live on the cutting
edge and run <i>-current</i>.
The most common reason is that the user has a device which is not supported
by <i>-release</i> (and thus, not <i>-stable</i>), or wishes to use a new
feature of <i>-current</i>.
In this case, the choice may be either <i>-current</i> or not using the
device, and <i>-current</i> may be the better option.
However, one should not expect hand-holding from the developers.
d143 1
a143 16
<h3>Snapshots</h3>
Between formal releases of OpenBSD, <i>snapshots</i> are made available
through the <a href="../ftp.html">HTTP sites</a>.
As the name implies, these are builds of whatever code is in the tree at
the instant the builder grabbed a copy of the code for that particular
platform.
It is possible, though hopefully unlikely, that you may uncover bugs in
snapshots.
This is the reason they are built and distributed.
If you find a bug in a snapshot, make sure it is <a href="../report.html">
reported</a>.

<p>
If you desire to run <i>-current</i>, a recent snapshot is usually all you
need, and upgrading to a snapshot is a required starting point before
attempting to build <i>-current</i> from source.
a144 1
<p>
a147 15
First, there is no significant benefit to this.
Second, the snapshots are built as desired, as time permits, and as resources
become available.
On fast platforms, several snapshots may be released in one day.
On slower platforms, it may take a week or more to build a snapshot.
Providing tags or markers in the source tree for each snapshot would be
quite impractical.
Third, snapshots often contain experimental code that isn't yet committed
to the CVS tree.

<h3>Upgrade vs. Update</h3>
You will often see references to "upgrading" and "updating" OpenBSD
installs.
Even though these words have similar meanings, they are used slightly
differently in OpenBSD.
d149 14
a162 22
<p>
<b>Upgrading</b> is the process of installing a newer version of OpenBSD,
with new functionality.
For example, going from one release to another, or going from the June 12th
snapshot to the June 20th snapshot.
When upgrading, you will typically have to consult either
<a href="current.html">following -current</a> or the upgrade guide (when
changing releases) to make the changes required to run the upgraded version
of OpenBSD.

<p>
<b>Updating</b> is the process of applying patches to a system to improve
the operation WITHOUT changing the basic functionality or binary compatibility.
This is typically done by following the <a href="faq10.html#Patches">
source patching process</a> or by following the <a href="../stable.html">
stable process</a>.
When you update your system, it goes from a <i>-release</i> to <i>-stable</i>
(or patched <i>-release</i>) of the same release version.
You may then later update it to a newer <i>-stable</i> of the same release
version.
The update process is typically very painless, as no <tt>/etc</tt> files
or other system configurations need to be changed.
d164 1
a164 33
<p>
So, you may install a -release system from CD, then update it to -stable
a few times, then upgrade it to the next release from CD, and update that
a few times before upgrading it again to the following release.

<h3>Keeping Things in Sync</h3>
It is important to understand that OpenBSD is an operating system, intended
to be taken as a whole, not a kernel with a bunch of utilities stuck on.
You must make sure your kernel, userland (the supporting utilities and files)
and <a href="faq15.html#Ports">ports</a> tree are all in sync, or unpleasant
things will happen.
Said another way (because people just keep making the error), you cannot run
brand new ports on a month old system, or rebuild a kernel from <i>-current</i>
sources and expect it to work properly with a <i>-release</i> userland.
Yes, this does mean you need to upgrade your system if you want to run a new
program which was added to the ports tree today.
Sorry, but again, OpenBSD has limited resources available.

<p>
One should also understand that the upgrade process is supported in
<b>only one direction: from older to newer</b>, and from <i>-stable</i> to
<i>-current</i>.
You can not run <i>-current</i> (or a snapshot), then decide you are living
too dangerously, and step back to <i>-stable</i>.
You are on your own if you choose any path other than the supported option
of reloading your system from scratch.
Do not expect assistance from the OpenBSD development team.

<p>
Yes, this does mean you should think before committing yourself to using
<i>-current</i>.

<h2 id="Bld">5.2 - Building OpenBSD from source</h2>
d169 1
a169 1
<h3 id="BldOverview">5.2.1 - Overview</h3>
d187 1
a187 1
<h3 id="BldBinary">5.2.2 - Upgrade to the closest available binaries</h3>
d227 1
a227 1
<h3 id="BldGetSrc">5.2.3 - Fetching the appropriate source code</h3>
d446 1
a446 1
<h3 id="BldKernel">5.2.4 - Building the kernel</h3>
d498 1
a498 1
<h3 id="BldUserland">5.2.5 - Building the userland</h3>
d553 1
a553 1
<h2 id="Release">5.3 - Building a release</h2>
d659 1
a659 1
<h2 id="Xbld">5.4 - Building X</h2>
d734 1
a734 1
<h2 id="Options">5.5 - Building a custom kernel</h2>
d909 1
a909 1
<h2 id="BootConfig">5.6 - Boot-time configuration</h2>
d966 1
a966 1
<h2 id="config">5.7 - Using config(8) to change your kernel</h2>
d1065 1
a1065 1
<h2 id="VerboseBoot">5.8 - Getting more verbose output during boot</h2>
d1082 1
a1082 1
<h2 id="buildprobs">5.9 - Common problems when compiling</h2>
d1103 1
a1103 1
<h3 id="sig11">5.9.1 - The build stopped with a "Signal 11" error</h3>
d1126 1
a1126 1
<h3 id="snake">5.9.2 - "make build" fails with "cannot open output file
d1148 1
a1148 1
<h3 id="ProbObj">5.9.3 - Oops! I forgot to make the <tt>/usr/obj</tt>
d1165 1
a1165 1
<h3 id="ProbObjPt">5.9.4 - Put <tt>/usr/obj</tt> on its own partition</h3>
d1179 1
a1179 1
<h3 id="ProbSKIPDIR">5.9.5 - How do I not build parts of the tree?</h3>
d1192 1
a1192 1
<h3 id="ProbMoreInfo">5.9.6 - Where can I learn more about the build
d1208 1
a1208 1
<h3 id="UpdateEtc">5.9.7 - What is the best way to update <tt>/etc</tt>,
d1221 1
a1221 1
<h3 id="Hierarchy">5.9.8 - Is there an easy way to make all the file
d1246 1
a1246 1
<h3 id="ProbXComp">5.9.9 - Can I cross-compile? Why not?</h3>
d1261 96
@


1.251
log
@polish, reorder and shorten the "CVS tips" a bit.
@
text
@d72 3
a74 1
There are three "flavors" of OpenBSD:
d76 16
a91 5
<li><b>-release:</b> The version of OpenBSD shipped every six months on CD.
<li><b>-stable:</b>  Release, plus patches considered critical to security
    and reliability.
<li><b>-current:</b> Where new development work is presently being done,
    and eventually, it will turn into the next release.
d94 1
a94 2
Graphically, the development of these flavors looks something like
this:
a111 14
The <i>-current</i> branch is where active development work is done, and
eventually it will turn into the next <i>-release</i> of OpenBSD.
Every six months, when a new version of OpenBSD is released, <i>-current</i>
is tagged and becomes <i>-release</i>: a frozen point in the history of the
source tree.
Each <i>-release</i> is never changed; it is what is on the
<a href="../orders.html">CDs</a> and <a href="../ftp.html">mirrors</a>.

<p>
The <i>-stable</i> branch is based on <i>-release</i>, and is a branch from
the main development path of OpenBSD.
When very important fixes are made to <i>-current</i>, they are "backported"
(merged) into the two supported <i>-stable</i> branches.
Because of this, <i>-stable</i> is also known as the "<i>patch branch</i>."
a113 16
Old releases are typically supported up to two releases back.
It takes resources and time to support older versions.
While we might like to provide ongoing support for old releases, we would
rather focus on new features.
The <i>-stable</i> branch is, by design, very easy to build from the
<i>-release</i> of the same version.

<p>
The <i>-stable</i> branch is <i>-release</i> plus patches found on the
<a href="../errata.html">errata page</a>.
The operation of <i>-stable</i> is the same as the <i>-release</i> it is
based on.
If the <a href="http://man.openbsd.org">man pages</a>
have to change, it probably won't go into <i>-stable</i>.
In other words, new device support and new features will NOT be added to
<i>-stable</i>.
d115 3
a117 2
<p>
It is worth pointing out that the name "<i>-stable</i>" is not intended
@


1.250
log
@some cleanup and pruning in 5.2 - building from source

Note: at least 90% of this info is duplicated elsewhere, e.g.
release(8) and anoncvs.html, hence 5.2 needs rethinking and rewriting
@
text
@d486 1
a486 1
<h4 id="CVSTips">Common CVS tips</h4>
d489 2
a490 77
<li>As indicated earlier, some options are mandatory to get a valid
<tt>src</tt> tree in OpenBSD.
The <tt>-P</tt> option above is one of those: It removes directories that
are empty.
Over the years, directories have been created and deleted in the OpenBSD
source tree, and sometimes the names of old directories are currently
used as file names.
Without the <tt>-P</tt> option, your newly checked-out tree WILL NOT
successfully compile.

<p>
Much the same with the <tt>-d</tt> option on the "update" command, it
creates new directories that may have been added to the tree since your
initial checkout.
To get a successful update, you must use the <tt>-Pd</tt> options.

<p>
<li>Experienced CVS users may wonder why the CVSROOT was specified and
used in this example, as cvs(1) will record the CVS server's location in
the checked out tree.
This is correct, however there are enough times where one may need to
override the default AnonCVS server.
Many people recommend <i>always</i> specifying the repository explicitly.
It is also worth noting that while the CVSROOT environment variable can
be used directly by cvs(1), it is used only if nothing else overrides
it (i.e., cvs(1) would have an error without it), whereas specifying it
in the cvs(1) command line overrides all other values.

<p>
<li>It's often useful to have a <tt>.cvsrc</tt> file in your home directory
to specify defaults for some of these options.
An example <tt>~/.cvsrc</tt> file might look like this:

<blockquote><pre>
cvs -q -d anoncvs@@anoncvs.example.org:/cvs
diff -uNp
update -Pd
checkout -P
rdiff -u
</pre></blockquote>

This would instruct cvs(1) to use the specified flags for each of the
listed sub-commands.
While this is convenient, if you forget this file exists, or try to run
commands you got used to on a machine without this file, you will have
problems.

<p>
<li>As the source trees consist of large numbers of mostly small files,
turning on <a href="faq14.html#SoftUpdates">soft updates</a> for the
partition the source tree is on will often give significantly better
performance.

<p>
<li>To see the files in the tree that have changed most recently, do:

<blockquote><pre>
$ <b>cd /usr/src/etc</b>
$ <b>ls -lt | more</b>
</pre></blockquote>

<!-- XXXrelease - replace version strings in cvs commands -->
<li><p>To see all the changes in <tt>/etc</tt> between arbitrary versions of
OpenBSD, you can use <a href="../anoncvs.html">CVS</a>.
For example, to see the changes between 5.8 and 5.9, run:

<blockquote><pre>
$ <b>cd /usr/src/etc</b>
$ <b>cvs diff -u -rOPENBSD_5_8 -rOPENBSD_5_9</b>
</pre></blockquote>

To see the changes between 5.9 and <i>-current</i> ("HEAD"), use:

<blockquote><pre>
$ <b>cd /usr/src/etc</b>
$ <b>cvs diff -u -rOPENBSD_5_9 -rHEAD</b>
</pre></blockquote>
d492 52
@


1.249
log
@tweak [faq index] button and sync the pf user's guide with that style.
@
text
@d36 3
a38 4
  <li><a href="#BldBinary"     >5.2.2 - Install or upgrade to closest
                                available binaries</a>
  <li><a href="#BldGetSrc"     >5.2.3 - Fetching the appropriate source
                                code</a>
d266 4
a269 1
<h3 id="BldOverview">5.2.1 - Overview of the building process</h3>
d274 4
a277 4
 <li><a href="#BldBinary"  >Upgrading to the closest available binaries</a>
 <li><a href="#BldGetSrc"  >Fetching the appropriate source code</a>
 <li><a href="#BldKernel"  >Building the new kernel and booting from it</a>
 <li><a href="#BldUserland">Building the userland ("make build")</a>
d280 1
a280 2
There are a couple additional steps that some users may wish to perform,
depending on the purpose of the build and if X is installed:
d283 2
a284 2
 <li><a href="#Release">Building a release</a>
 <li><a href="#Xbld"   >Building X</a>
d287 1
a287 1
<h3 id="BldBinary">5.2.2 - Install or Upgrade to closest available binaries</h3>
d289 1
a289 2
The first step in building from source is to make sure you have the
closest available binaries installed.
d322 2
a323 2
It is recommended that you install the binary sets by using the "Upgrade"
option of the install media.
a325 2
Regardless, you must do the entire upgrade process, including creating
any users or other <tt>/etc</tt> directory changes needed.
d331 2
a332 1
version control system, and
d334 1
a334 1
is used to pull a copy of the desired source to your local machine
d336 9
a344 21
This can be done by using an <a href="../anoncvs.html">AnonCVS</a>
server (a machine holding a publicly accessible copy of the entire CVS
repository used by the OpenBSD project) or from a local CVS repository
you maintain using the <a href="../cvsync.html">CVSync</a> or rsync
programs available as <a href="faq15.html#PkgMgmt">packages</a>.
If you have multiple machines you wish to maintain source code trees on,
you may find it worth having a local CVS repository, created and maintained
using CVSync or rsync.

<p>
After deciding which <a href="../anoncvs.html">AnonCVS server</a> you
wish to use, you must "checkout" the source tree.
After that, you then maintain the tree by running "updates" to pull updated
files to your local tree.

<p>
The <a href="http://man.openbsd.org/cvs">cvs(1)</a>
command has many options, some of them are <b>required</b> to checkout and
update a useful tree.
Other commands can cause a broken tree.
Following and understanding directions here is important.
d347 5
a351 1
Also note that running
d353 1
a353 5
directly as root should be <b>avoided</b>, so we'll add an example user
to the <tt>wsrc</tt> group for this example.
The <tt>/usr/src</tt> directory (where the source code usually lives) is
writable for <tt>wsrc</tt> by default.

d358 2
d363 1
a363 1
<b>anoncvs@@anoncvs.example.org:/cvs</b>.
a366 2
If you are using a different shell, you will have to adjust some of these
commands.
d417 2
d421 2
a422 2
Since they're not part of the base install, you must set their permissions
manually to make use of the <tt>wsrc</tt> group.
a432 15
You can combine the checkouts into one line (-stable shown here):

<blockquote><pre>
$ <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
$ <b>cd /usr</b>
$ <b>cvs -d$CVSROOT checkout -rOPENBSD_5_9 -P src ports xenocara</b>
</pre></blockquote>

However, updates must be done directory-by-directory.

<p>
At this point, whether you followed <i>-stable</i> or <i>-current</i>,
you should have a usable source tree.
Be very careful which tree you grab -- it is easy to try to compile
<i>-current</i> when aiming for <i>-stable</i>.
@


1.248
log
@save some space by moving the [faq index] button to the top right corner
and removing the <h3> table of contents.
@
text
@d25 3
a27 1
<small><a href= "index.html" style="float:right;">[FAQ Index]</a></small>
@


1.247
log
@use short form man links in the faq and fix a few broken links
@
text
@d25 1
a27 3
<p>
<a href= "index.html">[FAQ Index]</a>
<p>
a28 1
<h3>Table of Contents</h3>
d1053 1
a1053 1
<a href= "http://man.openbsd.org/config>config(8)</a>
a1409 3
<hr>
<p>
<a href= "index.html">[FAQ Index]</a>
@


1.246
log
@each faq page has header and footer links that look like this:

[faq index] [to section x - some topic] [to section y - another topic]

that can be very useful if the faq you're reading only covers one topic,
or if the pages are meant to be read in order. it makes sense to have
them on the pf and smtpd faq pages, but the main faq contains a variety
of unrelated topics, so they're not actually very useful there. remove.

while here, make a few subject titles more concise.

ok tb
@
text
@d335 1
a335 1
<a href="http://man.openbsd.org/?query=cvs">cvs(1)</a>
d354 1
a354 1
The <a href="http://man.openbsd.org/?query=cvs">cvs(1)</a>
d362 1
a362 1
<a href="http://man.openbsd.org/?query=cvs">cvs(1)</a>
d377 1
a377 1
<a href="http://man.openbsd.org/?query=sh">sh(1)</a>
d476 1
a476 1
<a href="http://man.openbsd.org/?query=signify">signify(1)</a>
d501 1
a501 1
<a href="http://man.openbsd.org/?query=signify">signify(1)</a>
d615 1
a615 1
<a href="http://man.openbsd.org/?query=config">config(8)</a>
d631 1
a631 1
The <a href="http://man.openbsd.org/?query=machine">machine(1)</a>
d694 1
a694 1
      <a href="http://man.openbsd.org/?query=sysmerge">sysmerge(8)</a>
d696 1
a696 1
      <a href="http://man.openbsd.org/?query=MAKEDEV">MAKEDEV(8)</a>
d718 1
a718 1
<a href="http://man.openbsd.org/?query=release">release(8)</a>.
d726 1
a726 1
<a href="http://man.openbsd.org/?query=mount_mfs">memory disk</a>
d746 1
a746 1
<a href="http://man.openbsd.org/?query=crunchgen">crunchgen(8)</a> utility,
d825 1
a825 1
<a href="http://man.openbsd.org/?query=release">release(8)</a>.
d905 1
a905 1
<a href="http://man.openbsd.org/?query=config">config(8)</a>,
d910 1
a910 1
<a href="http://man.openbsd.org/?query=make">Makefile</a>,
d920 1
a920 1
Check the <a href="http://man.openbsd.org/?query=options">options(4)</a>
d1009 1
a1009 1
<a href="http://man.openbsd.org/?query=options">options(4)</a>
d1018 1
a1018 1
<a href="http://man.openbsd.org/?query=boca">boca(4)</a>
d1056 1
a1056 1
<a href= "http://man.openbsd.org/?query=config">config(8)</a>
d1075 1
a1075 1
<a href="http://man.openbsd.org/?query=boot_config">boot_config(8)</a>.
d1119 1
a1119 1
<a href="http://man.openbsd.org/?query=config">config(8)</a>
d1137 1
a1137 1
<a href="http://man.openbsd.org/?query=config">config(8)</a>
d1197 1
a1197 1
<a href="http://man.openbsd.org/?query=wi">wi(4)</a> device
d1285 1
a1285 1
to <a href="http://man.openbsd.org/?query=cvs">cvs(1)</a>,
d1336 1
a1336 1
<a href="http://man.openbsd.org/?query=mk.conf">mk.conf(5)</a>.
d1348 4
a1351 4
<li><a href="http://man.openbsd.org/?query=release">release(8)</a>
<li><a href="http://man.openbsd.org/?query=config">config(8)</a>
<li><a href="http://man.openbsd.org/?query=mk.conf">mk.conf(5)</a>
<li><a href="http://man.openbsd.org/?query=options">options(4)</a>
d1365 1
a1365 1
<a href="http://man.openbsd.org/?query=sysmerge">sysmerge(8)</a>
d1375 1
a1375 1
<a href="http://man.openbsd.org/?query=hier">filesystem hierarchy</a>.
d1378 1
a1378 1
<a href="http://man.openbsd.org/?query=sysmerge">sysmerge(8)</a>
d1380 1
a1380 1
<a href="http://man.openbsd.org/?query=mtree">mtree(8)</a>
@


1.245
log
@tweak cvsrc example and accompanying text.
@
text
@a28 2
<a href= "faq4.html">[To Section 4 - Installation Guide]</a>
<a href= "faq6.html">[To Section 6 - Networking]</a>
d51 1
a51 2
<li><a href="#buildprobs"      >5.9 - Common problems when compiling and
                                building</a>
d1232 1
a1232 1
<h2 id="buildprobs">5.9 - Common problems when compiling and building</h2>
a1415 2
<a href= "faq4.html">[To Section 4 - Installation Guide]</a>
<a href= "faq6.html">[To Section 6 - Networking]</a>
@


1.244
log
@tweak previous
@
text
@d548 1
a548 1
<li>It is often useful to use a <tt>.cvsrc</tt> file in your home directory
d550 1
a550 1
An example <tt>.cvsrc</tt> file might look like this:
d553 2
a554 3
$ <b>cat ~/.cvsrc</b>
cvs -q -danoncvs@@anoncvs.example.org:/cvs
diff -up
d557 1
d560 2
a561 6
This file would cause cvs(1) to use the <tt>anoncvs@@anoncvs.example.org:/cvs
</tt> server, suppress usually unneeded output (<tt>-q</tt> is "quiet") for
all operations, default to using the <tt>-Pd</tt> flags for "cvs up,"
default to providing unified diffs for "cvs diff" due to <tt>-u</tt> and
use the <tt>-P</tt> option for "cvs checkout."

@


1.243
log
@As noticed by kirby@@, sysmerge is not a substitute for running
MAKEDEV in /dev, so be more specific about the necessary steps.
While there fix href to current.html

OK kirby@@ tb@@
@
text
@d699 1
a699 2
    <li>review changes listed in
      <a href="faq/current.html">current.html</a>
d705 3
a707 4
If following -stable after a proper upgrade process or an install of the
<a href="#BldBinary">proper starting binary</a>, these steps are not needed
or desired.

@


1.242
log
@/usr/xenocara/README contains build instructions not /usr/X11R6/README
@
text
@d697 9
a705 4
<li><b>If building <i>-current</i>:</b> Update <tt>/dev</tt> and
<tt>/etc</tt>, with the changes listed in
<a href="current.html">current.html</a> or run
<a href="http://man.openbsd.org/?query=sysmerge">sysmerge(8)</a>.
d707 1
a707 1
<a href="#BldBinary">proper starting binary</a>, this step is not needed
@


1.241
log
@fix a cross referencing problem noticed by rpe@@
@
text
@d1359 1
a1359 1
<li>(for X) <tt>/usr/X11R6/README</tt> on your installed system
@


1.240
log
@binary -> binaries

OK tb@@
@
text
@d811 1
a811 4
a standard <a href="faq4.html">install</a> or upgrade on another machine.
If updating to a new <i>-stable</i>, simply <a href="faq4.html#AddFileSet">
unpack</a> the sets and kernel to the root directory of the target machine
and reboot.
@


1.239
log
@Additionally refer to sysmerge(8) for updating /dev and /etc after building userland.

OK tb@@
@
text
@d1251 1
a1251 1
<li>Failing to start from the <a href="#BldBinary">appropriate binary</a>,
@


1.238
log
@Lower case words of "Boot-time configuration" to match the rest of
the titles on this page. From Rob Pierce.
@
text
@d699 2
a700 1
<a href="current.html">current.html</a>.
@


1.237
log
@Update FAQ for OpenBSD 5.9.
From tj@@
@
text
@d1065 1
a1065 1
<h2 id="BootConfig">5.6 - Boot-Time Configuration</h2>
@


1.236
log
@new openbsd faq style. joint with tj and validator.w3.org
@
text
@a76 1
<!-- XXXversion - revise doodle -->
d90 1
a90 1
       ,------o-----------o----X                    5.5 Stable
d92 1
a92 1
       |      .    ,------o---------o----X          5.6 Stable
d94 1
a94 1
       |      .    |      .    ,----o----------o--&gt; 5.7 Stable
d96 1
a96 1
       |      .    |      .    |    .    ,-----o--&gt; 5.8 Stable
d99 1
a99 1
 --&gt;5.5Rel-----&gt;5.6Rel-----&gt;5.7Rel-----&gt;5.8Rel----&gt; Current
d103 1
a104 1
<p>
a120 3
You will also note that in the above example, the <i>5.5-stable</i> branch
came to an end with <i>5.7-release</i>, and the <i>5.6-stable</i> branch
came to an end with <i>5.8-release</i>.
a121 1
<!-- XXXrelease -->
d412 1
a412 1
$ <b>cvs -d$CVSROOT checkout -rOPENBSD_5_8 -P src</b>
d415 1
a415 1
This will pull the src files from the OPENBSD_5_8 branch, which is also
d422 1
a422 1
$ <b>cvs -d$CVSROOT up -rOPENBSD_5_8 -Pd</b>
d426 1
a426 1
system, so you don't have to remember the <tt>-rOPENBSD_5_8</tt> part
d453 1
a453 1
$ <b>cvs -d$CVSROOT checkout -rOPENBSD_5_8 -P src ports xenocara</b>
d584 1
a584 1
<!-- XXXversion - replace version strings in cvs commands -->
d587 1
a587 1
For example, to see the changes between 5.7 and 5.8, run:
d591 1
a591 1
$ <b>cvs diff -u -rOPENBSD_5_7 -rOPENBSD_5_8</b>
d594 1
a594 1
To see the changes between 5.8 and <i>-current</i> ("HEAD"), use:
d598 1
a598 1
$ <b>cvs diff -u -rOPENBSD_5_8 -rHEAD</b>
@


1.235
log
@add a small sprinkling of css to improve readability in the faq, ok tj@@ tb@@
@
text
@d21 1
d23 4
a26 2
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">
</a>
d31 1
a32 4
<h1><font color="#e00000">5 - Building the System from Source</font></h1>
<hr>

<p>
@


1.234
log
@fix URIs, the / before querystring isn't optional, if it isn't fixed up
by the browser the server returns 400 Bad Request
@
text
@d14 2
@


1.233
log
@Some cleanup after beck@@'s monster man.openbsd.org diff.
@
text
@d341 1
a341 1
<a href="http://man.openbsd.org?query=cvs">cvs(1)</a>
d360 1
a360 1
The <a href="http://man.openbsd.org?query=cvs">cvs(1)</a>
d368 1
a368 1
<a href="http://man.openbsd.org?query=cvs">cvs(1)</a>
d383 1
a383 1
<a href="http://man.openbsd.org?query=sh">sh(1)</a>
d482 1
a482 1
<a href="http://man.openbsd.org?query=signify">signify(1)</a>
d507 1
a507 1
<a href="http://man.openbsd.org?query=signify">signify(1)</a>
d625 1
a625 1
<a href="http://man.openbsd.org?query=config">config(8)</a>
d641 1
a641 1
The <a href="http://man.openbsd.org?query=machine">machine(1)</a>
d724 1
a724 1
<a href="http://man.openbsd.org?query=release">release(8)</a>.
d732 1
a732 1
<a href="http://man.openbsd.org?query=mount_mfs">memory disk</a>
d752 1
a752 1
<a href="http://man.openbsd.org?query=crunchgen">crunchgen(8)</a> utility,
d834 1
a834 1
<a href="http://man.openbsd.org?query=release">release(8)</a>.
d914 1
a914 1
<a href="http://man.openbsd.org?query=config">config(8)</a>,
d919 1
a919 1
<a href="http://man.openbsd.org?query=make">Makefile</a>,
d929 1
a929 1
Check the <a href="http://man.openbsd.org?query=options">options(4)</a>
d1018 1
a1018 1
<a href="http://man.openbsd.org?query=options">options(4)</a>
d1027 1
a1027 1
<a href="http://man.openbsd.org?query=boca">boca(4)</a>
d1065 1
a1065 1
<a href= "http://man.openbsd.org?query=config">config(8)</a>
d1084 1
a1084 1
<a href="http://man.openbsd.org?query=boot_config">boot_config(8)</a>.
d1128 1
a1128 1
<a href="http://man.openbsd.org?query=config">config(8)</a>
d1146 1
a1146 1
<a href="http://man.openbsd.org?query=config">config(8)</a>
d1206 1
a1206 1
<a href="http://man.openbsd.org?query=wi">wi(4)</a> device
d1294 1
a1294 1
to <a href="http://man.openbsd.org?query=cvs">cvs(1)</a>,
d1345 1
a1345 1
<a href="http://man.openbsd.org?query=mk.conf">mk.conf(5)</a>.
d1357 4
a1360 4
<li><a href="http://man.openbsd.org?query=release">release(8)</a>
<li><a href="http://man.openbsd.org?query=config">config(8)</a>
<li><a href="http://man.openbsd.org?query=mk.conf">mk.conf(5)</a>
<li><a href="http://man.openbsd.org?query=options">options(4)</a>
d1374 1
a1374 1
<a href="http://man.openbsd.org?query=sysmerge">sysmerge(8)</a>
d1384 1
a1384 1
<a href="http://man.openbsd.org?query=hier">filesystem hierarchy</a>.
d1387 1
a1387 1
<a href="http://man.openbsd.org?query=sysmerge">sysmerge(8)</a>
d1389 1
a1389 1
<a href="http://man.openbsd.org?query=mtree">mtree(8)</a>
@


1.232
log
@change http://www.openbsd.org/cgi-bin/man.cgi to be http://man.openbsd.org
this points stuff to the new place and gets us ready to deprecate the old
place we did this.
@
text
@d641 2
a642 2
The <a href="http://man.openbsd.org?query=machine">
machine(1)</a> command can tell you what your platform name is, so an
d732 2
a733 3
<a href="http://man.openbsd.org?query=mount_mfs">memory
disk</a> as your <tt>/usr/obj</tt> for a little extra performance in the
build process.
d752 2
a753 3
<a href="http://man.openbsd.org?query=crunchgen">
crunchgen(8)</a> utility, which creates a single executable file made up
of many individual binaries.
d929 2
a930 2
Check the <a href="http://man.openbsd.org?query=options">
options(4)</a> man page for a complete list of options.
d1084 1
a1084 2
<a href="http://man.openbsd.org?query=boot_config">
boot_config(8)</a>.
d1357 4
a1360 8
<li><a href="http://man.openbsd.org?query=release">
release(8)</a>
<li><a href="http://man.openbsd.org?query=config">
config(8)</a>
<li><a href="http://man.openbsd.org?query=mk.conf">
mk.conf(5)</a>
<li><a href="http://man.openbsd.org?query=options">
options(4)</a>
d1384 1
a1384 2
<a href="http://man.openbsd.org?query=hier">
filesystem hierarchy</a>.
@


1.231
log
@fix a few broken links; from peter de wachter
@
text
@d136 1
a136 1
If the <a href="http://www.openbsd.org/cgi-bin/man.cgi">man pages</a>
d341 1
a341 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs">cvs(1)</a>
d360 1
a360 1
The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs">cvs(1)</a>
d368 1
a368 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs">cvs(1)</a>
d383 1
a383 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh">sh(1)</a>
d482 1
a482 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=signify">signify(1)</a>
d507 1
a507 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=signify">signify(1)</a>
d625 1
a625 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config">config(8)</a>
d641 1
a641 1
The <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=machine">
d724 1
a724 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release">release(8)</a>.
d732 1
a732 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_mfs">memory
d753 1
a753 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crunchgen">
d836 1
a836 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release">release(8)</a>.
d916 1
a916 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config">config(8)</a>,
d921 1
a921 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make">Makefile</a>,
d931 1
a931 1
Check the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options">
d1020 1
a1020 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options">options(4)</a>
d1029 1
a1029 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boca">boca(4)</a>
d1067 1
a1067 1
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=config">config(8)</a>
d1086 1
a1086 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config">
d1131 1
a1131 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config">config(8)</a>
d1149 1
a1149 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config">config(8)</a>
d1209 1
a1209 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi">wi(4)</a> device
d1297 1
a1297 1
to <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs">cvs(1)</a>,
d1348 1
a1348 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mk.conf">mk.conf(5)</a>.
d1360 1
a1360 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release">
d1362 1
a1362 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config">
d1364 1
a1364 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mk.conf">
d1366 1
a1366 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options">
d1381 1
a1381 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysmerge">sysmerge(8)</a>
d1391 1
a1391 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hier">
d1395 1
a1395 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysmerge">sysmerge(8)</a>
d1397 1
a1397 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree">mtree(8)</a>
@


1.230
log
@remove section 5.9.3 "my ipv6-less system doesn't work!"
@
text
@d897 1
a897 2
It is assumed you have read the <a href="#Why">above</a>, and really
enjoy pain.
d1260 1
a1260 1
<li>Trying to <a href="#Why">customize</a> or "optimize" your system
@


1.229
log
@remove the following sections:
- "why should i build my system from source"
- "why do i need a custom kernel"
- "i didn't see any snapshots on the http site"
- "how do i bootstrap a newer version of the compiler"
@
text
@d58 1
a58 2
   <li><a href="#ProbIPv6"     >5.9.3 - My IPv6-less system doesn't work!</a>
   <li><a href="#ProbObj"      >5.9.4 - Oops! I forgot to make the /usr/obj
d60 2
a61 2
   <li><a href="#ProbObjPt"    >5.9.5 - Put /usr/obj on its own partition</a>
   <li><a href="#ProbSKIPDIR"  >5.9.6 - How do I not build parts of the
d63 1
a63 1
   <li><a href="#ProbMoreInfo" >5.9.7 - Where can I learn more about the
d65 1
a65 1
   <li><a href="#UpdateEtc"    >5.9.8 - What is the best way to update
d67 1
a67 1
   <li><a href="#Hierarchy"    >5.9.9 - Is there an easy way to make all
d69 1
a69 1
   <li><a href="#ProbXComp"    >5.9.10 - Can I cross-compile?  Why not?</a>
a1260 1
<li>Not following the <a href="faq5.html">process</a>
d1311 1
a1311 10
<h3 id="ProbIPv6">5.9.3 - My IPv6-less system doesn't work!</h3>

Yes.
Please do not make modifications to the base system that you don't
understand the implications of.
One "little" change in the kernel can have very large impact to the
entire rest of the system.
Please re-read <a href="#Why">this</a>.

<h3 id="ProbObj">5.9.4 - Oops! I forgot to make the <tt>/usr/obj</tt>
d1328 1
a1328 1
<h3 id="ProbObjPt">5.9.5 - Put <tt>/usr/obj</tt> on its own partition</h3>
d1342 1
a1342 1
<h3 id="ProbSKIPDIR">5.9.6 - How do I not build parts of the tree?</h3>
d1355 1
a1355 1
<h3 id="ProbMoreInfo">5.9.7 - Where can I learn more about the build
d1375 1
a1375 1
<h3 id="UpdateEtc">5.9.8 - What is the best way to update <tt>/etc</tt>,
d1388 1
a1388 1
<h3 id="Hierarchy">5.9.9 - Is there an easy way to make all the file
d1414 1
a1414 1
<h3 id="ProbXComp">5.9.10 - Can I cross-compile? Why not?</h3>
@


1.228
log
@sync section 5.2's title with the table of contents.
@
text
@d34 1
a34 3
<li><a href="#WhySrc"          >5.2 - Why should I build my system from
                                source?</a>
<li><a href="#Bld"             >5.3 - Building OpenBSD from source</a>
d36 2
a37 2
  <li><a href="#BldOverview"   >5.3.1 - Overview</a>
  <li><a href="#BldBinary"     >5.3.2 - Install or upgrade to closest
d39 1
a39 1
  <li><a href="#BldGetSrc"     >5.3.3 - Fetching the appropriate source
d41 2
a42 2
  <li><a href="#BldKernel"     >5.3.4 - Building the kernel</a>
  <li><a href="#BldUserland"   >5.3.5 - Building userland</a>
d44 6
a49 7
<li><a href="#Release"         >5.4 - Building a release</a>
<li><a href="#Xbld"            >5.5 - Building X</a>
<li><a href="#Why"             >5.6 - Why do I need a custom kernel?</a>
<li><a href="#Options"         >5.7 - Building a custom kernel</a>
<li><a href="#BootConfig"      >5.8 - Boot-time configuration</a>
<li><a href="#config"          >5.9 - Using config(8) to change your kernel</a>
<li><a href="#VerboseBoot"     >5.10 - Getting more verbose output during
d51 1
a51 1
<li><a href="#buildprobs"      >5.11 - Common problems when compiling and
d54 1
a54 1
   <li><a href="#sig11"        >5.11.1 - The build stopped with a "Signal 11"
d56 1
a56 1
   <li><a href="#snake"        >5.11.2 - "make build" fails with "cannot open
d58 2
a59 2
   <li><a href="#ProbIPv6"     >5.11.3 - My IPv6-less system doesn't work!</a>
   <li><a href="#ProbObj"      >5.11.4 - Oops! I forgot to make the /usr/obj
d61 2
a62 2
   <li><a href="#ProbObjPt"    >5.11.5 - Put /usr/obj on its own partition</a>
   <li><a href="#ProbSKIPDIR"  >5.11.6 - How do I not build parts of the
d64 1
a64 1
   <li><a href="#ProbMoreInfo" >5.11.7 - Where can I learn more about the
d66 1
a66 5
   <li><a href="#NoSnaps"      >5.11.8 - I didn't see any snapshots on the HTTP
                                site. Where did they go?</a>
   <li><a href="#NewCompiler"  >5.11.9 - How do I bootstrap a newer version
                                of the compiler (<i>gcc</i>)?</a>
   <li><a href="#UpdateEtc"    >5.11.10 - What is the best way to update
d68 1
a68 1
   <li><a href="#Hierarchy"    >5.11.11 - Is there an easy way to make all
d70 1
a70 1
   <li><a href="#ProbXComp"    >5.11.12 - Can I cross-compile?  Why not?</a>
d273 1
a273 1
<h2 id="WhySrc">5.2 - Why should I build my system from source?</h2>
d275 1
a275 44
Actually, you probably don't need to.

<p>
Some reasons why NOT to build from source:

<ul>
<li>Compiling your own system as a way of upgrading it is not supported.
<li>You will NOT get better system performance by compiling your own system.
<li>Changing compiler options is more likely to break your system than
to improve it.
</ul>

Some reasons why you might actually wish or need to build from source:

<ul>
<li>Test or develop new features.
<li>Compiling the system puts a lot of stress on the computer.
It can be a way to make sure the system you just put together or acquired
is actually in pretty good operational condition.
<li>You wish to follow the <a href="../stable.html">stable branch</a>.
<li>You wish to make a highly customized version of OpenBSD for some
special application.
</ul>

<p>
The OpenBSD team puts out new snapshots based on <i>-current</i> code on
a very regular basis for all platforms.
It is likely this will be all you need for running <i>-current</i>.

<p>
The most common reason to build from source is to follow the <i>-stable</i>
branch, where building from source is the only supported option.

<p>
If you are compiling <i>-current</i> from source, it is HIGHLY recommended
that you only do so from a machine which you have full console access to.
There will be times in the development process where the mismatch between
your new kernel and your old userland may render the system inaccessible
via network.
This is not an issue when properly building <i>-stable</i>.

<h2 id="Bld">5.3 - Building OpenBSD from source</h2>

<h3 id="BldOverview">5.3.1 - Overview of the building process</h3>
d280 4
a283 4
<li><a href="#BldBinary">Upgrading to the closest available binaries</a>
<li><a href="#BldGetSrc">Fetching the appropriate source code</a>
<li><a href="#BldKernel">Building the new kernel and booting from it</a>
<li><a href="#BldUserland">Building the userland ("make build")</a>
d290 2
a291 2
<li><a href="#Release">Building a "release"</a>
<li><a href="#Xbld">Building X</a>
d294 1
a294 1
<h3 id="BldBinary">5.3.2 - Install or Upgrade to closest available binaries</h3>
d337 1
a337 1
<h3 id="BldGetSrc">5.3.3 - Fetching the appropriate source code</h3>
d469 1
d607 1
a607 1
<h3 id="BldKernel">5.3.4 - Building the kernel</h3>
d659 1
a659 1
<h3 id="BldUserland">5.3.5 - Building the userland</h3>
d710 2
a711 2
<a name="BldRelease"></a> <!-- old tag -->
<h2 id="Release">5.4 - Building a Release</h2>
d821 1
a821 1
<h2 id="Xbld">5.5 - Building X (Xenocara)</h2>
d896 1
a896 72
<h2 id="Why">5.6 - Why do I need a custom kernel?</h2>

Actually, you probably don't.

<p>
A custom kernel is a kernel built with a configuration file other than
the provided <tt>GENERIC</tt> configuration file.
A custom kernel can be based on <a href="#Flavors"><i>-release,
-stable</i> or <i>-current</i></a> code, just as a <tt>GENERIC</tt>
kernel can be.
While compiling your own <tt>GENERIC</tt> kernel is supported by the
OpenBSD team, compiling your own custom kernel is <i>not</i>.

<p>
The standard OpenBSD kernel configuration (<tt>GENERIC</tt>) is designed
to be suitable for most people.
More people have broken their system by trying to tweak their kernel than
have improved system operation.
There are some people that believe that you must customize your kernel
and system for optimum performance, but this is not true for OpenBSD.
Only the most advanced and knowledgeable users with the most demanding
applications need to worry about a customized kernel or system.

<p>
Some reasons you might want or need to build a custom kernel:

<ul>
  <li>You really know what you are doing, and want to shoehorn OpenBSD onto
      a computer with a small amount of RAM by removing device drivers you
      don't need.
  <li>You really know what you are doing, and wish to remove default
      options or add options which may not have been enabled by default
      (and have good reason to do so).
  <li>You really know what you are doing, and wish to enable experimental
      options.
  <li>You really know what you are doing, and have a special need that is
      not met by <tt>GENERIC</tt>, and aren't going to ask why it doesn't
      work if something goes wrong.
</ul>

<p>
Some reasons why you should not build a custom kernel:

<ul>
  <li>You do not need to, normally.
  <li>You will not get a faster system.
  <li>You are likely to make a less reliable machine.
  <li>You will not get any support from developers.
  <li>You will be expected to reproduce any problem with a <tt>GENERIC</tt>
      kernel before developers take any problem report seriously.
  <li>Users and developers will laugh at you when you break your system.
  <li>Custom compiler options usually do a better job of exposing
      compiler problems than improving system performance.
</ul>

<p>
Removing device drivers may speed the boot process on your system, but
can complicate recovery should you have a hardware problem, and is
very often done wrong.
Removing device drivers <i>will not</i> make your system run faster by
any noticeable amount, though can produce a smaller kernel.
Removing debugging and error checking can result in a measurable
performance gain, but will make it impossible to troubleshoot a system
if something goes wrong.

<p>
Again, developers will usually ignore bug reports dealing with custom
kernels, unless the problem can be reproduced in a <tt>GENERIC</tt> kernel
as well.
You have been warned.

<h2 id="Options">5.7 - Building a custom kernel</h2>
a1027 1
<p>
d1072 1
a1072 1
<h2 id="BootConfig">5.8 - Boot-Time Configuration</h2>
d1130 1
a1130 1
<h2 id="config">5.9 - Using config(8) to change your kernel</h2>
a1153 1
<!--XXXrelease - replace kernel example -->
d1156 1
a1156 4
WARNING: no output file specified
OpenBSD 5.8 (GENERIC) #1066: Sun Aug 16 02:33:00 MDT 2015
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
Enter 'help' for information
d1220 1
a1220 2
OpenBSD 5.8 (GENERIC) #1066: Sun Aug 16 02:33:00 MDT 2015
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
d1227 1
a1227 1
</pre></blockquote> <!-- XXXrelease - replace version string -->
d1229 1
a1229 1
<h2 id="VerboseBoot">5.10 - Getting more verbose output during boot</h2>
d1246 1
a1246 2
<h2 id="buildprobs">5.11 - Common problems when compiling and
building</h2>
d1268 1
a1268 1
<h3 id="sig11">5.11.1 - The build stopped with a "Signal 11" error</h3>
d1291 1
a1291 1
<h3 id="snake">5.11.2 - "make build" fails with "cannot open output file
d1313 1
a1313 1
<h3 id="ProbIPv6">5.11.3 - My IPv6-less system doesn't work!</h3>
d1322 1
a1322 1
<h3 id="ProbObj">5.11.4 - Oops! I forgot to make the <tt>/usr/obj</tt>
d1339 1
a1339 1
<h3 id="ProbObjPt">5.11.5 - Tip: Put <tt>/usr/obj</tt> on its own partition</h3>
d1353 1
a1353 1
<h3 id="ProbSKIPDIR">5.11.6 - How do I not build parts of the tree?</h3>
d1366 1
a1366 1
<h3 id="ProbMoreInfo">5.11.7 - Where can I learn more about the build
d1386 1
a1386 12
<h3 id="NoSnaps">5.11.8 - I didn't see any snapshots on the HTTP site.
Where did they go?</h3>

Snapshots may be removed as they become old (or no longer relevant) or
near the time of a new <i>-release</i>.

<h3 id="NewCompiler">5.11.9 - How do I bootstrap a newer version of the
compiler (<i>gcc</i>)?</h3>

You should really just <a href="#BldBinary">install the latest snapshot</a>.

<h3 id="UpdateEtc">5.11.10 - What is the best way to update <tt>/etc</tt>,
d1399 1
a1399 1
<h3 id="Hierarchy">5.11.11 - Is there an easy way to make all the file
d1425 1
a1425 1
<h3 id="ProbXComp">5.11.12 - Can I cross-compile?  Why not?</h3>
@


1.227
log
@- remove section 1.9 "what's new in 5.8" (just read the release page)
- remove section 2.1 "web pages of interest"
- amd 64 -> amd64
- mail list -> mailing list
- clean up table of contents
- remove "back" button on index (browsers can do this by themselves now)

ok tb
@
text
@d280 1
a280 1
<h2 id="WhySrc">5.2 - Why do I need to compile the system from source?</h2>
d282 1
a282 1
Actually, you very possibly do not.
@


1.226
log
@new sentence, new line. few small tweaks and zap some whitespace.

ok tb
@
text
@d4 5
a17 1
<!-- Passes validator.w3.org.  Please keep it this way -->
@


1.225
log
@clarify how to handle updated kernels in the -stable file set section,
based on a report from mark carroll <mtbc at ixod.org>

fix a bit of ugly spacing while here.
@
text
@d16 1
a16 1
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif" border="0">    
d63 1
a63 1
   <li><a href="#ProbMoreInfo" >5.11.7 - Where can I learn more about the 
d102 1
a102 1
 --&gt;5.5Rel-----&gt;5.6Rel-----&gt;5.7Rel-----&gt;5.8Rel----&gt; Current 
d110 23
a132 24
Every six months, when a new version of OpenBSD is released,
<i>-current</i> is tagged and becomes <i>-release</i>: a frozen point
in the history of the source tree.
Each <i>-release</i> is never changed; it is what
is on the <a href="../orders.html">CDs</a> and 
<a href="../ftp.html">HTTP mirrors</a>.

<p>
The <i>-stable</i> branch is based on <i>-release</i>,
and is a branch from the main development path of OpenBSD.
When very important fixes are made to <i>-current</i>, they are
"backported" (merged) into the two supported <i>-stable</i> branches.
Because of this, <i>-stable</i> is also known as the 
"<i>patch branch</i>."
In the above illustration, the vertical dotted lines denote bug
fixes being incorporated into the <i>-stable</i> branches.  You will
also note that in the above example, the <i>5.5-stable</i> branch came
to an end with <i>5.7-release</i>, and the <i>5.6-stable</i> branch came
to an end with <i>5.8-release</i>. Old releases are typically supported
up to two releases back. <!-- XXXrelease -->
It takes resources and time to support older versions. While we might
like to provide ongoing support for old releases, we would rather focus
on new features.
The <i>-stable</i> branch is, by design, very easy to build from
d147 1
a147 2
to imply that <i>-current</i> is unreliable or less robust in
production.
d149 1
a149 2
<i>-current</i> are changing and evolving, whereas the operation
and APIs
d151 2
a152 2
This means you shouldn't have to relearn features of your system, change any
configuration files, or have any problem adding additional applications
d157 2
a158 2
<i>-current</i> should be more reliable, more secure and, of course,
have greater features than <i>-stable</i>.
d163 10
a172 9
That being said, many people do run <i>-current</i> on production
systems, and it is important that people do so to identify bugs and
test new features.  However, if you don't know how to properly describe,
diagnose and deal with a problem, don't tell yourself (or anyone else)
that you are "helping the project" by running <i>-current</i>.  "It
didn't work!" is not a <a href="../report.html#bugtypes">useful bug
report</a>.  "The recent changes to the pciide driver broke
compatibility with my Slugchip-based IDE interface, dmesg of working and
broken systems follow..." might be a useful report.
d176 7
a182 7
edge and run <i>-current</i>. The most common reason is that the user 
has a device
which is not supported by <i>-release</i> (and thus, not <i>-stable</i>),
or wishes to use a new feature of <i>-current</i>.  In this case, the
choice may be either <i>-current</i> or not using the device, and
<i>-current</i> may be the better option.  However, one should not expect
hand-holding from the developers.
d186 4
a189 3
through the <a href="../ftp.html">HTTP sites</a>.  As the name implies,
these are builds of whatever code is in the tree at the instant the
builder grabbed a copy of the code for that particular platform.
d191 19
a209 17
snapshots. This is the reason they are built and distributed.
If you find a bug in a snapshot, make sure it is
<a href="../report.html">reported</a>.

<p>
If you desire to run <i>-current</i>, a recent
snapshot is usually all you need, and upgrading to a snapshot is a
required starting point before attempting to build <i>-current</i>
from source.

<p>
It is sometimes asked if there is any way to get a copy of exactly the
code used to build a snapshot.  The answer is no.  First, there is no
significant benefit to this.  Second, the snapshots are built as
desired, as time permits, and as resources become available.  On fast
platforms, several snapshots may be released in one day.  On
slower platforms, it may take a week or more to build a snapshot.
d212 2
a213 2
Third, snapshots often contain experimental code that isn't yet
committed to the tree.
d217 1
a217 1
installs.  
d222 2
a223 2
<b>Upgrading</b> is the process of installing a newer version of 
OpenBSD, with new functionality.
d227 16
a242 19
<a href="current.html">following -current</a> or the
<a href="upgrade58.html">upgrade guide</a> (when changing releases)
<!-- XXXrelease -->
to make the changes required to run the upgraded version of OpenBSD.

<br>
<b>Updating</b> is the process of applying patches to a system to
improve the operation WITHOUT changing the basic functionality or binary
compatibility. 
This is typically done by following the    
<a href="faq10.html#Patches">source patching process</a> or by following
the <a href="../stable.html">stable process</a>.
When you "update" your system, it goes from a <i>-release</i> to a
<i>-stable</i> (or patched <i>-release</i>) of the same release version,
for example, -release to -stable.
You may then later update it to a newer <i>-stable</i> of the same
release version.
The update process is typically very painless, as no <tt>/etc</tt>
files or other system configurations need to be changed.
d250 21
a270 21
It is important to understand that OpenBSD is an operating system, 
intended to be taken as a whole, not a kernel with a bunch of utilities
stuck on.  You must make sure your kernel, userland (the supporting
utilities and files) and <a href="faq15.html#Ports">ports</a> tree
are all in sync, or unpleasant things will happen.  Said another way
(because people just keep making the error), you can not run brand new
<tt>ports</tt> on a month old system, or rebuild a kernel from <i>-current</i>
sources and expect it to work properly with a <i>-release</i> userland.  Yes,
this does mean you need to upgrade your system if you want to run a new 
program which was added to the ports tree today.  Sorry,
but again, OpenBSD has limited resources available.

<p>
One should also understand that the upgrade
process is supported in <b>only one direction: from older to newer</b>,
and from <i>-stable</i> to <i>-current</i>.  You can not run
<i>-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>-stable</i>.  You are on your own if
you choose any path other than the supported option of reloading your
system from scratch. Do not expect assistance from the OpenBSD
development team.
d273 2
a274 2
Yes, this does mean you should think before committing
yourself to using <i>-current</i>.
d277 1
d282 1
d291 1
d294 3
a296 3
<li>Compiling the system puts a lot of stress on the computer. It can be
a way to make sure the system you just put together or acquired is
actually in pretty good operational condition.
d308 2
a309 3
The most common reason to build from source is to follow the
<i>-stable</i> branch, where building from source is the only supported
option.
d312 5
a316 6
If you are compiling <i>-current</i> from source, it is HIGHLY
recommended that you only do so from a machine which you have full
console access to.
There will be times in the development process where the mismatch
between your new kernel and your old userland may render the system
inaccessible via network.
d324 1
d332 1
a332 1
There are a couple additional steps that some users may wish to perform, 
d334 1
a343 1

d376 1
a376 1
It is recommended that you install the binary sets by using the "Upgrade" 
d380 1
a380 1
Regardless, you must do the entire upgrade process, including creating 
d384 1
d388 1
a388 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a>
d390 1
a390 1
for compilation. 
d394 2
a395 3
you maintain using the
<a href="../cvsync.html">CVSync</a> or rsync programs available as
<a href="faq15.html#PkgMgmt">packages</a>.
d402 3
a404 3
wish to use, you must "checkout" the source tree. After that, you then
maintain the tree by running "updates" to pull updated files to your
local tree.
d407 3
a409 4
The
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a>
command has many options, some of them are <b>required</b> to
checkout and update a useful tree.
d412 1
d417 3
a419 3
to the <tt>wsrc</tt> group for this example. The <tt>/usr/src</tt> directory
(where the source code usually lives) is writable for <tt>wsrc</tt> by default.
<p>
a424 1
<p>
d427 7
a433 6
In this case, we will assume we are using a public AnonCVS 
server, <b>anoncvs@@anoncvs.example.org:/cvs</b>.
We will also assume you are using 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">sh(1)</a>
as your command shell. If you are using a different shell, you will have to
adjust some of these commands.
a443 1
<p>
d476 4
a479 4
system, so you don't have to remember the "<tt>-rOPENBSD_5_8</tt>" part
of the command line. It will remember this until you explicitly clear
them or set a new tag by using the <tt>-A</tt> option to
<tt>update</tt>.
d485 3
a487 3
same steps for <tt>xenocara</tt> and <tt>ports</tt>. Since they're not
part of the base install, you must set their permissions manually to
make use of the <tt>wsrc</tt> group.
d498 1
a498 1
You can combine the checkouts into one line (-stable shown here): 
d511 1
a511 1
Be very careful which tree you grab -- it is easy to try to compile 
d516 5
a520 5
you can sometimes save time and bandwidth by "pre-loading" your
source tree with the source files from either the OpenBSD CD or a mirror.
This is particularly true if you are running
<a href="../stable.html"><i>-stable</i></a>, as relatively few files change
between this version and the <i>-release</i> it is based on.
d523 3
a525 2
To extract the source tree from the CD to <tt>/usr/src</tt>, assuming the CD is
mounted on /mnt, you would do the following:
d544 1
a544 1
The source files available for download from the HTTP servers are separated
d546 4
a549 4
with only one part of the tree.  The two files are <tt>sys.tar.gz</tt>,
which contains the files used to create the kernel, and <tt>src.tar.gz</tt>,
which contains all the other userland utilities except the ports tree
and the X11 sources.
d555 1
a555 1
  
a561 1
<p>
d570 2
a571 2
The <tt>-P</tt> option above is one of those: It removes
directories that are empty.
d585 2
a586 2
<li>Experienced CVS users may wonder why the CVSROOT was specified and 
used in this example, as cvs(1) will record the CVS server's location in 
d588 3
a590 3
This is correct, however there are enough times where one may need to 
override the default anoncvs server. Many people recommend <i>always</i>
specifying the repository explicitly.
d636 1
a636 1
For example, to see the changes between 5.7 and 5.8 do a:
d653 1
d670 2
a671 2
Building the kernel consists of using the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>
d687 4
a690 5
The 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=machine&amp;sektion=1">machine(1)</a>
command can tell you what your platform name is, so an obvious
generalization would be to use the command "<tt>cd
/usr/src/sys/arch/$(machine)/conf</tt>" instead on the first line.
d696 2
a697 2
to the most recent available snapshot, it may not matter as much.  
However, sometimes APIs change, and the old kernel will be unable to run 
d739 5
a743 7
This compiles and installs all the userland utilities in the
appropriate order.
This is a fairly time consuming step -- a very fast machine may be able
to complete it in well under an hour, a very slow machine may take many
days.
When this step is complete, you have newly compiled binaries in place
on your system.
d758 1
d774 3
a776 4
The release process uses the binaries created in the <tt>/usr/obj</tt> 
directory in the building process above, so you must successfully
complete the build first, and nothing must disturb the <tt>/usr/obj</tt>
directory.
d780 3
a782 2
build process. In that case, you would not want to reboot the computer
between the "build" and "release" steps!
d785 1
a785 1
The release process requires two work directories, which we will call 
d792 1
a792 1
The release process will also use the <tt>/mnt</tt> location, so this 
a796 1

d802 1
a802 1
The name this single executable file is invoked by determines which 
d804 1
a804 1
This is how a number of individual program files are squeezed into 
a809 1
<p>
d812 1
a812 1
Define our DESTDIR and RELEASEDIR environment variables:
d827 3
a829 2
release process. However, if there are changes in the release files or their
names, old files may be left laying around.
d853 2
a854 3
the upgrade or install scripts, you will need to add an "index.txt"
file that contains the list of all the files in your newly created
release.
d867 1
d882 1
a882 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">release(8)</a>.
d898 2
a899 2
For building the standard xenocara tree as supported by OpenBSD,
no external tools are needed.
a942 1
<p>
d946 1
a946 1
A custom kernel is a kernel built with a configuration file other than 
d957 2
a958 2
More people have broken their system by trying to tweak their
kernel than have improved system operation.
d961 1
a961 1
Only the most advanced and knowledgeable users with the most demanding 
d966 1
d968 3
a970 3
  <li>You really know what you are doing, and want to shoe-horn
      OpenBSD onto a computer with a small amount of RAM
      by removing device drivers you don't need.
d977 2
a978 2
      not met by <tt>GENERIC</tt>, and
      aren't going to ask why it doesn't work if something goes wrong.
d983 1
a993 1

d999 1
a999 1
very often done wrong.  
a1005 1

d1007 3
a1009 3
Again, developers will
usually ignore bug reports dealing with custom kernels, unless the
problem can be reproduced in a <tt>GENERIC</tt> kernel as well.
d1013 1
d1023 1
a1023 1
OpenBSD kernel generation is controlled by configuration files, 
d1025 4
a1028 3
directory by default.  All architectures have a file, <tt>GENERIC</tt>,
which is used to generate the standard OpenBSD kernel for that platform.
There may also be other configuration files which are used to create 
d1030 1
a1030 1
workstations, etc.  
d1033 2
a1034 2
The configuration file is processed by 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>,
d1037 3
a1039 2
<tt>/usr/src/sys/arch/<i>&lt;arch&gt;</i>/compile/</tt>.  config(8) also creates
a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">Makefile</a>,
d1044 11
a1054 10
configuration that place certain features into your kernel. This allows
you to have exactly the support you want, without having support for
unneeded devices. There are a multitude of options that allow you to
customize your kernel. Here we will go over only some of them, those that
are most commonly used. Check the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
man page for a complete list of options, and as these change from time
to time, you should make sure you use a man page for the same version of
OpenBSD you are building. You can also check the example configuration
files that are available for your architecture.
d1060 2
a1061 3
The only kernel configuration
which is supported by the OpenBSD team is the GENERIC kernel, the
combination of the options in
d1064 5
a1068 4
team</i> (i.e., NOT edited).  Reporting a problem on a customized kernel
will almost always result in you being told to try to reproduce the
problem with a GENERIC kernel.  Not all options are compatible with
each other, and many options are required for the system to work.
d1076 2
a1077 2
src/sys/arch</a> directory. As an example, the files for an amd64 kernel
would be in
d1090 5
a1094 3
that stores platform-independent options.  When creating your kernel
configuration, be sure to look through 
<a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/conf/GENERIC">sys/conf/GENERIC</a>. 
d1096 2
a1097 2
Kernel configuration options should be placed in your kernel
configuration file in the format of:
d1106 1
a1106 1
option      <i>name=value</i> 
d1122 5
a1126 5
typically in the <tt>src/sys/conf/GENERIC</tt> file.  While you could
modify a copy of that file, a better choice would be to use the
<i>rmoption</i> statement.  For example, if you really wanted to 
disable the in-kernel debugger (<i>not recommended!</i>), you would add
a line such as:
d1137 6
a1142 6
Once again, please see 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
for more information about the specifics of these options.  Also note
that many of the options also have their own manual pages -- always read
everything available about an option before adding or removing it from
your kernel.
d1144 1
a1144 1
<p> 
d1148 1
a1148 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boca&amp;sektion=4">boca(4)</a>
d1150 3
a1152 2
This card is not in the GENERIC kernel, due to conflicts with other
drivers. There are two common ways to make a custom kernel.
d1169 1
a1169 1
The disadvantage is one can not remove devices (though in general, that's 
d1182 1
a1182 2
use config(8) and make the kernel as documented
<a href="#BldKernel">above</a>.
d1186 2
a1187 2
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8#EXAMPLES+(kernel">
config(8)</a> man page.
a1190 1
<p>
d1192 10
a1201 8
your device but maybe at the wrong IRQ. And maybe you need to use this
device right away. Well, without rebuilding the kernel, you can use
OpenBSD's boot time kernel configuration. This will only correct your
problem for one time. If you reboot, you will have to repeat this
procedure. So, this is only meant as a temporary fix, and you should
correct the problem using <a href="#config">config(8)</a>. Your kernel
does however need <strong>option BOOT_CONFIG</strong> in the kernel, which 
GENERIC does have.
d1205 2
a1206 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&amp;sektion=8">boot_config(8)</a>.
d1209 2
a1210 1
To boot into the User Kernel Config, or UKC, use the -c option at boot time.
d1213 1
a1213 1
boot&gt; <strong>boot hd0a:/bsd -c</strong>
d1216 4
a1219 3
Or whichever kernel it is you want to boot. Doing this will bring up a
UKC prompt. From here you can issue commands directly to the kernel
specifying devices you want to change or disable or even enable.
d1226 6
a1231 3
<li><tt>change <strong>devno | device </strong></tt> - Modify one or more devices
<li><tt>disable <strong>devno | device </strong></tt> - Disable one or more devices 
<li><tt>enable <strong>devno | device </strong></tt> - Enable one or more devices 
d1236 2
a1237 2
<li><tt>show <strong>[attr [val]]</strong></tt> - Show devices with an attribute and
  optional with a specified value
d1244 2
a1245 2
kernel image, as described in <a href="#config">Using config(8)
to change your kernel</a>.
d1248 7
a1254 6
<p>
The <tt>-e</tt> and <tt>-u</tt> options with
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>
can be extremely helpful and save wasted time compiling your kernel. The
<tt>-e</tt> flag allows you to enter the UKC or User Kernel Config on a
running system. These changes will then take place on your next reboot.
d1260 9
a1268 8
The following example shows the disabling of the ep* devices in the
kernel. For safety's sake you must use the <tt>-o</tt> option which writes
the changes out to the file specified. For example: <tt>config -e
-o bsd.new /bsd</tt> will write the changes to bsd.new. The example
doesn't use the <tt>-o</tt> option, therefore changes are just ignored,
and not written back to the kernel binary. For more information
pertaining to error and warning messages read the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>
d1273 1
a1273 1
# <strong>config -e /bsd</strong>
d1278 1
a1278 1
ukc&gt; <strong>?</strong>
d1294 1
a1294 1
ukc&gt; <strong>list</strong>
d1315 1
a1315 1
ukc&gt; <strong>disable ep</strong>
d1322 1
a1322 1
ukc&gt; <strong>quit</strong>
d1326 5
a1330 5
<p>
In the above example, all ep* devices are disabled in the kernel and will
not be probed. In some situations where you have used the UKC during boot,
via <tt>boot -c</tt>, you will need these changes to be written out
permanently. To do this you need to use the <tt>-u</tt> option.
d1332 6
a1337 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wi&amp;sektion=4">wi(4)</a>
device was disabled. Since changes made with <tt>boot -c</tt> are NOT
permanent, these changes must be written out. This example writes the
changes made from <tt>boot -c</tt> into a new kernel binary: <tt>bsd.new</tt>.
d1340 1
a1340 1
# <strong>config -e -u -o bsd.new /bsd</strong>
d1348 1
a1348 1
ukc&gt; <strong>quit</strong>
d1354 5
a1358 4
problems when booting.  If you have a problem wherein your boot floppy
won't boot and need to get more information, simply reboot. When you get
to the &quot;boot&gt;&quot; prompt, boot with <tt>boot -c</tt>. This will
bring you into the UKC&gt;, then do:
d1361 1
a1361 1
UKC&gt; <strong>verbose</strong>
d1363 1
a1363 1
UKC&gt; <strong>quit</strong>
a1365 1
<p>
d1370 1
d1379 1
d1381 3
a1383 3
<li>Failing to start from the <a href="#BldBinary">appropriate
binary</a>, including attempting to upgrade from source or assuming
a week old snapshot is "close enough"
a1392 1
<p>
d1395 6
a1400 5
memory. As a result, if you have hardware which has a problem, the most
likely time for that problem to appear is during a build.  Signal 11
failures are <i>typically</i> caused by hardware problems, very often
memory problems, but can also be CPU, main board, or heat issues.  Your
system may actually be very stable otherwise, but unable to compile
d1406 3
a1408 2
the future.  If you have hardware which you really wish to use and
causes you no other problem, simply install a snapshot or a release.
d1414 4
a1417 2
<h3 id="snake">5.11.2 - "make build" fails with "cannot open output file snake: is
a directory"</h3>
a1418 1
This is the result of two separate errors: 
d1420 4
a1423 6
<li><b>You did not fetch or update your CVS tree properly.</b>  When 
doing a CVS checkout operation, you must use the <tt>-P</tt> option,
when you update your source tree with CVS, you must use <tt>-Pd</tt>
options to
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1"
>cvs(1)</a>,
d1428 3
a1430 3
<li><b>You did not properly create the <tt>obj</tt> directory before
your build.</b>  Building the tree without a <tt>/usr/obj</tt> directory
is not supported.
d1433 2
a1434 3
It is important to carefully follow the instructions when 
<a href="#BldGetSrc">fetching</a> and <a href="#Bld">building</a> your
tree.
d1437 1
d1445 2
a1446 2
<h3 id="ProbObj">5.11.4 - Oops! I forgot to make the <tt>/usr/obj</tt> directory
first!</h3>
d1463 4
a1466 3
If you build often, you may find it faster to put <tt>/usr/obj</tt>
on its own partition.
The benefit is simple: it is typically much faster to
d1474 1
a1474 1
than to remove the contents of the directory with <tt>rm</tt>.
d1477 1
d1480 4
a1483 4
application from packages, or wish to make a "smaller" release for 
whatever reason. 
The solution to this is to use the <tt>SKIPDIR</tt> option of 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mk.conf&amp;sektion=5">/etc/mk.conf</a>.
d1489 3
a1491 1
<h3 id="ProbMoreInfo">5.11.7 - Where can I learn more about the build process?</h3>
d1493 1
d1495 10
a1504 5
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">release(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mk.conf&amp;sektion=5">mk.conf(5)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/Makefile"><tt>/usr/src/Makefile</tt></a>
a1506 1

d1509 2
a1510 2
<h3 id="NoSnaps">5.11.8 - I didn't see any snapshots on the HTTP site. Where
did they go?</h3>
d1512 1
a1512 2
<p>
Snapshots may be removed as they become old (or no longer relevant) or 
d1515 2
a1516 2
<h3 id="NewCompiler">5.11.9 - How do I bootstrap a newer version of the compiler
(<i>gcc</i>)?</h3>
d1518 1
a1518 2
You should really just <a href="#BldBinary">install the latest
snapshot</a>.
d1520 2
a1521 2
<h3 id="UpdateEtc">5.11.10 - What is the best way to update <tt>/etc</tt>, <tt>/var</tt>,
and <tt>/dev</tt>?</h3>
d1523 3
a1525 4
<p>Building the OpenBSD tree does not modify files in <tt>/etc</tt>
automatically.
This means it is <i>always</i> up to the administrator to make the
necessary modifications there.
d1527 1
a1527 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysmerge&amp;sektion=8">sysmerge(8)</a>
d1533 2
a1534 1
<h3 id="Hierarchy">5.11.11 - Is there an easy way to make all the file hierarchy changes?</h3>
d1536 3
a1538 4
<p>
From time to time, files or directories are added to, or removed from
the file
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hier&amp;sektion=7">hierarchy</a>.
d1540 2
a1541 2
This is done automatically by
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysmerge&amp;sektion=8">sysmerge(8)</a>
d1543 1
a1543 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mtree&amp;sektion=8">mtree(8)</a>
a1555 1
<p>
d1560 1
d1568 6
a1573 8
Building the system from source puts considerable load on the OS and
machine, and does a very good job of testing how well the system really
works.
For this reason, OpenBSD does all the build process on the platform the
build is being used for, also known as "native building."
Without native building, it is much more difficult to be sure that 
the various platforms are actually running reliably, and not just
booting.
@


1.224
log
@improve the wsrc section a bit and remove some redundant lines.

discussed with matthieu
@
text
@d5 3
a7 2
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "copyright"     content= "This document copyright 1998-2014 by OpenBSD.">
d29 4
a32 3
<li><a href="#Flavors">5.1 - OpenBSD's flavors</a>
<li><a href="#WhySrc">5.2 - Why should I build my system from source?</a>
<li><a href="#Bld">5.3 - Building OpenBSD from source</a>
d34 7
a40 7
  <li><a href="#BldOverview">5.3.1 - Overview</a>
  <li><a href="#BldBinary">5.3.2 - Install or upgrade to closest
    available binaries</a>
  <li><a href="#BldGetSrc">5.3.3 - Fetching the appropriate source
    code</a>
  <li><a href="#BldKernel">5.3.4 - Building the kernel</a>
  <li><a href="#BldUserland">5.3.5 - Building userland</a>
d42 10
a51 9
<li><a href="#Release">5.4 - Building a release</a>
<li><a href="#Xbld">5.5 - Building X</a>
<li><a href="#Why">5.6 - Why do I need a custom kernel?</a>
<li><a href="#Options">5.7 - Building a custom kernel</a>
<li><a href="#BootConfig">5.8 - Boot-time configuration</a>
<li><a href="#config">5.9 - Using config(8) to change your kernel</a>
<li><a href="#VerboseBoot">5.10 - Getting more verbose output during
  boot</a>
<li><a href="#buildprobs">5.11 - Common problems when compiling and building</a>
d53 21
a73 21
   <li><a href="#sig11">5.11.1 - The build stopped with a "Signal 11" error</a>
   <li><a href="#snake">5.11.2 - "make build" fails with "cannot open output
      file snake: is a directory"</a>
   <li><a href="#ProbIPv6">5.11.3 - My IPv6-less system doesn't work!</a>
   <li><a href="#ProbObj">5.11.4 - Oops! I forgot to make the <tt>/usr/obj</tt>
      directory first!</a>
   <li><a href="#ProbObjPt">5.11.5 - Put <tt>/usr/obj</tt> on its own
     partition</a>
   <li><a href="#ProbSKIPDIR">5.11.6 - How do I not build parts of the
     tree?</a>
   <li><a href="#ProbMoreInfo">5.11.7 - Where can I learn more about the 
     build process?</a>
   <li><a href="#NoSnaps">5.11.8 - I didn't see any snapshots on the HTTP
     site. Where did they go?</a>
   <li><a href="#NewCompiler">5.11.9 - How do I bootstrap a newer version
     of the compiler (<i>gcc</i>)?</a>
   <li><a href="#UpdateEtc">5.11.10 - What is the best way to update
     <tt>/etc</tt>, <tt>/var</tt>, and <tt>/dev</tt>?</a>
   <li><a href="#Hierarchy">5.11.11 - Is there an easy way to make all
     the file hierarchy changes?</a>
   <li><a href="#ProbXComp">5.11.12 - Can I cross-compile?  Why not?</a>
d92 1
a92 2
<blockquote>
<pre>
d105 1
a105 2
</pre>
</blockquote>
d771 5
d801 4
a804 4
The release process involves a utility,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crunchgen&amp;sektion=8">crunchgen(8)</a>,
which is used to create a single executable file made up of many
individual binaries.
d844 1
a844 1
make sure the tar files are matching what is in the <tt>DESTDIR</tt>.
a852 5
These files can now be used to install or upgrade OpenBSD on other machines.

<p>
The authoritative instructions on making a release are in
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">release(8)</a>.
d865 4
a868 4
a standard <a href="faq4.html">install</a> or upgrade on another machine,
or if updating a machine to a new <i>-stable</i>, simply
<a href="faq4.html#AddFileSet">unpack</a> the tar files in the root
directory of the target machine.
@


1.223
log
@unify table of contents with actual page titles, fixing a few broken links
in the process. few minor tweaks while here.

ok tb
@
text
@d485 3
a487 1
same steps for <tt>xenocara</tt> and <tt>ports</tt>.
d491 1
a491 1
# <b>mkdir -p xenocara ports</b>
d493 1
d498 1
a498 1
You can combine the checkouts into one line (<i>-stable</i> shown):
d526 3
a528 1
First, verify their contents.
d532 1
a532 2
$ <b>signify -Cp /etc/signify/openbsd-$(uname -r | cut -c 1,3)-base.pub -x SHA256.sig \
  src.tar.gz ports.tar.gz xenocara.tar.gz</b>
d535 2
a536 1
Assuming all the files passed the check, they can now be extracted:
d539 2
a540 3
$ <b>cd /usr/src; tar xzf /mnt/src.tar.gz</b>
$ <b>cd /usr; tar xzf /mnt/xenocara.tar.gz</b>
$ <b>cd /usr; tar xzf /mnt/ports.tar.gz</b>
d550 1
a550 1
Assuming <tt>src.tar.gz</tt> and <tt>sys.tar.gz</tt> are in <tt>/usr</tt>
d552 2
a553 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=signify">signify(1)</a>:
d557 2
a558 5
$ <b>tar xzf ../sys.tar.gz</b>
$ <b>tar xzf ../src.tar.gz</b>
$ <b>cd /usr</b>
$ <b>tar xzf xenocara.tar.gz</b>
$ <b>tar xzf ports.tar.gz</b>
d887 3
a889 4
The "usual" location for the xenocara source tree is
<tt>/usr/xenocara</tt>, and the source is stored in the
<tt>xenocara</tt> module in CVS.
So, the checkout process is this:
d892 3
@


1.222
log
@less 5.8-specific mentions, more command formatting, less commands as root,
recommend verifying tarballs before extracting, remove mvme68k examples and
a bit more tidying up.

looks good to tb
@
text
@d28 1
a28 1
<li><a href="#Flavors">5.1 - OpenBSD's Flavors</a>
d48 1
a48 2
<li><a href="#buildprobs">5.11 - Common problems, tips and questions
  when compiling and building</a>
d75 1
a75 1
<h2 id="Flavors">5.1 - OpenBSD's Flavors</h2>
d378 1
a378 1
<a href="upgrade58.html">here</a>. <!-- XXXrelease -->
d486 7
d495 1
a495 2
After repeating the <tt>wsrc</tt> steps above for the ports and xenocara
directories, you can combine the checkouts into one line (<i>-stable</i> shown):
d534 3
a536 3
# <b>cd /usr/src; tar xzf /mnt/src.tar.gz</b>
# <b>cd /usr; tar xzf /mnt/xenocara.tar.gz</b>
# <b>cd /usr; tar xzf /mnt/ports.tar.gz</b>
d551 6
a556 6
# <b>cd /usr/src</b>
# <b>tar xzf ../sys.tar.gz</b>
# <b>tar xzf ../src.tar.gz</b>
# <b>cd /usr</b>
# <b>tar xzf xenocara.tar.gz</b>
# <b>tar xzf ports.tar.gz</b>
d675 4
a678 4
# <b>cd /usr/src/sys/arch/i386/conf</b>
# <b>config GENERIC</b>
# <b>cd ../compile/GENERIC</b>
# <b>make clean && make</b>
d749 3
a751 3
If following -stable after a proper <a href="upgrade58.html">upgrade
process</a> or an install of the <a href="#BldBinary">proper starting
binary</a>, this step is not needed or desired. <!-- XXXrelease -->
d1350 1
a1350 1
<h2 id="buildprobs">5.11 - Common problems, tips and questions when compiling and
@


1.221
log
@replace a disorganized assortment of tables and hand-rolled command output
with more standard formatting. while here, run a few less of those commands
as root where it's not needed. the cvs checkout examples were adopted to
use the wsrc group as is done in the ports faq.

input/ok tb
@
text
@d108 2
a109 2
<i>-Current</i> is where active development work is done, and eventually,
it will turn into the next <i>-release</i> of OpenBSD.
d111 1
a111 1
<i>-current</i> is tagged, and becomes <i>-release</i>: a frozen point
d118 1
a118 1
<i>-Stable</i> is based on <i>-release</i>,
d121 2
a122 2
"back ported" (merged) into the <i>-stable</i> branches;
because of this, <i>-stable</i> is also known as the 
d128 3
a130 3
to an end with <i>5.8-release</i> -- old releases are typically supported
up to two releases back.
It takes resources and time to support older versions; while we might
d153 2
a154 2
of <i>-stable</i> are the same as the release it is based on, so you
shouldn't have to relearn features of your system or change any
d160 1
a160 1
<i>-current</i> should be more reliable, more secure, and of course,
d183 1
a183 1
<i>-current</i> may be the lesser evil.  However, one should not expect
d191 2
a192 2
It is possible, though hopefully unlikely, you may uncover bugs in
snapshots, this is the reason they are built and distributed.
d252 1
a252 1
It is important to understand that OpenBSD is an Operating System, 
d254 2
a255 2
stuck on.  You must make sure your kernel, "userland" (the supporting
utilities and files) and <a href="faq15.html#Ports"><tt>ports</tt></a> tree
d259 1
a259 1
source and expect it to work properly with a <i>-release</i> userland.  Yes,
d268 2
a269 2
<i>5.8-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>5.8-stable</i>.  You are on your own if
d271 1
a271 1
system from scratch, do not expect assistance from the OpenBSD
d293 1
a293 1
<li>Compiling the system puts a lot of stress on the computer, it can be
d296 1
a296 1
<li>You wish to follow the <a href="../stable.html">stable branch.</a>
d326 4
a329 4
<li><a href="#BldBinary">Upgrading to the closest available binaries.</a>
<li><a href="#BldGetSrc">Fetching the appropriate source code.</a>
<li><a href="#BldKernel">Building the new kernel and booting from it.</a>
<li><a href="#BldUserland">Building "userland" ("make build").</a>
d335 2
a336 2
<li><a href="#Release">Building a "release".</a>
<li><a href="#Xbld">Building X.</a>
d409 1
a409 1
command has many options, some of them are <i><b>required</b></i> to
d432 1
a432 1
as your command shell, if you are using a different shell, you will have to
d456 3
a458 3
If you wish to check out an alternative "branch" of the tree, such as
the <i>-stable</i> branch, you will use the "<tt>-r</tt>" modifier to
your checkout:
d467 1
a467 1
known as the "patch branch" or "<a href="../stable.html">-stable</a>".
d478 3
a480 3
of the command line, it will remember this until you explicitly clear
them or set a new tag by using the "<tt>-A</tt>" option to
"<tt>update</tt>".
d482 1
a482 1
command lines than too little.
d485 2
a486 2
While only the "<tt>src</tt>" tree has been shown so far, you will do the
same steps for "<tt>xenocara</tt>" and "<tt>ports</tt>".
d501 1
a501 1
At this point, whether you followed <i>-stable</i> or <i>-current</i>
d509 1
a509 2
source tree with the source files from either the OpenBSD CD or from an
HTTP server.
d537 2
a538 2
which contains the files used to create the kernel, and <tt>src.tar.gz</tt>
which contains all the other "userland" utilities except the ports tree
d541 3
a543 2
Assuming the downloaded files, <tt>src.tar.gz</tt> and
<tt>sys.tar.gz</tt>, are in <tt>/usr</tt>:
d545 8
a552 8
<pre>
    # <b>cd /usr/src</b>
    # <b>tar xzf ../sys.tar.gz</b>
    # <b>tar xzf ../src.tar.gz</b>
    # <b>cd /usr</b>
    # <b>tar xzf xenocara.tar.gz</b>
    # <b>tar xzf ports.tar.gz</b>
</pre>
d563 1
a563 1
The "<tt>-P</tt>" option above is one of those: It "prunes" (removes)
d568 1
a568 1
Without the "<tt>-P</tt>" option, your newly checked-out tree WILL NOT
d572 1
a572 1
Much the same with the <tt>-d</tt> option on the 'update' command -- it
d582 1
a582 1
override the default anoncvs server, many people recommend <i>always</i>
d590 18
a607 17
<li>It is often useful to use a <tt>.cvsrc</tt> in your home directory to 
specify defaults for some of these options.
An example <tt>.cvsrc</tt> file:
<pre>
    $ <b>more ~/.cvsrc</b>
    cvs -q -danoncvs@@anoncvs.example.org:/cvs
    diff -up
    update -Pd
    checkout -P
</pre>

This file would cause cvs(1) to use the 
<tt>anoncvs@@anoncvs.example.org:/cvs</tt> server, suppress usually
unneeded output ("<tt>-q</tt>" is "quiet") for all operations, 
a "cvs up" command defaults to using the <tt>-Pd</tt>,
a "cvs diff" defaults to providing "unified diffs" due to the "<tt>-u</tt>", 
and a "cvs checkout" will use the "<tt>-P</tt>" option.
d619 1
a619 1
<li>To see the files in the tree that have changed most recently, do a:
d621 4
a624 4
<pre>
    # <b>cd /usr/src/etc</b>
    # <b>ls -lt |more</b>
</pre>
d631 4
a634 4
<pre>
    # <b>cd /usr/src/etc</b>
    # <b>cvs diff -u -rOPENBSD_5_7 -rOPENBSD_5_8</b>
</pre>
d637 5
a641 4
<pre>
    # <b>cd /usr/src/etc</b>
    # <b>cvs diff -u -rOPENBSD_5_8 -rHEAD</b>
</pre>
d653 1
a653 2
Obviously, the kernel is a VERY hardware dependent portion of the
system.
a656 13
If you look in the <tt>/usr/src/sys/arch/</tt> directory, you may see
some things that look a little confusing -- for example, there are
<tt>mac68k</tt>, <tt>m68k</tt> and <tt>mvme68k</tt> directories.
In this case, the mvme68k and mac68k systems both use the same
processor, but the machines they are based on are very different, and
thus require a very different kernel (there is much more to a computer's
design than its processor!).
However, parts of the kernel are common, those parts are kept in the
m68k directory.
If you are simply building a kernel, the base architecture directories 
like <tt>m68k</tt> are not anything for you to worry about, you will
be working exclusively with the "compound architecture" directories, 
such as <tt>mvme68k</tt>.
d678 1
a678 1
Replace "<tt>i386</tt>" in the first line with your platform name.
d683 1
a683 1
/usr/src/sys/arch/`machine`/conf</tt>" instead on the first line.
d690 1
a690 1
Sometimes, however, APIs change, and the old kernel will be unable to run 
d694 2
a695 2
Note that you can build a kernel without root access, but you must have
root to install the kernel.
d706 1
d719 1
d726 1
d731 2
a732 1
This compiles and installs all the "userland" utilities in the
d752 1
a752 1
<h3>What is a "release", and why would I want to make one?</h3>
d768 1
a768 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_mfs&amp;sektion=8">memory
d770 2
a771 2
build process, you would not want to reboot the computer between the "build" 
and "release" steps!
d775 1
a775 1
DESTDIR and RELEASEDIR.
d777 4
a780 4
to their proper place within the DESTDIR.
They will then be tar(1)ed up and placed in the RELEASEDIR.
At the end of the process, RELEASEDIR will hold the completed OpenBSD
release.
d783 2
a784 2
For the purpose of example, we will use the DESTDIR of
<tt>/usr/dest</tt> and the RELEASEDIR of <tt>/usr/rel</tt>.
d804 1
d811 1
d817 3
a819 3
RELEASEDIR does not normally need to be empty before starting the release
process, however, if there are changes in the release files or their names, 
old files may be left laying around.
d824 1
d831 1
a831 1
make sure the tar files are matching what is in the DESTDIR.
d839 2
a840 3
You now have complete and checked release file sets in the RELEASEDIR.
These files can now be used to install or upgrade OpenBSD on other
machines.
d849 1
a849 1
file, which contains the list of all the files in your newly created
d851 1
d853 1
a853 1
# <b>/bin/ls -nT >index.txt</b>
d857 2
a858 3
a standard <a href="faq4.html">install</a> or
<a href="upgrade58.html">upgrade</a> on another machine, or if updating
a machine to a new <i>-stable</i>, simply
d860 1
a860 1
directory of the target machine. <!-- XXXrelease -->
d863 1
a863 1
Starting with <a href="http://x.org/">X.org v7,</a> X switched to a
d870 1
a870 2
This system "converts" X back into one big tree to be built in one
process.
d884 1
d908 7
a914 6
After successfully building X, you will define a DESTDIR and RELEASEDIR,
with the same purposes as above.
The RELEASEDIR can be the same directory as the main system RELEASEDIR,
but DESTDIR will be erased and rebuilt in this process.
If done carefully, this is not a problem, but using a separate DESTDIR
may be "safer".
d917 2
a918 2
For this example, we will use a DESTDIR and RELEASEDIR of /usr/dest and
/usr/rel, respectively.
d932 1
a932 1
in the $RELEASEDIR.
d1074 5
a1078 3
<pre>
     include "../../../conf/GENERIC"
</pre>
d1086 5
a1090 3
<blockquote>
<tt>option&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><i>name</i>
</blockquote>
d1092 1
d1094 1
a1094 1
<tt>option&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><i>name=value</i> 
d1110 1
a1110 1
typically in the "<tt>src/sys/conf/GENERIC</tt>" file.  While you could
d1115 5
a1119 3
<pre>
     rmoption DDB
</pre>
d1144 1
a1171 1

d1182 1
a1182 1
device right away. Well, without rebuilding the kernel you can use
d1230 1
a1230 1
The <b>-e</b> and <b>-u</b> options with
d1233 1
a1233 1
<b>-e</b> flag allows you to enter the UKC or User Kernel Config on a
d1235 2
a1236 2
The <b>-u</b> flag tests to see if any changes were made to the running
kernel during boot, meaning you used <b>boot -c</b> to enter the UKC
d1241 4
a1244 4
kernel. For safety's sake you must use the <b>-o</b> option which writes
the changes out to the file specified. For example : <strong>config -e
-o bsd.new /bsd</strong> will write the changes to bsd.new. The example
doesn't use the <b>-o</b> option, therefore changes are just ignored,
d1308 2
a1309 2
via <b>boot -c</b>, you will need these changes to be written out
permanently. To do this you need to use the <b>-u</b> option.
d1312 1
a1312 1
device was disabled. Since changes made with boot -c are NOT
d1314 1
a1314 1
changes made from boot -c into a new kernel binary bsd.new.
d1333 2
a1334 2
to the &quot;boot&gt;&quot; prompt, boot with boot -c. This will bring you
into the UKC&gt;, then do:
d1358 4
a1361 4
a week old snapshot is "close enough".
<li><a href="#BldGetSrc">Checking out</a> the wrong branch of the tree.
<li>Not following the <a href="faq5.html">process</a>.
<li>Trying to <a href="#Why">customize</a> or "optimize" your system.
d1394 2
a1395 2
doing a CVS checkout operation, you must use the "<tt>-P</tt>" option,
when you update your source tree with CVS, you must use "<tt>-Pd</tt>"
d1423 2
a1424 2
By doing a "make build" before doing a "make obj", you will end up with
the object files scattered in your <tt>/usr/src</tt> directory.
d1428 8
a1435 7
<pre>
    # <b>cd /usr/src</b>
    # <b>find . -type l -name obj | xargs rm</b>
    # <b>make cleandir</b>
    # <b>rm -rf /usr/obj/*</b>
    # <b>make obj</b>
</pre>
d1440 9
a1448 7
The benefit is simple, it is typically faster to:
<pre>
    # <b>umount /usr/obj</b>
    # <b>newfs <i>YourObjPartition</i></b>
    # <b>mount /usr/obj</b>
</pre>
than to "rm -rf /usr/obj/*".
d1455 1
a1455 1
The solution to this is to use the SKIPDIR option of 
d1500 1
a1500 3
<!-- XXXrelease -->
This process is detailed in the
<a href="upgrade58.html">upgrade</a> document.
d1518 6
a1523 6
<pre>
    # cd /usr/src/etc/mtree
    # install -c -o root -g wheel -m 600 special /etc/mtree
    # install -c -o root -g wheel -m 444 4.4BSD.dist /etc/mtree
    # mtree -qdef /etc/mtree/4.4BSD.dist -p / -u
</pre>
d1527 1
a1527 1
easier!).
d1541 1
a1541 1
build is being used for, also known as "native building".
@


1.220
log
@simplify platform-specific kernel config section, prompted by a report
from ropers at gmail.com

input/ok tb
@
text
@d402 2
a403 2
wish to use, you must "checkout" the source tree, after that, you then
maintain the tree by running "updates", to pull updated files to your
d413 7
d421 6
a427 2
<b>Following <i>-current</i></b><br>
<blockquote>
d438 5
a442 5
<pre>
    # <b>cd /usr</b>
    # <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
    # <b>cvs -d$CVSROOT checkout -P src</b>
</pre>
d446 6
a451 6
<pre>
    # <b>cd /usr/src</b>
    # <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
    # <b>cvs -d$CVSROOT up -Pd</b>
</pre>
</blockquote>
d454 2
a455 2
<b>Following <i>-stable</i></b><br>
<blockquote>
d459 6
a464 5
<pre>
    # <b>cd /usr</b>
    # <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_8 -P src</b>
</pre>
d469 6
a474 5
<pre>
    # <b>cd /usr/src</b>
    # <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
    # <b>cvs -d$CVSROOT up -rOPENBSD_5_8 -Pd</b>
</pre>
a482 1
</blockquote>
d489 8
a496 6
You can combine the checkouts into one line (<i>-stable</i> shown):
<pre>
    # <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
    # <b>cd /usr</b>
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_8 -P src ports xenocara</b>
</pre>
d516 18
a533 7
To extract the source tree from the CD to <i>/usr/src</i> (assuming the CD is
mounted on /mnt):
<pre>
    # <b>cd /usr/src; tar xzf /mnt/src.tar.gz</b>
    # <b>cd /usr; tar xzf /mnt/xenocara.tar.gz</b>
    # <b>cd /usr; tar xzf /mnt/ports.tar.gz</b>
</pre>
d535 2
a536 2
The source files available for download from the HTTP servers are separated into two
files to minimize the download time for those wishing to work
d1016 1
a1016 1
by <a href="#config">config(8)ing a GENERIC kernel</a>.
d1137 4
a1140 5
drivers.
There are two common ways to make a custom kernel: copy the GENERIC
config file to another name and edit it, or create a "wrapper" file that
"includes" the standard GENERIC kernel and any options you need that
aren't in GENERIC.
d1158 5
a1162 5
standard <tt>GENERIC</tt>, giving it another name, then editing it as
needed.
The disadvantage to this is later updates to the GENERIC configuration
file have to be merged into your copy, or you have to remake your 
configuration file.
@


1.219
log
@TJ's work on the FAQ continues, this time a big diff with lots of small
fixes:

- only specify the current supported "set debug" choices in the options
  section of the pf faq
- clarify ipv4 vs ipv6 configs in the nat section of the pf faq
- mention that usb disk images are available in addition to the cd isos
- don't say that all donors get their name on the donations page anymore
- replace the last few instances of "ftp mirrors" with "http mirrors" or
  just "mirrors" where appropriate
- reword some 5.8 mentions to reduce the amount of version bumps we have
  to do each release
- few minor tweaks

Thanks!
@
text
@d990 1
a990 1
either a <a href="#BootConfig">Boot time configuration (UKC>)</a> or
d1014 1
a1014 1
Kernel Configuration Options are options that you add to your kernel
d1038 4
a1041 5
each other, and many options are required for the system to work.  There
is no guarantee that just because you manage to get a custom kernel
compiled that it will actually run.
There is no guarantee that a kernel that can be "config(8)ed" can be
built.
d1044 6
a1049 12
You can see the platform-specific configuration files here:
<ul>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/alpha/conf/">alpha kernel configuration files </a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/i386/conf/">i386 kernel configuration files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/macppc/conf/">macppc kernel configuration files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc/conf/">sparc kernel configuration files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc64/conf/">sparc64 kernel configuration files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/vax/conf/">vax kernel configuration files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/hppa/conf/">hppa kernel configuration files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/">other
 architectures</a>
</ul>
@


1.218
log
@binares/binariies->binaries, -Stable->-stable, from Larry Hynes
@
text
@d63 1
a63 1
   <li><a href="#NoSnaps">5.11.8 - I didn't see any snapshots on the FTP
d134 1
a134 2
<i>-release</i> of the same version (i.e., going from <i>5.8-release</i>
to <i>5.8-stable</i>). <!-- XXXrelease -->
d188 1
a188 1
through the <a href="../ftp.html">FTP sites</a>.  As the name implies,
d496 1
a496 1
FTP server.
d510 1
a510 1
The source files available for download from the FTP servers are separated into two
d1047 9
a1055 8
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/alpha/conf/">alpha Kernel Configuration Files </a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/i386/conf/">i386 Kernel Configuration Files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/macppc/conf/">macppc Kernel Configuration Files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc/conf/">sparc Kernel Configuration Files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc64/conf/">sparc64 Kernel Configuration Files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/vax/conf/">vax Kernel Configuration Files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/hppa/conf/">hppa Kernel Configuration Files</a>
<li><a href="http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/sys/arch/">Other Arch's</a>
d1453 1
a1453 1
<h3 id="NoSnaps">5.11.8 - I didn't see any snapshots on the FTP site. Where
@


1.217
log
@get rid of some duplicate content; from TJ
@
text
@d34 1
a34 1
    available binares</a>
d327 1
a327 1
<li><a href="#BldBinary">Upgrading to the closest available binariies.</a>
d444 1
a444 1
<b>Following <i>-Stable</i></b><br>
@


1.216
log
@
in comes 5.8
@
text
@d115 1
a115 1
<a href="../ftp.html">FTP servers</a>.
d135 1
a135 1
to <i>5.8-stable</i>).
d224 1
a224 1
For example, going from v5.7 to v5.8, or going from the June 12th
d227 3
a229 2
<a href="current.html">Following -current</a> or the
<a href="upgrade58.html">Upgrade guide</a> (when changing releases)
d241 1
a241 1
for example, 5.7-release to 5.7-stable.
d248 3
a250 4
So, you may install a system (for example, 5.6-release) from CD, then 
update it to 5.6-stable a few times, then upgrade it to 5.7-release
from CD, and update that a few times before upgrading it again to the
5.8-release.
d380 1
a380 1
<a href="upgrade58.html">here</a>.
d443 1
a443 1
<!-- XXXrelease -->
d456 1
a456 1
known as the "Patch branch" or "<a href="../stable.html">-stable</a>".
d601 1
a601 1
<!-- XXXversion -->
d730 1
a730 1
binary</a>, this step is not needed or desired.
d842 1
a842 1
directory of the target machine.
d1231 1
a1231 1
<!--XXXver -->
d1307 1
a1307 1
</pre></blockquote>
d1478 1
a1478 1
<!-- XXXversion -->
@


1.215
log
@
de-sudo-ing.  How you run commands as root isn't the FAQ's role to dictate.
@
text
@d92 1
a92 1
       ,------o-----------o----X                    5.4 Stable
d94 1
a94 1
       |      .    ,------o---------o----X          5.5 Stable
d96 1
a96 1
       |      .    |      .    ,----o----------o--&gt; 5.6 Stable
d98 1
a98 1
       |      .    |      .    |    .    ,-----o--&gt; 5.7 Stable
d101 1
a101 1
 --&gt;5.4Rel-----&gt;5.5Rel-----&gt;5.6Rel-----&gt;5.7Rel----&gt; Current 
d126 3
a128 3
also note that in the above example, the <i>5.4-stable</i> branch came
to an end with <i>5.6-release</i>, and the <i>5.5-stable</i> branch came
to an end with <i>5.7-release</i> -- old releases are typically supported
d134 2
a135 2
<i>-release</i> of the same version (i.e., going from <i>5.7-release</i>
to <i>5.7-stable</i>).
d224 1
a224 1
For example, going from v5.6 to v5.7, or going from the June 12th
d228 1
a228 1
<a href="upgrade57.html">Upgrade guide</a> (when changing releases)
d247 2
a248 2
So, you may install a system (for example, 5.5-release) from CD, then 
update it to 5.5-stable a few times, then upgrade it to 5.6-release
d250 1
a250 1
5.7-release.
d269 2
a270 2
<i>5.7-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>5.7-stable</i>.  You are on your own if
d380 1
a380 1
<a href="upgrade57.html">here</a>.
d452 1
a452 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_7 -P src</b>
d455 1
a455 1
This will pull the src files from the OPENBSD_5_7 branch, which is also
d461 1
a461 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_5_7 -Pd</b>
d465 1
a465 1
system, so you don't have to remember the "<tt>-rOPENBSD_5_7</tt>" part
d482 1
a482 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_7 -P src ports xenocara</b>
d604 1
a604 1
For example, to see the changes between 5.6 and 5.7 do a:
d608 1
a608 1
    # <b>cvs diff -u -rOPENBSD_5_6 -rOPENBSD_5_7</b>
d611 1
a611 1
To see the changes between 5.7 and <i>-current</i> ("HEAD"), use:
d614 1
a614 1
    # <b>cvs diff -u -rOPENBSD_5_7 -rHEAD</b>
d728 1
a728 1
If following -stable after a proper <a href="upgrade57.html">upgrade
d839 1
a839 1
<a href="upgrade57.html">upgrade</a> on another machine, or if updating
d1235 1
a1235 1
OpenBSD 5.7 (GENERIC) #738: Sun Mar  8 10:59:31 MDT 2015
d1299 1
a1299 1
OpenBSD 5.7 (GENERIC) #738: Sun Mar  8 10:59:31 MDT 2015
d1480 1
a1480 1
<a href="upgrade57.html">upgrade</a> document.
@


1.214
log
@
xim.....com no longer has anything obvious to do with CVS, so change link
to something more useful.  From TJ at mrsk dot me, thanks!
@
text
@d1233 1
a1233 1
$ <strong>sudo config -e /bsd</strong>
d1298 1
a1298 1
$ <strong>sudo config -e -u -o bsd.new /bsd</strong>
@


1.213
log
@
not a bad idea to say where to start your release.  Suggested by Wesley
at mouedine dot net, thanks.
@
text
@d386 1
a386 1
<a href="http://ximbiot.com/cvs/cvshome/">CVS</a>
@


1.212
log
@
binary -> binaries (as in, "install the most recent binaries").
Unfortunately, forgot to commit this, and not sure who sent it to me.
@
text
@d903 1
@


1.211
log
@Clean up meta tags.

name=distribution, name=keywords, and name=resource-type have no effect
in modern search engines and just clutter up the page source.

From Pavel Plamenov.
@
text
@d34 1
a34 1
    available binary</a>
d327 1
a327 1
<li><a href="#BldBinary">Upgrading to the closest available binary.</a>
d340 1
a340 1
<h3 id="BldBinary">5.3.2 - Install or Upgrade to closest available binary</h3>
d343 1
a343 1
closest available binary installed.
d367 1
a367 1
  <td> -release </td> <td> -current </td> <td> Latest Snapshot </td>
d371 1
a371 1
  <td> Old -current </td> <td> -current </td> <td> Latest Snapshot </td>
d377 1
a377 1
It is recommended that you install the binary by using the "Upgrade" 
d379 1
a379 1
If that is not possible, you can also unpack the binaries as described
@


1.210
log
@Add 'link rel="canonical"' to pages, acting as a hint to search engines
to list the copies on www.openbsd.org rather than mirrors.

From Carlin Bingham, ok millert@@ nick@@
@
text
@a4 1
<meta name= "resource-type" content= "document">
a5 2
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
@


1.209
log
@
picked a bad time to quote the . char when searching for 5.6...
@
text
@d11 1
@


1.208
log
@
updates for 5.7
@
text
@d454 1
a454 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_6 -P src</b>
d457 1
a457 1
This will pull the src files from the OPENBSD_5_6 branch, which is also
d463 1
a463 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_5_6 -Pd</b>
d467 1
a467 1
system, so you don't have to remember the "<tt>-rOPENBSD_5_6</tt>" part
d484 1
a484 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_6 -P src ports xenocara</b>
@


1.207
log
@
CVS command -> cvs.  CVS concept -> CVS.  From Elias Diem (lists at
webconect dot ch), thanks!
@
text
@d94 1
a94 1
       ,------o-----------o----X                    5.3 Stable
d96 1
a96 1
       |      .    ,------o---------o----X          5.4 Stable
d98 1
a98 1
       |      .    |      .    ,----o----------o--&gt; 5.5 Stable
d100 1
a100 1
       |      .    |      .    |    .    ,-----o--&gt; 5.6 Stable
d103 1
a103 1
 --&gt;5.3Rel-----&gt;5.4Rel-----&gt;5.5Rel-----&gt;5.6Rel----&gt; Current 
d128 3
a130 3
also note that in the above example, the <i>5.3-stable</i> branch came
to an end with <i>5.5-release</i>, and the <i>5.4-stable</i> branch came
to an end with <i>5.6-release</i> -- old releases are typically supported
d136 2
a137 2
<i>-release</i> of the same version (i.e., going from <i>5.6-release</i>
to <i>5.6-stable</i>).
d226 1
a226 1
For example, going from v5.5 to v5.6, or going from the June 12th
d230 1
a230 1
<a href="upgrade56.html">Upgrade guide</a> (when changing releases)
d242 1
a242 1
for example, 5.6-release to 5.6-stable.
d249 2
a250 2
So, you may install a system (for example, 5.4-release) from CD, then 
update it to 5.4-stable a few times, then upgrade it to 5.5-release
d252 1
a252 1
5.6-release.
d271 2
a272 2
<i>5.6-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>5.6-stable</i>.  You are on your own if
d382 1
a382 1
<a href="upgrade56.html">here</a>.
d606 1
a606 1
For example, to see the changes between 5.5 and 5.6 do a:
d610 1
a610 1
    # <b>cvs diff -u -rOPENBSD_5_5 -rOPENBSD_5_6</b>
d613 1
a613 1
To see the changes between 5.6 and <i>-current</i> ("HEAD"), use:
d616 1
a616 1
    # <b>cvs diff -u -rOPENBSD_5_6 -rHEAD</b>
d730 1
a730 1
If following -stable after a proper <a href="upgrade56.html">upgrade
d841 1
a841 1
<a href="upgrade56.html">upgrade</a> on another machine, or if updating
d1236 1
a1236 1
OpenBSD 5.6 (GENERIC) #274: Fri Aug  8 00:05:13 MDT 2014
d1277 6
a1282 6
 95 ep* disabled
 96 ep* disabled
281 ep0 disabled
282 ep* disabled
283 ep* disabled
340 ep* disabled
d1300 1
a1300 1
OpenBSD 5.6 (GENERIC) #274: Fri Aug  8 00:05:13 MDT 2014
d1303 3
a1305 3
161 wi* disabled
162 wi* disabled
417 wi* disabled
d1476 1
a1476 2
utility, which can use either the checked-out source tree or pre-made
<tt>etc56.tgz</tt> and <tt>xetc56.tgz</tt> files.
d1481 1
a1481 1
<a href="upgrade56.html">upgrade</a> document.
@


1.206
log
@Convert the rest of the FAQ to id="" instead of <a name=""></a>.

prodded by nick@@
@
text
@d411 1
a411 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">CVS(1)</a>
@


1.205
log
@
missing boldfacing, from Daniel Jakots (vigdis at chown dot me), thanks!
fyi...  my "standard" for this is something along these lines:
* Sample command lines, but not to be used mindlessly: no bold face.
* Sample command lines to be used exactly as specified: bold face
For one-liners, a prompt to indicate if a command should be run as root
or as a standard user should be shown.  For big blocks of commands to be
copy/pasted (i.e., upgrade docs), no prompt should be shown to keep the
copy/past easy.
@
text
@a76 2
<br>

d78 1
a78 2
<a name="Flavors"></a>
<h2>5.1 - OpenBSD's Flavors</h2>
d281 1
a281 2
<a name="WhySrc"></a>
<h2>5.2 - Why do I need to compile the system from source?</h2>
d323 1
a323 2
<a name="Bld"></a>
<h2>5.3 - Building OpenBSD from source</h2>
d325 1
a325 2
<a name="BldOverview"></a>
<h3>5.3.1 - Overview of the building process</h3>
d342 1
a342 3

<a name="BldBinary"></a>
<h3>5.3.2 - Install or Upgrade to closest available binary</h3>
d386 1
a386 3

<a name="BldGetSrc"></a>
<h3>5.3.3 - Fetching the appropriate source code</h3>
d536 1
a536 3

<a name="CVSTips"></a>
<h4>Common CVS tips</h4>
d621 1
a621 2
<a name="BldKernel"></a>
<h3>5.3.4 - Building the kernel</h3>
d687 1
a687 3

<a name="BldUserland"></a>
<h3>5.3.5 - Building the userland</h3>
a735 2

<a name="Release"></a>
d737 1
a737 1
<h2>5.4 - Building a Release</h2>
d846 1
a846 2
<a name="Xbld"></a>
<h2>5.5 - Building X (Xenocara)</h2>
d916 1
a916 3
<p>
<a name="Why"></a>
<h2>5.6 - Why do I need a custom kernel?</h2>
d988 1
a988 3
<p>
<a name="Options"></a>
<h2>5.7 - Building a custom kernel</h2>
d1159 1
a1159 3

<a name="BootConfig"></a>
<h2>5.8 - Boot-Time Configuration</h2>
d1210 1
a1210 4

<p>
<a name="config"></a>
<h2>5.9 - Using config(8) to change your kernel</h2>
d1310 1
a1310 3

<a name="VerboseBoot"></a>
<h2>5.10 - Getting more verbose output during boot</h2>
d1327 1
a1327 4

<p>
<a name="buildprobs"></a>
<h2>5.11 - Common problems, tips and questions when compiling and
d1348 1
a1348 2
<a name="sig11"></a>
<h3>5.11.1 - The build stopped with a "Signal 11" error</h3>
d1370 1
a1370 2
<a name="snake"></a>
<h3>5.11.2 - "make build" fails with "cannot open output file snake: is
d1394 1
a1394 2
<a name="ProbIPv6"></a>
<h3>5.11.3 - My IPv6-less system doesn't work!</h3>
d1402 1
a1402 3

<a name="ProbObj"></a>
<h3>5.11.4 - Oops! I forgot to make the <tt>/usr/obj</tt> directory
d1418 1
a1418 2
<a name="ProbObjPt"></a>
<h3>5.11.5 - Tip: Put <tt>/usr/obj</tt> on its own partition</h3>
d1429 1
a1429 2
<a name="ProbSKIPDIR"></a>
<h3>5.11.6 - How do I not build parts of the tree?</h3>
d1441 1
a1441 2
<a name="ProbMoreInfo"></a>
<h3>5.11.7 - Where can I learn more about the build process?</h3>
d1454 1
a1454 2
<a name="NoSnaps"></a>
<h3>5.11.8 - I didn't see any snapshots on the FTP site. Where
d1461 1
a1461 2
<a name="NewCompiler"></a>
<h3>5.11.9 - How do I bootstrap a newer version of the compiler
d1467 1
a1467 3

<a name="UpdateEtc"></a>
<h3>5.11.10 - What is the best way to update <tt>/etc</tt>, <tt>/var</tt>,
d1484 1
a1484 3

<a name="Hierarchy"></a>
<h3>5.11.11 - Is there an easy way to make all the file hierarchy changes?</h3>
d1511 1
a1511 2
<a name="ProbXComp"></a>
<h3>5.11.12 - Can I cross-compile?  Why not?</h3>
@


1.204
log
@
missed a few upgrade54 references when preping for 5.5, so of course missed
them this time, too since I wasn't searching for 5.4/54.  Pointed out by
Mario St Gelais (mario dot stg at videotron dot ca) via misc@@
@
text
@d611 2
a612 2
    # cd /usr/src/etc
    # ls -lt |more
d621 2
a622 2
    # cd /usr/src/etc
    # cvs diff -u -rOPENBSD_5_5 -rOPENBSD_5_6
d627 2
a628 2
    # cd /usr/src/etc
    # cvs diff -u -rOPENBSD_5_6 -rHEAD
@


1.203
log
@
faq updates for 5.6
@
text
@d390 1
a390 1
<a href="upgrade54.html">here</a>.
d745 1
a745 1
If following -stable after a proper <a href="upgrade54.html">upgrade
d858 1
a858 1
<a href="upgrade54.html">upgrade</a> on another machine, or if updating
@


1.202
log
@
more -> cvsweb.openbsd.org for, well, cvsweb.
@
text
@d97 1
a97 1
       ,------o-----------o----X                    5.2 Stable
d99 1
a99 1
       |      .    ,------o---------o----X          5.3 Stable
d101 1
a101 1
       |      .    |      .    ,----o----------o--&gt; 5.4 Stable
d103 1
a103 1
       |      .    |      .    |    .    ,-----o--&gt; 5.5 Stable
d106 1
a106 1
 --&gt;5.2Rel-----&gt;5.3Rel-----&gt;5.4Rel-----&gt;5.5Rel----&gt; Current 
d131 10
a140 9
also note that in the above example, the <i>5.2-stable</i> branch came
to an end with <i>5.4-release</i>, and the <i>5.3-stable</i> branch came
to an end with <i>5.5-release</i> -- old releases are typically supported
up to two
releases back.  It takes resources and time to support older versions;
while we might like to provide ongoing support for old releases, we
would rather focus on new features.  The <i>-stable</i> branch is, by
design, very easy to build from <i>-release</i> of the same version
(i.e., going from <i>5.5-release</i> to <i>5.5-stable</i>).
d229 1
a229 1
For example, going from v5.4 to v5.5, or going from the June 12th
d233 1
a233 1
<a href="upgrade55.html">Upgrade guide</a> (when changing releases)
d245 1
a245 1
for example, 5.5-release to 5.5-stable.
d252 2
a253 2
So, you may install a system (for example, 5.3-release) from CD, then 
update it to 5.3-stable a few times, then upgrade it to 5.4-release
d255 1
a255 1
5.5-release.
d274 2
a275 2
<i>5.5-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>5.5-stable</i>.  You are on your own if
d464 1
a464 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_5 -P src</b>
d467 1
a467 1
This will pull the src files from the OPENBSD_5_5 branch, which is also
d473 1
a473 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_5_5 -Pd</b>
d477 1
a477 1
system, so you don't have to remember the "<tt>-rOPENBSD_5_5</tt>" part
d494 1
a494 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_5 -P src ports xenocara</b>
d618 1
a618 1
For example, to see the changes between 5.3 and 5.4 do a:
d622 1
a622 1
    # cvs diff -u -rOPENBSD_5_4 -rOPENBSD_5_5
d625 1
a625 1
To see the changes between 5.5 and <i>-current</i> ("HEAD"), use:
d628 1
a628 1
    # cvs diff -u -rOPENBSD_5_5 -rHEAD
d1263 1
a1263 1
OpenBSD 5.5 (GENERIC) #276: Wed Mar  5 09:57:06 MST 2014
d1327 1
a1327 1
OpenBSD 5.5 (GENERIC) #276: Wed Mar  5 09:57:06 MST 2014
d1521 1
a1521 1
<tt>etc55.tgz</tt> and <tt>xetc55.tgz</tt> files.
d1526 1
a1526 1
<a href="upgrade54.html">upgrade</a> document.
@


1.201
log
@
jsg@@ points out that ls -nT is more accurate for index.html.
@
text
@d1070 8
a1077 8
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/alpha/conf/">alpha Kernel Configuration Files </a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/i386/conf/">i386 Kernel Configuration Files</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/macppc/conf/">macppc Kernel Configuration Files</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc/conf/">sparc Kernel Configuration Files</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc64/conf/">sparc64 Kernel Configuration Files</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/vax/conf/">vax Kernel Configuration Files</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/hppa/conf/">hppa Kernel Configuration Files</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/">Other Arch's</a>
d1089 1
a1089 1
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/conf/GENERIC">sys/conf/GENERIC</a>. 
d1487 1
a1487 1
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/Makefile"><tt>/usr/src/Makefile</tt></a>
@


1.200
log
@
somewhere along the line, index.txt went from ls -1 to ls -l.  Pointed out
out by John Man (jman at home dot org), thanks!
@
text
@d852 1
a852 1
# <b>/bin/ls -l >index.txt</b>
@


1.199
log
@
welcome 5.5!
@
text
@d852 1
a852 1
# <b>/bin/ls -1 >index.txt</b>
@


1.198
log
@
remove www@@ references, simplify footers on all pages.
@
text
@d97 1
a97 1
       ,------o-----------o----X                    5.1 Stable
d99 1
a99 1
       |      .    ,------o---------o----X          5.2 Stable
d101 1
a101 1
       |      .    |      .    ,----o----------o--&gt; 5.3 Stable
d103 1
a103 1
       |      .    |      .    |    .    ,-----o--&gt; 5.4 Stable
d106 1
a106 1
 --&gt;5.1Rel-----&gt;5.2Rel-----&gt;5.3Rel-----&gt;5.4Rel----&gt; Current 
d131 3
a133 3
also note that in the above example, the <i>5.1-stable</i> branch came
to an end with <i>5.3-release</i>, and the <i>5.2-stable</i> branch came
to an end with <i>5.4-release</i> -- old releases are typically supported
d139 1
a139 1
(i.e., going from <i>5.4-release</i> to <i>5.4-stable</i>).
d228 1
a228 1
For example, going from v5.3 to v5.4, or going from the June 12th
d232 1
a232 1
<a href="upgrade54.html">Upgrade guide</a> (when changing releases)
d244 1
a244 1
for example, 5.2-release to 5.2-stable.
d251 2
a252 2
So, you may install a system (for example, 5.2-release) from CD, then 
update it to 5.2-stable a few times, then upgrade it to 5.3-release
d254 1
a254 1
5.4-release.
d273 2
a274 2
<i>5.4-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>5.4-stable</i>.  You are on your own if
d463 1
a463 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_4 -P src</b>
d466 1
a466 1
This will pull the src files from the OPENBSD_5_4 branch, which is also
d472 1
a472 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_5_4 -Pd</b>
d476 1
a476 1
system, so you don't have to remember the "<tt>-rOPENBSD_5_4</tt>" part
d493 1
a493 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_4 -P src ports xenocara</b>
d506 1
a506 1
you can often save a lot of time and bandwidth by "pre-loading" your
d549 2
a550 1
As indicated earlier, some options are mandatory to get a valid
d567 1
a567 1
Experienced CVS users may wonder why the CVSROOT was specified and 
d579 1
a579 1
It is often useful to use a <tt>.cvsrc</tt> in your home directory to 
d601 1
a601 1
As the source trees consist of large numbers of mostly small files,
d606 25
d1262 1
a1262 1
OpenBSD 5.4 (GENERIC) #37: Tue Jul 30 12:05:01 MDT 2013
d1326 1
a1326 1
OpenBSD 5.4 (GENERIC) #37: Tue Jul 30 12:05:01 MDT 2013
a1355 1

d1513 2
a1514 2
<p>As a policy, software in the OpenBSD tree does not modify files in
<tt>/etc</tt> automatically.
d1517 4
a1520 43
Upgrades are no exception.
To update files in these directories, first determine what changes have
occurred to the base (distribution) files, and then manually reapply
these changes.

<p>
For example, to see the files in the tree that have changed most
recently, do a:

<pre>
    # cd /usr/src/etc
    # ls -lt |more
</pre>

<!-- XXXversion -->
<p>To see all the changes in <tt>/etc</tt> between arbitrary versions of
OpenBSD, you can use <a href="../anoncvs.html">CVS</a>.
For example, to see the changes between 5.3 and 5.4 do a:

<pre>
    # cd /usr/src/etc
    # cvs diff -u -rOPENBSD_5_3 -rOPENBSD_5_4
</pre>

To see the changes between 5.4 and <i>-current</i> ("HEAD"), use:
<pre>
    # cd /usr/src/etc
    # cvs diff -u -rOPENBSD_5_4 -rHEAD
</pre>

The 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MAKEDEV&amp;sektion=8&amp;arch=i386">/dev/MAKEDEV</a>
script is not updated automatically as part of the make build process,
however it is installed as part of a <a href="#BldBinary">binary
upgrade</a>.
As a general rule, it is a good idea to copy (if needed) and run this
script from your source tree when performing an upgrade:

<pre>
    # cd /dev
    # cp /usr/src/etc/etc.`machine`/MAKEDEV ./
    # ./MAKEDEV all
</pre>
a1522 18
Once you have identified the changes, reapply them to your local tree,
preserving any local configuration you may have done.

<p>
Typical <tt>/etc</tt> changes to watch out for between releases include:

<ul>
<li>Additions to <tt>/etc/protocols</tt> and <tt>/etc/services</tt></li>
<li>New sysctls (see <tt>/etc/sysctl.conf</tt>)</li>
<li>Changes to the default cron jobs. See <tt>/etc/daily</tt>,
  <tt>/etc/weekly</tt>, <tt>/etc/monthly</tt>, and <tt>/etc/security</tt>
<li>All rc scripts, including netstart</li>
<li>Device changes, see above
<li>File hierarchy changes in <tt>/etc/mtree</tt>, see
  <a href="#Hierarchy">below</a>
<li>New users (<tt>/etc/passwd</tt>) and groups (<tt>/etc/group</tt>)
</ul>

d1524 2
a1525 4
These changes are summarized in
<a href="upgrade54.html">upgrade54.html</a> (for going to 5.4-release)
or <a href="current.html">current.html</a> (for going
to <i>-current</i>).
d1536 3
a1538 2
An easy way to ensure that your file hierarchy is up-to-date is to use
the
d1553 2
a1554 1
Your file hierarchy should now be up to date.
@


1.197
log
@
updates for 5.4
@
text
@a4 1
<link rev= "made" href= "mailto:www@@openbsd.org">
d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998-2013 by OpenBSD.">
a19 1
<font color= "#0000e0">
a22 1
</font>
d1607 2
a1608 1
<font color= "#0000e0">
a1611 8
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a>
<a href= "mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>$OpenBSD: faq5.html,v 1.196 2013/07/19 14:41:04 bcallah Exp $</small>
@


1.196
log
@modular build => a modular build
ok nick@@
@
text
@d100 1
a100 1
       ,------o-----------o----X                    5.0 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          5.1 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 5.2 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 5.3 Stable
d109 1
a109 1
 --&gt;5.0Rel-----&gt;5.1Rel-----&gt;5.2Rel-----&gt;5.3Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>5.0-stable</i> branch came
to an end with <i>5.2-release</i>, and the <i>5.1-stable</i> branch came
to an end with <i>5.3-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>5.3-release</i> to <i>5.3-stable</i>).
d231 1
a231 1
For example, going from v5.2 to v5.3, or going from the June 12th
d235 1
a235 1
<a href="upgrade53.html">Upgrade guide</a> (when changing releases)
d254 2
a255 2
So, you may install a system (for example, 5.1-release) from CD, then 
update it to 5.1-stable a few times, then upgrade it to 5.2-release
d257 1
a257 1
5.3-release.
d276 2
a277 2
<i>5.3-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>5.3-stable</i>.  You are on your own if
d392 1
a392 1
<a href="upgrade53.html">here</a>.
d466 1
a466 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_3 -P src</b>
d469 1
a469 1
This will pull the src files from the OPENBSD_5_3 branch, which is also
d475 1
a475 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_5_3 -Pd</b>
d479 1
a479 1
system, so you don't have to remember the "<tt>-rOPENBSD_5_3</tt>" part
d496 1
a496 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_3 -P src ports xenocara</b>
d721 1
a721 1
If following -stable after a proper <a href="upgrade53.html">upgrade
d834 1
a834 1
<a href="upgrade53.html">upgrade</a> on another machine, or if updating
d1239 1
a1239 1
OpenBSD 5.3 (GENERIC) #50: Tue Mar 12 18:35:23 MDT 2013
d1303 1
a1303 1
OpenBSD 5.3 (GENERIC) #50: Tue Mar 12 18:35:23 MDT 2013
d1512 1
a1512 1
For example, to see the changes between 5.2 and 5.3 do a:
d1516 1
a1516 1
    # cvs diff -u -rOPENBSD_5_2 -rOPENBSD_5_3
d1519 1
a1519 1
To see the changes between 5.3 and <i>-current</i> ("HEAD"), use:
d1522 1
a1522 1
    # cvs diff -u -rOPENBSD_5_3 -rHEAD
d1560 1
a1560 1
<a href="upgrade53.html">upgrade53.html</a> (for going to 5.3-release)
d1621 1
a1621 1
<small>$OpenBSD: faq5.html,v 1.195 2013/05/01 13:16:32 nick Exp $</small>
@


1.195
log
@
updates for 5.3
@
text
@d841 1
a841 1
Starting with <a href="http://x.org/">X.org v7,</a> X switched to
d1621 1
a1621 1
<small>$OpenBSD: faq5.html,v 1.194 2013/02/10 17:12:59 nick Exp $</small>
@


1.194
log
@
sync comments about -current with earlier paragraphs.
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2012 by OpenBSD.">
d100 1
a100 1
       ,------o-----------o----X                    4.9 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          5.0 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 5.1 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 5.2 Stable
d109 1
a109 1
 --&gt;4.9Rel-----&gt;5.0Rel-----&gt;5.1Rel-----&gt;5.2Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.9-stable</i> branch came
to an end with <i>5.1-release</i>, and the <i>5.0-stable</i> branch came
to an end with <i>5.2-release</i> -- old releases are typically supported
d138 1
a138 1
releases back.  It takes resources and time to support older versions,
d142 1
a142 1
(i.e., going from <i>5.2-release</i> to <i>5.2-stable</i>).
d231 1
a231 1
For example, going from v5.1 to v5.2, or going from the June 12th
d235 1
a235 1
<a href="upgrade52.html">Upgrade guide</a> (when changing releases)
d254 2
a255 2
So, you may install a system (for example, 5.0-release) from CD, then 
update it to 5.0-stable a few times, then upgrade it to 5.1-release
d257 1
a257 1
5.2-release.
d276 2
a277 2
<i>5.2-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>5.2-stable</i>.  You are on your own if
d392 1
a392 1
<a href="upgrade52.html">here</a>.
d466 1
a466 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_2 -P src</b>
d469 1
a469 1
This will pull the src files from the OPENBSD_5_2 branch, which is also
d475 1
a475 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_5_2 -Pd</b>
d479 1
a479 1
system, so you don't have to remember the "<tt>-rOPENBSD_5_2</tt>" part
d496 1
a496 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_2 -P src ports xenocara</b>
d721 1
a721 1
If following -stable after a proper <a href="upgrade52.html">upgrade
d834 1
a834 1
<a href="upgrade52.html">upgrade</a> on another machine, or if updating
d1238 2
a1239 1
OpenBSD 5.2 (GENERIC) #278: Wed Aug  1 10:04:16 MDT 2012
a1240 1
warning: no output file specified
d1303 1
a1303 1
OpenBSD 5.2 (GENERIC) #278: Wed Aug  1 10:04:16 MDT 2012
d1512 1
a1512 1
For example, to see the changes between 5.1 and 5.2 do a:
d1516 1
a1516 1
    # cvs diff -u -rOPENBSD_5_1 -rOPENBSD_5_2
d1519 1
a1519 1
To see the changes between 5.2 and <i>-current</i> ("HEAD"), use:
d1522 1
a1522 1
    # cvs diff -u -rOPENBSD_5_2 -rHEAD
d1560 1
a1560 1
<a href="upgrade52.html">upgrade52.html</a> (for going to 5.2-release)
d1621 1
a1621 1
<small>$OpenBSD: faq5.html,v 1.193 2012/11/01 15:05:30 nick Exp $</small>
@


1.193
log
@
enter 5.2!
@
text
@d199 8
a206 7
Remember, on some platforms, it may be DAYS before the snapshot build
is completed and put out for distribution.  There is no promise that the
snapshots are completely functional, or even install.  Often, a change
that needs to be tested may trigger snapshot creation.  Some
platforms have snapshots built on an almost daily basis, others will be
much less frequent.  If you desire to run <i>-current</i>, a recent
snapshot is often all you need, and upgrading to a snapshot is a
d1621 1
a1621 1
<small>$OpenBSD: faq5.html,v 1.192 2012/05/01 14:35:14 nick Exp $</small>
@


1.192
log
@
welcome 5.1!
@
text
@d100 1
a100 1
       ,------o-----------o----X                    4.8 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.9 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 5.0 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 5.1 Stable
d109 1
a109 1
 --&gt;4.8Rel-----&gt;4.9Rel-----&gt;5.0Rel-----&gt;5.1Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.8-stable</i> branch came
to an end with <i>5.0-release</i>, and the <i>4.9-stable</i> branch came
to an end with <i>5.1-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>5.1-release</i> to <i>5.1-stable</i>).
d230 1
a230 1
For example, going from v5.0 to v5.1, or going from the June 12th
d234 1
a234 1
<a href="upgrade51.html">Upgrade guide</a> (when changing releases)
d246 1
a246 1
for example, 5.1-release to 5.1-stable.
d253 2
a254 2
So, you may install a system (for example, 4.9-release) from CD, then 
update it to 4.9-stable a few times, then upgrade it to 5.0-release
d256 1
a256 1
5.1-release.
d275 2
a276 2
<i>5.1-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>5.1-stable</i>.  You are on your own if
d391 1
a391 1
<a href="upgrade51.html">here</a>.
d465 1
a465 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_1 -P src</b>
d468 1
a468 1
This will pull the src files from the OPENBSD_5_1 branch, which is also
d474 1
a474 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_5_1 -Pd</b>
d478 1
a478 1
system, so you don't have to remember the "<tt>-rOPENBSD_5_1</tt>" part
d495 1
a495 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_1 -P src ports xenocara</b>
d720 1
a720 1
If following -stable after a proper <a href="upgrade51.html">upgrade
d833 1
a833 1
<a href="upgrade51.html">upgrade</a> on another machine, or if updating
d1237 1
a1237 1
OpenBSD 5.1 (GENERIC) #160: Sun Feb 12 09:46:33 MST 2012
d1302 1
a1302 1
OpenBSD 5.1 (GENERIC) #160: Sun Feb 12 09:46:33 MST 2012
d1511 1
a1511 1
For example, to see the changes between 5.0 and 5.1 do a:
d1515 1
a1515 1
    # cvs diff -u -rOPENBSD_5_0 -rOPENBSD_5_1
d1518 1
a1518 1
To see the changes between 5.1 and <i>-current</i> ("HEAD"), use:
d1521 1
a1521 1
    # cvs diff -u -rOPENBSD_5_1 -rHEAD
d1559 1
a1559 1
<a href="upgrade51.html">upgrade51.html</a> (for going to 5.1-release)
d1620 1
a1620 1
<small>$OpenBSD: faq5.html,v 1.191 2012/03/27 00:22:22 nick Exp $</small>
@


1.191
log
@
remove references to cvsup.
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2011 by OpenBSD.">
d100 1
a100 1
       ,------o-----------o----X                    4.7 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.8 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 4.9 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 5.0 Stable
d109 1
a109 1
 --&gt;4.7Rel-----&gt;4.8Rel-----&gt;4.9Rel-----&gt;5.0Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.7-stable</i> branch came
to an end with <i>4.9-release</i>, and the <i>4.8-stable</i> branch came
to an end with <i>5.0-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>5.0-release</i> to <i>5.0-stable</i>).
d230 1
a230 1
For example, going from v4.9 to v5.0, or going from the June 12th
d234 1
a234 1
<a href="upgrade50.html">Upgrade guide</a> (when changing releases)
d246 1
a246 1
for example, 5.0-release to 5.0-stable.
d253 2
a254 2
So, you may install a system (for example, 4.8-release) from CD, then 
update it to 4.8-stable a few times, then upgrade it to 4.9-release
d256 1
a256 1
5.0-release.
d275 2
a276 2
<i>5.0-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>5.0-stable</i>.  You are on your own if
d391 1
a391 1
<a href="upgrade50.html">here</a>.
d465 1
a465 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_0 -P src</b>
d468 1
a468 1
This will pull the src files from the OPENBSD_5_0 branch, which is also
d474 1
a474 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_5_0 -Pd</b>
d478 1
a478 1
system, so you don't have to remember the "<tt>-rOPENBSD_5_0</tt>" part
d495 1
a495 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_5_0 -P src ports xenocara</b>
d720 1
a720 1
If following -stable after a proper <a href="upgrade50.html">upgrade
d833 1
a833 1
<a href="upgrade50.html">upgrade</a> on another machine, or if updating
d1237 1
a1237 1
OpenBSD 5.0 (GENERIC) #43: Wed Aug 17 10:10:52 MDT 2011
d1302 1
a1302 1
OpenBSD 5.0 (GENERIC) #43: Wed Aug 17 10:10:52 MDT 2011
d1511 1
a1511 1
For example, to see the changes between 4.9 and 5.0 do a:
d1515 1
a1515 1
    # cvs diff -u -rOPENBSD_4_9 -rOPENBSD_5_0
d1518 1
a1518 1
To see the changes between 5.0 and <i>-current</i> ("HEAD"), use:
d1521 1
a1521 1
    # cvs diff -u -rOPENBSD_5_0 -rHEAD
d1559 1
a1559 1
<a href="upgrade50.html">upgrade50.html</a> (for going to 5.0-release)
d1620 1
a1620 1
<small>$OpenBSD: faq5.html,v 1.190 2011/12/31 09:49:59 jj Exp $</small>
@


1.190
log
@a -> an, first from Brian Callahan on www@@
@
text
@d408 1
a408 2
<a href="../cvsup.html">CVSup</a>, or 
<a href="../cvsync.html">CVSync</a> programs available as
a409 2
CVSup can also be used in a "checkout" mode, but that will not be
covered here.
d412 1
a412 1
using CVSup or CVSync.
d1620 1
a1620 1
<small>$OpenBSD: faq5.html,v 1.189 2011/11/28 03:24:31 nick Exp $</small>
@


1.189
log
@
html fixes from Jason Filley (jason at snakelegs dot org).  Thanks!
@
text
@d724 1
a724 1
process</a> or a install of the <a href="#BldBinary">proper starting
d1623 1
a1623 1
<small>$OpenBSD: faq5.html,v 1.188 2011/11/01 10:52:27 nick Exp $</small>
@


1.188
log
@
updates for 5.0 (and some non-version-related improvements).
@
text
@d379 1
a379 1
  <td> (optional) Fetch &amp; build <i>-current</i>
d383 1
a383 1
  <td> (optional) Fetch &amp; build <i>-current</i>
d1623 1
a1623 1
<small>$OpenBSD: faq5.html,v 1.187 2011/07/30 01:44:53 nick Exp $</small>
@


1.187
log
@
no need to document how to shoot yourself in the foot and annoy developers
at the same time.
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2010 by OpenBSD.">
d100 1
a100 1
       ,------o-----------o----X                    4.6 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.7 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 4.8 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 4.9 Stable
d109 1
a109 1
 --&gt;4.6Rel-----&gt;4.7Rel-----&gt;4.8Rel-----&gt;4.9Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.6-stable</i> branch came
to an end with <i>4.8-release</i>, and the <i>4.7-stable</i> branch came
to an end with <i>4.9-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>4.9-release</i> to <i>4.9-stable</i>).
d230 1
a230 1
For example, going from v4.8 to v4.9, or going from the June 12th
d234 1
a234 1
<a href="upgrade49.html">Upgrade guide</a> (when changing releases)
d246 1
a246 1
for example, 4.9-release to 4.9-stable.
d253 2
a254 2
So, you may install a system (for example, 4.7-release) from CD, then 
update it to 4.7-stable a few times, then upgrade it to 4.8-release
d256 1
a256 1
4.9-release.
d266 1
a266 1
source and expect it to work with a <i>-release</i> userland.  Yes,
d275 2
a276 2
<i>4.9-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.9-stable</i>.  You are on your own if
d282 1
a282 1
Yes, this does mean you should think long and hard before committing
d391 1
a391 1
<a href="upgrade49.html">here</a>.
d468 1
a468 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_9 -P src</b>
d471 1
a471 1
This will pull the src files from the OPENBSD_4_9 branch, which is also
d477 1
a477 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_9 -Pd</b>
d481 1
a481 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_9</tt>" part
d498 1
a498 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_9 -P src ports xenocara</b>
d654 1
a654 1
# <b>make clean && make depend && make</b>
d723 1
a723 1
If following -stable after a proper <a href="upgrade49.html">upgrade
d836 1
a836 1
<a href="upgrade49.html">upgrade</a> on another machine, or if updating
d1240 1
a1240 1
OpenBSD 4.7 (GENERIC) #558: Thu Mar 17 20:46:15 MDT 2010
a1259 2
        shmseg          [number]            Show/change SHMSEG
        shmmaxpgs       [number]            Show/change SHMMAXPGS
d1262 9
a1270 10
  1 audio* at uaudio*|btsco*|sb0|sb*|gus0|pas0|sp0|ess*|wss0|wss*|ym*|eap*|envy*
|eso*|sv*|neo*|cmpci*|clcs*|clct*|auacer*|auglx*|auich*|auixp*|autri*|auvia*|aza
lia*|fms*|maestro*|esa*|yds*|emu* flags 0x0
  2 midi* at umidi*|sb0|sb*|opl*|opl*|opl*|opl*|opl*|ym*|mpu*|mpu*|autri*|eap* f
lags 0x0
  3 midi* at pcppi0 flags 0x0
  4 drm* at inteldrm*|radeondrm* flags 0x0
  5 inteldrm* at vga0|vga* flags 0x0
  6 radeondrm* at vga0|vga* flags 0x0
  7 radio* at udsbr*|bktr0|fms* flags 0x0
d1272 8
a1279 8
  9 nsphy* at url*|udav*|mos*|axe*|aue*|xe*|ef*|hme*|lii*|bce*|ale*|age*|jme*|et
*|nfe*|stge*|vge*|bnx*|bge*|lge*|nge*|msk*|sk*|ste*|sis*|wb*|tl*|vr*|pcn*|sf*|ge
m*|ne0|ne1|ne2|ne*|ne*|ne*|epic*|sm0|sm*|dc*|dc*|re*|re*|rl*|rl*|mtd*|fxp*|fxp*|
xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
 10 nsphyter* at url*|udav*|mos*|axe*|aue*|xe*|ef*|hme*|lii*|bce*|ale*|age*|jme*
|et*|nfe*|stge*|vge*|bnx*|bge*|lge*|nge*|msk*|sk*|ste*|sis*|wb*|tl*|vr*|pcn*|sf*
|gem*|ne0|ne1|ne2|ne*|ne*|ne*|epic*|sm0|sm*|dc*|dc*|re*|re*|rl*|rl*|mtd*|fxp*|fx
p*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
d1282 6
a1287 8
 98 ep0 disabled
 99 ep* disabled
100 ep* disabled
278 ep0 disabled
279 ep0 disabled
280 ep* disabled
281 ep* disabled
344 ep* disabled
d1305 1
a1305 1
OpenBSD 4.7 (GENERIC) #558: Thu Mar 17 20:46:15 MDT 2010
d1308 1
d1310 1
a1310 2
163 wi* disabled
416 wi* disabled
d1514 1
a1514 1
For example, to see the changes between 4.8 and 4.9 do a:
d1518 1
a1518 1
    # cvs diff -u -rOPENBSD_4_8 -rOPENBSD_4_9
d1521 1
a1521 1
To see the changes between 4.9 and <i>-current</i> ("HEAD"), use:
d1524 1
a1524 1
    # cvs diff -u -rOPENBSD_4_9 -rHEAD
d1562 1
a1562 1
<a href="upgrade49.html">upgrade49.html</a> (for going to 4.9-release)
d1623 1
a1623 1
<small>$OpenBSD: faq5.html,v 1.186 2011/05/16 23:27:43 nick Exp $</small>
@


1.186
log
@
as as from from Michael Mazurek (akfaew at jasminek net) thanks thanks!!
@
text
@d674 1
a674 13
<h4>Variation on above process: Read-only source tree</h4>
Sometimes, you may wish to ensure your <tt>/usr/src/sys</tt> directory
remains untouched.
This can be done by using the following process:

<blockquote><pre>
$ <b>cd <i>/somewhere</i></b>
$ <b>cp /usr/src/sys/arch/i386/conf/GENERIC .</b>
$ <b>config -s /usr/src/sys -b . GENERIC</b>
$ <b>make clean && make depend && make</b>
   ... lots of output ...
</pre></blockquote>

d1628 1
a1628 1
<small>$OpenBSD: faq5.html,v 1.185 2011/05/01 13:08:58 nick Exp $</small>
@


1.185
log
@
updates for 4.9
@
text
@d1547 1
a1547 1
however it is installed as as part of a <a href="#BldBinary">binary
d1640 1
a1640 1
<small>$OpenBSD: faq5.html,v 1.184 2011/04/04 11:08:30 lum Exp $</small>
@


1.184
log
@Remove unnecessary "the".
ok nick@@
@
text
@d100 1
a100 1
       ,------o-----------o----X                    4.5 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.6 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 4.7 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 4.8 Stable
d109 1
a109 1
 --&gt;4.5Rel-----&gt;4.6Rel-----&gt;4.7Rel-----&gt;4.8Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.5-stable</i> branch came
to an end with <i>4.7-release</i>, and the <i>4.6-stable</i> branch came
to an end with <i>4.8-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>4.8-release</i> to <i>4.8-stable</i>).
d230 1
a230 1
For example, going from v4.7 to v4.8, or going from the June 12th
d234 1
a234 1
<a href="upgrade48.html">Upgrade guide</a> (when changing releases)
d246 1
a246 1
for example, 4.8-release to 4.8-stable.
d253 2
a254 2
So, you may install a system (for example, 4.6-release) from CD, then 
update it to 4.6-stable a few times, then upgrade it to 4.7-release
d256 1
a256 1
4.8-release.
d275 2
a276 2
<i>4.8-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.8-stable</i>.  You are on your own if
d391 1
a391 1
<a href="upgrade48.html">here</a>.
d468 1
a468 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_8 -P src</b>
d471 1
a471 1
This will pull the src files from the OPENBSD_4_8 branch, which is also
d477 1
a477 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_8 -Pd</b>
d481 1
a481 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_8</tt>" part
d498 1
a498 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_8 -P src ports xenocara</b>
d735 1
a735 1
If following -stable after a proper <a href="upgrade48.html">upgrade
d848 1
a848 1
<a href="upgrade48.html">upgrade</a> on another machine, or if updating
d1531 1
a1531 1
For example, to see the changes between 4.7 and 4.8 do a:
d1535 1
a1535 1
    # cvs diff -u -rOPENBSD_4_7 -rOPENBSD_4_8
d1538 1
a1538 1
To see the changes between 4.8 and <i>-current</i> ("HEAD"), use:
d1541 1
a1541 1
    # cvs diff -u -rOPENBSD_4_8 -rHEAD
d1579 1
a1579 1
<a href="upgrade48.html">upgrade48.html</a> (for going to 4.8-release)
d1640 1
a1640 1
<small>$OpenBSD: faq5.html,v 1.183 2011/04/04 01:32:28 lum Exp $</small>
@


1.183
log
@Simplify sentence about the relationship between -current and -stable.
ok nick@@
@
text
@d189 1
a189 1
or wishes to use a new feature of the <i>-current</i>.  In this case, the
d1640 1
a1640 1
<small>$OpenBSD: faq5.html,v 1.182 2011/02/04 03:25:14 lum Exp $</small>
@


1.182
log
@Remove link to afterboot(8), it doesnt contain info on the build process (anymore).
Add in more relevant links.
ok jmc@@ nick@@
@
text
@d156 1
a156 1
to imply that <i>-current</i> is unreliable or that it is more robust in
d1640 1
a1640 1
<small>$OpenBSD: faq5.html,v 1.181 2011/01/29 03:33:30 nick Exp $</small>
@


1.181
log
@
The answer to "how do I bootstrap a new compiler" is really just
"install a snapshot".  Stop giving the right answer then lots of details
on how to do it wrong.  Besides, devs usually provide situation specific
details in current.html, and it often doesn't match what was here.
@
text
@d1481 1
a1481 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8#COMPILING+A">afterboot(8)</a>
d1483 1
d1640 1
a1640 1
<small>$OpenBSD: faq5.html,v 1.180 2010/11/05 02:35:14 nick Exp $</small>
@


1.180
log
@
make sure people know that following -current from source is best done
on a machine with full console access.
from discussion between henning@@ and kettenis@@ et al.
@
text
@a1503 44
<p>
OpenBSD now supports two compilers in-tree, gcc v3.3.5 used by most
platforms, but also gcc v2.95.3 used by a few platforms which haven't
been converted yet, or may never be converted due to lack of gcc3
support or poor gcc3 performance.

<p>
The two compilers are in different parts of the tree:
<ul>
<li>gcc3: <tt>/usr/src/gnu/usr.bin/gcc</tt>
<li>gcc2: <tt>/usr/src/gnu/egcs/gcc</tt>
</ul>

<p>
Because upgrading a compiler is a bit of a chicken-and-egg problem,
changes to the in-tree compiler require a little extra attention.
You have to build the compiler twice -- the first build produces a
compiler that generates new code but runs with code generated by the old
compiler, the second build makes it a completely new compiler.
In general, you'll want to perform the following procedure:

<pre>
    <b>If your platform uses gcc 2.95.3:</b>
       # rm -r /usr/obj/gnu/egcs/gcc/*
       # cd /usr/src/gnu/egcs/gcc
        <i>- or -</i>
    <b>If your platform uses gcc 3.3.5:</b>
       # rm -r /usr/obj/gnu/usr.bin/gcc/*
       # cd /usr/src/gnu/usr.bin/gcc

    <b>Common build procedure for v3.3.5 or v2.95.3</b>
    # make -f Makefile.bsd-wrapper clean
    # make -f Makefile.bsd-wrapper obj
    # make -f Makefile.bsd-wrapper depend
    # make -f Makefile.bsd-wrapper
    # make -f Makefile.bsd-wrapper install
    # make -f Makefile.bsd-wrapper clean
    # make -f Makefile.bsd-wrapper depend
    # make -f Makefile.bsd-wrapper
    # make -f Makefile.bsd-wrapper install
</pre>

<p>
And then run a normal <a href="#BldUserland">make build</a>.
d1639 1
a1639 1
<small>$OpenBSD: faq5.html,v 1.179 2010/11/01 09:48:45 nick Exp $</small>
@


1.179
log
@
update to 4.8
@
text
@d319 9
d1683 1
a1683 1
<small>$OpenBSD: faq5.html,v 1.178 2010/05/19 12:41:02 nick Exp $</small>
@


1.178
log
@
updates for 4.7
@
text
@d100 1
a100 1
       ,------o-----------o----X                    4.4 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.5 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 4.6 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 4.7 Stable
d109 1
a109 1
 --&gt;4.4Rel-----&gt;4.5Rel-----&gt;4.6Rel-----&gt;4.7Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.4-stable</i> branch came
to an end with <i>4.6-release</i>, and the <i>4.5-stable</i> branch came
to an end with <i>4.7-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>4.7-release</i> to <i>4.7-stable</i>).
d156 4
a159 2
to imply that <i>-current</i> is unreliable.
Rather, <i>-current</i> is changing and evolving, whereas the operation
d161 4
a164 3
of <i>-stable</i> are not going to change, so you shouldn't have to relearn
your system or change any configuration files, or have any problem adding
additional applications to your system.
d230 1
a230 1
For example, going from v4.6 to v4.7, or going from the June 12th
d234 1
a234 1
<a href="upgrade47.html">Upgrade guide</a> (when changing releases)
d246 1
a246 1
for example, 4.7-release to 4.7-stable.
d253 2
a254 2
So, you may install a system (for example, 4.5-release) from CD, then 
update it to 4.5-stable a few times, then upgrade it to 4.6-release
d256 1
a256 1
4.7-release.
d275 2
a276 2
<i>4.7-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.7-stable</i>.  You are on your own if
d382 1
a382 1
<a href="upgrade47.html">here</a>.
d459 1
a459 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_7 -P src</b>
d462 1
a462 1
This will pull the src files from the OPENBSD_4_7 branch, which is also
d468 1
a468 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_7 -Pd</b>
d472 1
a472 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_7</tt>" part
d489 1
a489 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_7 -P src ports xenocara</b>
d726 1
a726 1
If following -stable after a proper <a href="upgrade47.html">upgrade
d839 1
a839 1
<a href="upgrade47.html">upgrade</a> on another machine, or if updating
d1565 1
a1565 1
For example, to see the changes between 4.6 and 4.7 do a:
d1569 1
a1569 1
    # cvs diff -u -rOPENBSD_4_6 -rOPENBSD_4_7
d1572 1
a1572 1
To see the changes between 4.7 and <i>-current</i> ("HEAD"), use:
d1575 1
a1575 1
    # cvs diff -u -rOPENBSD_4_7 -rHEAD
d1613 1
a1613 1
<a href="upgrade47.html">upgrade47.html</a> (for going to 4.7-release)
d1674 1
a1674 1
<small>$OpenBSD: faq5.html,v 1.177 2009/11/30 03:06:52 nick Exp $</small>
@


1.177
log
@
curious line wrap problem.
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2007 by OpenBSD.">
d100 1
a100 1
       ,------o-----------o----X                    4.3 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.4 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 4.5 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 4.6 Stable
d109 1
a109 1
 --&gt;4.3Rel-----&gt;4.4Rel-----&gt;4.5Rel-----&gt;4.6Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.3-stable</i> branch came
to an end with <i>4.5-release</i>, and the <i>4.4-stable</i> branch came
to an end with <i>4.6-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>4.6-release</i> to <i>4.6-stable</i>).
d227 1
a227 1
For example, going from v4.5 to v4.6, or going from the June 12th
d231 1
a231 1
<a href="upgrade46.html">Upgrade guide</a> (when changing releases)
d243 1
a243 1
for example, 4.6-release to 4.6-stable.
d250 2
a251 2
So, you may install a system (for example, 4.4-release) from CD, then 
update it to 4.4-stable a few times, then upgrade it to 4.5-release
d253 1
a253 1
4.6-release.
d272 2
a273 2
<i>4.6-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.6-stable</i>.  You are on your own if
d379 1
a379 1
<a href="upgrade46.html">here</a>.
d456 1
a456 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_6 -P src</b>
d459 1
a459 1
This will pull the src files from the OPENBSD_4_6 branch, which is also
d465 1
a465 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_6 -Pd</b>
d469 1
a469 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_6</tt>" part
d486 1
a486 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_6 -P src ports xenocara</b>
a599 1
<a name="Building"></a>  <!-- Old tag -->
d723 1
a723 1
If following -stable after a proper <a href="upgrade46.html">upgrade
d836 1
a836 1
<a href="upgrade46.html">upgrade</a> on another machine, or if updating
d994 1
a994 1
If both of these are not true, you should stick to using GENERIC.
a1120 3

Another common reason to make a custom kernel would be to use RAIDframe,
which is too large to have in the stock kernel.
d1141 1
a1141 1
Another way to generate a custom kernel is to make a copy of the
d1240 1
a1240 1
OpenBSD 4.6 (GENERIC) #58: Thu Jul  9 21:24:42 MDT 2009
d1310 1
a1310 1
OpenBSD 4.6 (GENERIC) #58: Thu Jul  9 21:24:42 MDT 2009
d1562 1
a1562 1
For example, to see the changes between 4.5 and 4.6 do a:
d1566 1
a1566 1
    # cvs diff -u -rOPENBSD_4_5 -rOPENBSD_4_6
d1569 1
a1569 1
To see the changes between 4.6 and <i>-current</i> ("HEAD"), use:
d1572 1
a1572 1
    # cvs diff -u -rOPENBSD_4_6 -rHEAD
d1610 1
a1610 1
<a href="upgrade46.html">upgrade46.html</a> (for going to 4.6-release)
d1671 1
a1671 1
<small>$OpenBSD: faq5.html,v 1.176 2009/11/30 03:05:29 nick Exp $</small>
@


1.176
log
@
I suck.  Not only did I miss updating this section for a while (and for
4.6), but it got noticed on misc@@ a week or more AFTER Alan R. S. Bueno
had sent me a fix for it.  *sigh*.  Thanks for trying to keep me from
looking like a lazy slacker, Alan...
@
text
@d1315 2
a1316 1
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERICProcessing history...
d1675 1
a1675 1
<small>$OpenBSD: faq5.html,v 1.175 2009/11/01 18:43:01 nick Exp $</small>
@


1.175
log
@
I know I am in trouble when I get an e-mail with a subject of "Sigh" from
Theo.  Remove a paragraph that could scare people away from running
-current inappropriately.  May still need some attitude adjustment, but
less wrong than before.
@
text
@d1244 1
a1244 1
OpenBSD 4.5 (GENERIC) #1749: Sat Feb 28 14:51:18 MST 2009
d1248 18
a1265 19
ukc&gt; ?
        help                            Command help list
        add         dev                 Add a device
        base        8|10|16             Base on large numbers
        change      devno|dev           Change device
        disable     attr val|devno|dev  Disable device
        enable      attr val|devno|dev  Enable device
        find        devno|dev           Find device
        list                            List configuration
        lines       count               # of lines per page
        show        [attr [val]]        Show attribute
        exit                            Exit, without saving changes
        quit                            Quit, saving current changes
        timezone    [mins [dst]]        Show/change timezone
        nmbclust    [number]            Show/change NMBCLUSTERS
        cachepct    [number]            Show/change BUFCACHEPERCENT
        nkmempg     [number]            Show/change NKMEMPAGES
        shmseg      [number]            Show/change SHMSEG
        shmmaxpgs   [number]            Show/change SHMMAXPGS
d1267 20
a1286 24
  0 audio* at sb0|sb*|gus0|pas0|sp0|ess*|wss0|wss*|ym*|eap*|eso*|sv*|neo*|cmpci*
|clcs*|clct*|auich*|autri*|auvia*|fms*|uaudio*|maestro*|esa*|yds*|emu* flags 0x0
  1 midi* at sb0|sb*|opl*|opl*|opl*|opl*|ym*|mpu*|autri* flags 0x0
  2 nsphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  3 nsphyter* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|
vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep
*|ep*|ep* phy -1 flags 0x0
  4 qsphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  5 inphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  6 iophy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  7 eephy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
  8 exphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*
|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|e
p*|ep* phy -1 flags 0x0
d1289 8
a1296 8
 93 ep0 disabled
 94 ep* disabled
 95 ep* disabled
261 ep0 disabled
262 ep0 disabled
263 ep* disabled
264 ep* disabled
323 ep* disabled
d1314 1
a1314 1
OpenBSD 4.5 (GENERIC) #1749: Sat Feb 28 14:51:18 MST 2009
d1316 3
a1318 2
105 wi* disabled
106 wi* disabled
d1674 1
a1674 1
<small>$OpenBSD: faq5.html,v 1.174 2009/10/16 19:07:37 nick Exp $</small>
@


1.174
log
@
updates for 4.6
@
text
@a169 15
Warning: <i>-current</i> is a moving target.
It changes minute by minute,
and may well change several times in the time it takes to retrieve the
source code.
While the developers work hard to ensure that the system always compiles
and that there are no major bugs, it is entirely possible to get the
<i>-current</i> source and have it fail to compile, whereas five minutes
later everything will be just fine.
There are also flag days and major system changes
that the developers navigate with one-time tools,
which mean that source-based updating is not possible.
<b>If you are not prepared to deal with this, stay away from
<i>-current</i>.</b>

<p>
d172 1
a172 1
systems, and it is important that some people do so to identify bugs and
d1678 1
a1678 1
<small>$OpenBSD: faq5.html,v 1.173 2009/09/09 02:02:54 nick Exp $</small>
@


1.173
log
@
bunches of fixes from Alan R. S. Bueno (alan dot bsd at gmail dot com),
many thanks!
@
text
@d100 1
a100 1
       ,------o-----------o----X                    4.2 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.3 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 4.4 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 4.5 Stable
d109 1
a109 1
 --&gt;4.2Rel-----&gt;4.3Rel-----&gt;4.4Rel-----&gt;4.5Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.2-stable</i> branch came
to an end with <i>4.4-release</i>, and the <i>4.3-stable</i> branch came
to an end with <i>4.5-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>4.5-release</i> to <i>4.5-stable</i>).
d242 1
a242 1
For example, going from v4.4 to v4.5, or going from the June 12th
d246 1
a246 1
<a href="upgrade45.html">Upgrade guide</a> (when changing releases)
d258 1
a258 1
for example, 4.5-release to 4.5-stable.
d265 2
a266 2
So, you may install a system (for example, 4.3-release) from CD, then 
update it to 4.3-stable a few times, then upgrade it to 4.4-release
d268 1
a268 1
4.5-release.
d287 2
a288 2
<i>4.5-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.5-stable</i>.  You are on your own if
d394 1
a394 1
<a href="upgrade45.html">here</a>.
d471 1
a471 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_5 -P src</b>
d474 1
a474 1
This will pull the src files from the OPENBSD_4_5 branch, which is also
d480 1
a480 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_5 -Pd</b>
d484 1
a484 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_5</tt>" part
d501 1
a501 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_5 -P src ports xenocara</b>
d739 1
a739 1
If following -stable after a proper <a href="upgrade45.html">upgrade
d852 1
a852 1
<a href="upgrade45.html">upgrade</a> on another machine, or if updating
d1584 1
a1584 1
For example, to see the changes between 4.4 and 4.5 do a:
d1588 1
a1588 1
    # cvs diff -u -rOPENBSD_4_4 -rOPENBSD_4_5
d1591 1
a1591 1
To see the changes between 4.5 and <i>-current</i> ("HEAD"), use:
d1594 1
a1594 1
    # cvs diff -u -rOPENBSD_4_5 -rHEAD
d1632 1
a1632 1
<a href="upgrade45.html">upgrade45.html</a> (for going to 4.5-release)
d1693 1
a1693 1
<small>$OpenBSD: faq5.html,v 1.172 2009/09/01 00:39:14 nick Exp $</small>
@


1.172
log
@
rgouveia at cosmico dot net pointed out that all the bits about building
crunchgen are obsolete now that it is part of the base system
@
text
@d1327 2
a1328 1
wi(4) device was disabled. Since changes made with boot -c are NOT
d1693 1
a1693 1
<small>$OpenBSD: faq5.html,v 1.171 2009/04/30 17:19:11 nick Exp $</small>
@


1.171
log
@
updates for 4.5
@
text
@d785 4
a788 3
The release process involves a couple utilities which are not in the 
base OpenBSD system, crunch and crunchgen(1), which are used to create
a single executable file made up of many individual binaries.
a792 11
<i>These utilities must be built before the release process is
started.</i>
They only need to be built and installed once, but as people often
forget this step, and these programs build quickly, some people opt to
just build crunch and crunchgen every time as part of the script they
use to make a release.

<!-- XXX change for rel -->
<p>
<i><b>NOTE:</b> For -current and upcoming 4.5, crunch and crunchgen
are part of the base system, skip the separate build step below.</i>
d800 1
a800 7
First, if it has not been done on this machine, build crunch and
crunchgen:
<blockquote><pre>
# <b>cd /usr/src/distrib/crunch && make obj depend all install</b>
</pre></blockquote>

Now, we define our DESTDIR and RELEASEDIR environment variables:
d1692 1
a1692 1
<small>$OpenBSD: faq5.html,v 1.170 2009/03/11 23:30:48 nick Exp $</small>
@


1.170
log
@
pccom -> com.
@
text
@d100 1
a100 1
       ,------o-----------o----X                    4.1 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.2 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 4.3 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 4.4 Stable
d109 1
a109 1
 --&gt;4.1Rel-----&gt;4.2Rel-----&gt;4.3Rel-----&gt;4.4Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.1-stable</i> branch came
to an end with <i>4.3-release</i>, and the <i>4.2-stable</i> branch came
to an end with <i>4.4-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>4.4-release</i> to <i>4.4-stable</i>).
d242 1
a242 1
For example, going from v4.3 to v4.4, or going from the June 12th
d246 1
a246 1
<a href="upgrade44.html">Upgrade guide</a> (when changing releases)
d258 1
a258 1
for example, 4.4-release to 4.4-stable.
d268 1
a268 1
next release.
d287 2
a288 2
<i>4.4-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.4-stable</i>.  You are on your own if
d394 1
a394 1
<a href="upgrade44.html">here</a>.
d471 1
a471 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_4 -P src</b>
d474 1
a474 1
This will pull the src files from the OPENBSD_4_4 branch, which is also
d480 1
a480 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_4 -Pd</b>
d484 1
a484 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_4</tt>" part
d501 1
a501 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_4 -P src ports xenocara</b>
d739 1
a739 1
If following -stable after a proper <a href="upgrade44.html">upgrade
d868 1
a868 1
<a href="upgrade44.html">upgrade</a> on another machine, or if updating
d1275 1
a1275 1
OpenBSD 4.4 (GENERIC) #1021: Tue Aug 12 17:16:55 MDT 2008
d1349 2
a1350 3
OpenBSD 4.4 (GENERIC) #1021: Tue Aug 12 17:16:55 MDT 2008
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
Processing history...
d1599 1
a1599 1
For example, to see the changes between 4.3 and 4.4 do a:
d1603 1
a1603 1
    # cvs diff -u -rOPENBSD_4_3 -rOPENBSD_4_4
d1606 1
a1606 1
To see the changes between 4.4 and <i>-current</i> ("HEAD"), use:
d1609 1
a1609 1
    # cvs diff -u -rOPENBSD_4_4 -rHEAD
d1647 1
a1647 1
<a href="upgrade44.html">upgrade44.html</a> (for going to 4.4-release)
d1708 1
a1708 1
<small>$OpenBSD: faq5.html,v 1.169 2009/03/11 23:29:39 nick Exp $</small>
@


1.169
log
@
now that release is made, reminder of what can be done with it.
@
text
@d1165 1
a1165 1
pccom* at       boca? slave ?
d1709 1
a1709 1
<small>$OpenBSD: faq5.html,v 1.168 2008/11/30 11:01:26 tobias Exp $</small>
@


1.168
log
@Missing full stop added.
@
text
@d866 7
d1709 1
a1709 1
<small>$OpenBSD: faq5.html,v 1.167 2008/11/25 00:59:46 nick Exp $</small>
@


1.167
log
@
crunch/crunchgen are part of base now (-current), make note of it
for those of us that spent too much time scratching our heads over
why it wasn't where we thought it was.
@
text
@d802 1
a802 1
are part of the base system, skip the separate build step below</i>
d1702 1
a1702 1
<small>$OpenBSD: faq5.html,v 1.166 2008/11/12 01:48:08 nick Exp $</small>
@


1.166
log
@
clear out xobj directory.  Submitted, apparently by at least two people,
this one from sparctacus at gmail dot com.  Obviously, I'm behind on my
mail. :-/
@
text
@d799 5
d1702 1
a1702 1
<small>$OpenBSD: faq5.html,v 1.165 2008/10/31 16:52:29 nick Exp $</small>
@


1.165
log
@
update for 4.4
@
text
@d896 1
d1697 1
a1697 1
<small>$OpenBSD: faq5.html,v 1.164 2008/05/24 03:28:14 nick Exp $</small>
@


1.164
log
@
kernel building is now in config(8), not afterboot(8).
MAKEDEV man page is platform specific, so include arch= parameter.
Problems pointed out by Daniel Wade.
@
text
@d100 1
a100 1
       ,------o-----------o----X                    4.0 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.1 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 4.2 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 4.3 Stable
d109 1
a109 1
 --&gt;4.0Rel-----&gt;4.1Rel-----&gt;4.2Rel-----&gt;4.3Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>4.0-stable</i> branch came
to an end with <i>4.2-release</i>, and the <i>4.1-stable</i> branch came
to an end with <i>4.3-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>4.3-release</i> to <i>4.3-stable</i>).
d242 1
a242 1
For example, going from v4.2 to v4.3, or going from the June 12th
d246 1
a246 1
<a href="upgrade43.html">Upgrade guide</a> (when changing releases)
d258 1
a258 1
for example, 4.3-release to 4.3-stable.
d265 2
a266 2
So, you may install a system (for example, 4.2-release) from CD, then 
update it to 4.2-stable a few times, then upgrade it to 4.3-release
d287 2
a288 2
<i>4.3-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.3-stable</i>.  You are on your own if
d394 1
a394 1
<a href="upgrade43.html">here</a>.
d471 1
a471 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_3 -P src</b>
d474 1
a474 1
This will pull the src files from the OPENBSD_4_3 branch, which is also
d480 1
a480 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_3 -Pd</b>
d484 1
a484 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_3</tt>" part
d501 1
a501 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_3 -P src ports xenocara</b>
d739 1
a739 1
If following -stable after a proper <a href="upgrade43.html">upgrade
a862 7
<i>Note: the following instructions are for OpenBSD 4.2 and later.
If you are wishing to build X for 4.1 or before (you should really
<a href="upgrade43.html">upgrade</a>!), you can find the previous
version of these instructions in
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/www/faq/faq5.html?rev=1.155&content-type=text/html#Xbld">cvsweb</a></i>.

<p>
d1262 1
a1262 1
OpenBSD 4.3 (GENERIC) #698: Wed Mar 12 11:07:05 MDT 2008
d1312 8
a1319 8
 67 ep0 disabled
 68 ep* disabled
 69 ep* disabled
155 ep0 disabled
156 ep0 disabled
157 ep* disabled
158 ep* disabled
210 ep* disabled
d1336 1
a1336 1
OpenBSD 4.3 (GENERIC) #698: Wed Mar 12 11:07:05 MDT 2008
d1587 1
a1587 1
For example, to see the changes between 4.2 and 4.3 do a:
d1591 1
a1591 1
    # cvs diff -u -rOPENBSD_4_2 -rOPENBSD_4_3
d1594 1
a1594 1
To see the changes between 4.3 and <i>-current</i> ("HEAD"), use:
d1597 1
a1597 1
    # cvs diff -u -rOPENBSD_4_3 -rHEAD
d1635 1
a1635 1
<a href="upgrade43.html">upgrade43.html</a> (for going to 4.3-release)
d1696 1
a1696 1
<small>$OpenBSD: faq5.html,v 1.163 2008/05/11 08:02:09 tobias Exp $</small>
@


1.163
log
@FAQ5.3.3 still recommended to checkout xenocara source tree into
/usr/src/xenocara instead of /usr/xenocara.  Spotted by Frank Ebert.

ok nick
@
text
@d1185 2
a1186 2
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8#COMPILING+A">
afterboot(8)</a> man page.
d1608 1
a1608 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=MAKEDEV&amp;sektion=8">/dev/MAKEDEV</a>
d1703 1
a1703 1
<small>$OpenBSD: faq5.html,v 1.162 2008/04/30 21:24:58 nick Exp $</small>
@


1.162
log
@
update for 4.3
@
text
@d501 1
a501 3
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_3 -P src ports</b>
    # <b>cd /usr/src</b>
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_3 -P xenocara</b>
d1703 1
a1703 1
<small>$OpenBSD: faq5.html,v 1.161 2007/11/18 10:00:45 steven Exp $</small>
@


1.161
log
@no need to repeat the beginning of the sentence at the end
@
text
@d100 1
a100 1
       ,------o-----------o----X                    3.9 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          4.0 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 4.1 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 4.2 Stable
d109 1
a109 1
 --&gt;3.9Rel-----&gt;4.0Rel-----&gt;4.1Rel-----&gt;4.2Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>3.9-stable</i> branch came
to an end with <i>4.1-release</i>, and the <i>4.0-stable</i> branch came
to an end with <i>4.2-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>4.2-release</i> to <i>4.2-stable</i>).
d242 1
a242 1
For example, going from v4.1 to v4.2, or going from the June 12th
d246 1
a246 1
<a href="upgrade42.html">Upgrade guide</a> (when changing releases)
d258 1
a258 1
for example, 4.2-release to 4.2-stable.
d265 2
a266 2
So, you may install a system (for example, 4.1-release) from CD, then 
update it to 4.1-stable a few times, then upgrade it to 4.2-release
d287 2
a288 2
<i>4.2-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.2-stable</i>.  You are on your own if
d394 1
a394 1
<a href="upgrade42.html">here</a>.
d471 1
a471 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_2 -P src</b>
d474 1
a474 1
This will pull the src files from the OPENBSD_4_2 branch, which is also
d480 1
a480 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_2 -Pd</b>
d484 1
a484 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_2</tt>" part
d501 1
a501 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_2 -P src ports</b>
d503 1
a503 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_2 -P xenocara</b>
d528 1
a528 1
    # <b>tar xzf /mnt/xenocara.tar.gz</b>
a545 1
    # <b>tar xzf ../xenocara.tar.gz</b>
d547 1
d741 1
a741 1
If following -stable after a proper <a href="upgrade42.html">upgrade
d864 1
a864 1
<h2>5.5 - Building X (4.2 Xenocara)</h2>
d867 1
a867 1
<a href="upgrade42.html">upgrade</a>!), you can find the previous
d886 1
a886 1
<tt>/usr/src/xenocara/README</tt> file and in
d891 1
a891 1
<tt>/usr/src/xenocara</tt>, and the source is stored in the
d895 1
a895 1
$ <b>cd /usr/src</b>
d904 1
a904 1
# <b>cd /usr/src/xenocara</b>
d912 1
a912 1
Details are in the <tt>/usr/src/xenocara/README</tt> file.
d1271 1
a1271 1
OpenBSD 4.2 (GENERIC) #375: Tue Aug 28 10:38:44 MDT 2007
d1345 1
a1345 1
OpenBSD 4.2 (GENERIC) #375: Tue Aug 28 10:38:44 MDT 2007
d1596 1
a1596 1
For example, to see the changes between 4.1 and 4.2 do a:
d1600 1
a1600 1
    # cvs diff -u -rOPENBSD_4_1 -rOPENBSD_4_2
d1603 1
a1603 1
To see the changes between 4.2 and <i>-current</i> ("HEAD"), use:
d1606 1
a1606 1
    # cvs diff -u -rOPENBSD_4_2 -rHEAD
d1644 1
a1644 1
<a href="upgrade42.html">upgrade42.html</a> (for going to 4.2-release)
d1705 1
a1705 1
<small>$OpenBSD: faq5.html,v 1.160 2007/11/13 01:56:19 nick Exp $</small>
@


1.160
log
@
bah. someone did a pretty lame job of adjusting faq5.html for xenocara.
That someone is me.  Alan Bueno, however, did a good job of spotting
and correcting it.  tcl and tk are no longer needed to build X, as there
is no more XF3.  From (alan dot bsd at gmail dot com), thanks!
@
text
@d874 1
a874 1
three hundred more-or-less independent packages starting with X.org v7.
d1705 1
a1705 1
<small>$OpenBSD: faq5.html,v 1.159 2007/11/07 06:10:52 jmc Exp $</small>
@


1.159
log
@independant -> independent; from Mark Lumsden
@
text
@d76 1
a76 2
   <li><a href="#ProbXi386">5.11.12 - My X build failed!</a>
   <li><a href="#ProbXComp">5.11.13 - Can I cross-compile?  Why not?</a>
a1674 6
<a name="ProbXi386"></a>
<h3>5.11.12 - My X build failed!</h3>
On the i386 platform, a very common cause of build failure is forgetting
to install the "tcl" and "tk" packages before building, as indicated above
in <a href="faq5.html#Xbld">Building X</a>.

d1676 1
a1676 1
<h3>5.11.13 - Can I cross-compile?  Why not?</h3>
d1705 1
a1705 1
<small>$OpenBSD: faq5.html,v 1.158 2007/11/05 07:56:27 steven Exp $</small>
@


1.158
log
@XF4 -> xenocara

noticed by Iigo Tejedor Arrondo (inigo.listas at gmail)

ok nick@@
@
text
@d875 1
a875 1
three hundred more-or-less independant packages starting with X.org v7.
d1712 1
a1712 1
<small>$OpenBSD: faq5.html,v 1.157 2007/11/03 13:48:01 tobias Exp $</small>
@


1.157
log
@Two full stops are one too much.

"JUST COMMIT THESE" nick@@
@
text
@d495 1
a495 1
same steps for "<tt>XF4</tt>" and "<tt>ports</tt>".
d500 1
d502 3
a504 2
    # <b>export CVSROOT=anoncvs@@anoncvs.example.org:/cvs</b>
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_2 -P src ports XF4</b>
d529 2
a530 2
    # <b>cd /usr; tar xzf /mnt/XF4.tar.gz</b>
    # <b>tar xzf /mnt/ports.tar.gz</b>
d547 1
a548 1
    # <b>tar xzf XF4.tar.gz</b>
d1712 1
a1712 1
<small>$OpenBSD: faq5.html,v 1.156 2007/11/01 02:11:00 nick Exp $</small>
@


1.156
log
@
updates for 4.2.
@
text
@d881 1
a881 1
process used by the rest of OpenBSD than the previous versions were..
d1710 1
a1710 1
<small>$OpenBSD: faq5.html,v 1.155 2007/10/25 16:51:00 tobias Exp $</small>
@


1.155
log
@experiemental -> experimental

OK nick@@
@
text
@d101 1
a101 1
       ,------o-----------o----X                    3.8 Stable
d103 1
a103 1
       |      .    ,------o---------o----X          3.9 Stable
d105 1
a105 1
       |      .    |      .    ,----o----------o--&gt; 4.0 Stable
d107 1
a107 1
       |      .    |      .    |    .    ,-----o--&gt; 4.1 Stable
d110 1
a110 1
 --&gt;3.8Rel-----&gt;3.9Rel-----&gt;4.0Rel-----&gt;4.1Rel----&gt; Current 
d135 3
a137 3
also note that in the above example, the <i>3.8-stable</i> branch came
to an end with <i>4.0-release</i>, and the <i>3.9-stable</i> branch came
to an end with <i>4.1-release</i> -- old releases are typically supported
d143 1
a143 1
(i.e., going from <i>4.1-release</i> to <i>4.1-stable</i>).
d243 1
a243 1
For example, going from v4.0 to v4.1, or going from the June 12th
d247 1
a247 1
<a href="upgrade41.html">Upgrade guide</a> (when changing releases)
d259 1
a259 1
for example, 4.1-release to 4.1-stable.
d266 2
a267 2
So, you may install a system (for example, 4.0-release) from CD, then 
update it to 4.0-stable a few times, then upgrade it to 4.1-release
d288 2
a289 2
<i>4.1-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.1-stable</i>.  You are on your own if
d395 1
a395 1
<a href="upgrade41.html">here</a>.
d472 1
a472 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_1 -P src</b>
d475 1
a475 1
This will pull the src files from the OPENBSD_4_1 branch, which is also
d481 1
a481 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_1 -Pd</b>
d485 1
a485 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_1</tt>" part
d502 1
a502 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_1 -P src ports XF4</b>
d740 1
a740 1
If following -stable after a proper <a href="upgrade41.html">upgrade
d863 16
a878 4
<h2>5.5 - Building X</h2>
X uses a different build process than the rest of the OpenBSD tree, as
it is based on imake, rather than the standard
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=make&amp;sektion=1">make(1)</a>
d880 2
a881 7
One consequence of this is there is no "obj" directory, generated
binaries end up being intermixed with the source code, which can
cause problems (or at least, excessive output) with cvs(1).
A solution to this problem is to use 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lndir&amp;sektion=1">lndir(1)</a>
to make a "shadow directory" consisting of symbolic links to the actual
source directory for the XF4 tree.
d884 13
a896 13
<blockquote>
<b>i386 only:</b>
The i386 platform requires the "tcl" and "tk"
<a href="faq15.html#PkgMgmt">packages</a> be installed before
building
X (found in the ports tree at <tt>/usr/ports/lang/tcl/8.4/</tt> and
<tt>/usr/ports/x11/tk/8.4/</tt>.
Installing the "tk" package will install "tcl" as a dependency).
As usual, installing a package is much faster than installing these 
applications from source.
Failing to install these packages before building X is somewhat
frustrating, as the system will work for some time before erroring out.
</blockquote>
d898 3
a900 4
<p>
To compile X using the "shadow directory" of <tt>/usr/Xbld</tt>,
compiling and installing new binaries into the proper directories,
follow these steps:
d903 3
a905 5
# <b>rm -rf /usr/Xbld</b>
# <b>mkdir -p /usr/Xbld</b>
# <b>cd /usr/Xbld </b>
# <b>lndir ../XF4</b>
   [...lots of output...]
a906 1
   [...lots of output...]
d909 5
a913 2
<p>
<h3>Making an X release</h3>
d919 1
a919 1
If done carefully, this is not a problem, but using a separate DESTDIR 
d923 2
a924 2
For this example, we will use a DESTDIR and RELEASEDIR of
<tt>/usr/Xbld/dest</tt> and <tt>/usr/Xbld/rel</tt>, respectively.
d928 5
a932 5
# <b>export DESTDIR=/usr/Xbld/dest</b>
# <b>export RELEASEDIR=/usr/Xbld/rel</b>
# <b>cd /usr/Xbld</b>
# <b>rm -rf dest</b>
# <b>mkdir dest rel</b>
d936 2
a937 18
<p>
If you are planning on doing both a build and release of X, you can use
a different make(1) target, "b-r", which will both do the build and then
the release steps.  The "b-r" target assumes DESTDIR and RELEASEDIR are
the subdirectories "<tt>rel</tt>" and "<tt>dest</tt>" within your build
subdirectory:

<blockquote><pre>
# <b>rm -rf /usr/Xbld</b>
# <b>mkdir -p /usr/Xbld /usr/Xbld/dest /usr/Xbld/rel</b>
# <b>cd Xbld </b>
# <b>lndir ../XF4</b>
   [...lots of output...]
# <b>make b-r</b>
   [...lots of output...]
</pre></blockquote>


d1270 1
a1270 1
OpenBSD 4.1 (GENERIC) #1434: Thu Mar  8 22:56:57 MST 2007
d1344 1
a1344 1
OpenBSD 4.1 (GENERIC) #1434: Thu Mar  8 22:56:57 MST 2007
d1595 1
a1595 1
For example, to see the changes between 4.0 and 4.1, do a:
d1599 1
a1599 1
    # cvs diff -u -rOPENBSD_4_0 -rOPENBSD_4_1
d1602 1
a1602 1
To see the changes between 4.1 and <i>-current</i> ("HEAD"), use:
d1605 1
a1605 1
    # cvs diff -u -rOPENBSD_4_1 -rHEAD
d1643 1
a1643 1
<a href="upgrade41.html">upgrade41.html</a> (for going to 4.1-release)
d1710 1
a1710 1
<small>$OpenBSD: faq5.html,v 1.154 2007/10/24 22:17:46 nick Exp $</small>
@


1.154
log
@
improve accuracy of -stable comments, and add another reason why you can't
get source for snaps.
@
text
@d231 1
a231 1
Third, snapshots often contain experiemental code that isn't yet
d1720 1
a1720 1
<small>$OpenBSD: faq5.html,v 1.153 2007/09/19 07:26:59 steven Exp $</small>
@


1.153
log
@remove duplicate period.  alan.bsd at gmail
@
text
@d147 7
a153 7
<a href="../errata.html">errata page</a>, and some simple fixes that do
not merit an errata entry.  Usually, the operation of <i>-stable</i> is
the same as the <i>-release</i> it is based on.  If the 
<a href="http://www.openbsd.org/cgi-bin/man.cgi">man pages</a> have to
change, it probably won't go into <i>-stable</i>.  In other words, new
device support will NOT be added to <i>-stable</i>, and new feature
support will rarely be added unless it is considered very important. 
d231 2
d1720 1
a1720 1
<small>$OpenBSD: faq5.html,v 1.152 2007/08/16 03:06:27 nick Exp $</small>
@


1.152
log
@
misplaced paragraph, merge info into others and remove.
@
text
@d328 1
a328 1
option..
d1718 1
a1718 1
<small>$OpenBSD: faq5.html,v 1.151 2007/08/07 22:22:06 nick Exp $</small>
@


1.151
log
@
Make it very clear: the most reliable, the most secure and all-around,
the "best" version of OpenBSD should be -current.
@
text
@d563 2
a564 2
Without the "<tt>-P</tt>" option, your tree WILL NOT successfully
compile.
d570 1
a584 7
In this example, note that a <tt>-Pd</tt> is used as a parameter to the
<tt>up</tt> command.
This is another of those REQUIRED options, this will allow new
directories that don't currently exist in your previous checkout to be
created in the update process.

<p>
d1718 1
a1718 1
<small>$OpenBSD: faq5.html,v 1.150 2007/07/09 17:42:06 aanriot Exp $</small>
@


1.150
log
@show the border of each cells in html tables, even if they are empty, so
it's easier to read.

discussed with and ok nick@@
@
text
@d163 6
a168 3
In fact, as our hope is to continually improve OpenBSD, you may well 
find the reliability of <i>-current</i> is greater than that of 
<i>-stable</i>.
d1724 1
a1724 1
<small>$OpenBSD: faq5.html,v 1.149 2007/05/01 16:27:46 nick Exp $</small>
@


1.149
log
@
update for 4.1
@
text
@d359 1
a359 1
<table border="1" width="600">
d1721 1
a1721 1
<small>$OpenBSD: faq5.html,v 1.148 2007/04/29 02:46:01 nick Exp $</small>
@


1.148
log
@
config(1) -> config(8), consistant capitalization, better wording from
Nicholas Marriott (nicm_ at ntlworld dot com), thanks!
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2006 by OpenBSD.">
d101 1
a101 1
       ,------o-----------o----X                    3.7 Stable
d103 1
a103 1
       |      .    ,------o---------o----X          3.8 Stable
d105 1
a105 1
       |      .    |      .    ,----o----------o--&gt; 3.9 Stable
d107 1
a107 1
       |      .    |      .    |    .    ,-----o--&gt; 4.0 Stable
d110 1
a110 1
 --&gt;3.7Rel-----&gt;3.8Rel-----&gt;3.9Rel-----&gt;4.0Rel----&gt; Current 
d135 3
a137 3
also note that in the above example, the <i>3.7-stable</i> branch came
to an end with <i>3.9-release</i>, and the <i>3.8-stable</i> branch came
to an end with <i>4.0-release</i> -- old releases are typically supported
d143 1
a143 1
(i.e., going from <i>4.0-release</i> to <i>4.0-stable</i>).
d238 1
a238 1
For example, going from v3.9 to v4.0, or going from the June 12th
d242 1
a242 1
<a href="upgrade40.html">Upgrade guide</a> (when changing releases)
d254 1
a254 1
for example, 4.0-release to 4.0-stable.
d261 2
a262 2
So, you may install a system (for example, 3.9-release) from CD, then 
update it to 3.9-stable a few times, then upgrade it to 4.0-release
d283 2
a284 2
<i>4.0-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>4.0-stable</i>.  You are on your own if
d390 1
a390 1
<a href="upgrade40.html">here</a>.
d467 1
a467 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_0 -P src</b>
d470 1
a470 1
This will pull the src files from the OPENBSD_4_0 branch, which is also
d476 1
a476 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_4_0 -Pd</b>
d480 1
a480 1
system, so you don't have to remember the "<tt>-rOPENBSD_4_0</tt>" part
d497 1
a497 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_4_0 -P src ports XF4</b>
d741 1
a741 1
If following -stable after a proper <a href="upgrade40.html">upgrade
d1281 1
a1281 1
OpenBSD 4.0 (GENERIC) #1107: Sat Sep 16 19:15:58 MDT 2006
d1355 1
a1355 1
OpenBSD 4.0 (GENERIC) #1107: Sat Sep 16 19:15:58 MDT 2006
d1606 1
a1606 1
For example, to see the changes between 3.9 and 4.0, do a:
d1610 1
a1610 1
    # cvs diff -u -rOPENBSD_3_9 -rOPENBSD_4_0
d1613 1
a1613 1
To see the changes between 4.0 and <i>-current</i> ("HEAD"), use:
d1616 1
a1616 1
    # cvs diff -u -rOPENBSD_4_0 -rHEAD
d1654 1
a1654 1
<a href="upgrade40.html">upgrade40.html</a> (for going to 4.0-release)
d1721 1
a1721 1
<small>$OpenBSD: faq5.html,v 1.147 2007/03/18 21:09:08 nick Exp $</small>
@


1.147
log
@
add section explaining "updating" vs. "upgrading".  Lack of clairity was
pointed out by a few people inc. jmc@@, and I didn't realize this wasn't
covered at all here.
@
text
@d1081 1
a1081 1
There is no guarantee that a kernel that can be "config(1)ed" can be
d1088 2
a1089 2
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/i386/conf/">i386 Kernel Configuration files</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/macppc/conf/">macppc Kernel Configuration files</a>
d1104 2
a1105 2
that stores platform-independent options.  When creating your Kernel
Config, be sure to look through 
d1721 1
a1721 1
<small>$OpenBSD: faq5.html,v 1.146 2007/03/18 19:45:46 nick Exp $</small>
@


1.146
log
@
got a bit sloppy with the words "upgrade" and "update".
@
text
@d229 37
d1721 1
a1721 1
<small>$OpenBSD: faq5.html,v 1.145 2006/12/08 01:21:57 nick Exp $</small>
@


1.145
log
@
new home for CVS, apparently.
@
text
@d238 1
a238 1
this does mean you need to update your system if you want to run a new 
d243 1
a243 1
One should also understand that the update
d1684 1
a1684 1
<small>$OpenBSD: faq5.html,v 1.144 2006/11/01 06:24:30 steven Exp $</small>
@


1.144
log
@plural
@
text
@d360 2
a361 1
OpenBSD source is managed using the <a href="http://www.cvshome.org">CVS</a>
d1684 1
a1684 1
<small>$OpenBSD: faq5.html,v 1.143 2006/11/01 01:41:18 nick Exp $</small>
@


1.143
log
@
Updates for OpenBSD v4.0
@
text
@d160 1
a160 1
of <i>-stable</i> is not going to change, so you shouldn't have to relearn
d1683 1
a1683 1
<small>$OpenBSD: faq5.html,v 1.142 2006/10/08 13:43:39 aanriot Exp $</small>
@


1.142
log
@typos.

"yes, commit that" nick@@
@
text
@d101 1
a101 1
       ,------o-----------o----X                    3.6 Stable
d103 1
a103 1
       |      .    ,------o---------o----X          3.7 Stable
d105 1
a105 1
       |      .    |      .    ,----o----------o--&gt; 3.8 Stable
d107 1
a107 1
       |      .    |      .    |    .    ,-----o--&gt; 3.9 Stable
d110 1
a110 1
 --&gt;3.6Rel-----&gt;3.7Rel-----&gt;3.8Rel-----&gt;3.9Rel----&gt; Current 
d135 3
a137 3
also note that in the above example, the <i>3.6-stable</i> branch came
to an end with <i>3.8-release</i>, and the <i>3.7-stable</i> branch came
to an end with <i>3.9-release</i> -- old releases are typically supported
d143 1
a143 1
(i.e., going from <i>3.9-release</i> to <i>3.9-stable</i>).
d159 1
d161 2
a162 1
your system or change any configuration files.
d246 2
a247 2
<i>3.9-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>3.9-stable</i>.  You are on your own if
d353 1
a353 1
<a href="upgrade39.html">here</a>.
d429 1
a429 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_3_9 -P src</b>
d432 1
a432 1
This will pull the src files from the OPENBSD_3_9 branch, which is also
d438 1
a438 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_3_9 -Pd</b>
d442 1
a442 1
system, so you don't have to remember the "<tt>-rOPENBSD_3_9</tt>" part
d459 1
a459 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_3_9 -P src ports XF4</b>
d703 1
a703 1
If following -stable after a proper <a href="upgrade39.html">upgrade
d1243 1
a1243 1
OpenBSD 3.9 (GENERIC) #617: Thu Mar  2 02:26:48 MST 2006
d1317 1
a1317 1
OpenBSD 3.9 (GENERIC) #617: Thu Mar  2 02:26:48 MST 2006
d1568 1
a1568 1
For example, to see the changes between 3.8 and 3.9, do a:
d1572 1
a1572 1
    # cvs diff -u -rOPENBSD_3_8 -rOPENBSD_3_9
d1575 1
a1575 1
To see the changes between 3.9 and <i>-current</i> ("HEAD"), use:
d1578 1
a1578 1
    # cvs diff -u -rOPENBSD_3_9 -rHEAD
d1616 1
a1616 1
<a href="upgrade39.html">upgrade39.html</a> (for going to 3.9-release)
d1683 1
a1683 1
<small>$OpenBSD: faq5.html,v 1.141 2006/10/07 21:41:18 nick Exp $</small>
@


1.141
log
@
add 5.11.13 - Can I cross-compile?
@
text
@d1661 1
a1661 1
machine, and does a very good job of testing how ell the system really
d1663 1
a1663 1
For this reason, OpenBSD is does all their building on the platform the
a1668 1

d1681 1
a1681 1
<small>$OpenBSD: faq5.html,v 1.140 2006/05/14 15:57:39 nick Exp $</small>
@


1.140
log
@
Oh, that was ugly.  Spotted and corrected by Jeff Ross, (jross at
openvistas dot net), thanks!
@
text
@d77 1
d1651 18
d1682 1
a1682 1
<small>$OpenBSD: faq5.html,v 1.139 2006/05/03 01:47:19 nick Exp $</small>
@


1.139
log
@
spellos.
@
text
@d852 3
a854 3
To compile X using the "shadow directory" of <tt>/usr/Xbld</tt>, use the
following steps, compiling and installing new binaries into the proper
directories, follow these steps:
d1663 1
a1663 1
<small>$OpenBSD: faq5.html,v 1.138 2006/05/03 01:43:33 nick Exp $</small>
@


1.138
log
@
short and not-so-sweet: most build problems are PEBKAC.
@
text
@d469 1
a469 1
you can often save a lot of time and bandwidth by "preloading" your
d1350 1
a1350 1
There are occassional real problems with building <i>-current</i> from
d1432 1
a1432 1
If you wish to try to avoid refetching your entire src tree again, you
d1663 1
a1663 1
<small>$OpenBSD: faq5.html,v 1.137 2006/05/01 01:02:59 nick Exp $</small>
@


1.137
log
@
updates/revisions for 3.9
@
text
@d1348 18
d1663 1
a1663 1
<small>$OpenBSD: faq5.html,v 1.136 2006/02/15 03:40:53 nick Exp $</small>
@


1.136
log
@
tk/tcl. again.  No, I don't want to talk about it, ok?
@
text
@d100 1
a100 1
       ,------o-----------o----X                    3.5 Stable
d102 1
a102 1
       |      .    ,------o---------o----X          3.6 Stable
d104 1
a104 1
       |      .    |      .    ,----o----------o--&gt; 3.7 Stable
d106 1
a106 1
       |      .    |      .    |    .    ,-----o--&gt; 3.8 Stable
d109 1
a109 1
 --&gt;3.5Rel-----&gt;3.6Rel-----&gt;3.7Rel-----&gt;3.8Rel----&gt; Current 
d134 3
a136 3
also note that in the above example, the <i>3.5-stable</i> branch came
to an end with <i>3.7-release</i>, and the <i>3.6-stable</i> branch came
to an end with <i>3.8-release</i> -- old releases are typically supported
d142 1
a142 1
(i.e., going from <i>3.8-release</i> to <i>3.8-stable</i>).
d243 2
a244 2
<i>3.8-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>3.8-stable</i>.  You are on your own if
d350 1
a350 1
<a href="upgrade38.html">here</a>.
d417 1
d426 1
a426 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_3_8 -P src</b>
d429 1
a429 1
This will pull the src files from the OPENBSD_3_8 branch, which is also
d435 1
a435 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_3_8 -Pd</b>
d439 1
a439 1
system, so you don't have to remember the "<tt>-rOPENBSD_3_8</tt>" part
d456 1
a456 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_3_8 -P src ports XF4</b>
d700 1
a700 1
If following -stable after a proper <a href="upgrade38.html">upgrade
d1240 1
a1240 1
OpenBSD 3.8 (GENERIC) #138: Sat Sep 10 15:41:37 MDT 2005
d1314 1
a1314 1
OpenBSD 3.8 (GENERIC) #138: Sat Sep 10 15:41:37 MDT 2005
d1544 1
d1547 1
a1547 1
For example, to see the changes between 3.7 and 3.8, do a:
d1551 1
a1551 1
    # cvs diff -u -rOPENBSD_3_7 -rOPENBSD_3_8
d1554 1
a1554 1
To see the changes between 3.8 and <i>-current</i> ("HEAD"), use:
d1557 1
a1557 1
    # cvs diff -u -rOPENBSD_3_8 -rHEAD
d1593 1
d1595 1
a1595 1
<a href="upgrade38.html">upgrade38.html</a> (for going to 3.8-release)
d1645 1
a1645 1
<small>$OpenBSD: faq5.html,v 1.135 2006/01/01 19:23:12 nick Exp $</small>
@


1.135
log
@
TMI.  Doesn't really matter why you need tcl and tk to build X, save people
from trying to do wrong things due to misunderstandings.
@
text
@d76 1
d1623 6
d1642 1
a1642 1
<small>$OpenBSD: faq5.html,v 1.134 2005/12/06 20:34:28 steven Exp $</small>
@


1.134
log
@ports.html -> faq15.html in hrefs, remove href to ports.html from FAQ index.
ok nick@@
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2005 by OpenBSD.">
d837 3
a839 3
XF86Setup, used to configure XF3 servers on the i386 platform (and ONLY
the i386 platform) requires the "tcl" and "tk" 
<a href="faq8.html#Packages">packages</a> be installed before building
d1635 1
a1635 1
<small>$OpenBSD: faq5.html,v 1.133 2005/12/03 23:12:10 nick Exp $</small>
@


1.133
log
@
wording improvements, from J. C. Roberts, thanks!
@
text
@d229 1
a229 1
utilities and files) and <a href="../ports.html"><tt>ports</tt></a> tree
d1635 1
a1635 1
<small>$OpenBSD: faq5.html,v 1.132 2005/11/24 05:41:56 steven Exp $</small>
@


1.132
log
@link to faq15 instead of old faq8 packages/ports sections.

ok nick@@
@
text
@d90 2
a91 2
<li><b>-current:</b> The to-the-moment version of OpenBSD, which will 
    turn into the next release.
d115 2
a116 2
<i>-Current</i> is where active work is done, and turns
into the next <i>-release</i> of OpenBSD.
d127 4
a130 3
It is also known as the <i>patch branch</i> because of this.
As important fixes are made to <i>-current</i>,
they are "back ported" (merged) into the <i>-stable</i> branches.
d364 1
a364 1
you maintain using
d366 1
a366 1
<a href="../cvsync.html">CVSync</a>, available through
d1635 1
a1635 1
<small>$OpenBSD: faq5.html,v 1.131 2005/11/16 15:18:35 saad Exp $</small>
@


1.131
log
@better wording, ok nick@@
@
text
@d366 1
a366 1
<a href="faq8.html#Packages">packages</a>.
d1634 1
a1634 1
<small>$OpenBSD: faq5.html,v 1.130 2005/11/14 11:42:01 nick Exp $</small>
@


1.130
log
@
copy/paste, and forgot to reset link.  Spotted and fixed by Steven Mestdagh
@
text
@d471 1
a471 1
between the <i>-release</i> and <i>-stable</i>.
d482 2
a483 2
The source files for download from the FTP servers are separated into two
files to minimize the time required to download for those wishing to work
d486 2
a487 1
which contains all the other "userland" utilities.
d490 1
a490 1
<tt>sys.tar.gz</tt> are in <tt>/usr</tt>:
d503 1
a503 1
must be kept in sync, you will generally need to set up all trees.
d1634 1
a1634 1
<small>$OpenBSD: faq5.html,v 1.129 2005/11/14 03:12:11 nick Exp $</small>
@


1.129
log
@
copy anoncvs.html's info about pre-loading the source trees with the CD
or FTP tar.gz files.  Also, add suggestion to use softupdates on source
partition.
@
text
@d470 1
a470 1
<a href="stable.html"><i>-stable</i></a>, as relatively few files change
d1633 1
a1633 1
<small>$OpenBSD: faq5.html,v 1.128 2005/11/02 02:23:27 nick Exp $</small>
@


1.128
log
@
You would think that SOMEWHERE along the line I would notice that I was
snipping the banner from a -current kernel.  Actually, I did...but then
forgot until but Steven Mestdagh had to remind me.
@
text
@d464 40
d564 6
d1633 1
a1633 1
<small>$OpenBSD: faq5.html,v 1.127 2005/11/01 11:39:57 nick Exp $</small>
@


1.127
log
@
update for 3.8
@
text
@d1190 1
a1190 1
OpenBSD 3.8-current (GENERIC) #202: Wed Oct 19 17:52:24 MDT 2005
d1264 1
a1264 1
OpenBSD 3.8-current (GENERIC) #202: Wed Oct 19 17:52:24 MDT 2005
d1587 1
a1587 1
<small>$OpenBSD: faq5.html,v 1.126 2005/09/29 10:49:49 nick Exp $</small>
@


1.126
log
@
Better wording, from Steven Mestdagh, thanks!
@
text
@d99 1
a99 1
       ,------o-----------o----X                    3.4 Stable
d101 1
a101 1
       |      .    ,------o---------o----X          3.5 Stable
d103 1
a103 1
       |      .    |      .    ,----o----------o--&gt; 3.6 Stable
d105 1
a105 1
       |      .    |      .    |    .    ,-----o--&gt; 3.7 Stable
d108 1
a108 1
 --&gt;3.4Rel-----&gt;3.5Rel-----&gt;3.6Rel-----&gt;3.7Rel----&gt; Current 
d132 3
a134 3
also note that in the above example, the <i>3.4-stable</i> branch came
to an end with <i>3.6-release</i>, and the <i>3.5-stable</i> branch came
to an end with <i>3.7-release</i> -- old releases are typically supported
d140 1
a140 1
(i.e., going from <i>3.7-release</i> to <i>3.7-stable</i>).
d241 2
a242 2
<i>3.7-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>3.7-stable</i>.  You are on your own if
d348 1
a348 1
<a href="upgrade37.html">here</a>.
d423 1
a423 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_3_7 -P src</b>
d426 1
a426 1
This will pull the src files from the OPENBSD_3_7 branch, which is also
d432 1
a432 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_3_7 -Pd</b>
d436 1
a436 1
system, so you don't have to remember the "<tt>-rOPENBSD_3_7</tt>" part
d453 1
a453 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_3_7 -P src ports XF4</b>
d650 1
a650 1
If following -stable after a proper <a href="upgrade37.html">upgrade
d1190 2
a1191 2
OpenBSD 3.7 (GENERIC) #50: Sun Mar 20 00:01:57 MST 2005
     deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
d1264 2
a1265 2
OpenBSD 3.7 (GENERIC) #50: Sun Mar 20 00:01:57 MST 2005
     deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
d1496 1
a1496 1
For example, to see the changes between 3.6 and 3.7, do a:
d1500 1
a1500 1
    # cvs diff -u -rOPENBSD_3_6 -rOPENBSD_3_7
d1503 1
a1503 1
To see the changes between 3.7 and <i>-current</i> ("HEAD"), use:
d1506 1
a1506 1
    # cvs diff -u -rOPENBSD_3_7 -rHEAD
d1543 1
a1543 1
<a href="upgrade37.html">upgrade37.html</a> (for going to 3.7-release)
d1587 1
a1587 1
<small>$OpenBSD: faq5.html,v 1.125 2005/09/22 23:43:30 nick Exp $</small>
@


1.125
log
@
Ambigous wording...  "machine name" -> "platform name"
@
text
@d190 1
a190 1
There are times where "normal" users may wish to live on the cutting
d356 1
a356 1
content management system, and
d1587 1
a1587 1
<small>$OpenBSD: faq5.html,v 1.124 2005/08/11 01:21:35 nick Exp $</small>
@


1.124
log
@
mention index.txt is needed if distributing via http...  suggested by someone
long ago, and I'm not sure who, my appologies...
@
text
@d574 1
a574 1
Replace "<tt>i386</tt>" in the first line with your machine name.
d577 1
a577 1
command can tell you what your current machine name is, so an obvious
d1587 1
a1587 1
<small>$OpenBSD: faq5.html,v 1.123 2005/05/28 15:21:43 david Exp $</small>
@


1.123
log
@missing parenthesis from Tobias Stoeckmann
@
text
@d763 9
d1587 1
a1587 1
<small>$OpenBSD: faq5.html,v 1.122 2005/05/27 23:09:36 nick Exp $</small>
@


1.122
log
@
Not quite as obvious as I may have thought... old -Stable to new -Stable.
@
text
@d362 1
a362 1
repository used by the OpenBSD project, or from a local CVS repository
d1578 1
a1578 1
<small>$OpenBSD: faq5.html,v 1.121 2005/05/21 00:45:03 nick Exp $</small>
@


1.121
log
@
missing target in link.  Spotted by Saad@@
@
text
@d331 4
d1578 1
a1578 1
<small>$OpenBSD: faq5.html,v 1.120 2005/05/20 10:28:32 nick Exp $</small>
@


1.120
log
@
corrections, from Steven Mestdagh, thanks!
@
text
@d580 1
a580 1
if you have followed the <a href="">above</a> advice about upgrading
d1574 1
a1574 1
<small>$OpenBSD: faq5.html,v 1.119 2005/05/19 16:54:27 nick Exp $</small>
@


1.119
log
@
Welcome 3.7!
@
text
@d1178 2
a1179 1
     deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERICwarning: no output file specified
d1574 1
a1574 1
<small>$OpenBSD: faq5.html,v 1.118 2005/04/19 01:00:00 nick Exp $</small>
@


1.118
log
@
*I* wanted to change the DNS so be.openbsd.org pointed to 127.0.0.1, but
Theo's a nicer guy than I am.
@
text
@d99 1
a99 1
       ,------o-----------o----X                    3.3 Stable
d101 1
a101 1
       |      .    ,------o---------o----X          3.4 Stable
d103 1
a103 1
       |      .    |      .    ,----o----------o--&gt; 3.5 Stable
d105 1
a105 1
       |      .    |      .    |    .    ,-----o--&gt; 3.6 Stable
d108 1
a108 1
 --&gt;3.3Rel-----&gt;3.4Rel-----&gt;3.5Rel-----&gt;3.6Rel----&gt; Current 
d132 3
a134 3
also note that in the above example, the <i>3.3-stable</i> branch came
to an end with <i>3.5-release</i>, and the <i>3.4-stable</i> branch came
to an end with <i>3.6-release</i> -- old releases are typically supported
d140 1
a140 1
(i.e., going from <i>3.6-release</i> to <i>3.6-stable</i>).
d241 2
a242 2
<i>3.6-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>3.6-stable</i>.  You are on your own if
d344 1
a344 1
<a href="upgrade36.html">here</a>.
d419 1
a419 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_3_6 -P src</b>
d422 1
a422 1
This will pull the src files from the OPENBSD_3_6 branch, which is also
d428 1
a428 1
    # <b>cvs -d$CVSROOT up -rOPENBSD_3_6 -Pd</b>
d432 1
a432 1
system, so you don't have to remember the "<tt>-rOPENBSD_3_6</tt>" part
d449 1
a449 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_3_6 -P src ports XF4</b>
d646 1
a646 1
If following -stable after a proper <a href="upgrade36.html">upgrade
d1174 1
d1177 2
a1178 3
OpenBSD 3.6 (GENERIC) #59: Fri Sep 17 12:32:57 MDT 2004
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
warning: no output file specified
d1250 2
a1251 2
OpenBSD 3.6 (GENERIC) #59: Fri Sep 17 12:32:57 MDT 2004
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
d1482 1
a1482 1
For example, to see the changes between 3.5 and 3.6, do a:
d1486 1
a1486 1
    # cvs diff -u -rOPENBSD_3_5 -rOPENBSD_3_6
d1489 1
a1489 1
To see the changes between 3.6 and <i>-current</i> ("HEAD"), use:
d1492 1
a1492 1
    # cvs diff -u -rOPENBSD_3_6 -rHEAD
d1529 1
a1529 1
<a href="upgrade36.html">upgrade36.html</a> (for going to 3.6-release)
d1573 1
a1573 1
<small>$OpenBSD: faq5.html,v 1.117 2005/03/24 01:15:32 nick Exp $</small>
@


1.117
log
@
checkout in wrong directory, and wrong flag on one cvs command line.
spotted by John Scarfone (j0 at cox dot net), thanks!
@
text
@d387 1
a387 1
server, <b>anoncvs@@anoncvs.be.openbsd.org:/cvs</b>.
d398 1
a398 1
    # <b>export CVSROOT=anoncvs@@anoncvs.be.openbsd.org:/cvs</b>
d406 1
a406 1
    # <b>export CVSROOT=anoncvs@@anoncvs.be.openbsd.org:/cvs</b>
d418 1
a418 1
    # <b>export CVSROOT=anoncvs@@anoncvs.be.openbsd.org:/cvs</b>
d427 1
a427 1
    # <b>export CVSROOT=anoncvs@@anoncvs.be.openbsd.org:/cvs</b>
d448 1
a448 1
    # <b>export CVSROOT=anoncvs@@anoncvs.be.openbsd.org:/cvs</b>
d504 1
a504 1
    cvs -q -danoncvs@@anoncvs.be.openbsd.org:/cvs
d511 1
a511 1
<tt>anoncvs@@anoncvs.be.openbsd.org:/cvs</tt> server, suppress usually
d1573 1
a1573 1
<small>$OpenBSD: faq5.html,v 1.116 2005/03/12 16:02:02 nick Exp $</small>
@


1.116
log
@
Erf.  Someone sent this to me, I applied it, and forgot to commit.
Someone needs thanks here, not sure who, so I'm just gonna thank all those
that help me clean up and fix stuff.  Thanks, everyone!
@
text
@d417 1
a417 1
    # <b>cd /usr/src</b>
d447 1
a447 1
    # <b>cd /usr/src</b>
d449 1
a449 1
    # <b>cvs -d$CVSROOT checkout -rOPENBSD_3_6 -d src ports XF4</b>
d1573 1
a1573 1
<small>$OpenBSD: faq5.html,v 1.115 2005/02/12 19:08:41 nick Exp $</small>
@


1.115
log
@
typos, wordos, linkos and other errors spotted by Steven Mestdagh (steven
dot mestdagh at esat dot kuleuven dot ac dot be), thanks!
@
text
@d278 1
a278 1
It is likely this will be all you need for running <i>-current</i>
d1370 1
a1370 1
than to "rm -rf /usr/obj".
d1573 1
a1573 1
<small>$OpenBSD: faq5.html,v 1.114 2005/02/10 13:07:19 nick Exp $</small>
@


1.114
log
@
Wording improvement.  pointed out by jsg@@
@
text
@d510 1
a510 1
This file would cause cvs(1) to uses the 
d751 1
a751 1
You now have a complete and checked release file sets in the RELEASEDIR.
d1498 1
a1498 1
however it is installed as as part of a <a href="BldBinary">binary
d1573 1
a1573 1
<small>$OpenBSD: faq5.html,v 1.113 2005/02/09 19:59:33 nick Exp $</small>
@


1.113
log
@
missing tag, change references from upgrade-minifaq.html to current.html,
plus lots of new problems, tips and questions pulled from upgrade-minifaq:
5.11.8: missing FTP snapshots. 5.11.9: bootstrapping new compiler
5.11.10: updating /etc, 5.11.11: hierarchy changes
yes, targets in section 5.11 are a mess.  I smell a major retargeting
coming...once I figure out what I'm doing. :)
@
text
@d644 1
a644 1
<tt>/etc</tt>, by following the instructions in
d1573 1
a1573 1
<small>$OpenBSD: faq5.html,v 1.112 2005/02/09 03:17:59 nick Exp $</small>
@


1.112
log
@
oops.  "proc size mismatch" shouldn't occur anymore.  Alert from Markus@@,
confirmed by millert@@
@
text
@d68 8
d645 1
a645 1
<a href="upgrade-minifaq.html">upgrade-minifaq.html</a>.
d1372 1
d1398 162
d1573 1
a1573 1
<small>$OpenBSD: faq5.html,v 1.111 2005/02/08 23:14:44 nick Exp $</small>
@


1.111
log
@
I'm glad Alexandre Anriot <aanriot at atlantilde dot com) can write English,
I sure can't.  Thanks!
@
text
@a67 1
   <li><a href="#ProbProcSize">5.11.8 - ps(1) reports "proc size mismatchx."</a>
a1388 15
<a name="ProbProcSize"></a>
<h3>5.11.8 - ps(1) reports "proc size mismatch."</h3>
<p>
Your userland and kernel are out of sync.
They must both be compiled from the same sources, as certain
dependencies exist between them.
Rebuild your kernel and userland from the same sources to correct the
problem.
      
<p>
Since you've already made one mistake, now is an ideal time to reread
this document in its entirety, to catch any other things you may have
missed.
Pay special attention to the advice to <a href="#BldBinary">start from
the closest available binary</a>
d1402 1
a1402 1
<small>$OpenBSD: faq5.html,v 1.110 2005/02/08 22:57:20 nick Exp $</small>
@


1.110
log
@
add 5.11.8 - ps(1) reports "proc size mismatch."  Lifted from
upgrade-minifaq.html
@
text
@d231 1
a231 2
One should also understand that when 
<a href="upgrade-minifaq.html">upgrading by source</a>, the update
d444 2
a445 1
however, the updates must be done directory-by-directory.
d530 1
a530 1
some things that look a little confusing -- for example, there is are
d681 1
a681 1
<tt>/usr/dest</tt> and the RELEASEDIR of <tt>/usr/rel</tt>
d1313 3
a1315 4
as documented in the <a href="../anoncvs.html">anoncvs guide</a>, the
<a href="upgrade-minifaq.html">upgrade-minifaq</a> and the
<a href="faq8.html#CVS">FAQ</a>.  These options make sure new 
directories are added and removed from the tree as OpenBSD evolves.
d1418 1
a1418 1
<small>$OpenBSD: faq5.html,v 1.109 2005/02/08 22:40:27 nick Exp $</small>
@


1.109
log
@
Rework build problems section into "Problems, tips and questions".
Add 5.11.5 - /usr/obj partition 5.11.6 - how do I not build parts of the
tree (prompted by Diana Eichert in ..uh.. 2002 *blush*), 5.11.7 - where
can I learn more".
@
text
@d68 1
d1391 15
d1419 1
a1419 1
<small>$OpenBSD: faq5.html,v 1.108 2005/02/08 11:45:08 tom Exp $</small>
@


1.108
log
@Slight wording improvements.  ok nick@@
@
text
@d53 2
a54 2
<li><a href="#buildprobs">5.11 - Common Problems when
  Compiling and Building</a>
d62 6
d1274 2
a1275 1
<h2>5.11 - Common Problems when Compiling and Building</h2>
d1353 38
d1403 1
a1403 1
<small>$OpenBSD: faq5.html,v 1.107 2005/02/07 23:10:24 tom Exp $</small>
@


1.107
log
@Use the correct CVS tag
@
text
@d101 1
a101 6
The code tree is branched between <i>-current</i>, <i>-release</i> and
<i>-stable</i> every six months -- <i>-release</i> becomes a frozen point
(a &quot;Tag&quot;) in the history of the source tree - it is never
changed, and is what is on the <a href="../orders.html">CDs</a> and 
<a href="../ftp.html">FTP
servers</a>.  <i>-Current</i> is where active work is done, and turns
d103 6
d111 6
a116 5
<i>-Stable</i> (also known as the "Patch branch") is based on
<i>-release</i>, and as one can see, it is a "branch" from the
development path of OpenBSD.  As important fixes are made to
<i>-current</i>, they are "back ported" into the <i>-stable</i>
branches.  In the above illustration, the vertical dotted lines are bug
d142 2
a143 2
of <i>-stable</i> is not going to change, so you won't have to relearn
your system.
d149 2
a150 2
Warning: <i>-current</i> is a moving target.  It changes minute by
minute,
d152 9
a160 5
source code.  As indicated earlier, there is no promise that the system
compiles or that it works (of course, the hope is it does).  It is
entirely possible and not uncommon to get the <i>-current</i> source and
have it fail to compile, whereas five minutes later, it may work just
fine.  <b>If you are not prepared to deal with this, stay away from
d1358 1
a1358 1
<small>$OpenBSD: faq5.html,v 1.106 2005/02/07 12:43:13 tom Exp $</small>
@


1.106
log
@remove junk unintentionally committed.  sorry.
@
text
@d413 1
a413 1
system, so you don't have to remember the "<tt>-rOPENBSD_3_5</tt>" part
d1352 1
a1352 1
<small>$OpenBSD: faq5.html,v 1.105 2005/02/07 12:34:40 tom Exp $</small>
@


1.105
log
@better; ok nick@@
@
text
@d273 1
a273 1
<ol>
d278 1
a278 1
</ol>
d282 1
a282 1
<ol start="5">
d285 1
a285 1
</ol>
d1352 1
a1352 1
<small>$OpenBSD: faq5.html,v 1.104 2005/02/07 12:26:07 tom Exp $</small>
@


1.104
log
@No period at end of heading
@
text
@d273 1
a273 1
<ul>
d278 1
a278 1
</ul>
d282 1
a282 1
<ul>
d285 1
a285 1
</ul>
d332 1
a332 1
OpenBSD is developed using the <a href="http://www.cvshome.org">CVS</a>
d1352 1
a1352 1
<small>$OpenBSD: faq5.html,v 1.103 2005/02/07 12:22:26 tom Exp $</small>
@


1.103
log
@Grammar nit: remove unnecessary definite article
@
text
@d267 1
a267 1
<h2>5.3 - Building OpenBSD from source.</h2>
d1352 1
a1352 1
<small>$OpenBSD: faq5.html,v 1.102 2005/02/06 22:26:12 nick Exp $</small>
@


1.102
log
@
couple more #buildprob entries. IPv6-less kernel original text was:
"You broke your system.  If you don't know how to fix the problems you
make, don't make them.", but I wimped out.
#ProbObj lifted from upgrade-minifaq.html
@
text
@d110 1
a110 1
The <i>-stable</i> (also known as the "Patch branch") is based on
d1352 1
a1352 1
<small>$OpenBSD: faq5.html,v 1.101 2005/02/06 21:31:18 nick Exp $</small>
@


1.101
log
@
MAJOR rewrite.  Goal: remove all building instructions from
upgrade-minifaq.html and have here instead.
New content: 5.2 (Why build from source), 5.3 (Building from source),
5.4 (building a release) 5.5 (building X).  Reordered 5.9 (using config)
to be with 5.8 (ukc>).  Misc. rework scattered about.
"get it in" henning@@, lots of help from lots of people.
@
text
@d59 3
d632 1
d1313 26
d1352 1
a1352 1
<small>$OpenBSD: faq5.html,v 1.100 2005/02/06 18:33:09 nick Exp $</small>
@


1.100
log
@
let's clear up the meaning of -stable.  !-stable != "unreliable", m'kay?
upgrading to snapshot before trying to build -current isn't just a good idea.
(sync'ing stuff that isn't directly related to The Big Change that's
coming..shortly)
@
text
@d33 19
a51 6
<li><a href= "#Flavors">5.1 - OpenBSD's Flavors</a>
<li><a href= "#Why">5.2 - Why do I need a custom kernel?</a>
<li><a href= "#Options">5.3 - Kernel configuration files</a>
<li><a href= "#Building">5.4 - Building your own kernel</a>
<li><a href= "#BootConfig">5.5 - Boot-time configuration</a>
<li><a href= "#VerboseBoot">5.6 - Getting more verbose output during
d53 1
a53 2
<li><a href= "#config">5.7 - Using config(8) to change your kernel</a>
<li><a href="#buildprobs">5.8 - Common Problems when
d56 2
a57 2
   <li><a href="#sig11">5.8.1 - The build stopped with a "Signal 11" error</a>
   <li><a href="#snake">5.8.2 - "make build" fails with "cannot open output
a59 1
<li><a href="#BldRelease">5.9 - How do I build an OpenBSD release?</a>
d229 592
d824 1
a824 1
<h2>5.2 - Why do I need a custom kernel?</h2>
d898 10
a907 1
<h2>5.3 - Kernel configuration files</h2>
d940 3
a942 1
actually have a reason to do so!</b>  The only kernel configuration
d953 2
d985 5
d991 5
a995 3
<pre>
     option      DEBUG
</pre>
d1023 18
d1042 3
d1046 19
a1065 3
<p> 
<a name="Building"></a>
<h2>5.4 - Building your own kernel</h2>
d1069 1
a1069 1
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&amp;sektion=8">
a1071 87
<p>
To compile your kernel from the CD-ROM you need to first have the source
code available.  The source is available on both the 
<a href="../orders.html">official CD</a> (disk 3) and on the 
<a href="../ftp.html">FTP sites</a>.  The following example assumes
that CD3 is mounted on /mnt:

<blockquote>
<pre>
# <strong>cd /usr/src</strong>
# <strong>tar xvzf /mnt/src.tar.gz</strong>
</pre>
</blockquote>

<b>Note:</b> If you are downloading from the FTP servers, you will find
TWO files, <i>src.tar.gz</i> and <i>sys.tar.gz</i>.  The first is the
"userland" -- everything but the kernel, the second is the kernel
source.  Download and extract both of them as above, as for most uses,
you will want both.  On the CD-ROM, they are combined into one file.

<p>
Now to create your custom kernel it is easiest to start with the GENERIC
kernel. This is located at <tt>/usr/src/sys/arch/$ARCH/conf/GENERIC</tt>,
where $ARCH is your architecture. There are other sample configurations
available in that directory as well. Here are two examples for compiling
your kernel. The first example is compiling your kernel on a read-only
source tree. The second on a writable source tree.

<blockquote> 
<pre>
# <strong>cd /somewhere</strong>
# <strong>cp /usr/src/sys/arch/$ARCH/conf/SOMEFILE .</strong>
# <strong>vi SOMEFILE</strong>   <i>(to make the changes you want)</i>
# <strong>config -s /usr/src/sys -b . SOMEFILE</strong>
</pre>
followed by either:

<pre>
    # <strong>make depend</strong>
         <b><i>- OR -</i></b>
    # <strong>make clean && make depend</strong>
# <strong>make</strong>
</pre>
</blockquote>

You should run '<tt>make depend</tt>' when you have made any changes
(including updates and patches) to your source tree (in other words,
almost always).
If config tells you to also run '<tt>make clean</tt>', do so before 
running the '<tt>make depend</tt>'


<p>
If you have made changes to your kernel configuration options, and/or
made major changes to your source tree, you should use '<tt>make
clean</tt>' instead of the above '<tt>made depend</tt>'.  Note that it
is always safe to do a 'make clean', though it may result in longer
compile times, as more will be rebuilt.

<p>
To compile a kernel inside a writable source tree do the following:

<blockquote>
<tt>
# <strong>cd sys/arch/$ARCH/conf</strong><br>
# <strong>vi SOMEFILE</strong><i> (to make any changes you want)</i><br>
# <strong>config SOMEFILE</strong><i> (read more about it here: 
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>)</i><br>
# <strong>cd ../compile/SOMEFILE</strong><br>
# <strong>make</strong> <br>
</tt>
</blockquote>

<p>
Where $ARCH is the architecture you are using (e.g. i386). You can also do
a <strong>make depend</strong> to make the dependencies for the next time
you compile your kernel.

<p>
To move your kernel into place:

<blockquote>
<pre>
# <strong>cp /bsd /bsd.old</strong>
# <strong>cp /sys/arch/$ARCH/compile/SOMEFILE/bsd /bsd</strong>
</pre>
</blockquote>
a1072 17
To revert to your old kernel at boot you just need to

<blockquote>
<pre>
boot&gt; <strong>bsd.old</strong>
</pre>
</blockquote>

and your old kernel will be loaded instead of /bsd.

<p>
Sometimes when you build a new kernel you will be required to install
new bootblocks. To do so, read <a href="faq14.html#InstBoot">FAQ 14,
Installing Bootblocks</a>, which will give you an overview on using
OpenBSD's Bootloader.

<p>
d1074 1
a1074 1
<h2>5.5 - Boot-Time Configuration</h2>
d1083 1
a1083 1
correct the problem by fixing and recompiling your kernel. Your kernel
d1122 1
a1122 1
kernel image, as described in <a href="faq5.html#config">Using config(8)
a1124 18
<p>
<a name="VerboseBoot"></a>
<h2>5.6 - Getting more verbose output during boot</h2>

Getting more verbose output can be very helpful when trying to debug
problems when booting.  If you have a problem wherein your boot floppy
won't boot and need to get more information, simply reboot. When you get
to the &quot;boot&gt;&quot; prompt, boot with boot -c. This will bring you
into the UKC&gt;, then do:

<blockquote><pre>
UKC&gt; <strong>verbose</strong>
autoconf verbose enabled
UKC&gt; <strong>quit</strong>
</pre></blockquote>

<p>
Now you will be given extremely verbose output upon boot.
d1128 1
a1128 1
<h2>5.7 - Using config(8) to change your kernel</h2>
d1235 21
d1258 1
a1258 1
<h2>5.8 - Common Problems when Compiling and Building</h2>
d1261 1
a1261 1
<h3>5.8.1 - The build stopped with a "Signal 11" error</h3>
d1284 1
a1284 1
<h3>5.8.2 - "make build" fails with "cannot open output file snake: is
d1306 2
a1307 12
<a href="../anoncvs.html">getting and updating</a> your source code
and <a href="upgrade-minifaq.html">building</a> your tree.

<a name="BldRelease"></a>
<h2>5.9 - How do I build an OpenBSD release?</h2>
After building your system in place, you can create the OpenBSD 
<a href="faq4.html#FilesNeeded">file sets</a> that can be used to 
install your system on another computer.

<p>
This is detailed in 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=release&amp;sektion=8">release(8)</a>
d1322 1
a1322 1
<small>$OpenBSD: faq5.html,v 1.99 2004/11/01 23:31:53 nick Exp $</small>
@


1.99
log
@
Rebuilding kernel: bad.  Adjusting kernel with config(8): good.
Pointed out and based on patch from Matthias Kilian, thanks!
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2004 by OpenBSD.">
d123 10
d177 2
a178 1
good starting point before attempting to build <i>-current</i>.
d773 1
a773 1
<small>$OpenBSD: faq5.html,v 1.98 2004/10/29 17:26:01 nick Exp $</small>
@


1.98
log
@
Updates for 3.6
@
text
@d552 5
a556 4
Once you get your device configured, use quit or exit and continue
booting. After doing so you should correct your Kernel configuration and
Compile a new kernel. Refer to <a href="faq5.html#Building">Building
your own kernel</a> for help.
d762 1
a762 1
<small>$OpenBSD: faq5.html,v 1.97 2004/10/20 23:04:26 nick Exp $</small>
@


1.97
log
@
make "OpenBSD" logo on top of page a "click back" to the OpenBSD home page.
(about time!)
@
text
@d71 1
a71 1
       ,------o-----------o----X                    3.2 Stable
d73 1
a73 1
       |      .    ,------o---------o----X          3.3 Stable
d75 1
a75 1
       |      .    |      .    ,----o----------o--&gt; 3.4 Stable
d77 1
a77 1
       |      .    |      .    |    .    ,-----o--&gt; 3.5 Stable
d80 1
a80 1
 --&gt;3.2Rel-----&gt;3.3Rel-----&gt;3.4Rel-----&gt;3.5Rel----&gt; Current 
d102 3
a104 3
also note that in the above example, the <i>3.2-stable</i> branch came
to an end with <i>3.4-release</i>, and the <i>3.3-stable</i> branch came
to an end with <i>3.5-release</i> -- old releases are typically supported
d110 1
a110 1
(i.e., going from <i>3.5-release</i> to <i>3.5-stable</i>).
d123 2
a124 2
Warning: <i>-current</i> is a moving target.  It changes almost minute 
by minute,
d197 2
a198 2
<i>3.5-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>3.5-stable</i>.  You are on your own if
d602 1
a602 1
OpenBSD 3.5 (GENERIC) #34: Mon Mar 29 12:24:55 MST 2004
d676 1
a676 1
OpenBSD 3.5 (GENERIC) #34: Mon Mar 29 12:24:55 MST 2004
d761 1
a761 1
<small>$OpenBSD: faq5.html,v 1.96 2004/09/22 15:05:56 nick Exp $</small>
@


1.96
log
@
typos, from Tobias Stoeckmann (tobias at bugol dot de).
@
text
@d17 3
a19 1
<img alt="[OpenBSD]" height=30 width=141 src="../images/smalltitle.gif">
d761 1
a761 1
<small>$OpenBSD: faq5.html,v 1.95 2004/08/17 16:08:17 nick Exp $</small>
@


1.95
log
@
slightly more accurate about "make clean" and "make depend".
@
text
@d296 1
a296 1
<tt>/usr/src/sys/arch/&lt;<i>arch</i>&gt;/compile/</tt>.  config(8) also creates
d446 1
a446 1
almost always.
d759 1
a759 1
<small>$OpenBSD: faq5.html,v 1.94 2004/04/30 18:06:20 nick Exp $</small>
@


1.94
log
@
FAQ updates for OpenBSD 3.5
@
text
@d439 1
a439 1
    # <strong>make clean</strong>
d444 1
a444 1
You must run '<tt>make depend</tt>' when you have made any changes 
d446 4
a449 1
almost always, unless you need to run '<tt>make clean</tt>').
d759 1
a759 1
<small>$OpenBSD: faq5.html,v 1.93 2004/03/18 23:53:53 nick Exp $</small>
@


1.93
log
@
hrumph.  Start to write an e-mail to someone explaining that yes, this
WAS in the FAQ, and find out..it wasn't!  This is very lame, but if the
choice is between sending them to the right place now or waiting for the
long-promised rewrite, put this in now...  kick from Mark.Nelson at
durham.ac.uk
@
text
@d69 1
a69 1
       ,------o-----------o----X                    3.1 Stable
d71 1
a71 1
       |      .    ,------o---------o----X          3.2 Stable
d73 1
a73 1
       |      .    |      .    ,----o----------o--&gt; 3.3 Stable
d75 1
a75 1
       |      .    |      .    |    .    ,-----o--&gt; 3.4 Stable
d78 1
a78 1
 --&gt;3.1Rel-----&gt;3.2Rel-----&gt;3.3Rel-----&gt;3.4Rel----&gt; Current 
d100 3
a102 3
also note that in the above example, the <i>3.1-stable</i> branch came
to an end with <i>3.3-release</i>, and the <i>3.2-stable</i> branch came
to an end with <i>3.4-release</i> -- old releases are typically supported
d108 1
a108 1
(i.e., going from <i>3.4-release</i> to <i>3.4-stable</i>).
d164 1
a164 1
snapshot is often all you need, and upgrading to a snapshot is usually a
d172 1
a172 1
platforms, one might be able to build several snapshots in a day.  On
d195 2
a196 2
<i>3.4-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>3.4-stable</i>.  You are on your own if
d597 1
a597 1
OpenBSD 3.4 (GENERIC) #18: Wed Sep 17 03:34:47 MST 2003
d671 1
a671 1
OpenBSD 3.4 (GENERIC) #18: Wed Sep 17 03:34:47 MST 2003
d756 1
a756 1
<small>$OpenBSD: faq5.html,v 1.92 2004/02/26 21:27:59 jufi Exp $</small>
@


1.92
log
@double wording, deepspace via openbsd-www.
Thanks !
@
text
@d46 1
d733 11
d756 1
a756 1
<small>$OpenBSD: faq5.html,v 1.91 2004/02/06 01:43:21 nick Exp $</small>
@


1.91
log
@
Rework 5.2, #Why.  Very few people should build a custom kernel.
Conversion into proper English and good suggestions by tom@@
@
text
@d251 1
a251 1
  <li>You you will not get a faster system.
d744 1
a744 1
<small>$OpenBSD: faq5.html,v 1.90 2004/01/01 04:13:34 nick Exp $</small>
@


1.90
log
@
bump copyright to 2004
@
text
@d207 1
a207 1
<h2>5.2 - Why would I want to create my own custom kernel?</h2>
d210 1
a210 2
Several reasons, although this practice is generally geared towards
knowledgeable users who have a good overall understanding of the system.
d212 21
d234 11
a244 6
  <li>Your computer has a very small amount of RAM and you want to preserve 
      as much as possible by removing device drivers you don't use
  <li>You wish to remove default options or add options which may not
      have been enabled by default
  <li>You wish to enable experimental options
    
d248 27
a274 7
Under most circumstances you will NOT need to compile your own kernel.
The GENERIC kernel will usually be all that you need.  In fact, there
are several reasons why you do not want to create your own kernel.  The
main reason is that it is very easy to make changes to the kernel
configuration which look logical, but do not work.  This is your danger
sign.  If something does not appear to work properly, please try the
GENERIC kernel before sending in a bug report. Developers will
d276 2
a277 2
problem can be reproduced in a GENERIC kernel as well. You have been
warned.
d744 1
a744 1
<small>$OpenBSD: faq5.html,v 1.89 2003/11/24 03:20:00 nick Exp $</small>
@


1.89
log
@
Not really naming SCSI or IDE devices at the boot> prompt, so use the
more generic 'hd0a' naming instead.
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
d699 1
a699 1
<small>$OpenBSD: faq5.html,v 1.88 2003/10/30 22:43:42 nick Exp $</small>
@


1.88
log
@
FAQ updates for OpenBSD 3.4.  Lots of help from lots of people, but
special thanks to Tom Cosgrove who provided many improvements and
proofreading.
@
text
@d477 1
a477 1
boot&gt; <strong>boot wd0a:/bsd -c</strong>
d699 1
a699 1
<small>$OpenBSD: faq5.html,v 1.87 2003/10/10 00:37:54 nick Exp $</small>
@


1.87
log
@
Per prior discussion amoung developers CD-ROM it is, not CDROM.
Work by Tom Cosgrove, thanks!
@
text
@d68 1
a68 1
       ,------o-----------o----X                    3.0 Stable
d70 1
a70 1
       |      .    ,------o---------o----X          3.1 Stable
d72 1
a72 1
       |      .    |      .    ,----o----------o--&gt; 3.2 Stable
d74 1
a74 1
       |      .    |      .    |    .    ,-----o--&gt; 3.3 Stable
d77 1
a77 1
 --&gt;3.0Rel-----&gt;3.1Rel-----&gt;3.2Rel-----&gt;3.3Rel----&gt; Current 
d99 3
a101 3
also note that in the above example, the <i>3.0-stable</i> branch came
to an end with <i>3.2-release</i>, and the <i>3.1-stable</i> branch came
to an end with <i>3.3-release</i> -- old releases are typically supported
d107 1
a107 1
(i.e., going from <i>3.3-release</i> to <i>3.3-stable</i>).
d194 2
a195 2
<i>3.3-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>3.3-stable</i>.  You are on your own if
d429 1
a429 1
To move your kernel into place.
d551 1
a551 1
OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
d625 1
a625 1
OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
d699 1
a699 1
<small>$OpenBSD: faq5.html,v 1.86 2003/06/26 19:31:32 nick Exp $</small>
@


1.86
log
@
note to self: run validator THEN commit.  Not the other way around.
@
text
@d354 1
a354 1
To compile your kernel from the cdrom you need to first have the source
d371 1
a371 1
you will want both.  On the CDROM, they are combined into one file.
d699 1
a699 1
<small>$OpenBSD: faq5.html,v 1.85 2003/06/26 19:26:42 nick Exp $</small>
@


1.85
log
@
New article: Common Problems when Compiling and Building.
  #sig11  - inspired by Sam Smith
  #snake  - inspired by..uh, let's just say, "inspired". 8)
@
text
@d42 1
a42 1
   <li><a href="#sig11">5.8.1 - The build stopped with a "Signal 11" error<a>
d699 1
a699 1
<small>$OpenBSD: faq5.html,v 1.84 2003/06/16 13:29:00 pb Exp $</small>
@


1.84
log
@ftp server holds sys.tar.gz (instead srcsys) since 3.3

nick@@ ok
@
text
@d39 7
d634 52
d699 1
a699 1
<small>$OpenBSD: faq5.html,v 1.83 2003/05/01 01:47:41 nick Exp $</small>
@


1.83
log
@
Updated FAQ for OpenBSD 3.3.
@
text
@d361 1
a361 1
TWO files, <i>src.tar.gz</i> and <i>srcsys.tar.gz</i>.  The first is the
d640 1
a640 1
<small>$OpenBSD: faq5.html,v 1.82 2003/04/10 18:18:43 nick Exp $</small>
@


1.82
log
@
Nits, consistancy and spacing.  Mostly from Tom Cosgrove.
Removed the old "#5.x" style targets.
@
text
@d61 1
a61 1
       ,------o-----------o----X                    2.9 Stable
d63 1
a63 1
       |      .    ,------o---------o----X          3.0 Stable
d65 1
a65 1
       |      .    |      .    ,----o----------o--&gt; 3.1 Stable
d67 1
a67 1
       |      .    |      .    |    .    ,-----o--&gt; 3.2 Stable
d70 1
a70 1
 --&gt;2.9Rel-----&gt;3.0Rel-----&gt;3.1Rel-----&gt;3.2Rel----&gt; Current 
d92 3
a94 3
also note that in the above example, the <i>2.9-stable</i> branch came
to an end with <i>3.1-release</i>, and the <i>3.0-stable</i> branch came
to an end with <i>3.2-release</i> -- old releases are typically supported
d100 1
a100 1
(i.e., going from <i>3.2-release</i> to <i>3.2-stable</i>).
d187 2
a188 2
<i>3.2-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>3.2-stable</i>.  You are on your own if
d283 1
d544 1
a544 1
OpenBSD 3.2 (GENERIC) #25: Thu Oct  3 19:51:53 MDT 2002
d594 8
a601 8
 65 ep0 disabled
 66 ep* disabled
 67 ep* disabled
149 ep0 disabled
150 ep0 disabled
151 ep* disabled
152 ep* disabled
202 ep* disabled
d618 1
a618 1
OpenBSD 3.2 (GENERIC) #25: Thu Oct  3 19:51:53 MDT 2002
d640 1
a640 1
<small>$OpenBSD: faq5.html,v 1.81 2003/04/10 02:11:12 nick Exp $</small>
@


1.81
log
@
Better, more complete, and more up-to-date descriptions of kernel config
options are in options(4), so remove from this section, send user to
man 4 options.
@
text
@d33 1
a33 1
<li><a href= "#Options">5.3 - Kernel configuration Options</a>
d38 1
a38 2
<li><a href= "#config">5.7 - Using config(8) to change your kernel
  binary</a>
d131 1
a131 1
report.</a>.  "The recent changes to the pciide driver broke
d137 1
a137 1
edge and run <i>-current</i>. The most common reason is when the user 
d150 1
a150 1
Remember, on some platforms, this may be DAYS before the snapshot build
d199 1
a199 2
<a name= "Why"></a>
<a name= "5.1"></a>
d228 2
a229 3
<a name= "Options"></a>
<a name= "5.2"></a>
<h2>5.3 - Kernel Configuration Files</h2>
d299 3
a301 3
<pre>
     option      <i>OPTION</i>
</pre>
d337 1
a337 2
<a name= "Building"></a>
<a name= "5.3"></a>
d447 2
a448 3
<a name= "BootConfig"></a>
<a name="5.4"></a> 
<h2>5.5 - Boot Time Configuration </h2>
d466 1
a466 2
To boot into the User Kernel Config, or UKC, at boot time us the -c
option.
d499 1
a499 2
<a name= "VerboseBoot"></a>
<a name="5.5"></a>
d518 1
a518 2
<a name= "config"></a>
<a name="5.6"></a>
d639 1
a639 1
<small>$OpenBSD: faq5.html,v 1.80 2003/04/04 17:49:08 nick Exp $</small>
@


1.80
log
@
More tags for Stuff That Changes every release, from Sam Smith.
@
text
@d232 17
a248 1
<h2>5.3 - Kernel Configuration Options</h2>
d258 18
a275 11
man page for a more complete list of options. You can also check the
example configuration files that are available for your architecture.

<p>
Not all kernel options have been tested for compatibility with
all other options.  Don't put an option in your kernel unless you
actually have a reason to do so!  The one kernel configuration which
gets the most testing is the GENERIC kernel.  This is usually a
combination of the options in 
<tt>/usr/src/sys/arch/`arch -s`/conf/GENERIC</tt>
and <tt>/usr/src/sys/conf/GENERIC</tt>. 
d278 1
d280 1
a280 1
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/alpha/conf/">Alpha Kernel Conf Files </a>
d290 9
a298 9
Look closely at these files and you will notice a line like:<br>
<strong>include "../../../conf/GENERIC"</strong><br>
This means that it is referencing yet another configuration file. This
file stores non arch-dependent options. So when creating your Kernel
Config be sure to look through 
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/conf/GENERIC">/sys/conf/GENERIC</a> 
and see what you want. There <b>are</b> options in there that are
<b>necessary</b>.

d300 9
a308 5
All of the options listed below should be placed in your kernel
configuration file in the format of:<br>
<strong>option      OPTION</strong><br>
for example. To place option debug in the kernel, add a line like this:<br>
<strong>option	    DEBUG</strong><br>
d311 1
a311 1
with option -DDEBUG. Which is equivalent to doing a #define DEBUG
d315 12
a326 4
OpenBSD has many compatibility options which allow you to use
binaries from other OS's.  Not all are availably on every architecture,
so be sure to read the man pages for each option to see if your arch is
supported.
d329 6
a334 114
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_svr4&amp;sektion=8">COMPAT_SVR4(8)</a> 
  - Compatibility with SVR4 binaries.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_bsdos&amp;sektion=8">COMPAT_BSDOS(8)</a> 
  - Compatibility with BSD/OS binaries.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&amp;sektion=8">COMPAT_LINUX(8)</a> 
  - Compatibility with Linux binaries.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_sunos&amp;sektion=8">COMPAT_SUNOS(8)</a> 
  - Compatibility with SunOS binaries.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ultrix&amp;sektion=8">COMPAT_ULTRIX(8)</a> 
  - Compatibility with Ultrix binaries.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_freebsd&amp;sektion=8">COMPAT_FREEBSD(8)</a> 
  - Compatibility with FreeBSD binaries.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_hpux&amp;sektion=8">COMPAT_HPUX(8)</a> 
  - Compatibility with HP-UX binaries. Only available on some m68k
  arch's.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ibcs2&amp;sektion=8">COMPAT_IBCS2(8)</a> 
  - Compatibility to run ibcs2 binaries.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_osf1&amp;sektion=8">COMPAT_OSF1(8)</a> 
  - Run Digital Unix binaries. Available only on Alpha platform.
<li>COMPAT_43 
  - Compatibility with 4.3BSD. Use of this is discouraged, but
  it is needed for some applications. 
<li>COMPAT_11 
  - Compatibility with NetBSD 1.1.
<li>COMPAT_NOMID 
 - Compatibility with a.out executables that lack a machine id.
</ul>

<p>
It is always helpful to be able to debug problems with the kernel. But
many choose not to put these options in their kernel because these
options add considerable size to the kernel. They are however extremely
helpful in a case where a bug might be present. This will help the
developers discover the source of your problems much quicker. Here is a
list of popular debugging options that can be added to your kernel.

<p>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&amp;sektion=4">DDB(4)</a>
  - This compiles in the in-kernel debugger. This isn't available on all
  platforms. So be sure to read before adding it.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kgdb&amp;sektion=7">KGDB(7)</a>
  - Compiles a remote kernel debugger using gdb's `remote target`
  feature.
<li>makeoptions  DEBUG="-g" - Makes bsd.gdb along with bsd. This is
  useful for debugging crash dumps with gdb.
<li>DEBUG - Used to put various debugging options in the kernel, where
  the source has defined them.
<li>KTRACE - Adds hooks for the system call tracing facility. Which
  allows users to use 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktrace&amp;sektion=1">ktrace(1)</a>.
<li>DIAGNOSTIC - Adds code to the kernel that does internal consistency
  checks.
<li>GPROF - adds code to the kernel for kernel profiling with 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kgmon&amp;sektion=8">kgmon(8)</a>.
<li>makeoptions PROF="-pg" - The -pg flag causes the kernel to be
  compiled with support for profiling. Option GPROF is required to use
  this option.
</ul>

<p>
<strong>Filesystem Options.</strong>
<ul>
<li>FFS - Berkeley Fast Filesystem <strong>NOTE:</strong> This option is
  required.
<li>EXT2FS - Second Extended File System. This is needed for those of
  you who want to read Linux partitions.
<li>MFS - Memory File System that stores files in swappable memory.
<li>NFS - Network File System. This is needed if you will be using
  NFS.
<li>CD9660 - This is iso9660 + rockridge filesystem. This is required to
  read from CDs.
<li>MSDOSFS - Needed to read MS-DOS FAT filesystems. Also has support
  for Windows 95 long name + mixed case extensions.
<li>FDESC - Includes code for a file system which can be mounted on
  /dev/fd.
<li>KERNFS - Includes code that permits the mounting of a special file
  system (normally mounted on /kern) in which files representing various
  kernel variables and parameters may be found.
<li>NULLFS - Code to have a loopback filesystem. 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_null&amp;sektion=8">mount_null(8)</a>
  has more information.
<li>PROCFS - Includes code for a special file system (conventionally
  mounted on /proc).
<li>PORTAL - Includes the (experimental) portal filesystem.  This
  permits interesting tricks like opening TCP sockets by opening files
  in the file system.
<li>UMAPFS - Includes a loopback file system in which user and group ids
  may be remapped -- this can be useful when mounting alien file systems
  with different uids and gids than the local system (eg, remote NFS).
<li>UNION - Includes code for the union file system, which permits
  directories to be mounted on top of each other in such a way that both
  file systems remain visible. This code isn't quite stable yet.
<li>XFS - Add hooks for using a filesystem that is compatible with the
  AFS filesystem. Currently used by the Arla/AFS code.
<li>FFS_SOFTUPDATES - Allows for the use of softupdates. To read more on
  softupdates read the <a href="faq14.html#SoftUpdates">Softupdates
  FAQ</a> section.
<li>NFSSERVER - Allow for the server-side NFS code to be included in the
  kernel.
<li>NFSCLIENT - Allow for the client-side NFS code to be included in the
  kernel.
<li>FIFO - Support for FIFOs. RECOMMENDED.
<li>NVNODE=integer - Where integer is the size of the cache used by the
  name-to-inode translation routines, (a.k.a. the namei() cache, though
  called by many other names in the kernel source).
<li>EXT2FS_SYSTEM_FLAG - This option changes the behavior of the APPEND
  and IMMUTABLE flags for a file on an EXT2FS filesystem. Read 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
  for more details.
<li>QUOTA - Support for Filesystem Quota's. To read up on using quotas
  read <a href="faq10.html#Quotas">FAQ 10, Quotas</a>.
</ul>
a336 90
<strong>Misc. Options</strong>
<ul>
<li>PCIVERBOSE - Make the boot process more verbose for PCI
  peripherals.
<li>EISAVERBOSE - Make the boot process more verbose for EISA
  peripherals.
<li>PCMCIAVERBOSE - Make the boot process more verbose for PCMCIA
  peripherals.
<li>APERTURE - Provide in-kernel support for VGA framebuffer mapping by
  user processes. Needed to run X.
<li>LKM - Support for Loadable Kernel Modules. Not available on all
  arch's. Read 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lkm&amp;sektion=4">lkm(4)</a>
  for more information.
<li>INSECURE - Hardwires the kernel security level to -1. Read 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&amp;sektion=8">init(8)</a>
  for more information on kernel security levels.
<li>RAM_DISK_HOOKS - Allows for machine dependent functions to be called
  when the ramdisk driver is configured.
<li>RAM_DISK_IS_ROOT - Forces the ramdisk to be root.
<li>CCDNBUF=integer - Set number of component buffers used by
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">CCD(4)</a>.
  Default is 8. For more on CCD, read the man page, or the
  <a href="faq11.html#ccd">Performance Tuning FAQ
  section</a>.
<li>KMEMSTATS - This makes malloc(9), the kernel memory allocator, keep
  statistics on its use. If option DEBUG is used, this option is
  automatically turned on by config. 
<li>BOOT_CONFIG - Adds support for the -c boot option.
</ul>

<strong>Networking Options</strong><br>
Also check the <a href="faq6.html">Networking FAQ</a> or the 
<a href="faq11.html#Network">Networking Performance Tuning FAQ</a>.
<ul>
<li>GATEWAY - Enables IPFORWARDING and (on most ports) increases the
  size of NMBCLUSTERS.
<li>NMBCLUSTERS=integer - Controls the size mbuf cluster map. 
<li>IPFORWARDING - Enables IP routing behavior.  With this option
  enabled, the machine will forward IP datagrams between its interfaces
  that are destined for other machines.
<li>MROUTING - Includes support for IP multicast routers.
<li>INET - Includes support for the TCP/IP protocol stack. This option
  is REQUIRED.
<li>MCLSHIFT=value - This option is the base-2 logarithm of the size of
  mbuf clusters. Read
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&amp;sektion=4">options(4)</a>
  for more information on this option.
<li>NS - Include support for the Xerox XNS protocol stack.  See 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ns&amp;sektion=4">ns(4)</a>.
<li>ISO,TPIP - Include support for the ubiquitous OSI protocol stack.
  See 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iso&amp;sektion=4">iso(4)</a>
  for more information.
<li>EON - Include support for OSI tunneling over IP.
<li>CCITT,LLC,HDLC - Include support for the X.25 protocol stack.
<li>IPX, IPXIP - Include support for Internetwork Packet Exchange
  protocol commonly in use by Novell NetWare.
<li>NETATALK - Include kernel support for the AppleTalk family of
  protocols.
<li>TCP_COMPAT_42 - Use of this option is extremely discouraged, so it
  should not be enabled. TCP bug compatibility with 4.2BSD. In 4.2BSD, TCP
  sequence numbers were 32-bit signed values.  Modern implementations of
  TCP use unsigned values.
<li>TCP_NEWRENO - Turns on NewReno fast recovery phase, which allows one
  lost segment to be recovered per round trip time.
<li>TCP_SACK - Turns on selective acknowledgements.
<li>TCP_FACK - Turns on forward acknowledgements allowing a more precise
  estimate of outstanding data during the fast recovery phase by using
  SACK information. This option can be used together with TCP_SACK.
<li>PPP_FILTER - This option turns on 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcap&amp;sektion=3">pcap(3)</a>
  based filtering for ppp connections.
<li>PPP_BSDCOMP - PPP BSD compression.
<li>PPP_DEFLATE - Used in conjunction with PPP_BSDCOMP.
<li>IPSEC - This option enables IP security protocol support. See 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&amp;sektion=4">ipsec(4)</a>
  for more details. This now implies option KEY, which gives support for
  PFKEYv2.
<li>ENCDEBUG - This option enables debugging information to be
  conditionally logged in case IPSEC encounters errors.
</ul>

<strong>SCSI Subsystem Options</strong>
<ul>
<li>SCSITERSE - Terser SCSI error messages.  This omits the table for
  decoding ASC/ASCQ info, saving about 8 bytes or so.
<li>SCSIDEBUG - Prints extra debugging info for the SCSI subsystem to
  the console.
</ul>
d647 1
a647 1
<small>$OpenBSD: faq5.html,v 1.79 2003/03/18 03:41:04 nick Exp $</small>
@


1.79
log
@
* [FAQ Index] [Back] [Next] links at top of page ('bout time.  Finally
decided not having them was worse than the lame ideas I had).
* Top heading changed from <h2> to <h1> throughout
* [Back to Main Index] shortened to [FAQ Index] top and bottom
* Bottoms of faq5.html and faq14.html standardized.
@
text
@d47 1
a47 1

d809 1
a809 1
<small>$OpenBSD: faq5.html,v 1.78 2003/02/28 00:34:28 nick Exp $</small>
@


1.78
log
@
Typo fixes from Tom Cosgrove (tom dot cosgrove at arches-consulting dot com).
Thanks!
@
text
@d19 7
a25 1
<h2><font color="#e00000">5 - Building the System from Source</font></h2>
d799 1
a799 1
<a href= "index.html">[Back to Main Index]</a>
d804 1
d809 1
a809 1
<small>$OpenBSD: faq5.html,v 1.77 2003/02/20 03:09:55 nick Exp $</small>
@


1.77
log
@
Page name cleanups.  Standardize capitalization, and change
x.0 -> x on titles and on "next/previous" links at bottom of page.
From Tom Cosgrove (tom dot cosgrove at arches-consulting dot com), thanks!
@
text
@d353 1
a353 1
<li>EXT2FS - Second Extended File System, This is needed for those of
d356 1
a356 1
<li>NFS - Network File System, This is needed if you will be using
d802 1
a802 1
<small>$OpenBSD: faq5.html,v 1.76 2003/02/18 03:02:18 nick Exp $</small>
@


1.76
log
@
Pick a charset, any charset.  However, bouncing back and forth between
them is probably not a good idea.  Picked "ISO-8859-1" rather than
"us-ascii".  Issue brought to my attention by David Krause, which
prompted me to go looking for more.
@
text
@d4 1
a4 1
<title>5 - Building the system from Source</title>
d19 1
a19 1
<h2><font color="#e00000">5 - Building the system from Source</font></h2>
d794 2
a795 2
<a href= "faq4.html">[To Section 4.0 - Installation Guide]</a>
<a href= "faq6.html">[To Section 6.0 - Networking]</a>
d802 1
a802 1
<small>$OpenBSD: faq5.html,v 1.75 2003/01/01 13:02:00 nick Exp $</small>
@


1.75
log
@
Rev copyrights to 2003.
@
text
@d11 1
a11 1
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
d802 1
a802 1
<small>$OpenBSD: faq5.html,v 1.74 2002/11/04 18:18:38 nick Exp $</small>
@


1.74
log
@
clarification that the src is in two files on the FTP servers, one file
on the CDROM...
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
d802 1
a802 1
<small>$OpenBSD: faq5.html,v 1.73 2002/11/01 15:27:13 nick Exp $</small>
@


1.73
log
@
Update of version numbers scattered around the FAQ.
@
text
@d519 6
d802 1
a802 1
<small>$OpenBSD: faq5.html,v 1.72 2002/09/03 01:30:29 nick Exp $</small>
@


1.72
log
@
Fixes for typos, punctuation, grammar, and added man page links,
from Moritz Jodeit <moritz@@jodeit.org>, thanks!
@
text
@d56 1
a56 1
       ,------o-----------o----&gt;          2.9 Stable
d58 1
a58 1
       |      .    ,------o---------o---&gt; 3.0 Stable
d60 6
a65 4
       |      .    |      .    ,----o---&gt; 3.1 Stable
       |      .    |      .    |    .
       |      .    |      .    |    .
 --&gt;2.9Rel-----&gt;3.0Rel-----&gt;3.1Rel------&gt; Current 
d82 1
a82 1
<i>-release</i>, and as one can see, it is a "branch" from the 
d87 4
a90 2
also note that in the above example, the <i>2.9-stable</i> branch came to an
end with <i>3.1-release</i> -- old releases are typically supported up to two
d94 2
a95 2
design, very easy to build from <i>-release</i> of the same version (i.e., going
from <i>3.1-release</i> to <i>3.1-stable</i>).
d182 2
a183 2
<i>3.1-current</i> (or a snapshot), then decide you are living too
dangerously, and step back to <i>3.1-stable</i>.  You are on your own if
d701 2
a702 2
OpenBSD 3.1 (GENERIC) #2: Sat Apr 20 21:44:54 EDT 2002
    root@@build:/usr/src/sys/arch/i386/compile/GENERIC
d775 2
a776 2
OpenBSD 3.1 (GENERIC) #2: Sat Apr 20 21:44:54 EDT 2002
    root@@build:/usr/src/sys/arch/i386/compile/GENERIC
d796 1
a796 1
<small>$OpenBSD: faq5.html,v 1.71 2002/09/02 02:48:31 nick Exp $</small>
@


1.71
log
@
cleanup: few typos, standardizing on <i>-[current|release|stable]</i>
whenever used, and those @@#%^@@! &gt;'s (Sam Smith, <S@@msmith.net>),
corrections of rough wording from Horacio@@, and lots of help from
Margarida Sequeira <niness@@devilness.org>.  Thanks to all!
@
text
@d124 1
a124 1
broke systems follow..." might be a useful report.
d128 1
a128 1
edge and run <i>-current</i>, the most common reason is when the user 
d277 1
a277 1
OpenBSD has a great many compatibility options which allow you to use
d296 1
a296 1
<li>COMPAT_HPUX 
d301 1
a301 1
<li>COMPAT_OSF1 
d307 1
a307 1
  - Compatibility with NetBSD 1.1
d316 1
a316 1
helpful in a case where a bug might be present. This well help the
d322 1
a322 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&amp;sektion=4">DDB</a>
d325 1
a325 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&amp;sektion=1">KGDB</a>
d379 2
a380 2
<li>FFS_SOFTUPDATES - Allows for the use of softupdates. To read up on
  softupdates more read the <a href="faq14.html#SoftUpdates">Softupdates
d386 1
a386 1
<li>FIFO - Support for FIFOs.. RECOMMENDED.
d395 1
a395 1
  read <a href="faq10.html#Quotas">FAQ 10, Quotas</a>
d419 6
a424 6
<li>CCDNBUF=integer - Set number of component buffers used by CCD(4).
  Default is 8. For more on CCD read the 
  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">CCD(4)</a>
  man page, or the <a href="faq11.html#ccd">Performance Tuning FAQ
  section.</a>
<li>KMEMSTATS - This makes malloc(9), the kernel memory allocator keep
d427 1
a427 1
<li>BOOT_CONFIG - Adds support of the -c boot option.
d442 1
a442 1
  is REQUIRED
d448 1
a448 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ns&amp;sektion=4">ns(4)</a>
d506 1
a506 1
assumes that CD3 is mounted on /mnt:
d580 1
a580 1
To revert to your old kernel at boot you need to just
d593 2
a594 2
Installing Bootblocks</a>. Which will give you an overview on using
OpenBSD's Bootloader
d614 1
a614 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&amp;sektion=8">boot_config(8)</a>
d792 1
a792 1
<small>$OpenBSD: faq5.html,v 1.70 2002/09/02 00:56:22 nick Exp $</small>
@


1.70
log
@
Add section on snapshots.  Content ok art@@
@
text
@d56 1
a56 1
       ,------o-----------o----X          2.9 Stable
d58 1
a58 1
       |      .    ,------o---------o---> 3.0 Stable
d60 1
a60 1
       |      .    |      .    ,----o---> 3.1 Stable
d63 1
a63 1
 -->2.9Rel----->3.0Rel----->3.1Rel------> Current 
d65 1
a65 1
          Time --->
d70 2
a71 2
The code tree is branched between <i>current</i>, <i>release</i> and
<i>stable</i> every six months -- <i>release</i> becomes a frozen point
d73 4
a76 3
changed, and is what is on the CDs and <a href="../ftp.html">FTP
servers</a>.  <i>Current</i> is where active work is done, and turns
into the next release of OpenBSD.
d79 2
a80 2
<i>-stable</i> (also known as the "Patch branch") is based on
<i>-release</i>, and as one can see, it is a "branch" from the main
d83 1
a83 1
branches.  In the above illustration, the dotted lines going up are bug
d85 2
a86 2
also note that in the above example, the 2.9-stable branch came to an
end with 3.1-release -- old releases are typically supported up to two
d90 2
a91 2
design, very easy to build from release of the same version (i.e., going
from 3.1-release to 3.1-stable).
d94 1
a94 1
Typically, what goes into <i>-stable</i> is fixes found on the
d96 2
a97 2
not merit an errata entry.  Usually, the operation of the <i>-stable</i>
branch and the <i>release</i> it is based on are unchanged, if the
d99 3
a101 2
change, it probably won't go into <i>-stable</i>, New device support
will not be added to <i>-stable</i>.
d104 2
a105 1
<i>-current</i> is a moving target.  It changes almost minute by minute,
d110 3
a112 3
have it fail to compile, whereas five minutes later, it may run just
fine.  If you are not prepared to deal with this, stay away from
<i>-current</i>.
d128 3
a130 2
edge and run <i>-current</i>, most common is when the user has a device
which is not supported by <i>-release</i> (and thus, not <i>stable</i>),
d164 1
a164 1
utilities and files) and <a href="../ports.html"><tt>ports</tt></a> trees
d167 4
a170 4
<tt>ports</tt> on a month old system, or rebuild a kernel from -current
source and expect it to work with a <i>-release</i> userland.  And yes,
this does mean if a new program is added to <tt>ports</tt> today that
you want to run on your system, you do need to update to use it.  Sorry,
d174 2
a175 1
One should also understand that when upgrading by source, the update
d177 6
a182 5
and from <i>-stable</i> to <i>-current</i>.  You can not run post 3.1
<i>-current</i> and decide you are living too dangerously, and step back
to 3.1-stable, and expect support or assistance from the development
team.  You are on your own if you choose any path other than the
supported option of reloading your system from scratch.
d792 1
a792 1
<small>$OpenBSD: faq5.html,v 1.69 2002/08/07 23:35:32 nick Exp $</small>
@


1.69
log
@
Start of a major rework of FAQ 5, turning it from being about building
just a custom kernel to being about rebuilding the entire system from
source.  ok kjell@@

I know I'm going to get a lot of comments about the spelling of
"flavor" vs. "flavour".  Personally, I would not mind having
British/Canadian spellings in the FAQ at all, but here's the problem:
If I use the British/Canadian spelling, in a little while, I'm going to
be sent a diff with all kinds of good wording/spelling fixes by someone,
AND "flavour" changed to "flavor".  Now, I'll either have to commit it,
reject it, or manually extract the offending 10%.  I'll be lazy, and just
commit it.  Then, I'll get notes from a bunch of people pointing out that
"flavour" *is* a valid spelling.

So, sorry.  It goes in as "flavor" with no intended offense.
@
text
@d81 1
a81 1
<i>-current</i>, they are "back ported" into the <i>i-stable</i>
d132 24
d786 1
a786 1
<small>$OpenBSD: faq5.html,v 1.68 2002/07/22 00:41:22 nick Exp $</small>
@


1.68
log
@
COMPAT_43 more accurate.  Thanks, Fransoa Holop <fred@@francis.unitra.sk>
@
text
@d4 1
a4 1
<title>5.0 - Kernel configuration</title>
d19 1
a19 1
<h2><font color="#e00000">5.0 - Kernel configuration</font></h2>
d25 6
a30 5
<li><a href= "#Why">5.1 - Why do I need a custom kernel?</a>
<li><a href= "#Options">5.2 - Kernel configuration Options</a>
<li><a href= "#Building">5.3 - Building your own kernel</a>
<li><a href= "#BootConfig">5.4 - Boot-time configuration</a>
<li><a href= "#VerboseBoot">5.5 - Getting more verbose output during
d32 1
a32 1
<li><a href= "#config">5.6 - Using config(8) to change your kernel
d38 121
d162 1
a162 1
<h2>5.1 - Why would I want to create my own custom kernel?</h2>
d171 3
a173 3
  <li>Remove default options or add options which may not have been enabled
      by default
  <li>Enable experimental options
d184 4
a187 1
GENERIC kernel before sending in a bug report.
d192 1
a192 1
<h2>5.2 - Kernel Configuration Options</h2>
d198 1
a198 1
unneeded devices. There are multitudes of options that allow you to
d210 3
a212 2
combination of the options in /usr/src/sys/arch/&lt;your arch&gt;/conf/GENERIC
and /usr/src/sys/conf/GENERIC. 
d232 2
a233 1
and see what you want. There ARE options in there that are NEEDED.
d464 1
a464 1
<h2>5.3 - Building your own kernel</h2>
d487 2
a488 2
kernel. This is located at <i>/usr/src/sys/arch/${arch}/conf/GENERIC</i>,
where ${arch} is your architecture. There are other sample configurations
d526 1
a526 1
# <strong>cd /sys/arch/$ARCH/conf</strong><br>
d569 1
a569 1
<h2>5.4 - Boot Time Configuration </h2>
d623 1
a623 1
<h2>5.5 - Getting more verbose output during boot</h2>
d643 1
a643 1
<h2>5.6 - Using config(8) to change your kernel</h2>
d762 1
a762 1
<small>$OpenBSD: faq5.html,v 1.67 2002/07/21 23:15:31 nick Exp $</small>
@


1.67
log
@
Option XSERVER is obsolete since removal of pccons.  Spotted by
Fransola Holop <fred@@francis.unitra.sk>, thanks!
@
text
@d147 2
a148 2
  - Compatibility with 4.3BSD. Use of this is certainly discouraged, but
  it is needed for our Navigator port
d635 1
a635 1
<small>$OpenBSD: faq5.html,v 1.66 2002/07/12 02:51:35 nick Exp $</small>
@


1.66
log
@
Typos, grammar, wording fixes.
From David Krause <openbsd@@davidkrause.com>, thanks!
@
text
@a251 2
<li>XSERVER - Support for the X server console driver. Needed for
  X.
d635 1
a635 1
<small>$OpenBSD: faq5.html,v 1.65 2002/07/02 00:30:16 nick Exp $</small>
@


1.65
log
@
& -> &amp; (and occassionally, "and")  > -> &gt;   < -> &lt;
work submitted by Sam Smith <S@@mSmith.net>, many thanks!
@
text
@d56 1
a56 1
under most circumstances you will NOT need to compile your own kernel.
d637 1
a637 1
<small>$OpenBSD: faq5.html,v 1.64 2002/06/28 19:50:12 jufi Exp $</small>
@


1.64
log
@
LFS is gone.
@
text
@d168 1
a168 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&amp;sektion=1&">KGDB</a>
d637 1
a637 1
<small>$OpenBSD: faq5.html,v 1.63 2002/06/17 12:49:59 miod Exp $</small>
@


1.63
log
@Provide links to kernel configuration files for all arches currently found
on our cd sets, rather than a potpourri of dead or very obsolete ones.
ok nick@@
@
text
@a221 1
<li>LFS - Log Structured Filesystem.
d637 1
a637 1
<small>$OpenBSD: faq5.html,v 1.62 2002/06/08 12:05:26 nick Exp $</small>
@


1.62
log
@
Remove some accidently added '>' characters (oops), changed displayed '>'
characters to '&gt;'.  Pointed out by Horacio@@, thanks!
@
text
@d92 1
a92 2
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/mac68k/conf/">mac68k Kernel Configuration files</a>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/pmax/conf/">pmax Kernel Configuration Files</a>
d94 2
d638 1
a638 1
<small>$OpenBSD: faq5.html,v 1.61 2002/06/07 23:05:13 nick Exp $</small>
@


1.61
log
@
More HTML cleanup of FAQ5.  No new content, but this time, there
are some wording changes and appearance changes:
<ul> used for indentation replaced with more proper <blockquote>
Wrapping of long text output lines to 80 chars to match screen output
(and make a lot of other things easier, too)
This page now passes validator.w3.org.
@
text
@d372 1
a372 1
# <strong>vi SOMEFILE</strong>>   <i>(to make the changes you want)</i>
d429 1
a429 1
boot> <strong>bsd.old</strong>
d466 1
a466 1
boot> <strong>boot wd0a:/bsd -c</strong>
d478 1
a478 1
<li><tt>change> <strong>devno | device </strong></tt> - Modify one or more devices
d503 2
a504 2
to the &quot;boot>&quot; prompt, boot with boot -c. This will bring you
into the UKC>, then do:
d507 1
a507 1
UKC> <strong>verbose</strong>
d509 1
a509 1
UKC> <strong>quit</strong>
d546 1
a546 1
ukc> ?
d565 1
a565 1
ukc> <strong>list</strong>
d591 1
a591 1
ukc> <strong>disable ep</strong>
d600 1
a600 1
ukc> <strong>quit</strong>
d622 1
a622 1
ukc> <strong>quit</strong>
d637 1
a637 1
<small>$OpenBSD: faq5.html,v 1.60 2002/06/03 21:42:15 nick Exp $</small>
@


1.60
log
@
First steps to a "standard" HTML format:
* removed </p> amd </li> tags (not needed)
* removed unneeded <p> tags
* Shortened text lines to 72 chars (or as close as could be done)
* Shortened man page links (just query= and sektion= unless more needed)
  and changed "&" to "&amp;".
* Inserted a few tags to start towards validation.
No wording changes were made in this diff, nor were there any changes
which should make a significant difference in presentation.  (Ok, I
confess I added a few periods to balance out a few list items...).
@
text
@d15 1
d353 1
a353 1
<ul>
d358 1
a358 1
</ul>
d368 1
a368 1
<ul> 
d372 1
a372 1
# <strong>vi SOMEFILE</strong> (to make the changes you want)
d374 7
a380 17
<ul>
# <strong>make depend</strong> 
<ul>
(The above step is necessary when you have made any changes [including
updates and patches] to your kernel source tree.  This step can be
ignored if you follow the next step.)
</ul>
<font size="+1">
<b><i>OR</i></b>
</font>
# <strong>make clean</strong>
<ul>
(The above step is necessary if you make changes to your kernel configuration
options, and is also recommended if you make major updates to your source tree.
You can ignore this step otherwise, and just use 'make depend'.)
</ul>
</ul>
d383 12
a394 1
</ul>
d399 10
a408 9
<ul>
<pre>
# <strong>cd /sys/arch/$ARCH/conf</strong>
# <strong>vi SOMEFILE</strong> (to make any changes you want)
# <strong>config SOMEFILE</strong> (read more about it here : <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=config&amp;sektion=8">config(8)</a>)
# <strong>cd ../compile/SOMEFILE</strong>
# <strong>make</strong> 
</pre>
</ul>
d418 1
a418 1
<ul>
d423 1
a423 1
</ul>
d427 1
a427 1
<ul>
d431 1
a431 1
</ul>
d465 1
a465 1
<ul><pre>
d467 1
a467 1
</pre></ul>
d476 12
a487 29
<CODE>
<p>
add <strong>device</strong> - Add a device through copying another

<p>
change <strong>devno | device </strong> - Modify one or more devices

<p>
disable <strong>devno | device </strong> - Disable one or more devices 

<p>
enable <strong>devno | device </strong> - Enable one or more devices 

<p>
find <strong>devno | device </strong> - Find one or more devices

<p>
help - Short summary of these commands

<p>
list - List ALL known devices

<p>
exit/quit - Continue Booting

<p>
show <strong>[attr [val]]</strong> - Show devices with an attribute and
optional with a specified value
</CODE>
d506 1
a506 1
<ul><pre>
d510 1
a510 1
</pre></ul>
d540 1
a540 1
<ul><pre>
d566 2
a567 1
  0 audio* at sb0|sb*|gus0|pas0|sp0|ess*|wss0|wss*|ym*|eap*|eso*|sv*|neo*|cmpci*|clcs*|clct*|auich*|autri*|auvia*|fms*|uaudio*|maestro*|esa*|yds*|emu* flags 0x0
d569 21
a589 7
  2 nsphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
  3 nsphyter* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
  4 qsphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
  5 inphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
  6 iophy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
  7 eephy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
  8 exphy* at aue*|xe*|ef*|gx*|stge*|bge*|nge*|sk*|ste*|sis*|sf*|wb*|tx*|tl*|vr*|ne0|ne1|ne2|ne*|ne*|ne*|dc*|dc*|rl*|fxp*|fxp*|xl*|xl*|ep0|ep0|ep0|ep*|ep*|ep*|ep*|ep* phy -1 flags 0x0
d602 1
a602 1
</pre></ul>
d614 1
a614 1
<ul><pre>
d623 1
a623 1
</pre></ul>
d637 1
a637 1
<small>$OpenBSD: faq5.html,v 1.59 2002/05/20 01:03:28 nick Exp $</small>
@


1.59
log
@
Updates for OpenBSD 3.1.  ok Miod@@
@
text
@d1 1
d11 1
d18 2
a19 2
<h2><font color=#e00000>5.0 - Kernel configuration</font><hr></h2>
</p>
d22 10
a31 7
<ul><h3>Table of Contents</h3>
<li><a href= "#Why">5.1 - Why do I need a custom kernel?</a></li>
<li><a href= "#Options">5.2 - Kernel configuration Options</a></li>
<li><a href= "#Building">5.3 - Building your own kernel</a></li>
<li><a href= "#BootConfig">5.4 - Boot-time configuration</a></li>
<li><a href= "#VerboseBoot">5.5 - Getting more verbose output during boot</a></li>
<li><a href= "#config">5.6 - Using config(8) to change your kernel binary</a>
a32 1
</p>
a39 1
</p>
d46 5
a50 5
    <li>Your computer has a very small amount of RAM and you want to preserve 
        as much as possible by removing device drivers you don't use
    <li>Remove default options or add options which may not have been enabled
        by default
    <li>Enable experimental options
d53 1
a53 1
</p>
d55 7
a61 8
Under most circumstances you will NOT need to compile your own kernel. The
GENERIC kernel will usually be all that you need.  In fact, there are several reasons
why you do not want to create your own kernel.  The main reason is that it is
very easy to make
changes to the kernel configuration which look logical, but do not work.
This is your danger sign.  If something does not appear to work properly,
please try the GENERIC kernel before sending in a bug report.  
</p>
a66 1
</p>
d74 2
a75 1
are most commonly used. Check the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">options(4)</a>
a77 1
</p>
d79 1
a79 1
<P>
a85 1
</P>
d89 6
a94 6
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/alpha/conf/">Alpha Kernel Conf Files </a></li>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/i386/conf/">i386 Kernel Configuration files</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/mac68k/conf/">mac68k Kernel Configuration files</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/pmax/conf/">pmax Kernel Configuration Files</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/sparc/conf/">sparc Kernel Configuration Files</a></li>
<li><a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/arch/">Other Arch's</a></li>
a95 1
</p>
d102 2
a103 1
Config be sure to look through <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/conf/GENERIC">/sys/conf/GENERIC</a> 
a104 1
</p>
d107 2
a108 1
All of the options listed below should be placed in your kernel configuration file in the format of:<br>
d112 71
a182 43
Options in the OpenBSD kernel are translated into compiler preprocessor options, therefore an option like DEBUG would have the
source compiled with option -DDEBUG. Which is equivalent to doing a #define DEBUG throughout the kernel.
</p>

<p>
OpenBSD has a great many compatibility options which allow you to use binaries from other OS's.
Not all are availably on every architecture, so be sure to read the man pages for each option to 
see if your arch is supported.
</p>
<p>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_svr4&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_SVR4(8)</a> - Compatibility with SVR4 binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_bsdos&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_BSDOS(8)</a> - Compatibility with BSD/OS binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_LINUX(8)</a> - Compatibility with Linux binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_sunos&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_SUNOS(8)</a> - Compatibility with SunOS binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ultrix&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_ULTRIX(8)</a> - Compatibility with Ultrix binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_freebsd&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_FREEBSD(8)</a> - Compatibility with FreeBSD binaries.</li>
<li>COMPAT_HPUX - Compatibility with HP-UX binaries. Only available on some m68k arch's.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ibcs2&sektion=8&apropos=0&manpath=OpenBSD+Current">COMPAT_IBCS2(8)</a> - Compatibility to run ibcs2 binaries.</li>
<li>COMPAT_OSF1 - Run Digital Unix binaries. Available only on Alpha platform.</li>
<li>COMPAT_43 - Compatibility with 4.3BSD. Use of this is certainly discouraged, But it is needed for our Navigator port</li>
<li>COMPAT_11 - Compatibility with NetBSD 1.1</li>
<li>COMPAT_NOMID - Compatibility with a.out executables that lack a machine id.
</ul>
</p>

<p>
It is always helpful to be able to debug problems with the kernel. But many choose not to put these options in their kernel
because these options add considerable size to the kernel. They are however extremely helpful in a case where a bug might be
present. This well help the developers discover the source of your problems much quicker. Here is a list of popular
debugging options that can be added to your kernel.
</p>

<p>
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&sektion=4&format=html">DDB</a> - This compiles in the in-kernel debugger. This isn't available on all platforms. So be sure to read before adding it.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&sektion=1&format=html">KGDB</a> - Compiles a remote kernel debugger using gdb's `remote target` feature.</li>
<li>makeoptions  DEBUG="-g" - Makes bsd.gdb along with bsd. This is useful for debugging crash dumps with gdb. </li>
<li>DEBUG - Used to put various debugging options in the kernel, where the source has defined them.</li>
<li>KTRACE - Adds hooks for the system call tracing facility. Which allows users to use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktrace&sektion=1&format=html">ktrace(1)</a>.</li>
<li>DIAGNOSTIC - Adds code to the kernel that does internal consistency checks.</li>
<li>GPROF - adds code to the kernel for kernel profiling with <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kgmon&sektion=8&format=html">kgmon(8)</a>.</li>
<li>makeoptions PROF="-pg" - The -pg flag causes the kernel to be compiled with support for profiling. Option GPROF is required to use this option.</li>
a183 1
</p>
d188 50
a237 22
<li>FFS - Berkeley Fast Filesystem <strong>NOTE:</strong> This option is required</li>
<li>EXT2FS - Second Extended File System, This is needed for those of you who want to read Linux partitions.</li>
<li>MFS - Memory File System that stores files in swappable memory.</li>
<li>NFS - Network File System, This is needed if you will be using NFS.</li>
<li>CD9660 - This is iso9660 + rockridge filesystem. This is required to read from CDs</li>
<li>MSDOSFS - Needed to read MS-DOS FAT filesystems. Also has support for Windows 95 long name + mixed case extensions.</li>
<li>FDESC - Includes code for a file system which can be mounted on /dev/fd</li>
<li>KERNFS - Includes code that permits the mounting of a special file system (normally mounted on /kern) in which files representing various kernel variables and parameters may be found.</li>
<li>NULLFS - Code to have a loopback filesystem. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_null&sektion=8&format=html">mount_null(8)</a> has more information</li>
<li>PROCFS - Includes code for a special file system (conventionally mounted on /proc)</li>
<li>PORTAL - Includes the (experimental) portal filesystem.  This permits interesting tricks like opening TCP sockets by opening files in the file system.</li>
<li>UMAPFS - Includes a loopback file system in which user and group ids may be remapped -- this can be useful when mounting alien file systems with different uids and gids than the local system (eg, remote NFS).</li>
<li>UNION - Includes code for the union file system, which permits directories to be mounted on top of each other in such a way that both file systems remain visible. This code isn't quite stable yet.</li>
<li>XFS - Add hooks for using a filesystem that is compatible with the AFS filesystem. Currently used by the Arla/AFS code.  </li>
<li>LFS - Log Structured Filesystem.</li>
<li>FFS_SOFTUPDATES - Allows for the use of softupdates. To read up on softupdates more read the <a href="faq14.html#SoftUpdates">Softupdates FAQ</a> section.
<li>NFSSERVER - Allow for the server-side NFS code to be included in the kernel.</li>
<li>NFSCLIENT - Allow for the client-side NFS code to be included in the kernel.</li>
<li>FIFO - Support for FIFOs.. RECOMMENDED.</li>
<li>NVNODE=integer - Where integer is the size of the cache used by the name-to-inode translation routines, (a.k.a. the namei() cache, though called by many other names in the kernel source).</li>
<li>EXT2FS_SYSTEM_FLAG - This option changes the behavior of the APPEND and IMMUTABLE flags for a file on an EXT2FS filesystem. Read <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a> for more details.</li>
<li>QUOTA - Support for Filesystem Quota's. To read up on using quotas read <a href="faq10.html#Quotas">FAQ 10, Quotas</a></li>
a238 1
</p>
d240 1
a240 1
<p>
d243 29
a271 12
<li>PCIVERBOSE - Make the boot process more verbose for PCI peripherals.</li>
<li>EISAVERBOSE - Make the boot process more verbose for EISA peripherals.</li>
<li>PCMCIAVERBOSE - Make the boot process more verbose for PCMCIA peripherals.</li>
<li>APERTURE - Provide in-kernel support for VGA framebuffer mapping by user processes. Needed to run X.</li>
<li>XSERVER - Support for the X server console driver. Needed for X.</li>
<li>LKM - Support for Loadable Kernel Modules. Not available on all arch's. Read <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lkm&sektion=4&format=html">lkm(4)</a> for more information.</li>
<li>INSECURE - Hardwires the kernel security level to -1. Read <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8&format=html">init(8)</a> for more information on kernel security levels.</li>
<li>RAM_DISK_HOOKS - Allows for machine dependent functions to be called when the ramdisk driver is configured.</li>
<li>RAM_DISK_IS_ROOT - Forces the ramdisk to be root.</li>
<li>CCDNBUF=integer - Set number of component buffers used by CCD(4). Default is 8. For more on CCD read the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&sektion=4&format=html">CCD(4)</a> man page, or the <a href="faq11.html#ccd">Performance Tuning FAQ section.</a></li>
<li>KMEMSTATS - This makes malloc(9), the kernel memory allocator keep statistics on its use. If option DEBUG is used, this option is automatically turned on by config. </li>
<li>BOOT_CONFIG - Adds support of the -c boot option.</li>
a272 1
</p>
a273 1
<p>
d275 2
a276 1
Also check the <a href="faq6.html">Networking FAQ</a> or the <a href="faq11.html#Network">Networking Performance Tuning FAQ</a>.
d278 39
a316 18
<li>GATEWAY - Enables IPFORWARDING and (on most ports) increases the size of NMBCLUSTERS.</li>
<li>NMBCLUSTERS=integer - Controls the size mbuf cluster map. </li>
<li>IPFORWARDING - Enables IP routing behavior.  With this option enabled, the machine will forward IP datagrams between its interfaces that are destined for other machines.</li>
<li>MROUTING - Includes support for IP multicast routers.</li>
<li>INET - Includes support for the TCP/IP protocol stack. This option is REQUIRED</li>
<li>MCLSHIFT=value - This option is the base-2 logarithm of the size of mbuf clusters. Read <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a> for more information on this option.</li>
<li>NS - Include support for the Xerox XNS protocol stack.  See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ns&sektion=4&apropos=0&manpath=OpenBSD+Current">ns(4)</a></li>
<li>ISO,TPIP - Include support for the ubiquitous OSI protocol stack. See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iso&sektion=4&format=html">iso(4)</a> for more information.</li>
<li>EON - Include support for OSI tunneling over IP.</li>
<li>CCITT,LLC,HDLC - Include support for the X.25 protocol stack.</li>
<li>IPX, IPXIP - Include support for Internetwork Packet Exchange protocol commonly in use by Novell NetWare.</li>
<li>NETATALK - Include kernel support for the AppleTalk family of protocols.</li>
<li>TCP_COMPAT_42 - Use of this option is extremely discouraged, so it should not be enabled. TCP bug compatibility with 4.2BSD. In 4.2BSD, TCP sequence numbers were 32-bit signed values.  Modern implementations of TCP use unsigned values.</li>
<li>TCP_NEWRENO - Turns on NewReno fast recovery phase, which allows one lost segment to be recovered per round trip time.</li>
<li>TCP_SACK - Turns on selective acknowledgements.</li>
<li>TCP_FACK - Turns on forward acknowledgements allowing a more precise estimate of outstanding data during the fast recovery phase by using SACK information. This option can be used together with TCP_SACK.</li>
<li>PPP_FILTER - This option turns on <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pcap&sektion=3&format=html">pcap(3)</a> based filtering for ppp connections.</li>
<li>PPP_BSDCOMP - PPP BSD compression.</li>
d318 6
a323 2
<li>IPSEC - This option enables IP security protocol support. See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4&format=html">ipsec(4)</a> for more details. This now implies option KEY, which gives support for PFKEYv2.</li> 
<li>ENCDEBUG - This option enables debugging information to be conditionally logged in case IPSEC encounters errors.</li>
a324 1
</p>
a325 1
<p>
d328 4
a331 2
<li>SCSITERSE - Terser SCSI error messages.  This omits the table for decoding ASC/ASCQ info, saving about 8 bytes or so.</li>
<li>SCSIDEBUG - Prints extra debugging info for the SCSI subsystem to the console.</li>
a332 1
</p>
a338 1
</p>
d342 1
a342 1
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&apropos=0&sektion=8&format=html">
a343 1
</p>
a350 1
</p>
a365 1
</p>
d376 3
a378 3
(The above step is necessary when you have made any changes [including updates
and patches] to your kernel source tree.  This step can be ignored
if you follow the next step.)
a395 1
</p>
d401 1
a401 1
# <strong>config SOMEFILE</strong> (read more about it here : <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=8&format=html">config(8)</a>)
a410 1
</p>
a413 1
</p>
a421 1
<p>
a422 1
</p>
a429 1
<p>
a430 1
</p>
d433 4
a436 3
Sometimes when you build a new kernel you will be required to install new bootblocks. To do so, read <a href="faq14.html#InstBoot">
FAQ 14, Installing Bootblocks</a>. Which will give you an overview on using OpenBSD's Bootloader
</p>
a441 1
</p>
a452 1
</p>
d456 1
a456 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_config&apropos=0&sektion=8&format=html">boot_config(8)</a>
</p>
d458 1
a465 1
<p>
a468 1
</p>
a471 1
</p>
a475 1
</p>
a478 1
</p>
a481 1
</p>
a484 1
</p>
a487 1
</p>
a490 1
</p>
a493 1
</p>
a496 1
</p>
d499 3
a501 2
show <strong>[attr [val]]</strong> - Show devices with an attribute and optional with a specified value
</p></CODE>
d505 3
a507 4
booting. After doing so you should correct your Kernel configuration and Compile
a new kernel. Refer to <a href="faq5.html#Building">Building your own
kernel</a> for help.
</p>
a512 8
</p>

<p>
Getting more verbose output can be very helpful when trying to debug problems when booting.
If you have a problem wherein your boot floppy won't boot and need to get more information, 
simply reboot. When you get to the &quot;boot>&quot; prompt, boot with boot -c. This will bring you into the
UKC>, then do:
</p>
d514 5
a527 1
</p>
a532 1
</p>
d535 7
a541 8
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a>
can be extremely helpful and save wasted time compiling your
kernel. The <b>-e</b> flag allows you to enter the UKC or User Kernel
Config on a running system. These changes will then take place on your
next reboot. The <b>-u</b> flag tests to see if any changes were made to
the running kernel during boot, meaning you used <b>boot -c</b> to enter
the UKC while booting your system.
</p>
d545 7
a551 7
kernel. For safety's sake you must use the
<b>-o</b> option which writes the changes out to the file specified. For
example : <strong>config -e -o bsd.new /bsd</strong> will write the
changes to bsd.new. The example doesn't use the <b>-o</b> option,
therefore changes are just ignored, and not written back to the kernel
binary. For more information pertaining to error and warning messages read
the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a>
a552 1
</p>
a611 1
</p>
a630 1
</p>
d633 1
a633 1
<a href= "index.html"><img height= "24" width= "24" src= "../images/back.gif" border= "0" alt= "[back]"></a> 
d636 1
a636 1
<small>$OpenBSD: faq5.html,v 1.58 2002/04/24 02:51:24 nick Exp $</small>
@


1.58
log
@
Source is now on CD3 in src.tar.gz, pointed out by <evilted_@@hotmail.com>
ok ericj@@
@
text
@d468 3
a470 3
With 2.6 came the introduction of the <b>-e</b> and <b>-u</b> options with
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&sektion=8&format=html">config(8)</a>.
These options can be extremely helpful and save wasted time compiling your
d474 1
a474 1
the running kernel during boot. Meaning you used <b>boot -c</b> to enter
d479 1
a479 1
The following example shows the disabling of the ep* devices from the
d492 2
a493 2
OpenBSD 2.6 (GENERIC) #1: Tue Nov 16 21:25:10 EST 1999
    ericj@@oshibana:/usr/src/sys/arch/i386/compile/GENERIC
d496 1
a496 1
ukc> <strong>?</strong>
d498 6
a503 6
        add     dev                     Add a device
        base    8|10|16                 Base on large numbers
        change  devno|dev               Change device
        disable attr val|devno|dev      Disable device
        enable  attr val|devno|dev      Enable device
        find    devno|dev               Find device
d505 2
a506 2
        lines   count                   # of lines per page
        show    [attr [val]]            Show attribute
d509 6
d516 10
a525 20
  0 audio* at sb0|sb*|gus0|pas0|sp0|ess*|wss0|wss*|ym*|eap*|eso*|sv*
  1 midi* at sb0|sb*|opl*|opl*|opl*|ym*|mpu*
  2 nsphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  3 inphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  4 iophy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  5 exphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  6 rlphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  7 icsphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  8 sqphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
  9 ukphy* at xe*|ef*|sf*|xl*|tl*|rl*|fxp* phy -1
 10 scsibus* at bt0|bt1|bt2|aha0|aha1|aha*|ahb*|ahc0|ahc*|ahc*|isp*|aic0|aic*|ncr*|adv*|adw*|sea0|uha0|uha1|uha*|wds0|atapiscsi*
 11 cd* at scsibus* target -1 lun -1
 12 ch* at scsibus* target -1 lun -1
 13 sd* at scsibus* target -1 lun -1
 14 st* at scsibus* target -1 lun -1
 15 ss* at scsibus* target -1 lun -1
 16 uk* at scsibus* target -1 lun -1
 17 atapiscsi* at wdc0|wdc1|wdc*|wdc*|pciide* channel -1
--- more ---   
[snip]
d527 8
a534 8
 31 ep0 disabled
 32 ep* disabled
 33 ep* disabled
 87 ep0 disabled
 88 ep0 disabled
 89 ep* disabled
 90 ep* disabled
136 ep* disabled
d540 1
a540 1
In the above example, all ep* devices are removed from the kernel and will
d552 2
a553 2
OpenBSD 2.6 (GENERIC) #1: Tue Nov 16 21:25:10 EST 1999
    ericj@@oshibana:/usr/src/sys/arch/i386/compile/GENERIC
d555 2
a556 1
151 wi* disabled
d574 1
a574 1
<small>$OpenBSD: faq5.html,v 1.57 2002/03/20 03:54:33 nick Exp $</small>
@


1.57
log
@
Typos, grammar improvements, submitted by David Krause
<openbsd@@davidkrause.com>, including correction of loopback subnet from
rootix@@yahoo.fr.  Some fixes had also been submitted by Saad
Kadhi <bsdguy@@docisland.org>.
@
text
@d255 4
a258 3
code available. You just need the kernel source to be able to compile the
kernel, and this source code is available on the cd. Here is how to copy
the sources from the cd. This example assumes that CD1 is mounted on /mnt.
d263 2
a264 3
# <strong>mkdir -p /usr/src/sys</strong>
# <strong>cd /mnt/sys</strong>
# <strong>tar cf - . | ( cd /usr/src/sys; tar xvf - )</strong>
d577 1
a577 1
<small>$OpenBSD: faq5.html,v 1.56 2002/02/20 03:09:02 nick Exp $</small>
@


1.56
log
@
Oops.  Still had IPF stuff in kernel config options.
Thanks, David Krause <openbsd@@davidkrause.com>
ok ericj@@
@
text
@d163 1
a163 1
<li>MFS - Memory File System that stores files in swapable memory.</li>
d168 1
a168 1
<li>KERNFS - Includes code which permits the mounting of a special file system (normally mounted on /kern) in which files representing various kernel variables and parameters may be found.</li>
d577 1
a577 1
<small>$OpenBSD: faq5.html,v 1.55 2002/01/25 03:44:01 nick Exp $</small>
@


1.55
log
@
Link Cleanup:  Retargeting links, test all links,
man page references, update and repair as needed.
ok ericj@@
@
text
@a223 3
<li>IPFILTER - This option enables the IP filtering on the packet level using the ipfilter package.</li>
<li>IPFILTER_LOG - This option, in conjunction with IPFILTER, enables logging of IP packets using ip-filter.</li>
<li>IPFILTER_DEFAULT_BLOCK - This option sets the default policy of ip-filter. If it is set, ip-filter will block packets by default.</li>
d577 1
a577 1
<small>$OpenBSD: faq5.html,v 1.54 2002/01/21 20:28:25 nick Exp $</small>
@


1.54
log
@
Update copyright notice to 2002.  ok ericj@@
@
text
@d176 1
a176 1
<li>FFS_SOFTUPDATES - Allows for the use of softupdates. To read up on softupdates more read the <a href="faq14.html#14.5">Softupdates FAQ</a> section.
d182 1
a182 1
<li>QUOTA - Support for Filesystem Quota's. To read up on using quotas read <a href="faq10.html#10.10">FAQ 10</a></li>
d198 1
a198 1
<li>CCDNBUF=integer - Set number of component buffers used by CCD(4). Default is 8. For more on CCD read the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&sektion=4&format=html">CCD(4)</a> man page, or the <a href="faq11.html#11.2">Performance Tuning FAQ section.</a></li>
d206 1
a206 1
Also check the <a href="faq6.html">Networking FAQ</a> or the <a href="faq11.html#11.1">Networking Performance Tuning FAQ</a>.
d214 1
a214 1
<li>NS - Include support for the Xerox XNS protocol stack.  See <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=ns&sektion=4&apropos=0&manpath=OpenBSD+Current">ns(4)</a></li>
d353 2
a354 2
Sometimes when you build a new kernel you will be required to install new bootblocks. To do so, read <a href="faq14.html#14.8">
faq14.8 on OpenBSD's Bootloader</a>. Which will give you an overview on using OpenBSD's Bootloader
d437 1
a437 1
a new kernel. Refer to <a href="faq5.html#5.3">Building your own
d580 1
a580 1
<small>$OpenBSD: faq5.html,v 1.53 2002/01/13 00:00:32 ericj Exp $</small>
@


1.53
log
@
change followed link color, so it is more visible in all netscape,
IE, konqueror

from Nick Holland <nick@@holland-consulting.net>
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998-2001 by OpenBSD.">
d580 1
a580 1
<small>$OpenBSD: faq5.html,v 1.52 2002/01/12 01:39:30 ericj Exp $</small>
@


1.52
log
@
re-target the faq.
Change internal links from #10.XX -> #somethingmeaningfull
This will probobly break some external links to us, but will allow
us greater mobility in moving internal things around without breaking
links in the future.

work by Nick Holland <nick@@holland-consulting.net>
@
text
@d12 1
a12 1
<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">
d580 1
a580 1
<small>$OpenBSD: faq5.html,v 1.51 2001/09/03 15:37:01 mickey Exp $</small>
@


1.51
log
@MACHINE_NONCONTIG was never a config(8) option and now is dead anyway
@
text
@d21 6
a26 6
<li><a href= "faq5.html#5.1">5.1 - Why do I need a custom kernel?</a></li>
<li><a href= "faq5.html#5.2">5.2 - Kernel configuration Options</a></li>
<li><a href= "faq5.html#5.3">5.3 - Building your own kernel</a></li>
<li><a href= "faq5.html#5.4">5.4 - Boot-time configuration</a></li>
<li><a href= "faq5.html#5.5">5.5 - Getting more verbose output during boot</a></li>
<li><a href= "faq5.html#5.6">5.6 - Using config(8) to change your kernel binary</a>
d33 1
d62 1
d244 3
a246 1
<p> <a name= "5.3"></a>
d358 1
d441 2
d445 1
a445 1

d465 2
d469 1
a469 1

d580 1
a580 1
<small>$OpenBSD: faq5.html,v 1.50 2001/08/25 09:31:33 jufi Exp $</small>
@


1.50
log
@
copyright extended to 2001
@
text
@a193 1
<li>MACHINE_NONCONTIG - Changes part of the VM/pmap interface, to allow for non-contiguous memory.</li>
d571 1
a571 1
<small>$OpenBSD: faq5.html,v 1.49 2001/08/08 21:06:32 jsyn Exp $</small>
@


1.49
log
@giant spelling/grammar clean-up; ok millert@@
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998-2000 by OpenBSD.">
d572 1
a572 1
<small>$OpenBSD: faq5.html,v 1.48 2001/05/05 02:45:13 ericj Exp $</small>
@


1.48
log
@no more pcvt
@
text
@d163 1
a163 1
<li>CD9660 - This is iso9660 + rockridge filesystem. This is required to read from cd's</li>
d177 1
a177 1
<li>FIFO - Support for FIFO's.. RECOMMENDED.</li>
d572 1
a572 1
<small>$OpenBSD: faq5.html,v 1.47 2001/03/26 17:14:10 todd Exp $</small>
@


1.47
log
@spelling
@
text
@a230 16
<li>TCP_SIGNATURE - TCP MD5 Signatures, for BGP routing sessions</li>
</ul>
</p>

<p>
<strong>PCVT Options</strong> (<i>only valid on i386 architecture</i>)
<ul>
<li>PCVT_NSCREENS=integer - Number of pcvt screens. Defaults to 8.</li>
<li>PCVT_VT220KEYB - If activated, a keyboard layout resembling a DEC VT200 (TM) is generated.</li>
<li>PCVT_SCREENSAVER - Enables the builtin screensaver feature. Defaults to on.</li>
<li>PCVT_PRETTYSCRNS - If enabled, a blinking-star screensaver is used. Default is off.</li>
<li>PCVT_CTRL_ALT_DEL - If enabled, the key combination &lt;Ctrl&gt; &lt;Alt&gt; &lt;Del&gt; invokes a CPU reset. Default is off.</li>
<li>PCVT_USEKBDSEC - Do NOT override a security lock for the keyboard. Default is on.</li>
<li>PCVT_24LINESDEF - If enabled, the 25-line mode (VT emulation with 25 lines, and HP emulation with 28 lines) default to 24 lines only to provide a better compatibility to the original DEC VT220 (TM).</li>
<li>PCVT_EMU_MOUSE - Emulate a three-button mouse via the keypad. Useful for notebooks when running XFree86. Defaults to off</li>
<li>PCVT_META_ESC - If enabled, a sequence composed of &lt;esc&gt;, followed by the normal key code is emitted if a key is pressed with the &lt;Alt&gt; key modifier. If disabled, then normal key code with the value 0x80 added is sent. Defaults to off.</li>
d572 1
a572 1
<small>$OpenBSD: faq5.html,v 1.46 2001/01/27 22:19:47 ericj Exp $</small>
@


1.46
log
@
some html cleanup; from mpech@@prosoft.org.lv
@
text
@d116 1
a116 1
Not all are availibly on every architechture, so be sure to read the man pages for each option to 
d290 1
a290 1
source tree. The second on a writeable source tree.
d321 1
a321 1
To compile a kernel inside a writeable source tree do the following:
d588 1
a588 1
<small>$OpenBSD: faq5.html,v 1.45 2000/09/17 19:56:18 ericj Exp $</small>
@


1.45
log
@corrections from Grigoriy Orlov <gluk@@ptci.ru>
@
text
@d409 1
d411 1
a411 1
<CODE>add <strong>device</strong> - Add a device through copying another
d469 1
a469 1
</ul></pre>
d552 1
a552 1
</ul></pre>
d573 1
a573 1
</ul></pre>
d588 1
a588 2
<small>$OpenBSD: faq5.html,v 1.44 2000/05/14 21:24:25 chris Exp $</small>
</p>
@


1.44
log
@Cleanup
@
text
@d99 1
a99 1
This means that it <i>is</i> referencing yet another configuration file. This
d147 1
a147 1
<li>makeoptions  DEBUG="-g" - Makes bsd.gdb along with bsd. This is useful for debugging crash dumps with gdb. NOTE: This option also turns on <strong>option DEBUG</strong></li>
d198 1
a198 1
<li>KMEMSTATS - This makes malloc(9), the kernel memory allocator keep statistics on its use. If option DEBUG is used, this option is automatically turned off by config. </li>
d244 1
a244 1
<li>PCVT_24LINESDEF - If enabled, the 25-line modi (VT emulation with 25 lines, and HP emulation with 28 lines) default to 24 lines only to provide a better compatibility to the original DEV VT220 (TM).</li>
d587 1
a587 1
<small>$OpenBSD: faq5.html,v 1.43 2000/03/10 02:47:22 wvdputte Exp $</small>
@


1.43
log
@Typo: Bootloader info in faq14, not faq15
@
text
@d46 1
a46 1
    <li>Enable experimental options (such as TCP_SACK, TCP_FACK, FFS_SOFTUPDATES)
d587 1
a587 1
<small>$OpenBSD: faq5.html,v 1.42 2000/02/24 16:08:12 chris Exp $</small>
@


1.42
log
@No lies
@
text
@d9 1
a9 1
<meta name= "copyright"     content= "This document copyright 1998-1999 by OpenBSD.">
d367 1
a367 1
faq15.8 on OpenBSD's Bootloader</a>. Which will give you an overview on using OpenBSD's Bootloader
d587 1
a587 1
<small>$OpenBSD: faq5.html,v 1.41 2000/02/12 21:35:42 aaron Exp $</small>
@


1.41
log
@permenant -> permanent
@
text
@d161 1
a161 1
<li>MFS - Memory File System that stores files in swapable memory. This is not quite stable as of now.</li>
d587 1
a587 1
<small>$OpenBSD: faq5.html,v 1.40 2000/01/05 07:36:00 chris Exp $</small>
@


1.40
log
@this is better now
@
text
@d557 1
a557 1
permenantly. To do this you need to use the <b>-u</b> option.
d587 1
a587 1
<small>$OpenBSD: faq5.html,v 1.39 2000/01/05 07:26:36 chris Exp $</small>
@


1.39
log
@more specific
@
text
@d299 1
d304 1
a304 1
if you instead follow the next step.)
d306 4
a309 1
# <strong>rm -f .depend && make clean</strong>
d312 3
a314 1
options, and is also recommended if you make major updates to your source tree.)
d587 1
a587 1
<small>$OpenBSD: faq5.html,v 1.38 2000/01/05 07:21:50 chris Exp $</small>
@


1.38
log
@Fix half of PR 1047, add make clean/make depend information for kernel
complation.
@
text
@d301 2
a302 2
(The above step is necessary when you have made changes, updates, or have
applied patches to your kernel source tree.  This step can be ignored
d305 1
a305 1
# <strong>make clean</strong>
d308 1
a308 1
options, and is also recommended if you make major updates.)
d581 1
a581 1
<small>$OpenBSD: faq5.html,v 1.37 1999/12/11 00:44:13 ericj Exp $</small>
@


1.37
log
@config -e -u
@
text
@d299 12
a310 1
# <strong>make</strong> 
d581 1
a581 1
<small>$OpenBSD: faq5.html,v 1.36 1999/12/05 21:54:32 chris Exp $</small>
@


1.36
log
@Missed it the first time
@
text
@d26 1
d457 100
d570 1
a570 1
<small>$OpenBSD: faq5.html,v 1.35 1999/12/05 21:52:36 chris Exp $</small>
@


1.35
log
@Fix title
@
text
@d3 1
a3 1
<title>5.0 - Kernel configuration and Disk Setup</title>
d277 3
a279 3
#<strong>mkdir -p /usr/src/sys</strong>
#<strong>cd /mnt/sys</strong>
#<strong>tar cf - . | ( cd /usr/src/sys; tar xvf - )</strong>
d294 5
a298 5
#<strong>cd /somewhere</strong>
#<strong>cp /usr/src/sys/arch/$ARCH/conf/SOMEFILE .</strong>
#<strong>vi SOMEFILE</strong> (to make the changes you want)
#<strong>config -s /usr/src/sys -b . SOMEFILE</strong>
#<strong>make</strong> 
d308 5
a312 5
#<strong>cd /sys/arch/$ARCH/conf</strong>
#<strong>vi SOMEFILE</strong> (to make any changes you want)
#<strong>config SOMEFILE</strong> (read more about it here : <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=8&format=html">config(8)</a>)
#<strong>cd ../compile/SOMEFILE</strong>
#<strong>make</strong> 
d328 2
a329 2
#<strong>cp /bsd /bsd.old</strong>
#<strong>cp /sys/arch/$ARCH/compile/SOMEFILE/bsd /bsd</strong>
d378 1
a378 1
Boot> <strong>boot wd0a:/bsd -c</strong>
d469 1
a469 1
<small>$OpenBSD: faq5.html,v 1.34 1999/11/08 19:23:04 ericj Exp $</small>
@


1.34
log
@fix fonts.
@
text
@d16 1
a16 1
<h2><font color=#e00000>5.0 - Kernel configuration and Disk Setup</font><hr></h2>
d37 2
a38 3
It is a joyous occasion when you as a user get to configure and build your own
custom kernel. Why would you want to do this though? 
</p>
a39 1
<p>
d41 2
a42 3
    <li>You can define which drivers your computer has support for.</li>
    <li>You can get rid of unneeded drivers in the GENERIC kernel</li>
    <li>Speed up boot times</li>
d44 3
a46 1
        by default</li>
d51 6
a56 1
GENERIC kernel will usually be all that you need.
d98 1
a98 1
This means that it *IS* referencing yet another configuration file. This
d469 1
a469 1
<small>$OpenBSD: faq5.html,v 1.33 1999/10/27 20:27:43 ericj Exp $</small>
@


1.33
log
@getting more verbose output on boot. fgsch@@
@
text
@d431 1
a431 1
<h2>5.5 - Getting more verbose output during boot</a>
d465 1
a465 1
<small>$OpenBSD: faq5.html,v 1.32 1999/09/24 01:46:14 ericj Exp $</small>
@


1.32
log
@re-organization of the faq, based greatly on the recent changes to the main web page. This way will hopefully allow for greater expansion and readability. Some of the numbers have changed. sorry.
@
text
@d25 1
d430 23
d465 1
a465 1
<small>$OpenBSD: faq5.html,v 1.31 1999/09/15 05:16:23 ericj Exp $</small>
@


1.31
log
@move disk information away from faq4 to a new faq15. This will leave room for an expanded installation section. faq14 added also although no information is in there to fill it. Soon it will be the IPsec FAQ
@
text
@d14 1
d16 1
a16 5
<font color= "#0000e0">
<a href= "index.html">[Back to Main Index]</a>
<a href= "faq4.html">[To Section 4.0 - Installation Guide]</a>
<a href= "faq6.html">[To Section 6.0 - Networking]</a>
</font>
d20 6
a25 1
<h1>5.0 - Kernel Configuration and Disk Setup</h1>
d27 2
d168 1
a168 1
<li>FFS_SOFTUPDATES - Allows for the use of softupdates. To read up on softupdates more read the <a href="faq15.html#15.5">Softupdates FAQ</a> section.
d191 1
a191 1
<li>CCDNBUF=integer - Set number of component buffers used by CCD(4). Default is 8. For more on CCD read the <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&sektion=4&format=html">CCD(4)</a> man page, or the <a href="faq12.html#12.2">Performance Tuning FAQ section.</a></li>
d199 1
a199 1
Also check the <a href="faq6.html">Networking FAQ</a> or the <a href="faq12.html#12.1">Networking Performance Tuning FAQ</a>.
d343 1
a343 1
Sometimes when you build a new kernel you will be required to install new bootblocks. To do so, read <a href="faq15.html#15.8">
d441 1
a441 1
<small>$OpenBSD: faq5.html,v 1.30 1999/09/07 20:38:28 ericj Exp $</small>
@


1.30
log
@conform pages to look the same,, additional installboot info
@
text
@d17 1
a17 1
<a href= "faq4.html">[To Section 4.0 - Installation and Disk Setup]</a>
d164 1
a164 1
<li>FFS_SOFTUPDATES - Allows for the use of softupdates. To read up on softupdates more read the <a href="faq4.html#4.9">Softupdates FAQ</a> section.
d339 2
a340 2
Sometimes when you build a new kernel you will be required to install new bootblocks. To do so, read <a href="faq4.html#4.13">
faq4.13 on OpenBSD's Bootloader</a>. Which will give you an overview on using OpenBSD's Bootloader
d428 1
a428 1
<a href= "faq4.html">[To Section 4.0 - Installation and Disk Setup]</a>
d437 1
a437 1
<small>$OpenBSD: faq5.html,v 1.29 1999/09/07 18:30:16 ericj Exp $</small>
@


1.29
log
@cleanup & repair
@
text
@d339 5
d437 1
a437 1
<small>$OpenBSD: faq5.html,v 1.28 1999/09/02 03:54:01 ericj Exp $</small>
@


1.28
log
@most people do not need to create a custom kernel
@
text
@d267 5
a271 5
<pre><strong>
#mkdir -p /usr/src/sys
#cd /mnt/sys
#tar cf - . | ( cd /usr/src/sys; tar xvf - )
</pre></strong>
d284 7
a290 7
<pre><strong>
#cd /somewhere
#cp /usr/src/sys/arch/$ARCH/conf/SOMEFILE .
#vi SOMEFILE (to make the changes you want)
#config -s /usr/src/sys -b . SOMEFILE
#make 
</pre></strong>
d298 7
a304 7
<pre><strong>
#cd /sys/arch/$ARCH/conf
#vi SOMEFILE (to make any changes you want)
#config SOMEFILE (read more about it here : <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=8&format=html">config(8)</a>)
#cd ../compile/SOMEFILE
#make 
</pre></strong>
d318 4
a321 4
<pre><strong>
#cp /bsd /bsd.old
#cp /sys/arch/$ARCH/compile/SOMEFILE/bsd /bsd
</pre></strong>
d330 1
a330 1
boot>bsd.old
d364 1
a364 1
Boot> boot wd0a:/bsd -c
d432 1
a432 1
<small>$OpenBSD: faq5.html,v 1.27 1999/07/26 15:10:46 ericj Exp $</small>
@


1.27
log
@simple fix's by <D.H.Davis@@bath.ac.uk>
@
text
@d45 4
d432 1
a432 1
<small>$OpenBSD: faq5.html,v 1.26 1999/07/22 20:34:26 ericj Exp $</small>
@


1.26
log
@copying kernel source off of the cd
@
text
@d56 1
a56 1
customize you kernel. Here we will go over only some of them, those that
d59 1
a59 1
example configuration files that are availible for your architecture.
d113 1
a113 1
<li>COMPAT_HPUX - Compatibility with HP-UX binaries. Only availible on some m68k arch's.</li>
d115 1
a115 1
<li>COMPAT_OSF1 - Run Digital Unix binaries. Availible only on Alpha platform.</li>
d124 2
a125 2
because these options add considerable size to the kernel. There are however extremely helpful in a case where a bug might be
present. This well help your or developers discover the source of your problems much quicker. Here is a list of popular
d131 1
a131 1
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&sektion=4&format=html">DDB</a> - This compiles in the in-kernel debugger. This isn't availible on all platforms. So be sure to read before adding it.</li>
d178 1
a178 1
<li>LKM - Support for Loadable Kernel Modules. Not availible on all arch's. Read <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=lkm&sektion=4&format=html">lkm(4)</a> for more information.</li>
d216 1
a216 1
<li>ENCDEBUG - This option enables debugging information to be conditionally logged incase IPSEC encounters errors.</li>
d232 1
a232 1
<li>PCVT_META_ESC - If enabled, a sequence composed of &lt;esc&gt;, followed by the normalkey code is emitted if a key is pressed with the &lt;Alt&gt; key modifier. If disabled, then normal key code with the value 0x80 added is sent. Defaults to off.</li>
d257 1
a257 1
code availible. You just need the kernel source to be able to compile the
d411 1
a411 1
booting. After so you should correct your Kernel configuration and Compile
d428 1
a428 1
<small>$OpenBSD: faq5.html,v 1.25 1999/07/06 20:44:23 ericj Exp $</small>
@


1.25
log
@more options
@
text
@d256 4
a259 1
To compile your kernel from the cdrom do the following:
d264 17
d428 1
a428 1
<small>$OpenBSD: faq5.html,v 1.24 1999/07/03 20:16:25 ericj Exp $</small>
@


1.24
log
@IPSEC implies option KEY
@
text
@d217 1
d408 1
a408 1
<small>$OpenBSD: faq5.html,v 1.23 1999/07/03 05:51:35 ericj Exp $</small>
@


1.23
log
@style fixes
@
text
@d215 1
a215 1
<li>IPSEC - This option enables IP security protocol support. See <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ipsec&sektion=4&format=html">ipsec(4)</a> for more details</li>
d407 1
a407 1
<small>$OpenBSD: faq5.html,v 1.22 1999/06/30 16:01:27 ericj Exp $</small>
@


1.22
log
@spelling fix's <ccsdhd@@bath.ac.uk>
@
text
@d67 1
a67 1
combination of the options in /usr/src/sys/arch/<your arch>/conf/GENERIC
d185 1
a185 1
<li>BOOT_CONFIG - Addeds support of the -c boot option.</li>
d227 1
a227 1
<li>PCVT_CTRL_ALT_DEL - If enabled, the key combination &lt Ctrl&gt &lt Alt&gt &lt Del&gt invokes a CPU reset. Default is off.</li>
d231 1
a231 1
<li>PCVT_META_ESC - If enabled, a sequence composed of &lt esc &gt, followed by the normalkey code is emitted if a key is pressed with the &lt Alt &gt key modifier. If disabled, then normal key code with the value 0x80 added is sent. Defaults to off.</li>
d258 2
a259 2
<p>
<pre>
d265 2
a266 2
</pre>
</p>
d272 2
a273 2
<p>
<pre>
d279 2
a280 2
</pre>
</p>
d292 2
a293 2
<p>
<pre>
d296 2
a297 2
</pre>
</p>
d303 1
a303 1
<p>
d307 1
a307 1
</p>
d338 1
a338 1
<p><pre>
d340 1
a340 1
</pre></p>
d407 1
a407 1
<small>$OpenBSD: faq5.html,v 1.21 1999/06/27 21:32:23 ericj Exp $</small>
@


1.21
log
@minor fix's & spelling
@
text
@d39 1
a39 1
    <li>You can get rid of uneeded drivers in the GENERIC kernel</li>
d55 2
a56 2
uneeded devices. There are multitudes of options that allow you to
customize you kernel. Here we will go over only some of them, one's that
d157 1
a157 1
<li>UNION - Includes code for the union file system, which permits directories to be mounted on top of each other in such a way that both file systems remain visible. This code isnt quite stable yet.</li>
d407 1
a407 1
<small>$OpenBSD: faq5.html,v 1.20 1999/06/27 18:47:42 ericj Exp $</small>
@


1.20
log
@fix up options
@
text
@d32 1
a32 1
Its a joyous occasion when you as a user get to configure and build your own
d62 9
d221 1
a221 1
<strong>PCVT Options</strong>
d407 1
a407 1
<small>$OpenBSD: faq5.html,v 1.19 1999/06/25 17:51:22 ericj Exp $</small>
@


1.19
log
@fix
@
text
@a199 1
<li>PFIL_HOOKS - This option turns on the packet filter interface hooks. Read <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfil&sektion=9&format=html">pfil(9)</a> for more information.</li>
a207 1
<li>KEY - Enables PFKEYv2 (RFC 2367) support.  While not IP specific, this option is usually used in conjunction with option IPSEC.</li>
d398 1
a398 1
<small>$OpenBSD: faq5.html,v 1.18 1999/06/25 15:57:35 ericj Exp $</small>
@


1.18
log
@add more options to kernel configuration section
@
text
@a197 2
<li>TCPCOOKIE - This causes the kernel to keep a list of "friendly" hosts, that is IP addresses that have been verified to exist.</li>
<li>TCK_NFRIENDS=integer - Default = 16. Controls the list of friendly addresses from TCPCOOKIE.</li>
d400 1
a400 1
<small>$OpenBSD: faq5.html,v 1.17 1999/06/25 00:41:44 ericj Exp $</small>
@


1.17
log
@add more kernel options to kernel section.
@
text
@d123 2
a124 4
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&sektion=1&format=html">KGDB</a> - Compiles a remote kernel
debugger using gdb's `remote target` feature.</li>
<li>makeoptions  DEBUG="-g" - Makes bsd.gdb along with bsd. This is useful for debugging crash dumps with gdb. NOTE: This 
option also turns on <strong>option DEBUG</strong></li>
d128 2
d143 2
a144 4
<li>KERNFS - Includes code which permits the mounting of a special file system (normally mounted on /kern) in which files
representing various kernel variables and parameters may be found.</li>
<li>NULLFS - Code to have a loopback filesystem. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_null&sektion=8&format=html">mount_null(8)</a> has more
information</li>
d146 3
a148 6
<li>PORTAL - Includes the (experimental) portal filesystem.  This permits interesting tricks like opening TCP sockets by
opening files in the file system.</li>
<li>UMAPFS - Includes a loopback file system in which user and group ids may be remapped -- this can be useful when mounting
alien file systems with different uids and gids than the local system (eg, remote NFS).</li>
<li>UNION - Includes code for the union file system, which permits directories to be mounted on top of each other in such a
way that both file systems remain visible. This code isnt quite stable yet.</li>
d155 2
a156 5
<li>NVNODE=integer - Where integer is the size of the cache used by the name-to-inode translation routines, (a.k.a. the
namei() cache, though called by many other names in the kernel source).</li>
<li>EXT2FS_SYSTEM_FLAG - This option changes the behavior of the APPEND and IMMUTABLE flags for a file on an EXT2FS
filesystem. Read <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=options&sektion=4&format=html">options(4)</a> for more
details.</li>
d176 1
d180 59
d402 1
a402 1
<small>$OpenBSD: faq5.html,v 1.16 1999/06/24 21:47:27 ericj Exp $</small>
@


1.16
log
@add more kernel options to the list.
@
text
@d98 12
a109 18
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_svr4&sektion=8&apropos=0&manpath=OpenBSD+Current">compat_svr4(8)</a>
 - Compatibility with SVR4 binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_bsdos&sektion=8&apropos=0&manpath=OpenBSD+Current">compat_bsdos(8)</a>
 - Compatibility with BSD/OS binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&sektion=8&apropos=0&manpath=OpenBSD+Current">compat_linux(8)</a>
 - Compatibility with Linux binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_sunos&sektion=8&apropos=0&manpath=OpenBSD+Current">compat_sunox(8)</a>
 - Compatibility with SunOS binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ultrix&sektion=8&apropos=0&manpath=OpenBSD+Current">compat_ultrix(8)</a>
 - Compatibility with Ultrix binaries.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_freebsd&sektion=8&apropos=0&manpath=OpenBSD+Current">compat_freebsd(8)</a>
 - Compatibility with FreeBSD binaries.</li>
<li>compat_hpux - Compatibility with HP-UX binaries. Only availible on some m68k arch's.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=compat_ibcs2&sektion=8&apropos=0&manpath=OpenBSD+Current">compat_ibcs2(8)</a>
 - Compatibility to run ibcs2 binaries.</li>
<li>compat_osf1 - Run Digital Unix binaries. Availible only on Alpha platform.</li>
<li>compat_43 - Compatibility with 4.3BSD. Use of this is certainly discouraged, But it is needed for our Navigator port</li>
<li>compat_11 - Compatibility with NetBSD 1.1</li>
d122 2
a123 3
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&sektion=4&format=html">ddb</a> - This compiles in the in-kernel
debugger. This isn't availible on all platforms. So be sure to read before adding it.</li>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=gdb&sektion=1&format=html">kgdb</a> - Compiles a remote kernel
d127 3
a129 3
<li>debug - Used to put various debugging options in the kernel, where the source has defined them.</li>
<li>ktrace - Adds hooks for the system call tracing facility. Which allows users to use <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ktrace&sektion=1&format=html">ktrace(1)</a>.</li>
<li>diagnostic - Adds code to the kernel that does internal consistency checks.</li>
d134 1
a134 1
Filesystem Options.
d136 4
a139 4
<li>ffs - Berkeley Fast Filesystem <strong>NOTE:</strong> This option is required</li>
<li>ext2fs - Second Extended File System, This is needed for those of you who want to read Linux partitions.</li>
<li>mfs - Memory File System that stores files in swapable memory. This is not quite stable as of now.</li>
<li>nfs - Network File System, This is needed if you will be using NFS.</li>
d154 1
a154 1
<li>XFS - A free implimentation of an AFS-compatible filesystem.</li>
d169 19
a187 2
<p> 
<a name= "5.3"></a>
d350 1
a350 1
<small>$OpenBSD: faq5.html,v 1.15 1999/06/08 23:37:52 ericj Exp $</small>
@


1.15
log
@bringing up to date/fixes
@
text
@d83 9
d114 59
d340 1
a340 1
<small>$OpenBSD: faq5.html,v 1.14 1999/06/08 23:10:02 ericj Exp $</small>
@


1.14
log
@mention new swapctl(8) and swapping to a file without kernel changes. + other various spelling fixes. oops
@
text
@d190 3
a192 1
correct the problem by fixing and recompiling your kernel.
d272 1
a272 1
<small>$OpenBSD: faq5.html,v 1.13 1999/06/08 21:23:24 ericj Exp $</small>
@


1.13
log
@mention /sys/conf/GENERIC, so people don't over look that when creating their own configurations.
@
text
@d76 1
a76 1
This means that it *IS* referencing yet another configuration files. This
d270 1
a270 1
<small>$OpenBSD: faq5.html,v 1.12 1999/05/25 21:23:32 ericj Exp $</small>
@


1.12
log
@start cleanup of kernel configuration section, make it much more readable
@
text
@d74 9
d270 1
a270 1
<small>$OpenBSD: faq5.html,v 1.11 1999/03/14 19:19:19 ericj Exp $</small>
@


1.11
log
@add boot time configuration - ALL entry's indexed from index.html MUST have a legit link referenced even if that documentation isnt there yet
@
text
@d52 8
a59 1
Here are a list of most commonly used options in the kernel.
d63 8
a70 5
<strong>option COMPAT_SVR4</strong>
This options enables compatibilty with binaries created for AT&T SYSV.4 UNIX
on the same architecture.  The i386 and sparc are supported. See the
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=compat_svr4&apropos=0&sektion=8&format=html">
compat_svr4(8)</a> manual page for more details.
d74 23
a96 5
<strong>option COMPAT_BSDOS</strong>
This options enables compatibilty with BSD/OS binaries. The i386 architecture
is supported. This also requires options COMPAT_43. See the
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=compat_bsdos&apropos=0&sektion=8&format=html">
compat_bsdos(8)</a> manual page for more information.
d99 1
a99 42
<p>
<strong>option COMPAT_43</strong>
This option enables compatibilty with 4.3BSD.  Use of this option is 
discouraged because when invoked it adds old syscalls and ioctls,modifies the
return values for getpid, getuid, and getgid as well as enabling support for
some older pre 4.4BSD socket calls. See the 
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=options&apropos=0&sektion=4&format=html">
options(4)</a> manual page for more detailed information.
</p>

<p>
<strong>option COMPAT_LINUX</strong>
This option enables compatibilty with Linux a.out and ELF binaries. The i386
architecture is supported. See the
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=compat_linux&apropos=0&sektion=8&format=html">
compat_linux(8)</a> manaul page for more
details.
</p>

<p>
<strong>Debugging options:</strong>
</p>

<p>
<strong>option DDB</strong>
This option will compile in a kernel debugger for diagnosing kernel problems.
This option is not available for all architecutres. See the
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=ddb&apropos=0&sektion=4&format=html">
ddb(4)</a> manual page for more details.
</p>

<p>
<strong>option KTRACE</strong>
This option will add hooks for the system call tracing facility, which will 
allow users to watch the system call invocation behavior or processes. See
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=ktrace&apropos=0&sektion=1&format=html">
ktrace(1)</a> manual page for more details.
</p>

<br>

<p>
d261 1
a261 1
<small>$OpenBSD: faq5.html,v 1.10 1999/03/08 00:45:07 wvdputte Exp $</small>
@


1.10
log
@Fixed comment about afterboot(8) man page (d@@fnarg.net.au)
+ added links to other man pages
@
text
@d183 80
d274 1
a274 1
<small>$OpenBSD: faq5.html,v 1.9 1999/02/21 21:43:33 wvdputte Exp $</small>
@


1.9
log
@Changed layout and added links
@
text
@d59 2
a60 1
compat_svr4(8) manual page for more details.
d66 3
a68 2
is supported. This also requires options COMPAT_43. See the compat_bsdos(8)
manual page for more information.
d76 3
a78 2
some older pre 4.4BSD socket calls. See the options(4) manual page for more
detailed information.
d84 3
a86 1
architecture is supported. See the compat_linux(8) manaul page for more
d97 3
a99 2
This option is not available for all architecutres. See the ddb(4) manual page
for more details.
d106 2
a107 1
ktrace(1) manual page for more details.
d120 1
a120 2
afterboot(8)</a> man page. But for those who didnt install the man pages
the information will be included here.
d194 1
a194 1
<small>$OpenBSD: faq5.html,v 1.8 1999/01/04 22:28:19 ericj Exp $</small>
@


1.8
log
@manpath not specified for man.cgi. defaults to -current
@
text
@d4 17
a20 6
<link rev=made href=mailto:www@@openbsd.org>
<meta name="resource-type" content="document">
<meta name="description" content="the main OpenBSD page">
<meta name="keywords" content="openbsd,main">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1998 by OpenBSD.">
d22 1
a22 2
</head>
<body bgcolor="#ffffff" text="#000000" link="#23238E">
d24 2
d27 1
a27 1
<a name="5.1"></a>
d29 2
d32 4
a35 2
	Its a joyous occasion when you as a user get to configure and
build your own custom kernel.  Why would you want to do this though? 
d38 5
a42 4
<li>You can define which drivers your computer has support for.
<li>You can get rid of uneeded drivers in the GENERIC kernel
<li>Speed up boot times     
<li>Remove default options or add options which may not have been enabled by default
d44 2
d47 1
a47 1
<a name="5.2"></a>
d49 2
d53 16
a69 8
<strong>option COMPAT_SVR4</strong><br>
This options enables compatibilty with binaries created for AT&T
SYSV.4 UNIX on the same architecture.  The i386 and sparc are supported.
See the compat_svr4(8) manual page for more details.<p>
<strong>option COMPAT_BSDOS</strong><br>
This options enables compatibilty with BSD/OS binaries.  The
i386 architecture is supported. This also requires options COMPAT_43.  See
the compat_bsdos(8) manual page for more information.<p>
d71 14
a84 9
<br>
This option enables compatibilty with 4.3BSD.  Use of this option
is discouraged because when invoked it adds old syscalls and ioctls,modifies the return values for getpid, getuid, and getgid as well as
enabling support for some older pre 4.4BSD socket calls. See the
options(4) manual page for more detailed information.<p>
<strong>option COMPAT_LINUX</strong><br>
This option enables compatibilty with Linux a.out and ELF
binaries.  The i386 architecture is supported. See the compat_linux(8)
manaul page for more details.
d86 3
a88 1
<strong>Debugging options</strong>
d91 12
a103 7
This option will compile in a kernel debugger for diagnosing
kernel problems.  This option is not available for all architecutres.  See
the ddb(4) manual page for more details.<p>
<strong>option KTRACE</strong><br>
This option will add hooks for the system call tracing facility, which
will allow users to watch the system call invocation behavior or
processes. See ktrace(1) manual page for more details.<p>
a104 2
<a name="5.3"></a>
<h2>5.3 - Building your own kernel </h2>
d106 7
a112 2
Full instructions for creating your own custom kernel are in the <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&apropos=0&sektion=8&format=html">
d114 17
a130 1
the information will be included here. 
d132 9
a140 20
To compile your kernel from the cdrom do the following. <p>
<strong>
#cd /somewhere<br>
#cp /usr/src/sys/arch/$ARCH/conf/SOMEFILE . <br>
#vi SOMEFILE </strong>(to make the changes you want)<br>
<strong>
#config -s /usr/src/sys -b . SOMEFILE <br>
#make <br>
</strong>
<p>
To compile a kernel inside a writeable source tree do the following. <p>
<strong>
#cd /sys/arch/$ARCH/conf <br>
#vi SOMEFILE </strong>(to make any changes you want)<br>
<strong>
#config SOMEFILE</strong> (read more about it here : <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=8&format=html">config(8)</a>)
<br>
<strong>
#cd ../compile/SOMEFILE<br>
d142 3
a144 1
</strong>
d148 10
a157 4
you compile your kernel.<p>
To move your kernel into place. <p>
<strong>
#cp /bsd /bsd.old<br>
d159 3
a161 1
<strong>
d163 5
a167 2
To revert to your old kernel at boot you need to just <br>
<strong>
d169 18
a186 1
</strong>
d188 2
a189 5
and your old kernel will be loaded instead of /bsd.
 <hr>
<a href=index.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a> 
<a href=mailto:www@@openbsd.org>www@@openbsd.org</a>
<br><small>$OpenBSD: faq5.html,v 1.7 1999/01/03 20:22:04 ericj Exp $</small>
@


1.7
log
@fixes
@
text
@d68 1
a68 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=afterboot&apropos=0&sektion=8&manpath=OpenBSD+2.4&format=html">
d88 1
a88 1
href="http://www.openbsd.org/cgi-bin/man.cgi?query=config&apropos=0&sektion=8&manpath=OpenBSD+2.4&format=html">config(8)</a>)
d113 1
a113 1
<br><small>$OpenBSD: faq5.html,v 1.6 1999/01/03 00:24:10 ericj Exp $</small>
@


1.6
log
@few simple corrections
@
text
@d80 1
d113 1
a113 1
<br><small>$OpenBSD: faq5.html,v 1.5 1999/01/01 21:56:04 ericj Exp $</small>
@


1.5
log
@how to compile the kernel
@
text
@d37 1
a37 1
<strong>option COMPAT_BSDOS</strong<br>
d112 1
a112 1
<br><small>$OpenBSD: faq5.html,v 1.4 1998/12/21 21:37:28 ericj Exp $</small>
@


1.4
log
@faq additions.
@
text
@d64 45
a108 1

d112 1
a112 1
<br><small>$OpenBSD$</small>
@


1.3
log
@ericj, you messed up the hrefs again
@
text
@d31 35
a65 1
<hr>
d68 1
a68 1
<br><small>$OpenBSD</small>
@


1.2
log
@faq fixup
@
text
@d32 1
a32 1
<a href=../index.html><img height=24 width=24 src=../back.gif border=0 alt=OpenBSD></a> 
@


1.1
log
@no extra directories
@
text
@d4 7
d12 1
a12 1
<body>
d31 6
a36 1

@

