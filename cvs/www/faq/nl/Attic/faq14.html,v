head	1.85;
access;
symbols;
locks; strict;
comment	@# @;


1.85
date	2014.04.01.17.03.09;	author nick;	state dead;
branches;
next	1.84;

1.84
date	2013.11.03.08.09.59;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2013.10.16.07.49.02;	author ajacoutot;	state Exp;
branches;
next	1.82;

1.82
date	2013.05.02.06.05.49;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2013.02.22.07.53.37;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2013.02.13.19.42.18;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2013.01.13.15.45.16;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2012.12.29.08.09.40;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2012.11.02.07.24.05;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2012.06.29.14.35.07;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2012.06.09.08.27.50;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2012.06.05.22.29.42;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2012.05.26.08.43.42;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2012.05.03.12.50.11;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2012.02.05.08.49.00;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2012.01.17.11.13.00;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2012.01.01.08.40.31;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2011.11.11.07.11.10;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2011.11.01.22.59.12;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2011.07.30.06.14.38;	author ajacoutot;	state Exp;
branches;
next	1.65;

1.65
date	2011.06.25.07.54.43;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2011.06.13.05.27.51;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2011.05.05.14.48.33;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2011.05.01.19.01.24;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2011.01.29.15.46.36;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2011.01.28.08.21.11;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2010.03.09.08.43.35;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2010.03.08.12.37.15;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2010.02.16.09.19.53;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2010.01.23.11.37.13;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2009.12.28.16.11.44;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2009.12.09.08.30.06;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2009.11.10.13.38.42;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2009.11.04.18.08.57;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2009.10.31.07.55.59;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2009.10.17.15.58.26;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2009.05.02.17.33.49;	author tobias;	state Exp;
branches;
next	1.48;

1.48
date	2009.04.26.15.44.20;	author tobias;	state Exp;
branches;
next	1.47;

1.47
date	2009.03.16.20.24.22;	author tobias;	state Exp;
branches;
next	1.46;

1.46
date	2009.03.02.19.44.49;	author tobias;	state Exp;
branches;
next	1.45;

1.45
date	2009.02.22.20.35.21;	author tobias;	state Exp;
branches;
next	1.44;

1.44
date	2009.01.07.21.24.44;	author tobias;	state Exp;
branches;
next	1.43;

1.43
date	2008.06.22.21.06.12;	author tobias;	state Exp;
branches;
next	1.42;

1.42
date	2008.05.12.07.23.52;	author tobias;	state Exp;
branches;
next	1.41;

1.41
date	2007.11.19.10.43.15;	author tobias;	state Exp;
branches;
next	1.40;

1.40
date	2007.11.17.12.49.52;	author tobias;	state Exp;
branches;
next	1.39;

1.39
date	2007.05.05.06.32.13;	author jufi;	state Exp;
branches;
next	1.38;

1.38
date	2007.01.01.10.53.28;	author jufi;	state Exp;
branches;
next	1.37;

1.37
date	2006.12.03.12.19.17;	author jufi;	state Exp;
branches;
next	1.36;

1.36
date	2006.11.01.08.39.42;	author jufi;	state Exp;
branches;
next	1.35;

1.35
date	2006.08.14.10.44.13;	author saad;	state Exp;
branches;
next	1.34;

1.34
date	2006.06.23.09.12.14;	author saad;	state Exp;
branches;
next	1.33;

1.33
date	2006.05.01.12.19.17;	author jufi;	state Exp;
branches;
next	1.32;

1.32
date	2006.03.07.13.14.10;	author saad;	state Exp;
branches;
next	1.31;

1.31
date	2006.02.27.21.23.26;	author saad;	state Exp;
branches;
next	1.30;

1.30
date	2005.12.30.11.33.43;	author jufi;	state Exp;
branches;
next	1.29;

1.29
date	2005.12.24.10.04.35;	author saad;	state Exp;
branches;
next	1.28;

1.28
date	2005.12.18.18.03.09;	author saad;	state Exp;
branches;
next	1.27;

1.27
date	2005.12.18.12.05.07;	author jufi;	state Exp;
branches;
next	1.26;

1.26
date	2005.12.12.10.18.53;	author saad;	state Exp;
branches;
next	1.25;

1.25
date	2005.12.10.12.51.38;	author jufi;	state Exp;
branches;
next	1.24;

1.24
date	2005.11.29.15.13.40;	author saad;	state Exp;
branches;
next	1.23;

1.23
date	2005.11.25.00.26.22;	author saad;	state Exp;
branches;
next	1.22;

1.22
date	2005.11.18.20.48.46;	author jufi;	state Exp;
branches;
next	1.21;

1.21
date	2005.11.11.06.17.58;	author saad;	state Exp;
branches;
next	1.20;

1.20
date	2005.11.04.20.24.23;	author jufi;	state Exp;
branches;
next	1.19;

1.19
date	2005.11.03.19.33.41;	author jufi;	state Exp;
branches;
next	1.18;

1.18
date	2005.11.03.11.30.53;	author saad;	state Exp;
branches;
next	1.17;

1.17
date	2005.11.01.19.05.40;	author jufi;	state Exp;
branches;
next	1.16;

1.16
date	2005.10.20.14.41.51;	author saad;	state Exp;
branches;
next	1.15;

1.15
date	2005.09.28.19.46.32;	author saad;	state Exp;
branches;
next	1.14;

1.14
date	2005.08.15.20.46.06;	author saad;	state Exp;
branches;
next	1.13;

1.13
date	2005.07.28.09.54.34;	author saad;	state Exp;
branches;
next	1.12;

1.12
date	2005.07.15.04.26.14;	author saad;	state Exp;
branches;
next	1.11;

1.11
date	2005.07.03.07.28.34;	author saad;	state Exp;
branches;
next	1.10;

1.10
date	2005.06.04.08.43.13;	author saad;	state Exp;
branches;
next	1.9;

1.9
date	2005.05.30.13.52.07;	author saad;	state Exp;
branches;
next	1.8;

1.8
date	2005.05.20.14.55.34;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2005.05.19.18.23.05;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2005.05.18.14.52.24;	author saad;	state Exp;
branches;
next	1.5;

1.5
date	2005.05.04.17.52.25;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2005.02.22.16.48.45;	author saad;	state Exp;
branches;
next	1.3;

1.3
date	2005.02.13.11.15.14;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2005.01.22.12.13.43;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.21.17.10.25;	author saad;	state Exp;
branches;
next	;


desc
@@


1.85
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
Thanks to all those that did the translation work, and my appologies to
those who had to translate my writing!
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>14 - Inrichting van de Schijf</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "OpenBSD FAQ 14 - Disk Setup">
<meta name= "keywords"      content= "openbsd,faq14">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2013 by OpenBSD.">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<a href="../../nl/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq13.html">[Naar Sectie 13 - Multimedia]</a>
<a href= "faq15.html">[Naar Sectie 15 - Packages en Ports]</a>
</font>

<h1><font color="#e00000">14 - Inrichting van de Schijf</font></h1><hr>

<h3>Inhoudsopgave</h3>
<ul>
<li><a href="#intro"      >14.1 - Schijven en Partities</a>
<li><a href="#fdisk"      >14.2 - OpenBSD's fdisk(8) gebruiken</a>
<li><a href="#disklabel"  >14.3 - OpenBSD's disklabel(8) gebruiken</a>
<li><a href="#NewDisk"    >14.4 - Extra schijven toevoegen in OpenBSD</a>
<li><a href="#Swap"       >14.5 - Hoe wordt swap gebruikt?</a>
<li><a href="#SoftUpdates">14.6 - Soft Updates</a>
<li><a href="#Boot386"    >14.7 - Hoe booten OpenBSD/i386 en OpenBSD/amd64?</a>
<li><a href="#LargeDrive" >14.8 - Wat zijn de problemen met grote schijven
    in OpenBSD?</a>
<li><a href="#InstBoot"   >14.9 - Installeren van Bootblocks - i386/amd64
    specifiek</a>
<li><a href="#Backup"     >14.10 - Zich op het ergste voorbereiden: Backup en
    Restore vanaf tape.</a>
<li><a href="#MountImage" >14.11 - Schijfimages mounten in OpenBSD</a>
<li><a href="#pciideErr"  >14.12 - Help! Ik krijg fouten met IDE DMA!</a>
<li><a href="#NegSpace"   >14.14 - Waarom vertelt <tt>df(1)</tt> me dat ik
    meer dan 100% van mijn schijf in gebruik heb?</a>
<li><a href="#OhBugger"   >14.15 - Partities herstellen na het verwijderen
    van het disklabel</a>
<li><a href="#foreignfs"  >14.16 - Kan ik gegevens benaderen op andere
    bestandssystemen dan FFS?</a>
<ul>
  <li><a href="#foreignfsafter">14.16.1 - De partities staan niet in mijn
      disklabel! Wat moet ik doen?</a>
</ul>
<li><a href="#flashmem"   >14.17 - Kan ik een flash geheugentoestel gebruiken
    met OpenBSD?</a>
  <ul>
  <li><a href="#flashmemPortable">14.17.1 - Flashgeheugen als draagbaar
    opslagtoestel</a> 
  <li><a href="#flashmemBoot">14.17.2 - Flashgeheugen als bootable opslag</a>
  <li><a href="#flashmemLive">14.17.3 - Hoe kan ik een "Live" bootable USB
    toestel maken?</a>
  </ul>
<li><a href="#DiskOpt"    >14.18 - Schijfprestaties optimaliseren</a>
<li><a href="#Async"      >14.19 - Waarom gebruiken we geen async mounts?</a>
<li><a href="#altroot"    >14.20 - Dupliceren van uw root-partitie: altroot</a>
<li><a href="#softraid"   >14.21 - Hoe gebruik ik softraid(4)?</a>
</ul>
<hr>

<a name="intro"></a>
<h2>14.1 - Schijven en Partities</h2>

<p>
De details voor het instellen van schijven in OpenBSD variëren per
platform, dus u zou de installatie-instructies in het
<tt>INSTALL.&lt;arch&gt;</tt> voor uw
<a href="../../nl/plat.html">platform</a> moeten lezen om de bijzonderheden
voor uw systeem vast te stellen.

<p>
<h3>Identificatie van de schijf</h3>
OpenBSD benadert massa-opslag op de meeste platformen met twee stuurprogramma's,
afhankelijk van de normale set commando's die dat type apparaat ondersteunt:

<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wd&amp;sektion=4">wd(4):</a>
IDE-schijven (en apparaten die eruit zien als IDE-schijven, zoals SATA, MFM
of ESDI-schijven, of een flash-apparaat met een geschikte adapter) aangesloten
op een
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wdc&amp;sektion=4">wdc(4)</a>
of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&amp;sektion=4">pciide(4)</a>
interface.
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&amp;sektion=4">sd(4):</a>
Apparaten die SCSI-commando's gebruiken, zoals SCSI-schijven aangesloten op een
SCSI-adapter, USB-schijven, SATA-schijven aangesloten op een
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&amp;sektion=4">ahci(4)</a>
interface, en schijf-arrays aangesloten op een RAID-controller.
</ul>

De eerste schijf van ieder type dat door OpenBSD geïdentificeerd wordt, zal
schijf '0' zijn, de tweede zal '1' zijn, enz.
Dus de eerste IDE-achtige schijf zal wd0 zijn, de derde SCSI-achtige
schijf zal sd2 zijn.
Als u twee SCSI-achtige schijven en drie IDE-achtige schijven in een
systeem hebt, dan heeft u sd0, sd1, wd0, wd1, en wd2 op die machine.
De volgorde is gebaseerd op de volgorde waarin ze worden gevonden tijdens
the hardware-detectie bij het opstarten.
Er zijn een paar belangrijke punten om in gedachten te houden:
<ul>
<li>Schijven kunnen anders genummerd zijn dan de volgorde waarin uw boot ROM
probeert op te starten (bv. uw systeem kan proberen te booten van een schijf
die OpenBSD als wd2 of sd1 herkent).
Soms kunt u dit veranderen, soms niet.
<li>Verwijderen of toevoegen van een schijf kan de identiteit van andere
schijven op het systeem beïnvloeden.
</ul>


<h3>Partitioneren</h3>

Om historische redenen wordt de term "partitie" veelal gebruikt voor
twee verschillende dingen in OpenBSD en dat leidt tot enige verwarring.

<p>
De twee soorten "partitie" zijn:
<ul>
<li> "disklabel partities" gecreëerd met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
(vaak "bestandssysteem partities" genoemd).
<li> "fdisk partities" gecreëerd met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
(vaak "partitietabel partities" of "Master Boot Record (MBR) partities"
genoemd).
</ul>

<p>
Alle OpenBSD platformen gebruiken disklabel(8) als de primaire wijze om
OpenBSD bestandssysteem partities te beheren, maar slechts enkele platformen
hebben ook fdisk(8) nodig om partitietabel partities te beheren.
Op de platformen die fdisk partities gebruiken, wordt één fdisk partitie
gebruikt voor alle OpenBSD bestandssysteem partities.  Deze partitie
wordt dan onderverdeeld in disklabel partities.
Deze disklabel partitions worden "a" tot en met "p" genoemd.
Enkele van deze zijn "speciaal":
<ul>
<li><b>a</b> -- Op de boot-schijf is de 'a' partitie uw root partitie.
<li><b>b</b> -- Op de boot-schijf wordt de 'b' partitie is automatisch gebruikt
als een swap partitie.
<li><b>c</b> -- Op alle schijven is de 'c' partitie de gehele schijf,
van de eerste tot de laatste sector.
(Hint: als u een schijf geheel wilt wissen, schrijf dan nullen naar de
'c' partitie van de schijf.
Meer gebruikelijk wordt de 'c' partitie gebruikt door utilities als
'fdisk' om boot loaders, partitie-tabellen, enz. te installeren.)
</ul>

<h3>Identificatie van de partitie</h3>
Een OpenBSD bestandssysteem wordt gekenmerkt door de schijf waar het op
staat, plus de bestandssysteem partitie op die schijf.
Dus een bestandssysteem kan worden gekenmerkt door kenmerken als "sd0a"
(de "a" partitie op het eerste "sd" apparaat), "wd2h" (de "h" partitie op
het derde "wd" apparaat) of "sd1c" (het gehele tweede "sd" apparaat).
De device file voor het block-device zou <tt>/dev/sd0a</tt> zijn,
<tt>/dev/rsd0a</tt> zou de device file voor het "raw" (character)
device.

<p>
Sommige utilities staan u toe om de "korte" naam van een partitie (zoals "sd0d")
of een schijf (zoals "wd1") te gebruiken in plaats van de echte naam
van het apparaat (resp. "<tt>/dev/sd0d</tt>" of "<tt>/dev/wd1c</tt>").


<p>
Merk nogmaals op dat als u gegevens zet op <tt>wd2d</tt> en later <tt>wd1</tt>
van het systeem verwijdert en opnieuw opstart, dat uw gegevens dan op
<tt>wd1d</tt> staan, aangezien uw oude <tt>wd2</tt> nu <tt>wd1</tt> is.
De identificatie van een schijf wijzigt echter niet na het opstarten,
dus als een USB-schijf wordt verwijderd of stuk gaat, zal de identificatie
van andere schijven niet veranderen totdat u opnieuw opstart.

<a name="DUID"></a>
<h3>Disklabel Unique Identifiers</h3>
Schijven kunnen ook worden geïdentificeerd met Disklabel Unique Identifiers
(DUID's), een hexadicimaal getal van 16 cijfers, beheerd door het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskmap&amp;sektion=4"
>diskmap(4)</a> device.
Dit getal wordt automatisch gegenereerd als een willekeurig getal als een
disklabel voor de eerste keer wordt gecreëerd, maar valt terug op enkel
nullen voor bestaande (pre-OpenBSD 4.8) labels.
Indien gewenst kan disklabel(8) worden gebruikt om het UID te wijzigen.
Deze UID's zijn "persistent" -- als u uw schijven op deze manier identificeert,
dan is schijf "<tt>f18e359c8fa2522b</tt>" altijd <tt>f18e359c8fa2522b</tt>,
ongeacht de wijze waarop deze wordt aangesloten.
U kunt partities op de schijf specificeren door een punt en de partitie-letter
toe te voegen, bijvoorbeeld <tt>f18e359c8fa2522b.d</tt> is de 'd' partitie
van de schijf <tt>f18e359c8fa2522b</tt> en zal ALTIJD refereren aan
hetzelfde stuk opslag, ongeacht de volgorde of de interface waarmee het
is verbonden met het systeem.

<p>
Deze UID's kunnen bijna overal worden gebruikt waar een partitie of
een apparaat wordt gespecificeerd, bijvoorbeeld in <tt>/etc/fstab</tt> of
op opdrachtregels.
Uiteraard kunnen schijven en partities ook worden aangeduid op de traditionele
wijze, met apparaat, volgnummer en partitie (bv. /dev/sd1f), en beide
kunnen door elkaar worden gebruikt.

<p>
Merk op dat het DUID een kenmerk is van het disklabel, maar omdat OpenBSD
slechts één disklabel per disk ondersteunt is dat slechts een academisch
detail.


<p>
<a name="fdisk"></a>
<h2>14.2 - fdisk(8) gebruiken</h2>

Bekijk zeker de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
man pagina.

<p>
fdisk(8) wordt op sommige platformen (i386, amd64, macppc, zaurus en armish)
gebruikt om een partitie aan te maken die herkend wordt door de boot ROM
van het systeem, en waarin de OpenBSD disklabel partities geplaatst kunnen
worden.
Andere platformen hebben fdisk(8) niet nodig en gebruiken het niet.
fdisk(8) kan ook gebruikt worden voor het manipuleren van de Master Boot
Record (MBR), en dat kan een impact hebben voor alle besturingssystemen
op een computer.
In tegenstelling tot de fdisk-achtige programma's op sommige andere
besturingssytemen, veronderstelt OpenBSD's fdisk dat u weet wat u wil doen.
Voor het overgrote deel zal het u laten doen wat u moet doen, en dit maakt
het een krachtig hulpmiddel om bij de hand te hebben.
Het zal u ook dingen laten doen die u beter niet doet of waarvan het niet
de bedoeling was dat u ze deed, dus het moet voorzichtig gebruikt worden.

<p>
Normaal zal er slechts één OpenBSD fdisk partitie op een schijf geplaatst
worden.
Die partitie zal dan door <a href="#disklabel">disklabel</a> onderverdeeld
worden in OpenBSD bestandssysteempartities.

<p>

<p>
Om gewoon uw partitietabel te bekijken met fdisk, gebruikt u:

<blockquote><pre>
# <b>fdisk sd0</b><br>
</pre></blockquote>

<p>
Dat zal een uitvoer gelijkaardig aan deze geven:

<blockquote><pre>
Disk: sd0       geometry: 553/255/63 [8883945 Sectors]
Offset: 0       Signature: 0xAA55
         Starting       Ending       LBA Info:
 #: id    C   H  S -    C   H  S [       start:      size   ]
------------------------------------------------------------------------
*0: A6    3   0  1 -  552 254 63 [       48195:     8835750 ] OpenBSD     
 1: 12    0   1  1 -    2 254 63 [          63:       48132 ] Compaq Diag.
 2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused      
 3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused      
</pre></blockquote>

<p>
In dit voorbeeld bekijken we de fdisk uitvoer van de eerste SCSI-achtige
schijf.
We kunnen de OpenBSD partitie (id A6) en haar grootte zien. De * vertelt ons
dat de OpenBSD partitie een bootable partitie is.

<p>
In het voorgaande voorbeeld bekeken we alleen onze informatie. Wat als we
onze partietabel willen bewerken? Wel, om dat te doen moeten we de <b>-e</b>
vlag gebruiken. Dit zal een commandoregel prompt tevoorschijn brengen om met
fdisk te interageren.

<blockquote><pre>
# <b>fdisk -e wd0</b>
Enter 'help' for information
fdisk: 1&gt; <b>help</b>
        help            Command help list
        manual          Show entire OpenBSD man page for fdisk
        reinit          Re-initialize loaded MBR (to defaults)
        setpid          Set the identifier of a given table entry
        disk            Edit current drive stats
        edit            Edit given table entry
        flag            Flag given table entry as bootable
        update          Update machine code in loaded MBR
        select          Select extended partition table entry MBR
        swap            Swap two partition entries
        print           Print loaded MBR partition table
        write           Write loaded MBR to disk
        exit            Exit edit of current MBR, without saving changes
        quit            Quit edit of current MBR, saving current changes
        abort           Abort program without saving current changes
fdisk: 1&gt; 
</pre></blockquote>

<p>

<p>Hier is een overzicht van de commando's die u kan gebruiken wanneer u de
<b>-e</b> vlag kiest.

<ul>
<li><b>help</b>  Toon een lijst van commando's die fdisk gebruikt in de
interactieve edit modus.
<li><b>reinit</b>  Initialiseer de momenteel geselecteerde, in-het-geheugen
kopie van de boot block.
Dit is een handige manier om snel een "full-disk" OpenBSD partitie op zijn
plaats te zetten, de bootcode te updaten, en in het algemeen het systeem
klaar te maken voor OpenBSD (en niets anders dan OpenBSD).
<li><b>disk</b>  Toon de huidige schijfgeometrie die fdisk gebruikt.
U krijgt de gelegenheid om deze te bewerken indien u dat wenst.
<li><b>setpid</b>  Verander de partitie identifier van de gegeven partitietabel
entry. Dit commando is bepaald handig om een bestaande partitie opnieuw toe
te kennen aan OpenBSD.
<li><b>edit</b>  Bewerk een gegeven tabel entry in de geheugenkopie van de
huidige boot block. U kan bewerken ofwel in CHS geometrie modus, of in
sector offsets en groottes.
<li><b>flag</b>  Maak de gegeven partitietabel entry bootable. Slechts
één entry kan bootable gemarkeerd worden. Als u van een
"extended" partitie wenst te booten, zal u de partitietabel entry voor de
extended partitie bootable moeten markeren.
<li><b>update</b>  Update de machinecode in de geheugenkopie van de
momenteel geselecteerde boot block.
<li><b>select</b>  Selecteer en laad in het geheugen de boot block waarnaar
verwezen wordt door de extended partitie tabel entry in de huidige boot block.
<li><b>swap</b>  Verwisselt twee MBR entries, zodat u de MBR kan herschikken.
<li><b>print</b>   Vertoon de momenteel geselecteerde in-het-geheugen kopie
van de boot block en zijn MBR tabel op het scherm.
<li><b>write</b>   Schrijf de in-het-geheugen kopie van de boot block naar
de schijf. U zal gevraagd worden om deze handeling te bevestigen.
<li><b>exit</b>  Verlaat het huidige niveau van fdisk, ofwel door terug te keren
naar de voorheen geselecteerde in-het-geheugen kopie van een boot block, ofwel
door het programma te verlaten indien er geen is.
<li><b>quit</b>  Verlaat het huidige niveau van fdisk, ofwel door terug te keren
naar de voorheen geselecteerde in-het-geheugen kopie van een boot block, ofwel
door het programma te verlaten indien er geen is. In tegenstelling tot exit
schrijft dit de gewijzigde block weg.
<li><b>abort</b>   Verlaat het programma zonder de huidige wijzigingen te
bewaren.
</ul>

<h3>fdisk trucs en tips</h3>
<ul>
<!-- <li>On OpenBSD platforms which use fdisk, you should leave the first
track free.
This leaves room for the Master Boot Record, which is where the fdisk
partition table resides.  (not sure if this is true) -->
<li>fdisk(8) biedt de mogelijkheid om partities op te geven in "raw sector"
en Cylinder/Head/Sector formaten.
Beide opties worden gegeven voor een reden -- sommige taken worden
gemakkelijker vervuld op de ene manier, andere op de andere manier.
Beperk uzelf niet tot het gebruik van slechts één optie.
<li>Bij een volledig blanco schijf zal de bootcode van de master boot record
naar de schijf geschreven moeten worden alvorens ze kan booten.
U kan hiervoor de "reinit" of "update" opties gebruiken.
Als u nalaat om dit te doen, kan u een geldige partitietabel schrijven met
fdisk, maar geen bootable schijf hebben.
Het kan dat u de bestaande bootcode wil updaten als u onzeker bent van de
oorsprong ervan.
<li>Als uw systeem een "maintenance" of "diagnostic" partitie heeft, wordt
het aanbevolen dat u die op zijn plaats laat of deze installeert VOORDAT
u OpenBSD installeert.
<li>Om historische redenen bewaart "q" de wijzigingen en verlaat het
programma, en "x" verlaat het programma zonder te bewaren.
Dit is het tegenovergestelde van wat vele mensen nu gewoon zijn in andere
omgevingen.
fdisk(8) waarschuwt niet alvorens wijzigingen te schrijven, dus gebruik
het met voorzorg.

</ul>


<a name="disklabel"></a>
<h2>14.3 - OpenBSD's disklabel(8) gebruiken</h2>
<a name="disklabel.1"></a>
<h3>Wat is disklabel(8)?</h3>
  
<p>
Lees zeker eerst de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
man pagina.

<p>
De details van het instellen van schijven in OpenBSD varieert enigszins
tussen platformen.
Voor <a href="../../i386.html">i386</a>,
<a href="../../amd64.html">amd64</a>,
<a href="../../macppc.html">macppc</a>,
<a href="../../zaurus.html">zaurus</a>,
en <a href="../../armish.html">armish</a>
gebeurt de schijfinstelling in twee stadia.
Eerst wordt de OpenBSD "slice" van de harde schijf gedefinieerd met fdisk(8),
vervolgens wordt die slice onderverdeeld in OpenBSD partities met
disklabel(8).

<p>
Alle OpenBSD platformen gebruiken echter disklabel(8) als de primaire
manier om OpenBSD partities te beheren.
Platformen die ook fdisk(8) gebruiken, plaatsen al de disklabel(8) partities
in één enkele fdisk partitie.

<p>
Labels bevatten bepaalde informatie over uw schijf, zoals uw schijfgeometrie
en informatie over de bestandssystemen op de schijf.
De disklabel wordt vervolgens gebruikt door het bootstrap-programma om
toegang te krijgen tot de schijf en om te weten waar bestandssystemen zich
op de schijf bevinden.
U kan meer gedetailleerde informatie over disklabel lezen in de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=5">disklabel(5)</a>
man pagina.

<p>
Op sommige platformen helpt disklabel architectuurbeperkingen qua
schijfpartitionering te overwinnen.
Op i386 bijvoorbeeld, kan u slechts 4 primaire partities hebben, maar met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
gebruikt u één van deze 'primary' partities om al uw OpenBSD
partities (bv. 'swap', '/', '/usr' en '/var', enz.) in te bewaren.
En dan hebt u nog 3 partities over, beschikbaar voor andere besturingssystemen.

<a name="disklabel.2"></a>
<h3>disklabel(8) tijdens de OpenBSD installatie</h3>

<p>
Een van de grote onderdelen van de OpenBSD installatie is het initieel
aanmaken van labels.
Tijdens de installatie gebruikt u disklabel(8) om uw afzonderlijke
partities aan te maken.
Als onderdeel van het installatieproces kan u uw "mount points" definiëren
vanuit disklabel(8), maar u kan deze later ook wijzigen nog tijdens of na
de installatie.

<p>
Er is niet één "juiste" manier om een schijf te labelen, maar er zijn
veel foute manieren.
Alvorens te proberen uw schijf te labelen, zie
<a href="faq4.html#Partitioning">deze discussie</a> over partitioneren
en partitiegroottes.

<p>
Voor een voorbeeld van het gebruik van disklabel(8) tijdens de installatie,
zie het onderdeel
<a href="faq4.html#Moredisklabel">Aangepaste disklabel layout</a> van de
<a href="faq4.html">Installatiegids</a>.


<p>

<a name="disklabel.3"></a>
<h3>disklabel(8) gebruiken na de installatie</h3>

<p>
Na de installatie zal één van de meest voorkomende redenen om disklabel(8)
te gebruiken zijn: bekijken hoe uw schijf georganiseerd is.
Het volgende commando zal u de huidige disklabel tonen, zonder hem te
wijzigen:

<blockquote><pre>
# <b>disklabel wd0</b> &lt;-- <i>Of welke schijf device u graag zou bekijken</i>
type: ESDI
disk: ESDI/IDE disk
label: SAMSUNG HD154UI 
duid: d920a43a5a56ad5f
flags:
bytes/sector: 512
sectors/track: 63
tracks/cylinder: 16
sectors/cylinder: 1008
cylinders: 2907021
total sectors: 2930277168
boundstart: 64
boundend: 2930272065
drivedata: 0 

16 partitions:
#                size           offset  fstype [fsize bsize  cpg]
  a:          1024064               64  4.2BSD   2048 16384    1 # /
  b:          4195296          1024128    swap                   
  c:       2930277168                0  unused                   
  d:          4195296          5219424  4.2BSD   2048 16384    1 # /usr
  e:          4195296          9414720  4.2BSD   2048 16384    1 # /tmp
  f:         20972448         13610016  4.2BSD   2048 16384    1 # /var
  h:          2097632         34582464  4.2BSD   2048 16384    1 # /home
</pre></blockquote>

<p>
Merk op hoe bij deze schijf momenteel slechts een deel van de capaciteit
is toegekend.

Disklabel biedt twee verschillende modi om de disklabel aan te passen:
een ingebouwde commandogestuurde editor (dit is hoe u OpenBSD oorspronkelijk
installeerde), en een volwaardige editor zoals
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vi&amp;sektion=1">vi(1)</a>.
U zal misschien de commandogestuurde editor "gemakkelijker" vinden, aangezien
hij u doorheen alle stappen gidst en op verzoek hulp biedt, maar de
volwaardige editor heeft zeker ook nut.

<p>
Laten we aan het bovenstaande systeem een partitie toevoegen.

<p>
<blockquote>
<i>Waarchuwing: Wanneer u aan uw disklabel begint te peuteren, brengt u
alle gegevens op uw schijf in gevaar.
Zorg ervoor dat uw gegevens gebackupt zijn alvorens een bestaande disklabel
te wijzigen!</i>
</blockquote>

<p>
We zullen de ingebouwde commandogestuurde editor gebruiken, die aangeroepen
wordt met de "-E" optie van disklabel(8).

<blockquote><pre>
# <b>disklabel -E wd0</b>
...
> a k
offset: [36680096] 
size: [2893591969] 1T
Rounding to cylinder: 2147483536
FS type: [4.2BSD] 
> p m
OpenBSD area: 64-2930272065; size: 1430796.9M; free: 364310.8M
#                size           offset  fstype [fsize bsize  cpg]
  a:           500.0M               64  4.2BSD   2048 16384    1 # /
  b:          2048.5M          1024128    swap                   
  c:       1430799.4M                0  unused                   
  d:          2048.5M          5219424  4.2BSD   2048 16384    1 # /usr
  e:          2048.5M          9414720  4.2BSD   2048 16384    1 # /tmp
  f:         10240.5M         13610016  4.2BSD   2048 16384    1 # /var
  h:          1024.2M         34582464  4.2BSD   2048 16384    1 # /home
  k:       1048575.9M         36680192  4.2BSD   8192 65536    1
> q
Write new label?: [y]
</pre></blockquote>

In dit geval was disklabel(8) vriendelijk genoeg om een goede start "offset"
te berekenen voor de partitie.
In veel gevallen zal het dit kunnen doen, maar als u "gaten" hebt in de
disklabel (dus u hebt een partitie verwijderd, of u houdt er gewoon van om
uw leven ellendig te maken) kan het gebeuren dat u met pen en papier de
juiste offset moet berekenen.
Merk op dat hoewel disklabel(8) een beetje gezondheidscontrole uitvoert,
het heel goed mogelijk is om hier heel verkeerde dingen te doen.
Wees voorzichtig, begrijp de betekenis van de getallen die u ingeeft.

<p>
Op de meeste OpenBSD platformen zijn er zestien disklabel-partities
beschikbaar, aangeduid van "a" tot "p".
(bepaalde "speciale" systemen kunnen er slechts acht hebben).
Elke disklabel zou een 'c' partitie moeten hebben, met een "fstype" van
"unused", die de gehele fysische schijf bedekt.
Als uw disklabel er niet zo uitziet, moet hij hersteld worden, de "D" optie
(zie hieronder) kan helpen.
Probeer nooit de "c" partitie te gebruiken voor iets anders dan toegang te
krijgen tot de "raw" sectoren van de schijf, probeer niet om een
bestandssysteem aan te maken op "c".
Op de boot device wordt "a" gereserveerd voor de rootpartitie, en is "b"
de swappartitie, maar alleen de boot device maakt dit onderscheid.
Andere devices kunnen alle vijftien partities behalve "c" gebruiken voor
bestandssystemen.

<p>
<h3>Disklabel trucs en tips</h3>
<ul>
<li><b>Zoek hulp:</b>  In de commandogestuurde modus, geeft het induwen van
"?" een lijst van beschikbare commando's.
"M" zal de man pagina voor disklabel(8) tonen.

<li><b>Terugzetten naar standaard:</b> In sommige gevallen kan u wensen om
volledig van nul te beginnen en alle bestaande disklabel informatie te
verwijderen.
Het "D" commando zal de label terugzetten op de standaard, alsof er nooit
een disklabel op de schijf was geweest.

<li><b>Een disklabel dupliceren:</b> In sommige gevallen kan u wensen de
partitionering van één schijf naar een andere kopiëren, maar niet exact
(u wenst bijvoorbeeld dezelfde partities te hebben, maar op verschillende
schijfgroottes).
Gebruik de '-e' (volwaardige editor) modus van disklabel(8) om de partities
van de "model"schijf te kopiëren, plak ze in de nieuwe schijf, verwijder
de 'c' partitie van het model, bewaar, en u hebt de schijflayout naar de
andere schijf gekopieerd zonder haar basisparameters te wijzigen.

<li>(sparc/sparc64) <b>Zet swap niet aan het begin van uw schijf.</b>
Terwijl Solaris de swap vaak aan het begin van een disk zet, vereist
OpenBSD dat de boot partitie aan het begin van de disk staat.

<li>(fdisk platformen) <b>Laat de eerste track vrij:</b>
Op platformen die fdisk(8) gebruiken, kunt u het best de eerste logische track
ongebruikt laten, zowel in disklabel(8) als in fdisk(8).
Op "moderne" computers (dat is bijna alles dat OpenBSD draait) maakt
het exacte aantal eigenlijk niet uit, maar voor prestatieredenen op de
nieuwste schijven is het goed om partities uit te lijnen op grenzen van 4k.
Om deze reden laat OpenBSD de eerste partitie nu bij block 64 beginnen
in plaats van 63.

<li><b>Devices zonder een disklabel:</b>
Als een device momenteel geen OpenBSD disklabel heeft maar een ander
bestandssysteem (bijvoorbeeld een schijf met een vooraf bestaand FAT32
bestandssysteem), zal de OpenBSD kernel er één "creëren" in het geheugen,
en die kan de basis vormen voor een formele OpenBSD disklabel om op de
schijf opgeslagen te worden.
Als er echter een disklabel aangemaakt en naar de schijf weggeschreven
wordt, en er later een niet-OpenBSD bestandssysteem wordt toegevoegd,
dan zal de disklabel niet automatisch geüpdatet worden.
U moet dit zelf doen als u wil dat OpenBSD toegang krijgt tot dat
bestandssysteem.
Meer daarover <a href="faq14.html#foreignfsafter">hieronder</a>.

<li><b>"q" vs. "x":</b>
Om historische redenen bewaart "q" in de commandogestuurde modus van de
editor de wijzigingen en verlaat het programma, en "x" gaat er uit zonder
te bewaren.
Dit is het tegenovergestelde van wat vele mensen nu gewoon zijn in andere
omgevingen.
disklabel(8) waarschuwt wel alvorens de wijzigingen te bewaren, maar het
zal er snel en stil uit gaan met "x".

<li><b>Auto-partitioning:</b>
Nieuwe gebruikers wordt aangeraden om het 'A' commando te gebruiken om
automatisch een aanbevolen disklabel te creëren.
U kunt het automatisch gecreëerde label dan aanpassen aan uw behoefte.


</ul>


<a name="NewDisk"></a>
<h2>14.4 - Extra schijven toevoegen in OpenBSD</h2>
<!-- XXX whoa. this section needs rework -->
<p>
Zodra u uw schijf <b>JUIST</b> geïnstalleerd krijgt, moet u
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
(<i>alleen i386</i>) en
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
gebruiken om uw schijf in te stellen in OpenBSD.

<p>
Voor i386 mensen, begin met fdisk. Andere architecturen kunnen dit negeren.
In het onderstaande voorbeeld voegen we een derde SCSI-achtige schijf toe
aan het systeem.

<blockquote><pre>
# <b>fdisk -i sd2</b>
</pre></blockquote>

Dit zal de "echte" partitietabel van de schijf initialiseren voor exclusief
gebruik door OpenBSD.
Vervolgens moet u er een disklabel voor aanmaken. Dit zal verwarrend lijken.

<blockquote><pre>
# <b>disklabel -e sd2</b>

<i>(scherm wordt leeg, uw $EDITOR verschijnt)</i>
type: SCSI
<i>...bla...</i>
sectors/track: 63
total sectors: 6185088
<i>...bla...</i>
16 partitions:
#        size   offset    fstype   [fsize bsize   cpg]
  c:  6185088        0    unused        0     0         # (Cyl.    0 - 6135)
  d:  1405080       63    4.2BSD     1024  8192    16   # (Cyl.    0*- 1393*)
  e:  4779945  1405143    4.2BSD     1024  8192    16   # (Cyl. 1393*- 6135)
</pre></blockquote>

Ten eerste, negeer de 'c' partitie, die is er altijd en dient om programma's
als disklabel te laten functioneren!
Fstype voor OpenBSD is 4.2BSD.
Total sectors is de totale grootte van de schijf.  Stel dat dit
een 3 gigabyte schijf is.  Drie gigabytes betekent in schijffabrikant-termen
3000 megabytes.  Deel dus 6185088/3000 (gebruik
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&amp;sektion=1">bc(1)</a>).
U bekomt 2061. Om dus partitiegroottes te verzinnen voor a, d, e, f, g, ...
vermenigvuldigt u gewoon X*2061 om X megabytes ruimte te krijgen op die
partitie.
De offset voor uw eerste nieuwe partitie moet hetzelfde zijn als de
"sectors/track" eerder vermeld in de uitvoer van disklabel. Voor ons is dit
63.  De offset voor elke volgende partitie moet een combinatie zijn van de
grootte van elke partiite en de offset van elke partitie (behalve de 'c'
partitie, aangezien die geen rol speelt in deze vergelijking.)

<p>
Of, als u gewoon één partitie op de schijf wil, stel dat u
het hele ding voor webruimte of een home directory of zoiets wil gebruiken,
neem dan gewoon de totale grootte van de schijf en trek het aantal sectoren
per track ervan af.
6185088-63 = 6185025.  Uw partitie is

<blockquote><pre>
    d:  6185025       63    4.2BSD     1024  8192    16 
</pre></blockquote>>

<b>Als dit allemaal nodeloos complex lijkt, kan u gewoon disklabel -E gebruiken
om dezelfde paritioneringsmodus te krijgen die u op uw installatieschijf heeft
verkregen!</b>
Daar kan u gewoon "96M" gebruiken om "96 megabytes" te specificeren, of
96G voor 96 gigs.

<p>
Dat was veel. Maar u bent nog niet klaar. Tenslotte moet u een bestandssysteem
aanmaken op die schijf met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>.

<blockquote><pre>
# <b>newfs sd2d </b>
</pre></blockquote>

<p>
Of hoe uw schijf ook werd genoemd door OpenBSD's schijfnummeringsschema.
(Kijk naar de uitvoer van
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=8">dmesg(8)</a>
om te zien hoe uw schijf genoemd werd door OpenBSD.)

<p>
Zoek nu uit waar u deze nieuwe partitie die u net gemaakt hebt, gaat mounten.
Stel dat u ze op /u wil plaatsen. Maak eerst de directory /u. Mount ze
vervolgens.

<blockquote><pre>
# <b>mount /dev/sd2d /u</b>
</pre></blockquote>

<p>
Voeg dit tenslotte toe aan
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a>.

<blockquote><pre>
/dev/sd2d /u ffs rw 1 1
</pre></blockquote>

<p>
Wat als u een bestaande directory zoals /usr/local moet migreren? U kunt het
best de nieuwe schijf in /mnt mounten en /usr/local naar de /mnt directory
kopiëren. Bijvoorbeeld:

<blockquote><pre>
# <b>cd /usr/local && pax -rw -p e . /mnt</b>
</pre></blockquote>

Bewerk het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a>
bestand om aan te geven dat de /usr/local partitie nu /dev/sd2d is (uw
vers geformatteerde partitie). Voorbeeld:

<blockquote><pre>
<b>/dev/sd2d /usr/local ffs rw 1 1</b>
</pre></blockquote>

<p>
Herstart in single user modus met <b>boot -s</b>, verplaats de bestaande
/usr/local naar /usr/local-backup (of verwijder het als het vandaag uw
geluksdag is)
en maak een lege directory /usr/local aan. Herstart vervolgens het systeem,
en voila, de bestanden zijn er!

<p>
<a name="SwapFile"></a>
<a name="Swap"></a>
<h2>14.5 - Hoe wordt swap gebruikt?</h2>

<h3>14.5.1 - Over swap</h3>
In het verleden werden er allerlei regels uitgestort over beheerders
over de hoeveelheid swap die op hun machines ingesteld moest worden.
Het probleem is uiteraard, dat er weinig "normale" applicaties zijn.

<p>
Een niet voor de hand liggend gebruik van swap is om een plek te bieden aan
de kernel om een kopie te dumpen van wat er in de core zit in het geval van
een system panic voor latere analyse. Om dit te laten werken, moet u een
swap-partitie hebben (geen swap-file) die minstens zo groot is als de
hoeveelheid RAM.
Het systeem bewaart standaard een kopie van deze dump in <tt>/var/crash</tt>
wanneer het opstart, dus als u dit automatisch wilt kunnen doen, dan moet
er voldoende <i>vrije</i> ruimte zijn op <tt>/var</tt>.
U kunt het systeem echter ook booten in sinlge-user mode en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=savecore&amp;sektion=8">savecore(8)</a>
gebruiken om de demp elders op te slaan.

<p>
Veel typen systemen kunnen correct geconfigureerd zijn met helemaal
geen swap.
Een firewall bijvoorbeeld zou niet moeten swappen bij normaal gebruik.
Machines met flash opslag zouden in het algemeen niet moeten swappen.
Als uw firewall op flash is gebaseerd, heeft u wellicht een (klein)
voordeel door geen swap partitie te alloceren, maar in de meeste andere
gevallen kan een swap partitie absoluut geen kwaad; de meeste schijven
hebben meer dan genoeg ruimte om een beetje swap te alloceren.

<p>
Er zijn allerlei soorten tips over het optimaliseren van swap (waar op
de schijf, aparte schijven, etc.), maar als u in een situatie zit waarbij
het optimaliseren van swap een probleem is, dan heeft u waarschijnlijk meer
RAM nodig.
De beste optimalisatie voor swap is in het algemeen om het niet nodig te
hebben.

<p>
In OpenBSD wordt swap beheerd met het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapctl&amp;sektion=8">swapctl(8)</a>
programma, dat swap devices en bestanden toevoegt, verwijdert, laat zien en
prioriteiten toekent.


<h3>14.5.2 - Swappen naar een partitie</h3>
<p>
Op OpenBSD wordt de 'b' partitie op de boot disk standaard en automatisch
gebruikt voor swap.
Hiervoor is geen configuratie nodig.
Als u geen swap op de boot disk wilt gebruiken, definieer dan geen 'b'
partitie.
Als u wilt swappen op andere partities of andere schijven, dan moet u
deze partities in <tt>/etc/fstab</tt> definiëren met regels als:

<blockquote><pre>
/dev/sd3b none swap sw 0 0
/dev/sd3d none swap sw 0 0
</pre></blockquote>


<h3>14.5.3 - Swapping to a file</h3>

(Opmerking: als u naar een bestand wil swappen omdat u
&quot;virtual memory exhausted&quot; fouten krijgt, kan u best eerst de
per-proces limieten proberen te verhogen met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh(1)</a>'s unlimit,
of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">sh(1)</a>'s ulimit.)

<p>
Soms blijkt uw eerste gok over de hoeveelheid swap die u nodig heeft
niet te kloppen en moet u extra swapruimte toevoegen, soms met spoed
(bijvoorbeeld: "Gut, als we met deze snelheid de swap opstoken, worden
we binnen 5 minuten geplet").
Als u zich in deze positie bevindt, kan het toevoegen van swapruimte in een
bestand op een bestaand filesystem een snelle oplossing bieden.

<p>
Het bestand mag niet op een bestandssysteem staan
dat SoftUpdates ingeschakeld heeft (dit is standaard uitgeschakeld). Om te
beginnen kan u zien hoeveel swap u momenteel hebt en hoeveel u gebruikt met de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=swapctl&amp;sektion=8">swapctl(8)</a>
utility. U kan dit doen met het commando:

<blockquote><pre>
$ <b>swapctl -l</b>
Device      512-blocks     Used    Avail Capacity  Priority
swap_device      65520        8    65512     0%    0
</pre></blockquote>

<p>
Dit toont de devices die momenteel gebruikt worden om te swappen en hun
huidige statistieken. In het bovenstaande voorbeeld is er slechts
één device, met name &quot;swap_device&quot;.
Dit is het voorgedefinieerde gebied op de schijf dat gebruikt wordt om te
swappen. (Verschijnt als partitie b bij het bekijken van disklabels.) Zoals
u ook kan zien in het bovenstaande voorbeeld, wordt dat device momenteel
niet veel gebruikt, maar voor de bedoeling van dit document zullen we doen
alsof er 32M extra benodigd is.

<p>
De eerste stap om een bestand als een swap device in te stellen, is om een
bestand aan te maken. Het beste is om dit te doen met de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dd&amp;sektion=1">dd(1)</a>
utility. Hier is een voorbeeld van het aanmaken van het bestand
<i>/var/swap</i> dat 32M groot is.

<blockquote><pre>
$ <b>sudo dd if=/dev/zero of=/var/swap bs=1k count=32768</b>
32768+0 records in
32768+0 records out
33554432 bytes transferred in 20 secs (1677721 bytes/sec)
</pre></blockquote>

<p>
Zodra dit gebeurd is, kunnen we swappen naar dat device aanzetten. Gebruik
het volgende commando om het swappen naar dit device aan te zetten

<blockquote><pre>
$ <b>sudo chmod 600 /var/swap</b>
$ <b>sudo swapctl -a /var/swap</b>
</pre></blockquote>

<p>
Nu moeten we controleren om te zien of het juist werd toegevoegd aan de lijst
van onze swap devices.

<blockquote><pre>
$ <b>swapctl -l</b>
Device      512-blocks     Used    Avail Capacity  Priority
swap_device      65520        8    65512     0%    0
/var/swap        65536        0    65536     0%    0
Total           131056        8   131048     0%
</pre></blockquote>

<p>
Nu het bestand is ingesteld en het swappen gebeurt, moet u een lijn toevoegen
aan uw <i>/etc/fstab</i> bestand zodat dit bestand geconfigureerd wordt ook
de volgende keer als u start. Als deze lijn niet toegevoegd wordt, zal dit
swap device niet geconfigureerd worden.

<blockquote><pre>
$ <b>cat /etc/fstab</b>
/dev/wd0a / ffs rw 1 1
/var/swap /var/swap swap sw 0 0
</pre></blockquote>


<a name="SoftUpdates"></a>
<h2>14.6 - Soft Updates</h2>

<p>
Soft Updates is gebaseerd op een idee voorgesteld door
<a href="http://www.ece.cmu.edu/~ganger/papers/CSE-TR-254-95/">Greg Ganger
en Yale Patt</a> en ontwikkeld voor FreeBSD door
<a href="http://www.mckusick.com/softdep/">Kirk McKusick</a>.
SoftUpdates legt een gedeeltelijke schikking op aan de buffer cache operaties
die toelaat de vereiste voor het synchroon schrijven van directory entries
te verwijderen uit de FFS code. Dus, een grote performantiestijging wordt
waargenomen in schijf-schrijfprestatie.

<p>
Soft updates inschakelen moet gedaan worden met een mount-optie. Bij het
mounten van een partitie met de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;sektion=8">mount(8)</a> 
utility, kan u specificeren dat u soft updates wenst in te schakelen op die
partitie. Hieronder is een voorbeeld
<i><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">/etc/fstab(5)</a></i> 
lijn die één partitie <i>sd0a</i> heeft die we graag zouden
mounten met soft updates.

<blockquote><pre>
/dev/sd0a / ffs rw,softdep 1 1
</pre></blockquote>

<p>
Opmerking voor sparc gebruikers: Schakel soft updates niet in op sun4 of
sun4c machines. Deze architecturen ondersteunen slechts een heel beperkte
hoeveelheid kernelgeheugen en kunnen deze functionaliteit niet gebruiken.
sun4m machines zijn echter wel goed.

<p>
<a name="Boot386"></a>
<a name="BootAmd64"></a>
<h2>14.7 - Hoe booten OpenBSD/i386 en OpenBSD/amd64?</h2>
Het bootproces voor OpenBSD/i386 en OpenBSD/amd64 is niet triviaal, en
begrijpen hoe het werkt, kan nuttig zijn om een probleem te onderzoeken
wanneer er dingen niet werken.
Er zijn vier sleutelelementen voor het bootproces:
<ol>
<li><b><i>Master Boot Record (MBR):</i></b> De Master Boot Record is de
eerste 512 bytes op de schijf.
Deze bevat de primaire partitietabel en een klein programma om de
Partition Boot Record (PBR) te laden.
Merk op dat in sommige omgevingen, de term "MBR" gebruikt wordt om alleen
naar het code-gedeelte van dit eerste blok op de schijf te verwijzen,
veeleer dan naar het volledige eerste blok (inclusief de partietabel).
Het is cruciaal om de betekenis te begrijpen van "de MBR initaliseren" -- in
de terminologie van OpenBSD zou dit het herschrijven van de volledige MBR
inhouden, daarbij de bestaande partitie-tabel wissen en niet alleen de code,
zoals het wellicht inhoudt op sommige systemen.
U zal dit meestal niet willen doen.
Gebruik in de plaats fdisk(8)'s "-u" commandoregeloptie
("<tt>fdisk -u wd0</tt>") om de MBR boot code te (her)installaren.

<p>
Hoewel OpenBSD zijn eigen MBR code bevat, bent u niet verplicht om deze te
gebruiken, aangezien praktisch gelijk welke MBR code OpenBSD kan booten.
De MBR wordt gemanipuleerd door het fdisk(8) programma, dat gebruikt wordt
zowel om de partitietabel de bewerken, als om de MBR code op de schijf te
installeren.

<p>
OpenBSD's MBR kondigt zichzelf aan met de boodschap:

<blockquote><pre>
    Using drive 0, partition 3.
</pre></blockquote>

wat de schijf en de partitie toont waar het de PBR vandaan zal laden.
Bovenop het vanzelfsprekende, toont dit ook een punt (".") achteraan, wat
aangeeft dat de machine LBA vertaling kan gebruiken om te booten.
Als de machine geen LBA translatie kon gebruiken, zou de bovenstaande
punt zijn vervangen door een puntkomma (";"), dat CHS vertaling aangeeft:

<blockquote><pre>
Using drive 0, partition 3;
</pre></blockquote>

Merk op dat het punt of kommapunt achteraan gebruikt kan worden als een
indicator van de "nieuwe" OpenBSD MBR, geïntroduceerd in OpenBSD 3.5.

<p>
<li><b><i>Partition Boot Record (PBR):</i></b>
De Partition Boot Record, ook PBR genoemd of
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&amp;sektion=8&amp;arch=i386">biosboot(8)</a>
(volgens de naam van het bestand dat de code bevat) is de eerste 512 bytes
van de OpenBSD partitie op de schijf.
De PBR is de "first-stage boot loader" voor OpenBSD.
Deze wordt geladen door de MBR code,
en heeft de taak om de OpenBSD second-stage boot loader,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386">boot(8)</a> in te laden.
Net als de MBR is de PBR een heel kleine sectie van code en gegevens,
in totaal slechts 512 bytes.
Dat is niet voldoende om een volledige bestandssysteem-bewuste toepassing
te hebben, dus veeleer dan de PBR <tt>/boot</tt> te laten lokaliseren op de
schijf, wordt de BIOS-toegankelijke locatie van <tt>/boot</tt> fysisch
in de PBR gecodeerd bij de installatie.

<p>
De PBR wordt geïnstalleerd door
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&amp;sektion=8&amp;arch=i386">installboot(8)</a>,
dat <a href="faq14.html#InstBoot">verder in dit document</a>
nader beschreven wordt.
De PBR kondigt zichzelf aan met de boodschap:
<blockquote><pre>
    Loading...
</pre></blockquote>
en geeft daarbij een punt weer voor elk bestandssysteem-blok dat het probeert
te laden.
Ook hier, de PBR toont of hij LBA of CHS gebruikt om te laden, als hij CHS
vertaling moet gebruiken, toont hij een boodschap met een kommapunt:
<blockquote><pre>
    Loading;... 
</pre></blockquote>

<p>
<li><b><i>Second Stage Boot Loader, <tt>/boot</tt>:</i></b> <tt>/boot</tt>
wordt geladen door de PBR, en heeft de taak om toegang te krijgen tot het
OpenBSD bestandssysteem via de BIOS van de machine, en om de eigenlijke
kernel te localiseren en te laden.
boot(8) geeft ook verscheidene opties en informatie door aan de kernel.
<p>
boot(8) is een interactief programma. Nadat het laadt, probeert het
<tt>/etc/boot.conf</tt> te localiseren en te lezen, indien het bestaat (dit
is niet het geval op een standaardinstallatie), en verwerkt de commando's
daarin. Tenzij anders opgelegd door <tt>/etc/boot.conf</tt>, geeft het
vervolgens een prompt aan de gebruiker:

<blockquote><pre>
probing: pc0 com0 com1 apm mem[636k 190M a20=on]
disk: fd0 hd0+
>> OpenBSD/i386 BOOT 3.21
boot>
</pre></blockquote>

Het geeft de gebruiker (standaard) vijf seconden om het andere taken te
geven, maar als er geen gegeven worden voor de timeout, begint het zijn
standaardgedrag: de kernel, <tt>bsd</tt>, inladen vanaf de root partitie
van de eerste harde schijf.
De second-stage boot loader onderzoekt uw systeem hardware via de BIOS
(aangezien de OpenBSD kernel niet geladen is).
Hierboven kan u enkele dingen zien die het gezocht en gevonden heeft:
<ul>
<li><b>pc0</b> - de standaard toetsenbord en video display van een i386 systeem.
<li><b>com0, com1</b> - Twee seriële poorten
<li><b>apm</b> - Advanced Power Management BIOS functies
<li><b>636k 190M</b> - De hoeveelheid conventioneel (onder 1M) en
extended (boven 1M) geheugen die het gevonden heeft
<li><b>fd0 hd0+</b> - De gevonden BIOS schijf devices, in dit geval, een
diskette en een harde schijf.
</ul>

Het '+' teken na de "hd0" geeft aan dat de BIOS tegen <tt>/boot</tt> gezegd
heeft dat deze schijf toegankelijk is via LBA.
Bij het uitvoeren van een eerste installatie zult u soms een '*' zien na een
harde schijf -- dit geeft een schijf aan die geen geldige OpenBSD disklabel
heeft.

<p>
<li><b><i>Kernel: <tt>/bsd</tt></i>:</b>  Dit is het doel van het bootproces,
om de OpenBSD kernel in RAM te laden en juist te laten draaien.
Zodra de kernel geladen is, heeft OpenBSD rechtstreeks toegang tot de
hardware, niet langer via de BIOS.

</ol>

Dus, het prille begin van het bootproces kan er als volgt uitzien:

<blockquote><pre>
Using drive 0, partition 3.                      <b><i>&lt;- MBR</i></b>
Loading....                                      <b><i>&lt;- PBR</i></b>
probing: pc0 com0 com1 apm mem[636k 190M a20=on] <b><i>&lt;- /boot</i></b>
disk: fd0 hd0+
>> OpenBSD/i386 BOOT 3.21
boot>
booting hd0a:/bsd 4464500+838332 [58+204240+181750]=0x56cfd0
entry point at 0x100120

[ using 386464 bytes of bsd ELF symbol table ]
Copyright (c) 1982, 1986, 1989, 1991, 1993       <b><i>&lt;- Kernel</i></b>
        The Regents of the University of California.  All rights reserved.
Copyright (c) 1995-2013 OpenBSD.  All rights reserved.  http://www.OpenBSD.org

OpenBSD 5.4 (GENERIC) #37: Tue Jul 30 12:05:01 MDT 2013
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
   ...
</pre></blockquote>


<h3>What kan er verkeerd gaan</h3>
<ul>
<li><b>Slechte/ongeldige/incompatibele MBR:</b>
Gewoonlijk heeft een gebruikte harde schijf al wat MBR code op zijn plaats,
maar als de schijf nieuw is of verplaatst wordt vanuit een verschillend
platform, EN u antwoordt niet "w" op de "Use (W)hole disk or (E)dit the MBR?"
vraag van het <a href="faq4.html#InstDisks">installatieproces</a>, kan u
komen te zitten met een schijf zonder geldige MBR, en deze zal dus niet
bootable zijn, ook al heeft ze een geldige partitietabel.

<p>
U kan de OpenBSD MBR op uw schijf installeren met het fdisk programma.
Boot vanaf uw installatiemedium, kies "Shell" om een commandoprompt te krijgen:

<blockquote><pre>
# <b>fdisk -u wd0</b>
</pre></blockquote>

U kan met fdisk ook een specieke MBR naar de schijf schrijven:
<blockquote><pre>
# <b>fdisk -u -f /usr/mdec/mbr wd0 </b>
</pre></blockquote>

dit zal het bestand <tt>/usr/mdec/mbr</tt> installeren als MBR van uw systeem.
Dit welbepaald bestand is op een standaard OpenBSD installatie toevallig de
standaard MBR die ook in fdisk ingebouwd zit, maar gelijk welke andere
MBR zou hier kunnen gespecificeerd worden.

<li><b>Ongeldige <tt>/boot</tt> locatie geïnstalleerd in PBR:</b>
Wanneer installboot(8) de partition boot record installeert, schrijft het het
bloknummer en offset van de inode van <tt>/boot</tt> in de PBR.
Daarom zal het verwijderen en vervangen van <tt>/boot</tt> zonder opnieuw
<a href="faq14.html#InstBoot">installboot(8)</a> uit te voeren, ervoor zorgen
dat uw systeem niet bootable is, aangezien de PBR zal inladen wat er toevallig
aangeduid wordt door de inode die er in gespecificeerd is, wat bijna zeker
niet langer de gewenste second-stage boot loader zal zijn!

Aangezien <tt>/boot</tt> gelezen wordt met BIOS aanroepen, waren oude versies
van de PBR gevoelig aan BIOS schijfvertaling. Als u de schijfgeometrie
veranderde (bv. u nam ze uit een computer die CHS vertaling gebruikt en
verplaatste ze naar een die LBA vertaling gebruikt, of u veranderde zelfs
een vertalingsoptie in uw BIOS), dan zou het <i>voor de BIOS lijken</i>
alsof het op een andere locatie stond (een ander numeriek blok moet
opgevraagd worden om dezelfde gegevens van de schijf te krijgen), dus u had
installboot(8) moeten uitvoeren alvorens het systeem kon herstart worden.
De nieuwe (vanaf OpenBSD 3.5 en later) PBR is veel toleranter voor
veranderingen in vertaling.
</ul>

Aangezien de PBR heel klein is, is zijn bereik van foutboodschappen vrij
beperkt, en een beetje cryptisch. De meest waarschijnlijke boodschappen zijn:

<ul>
<li><b>ERR R</b> -- BIOS gaf een fout bij het proberen lezen van een blok
vanaf de schijf.
Gewoonlijk betekent dit precies wat het zegt: uw schijf was niet leesbaar.
<li><b>ERR M</b> -- Er werd een ongeldig
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=magic&amp;sektion=5">magic(5)</a>
nummer gelezen in de hoofding van de second-stage bootloader's.
Dit betekent in het algemeen dat wat er ook ingelezen werd, NIET
<tt>/boot</tt> was, wat gewoonlijk betekent dat installboot(8) niet juist
werd uitgevoerd, het /boot bestand aangepast werd, of u de mogelijkheid
van uw BIOS om een <a href="#LargeDrive">grote schijf</a> te lezen, oversteeg.

</ul>
Andere foutboodschappen worden uitgebreid uitgelegd in de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&amp;sektion=8&amp;arch=i386">biosboot(8)</a>
manual pagina.

<p>
Voor meer informatie over het i386 bootproces, zie
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot_i386&amp;sektion=8&amp;arch=i386">boot_i386(8)</a>
<li><a href="http://www.ata-atapi.com/hiw.html">http://www.ata-atapi.com/hiw.html</a>
  Hale Landis' "How it Works" documenten.
</ul>

<a name="LargeDrive"></a>
<h2>14.8 - Wat zijn de problemen met grote schijven in OpenBSD?</h2>

<p>
OpenBSD ondersteunt zowel FFS als FFS2 (ook bekend als UFS en UFS2)
bestandssystemen.
FFS is het historische OpenBSD bestandssysteem, FFS2 is nieuw vanaf 4.3.
Alvorens de grenzen van elk systeem te bekijken, moeten we enkele meer
algemene systeemgrenzen bekijken.

<p>
Natuurlijk zijn de mogelijkheden van bestandssystemen en de mogelijkheden van
bepaalde hardware twee verschillende dingen.
Een nieuwere 250G harde schijf kan problemen hebben op oudere (pre >137G
standaarden) interfaces (hoewel ze voor het grootste deel gewoon prima werken),
en bij sommige heel oude SCSI adapters werden
problemen gezien met meer moderne schijven, en sommige oudere BIOSen zullen
vasthangen wanneer ze een harde schijf met moderne grootte tegenkomen.
U moet natuurlijk de mogelijkheden van uw hardware en boot code respecteren.

<h3>Partitiegrootte en -locatie beperkingen</h3>
Jammer genoeg is de volledige mogelijkheid van het besturingssysteem niet
beschikbaar tot NADAT het besturingssysteem in het geheugen geladen is.
Het boot proces moet het boot RAM van het systeem gebruiken (en wordt
er dus door beperkt).
 
<p>
Om deze reden moet het volledige /bsd bestand (de kernel) op de schijf staan
binnen de door het boot ROM adresseerbare gebied.
Dit betekent dat op sommige oudere i386 systemen, de root partitie volledig
binnen de eerste 504M moet vallen, maar nieuwere computers kunnen beperkingen
van 2G, 8G, 32G, 128G of meer hebben.
Het is de moeite waard om op te merken dat vele relatief nieuwe computers die
schijven groter dan 128G ondersteunen, in feite BIOS beperkingen hebben
waardoor ze enkel van binnen de eerste 128G kunnen booten.
U kan deze systemen met grotere schijven gebruiken, maar uw root partitie
moet vallen binnen de ruimte die ondersteund wordt door het boot ROM.
 
<p>
Merk op dat het mogelijk is om een 40G schijf op een oude 486 te installeren
en OpenBSD er op te laden als één grote partitie, en te denken
dat u met succes de bovenstaande regel overtreden hebt. Het kan u echter
op de meest onaangename manier komen kwellen:

<ul>
  <li>U installeert op de 40G / partitie.  Het werkt, omdat het basis
besturingssysteem en alle bestanden ervan (/bsd inbegrepen) binnen de eerste
504M staan.
  <li>U gebruikt het systeem, en bekomt hierop uiteindelijk meer dan 504M aan
bestanden.
  <li>U doet een upgrade en kopieert uw nieuwe /bsd over de oude.
  <li>U herstart.
  <li>U krijgt een boodschap als "ERR M" of andere problemen bij het booten.
</ul>
<p>
Waarom? Omdat wanneer u het nieuwe /bsd bestand "over" kopieerde, dit niet
het oude overschreef, het werd een nieuwe locatie toegekend op de schijf,
waarschijnlijk buiten het 504M bereik dat het BIOS ondersteunt. De
boot loader kon het bestand /bsd niet opvragen, en het systeem hing vast.

<p>
Om OpenBSD te kunnen booten, moeten de boot loaders (biosboot(8) en
<tt>/boot</tt> in het geval van i386/amd64) en de kernel (<tt>/bsd</tt>)
binnen het door het BIOS ondersteunde bereik zitten, en binnen hun eigen
mogelijkheden.
Om op veilig te spelen, is de regel eenvoudig:

<blockquote>
<b>De volledige root partitie moet binnen de door het BIOS van de computer
(of door het boot ROM) adresseerbare ruimte vallen.</b>
</blockquote>

<p>
Sommige niet-i386 gebruikers denken dat ze hier immuun voor zijn, maar
de meeste platformen hebben een vorm van boot ROM beperking voor schijfgrootte.
Helemaal zeker te weten komen wat die beperking is, kan echter moeilijk zijn.

<p>
Dit is nog een andere goede reden om <a href="faq4.html#Partitioning">uw schijf
te partitioneren</a>, veeleer dan één grote partitie te
gebruiken.

<h3>fsck(8) tijd- en geheugenvereisten</h3>
Een andere overweging i.v.m. grote bestandssystemen is de tijd en het
geheugen vereist om
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
uit te voeren op het bestandssysteem na een crash of stroomonderbreking.
Men kan beter niet een 120G bestandssysteem zetten op een systeem met 32M RAM
en verwachten dat het met succes fsck(8) uitvoert na een crash.
Een grove richtlijn is dat het systeem ten minste 1M beschikbaar geheugen
zou moeten hebben voor elke 1G aan schijfruimte om met succes fsck uit te
voeren op de schijf.
Swap kan hier gebruikt worden, maar met een aanzienlijk performantieverlies,
zo erg dat het gewoonlijk onaanvaardbaar is, tenzij in speciale gevallen.

<p>
De tijd vereist om fsck op de schijf uit te voeren, kan een probleem worden
naarmate het bestandssysteem uitbreidt, maar u hoeft alleen de schijfruimte
te fsck'en die werkelijk gealloceerd is aan gemounte bestandssystemen.
Dit is nog een reden waarom u NIET al uw schijfruimte wil toekennen gewoon
omdat ze er is.
Bestandssystemen mounten met RO of ze niet mounten helpt om te vermijden
dat ze gefsck(8)ed moeten worden na het struikelen over een netsnoer.
Het reduceren van het aantal inodes (met de -i optie van newfs) kan ook
helpen om de fsck-tijd te verbeteren, ervan uitgaande dat u ze ook echt
niet nodig heeft.

<p>
Vergeet niet dat als u meerdere schijven in het systeem hebt, het zou kunnen
dat ze allemaal terzelfdertijd gefsck(8)ed worden na een crash, dus dat zou
meer RAM kunnen vergen dan een enkele schijf.

<h3>FFS vs. FFS2</h3>
Met FFS ondersteunt OpenBSD een individueel bestandssysteem tot
2<sup>31</sup>-1, ofwel 2,147,483,647 blokken, en aangezien elke blok
512 bytes groot is, is dat iets minder dan 1T.
FFS2 kan veel grotere bestandssystemen aan, hoewel andere grenzen zullen
bereikt worden lang voordat de grenzen van het bestandssysteem bereikt zijn.

<p>
De boot/installatiekernels <i>ondersteunen alleen FFS</i>, niet FFS2, dus
systeempartities met een sleutelrol (<tt>/, /usr, /var, /tmp</tt>) mogen niet
FFS2 zijn, of ernstige onderhoudsproblemen kunnen zich voordoen (er zou toch
geen reden mogen zijn waarom die partities zo groot moeten zijn).
Om deze reden worden heel grote partities best alleen gebruikt worden voor
"niet-systeem" partities, bijvoorbeeld <tt>/home, /var/www/,
/bigarray</tt>, etc.

<p>
Merk op dat niet alle controllers en drivers grote schijven ondersteunen.
Bijvoorbeeld,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ami&amp;sektion=4">ami(4)</a>
heeft een begrenzing van 2TB per logisch volume.
Wees er altijd van bewust wat er beschikbaar was op het moment dat een
controller of interface werd gemaakt en vertrouw niet op "de connector past".

<p>
<h3>Schijven groter dan 2TB</h3>
Het MBR-systeem van PC's ondersteunt alleen schijven met een grootte tot 2TB.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>
zal schijven van meer dan 2TB laten zien als 2TB.
Dit hindert OpenBSD op geen enkele wijze om grotere disks te gebruiken,
omdat het MBR alleen wordt gebruikt om het OS te kunnen starten.
Als het OS eenmaal draait worden de bestandssystemen bepaald door het
disklabel en dat heeft geen limiet van 2TB.

<p>
Om schijven groter dan 2TB te kunnen gebruiken maakt u een OpenBSD-partitie
op de schijf met fdisk, ongeacht de grootte die fdisk laat zien.
Als u de disk indeelt met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>,
gebruik dan de "b" optie om de grenzen die OpenBSD ziet (die standaard zijn
ingesteld op de grootte van de fdisk partitie) in te stellen op de gehele
schijf.
U kunt nu uw partities maken zoals u wenst.
U moet echter nog steeds de mogelijkheden van uw BIOS respecteren, die
de beperking heeft om alleen fdisk partities te snappen.
Uw 'a' partitie moet geheel binnen het fdisk-gedeelte van uw schijf
liggen, in aanvulling op eventuele beperkingen van het BIOS.


<p>
<a name="InstBoot"></a>
<h2>14.9 - Installeren van Bootblocks - i386/amd64 specifiek</h2>

<p>
OpenBSD heeft een heel robuuste bootloader die vrij onverschillig is
voor schijfgeometrie.
Hij is echter wel gevoelig voor waar het
<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=boot&amp;sektion=8&amp;arch=i386"
>/boot</a></tt> bestand zich op de schijf bevindt.
Als u iets doet waardoor boot(8) verplaatst wordt naar een nieuwe plek
op de schijf (eigenlijk een nieuwe inode), dan zal u uw systeem "breken",
het zal niet juist meer kunnen opstarten.
Om uw boot block
te herstellen zodat u normaal kan booten, plaatst u eerst een boot-CDROM
in uw CD-speler (of gebruik een bootable floppy) en typ op de boot prompt
"<tt>boot hd0a:/bsd</tt>" om het te dwingen vanaf de eerste harde schijf (en
niet vanaf de CD of diskette) te booten. Uw machine zou zoals normaal moeten
opstarten.
Nu moet u de first-stage bootloader
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&amp;sektion=8&amp;arch=i386"
>biosboot(8)</a>) herinstalleren op basis van de positie van het
<tt>/boot</tt> bestand, met het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&amp;sektion=8&amp;arch=i386"
>installboot(8)</a> programma.

<p>
Ons voorbeeld zal veronderstellen dat uw boot schijf sd0 is (maar voor
IDE zou het wd0, enz. zijn):

<blockquote><pre>
# <b>cd /usr/mdec; ./installboot /boot biosboot sd0</b>
</pre></blockquote>

Merk op dat "/boot" de fysieke locatie van het bestand "boot" is dat u
wilt gebruiken voor het booten van het systeem zoals het momenteel gemount is.
Als uw situatie enigszins afwijkt en u net geboot heeft vanaf CD, waarbij
uw 'a' partitie is gemount op /mnt, dan moet u waarschijnlijk "/mnt/boot"
gebruiken.
installboot(8) doet twee dingen -- het installeert het bestand "biosboot"
op de juiste plek in het Partition Boot Record en modificeert het met
de fysieke locatie van het "/boot" bestand.

<a name="Backup"></a>
<h2>14.10 - Zich op het ergste voorbereiden: Backup en Restore vanaf tape</h2>

<h3>Inleiding:</h3>

<p>
Als u van plan bent om iets te draaien dat een productieserver zou kunnen
genoemd worden, is het aan te raden om een vorm van backup te hebben voor
het geval één van uw vaste schijven het begeeft of de data op een andere wijze
verloren gaat.

<p>
Deze informatie zal u de standaard
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
utilities helpen gebruiken die voorzien zijn in OpenBSD.
Meer geavanceerde backup utilities, zoals
"<a href="http://www.amanda.org">Amanda</a>"
en "<a href="http://www.bacula.org">Bacula</a>"
zijn beschikbaar via
<a href="faq15.html#PkgMgmt">packages</a> om meerdere servers naar schijf en
tape te backuppen.

<h3>Backup naar tape:</h3>

<p>
Backup naar tape vereist kennis van waar uw bestandssystemen gemount zijn.
U kan te weten komen hoe uw bestandssystemen gemount zijn met het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;sektion=8">mount(8)</a>
commando op uw shell prompt. U zou uitvoer moeten krijgen gelijkaardig aan:

<blockquote><pre>
# <b>mount</b>
/dev/sd0a on / type ffs (local)
/dev/sd0h on /usr type ffs (local)
</pre></blockquote>

<p>
In dit voorbeeld staat het root (/) bestandssysteem fysisch op sd0a
dat aangeeft: SCSI-achtige vaste schijf 0, partitie a. Het /usr bestandssysteem
verblijft op sd0h, wat aangeeft: SCSI vaste schijf 0, partitie h.

<p>
Een ander voorbeeld van een meer geavanceerde mount-tabel zou kunnen zijn:

<blockquote><pre>
# <b>mount</b>
/dev/sd0a on / type ffs (local)
/dev/sd0d on /var type ffs (local)
/dev/sd0e on /home type ffs (local)
/dev/sd0h on /usr type ffs (local)
</pre></blockquote>

<p>
In dit meer geavanceerde voorbeeld staat het root (/) bestandssysteem
fysisch op sd0a. Het /var bestandssysteem staat op sd0d, het /home
bestandssysteem op sd0e en tenslotte /usr op sd0h.

<p>
Om uw machine te backup'en zal u dump de naam moeten meegeven van elke
vaste schijfpartitie. Hier is een voorbeeld van de commando's nodig voor
een backup van de eenvoudigere mount-tabel die hoger getoond werd:

<blockquote><pre>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h</b>
# <b>mt -f /dev/rst0 rewind  </b>
</pre></blockquote>

<p>
Voor het voorbeeld van de meer geavanceerde mount tabel, zou u iets gebruiken
dat lijkt op:

<blockquote><pre>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0d</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0e</b>
# <b>/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h  </b>
# <b>mt -f /dev/rst0 rewind  </b>
</pre></blockquote>

<p>
U kan de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>
man pagina bekijken om precies te leren wat elke commandolijn-optie doet. Hier
is een korte omschrijving van de parameters die hierboven gebruikt werden:

<ul>
<li><b>0</b> - Voer een level 0 dump uit, neem alles
<li><b>a</b> - Probeer automatisch de lengte van het tape medium te bepalen
<li><b>u</b> - Update het bestand /etc/dumpdates om aan te geven wanneer de
laatste backup uitgevoerd werd
<li><b>f</b> - Welk tape device te gebruiken (/dev/nrst0 in dit geval)
</ul>

<p>
Tenslotte welke partitie te backup'en (/dev/rsd0a, etc.)

<p>
Aan het einde wordt het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mt&amp;sektion=1">mt(1)</a>
commando gebruikt om de tape terug te spoelen. Bekijk de mt man
pagina voor meer opties (zoals eject).

<p>
Als u niet zeker bent van uw tape devicenaam, gebruik dan dmesg om hem te
localiseren. Een voorbeeld van een tape drive entry in dmesg zou hierop
kunnen lijken:

<blockquote><pre>
st0 at scsibus0 targ 5 lun 0: &lt;ARCHIVE, Python 28388-XXX, 5.28&gt;
</pre></blockquote>

<p>
U hebt misschien opgemerkt dat bij de backup, toegang tot de tape gebeurt
via de devicenaam "<tt>nrst0</tt>" in plaats van de "<tt>st0</tt>" naam die
in dmesg gezien wordt.
Wanneer u <tt>st0</tt> als <tt>nrst0</tt> benadert, benadert u dezelfde
fysische tape maar zegt u daarbij dat hij niet moet terugspoelen aan het
einde van de taak en benadert u het device in "raw" modus. Om meerdere
bestandssystemen naar een enkele tape te backup'en, gebruik dan zeker het
non-rewind device, als u een rewind device (<tt>rst0</tt>) gebruikt om
meerdere bestandssystemen te backup'en, zal u uiteindelijk het vorige door
het volgende bestandssysteem overschrijven dat dump naar tape probeert te
schrijven. U kan een meer uitgebreide beschrijving van verschillende tape
devices terugvinden in de dump man pagina.

<p>
Als u een klein script met de naam "backup" wou schrijven, zou dit er
ongeveer zou kunnen uitzien:

<blockquote><pre>
echo "  Starting Full Backup..."
/sbin/dump -0au -f /dev/nrst0 /dev/rsd0a
/sbin/dump -0au -f /dev/nrst0 /dev/rsd0d
/sbin/dump -0au -f /dev/nrst0 /dev/rsd0e
/sbin/dump -0au -f /dev/nrst0 /dev/rsd0h
echo
echo -n "  Rewinding Drive, Please wait..."
mt -f /dev/rst0 rewind
echo "Done."
echo
</pre></blockquote>

<p>
Als geplande nachtelijke backups gewenst zijn, zou
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cron&amp;sektion=8">cron(8)</a>
gebruikt kunnen worden om uw backup script automatisch te starten.

<p>
Het zal ook nuttig zijn om te documenteren (op een stukje papier) hoe groot
elk bestandssysteem moet zijn. U kan "<tt>df -h</tt>" gebruiken om te bepalen
hoeveel ruimte elke partitie momenteel gebruikt. Dit zal handig zijn als de
schijf het begeeft en u uw partitietabel op de nieuwe schijf opnieuw moet
maken.

<p>
Uw gegevens herstellen zal ook fragmentatie helpen reduceren. Om er zeker
van te zijn dat u alle bestanden meeneemt, is de beste manier voor een backup
het systeem rebooten in single user modus. Bestandssystemen hoeven niet
gemount te zijn om gebackupt te worden. Vergeet niet om root (/) r/w te
mounten na het booten van uw systeem in single user modus of uw dump zal
mislukken wanneer hij dumpdata probeert weg te schrijven. Geef
"<tt>bsd -s</tt>" in op de boot&gt; prompt voor single user modus.

<h3>De inhoud van een dump tape bekijken:</h3>


<p>
Nadat u voor het eerst uw bestandssystemen gebackupt hebt, zou het een
goed idee zijn om kort uw tape te testen en er zeker van te zijn dat de
gegevens er op staan zoals u verwacht.

<p>
U kan het volgende voorbeeld gebruiken om een catalogus van bestanden op
een dump tape te na te kijken:

<blockquote><pre>
# <b>/sbin/restore -tvs 1 -f /dev/rst0</b>
</pre></blockquote>

<p>
Dit zorgt ervoor dat een lijst van bestanden verschijnt die op de 1ste
partitie van de dump tape staan. Volgens de bovenstaande voorbeelden,
zou 1 uw root (/) bestandssysteem zijn.

<p>
Om te zien wat er op de 2de tape partitie staat en de uitvoer naar een
bestand te sturen, zou u een commando gelijkaardig aan dit gebruiken:

<blockquote><pre>
# <b>/sbin/restore -tvs 2 -f /dev/rst0 > /home/me/list.txt</b>
</pre></blockquote>

<p>
Als u een mount-tabel hebt zoals de eenvoudige, zou 2 /usr zijn, als de uwe
een meer geavanceerde mount-tabel is, zou 2 /var of een ander fs kunnen zijn.
Het sequentienummer stemt overeen met de volgorde waarin de bestandssystemen
naar tape geschreven worden.


<h3>Restore vanaf tape:</h3>

<p>
Het voorbeeldscenario hieronder zou nuttig zijn als uw vaste schijf het
volledig heeft laten afweten. Voor het geval u een enkel bestand vanaf
tape wil restoren, kijk de restore man pagina na en let daarbij op de
interactive mode instructies.

<p>
Als u zich goed hebt voorbereid, kan een schijf vervangen en uw gegevens
restoren een heel snel proces zijn. De standaard OpenBSD installatie/boot
diskette bevat reeds de vereiste restore utility en ook de binaries vereist
om uw nieuwe schijf te partitioneren en bootable te maken. In de meeste
gevallen zijn deze diskette en uw meest recente dump tape al wat u zal nodig
hebben om weer aan de slag te geraken.

<p>
Na het fysisch vervangen van de kapotte schijf, zijn de basisstappen om uw
gegevens te restoren de volgende:

<ul>
<li>
<p>
Boot vanaf de OpenBSD installatie/boot diskette. Bij de menuselectie kiest
u Shell. Bescherm uw tape tegen overschrijven en plaats hem in de lezer.
<br>
<li>
<p>
Maak met het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
commando een primaire OpenBSD partitie op deze nieuw geïnstalleerde
schijf. Voorbeeld:

<blockquote><pre>
# <b>fdisk -e sd0</b>
</pre></blockquote>

<p>
Zie <a href="#fdisk">fdisk FAQ</a> voor meer info.

<li>
<p>
Maak met het disklabel commando opnieuw uw OpenBSD partitietabel binnen die
primaire OpenBSD partitie die u net met fdisk hebt aangemaakt.
Voorbeeld:

<blockquote><pre>
# <b>disklabel -E sd0</b>
</pre></blockquote>

<p>
(Vergeet swap niet, zie <a href="#disklabel">disklabel FAQ</a> voor meer info)

<li>
<p>
Gebruik het newfs commando om een proper bestandssysteem te bouwen op elke
partitie die u in de vorige stap aanmaakte. Voorbeeld:

<blockquote><pre>
# <b>newfs /dev/rsd0a</b>
# <b>newfs /dev/rsd0h</b>
</pre></blockquote>

<li>
<p>
Mount uw zonet voorbereid root (/) bestandssysteem op /mnt. Voorbeeld:

<blockquote><pre>
# <b>mount /dev/sd0a /mnt</b>
</pre></blockquote>

<li>
<p>
Ga naar dat gemounte root bestandssysteem en start het restore proces.
Voorbeeld:

<blockquote><pre>
# <b>cd /mnt</b>
# <b>restore -rs 1 -f /dev/rst0</b>
</pre></blockquote>

<li>
<p>
U zal willen dat deze nieuwe schijf bootable is, gebruik het volgende om
een nieuwe MBR naar uw schijf te schrijven. Voorbeeld:

<blockquote><pre>
# <b>fdisk -i sd0</b>
</pre></blockquote>

<li>
<p>
Bovenop het wegschrijven van een nieuwe MBR naar de schijf, zal u er
boot blocks moeten op installeren. Het volgende is een kort voorbeeld:

<blockquote><pre>
# <b>cp /usr/mdec/boot /mnt/boot</b>
# <b>/usr/mdec/installboot -v /mnt/boot /usr/mdec/biosboot sd0</b>
</pre></blockquote>

<li>
<p>
Uw nieuw root bestandssysteem op de vaste schijf zou moeten klaar zijn zodat
u het kan booten en verder gaan met de rest van uw bestandssystemen te
restoren. Aangezien uw besturingssysteem nog niet volledig is, zorgt u er
voor om in single user modus te booten. Voer op de shell prompt de volgende
commando's uit om het systeem te unmounten en te stoppen:

<blockquote><pre>
# <b>umount /mnt</b>
# <b>halt</b>
</pre></blockquote>

<li>
<p>
Verwijder de installatie/boot diskette uit het station en herstart uw systeem.
Voer op de OpenBSD boot&gt; prompt het volgende commando uit:

<blockquote><pre>
boot&gt; <b>bsd -s</b>
</pre></blockquote>

<p>
De bsd -s zal ervoor zorgen dat de kernel in single user modus gestart wordt,
wat alleen een root (/) bestandssysteem vereist.

<li>
<p>
In de veronderstelling dat u de bovenstaande stappen correct hebt uitgevoerd
en er niets verkeerd gegaan is, zou u moeten terechtkomen op een prompt die
u vraagt om een shell pad in te geven of return te duwen. Duw return om sh
te gebruiken. Vervolgens zal u root in r/w willen hermounten in tegenstelling
tot read only. Voer het volgende commando uit:

<blockquote><pre>
# <b>mount -u -w /</b>
</pre></blockquote>

<li>
<p>
Zodra u / in r/w modus gehermount hebt kan u verdergaan met uw andere
bestandssystemen te restoren. Voorbeeld:

<blockquote><pre>
<i>(eenvoudige mount-tabel)</i>
# <b>mount /dev/sd0h /usr; cd /usr; restore -rs 2 -f /dev/rst0</b>

<i>(meer geavanceerde mount-tabel)</i>
# <b>mount /dev/sd0d /var; cd /var; restore -rs 2 -f /dev/rst0</b>
# <b>mount /dev/sd0e /home; cd /home; restore -rs 3 -f /dev/rst0</b>
# <b>mount /dev/sd0h /usr; cd /usr; restore -rs 4 -f /dev/rst0</b>
</pre></blockquote>

<p>
U zou "<b>restore rvsf</b>" kunnen gebruiken in plaats van gewoon rsf om
de namen van objecten te zien terwijl ze vanaf de dump set uitgepakt worden.

<li>
<p>
Tenslotte, nadat u klaar bent met al uw andere bestandssystemen op schijf
te restoren, kan u herstarten in multi-user modus. Als alles ging zoals
gepland, zal uw systeem weer in de toestand zijn waarin het zich bevond
ten tijde van uw meest recente backup, en opnieuw klaar om te gebruiken.
</ul>

<a name="MountImage"></a>
<h2>14.11 - Schijfimages mounten in OpenBSD</h2>

<p>
Om een schijfimage (ISO images, schijfimages gemaakt met dd, enz.) te mounten
in OpenBSD, moet u een
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&amp;sektion=4">vnd(4)</a>
device configureren. Bijvoorbeeld, als u een ISO image hebt staan in
<i>/tmp/ISO.image</i>, zou u de volgende stappen volgen om de image te mounten.

<blockquote><pre>
# <b>vnconfig vnd0 /tmp/ISO.image</b>
# <b>mount -t cd9660 /dev/vnd0c /mnt</b>
</pre></blockquote>

<p>
Merk op dat aangezien dit een ISO-9660 image is, zoals gebruikt door CD's
en DVD's, u als type <i>cd9660</i>
moet specificeren bij het mounten. Dit geldt ongeacht het type, u moet bv.
type <i>ext2fs</i> gebruiken bij het mounten van Linux schijfimages.

<p>
Gebruik de volgende commando's om de image te unmounten.

<blockquote><pre>
# <b>umount /mnt</b>
# <b>vnconfig -u vnd0</b>
</pre></blockquote>

<p>
Raadpleeg voor meer informatie de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnconfig&amp;sektion=8">vnconfig(8)</a>
man pagina.

<p>
<a name="pciideErr"></a>
<h2>14.12 - Help! Ik krijg fouten met IDE DMA!</h2>

<p>
DMA IDE transfers, ondersteund door
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&amp;sektion=4">pciide(4)</a>
zijn onbetrouwbaar bij vele combinaties van oudere hardware.

<p>
OpenBSD is aggressief en probeert de hoogste DMA Mode die het kan configureren.
Dit zal corruptie van gegevenstransfers veroorzaken in sommige configuraties
vanwege buggy moederbord chipsets, buggy schijven, en/of ruis op de
kabels. Gelukkig beschermt Ultra-DMA gegevenstransfers met een CRC om
corruptie te detecteren. Wanneer de Ultra-DMA CRC mislukt, zal OpenBSD
een foutboodschap geven en de operatie opnieuw proberen.

<blockquote><pre>
wd2a:  aborted command, interface CRC error reading fsbn 64 of 64-79
(wd2 bn 127; cn 0 tn 2 sn 1), retrying
</pre></blockquote>

<p>
Na enkele keren te falen, zal OpenBSD "downgraden" naar een tragere
(hopelijk meer betrouwbare) Ultra-DMA mode. Als Ultra-DMA mode 0 bereikt
is, dan zal de schijf downgraden naar PIO mode.

<p>
UDMA fouten worden vaak veroorzaakt door lage kwaliteits- of beschadigde kabels.
Kabelproblemen zouden gewoonlijk de eerste verdachte moeten zijn indien u
veel DMA fouten of onverwacht lage DMA prestatie krijgt.
Het is ook een slecht idee om de CD-ROM op hetzelfde kanaal als een harde
schijf te zetten.

<p>
Als het vervangen van de kabels het probleem niet oplost en OpenBSD niet
met succes downgrade't, of het proces zorgt ervoor dat uw machine hard
vasthangt, of veroorzaakt buitensporig veel boodschappen op de console en
in de logs, dan wil u misschien het systeem dwingen tot het standaard
gebruiken van een lager DMA of UDMA level.
Dit kan gedaan worden met <a href="faq5.html#BootConfig">UKC</a> of
<a href="faq5.html#config">config(8)</a> om de vlaggen van het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wd&amp;sektion=4">wd(4)</a>
device te veranderen.


<p>
<a name="NegSpace"></a>
<h2>14.14 - Waarom vertelt <tt>df(1)</tt> me dat ik meer dan 100% van mijn
schijf in gebruik heb?</h2>
Mensen worden soms verrast om te ontdekken dat ze <i>negatieve</i>
beschikbare schijfruimte hebben, of meer dan 100% van een bestandssysteem
in gebruik, zoals getoond door
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=df&amp;sektion=1">df(1)</a>.

<p>
Wanneer een bestandssysteem gemaakt wordt met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=newfs&amp;sektion=8">newfs(8)</a>,
wordt een beetje van de beschikbare ruimte op reserve gehouden weg van
normale gebruikers. Dit biedt een foutenmarge wanneer u per ongeluk de
schijf vult, en helpt om schijffragmentering tot een minimum te beperken.
Standaard hiervoor is 5% van de schijfcapaciteit, dus als de root gebruiker
achteloos de schijf aan het vullen geweest is, kan u tot 105% van de
beschikbare capaciteit in gebruik zien.

<p>
Als de waarde van 5% niet gepast is voor u, kan u ze veranderen met het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tunefs&amp;sektion=8">tunefs(8)</a>
commando.

<p>
<a name="OhBugger"></a>
<h2>14.15 - Partities herstellen na het verwijderen van het disklabel</h2>

<p>
Als u een beschadigde partitietabel hebt, zijn er verschillende dingen die
u kan proberen om ze te herstellen.

<p>
Ten eerste, panikeer.
Dit doet u gewoonlijk toch, dus u kan er maar beter komaf mee maken.
Doe gewoon niets doms.
Panikeer weg van uw machine.
Ontspan vervolgens, en kijk of de onderstaande stappen u niet helpen.

<p>
Er wordt voor elke schijf een kopie van het disklabel bewaard
in <tt>/var/backups</tt> als onderdeel van het dagelijkse systeemonderhoud.
In de veronderstelling dat u nog steeds de var partitie hebt, kan u
eenvoudigweg de uitvoer lezen en terugplaatsen in het disklabel.

<p>
In het geval u die partitie niet langer kan zien, zijn er twee opties.
Herstel voldoende van de schijf zodat u ze kan zien, of herstel voldoende
van de schijf zodat u uw gegevens er kan afhalen.

Afhankelijk van wat er gebeurde, kan het ene of het andere te verkiezen zijn
(bij stervende schijven wil u eerst de data, met vuile vingers kan u gewoon
het label hebben).

<p>
De eerste tool die u nodig hebt is
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scan_ffs">scan_ffs(8)</a>
(bemerk de underscore, het heet niet "scanffs").
scan_ffs(8) zal een schijf bekijken, en proberen partities te vinden en u ook
zeggen welke informatie het erover terugvindt.
U kan deze informatie gebruiken om het disklabel te reconstrueren.
Als u gewoon <tt>/var</tt> terug wil, kan u de partitie voor <tt>/var</tt>
opnieuw aanmaken, en dan het backup-label herstellen en de rest van daar uit
toevoegen.

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel;sektion=8">disklabel(8)</a>
zal de kernel zijn begrip van het disklabel updaten, en
ook het label naar de schijf proberen te schrijven.
Daarom zal u, zelfs als het gebied van de schijf dat het disklabel bevat
onleesbaar is, het kunnen
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount;sektion=8">mount(8)</a>en
tot de volgende reboot.

<p>
<a name="foreignfs"></a>
<h2>14.16 - Kan ik gegevens benaderen op andere bestandssystemen dan FFS?</h2>
<!-- This article written by Steven Mestdagh,
steven@@openbsd.org, and released under the BSD license -->

Ja. Andere ondersteunde bestandssystemen zijn: ext2 (Linux), ISO9660 en UDF
(CD-ROM, DVD media), FAT (MS-DOS en Windows), NFS, NTFS (Windows).
Sommige ervan hebben beperkte, bijvoorbeeld read-only, ondersteuning.

<p>
We zullen een algemeen overzicht geven van het gebruik van één van deze
bestandssystemen onder OpenBSD.
Om een bestandssysteem te kunnen gebruiken, moet het gemount worden.
Raadpleeg voor details en mountopties alstublieft de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;sektion=8">mount(8)</a>
manual pagina, en die van het mount commando voor het bestandssysteem dat u
zal mounten, bv. mount_msdos, mount_ext2fs, ...

<p>
Eerst moet u weten op welk device uw bestandssysteem zich bevindt. Dit kan
gewoon uw eerste harde schijf, <tt>wd0</tt> of <tt>sd0</tt>, zijn maar het
kan ook minder voor de hand liggend zijn.
Alle herkende en geconfigureerde devices op uw systeem worden vermeld in
de uitvoer van het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=1">dmesg(1)</a>
commando: een devicenaam, gevolgd door een beschrijving op één lijn van het
device.
Mijn eerste CD-ROM lezer wordt bijvoorbeeld als volgt herkend:

<blockquote><pre>
cd0 at scsibus0 targ 0 lun 0: &lt;COMPAQ, DVD-ROM LTD163, GQH3&gt; SCSI0 5/cdrom removable
</pre></blockquote>

<p>
Voor een veel kortere lijst van beschikbare schijven kan u het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>
commando gebruiken.
Het commando

<blockquote><pre>
# sysctl hw.disknames
</pre></blockquote>

zal alle schijven tonen die uw systeem momenteel kent, bijvoorbeeld:

<blockquote><pre>
hw.disknames=cd0:,cd1:,wd0:,fd0:,cd2:
</pre></blockquote>

<p>
Op dit punt is het tijd om te weten te komen welke partities er op het device
zijn, en in welke partitie het gewenste bestandssysteem zit.
Daarvoor onderzoeken we het device met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>.
De disklabel bevat een lijst van partities, met een maximum aantal van 16.
Partitie c duidt altijd het volledige device aan.
Partities a-b en d-p worden gebruikt door OpenBSD.
Partities i-p kunnen automatisch toegewezen worden aan bestandssystemen van
andere besturingssystemen.
In dit geval zal ik de disklabel van mijn harde schijf bekijken, die een
aantal verschillende bestandssystemen bevat.

<p>
<b>OPMERKING: OpenBSD werd na de andere besturingssystemen geïnstalleerd</b>
op dit systeem, en tijdens de installatie werd een disklabel op de schijf
geïnstalleerd die partities bevat voor zowel de "native" als de vreemde
bestandssystemen.
Als u echter vreemde bestandssystemen installeert nadat de OpenBSD disklabel
reeds geïnstalleerd is op de schijf, moet u ze nadien handmatig toevoegen of
wijzigen. Dit zal uitgelegd worden in <a href="#foreignfsafter">deze
subsectie</a>.

<blockquote><pre>
# <b>disklabel wd0</b>

# using MBR partition 2: type A6 off 20338290 (0x1365672) size 29318625 (0x1bf5de1)
# /dev/rwd0c:
type: ESDI
disk: ESDI/IDE disk
label: ST340016A       
duid: d920a43a5a56ad5f
flags:
bytes/sector: 512
sectors/track: 63
tracks/cylinder: 16
sectors/cylinder: 1008
cylinders: 16383
total sectors: 78165360
boundstart: 20338290
boundend: 49656915
drivedata: 0 

16 partitions:
#             size        offset  fstype [fsize bsize  cpg]
  a:        408366      20338290  4.2BSD   2048 16384   16 # /
  b:       1638000      20746656    swap
  c:      78165360             0  unused
  d:       4194288      22384656  4.2BSD   2048 16384   16 # /usr
  e:        409248      26578944  4.2BSD   2048 16384   16 # /tmp
  f:      10486224      26988192  4.2BSD   2048 16384   16 # /var
  g:      12182499      37474416  4.2BSD   2048 16384   16 # /home
  i:         64197            63 unknown
  j:      20274030         64260 unknown
  k:       1975932      49656978   MSDOS
  l:       3919797      51632973 unknown
  m:       2939832      55552833  ext2fs
  n:       5879727      58492728  ext2fs
  o:      13783707      64372518  ext2fs

</pre></blockquote>

<p>
Zoals gezien kan worden in de bovenstaande uitvoer, worden eerst de OpenBSD
partities opgesomd.
Daarbuiten zijn er een aantal ext2 partities en één MSDOS partitie, en ook
enkele 'onbekende' partities. Op i386 en amd64 systemen kan u daarover
gewoonlijk meer te weten komen met de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
utility.
Voor de nieuwsgierige lezer: partitie i is een onderhoudspartitie aangemaakt
door de verkoper, partitie j is een NTFS partitie en partitie l is een Linux
swappartitie.

<p>
Zodra u bepaald hebt welke partitie het is die u wil gebruiken, kan u
overgaan tot de laatste stap: het bestandssysteem dat er in zit mounten.
De meeste bestandssystemen worden ondersteund in de GENERIC kernel: kijk
maar eens naar het kernelconfiguratiebestand, te vinden in de
<tt>/usr/src/sys/arch/&lt;<i>arch</i>&gt;/conf</tt> directory.
Als u één van de bestandssystemen wil gebruiken die niet ondersteund zijn
in GENERIC, zal u <a href="faq5.html#Options">een aangepaste kernel moeten
bouwen</a>.

<p>
Wanneer u de benodigde informatie hebt verzameld zoals hierboven vermeld,
is het tijd om het bestandssysteem te mounten.
Laten we aannemen dat een directory <tt>/mnt/anderfs</tt> bestaat, die we
zullen gebruiken als mountpunt waar we het gewenste bestandssysteem zullen
mounten.
In dit voorbeeld zullen we het ext2 bestandssysteem in partitie m mounten:

<blockquote><pre>
# <b>mount -t ext2fs /dev/wd0m /mnt/anderfs</b>
</pre></blockquote>

<p>
Als u van plan bent dit bestandssysteem regelmatig te gebruiken, kan u
uzelf wat tijd besparen door er een lijn voor in <tt>/etc/fstab</tt> te
plaatsen, bijvoorbeeld iets als:

<blockquote><pre>
/dev/wd0m /mnt/anderfs ext2fs rw,noauto,nodev,nosuid 0 0
</pre></blockquote>

Bemerk de 0 waarden in het vijfde en zesde veld.
Dit betekent dat we niet vereisen dat het bestandssysteem gedumpt moet
worden, en gecontroleerd met fsck.
In het algemeen zijn dat dingen die u wil laten afhandelen door het
moeder-besturingssyssteem geassocieerd met het bestandssysteem.

<p>
<a name="foreignfsafter"></a>
<h3>14.16.1 - De partities staan niet in mijn disklabel! Wat moet ik doen?</h3>

Als u vreemde bestandssystemen op uw systeem installeert (vaak het resultaat
van het toevoegen van een nieuw besturingssysteem) nadat u reeds OpenBSD
hebt geïnstalleerd, dan zal er reeds een disklabel aanwezig zijn, en deze
zal niet automatisch geüpdatet worden om de nieuwe vreemde
bestandssysteem-partities te bevatten.
Als u ze wil gebruiken, moet u deze partities handmatig toevoegen of wijzigen
met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>.

<p>
Als voorbeeld heb ik één van mijn bestaande ext2 partities gewijzigd: met
het Linux fdisk programma heb ik de grootte van de 'o' partitie (zie
disklabel uitvoer hierboven) gereduceerd tot 1G.
We zullen ze gemakkelijk kunnen herkennen aan haar startpositie
(offset: 64372518) en grootte (13783707).
Merk op dat deze waarden sectornummers zijn, en dat het gebruik van
sectornummers (niet megabytes of gelijk welke andere maat) de meest exacte
en veiligste manier is om deze informatie uit te lezen.

<p>
Vóór de wijziging zag de partitie er als volgt uit met OpenBSD's
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
utility (alleen relevante uitvoer overlatend):

<blockquote><pre>
# fdisk wd0
. . .
Offset: 64372455        Signature: 0xAA55
         Starting       Ending       LBA Info:
 #: id    C   H  S -    C   H  S [       start:      size   ]
------------------------------------------------------------------------
 0: 83 4007   1  1 - 4864 254 63 [    64372518:    13783707 ] Linux files*
. . .
</pre></blockquote>

Zoals u kan zien, zijn de startpositie en grootte precies die die eerder
door disklabel(8) vermeld werden.
(Laat u niet misleiden door de waarde aangeduid door "Offset": ze verwijst
naar de startpositie van de "extended" partitie waarin de ext2 partitie
vervat zit.)

<p>
Na het wijzigen van de partitiegrootte vanuit Linux, ziet ze er zo uit:

<blockquote><pre>
# fdisk wd0
. . .
Offset: 64372455        Signature: 0xAA55
         Starting       Ending       LBA Info:
 #: id    C   H  S -    C   H  S [       start:      size   ]
------------------------------------------------------------------------
 0: 83 4007   1  1 - 4137 254 63 [    64372518:     2104452 ] Linux files*
. . .
</pre></blockquote>

Nu moet dit veranderd worden met disklabel(8).
U kan bijvoorbeeld <tt>disklabel -e wd0</tt> ingeven, wat een editor zal
opstarten gespecificeerd door de EDITOR omgevingsvariabele (standaard is vi).
Verander binnen de editor de laatste lijn van de disklabel zodat ze de
nieuwe grootte bevat:

<blockquote><pre>
  o:       2104452      64372518  ext2fs
</pre></blockquote>

Bewaar de disklabel op de schijf wanneer u klaar bent.
Nu de disklabel opnieuw up to date is, zou u uw partities moeten kunnen
mounten zoals hoger beschreven werd.

<p>
U kan een heel gelijkaardige procedure volgen om nieuwe partities toe te
voegen.

<p>
<a name="flashmem"></a>
<h2>14.17 - Kan ik een flash geheugentoestel gebruiken met OpenBSD?</h2>
<a name="flashmemPortable"></a>
<h3>14.17.1 - Flashgeheugen als draagbaar opslagtoestel</h3>
<!-- This article written by Steven Mestdagh,
steven@@openbsd.org, and released under the BSD license -->

Normaal moet het geheugentoestel herkend worden wanneer u het in een poort
van uw machine steekt.
Kort na het insteken worden door de kernel een aantal boodschappen naar de
console geschreven.
Wanneer ik bijvoorbeeld mijn USB flash geheugentoestel insteek, zie ik het
volgende op mijn console:

<blockquote><pre>
umass0 at uhub1 port 1 configuration 1 interface 0
umass0: LEXR PLUG DRIVE LEXR PLUG DRIVE, rev 1.10/0.01, addr 2
umass0: using SCSI over Bulk-Only
scsibus2 at umass0: 2 targets
sd0 at scsibus2 targ 1 lun 0: &lt;LEXAR, DIGITAL FILM, /W1.&gt; SCSI2 0/direct removable
sd0: 123MB, 512 bytes/sec, 251904 sec total
</pre></blockquote>

Deze lijnen geven aan dat de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=umass&amp;sektion=4">umass(4)</a>
(USB mass storage) driver vastgehangen werd aan het geheugentoestel, en dat
hij het SCSI systeem gebruikt.
De laatste twee lijnen zijn de belangrijkste: ze zeggen op welke device node
het geheugentoestel vastgemaakt werd, en wat de totale hoeveelheid
opslagruimte is.
Als u op één of andere manier deze lijnen gemist hebt, kan u ze nadien nog
steeds zien met het
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dmesg&amp;sektion=1">dmesg(1)</a>
commando.
De gerapporteerde CHS geometrie is eerder fictief, aangezien het flash
geheugen behandeld wordt als gelijk welke gewone SCSI schijf.

<p>
We zullen hieronder twee scenario's bespreken.

<h4>Het toestel is nieuw/leeg en u wil het alleen met OpenBSD gebruiken</h4>

U zal een disklabel op het toestel moeten initialiseren, en ten minste
één partitie aanmaken.
Lees alstublieft <a href="#disklabel">OpenBSD's disklabel gebruiken</a> en de 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
manual pagina voor details hierover.

<p>
In dit voorbeeld maakte ik gewoon één partitie <i>a</i> waarin ik een FFS
bestandssysteem zal plaatsen:

<blockquote><pre>
# <b>newfs sd0a</b>
Warning: inode blocks/cyl group (125) >= data blocks (62) in last
    cylinder group. This implies 1984 sector(s) cannot be allocated.
/dev/rsd0a:     249856 sectors in 122 cylinders of 64 tracks, 32 sectors
        122.0MB in 1 cyl groups (122 c/g, 122.00MB/g, 15488 i/g)
super-block backups (for fsck -b #) at:
 32,
</pre></blockquote>

Laten we het bestandssysteem dat we in de <i>a</i> partitie aanmaakten,
mounten op <tt>/mnt/flashmem</tt>.
Maak het mountpunt eerst aan als het niet bestaat.

<blockquote><pre>
# <b>mkdir /mnt/flashmem</b>
# <b>mount /dev/sd0a /mnt/flashmem</b>
</pre></blockquote>

<h4>U kreeg het geheugentoestel van iemand met wie u gegevens wil uitwisselen</h4>

<p>
Er is een aanzienlijke kans dat de andere persoon niet OpenBSD gebruikt,
dus er kan een vreemd bestandssysteem op het geheugentoestel staan.
Daarom zullen we eerst moeten te weten komen welke partities er op het toestel
staan, zoals beschreven in
<a href="#foreignfs">FAQ 14 - Vreemde Bestandssystemen</a>.

<blockquote><pre>
# <b>disklabel sd0</b>

# /dev/rsd0c:
type: SCSI
disk: SCSI disk
label: DIGITAL FILM    
flags:
bytes/sector: 512
sectors/track: 32
tracks/cylinder: 64
sectors/cylinder: 2048
cylinders: 123
total sectors: 251904
rpm: 3600
interleave: 1
trackskew: 0
cylinderskew: 0
headswitch: 0           # microseconds
track-to-track seek: 0  # microseconds
drivedata: 0 

16 partitions:
#             size        offset  fstype [fsize bsize  cpg]
  c:        251904             0  unused      0     0      # Cyl     0 -   122 
  i:        250592            32   MSDOS                   # Cyl     0*-   122*
</pre></blockquote>

Zoals kan gezien worden in de disklabel uitvoer hierboven, is er slechts
één partitie <i>i</i>, die een FAT bestandssysteem bevat, aangemaakt op een
Windows machine.
Zoals gewoonlijk geeft de <i>c</i> partitie de volledige device weer.

<p>
Laten we nu het bestandssysteem in de <i>i</i> partitie mounten op
<tt>/mnt/flashmem</tt>.

<blockquote><pre>
# <b>mount -t msdos /dev/sd0i /mnt/flashmem</b>
</pre></blockquote>

Nu kan u het beginnen gebruiken net zoals gelijk welke andere schijf.

<p>
<b>WAARSCHUWING:</b>
U moet het bestandssysteem <b>altijd unmounten</b> <b>voor het uittrekken</b>
van het geheugentoestel.
Als u dit niet doet, kan het bestandssysteem in een inconsistente toestand
achterblijven, wat kan leiden tot corrupte gegevens.

<p>
Bij het uittrekken van het geheugentoestel uit uw machine zal u opnieuw
zien dat de kernel hierover boodschappen naar de console schrijft:

<blockquote><pre>
umass0: at uhub1 port 1 (addr 2) disconnected
sd0 detached
scsibus2 detached
umass0 detached
</pre></blockquote>

<a name="flashmemBoot"></a>
<h3>14.17.2 - Flashgeheugen als bootable opslag</h3>
<!-- This article written by Nick Holland
nick@@openbsd.org, and released under the BSD license -->
Men kan flashgeheugen op verschillende manieren ook gebruiken als bootable
schijf met OpenBSD.
Dit kan worden gedaan met zowel USB-apparaten (ervanuitgaande dat uw
computer kan booten vanaf USB, dat kunnen ze niet allemaal) als met niet-USB
(zoals CF) apparaten met een IDE of SATA adapter.
(Niet-USB apparaten aangesloten met een USB-adapter worden behandeld als
USB-apparaten.)
In sommige gevallen kunt u een apparaat op beide manieren gebruiken (de
media laden in een USB-adapter, maar gebruiken in een IDE-adapter).

<p>
Een flashapparaat dat is aangesloten op een USB-poort zal verschijnen als een
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&amp;sektion=4">sd(4)</a>
SCSI-achtig apparaat.
Als het is aangesloten op een IDE-adapter, dan zal het verschijnen als een
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=wd&amp;sektion=4">wd(4)</a>
apparaat.

<p>
In het geval van flashmedia in een IDE-adapater, dan kan ieder systeem ervan
booten dat kan booten van een IDE harde schijf op dezelfde adapter.
Op alle mogelijke wijzen ziet het systeem de flashmedia als een IDE schijf.
Configureer de hardware simpelweg op de juiste manier en installeer OpenBSD
op de flashschijf zoals gebruikelijk.

<p>
In het geval van booten vanaf een USB-device moet uw systeem kunnen booten
vanaf het USB-device zonder te worden afgeleid door andere apparaten
op het systeem.
Merk op dat als u de intentie heeft om een draagbare boot-omgeving op een
USB-apparaat te maken, dat u dan echt <a href="#DUID">DUIDs</a> zou moeten
gebruiken in plaats van de traditionele "<tt>/dev/sd0X</tt>" notatie.
Het USB-apparaat zal verschijnen als een SCSI-disk, soms sd0.
Als u dit apparaat zonder DUID verbindt met een systeem dat al enkele
SCSI-achtige apparaten heeft (zoals apparaten aangesloten op een ahci(4)
interface), dan zal het een andere identificatie toegewezen krijgen,
wat het rouleren van systeem naar systeem zou compliceren, omdat u
<tt>/etc/fstab</tt> zou moeten aanpassen.
Met DUID's is dit probleem volledig opgelost.

<p>
Enkele opmerkingen:
<ul>
<li><b>Snelheid:</b> Over het algemeen zijn flash-apparaten veel langzamer
dan harde schijven, vooral als het om schrijven gaat.
Het gebruik van <a href="#SoftUpdates">soft updates</a> helpt aanzienlijk,
net als het gebruik van de "noatime" mount-optie.

<li><b>"Schrijfmoeheid":</b>
Er is veel geschreven over het eindig aantal keren dat een individuele
flash-cel kan worden beschreven totdat deze faalt.
Praktisch gezien zijn er echter vele manieren waarop een flash-apparaat kan
falen, schrijfmoeheid is er slechts één van.
Moderne flash-apparaten verifiëren de schrijfacties en in het geval van
falen zullen de falende sectoren worden vervangen door één van de vele
reservesectoren.
De meeste gebruikers van de meeste flash-apparaten hoeven zich geen zorgen
te maken om "schrijfmoeheid".
U zult waarschijnlijk meer storingsminuten ervaren door "slimme" trucs
toe te passen om schrijven naar de flash-schijf te voorkomen, dan door
de schijven gewoon te gebruiken als lees-schrijf media.

<li><b>Betrouwbaarheid:</b>
Het feit dat flash-media geen bewegende delen bevatten heeft ertoe geleid
dat veel mensen denken dat flash-media inherent betrouwbaarder zijn dan
harde schijven.
Het is niet slim om aan te nemen dat de overstap naar
flash betekent dat u zich geen zorgen meer hoeft te maken over dataverlies
of het falen van schijven.
Er zijn behoorlijke variaties gerapporteerd in de kwaliteit van flash-media,
het is waarschijnlijk het beste om flash-opslag te zien als een stil en
energiezuinig alternatief voor schijven dan als een fout-vrij opslagmedium.

<li><b>Het maken van een bootable USB-flashdrive:</b>
Hoewel een USB-apparaat alleen kan worden gebruikt om op te starten op een
machine die kan opstarten van USB-schijven, kan hij gemaakt worden op iedere
machine met ondersteunde USB-hardware.
Uiteraard kan uw werk pas getest worden totdat u toegang heeft tot een
systeem dat van USB kan booten.

<li><b>Van IDE naar USB-interfaces:</b>
Aangezien de media lees- en schrijfbaar zijn in zowel USB, IDE als andere
adapters, kunt u een bootable medium aanmaken in de ene soort adapter maar
het beheren of gebruikern in iedere andere soort adapter.

<li><b>Mengen van OpenBSD and andere partities op een apparaat:</b>
OpenBSD behandelt een flash-schijf als iedere andere schijf dus men kan
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8">fdisk(8)</a>
gebruiken om een flash-schijf te partitioneren, net als iedere harde schijf.
U kunt vervolgens OpenBSD-bestandssystemen op één partitie zetten en een
andere partitie gebruiken voor een ander bestandssysteem, bijvoorbeeld FAT32.
Niet alle besturingssystemen behandelen USB-apparaten echter als
"gelijkwaardig".
Windows, in ieder geval, zal niet proberen om een partitie te gebruiken
of aan te maken die niet begint aan het begin van het apparaat, noch
zal de Windows partitionerings-utility u toestaan de schijf te partitioneren,
al zal het bestaande partities respecteren.
Dus als u een USB-flash-apparaat wilt creëren dat bootable is met OpenBSD,
maar ook functioneert als een FAT32-geschikt apparaat voor andere
besturingssystemen, dan kunt u zoiets doen:

  <ol>
  <li>Partitioneer het medim met OpenBSD's fdisk, met een partitie
    van het type dat u wenst te gebruiken met Windows aan het begin van
    de schijf en een OpenBSD-partitie aan het einde van de schijf.
  <li>Installeer OpenBSD als gebruikelijk op de OpenBSD-partitie, vergeet
    niet om de OpenBSD-partitie als "Active" te markeren om te kunnen
    booten.
  <li>Formatteer de andere partitie.
    Dit kan (en zou misschien ook moeten) worden gedaan vanuit het "doel"
    besturingssysteem (Windows in dit geval).
  </ol>

Merk op dat indien het type van de andere partitie geschikt is gekozen, het
mogelijk is om OpenBSD toegang te laten hebben tot beide partities op het
apparaat.
Dus een Windows-gebruiker kan de FAT32-partitie vullen met MP3-bestanden
die afgespeeld kunnen worden wanneer er geboot wordt vanaf de OpenBSD-partitie.

</ul>

<a name="flashmemLive"></a>
<h3>14.17.3 - Hoe kan ik een "Live" bootable USB toestel maken?</h3>
Het is erg makkelijk om een bootalble USB flash (of andere!) schijf te maken
die kan worden gebruikt als een "live" OpenBSD-systeem zonder OpenBSD
te installeren op de lokale harde schijf van een machine.
Vanzelfsprekend moet de doelmachine van een USB toestel kunnen booten,
maar het initiële laden kan worden gedaan vanaf iedere machine met een
USB interface.

<p>
Enkele redenen waarom u dit wellicht zou willen:
<ul>
<li>Een draagbare, veilige "machine" die u in uw zak kan dragen.

<li>Oplossen van problemen in OpenBSD of andere installaties met hulpmiddelen
die niet beschikbaar zijn met <a href="faq4.html#bsd.rd">bsd.rd</a>.

<li>Evalueren van hardware voor compatibiliteit met OpenBSD op het moment
van aankoop.

<li>Installeren van machines waarbij ieder ander bootmedium ontbreekt.

<li>Verzamelen van <a href="faq4.html#SendDmesg">dmesg</a> uitvoer van de
computers van uw vrienden!
(Aangezien de dmesg van OpenBSD nuttig is voor het identificeren van hardware
kan dit een goede manier zijn om u voor te bereiden op het installeren van
een ANDER besturingssysteem op een machine -- verzeker u ervan dat u
alle benodigde drivers heeft alvorens te beginnen).

</ul>

Het maken van zo'n "live OpenBSD schijf" is eenvoudig.
<ul>
<li>Mount uw USB schijf op de machine waar u de installatie uitvoert.
<li>Boot uw favoriete OpenBSD installatiemedium.
<li><a href="faq4.html">Installeer</a> zoals gebruikelijk, erop lettend
dat u de flashdisk kiest als het doel voor de installatie.
<li>Boot van uw nieuw gecreëerde USB toestel.
</ul>

Dat is alles!

<p>
Er zijn enkele zaken die u wellicht wilt doen na de installatie om uw
resultaten te verbeteren:

<ul>
<li>Installeer alle packages en hulpmiddelen die u waarschijnlijk beschikbaar
wilt hebben.
<li>Verschillende doelmachines hebben waarschijnlijke verschillende NIC's.
U kunt een stapel
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=hostname.if&amp;sektion=5">hostname.if(5)</a>
bestanden in <tt>/etc</tt> aanmaken, met in ieder slechts <tt>dhcp</tt>, voor
alle NIC's die u waarschijnlijk tegenkomt (fxp0, re0, rl0, bge0, bnx0, em0,
etc.) op USB-bootable machines, plus misschien enkele voorbeeldconfiguraties
voor draadloze netwerken.
OpenBSD negeert alle hostname.if(5) bestanden voor devices die niet
aanwezig zijn tijdens het booten.

<li>U wilt misschien een kopie van de installatiebestanden en wellicht ook
gewenste package .tgz bestanden zodat u de schijf als een installatiemedium
kunt gebruiken (boot bsd.rd in plaats van normaal booten).

<li> Op veel machines zal X "gewoon werken" zonder een configuratiebestand,
maar u wilt misschien X configuratiebestanden verzamelen voor de systemen
die ze nodig hebben.

<li><a href="#SoftUpdates">Soft updates</a> is iets dat u zult willlen
gebruiken.

<li>Voor maximale flexibiliteit wilt u waarschijnlijk liever
<a href="../../i386.html">i386</a> dan
<a href="../../amd64.html">amd64</a> gebruiken.
Echter, als u het als een installatiemedium wilt gebruiken, dan kunt
een amd64 bsd.rd en installatiebestanden gebruiken naast i386.

<li>Gebruik <a href="#DUID">DUID's</a> om uw partities aan te duiden.
<li>Wellicht vindt u het wenselijk om een FAT partitie op de USB schijf te
hebben, maak deze aan zoals <a href="#flashmemBoot">hierboven</a> beschreven.

<li>Wellicht wilt u
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&amp;sektion=4">softraid(4)</a>
gebruiken om een datapartitie te versleutelen.

</ul>


<p>
<a name= "DiskOpt"></a>
<h2>14.18 - Schijfprestaties optimaliseren</h2>

<p>
Schijfprestatie is een veelbetekenende factor in de globale snelheid van
uw computer. Het wordt nog belangrijker wanneer uw computer een multi-user
(alle soorten gebruikers, van zij die interactief inloggen tot zij die
u zien als fileserver of webserver) omgeving host.
Gegevensopslag heeft voortdurend aandacht nodig, vooral wanneer uw
partities ruimte tekort komen of als uw schijven het laten afweten.
OpenBSD heeft enkele mogelijkheden om de snelheid van uw
schijfoperaties te vergroten.

<p>
<ul>
<li><a href="#Optsoftu">Soft Updates</a>
<li><a href="#Optmaxvnodes">Grootte van de namei() cache</a>
</ul>

<p>
<a name="Optsoftu"></a>
<h3>14.18.1 - Soft updates</h3>

Een belangrijke tool die gebruikt kan worden om uw systeem te versnellen is
softupdates.  Een van de traagste operaties in het traditionele BSD
bestandssysteem is het updaten van metainfo (wat onder meer gebeurt wanneer
u bestanden en directories aanmaakt of verwijdert). Softupdates
probeert metainfo te updaten in RAM in plaats van elke metainfo update
naar de harde schijf te schrijven. Een ander effect hiervan is
dat de metainfo op de schijf altijd volledig zou moeten zijn, hoewel deze
niet altijd up-to-date is.
U kan meer lezen over softupdates in de
<a href="#SoftUpdates">Softupdates FAQ</a> paragraaf.

<p>
<a name="Optmaxvnodes"></a>
<h3>14.18.2 - Grootte van de namei() cache</h3>

De naam-naar-inode vertaling (ook bekend als <!-- need to write the manual
page first... <a href="">namei(3)</a> --> namei()) cache controleert de
snelheid van padnaam naar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=inode&amp;sektion=5">inode(5)</a>
vertaling.
Een redelijke manier om een waarde voor de cache af te leiden, mocht een
groot aantal namei() "cache misses" opgemerkt worden met een tool zoals
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=systat&amp;sektion=1">systat(1)</a>,
is om de huidige door het systeem berekende waarden te onderzoeken met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl&amp;sektion=8">sysctl(8)</a>,
(dat deze parameter "<tt>kern.maxvnodes</tt>" noemt) en om deze waarde te
verhogen tot ofwel de namei() cache hit rate verbetert of het bepaald wordt dat
het systeem geen aanzienlijk voordeel uit een verhoging van de grootte van de
namei() cache. Nadat de waarde bepaald is, kan u ze bij de systeemstart
instellen met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysctl.conf&amp;sektion=5">sysctl.conf(5)</a>.

<p>
<a name= "Async"></a>
<h2>14.19 - Waarom gebruiken we geen async mounts?</h2>

<p>
Vraag: "Ik doe gewoon "mount -u -o async /" wat een pakket dat ik gebruik  
(dat er op staat om van tijd tot tijd enkele honderden dingen aan te raken)
bruikbaar maakt.

Waarom staat men afkeurend tegenover async mounten en is het niet standaard
ingeschakeld (zoals het op enkele andere unixen wel is)?
Is het niet een veel eenvoudigere, en daarom, veiligere manier om de
prestatie in sommige toepassingen te verbeteren?"

<p>
Antwoord: "Async mounts zijn inderdaad sneller dan sync mounts, maar ze zijn
ook minder veilig. Wat gebeurt er in het geval van een stroompanne? Of een
hardware probleem? De zoektocht naar snelheid zou de betrouwbaarheid en de
stabiliteit van het systeem niet mogen opofferen. Bekijk de man pagina van
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mount&amp;sektion=8">mount(8)</a>."

<pre>
	     async   All I/O to the file system should be done asynchronously.
		     This is a dangerous flag to set since it does not guaran-
		     tee to keep a consistent file system structure on the
		     disk.  You should not use this flag unless you are pre-
		     pared to recreate the file system should your system
		     crash.  The most common use of this flag is to speed up
		     restore(8) where it can give a factor of two speed in-
		     crease.
</pre>

<p>
Aan de andere kant, wanneer u met tijdelijke gegevens te maken hebt die u
vanaf nul opnieuw kan maken na een crash, kan u snelheid winnen door een
afzonderelijke partitie te gebruiken voor alleen die gegevens en deze async
te mounten. Opnieuw, doe dit <i>alleen als</i> u het verlies van alle gegevens
in de partitie niet erg vindt als er iets verkeerd gaat. Om deze reden worden
<a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=mfs&amp;sektion=8">mfs(8)</a>
partities asynchroon gemount, aangezien ze bij een herstart toch gewist en
opnieuw gemaakt worden.


<a name="altroot"></a>
<h2>14.20 - Dupliceren van uw root-partitie: altroot</h2>
OpenBSD biedt een "altroot" voorziening in de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=daily&amp;sektion=8">daily</a>
scripts.
Als de omgevingsvariabele <tt>ROOTBACKUP=1</tt> is gezet in ofwel
<tt>/etc/daily.local</tt> of root's
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&amp;sektion=5">crontab(5)</a>
en er een partitie is gespecificeerd in <tt>/etc/fstab</tt> om te mounten
op <tt>/altroot</tt> met de optie "xx", dan wordt iedere nacht de gehele
inhoud van de root-partitie gedupliceerd naar de <tt>/altroot</tt>-partitie.
Ervan uitgaande dat we onze root-partitie willen backuppen naar wd1a, dan
voegen we de volgende regel toe aan <tt>/etc/fstab</tt>

<blockquote><pre>
/dev/wd1a /altroot ffs xx 0 0
</pre></blockquote>

en zetten we de passende omgevingsvariabele in <tt>/etc/daily.local</tt>:
<blockquote><pre>
# <b>echo ROOTBACKUP=1 >>/etc/daily.local</b>
</pre></blockquote>

Aangezien het altroot-proces uw <tt>/etc</tt> directory omvat, zorgt
dit ervoor dat wijzigingen in de configuratie dagelijks gebackupt worden.

<p>
Dit is een kopie van de "disk image" met dd(8), geen kopie van ieder bestand,
dus zorg ervoor dat uw <tt>/altroot</tt> precies even groot of groter is
dan uw root-partities.
Vermijd tevens excessief grote root-partities zodat het proces niet te lang
duurt.

<p>
Voor volledige redundantie zouden ook de andere partities gedupliceerd
moeten worden, met behulp van <a href="#softraid">softraid</a> schijven,
dump(8)/restore(8), rsync, etc.
Dit kan handmatig worden gedaan of als onderdeel van een regelmatig schema,
zoals de <tt>weekly.local</tt>, <tt>daily.local</tt> of <tt>monthly.local</tt>
scripts.

<p>
In het algemeen zult u uw "altroot"-partitie op een andere schijf willen
hebben die is ingesteld om te kunnen opstarten, mocht de primaire schijf
falen.
Het is mogelijk om "altroot" op dezelfde schijf te hebben als uw boot-schijf,
maar de voordelen zijn dan beperkt.

<p>
Merk op dat we de altroot-schijf niet hebben aangeduid met het DUID maar
met een device-naam.
We willen waarschijnlijk een kopie maken van de boot-schijf naar een tweede
schijf, dit kan echter veranderen als de volgorde van de schijven wordt
verwisseld.
Om deze reden vullen we de 'root' en 'altroot' in <tt>/etc/fstab</tt> in
als een device-naam en niet als DUID.


<a name="softraid"></a>
<h2>14.21 - Hoe gebruik ik softraid(4)?</h2>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&amp;sektion=4">Softraid(4)</a> 
werkt door het nabootsen van een
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=scsibus&amp;sektion=4">scsibus(4)</a>
met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sd&amp;sektion=4">sd(4)</a>
apparaten, gemaakt door het combineren van een aantal OpenBSD
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
partities ("chunks") tot een virtuele schijf ("volume") met de gewenste
RAID-strategie ("discipline"), zoals RAID0, RAID1, RAID4, RAID5 of
Crypto.
(Merk op dat alleen RAID0, RAID1 en Crypto op dit moment ondersteund worden.)

<p>
Deze virtuele disk wordt behandeld als iedere andere disk --  eerst wordt
deze gepartitioneerd met <a href="#fdisk">fdisk(8)</a> (op fdisk-platformen)
en vervolgens met <a href="#disklabel">disklabel(8)</a>, binnen deze partities
wordt een bestandssysteem gemaakt, vervolgens gemount en gebruikt.

<p>
<h4>Enkele algemene woorden over RAID:</h4>
<ul>
<li>Bedenk voordat u een RAID-oplossing implementeert wat het wel en niet
voor u kan doen.
Het is geen vervanging van een goede backup-strategie.
Het zorgt er niet voor dat uw systeem blijft draaien bij iedere hardwarefout.
Het laat uw systeem misschien niet doordraaien bij een eenvoudige schijffout.
In geval van software-RAID garandeert het niet dat u kunt opstarten van
de overgebleven schijf als uw computer dat anders ook niet kon.

<li>Voordat u in produktie gaat dient u te begrijpen hoe u uw RAID-oplossing
gebruikt om te herstellen van fouten.
Doe dit VOORDAT uw systeem een fout overkomt.
Een slechte RAID-implementatie zorgt voor meer downtime dan het voorkomt.
Dit geldt des te meer als het ervoor heeft gezorgd dat u laks bent geworden
met backups of andere rampenplannen.

<li>Hoe groter de RAID-partitie, hoe langer het duurt om te herstellen van
een "gebeurtenis".
Met andere woorden, het is geen goed idee om alle ruimte op uw goedkope
500G schijven toe te kennen, alleen maar omdat deze beschikbaar is.
Herstellen van een 500G mirror duurt veel langer dan van de 4G die u
daadwerkelijk gebruikt.
Een voordeel van software mirroring is dat u kunt instellen hoe veel van
deze "gigantische" schijven echt wordt gebruikt in een RAID-set.

<li>Er bestaat een reflex om zoveel mogelijk van uw systeem te gebruiken met
RAID.
Het mirroren van uw boot-partitie in een software RAID-systeem is lastig
en vaak nutteloos omdat de meeste PC-hardware moeite heeft om op te starten
van alles behalve de primaire schijf.
Zelfs hardware die KAN opstarten van andere schijven heeft vaak moeite om
vast te stellen wanneer een schijf defect is om te voorkomen dat deze wordt
gebruikt om op te starten.
Het "<a href="#altroot">altroot</a>"-systeem van OpenBSD kan zelfs BETER zijn
in sommige gevallen, omdat het een kopie van de oude configuratie biedt in
gevallen waarbij een wijziging niet helemaal werkt zoals bedoeld.

<li>RAID biedt alleen redundantie voor de harde schijven.
Veel toepassingen hebben meer redundantie nodig dan alleen de schijven en
voor veel toepassingen betekent RAID alleen maar meer complicaties in plaats
van een echt voordeel.
Een voorbeeld hiervan is een set firewalls met <a href="faq6.html#CARP">CARP</a>
die een complete fail-over redundantie bieden.
In dit geval voegt RAID (hardware danwel software) alleen maar complicaties toe.
</ul>

<h3>14.21.1 - De installatie</h3>
Softraid diskruimte kan worden gemaakt met vrije (of toegevoegde!) stukken
schijfruimte na de installatie, maar dat is slechts een speciale (en eenvoudige)
variant op het toevoegen van softraid tijdens de installatie.

<p>
De hulpmiddelen om een softraid-systeem samen te stellen zitten in het standaard
OpenBSD systeem (voor het toevoegen van softraid na de installatie), maar
ze zijn ook beschikbaar op de CD-ROM en <a href="faq4.html#bsd.rd">bsd.rd</a>
installatie-kernels.
Ze zijn niet beschikbaar op de floppies vanwege ruimtegebruik; een eenvoudig
alternatief is om een zeer minimale installatie van OpenBSD te doen vanaf
floppy, daarna van bsd.rd op te starten vanaf uw zojuist geïnstalleerde
systeem en de installatie zoals gewenst over te doen.

<p>
Het installatieproces is iets anders dan de standaard OpenBSD
<a href="faq4.html">installatie</a>, aangezien u vanuit de shell
uw softraid(4)-schijf moet aanmaken voordat u verder gaat met de installatie.
Zodra de softraid(4)-schijf is gemaakt, kunt u de installatie vrijwel normaal
uitoveren, waarbij u de partities die u in RAID wilt hebben plaatst op
de nieuw aangemaakte schijf.

<p>
U kunt van te voren alleen de RAID-partities maken en samenvoegen tot een
softraid(4) volume en de installer de rest laten doen, maar het is waarschijnlijk
makkelijker om ook de root en swap-partities te maken voordat u de installer
start.

<p>
Dit betekent dat u de schijf nauwkeurig moet indelen voordat u de installer
start en een aantal handelingen handmatig moet uitvoeren die de installer
normaliter voor u doet.

<p>
De installatie-kernel heeft slechts <tt>/dev</tt> ingangen voor één wd(4)
apparaat en één sd(4) apparaat bij het opstarten, dus u moet meer ingangen
aanmaken om uw softraid-apparaten te configureren.

Dit proces wordt normaliter automatisch gedaan door de installer, maar u
heeft de installer nog niet gedraaid en u voegt een schijf toe die niet
bestond tijdens het opstarten.

Als we bijvoorbeeld een tweede en derde wd(4) apparaat nodig hebben en een
tweede sd(4) (denk eraan dat softraid apparaten sd(4) apparaten zijn), dan
kunt u het volgende doen vanuit de shell:

<blockquote><pre>
# <b>cd /dev</b>
# <b>sh MAKEDEV wd1 wd2 sd1</b>
</pre></blockquote>

U heeft nu ondersteuning voor sd0, sd1, wd0, wd1 en wd2.

<p>
U wilt de fysieke schijf goed indelen met <a href="#fdisk">fdisk(1)</a>
(indien van toepassing op uw platform -- zorg ervoor dat de tweede schijf
bootable is!) en vervolgens met <a href="#disklabel">disklabel</a> de
partities inrichten.

<p>
De fdisk(8) stappen hierover zetten een MBR en een OpenBSD-partitie op de
schijf.
ALS u de volledige schijf wilt gebruiken voor OpenBSD (als er dus NIETS anders
op de schijf staat), dan kan dat met een enkel commando voor iedere schijf:

<blockquote><pre>
# <b>fdisk -iy wd0</b>
# <b>fdisk -iy wd1</b>
</pre></blockquote>

(Zorg ervoor dat u begrijpt wat die commando's doen met eventuele gegevens
op uw schijf voordat u ze blindelings uitvoert!)
In andere gevallen zult u een OpenBSD-partitie moeten maken op de nieuwe
schijven.

<h4>Partities maken voor softraid</h4>
Als u softraid(4)-partities maakt, geef ze dan het type "RAID" in plaats van
"4.2BSD" of "swap".
In dit geval maken we de gewenste partities op wd0:

<ul>
<li>wd0a  500M /
<li>wd0b  500M swap
<li>wd0m  10G RAID
</ul>

<blockquote><pre>
# <b>disklabel -E wd0</b>
Label editor (enter '?' for help at any prompt)
> <b>a a</b>
offset: [64] <b><i>ENTER</i></b> 
size: [30282461] <b>500m</b>
Rounding to cylinder (16065 sectors): 1028096
FS type: [4.2BSD] <b><i>ENTER</i></b> 
> <b>a b</b>
offset: [1028160]  <b><i>ENTER</i></b> 
size: [29254365] <b>500m</b>
Rounding to cylinder (16065 sectors): 1028160
FS type: [swap] <b><i>ENTER</i></b> 
> <b>a m</b>
offset: [3148740]  <b><i>ENTER</i></b>
size: [28226205] <b>10g</b>
Rounding to cylinder (16065 sectors): 20980890
FS type: [4.2BSD] <b>RAID</b>
> <b>q</b>
Write new label?: [y] <b><i>ENTER</i></b>
</pre></blockquote>

<p>
Vervolgens moeten we de tweede schijf zo voorbereiden dat deze op de
belangrijkste punten overeenkomt met de indeling van de eerste schijf.
Aangezien we het <tt>/altroot</tt>-systeem gebruiken, willen we een 'a'
partitie op de tweede schijf met dezelfde grootte als de 'a' op de eerste.
We willen dat het systeem van de tweede schijf draait net als van de eerste,
dus maken we een even grote swap-partities (al kan die ook wat groter of
kleiner zijn).
We willen ook een RAID-partitie met dezelfde grootte als op de eerste schijf.
Als de RAID-partities niet even groot zijn, dan bepaalt de kleinste de grootte
van het uiteindelijke RAID volume.

<p>
Kortom...u moet echt het proces van hierboven  exact herhalen bij de tweede
schijf, wd1.

<h4>Het RAID volume samenstellen</h4>
We nemen aan uw RAID-partities op wd0m en wd1m staan.
Merk op dat de letter van de RAID-partitie om het even is, deze hoeft niet
gelijk te zijn op beide schijven.  Het maakt het echter een stuk eenvoudiger
als ze wel gelijk zijn.

<p>
Merk op dat softraid(4) wat moet rondneuzen om het bewijs te vinden van
de partities die hij moet samenvoegen.  Als uw schijf eerder is gebruikt
voor softraid is het daarom raadzaam om met dd(1) de eerste megabyte of zo
van iedere partitie te wissen voordat we verder gaan:

<blockquote><pre>
# <b>dd if=/dev/zero of=/dev/rwd0m bs=1m count=1</b>
   ...
# <b>dd if=/dev/zero of=/dev/rwd1m bs=1m count=1</b>
   ...
</pre></blockquote>

<p>
Nu maken we onze eerste softraid(4)-schijf met
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bioctl&amp;sektion=8">bioctl(8)</a>:

<blockquote><pre>
# <b>bioctl -c 1 -l /dev/wd0m,/dev/wd1m softraid0</b>
</pre></blockquote>

Dit maakt een RAID1-volume ("<tt>-c 1</tt>") met de genoemde partities
("<tt>-l /dev/wd0m,/dev/wd1m</tt>") en met de <tt>softraid0</tt> driver.
Als er geen andere sd(4) apparaten op dit systeem zijn, dan wordt dit sd0.
Merk op dat als u meerdere RAID-apparaten maakt, op één schijf of op meerdere
schijven, u altijd softraid0 gebruikt als virtuele interface. U gebruikt
niet softraid1 of hoger.
Denk eraan dat "softraid0" een virtuele RAID-controller is en u kunt
vele virtuele schijven aan deze controller hangen.

<p>
Dit maakt een nieuwe schijf "sd0" (ervan uitgaande dat er geen andere sd(4)
schijven op uw systeem zijn).
Dit apparaat wordt nu getoond op de systeemconsole en in dmesg ale een nieuw
geïstalleerd apparaat:

<blockquote><pre>
scsibus1 at softraid0: 1 targets
sd0 at scsibus2 targ 0 lun 0: &lt;OPENBSD, SR RAID 1, 005&gt; SCSI2 0/direct fixed
sd0: 10244MB, 512 bytes/sec, 20980362 sec total
</pre></blockquote>

Dit laat zien dat we nu een nieuwe SCSI-bus hebben en een nieuwe schijf.
Dit volume zal vanaf nu automatisch gevonden en samengesteld worden als
het systeem opstart.

<p>
Omdat het nieuwe apparaat waarschijnlijk een hoop rommel heeft waar u
een MBR en een disklabel verwacht, wordt u sterk aangeraden om het eerste stuk
te vullen met nullen, als u dat niet heeft gedaan met de losse delen hierboven:

<blockquote><pre>
# dd if=/dev/zero of=/dev/rsd0c bs=1m count=1
</pre></blockquote>

U bent nu klaar om OpenBSD te installeren op uw systeem.
Voer de installatie uit zoals normaal door "install" te typen op de prompt
van het boot-medium.
Let erop dat u "custom"-indeling kiest voor het disklabel wanneer hierom
gevraagd wordt, anders wordt uw RAID-partitie overschreven!
Gebruik de 'n'-optie van disklabel om het mount-punt van uw root-partitie te
definiëren en maak alle partities op uw nieuwe softraidschijf (sd0 in het
voorbeeld hierboven) die aanwezig zou moeten zijn, in plaats van op uw
niet-RAID-schijven.

<p>
U kunt nu opnieuw opstarten en als u alles goed heeft gedaan dan worden
de RAID-delen automatisch samengesteld en worden alle partities op de juiste
plek gemount.

<h3>14.21.3 - Softraid opmerkingen</h3>
<h4>Complicaties als er andere sd(4)-schijven zijn</h4>
Softraid-schijven worden samengesteld <i>nadat</i> alle andere IDE, SATA, SAS
en SCSI-schijven zijn gekoppeld.
Daarom verandert de aanduiding van de softraid-schijf als het aandel sd(4)
schijven verandert (door toevoegen of verwijderen van apparaten -- of als een
apparaat faalt).
Om deze reden is het erg belangrijk dat u <a href="faq14.html#DUID">DUID</a>
(Disklabel Unique Identifiers) gebruikt in plaats van schijfnamen in uw
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fstab&amp;sektion=5">fstab(5)</a>
bestand.

<p>
Het root-device kunt u beter niet opgeven met DUID.

<h4>RAID1 met drie schijven?</h4>
Softraid ondersteunt RAID1 met meer dan twee "delen" en de voorbeelden in de
manpage laten een configuratie met drie schijven zien.
RAID1 dupliceert simpelweg de gegevens over alle delen opslag, twee delen
biedt volledige redundantie, drie geef extra fouttolerantie.
Het voordeel van RAID met drie (of meer!) schijven is dat het geval van
het falen van een enkele schijf, u NOG STEEDS volledige redundantie heeft.
Zie het als een hot spare die geen tijd nodig heeft om te vullen!
In theorie is een RAID1 met drie schijven langzamer met schrijven dan met
twee schijven, maar hij is veel sneller met schijven dan een RAID1 met
twee schijven die aan het herstellen is.

<a name="softraidDR"></a>
<h3>14.21.4 - Herstellen van rampen</h3>
Dit is het deel dat u wilt overslaan, maar toch niet overslaat.
Dit deel is de reden voor RAID -- als schijven nooit zouden falen, dan zou
u de complexiteit RAID niet aan uw systeem toevoegen!
Helaas is het erg moeilijk om aan te geven hoe systemen precies falen, dus
het is zeer waarschijnlijk dat het in uw geval niet precies zal verlopen
zoals hier vermeld.  Maar als u de tijd neemt om de strategie die hier is
beschreven te begrijpen en het WAAROM snapt, dan kunt u ze hopelijk gebruiken
om te herstellen van de situaties die zich in uw geval voordoen.

<p>
Bedenk dat fouten vaak niet eenvoudig zijn.
De auteur van dit artikel heeft een schijf in een hardware RAID-behuizing
gehad met een kortsluiting in de voedingsaansluiting die er niet alleen voor
zorgde dat de schijf vervangen moest worden, maar ook de RAID-behuizing en de
voeding van een tweede computer die hij gebruikte om te kijken of de schijf
echt stuk was.  En omdat hij de vervangende behuizing niet juist had ingesteld,
moest de data ook vanaf backup worden teruggezet.

<p>
De stappen die nodig zijn voor het herstel van het systeem kunnen worden
uitgevoerd in <a href="faq8.html#LostPW">single user mode</a> of vanaf de
<a href="faq4.html#bsd.rd">installatie kernel (bsd.rd)</a>.

<p>
Als u van plan bent om te oefenen met softraid-herstel (en we raden STERK aan
om dat te doen!), dan kan het handig zijn om een schijf die u heeft verwijderd
uit de RAID-opstelling volledig te wissen voordat u deze terugplaatst.
Niet alleen bootst dit beter na dat u de schijf vervangt door een nieuwe,
maar het voorkomt ook de verwarring die kan ontstaan als het systeem
de restanten van een softraid-indeling ziet.

<p>

Herstel van een fout gebeurt meestal in twee stappen -- de eerste stap
is om het systeem draaiend te krijgen, de tweede stap is om de defecte
RAID-array te herstellen.
Tussen deze twee stappen kan enige tijd zitten als u geen reserve-schijf
bij de hand hebt.

<h4>Herstel van defecte schijf: secondaire schijf</h4>
Dit is relatief eenvoudig.
U kunt de defecte schijf verwijderen om het systeem weer in de lucht te krijgen.

<p>
Als u klaar bent om het systeem te repareren, kunt u de defecte schijf
vervangen, te RAID aanmaken en andere disklabel-partieies en dat de mirror
herstellen.
Ervan utigaande dat uw RAID-volume <tt>sd0</tt> is en dat u de defecte
schijf <tt>wd1m</tt> vervangt, dan zou het volgende moeten werken:

<ul>
<li>Start het systeem op.
<li>Maakt de juiste partities op de nieuwe schijf
<li>Herstel uw RAID-partitie:
<blockquote><pre>
# <b>bioctl -R /dev/wd1m sd0</b> 
</pre></blockquote>
<li>reboot
</ul>

<h4>Herstel van defecte schijf: primaire schijf</h4>
Veel PC-achtige computers kunnen niet opstarten van de tweede schijf als de
eerste defect is maar nog wel aangesloten, behalve als deze zo dood is dat hij
niet wordt gezien.
Vele kunnen niet booten als het niet de "eerste" is, ook al is er geen andre
schijf.

<p>
Als de eerste schijf faalt, dan moet u deze in het algemeen verwijderen en
in veel gevallen moet u de tweede schijf "opwaarderen" tot eerste schijf
voordat het systeem kan opstarten.
Dit kan betekenen dat u de jumpers anders moet instellen, de schijf op een
andere poort moet aansluiten of een variant hierop.
Uiteraard moet de tweede schijf niet alleen uw RAID-partitie bevatten,
maar ook functioneel kunnen opstarten.

<p>
Zodra uw systeem draait op de tweede schijf en er een nieuwe schijf in zit,
dan kunt u de RAID herstellen zoals hierboven.


<h4>Herstel van het "schuiven" van uw schijven</h4>
Stel dat u vier schijven in uw systeem heeft, sd0, sd1, sd2 sn sd3, en dat
bij een hardware vervanging of upgrade de schijven uit de machine zijn gehaald
en dat u niet meer weet welke welke was?

<p>
Gelukkig kan softraid hier goed mee overweg.  Het beschouwt de schijven
als "zwervend", maar stelt de array succesvol samen.
De opstartschijf in de machine moet echter wel bootable zijn en als
u zojuist wijzigingen in de root-partitie heeft gemaakt, dan wilt u
waarschijnlijk zeker weten dat u niet per ongeluk van uw altroot-partitie start.

<h3>14.21.5 - Softraid Crypto</h3>

Cryptographische softraid(4)-volumes zijn tamelijk eenvoudig in te stellen:

<ul>
<li>Creëer de gewenste partitie met disklabel(8) als type RAID
<li>Wis het begin van de partitie zoals hierboven.
<li><tt># <b>bioctl -c C -l /dev/sd0m softraid0</b><br>
New passphrase: <b><i>My Crypto Pass Phrase</i></b><br>
Re-type passphrase: <b><i>My Crypto Pass Phrase</i></b><br>
softraid0: CRYPTO volume attached as sd1</tt>
<li>fdisk(8), disklabel(8) en newfs(8) dit nieuwe volume sd1 naar wens.
</ul>

Als dit gedaan is, kunt u het crypto-volume "ontsleutelen" wanneer nodig met:
<blockquote><pre>
# <b>bioctl -c C -l /dev/sd1m softraid0</b>
Passphrase: <b><i>My Crypto Pass Phrase</i></b>
softraid0: CRYPTO volume attached as sd1
</pre></blockquote>
U kunt de versleutelde partities vervolgens mouten zoasl gebruikelijk.

<p>
Om een crypto-volume te ontkoppelen (waardoor het weer onbruikbaar wordt),
dient u alle bestandssystemen te umounten en typt u het volgende (waarbij
wd1 het versleutelde volume is):
<blockquote><pre>
# <b>bioctl -d sd1</b>
</pre></blockquote>

De manpage hiervoor ziet er een beetje eng uit, aangezien het -d commando
wordt omschreven als het "verwijderen" van het volume.  Maar in geval van
crypto deactiveert het slechts het versleutelde volume zodat niet meer
beanderd kan worden zonder passphrase.

<p>
Er zijn nog vele andere mogelijkheden met softraid en er worden nieuwe
eigenschappen toegevoegd en verbeteringen doorgevoerd.  Raadpleeg daarom
de manpages van
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bioctl&amp;sektion=8">bioctl(8)</a>
en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&amp;sektion=4">softraid(4)</a>
op uw systeem.

<h4>Ik ben mijn passphrase vergeten!</h4>
Helaas.
Dit is echte encryptie en er is geen achterdeur of een magisch hulpmiddel
om te ontsteutelen.
Als uw passphrase kwijt is, dan is de data op uw softraid crypto volume
verloren.


<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq13.html">[Naar Sectie 13 - Multimedia]</a>
<a href= "faq15.html">[Naar Sectie 15 - Packages en Ports]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[terug]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: faq14.html,v 1.240 ]<br>
$Translation: faq14.html,v 1.99 2013/11/02 14:40:14 maurice Exp $<br>
-->
$OpenBSD: faq14.html,v 1.84 2013/11/03 08:09:59 ajacoutot Exp $
</small>

</body>
</html>
@


1.84
log
@Sync with Steelix CVS
@
text
@d3117 1
a3117 1
$OpenBSD$
@


1.83
log
@Sync with Steelix CVS
@
text
@d1102 1
a1102 1
OpenBSD 5.3 (GENERIC) #50: Tue Mar 12 18:35:23 MDT 2013
d3114 2
a3115 2
Originally [OpenBSD: faq14.html,v 1.239 ]<br>
$Translation: faq14.html,v 1.98 2013/10/07 17:52:15 maurice Exp $<br>
@


1.82
log
@Sync with Steelix CVS
@
text
@d66 2
d2599 501
d3114 2
a3115 2
Originally [OpenBSD: faq14.html,v 1.230 ]<br>
$Translation: faq14.html,v 1.96 2013/05/01 17:55:20 maurice Exp $<br>
@


1.81
log
@Sync with Steelix CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2012 by OpenBSD.">
d1048 1
a1048 1
>> OpenBSD/i386 BOOT 3.18
d1090 1
a1090 1
>> OpenBSD/i386 BOOT 3.18
d1098 1
a1098 1
Copyright (c) 1995-2012 OpenBSD.  All rights reserved.  http://www.OpenBSD.org
d1100 1
a1100 1
OpenBSD 5.2 (GENERIC) #278: Wed Aug  1 10:04:16 MDT 2012
d1323 1
a1323 3
zal de grootte raporteren als de echte grootte modulus 2TB, dus uw 2,7TB
schhijf (verkocht als 3TB) zal in fdisk(8) verschijnen met een grootte van
rond de 700GB.
d2611 2
a2612 2
Originally [OpenBSD: faq14.html,v 1.229 ]<br>
$Translation: faq14.html,v 1.95 2013/02/21 18:51:50 maurice Exp $<br>
@


1.80
log
@Sync with Steelix CVS
@
text
@d2613 2
a2614 2
Originally [OpenBSD: faq14.html,v 1.228 ]<br>
$Translation: faq14.html,v 1.94 2013/02/13 18:49:28 maurice Exp $<br>
@


1.79
log
@Sync with Steelix CVS
@
text
@d988 2
a989 3
Als de machine geen LBA translatie kon gebruiken, zou het bovenstaande
punt vervangen geweest zijn door een kommapunt (";"), dat CHS vertaling
aangeeft:
d2613 2
a2614 2
Originally [OpenBSD: faq14.html,v 1.227 ]<br>
$Translation: faq14.html,v 1.93 2013/01/13 12:20:04 maurice Exp $<br>
@


1.78
log
@Sync with Steelix CVS
@
text
@d738 9
a746 3
Wat als u een bestaande directory zoals /usr/local moet migreren? U kan
best de nieuwe schijf in /mnt mounten en <tt>cpio -pdum</tt> gebruiken om de
/usr/local naar de /mnt directory te kopiëren. Bewerk het
d2614 2
a2615 2
Originally [OpenBSD: faq14.html,v 1.226 ]<br>
$Translation: faq14.html,v 1.92 2012/12/28 18:43:22 maurice Exp $<br>
@


1.77
log
@Sync with Steelix CVS
@
text
@d447 2
a448 2
zie het
<a href="faq4.html#Disks">Schijven instellen</a> onderdeel van de
d2608 2
a2609 2
Originally [OpenBSD: faq14.html,v 1.225 ]<br>
$Translation: faq14.html,v 1.91 2012/11/01 20:45:27 maurice Exp $<br>
@


1.76
log
@Sync with Steelix CVS
@
text
@d1043 1
a1043 1
>> OpenBSD/i386 BOOT 3.17
d1085 1
a1085 1
>> OpenBSD/i386 BOOT 3.17
d1095 1
a1095 1
OpenBSD 5.1 (GENERIC) #160: Sun Feb 12 09:46:33 MST 2012
d2608 2
a2609 2
Originally [OpenBSD: faq14.html,v 1.224 ]<br>
$Translation: faq14.html,v 1.90 2012/06/28 18:51:13 maurice Exp $<br>
@


1.75
log
@Sync with Steelix CVS
@
text
@d2608 2
a2609 2
Originally [OpenBSD: faq14.html,v 1.223 ]<br>
$Translation: faq14.html,v 1.89 2012/06/06 09:56:09 maurice Exp $<br>
@


1.74
log
@Sync with Steelix CVS
@
text
@d2608 2
a2609 2
Originally [OpenBSD: faq14.html,v 1.222 ]<br>
$Translation: faq14.html,v 1.88 2012/06/05 06:39:06 maurice Exp $<br>
@


1.73
log
@Sync with Steelix CVS
@
text
@d1280 4
a1283 1
dat ze gefsck(8)ed moeten worden na het struikelen over een stroomdraad.
a1289 7
<p>
Zodra men een bestandssysteem wat groter dan 1TB bereikt met standaard
fragment- en blokgroottes, zal fsck 1GB RAM vereisen om te draaien, wat de
limiet is voor applicaties onder OpenBSD.
Grotere fragmenten en/of blokken zullen het aantal inodes terugdringen
en grotere bestandssystemen toelaten.

d1315 27
d2608 2
a2609 2
Originally [OpenBSD: faq14.html,v 1.221 ]<br>
$Translation: faq14.html,v 1.87 2012/05/24 10:01:25 maurice Exp $<br>
@


1.72
log
@Sync with Steelix CVS
@
text
@d468 1
a468 1
uid: d920a43a5a56ad5f
d1961 1
a1961 1
uid: d920a43a5a56ad5f
d2585 2
a2586 2
Originally [OpenBSD: faq14.html,v 1.219 ]<br>
$Translation: faq14.html,v 1.86 2012/05/02 20:35:42 maurice Exp $<br>
@


1.71
log
@Sync with Steelix CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2011 by OpenBSD.">
d1093 1
a1093 1
Copyright (c) 1995-2008 OpenBSD.  All rights reserved.  http://www.OpenBSD.org
d1095 1
a1095 1
OpenBSD 5.0 (GENERIC) #43: Wed Aug 17 10:10:52 MDT 2011
d1228 1
a1228 2
  <li>U doet een upgrade, bouwt uw eigen kernel, wat dan ook, en kopieert
uw nieuwe /bsd over de oude.
d2585 2
a2586 2
Originally [OpenBSD: faq14.html,v 1.218 ]<br>
$Translation: faq14.html,v 1.85 2012/02/03 20:55:39 maurice Exp $<br>
@


1.70
log
@Sync with Steelix CVS
@
text
@d1324 3
a1326 3
Moderne versies van OpenBSD (3.5 en recenter) hebben een heel robuuste
bootloader die veel onverschilliger is voor schijfgeometrie dan de oudere
bootloader; ze zijn echter gevoelig aan waar het
d1333 4
a1336 4
te herstellen zodat u normaal kan booten, plaatst u eerst een bootdiskette
in uw diskettestation (of gebruik een bootable CD-ROM) en typ op de boot
prompt "b hd0a:/bsd" om het te dwingen vanaf de eerste harde schijf (en
niet vanaf de diskette) te booten. Uw machine zou zoals normaal moeten
d1353 8
a1360 10
<p>
Als een nieuwere versie van bootblocks vereist is, zal u deze zelf moeten
compileren. Hiervoor doet u eenvoudigweg:

<blockquote><pre>
# <b>cd /sys/arch/i386/stand/</b>
# <b>make &amp;&amp; make install </b>
# <b>cd /usr/mdec; cp ./boot /boot</b>
# <b>./installboot /boot biosboot sd0</b> (of welk device uw harde schijf ook is)
</pre></blockquote>
d2586 2
a2587 2
Originally [OpenBSD: faq14.html,v 1.217 ]<br>
$Translation: faq14.html,v 1.84 2012/01/14 10:10:14 maurice Exp $<br>
@


1.69
log
@Sync with Steelix CVS
@
text
@d185 2
a186 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=diskmap&amp;sektion=4">diskmap(4)</a>.
device.
d2273 1
a2273 1
USB-apparaten).
d2588 2
a2589 2
Originally [OpenBSD: faq14.html,v 1.216 ]<br>
$Translation: faq14.html,v 1.83 2012/01/01 08:27:31 maurice Exp $<br>
@


1.68
log
@Sync with Steelix CVS
@
text
@d2588 2
a2589 2
Originally [OpenBSD: faq14.html,v 1.215 ]<br>
$Translation: faq14.html,v 1.82 2011/11/10 20:08:33 maurice Exp $<br>
@


1.67
log
@Sync with Steelix CVS
@
text
@d269 2
a270 1
In dit voorbeeld bekijken we de fdisk uitvoer van de eerste SCSI schijf.
d645 2
a646 2
In het onderstaande voorbeeld voegen we een derde SCSI schijf toe aan het
systeem.
d1402 1
a1402 1
dat aangeeft: SCSI vaste schijf 0, partitie a. Het /usr bestandssysteem
d2287 1
a2287 1
booten dat kan booten van een IDE harde schijf.
d2588 2
a2589 2
Originally [OpenBSD: faq14.html,v 1.214 ]<br>
$Translation: faq14.html,v 1.81 2011/11/01 19:02:18 maurice Exp $<br>
@


1.66
log
@Sync with Steelix CVS
@
text
@d181 33
d1042 1
a1042 1
>> OpenBSD/i386 BOOT 3.15
d1084 1
a1084 1
>> OpenBSD/i386 BOOT 3.02
d1094 1
a1094 1
OpenBSD 4.9 (GENERIC) #671: Wed Mar  2 07:09:00 MST 2011
d1734 1
a1734 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=svnd&amp;sektion=4">svnd(4)</a>
d1739 2
a1740 2
# <b>vnconfig svnd0 /tmp/ISO.image</b>
# <b>mount -t cd9660 /dev/svnd0c /mnt</b>
d1754 1
a1754 1
# <b>vnconfig -u svnd0</b>
d2296 9
a2304 7
USB-apparaat te maken, dat het USB-apparaat zal verschijnen als een SCSI-disk,
soms sd0.
Als u dit apparaat verbindt met een systeem dat al enkele SCSI-achtige
apparaten heeft (zoals apparaten aangesloten op een ahci(4) interface), dan
zal het een andere identificatie toegewezen krijgen,
wat het rouleren van systeem naar systeem zal compliceren, omdat u
<tt>/etc/fstab</tt> moet aanpassen.
d2463 1
a2463 7
<li>Als uw doelmachine een
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ahci&amp;sektion=4">ahci(4)</a>
of SCSI interface heeft, zult u merken dat de aanduiding van de USB-schijf
waarschijnlijk wijzigt.
Het hebben van meerdere versies van uw <tt>/etc/fstab</tt> bestand maakt
het makkelijker om dit te "repareren" (in single user mode).

d2587 2
a2588 2
Originally [OpenBSD: faq14.html,v 1.213 ]<br>
$Translation: faq14.html,v 1.80 2011/07/29 19:04:06 maurice Exp $<br>
@


1.65
log
@Sync with Steelix CVS
@
text
@d722 1
a722 1

d2559 1
a2559 1
$Translation: faq14.html,v 1.79 2011/06/24 17:31:00 maurice Exp $<br>
@


1.64
log
@Sync with Steelix CVS
@
text
@a44 1
<li><a href="#RAID"       >14.13 - RAID opties in OpenBSD</a>
d791 1
a791 1
csh's <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=unlimit&amp;sektion=1">unlimit(1)</a>,
d793 1
a793 1
sh's <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ulimit&amp;sektion=1">ulimit(1)</a>.)
a1773 68
<p>
<a name="RAID"></a>
<h2>14.13 - RAID opties voor OpenBSD</h2>
RAID (Redundant Array of Inexpensive Disks) biedt een mogelijkheid om meerdere
schijven te gebruiken om betere prestaties, capaciteit en/of redundantie te
geven dan men uit een enkele schijf alleen kan verkrijgen. Hoewel een
volledige discussie van de voordelen en risico's van RAID buiten het bestek
van dit artikel vallen, zijn er enkele punten die belangrijk zijn om hier
uit te leggen:

<ul>
<li>RAID heeft niets te maken met backup.
<li>Op zichzelf zal RAID down-tijd niet elimineren.
</ul>

Als deze informatie nieuw is voor u, is dit geen goed vertrekpunt voor
uw verkenning van RAID.

<h3>Software Opties</h3>
OpenBSD ondersteunt
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&amp;sektion=4">softraid(4)</a>,
een raamwerk dat vele soorten I/O-transformaties ondersteunt, inclusief
RAID en encryptie disciplines.
Softraid(4) wordt beheerd door
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bioctl&amp;sektion=8">bioctl(8)</a>.

<p>
OpenBSD bevat ook RAIDframe
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>,
vereist een aangepaste kernel) en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">ccd(4)</a>
als historische manieren om RAID te implementeren, maar op dit moment wil
OpenBSD niet suggereren om dit te gebruiken als RAID-oplossing voor nieuwe
installaties of herinstallaties.

<h3>Hardware Opties</h3>
<p>
Veel OpenBSD <a href="../../nl/plat.html">platformen</a> bevatten ondersteuning voor
verschillende hardware RAID producten. De opties variëren volgens
platform, zie de gepaste hardware support pagina
(<a href="../../nl/plat.html">hier</a> getoond).

<p>
Merk op dat veel ondersteunde RAID-controllers beheerd kunnen worden met de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bio&amp;sektion=4">bio(4)</a>
driver en de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bioctl&amp;sektion=8">bioctl(8)</a>
applicatie.
Dit laat u het RAID-systeem monitoren en besturen op een gestandaardiseerde
manier vanuit OpenBSD.

<h3>Niet-Opties</h3>
<p>
Een vaak gestelde vraag op de <a href="../../nl/mail.html">mailinglijsten</a> is
"Worden de goedkope IDE of SATA RAID controllers (zoals degene die Highpoint,
Promise of Adaptec HostRAID chips gebruiken) ondersteund?". Het antwoord
is "Neen". Deze kaarten en chips zijn geen echte hardware RAID controllers,
maar eerder BIOS-geassisteerde boot van een software RAID. Aangezien
OpenBSD reeds software RAID ondersteunt op een hardware-onafhankelijke
manier, is er niet veel verlangen onder OpenBSD ontwikkelaars om speciale
ondersteuning voor deze kaarten te implementeren.

<p>
Bijna alle on-board SATA of IDE "RAID" controllers zijn van deze
software-gebaseerde stijl, en zullen typisch goed werken als een SATA of
IDE controller met de standaard IDE driver
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pciide&amp;sektion=4">pciide(4)</a>),
maar zullen niet werken als een hardware RAID systeem op OpenBSD.
d2558 2
a2559 2
Originally [OpenBSD: faq14.html,v 1.211 ]<br>
$Translation: faq14.html,v 1.77 2011/05/30 19:05:49 maurice Exp $<br>
@


1.63
log
@Sync with Steelix CVS
@
text
@d7 2
a8 2
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2010 by OpenBSD.">
d182 1
d908 1
d1286 1
d1730 1
a1730 1

d1775 1
a1775 1

d1844 1
d1868 1
d1918 1
a1918 1

d2079 1
d2156 1
a2156 1

d2627 2
a2628 2
Originally [OpenBSD: faq14.html,v 1.210 ]<br>
$Translation: faq14.html,v 1.76 2011/05/05 14:42:23 maurice Exp $<br>
@


1.62
log
@Sync with Steelix CVS
@
text
@d2621 2
a2622 2
Originally [OpenBSD: faq14.html,v 1.209 ]<br>
$Translation: faq14.html,v 1.75 2011/05/01 18:47:45 maurice Exp $<br>
@


1.61
log
@Sync with Steelix CVS
@
text
@d1008 1
a1008 1
>> OpenBSD/i386 BOOT 3.02
d1060 1
a1060 1
OpenBSD 4.8 (GENERIC) #136: Mon Aug 16 09:06:23 MDT 2010
d2621 2
a2622 2
Originally [OpenBSD: faq14.html,v 1.208 ]<br>
$Translation: faq14.html,v 1.74 2011/01/29 11:37:26 maurice Exp $<br>
@


1.60
log
@Sync with Steelix CVS
@
text
@d2621 2
a2622 2
Originally [OpenBSD: faq14.html,v 1.207 ]<br>
$Translation: faq14.html,v 1.73 2011/01/28 07:45:48 maurice Exp $<br>
@


1.59
log
@Sync with Steelix CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2009 by OpenBSD.">
d30 1
a30 1
<li><a href="#disklabel"  >14.1 - OpenBSD's disklabel(8) gebruiken</a>
d32 6
a37 5
<li><a href="#NewDisk"    >14.3 - Extra schijven toevoegen in OpenBSD</a>
<li><a href="#Swap"       >14.4 - Hoe wordt swap gebruikt?</a>
<li><a href="#SoftUpdates">14.5 - Soft Updates</a>
<li><a href="#Boot386"    >14.6 - Hoe boot OpenBSD/i386?</a>
<li><a href="#LargeDrive" >14.7 - Wat zijn de problemen met grote schijven
d39 1
a39 1
<li><a href="#InstBoot"   >14.8 - Installeren van Bootblocks - i386/amd64
d41 1
a41 1
<li><a href="#Backup"     >14.9 - Zich op het ergste voorbereiden: Backup en
d43 2
a44 2
<li><a href="#MountImage" >14.10 - Schijfimages mounten in OpenBSD</a>
<li><a href="#pciideErr"  >14.11 - Help! Ik krijg fouten met IDE DMA!</a>
d70 274
d345 1
a345 1
<h2>14.1 - OpenBSD's disklabel(8) gebruiken</h2>
a375 3
Ze bevatten ook informatie over uw schijf zelf, zoals de draaisnelheid,
"interleave", enz., die er om historische redenen in zit, en vaak onjuist is.
Maak u hierover geen zorgen.
d388 1
a388 1
gebruikt u één van deze 'primary' partities om *al* uw OpenBSD
a430 2
# Inside MBR partition 3: type A6 start 63 size 29880837
# /dev/rwd0c:
d433 2
a434 1
label: Maxtor 51536H2  
d440 4
a443 8
cylinders: 16383
total sectors: 29888820
rpm: 3600
interleave: 1
trackskew: 0
cylinderskew: 0
headswitch: 0           # microseconds
track-to-track seek: 0  # microseconds
d447 8
a454 8
#             size        offset  fstype [fsize bsize  cpg]
  a:        614817            63  4.2BSD   2048 16384  328 # Cyl     0*-   609 
  b:        409248        614880    swap                   # Cyl   610 -  1015 
  c:      29888820             0  unused      0     0      # Cyl     0 - 29651*
  d:       6291936       1024128  4.2BSD   2048 16384  328 # Cyl  1016 -  7257 
  e:        409248       7316064  4.2BSD   2048 16384  328 # Cyl  7258 -  7663 
  f:       1024128       9822960  4.2BSD   2048 16384  328 # Cyl  9745 - 10760 
  h:       2097648       7725312  4.2BSD   2048 16384  328 # Cyl  7664 -  9744 
d488 3
a490 3
offset: [10847088] 
size: [19033812] 2g
Rounding to nearest cylinder: 4194288
d493 10
a502 23
device: /dev/rwd0c
type: ESDI
disk: ESDI/IDE disk
label: Maxtor 51536H2  
bytes/sector: 512
sectors/track: 63
tracks/cylinder: 16
sectors/cylinder: 1008
cylinders: 16383
total bytes: 14594.2M
free bytes: 7245.9M
rpm: 3600

16 partitions:
#             size        offset  fstype [fsize bsize  cpg]
  a:        300.2M          0.0M  4.2BSD   2048 16384  328 # Cyl     0*-   609 
  b:        199.8M        300.2M    swap                   # Cyl   610 -  1015 
  c:      14594.2M          0.0M  unused      0     0      # Cyl     0 - 29651*
  d:       3072.2M        500.1M  4.2BSD   2048 16384  328 # Cyl  1016 -  7257 
  e:        199.8M       3572.3M  4.2BSD   2048 16384  328 # Cyl  7258 -  7663 
  f:        500.1M       4796.4M  4.2BSD   2048 16384  328 # Cyl  9745 - 10760 
  h:       1024.2M       3772.1M  4.2BSD   2048 16384  328 # Cyl  7664 -  9744 
  k:       2048.0M       5296.4M  4.2BSD   2048 16384   16 # Cyl 10761 - 14921 
d556 2
d559 8
a566 9
<li>(i386, amd64) <b>Laat de eerste track vrij:</b>
Op sommige platformen laat u best de eerste logische track ongebruikt, zowel
in disklabel(8) als in fdisk(8).
Deze richtlijn wordt soms vervalst tot "begin de partities op sector 63"
maar dit is ALLEEN waar als dat op uw hardware de grootte is van een track.
Maak niet die veronderstelling, ze is niet altijd juist, disklabel zal u
zeggen wat het denkt dat het aantal sectoren per track is.
Vele andere platformen verwachten dat de OpenBSD partities beginnen op
sector 0.
d590 4
a593 36
</ul>


<a name="fdisk"></a>
<h2>14.2 - fdisk(8) gebruiken</h2>

Bekijk zeker de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
man pagina.

<p>
fdisk(8) wordt op sommige platformen (i386, amd64, macppc, zaurus en armish)
gebruikt om een partitie aan te maken die herkend wordt door de boot ROM
van het systeem, en waarin de OpenBSD disklabel partities geplaatst kunnen
worden.
Andere platformen hebben fdisk(8) niet nodig en gebruiken het niet.
fdisk(8) kan ook gebruikt worden voor het manipuleren van de Master Boot
Record (MBR), en dat kan een impact hebben voor alle besturingssystemen
op een computer.
In tegenstelling tot de fdisk-achtige programma's op sommige andere
besturingssytemen, veronderstelt OpenBSD's fdisk dat u weet wat u wil doen.
Voor het overgrote deel zal het u laten doen wat u moet doen, en dit maakt
het een krachtig hulpmiddel om bij de hand te hebben.
Het zal u ook dingen laten doen die u beter niet doet of waarvan het niet
de bedoeling was dat u ze deed, dus het moet voorzichtig gebruikt worden.

<p>
Normaal zal er slechts één OpenBSD fdisk partitie op een schijf geplaatst
worden.
Die partitie zal dan door <a href="#disklabel">disklabel</a> onderverdeeld
worden in OpenBSD bestandssysteempartities.

<p>

<p>
Om gewoon uw partitietabel te bekijken met fdisk, gebruikt u:
a594 126
<blockquote><pre>
# <b>fdisk sd0</b><br>
</pre></blockquote>

<p>
Dat zal een uitvoer gelijkaardig aan deze geven:

<blockquote><pre>
Disk: sd0       geometry: 553/255/63 [8883945 Sectors]
Offset: 0       Signature: 0xAA55
         Starting       Ending       LBA Info:
 #: id    C   H  S -    C   H  S [       start:      size   ]
------------------------------------------------------------------------
*0: A6    3   0  1 -  552 254 63 [       48195:     8835750 ] OpenBSD     
 1: 12    0   1  1 -    2 254 63 [          63:       48132 ] Compaq Diag.
 2: 00    0   0  0 -    0   0  0 [           0:           0 ] unused      
 3: 00    0   0  0 -    0   0  0 [           0:           0 ] unused      
</pre></blockquote>

<p>
In dit voorbeeld bekijken we de fdisk uitvoer van de eerste SCSI schijf.
We kunnen de OpenBSD partitie (A6) en haar grootte zien. De * vertelt ons
dat de OpenBSD partitie een bootable partitie is.

<p>
In het voorgaande voorbeeld bekeken we alleen onze informatie. Wat als we
onze partietabel willen bewerken? Wel, om dat te doen moeten we de <b>-e</b>
vlag gebruiken. Dit zal een commandoregel prompt tevoorschijn brengen om met
fdisk te interageren.

<blockquote><pre>
# <b>fdisk -e wd0</b>
Enter 'help' for information
fdisk: 1&gt; <b>help</b>
        help            Command help list
        manual          Show entire OpenBSD man page for fdisk
        reinit          Re-initialize loaded MBR (to defaults)
        setpid          Set the identifier of a given table entry
        disk            Edit current drive stats
        edit            Edit given table entry
        flag            Flag given table entry as bootable
        update          Update machine code in loaded MBR
        select          Select extended partition table entry MBR
        swap            Swap two partition entries
        print           Print loaded MBR partition table
        write           Write loaded MBR to disk
        exit            Exit edit of current MBR, without saving changes
        quit            Quit edit of current MBR, saving current changes
        abort           Abort program without saving current changes
fdisk: 1&gt; 
</pre></blockquote>

<p>

<p>Hier is een overzicht van de commando's die u kan gebruiken wanneer u de
<b>-e</b> vlag kiest.

<ul>
<li><b>help</b>  Toon een lijst van commando's die fdisk gebruikt in de
interactieve edit modus.
<li><b>reinit</b>  Initialiseer de momenteel geselecteerde, in-het-geheugen
kopie van de boot block.
Dit is een handige manier om snel een "full-disk" OpenBSD partitie op zijn
plaats te zetten, de bootcode te updaten, en in het algemeen het systeem
klaar te maken voor OpenBSD (en niets anders dan OpenBSD).
<li><b>disk</b>  Toon de huidige schijfgeometrie die fdisk onderzocht heeft.
U krijgt de gelegenheid om deze te bewerken indien u dat wenst.
<li><b>setpid</b>  Verander de partitie identifier van de gegeven partitietabel
entry. Dit commando is bepaald handig om een bestaande partitie opnieuw toe
te kennen aan OpenBSD.
<li><b>edit</b>  Bewerk een gegeven tabel entry in de geheugenkopie van de
huidige boot block. U kan bewerken ofwel in BIOS geometrie modus, of in
sector offsets en groottes.
<li><b>flag</b>  Maak de gegeven partitietabel entry bootable. Slechts
één entry kan bootable gemarkeerd worden. Als u van een
"extended" partitie wenst te booten, zal u de partitietabel entry voor de
extended partitie bootable moeten markeren.
(OpenBSD zelf kan alleen vanaf primaire partities gestart worden, maar u
kan gelijk welke partitie als bootable markeren.)
<li><b>update</b>  Update de machinecode in de geheugenkopie van de
momenteel geselecteerde boot block.
<li><b>select</b>  Selecteer en laad in het geheugen de boot block waarnaar
verwezen wordt door de extended partitie tabel entry in de huidige boot block.
<li><b>swap</b>  Verwisselt twee MBR entries, zodat u de MBR kan herschikken.
<li><b>print</b>   Vertoon de momenteel geselecteerde in-het-geheugen kopie
van de boot block en zijn MBR tabel op het scherm.
<li><b>write</b>   Schrijf de in-het-geheugen kopie van de boot block naar
de schijf. U zal gevraagd worden om deze handeling te bevestigen.
<li><b>exit</b>  Verlaat het huidige niveau van fdisk, ofwel door terug te keren
naar de voorheen geselecteerde in-het-geheugen kopie van een boot block, ofwel
door het programma te verlaten indien er geen is.
<li><b>quit</b>  Verlaat het huidige niveau van fdisk, ofwel door terug te keren
naar de voorheen geselecteerde in-het-geheugen kopie van een boot block, ofwel
door het programma te verlaten indien er geen is. In tegenstelling tot exit
schrijft dit de gewijzigde block weg.
<li><b>abort</b>   Verlaat het programma zonder de huidige wijzigingen te
bewaren.
</ul>

<h3>fdisk trucs en tips</h3>
<ul>
<!-- <li>On OpenBSD platforms which use fdisk, you should leave the first
track free.
This leaves room for the Master Boot Record, which is where the fdisk
partition table resides.  (not sure if this is true) -->
<li>fdisk(8) biedt de mogelijkheid om partities te wijzigen in "raw sector"
en Cylinder/Head/Sector formaten.
Beide opties worden gegeven voor een reden -- sommige taken worden
gemakkelijker vervuld op de ene manier, andere op de andere manier.
Beperk uzelf niet tot het gebruik van slechts één optie.
<li>Bij een volledig blanco schijf zal de bootcode van de master boot record
naar de schijf geschreven moeten worden alvorens ze kan booten.
U kan hiervoor de "reinit" of "update" opties gebruiken.
Als u nalaat om dit te doen, kan u een geldige partitietabel schrijven met
fdisk, maar geen bootable schijf hebben.
Het kan dat u de bestaande bootcode wil updaten als u onzeker bent van de
oorsprong ervan.
<li>Als uw systeem een "maintenance" of "diagnostic" partitie heeft, wordt
het aanbevolen dat u die op zijn plaats laat of deze installeert VOORDAT
u OpenBSD installeert.
<li>Om historische redenen bewaart "q" de wijzigingen en verlaat het
programma, en "x" verlaat het programma zonder te bewaren.
Dit is het tegenovergestelde van wat vele mensen nu gewoon zijn in andere
omgevingen.
fdisk(8) waarschuwt niet alvorens wijzigingen te schrijven, dus gebruik
het met voorzorg.
d600 1
a600 1
<h2>14.3 - Extra schijven toevoegen in OpenBSD</h2>
d725 1
a725 1
<h2>14.4 - Hoe wordt swap gebruikt?</h2>
d727 1
a727 1
<h3>14.4.1 - Over swap</h3>
d770 1
a770 1
<h3>14.4.2 - Swappen naar een partitie</h3>
d786 1
a786 1
<h3>14.4.3 - Swapping to a file</h3>
d875 1
a875 1
<h2>14.5 - Soft Updates</h2>
d908 5
a912 3
<h2>14.6 - Hoe boot OpenBSD/i386?</h2>
Het bootproces voor OpenBSD/i386 is niet triviaal, en begrijpen hoe het werkt,
kan nuttig zijn om een probleem te onderzoeken wanneer er dingen niet werken.
d916 1
a916 1
eerste fysische sector (512 bytes) op de schijf.
d924 3
a926 3
sector inhouden, niet alleen de code, zoals het op sommige systemen zou kunnen
betekenen.
U zal dit zelden willen doen.
d928 1
a928 1
("<tt>fdisk -u wd0</tt>").
d931 2
a932 2
Hoewel OpenBSD een MBR bevat, bent u niet verplicht om deze te gebruiken,
aangezien praktisch gelijk welke MBR OpenBSD kan booten.
d958 1
d962 2
a963 2
(volgens de naam van het bestand dat de code bevat) is de eerste fysische
sector van de OpenBSD partitie op de schijf.
a990 3
De oudere (pre v3.5) biosboot(8) vertoonde de boodschap "<tt>reading
boot...</tt>".

d992 1
d1035 1
a1035 1

d1060 2
a1061 2
OpenBSD 4.6 (GENERIC.MP) #89: Thu Jul  9 21:32:39 MDT 2009
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC.MP
d1144 1
a1144 1
<h2>14.7 - Wat zijn de problemen met grote schijven in OpenBSD?</h2>
d1156 1
a1156 1
Een nieuwe 250G harde schijf kan problemen hebben op oudere (pre >137G
d1161 1
a1161 1
U moet natuurlijk de mogelijkheden van uw hardware respecteren.
d1211 2
a1212 2
<p>
<b>de volledige root partitie moet binnen de door het BIOS van de computer
d1214 1
d1262 1
a1262 1
2<sup>31</sup>-1, ofwel 2,147,483,647 sectoren, en aangezien elke sector
a1276 5
Voor het uitvoeren van upgrades zal u FFS2 partities als "noauto" willen
aanduiden om te vermijden dat ze verkeerd behandeld worden door de
installatiekernel (die geen FFS2 partities ondersteunt).

<p>
d1281 2
a1282 3
Vele werden gewoon nog niet getest, bij dit schrijven waren er geen >1TB IDE
of SATA drives beschikbaar voor tests, dus we kunnen nog niet met zekerheid
zeggen dat alles perfect werkt.
d1285 1
a1285 1
<h2>14.8 - Installeren van Bootblocks - i386/amd64 specifiek</h2>
d1329 1
a1329 1
<h2>14.9 - Zich op het ergste voorbereiden: Backup en Restore vanaf tape</h2>
d1336 2
a1337 1
het geval één van uw vaste schijven het begeeft.
d1343 6
a1348 18
Een meer geavanceerde backup utility,
"<a href="http://www.amanda.org">Amanda</a>" genoemd, is ook beschikbaar via
<a href="faq15.html#PkgMgmt">packages</a> om meerdere servers naar één
tape drive te backup'en.
In de meeste omgevingen is
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a>/<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>
voldoende. Als u echter meerdere machines moet backupen, kan
het de moeite lonen om Amanda te bekijken.

<p>
De device voorbeelden in dit document zijn voor een configuratie die
SCSI schijven en tape gebruikt. In een productie-omgeving worden SCSI schijven
aanbevolen eerder dan IDE vanwege de manier waarop ze slechte blokken
behandelen.
Dat wil niet zeggen dat deze informatie nutteloos is als u een IDE schijf
of een ander type van tape drive gebruikt, uw device-namen zullen gewoon
lichtjes verschillen. Zo zou sd0a bijvoorbeeld wd0a zijn in een
IDE-gebaseerd systeem.
d1694 1
a1694 1
<h2>14.10 - Schijfimages mounten in OpenBSD</h2>
d1699 1
a1699 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnd&amp;sektion=4">vnd(4)</a>
d1729 1
a1729 1
<h2>14.11 - Help! Ik krijg fouten met IDE DMA!</h2>
d1734 1
a1734 5
zijn onbetrouwbaar bij vele combinaties van hardware. Tot voor kort werden
de meeste "mainstream" besturingssystemen die beweerden DMA transfers met
IDE schijven te ondersteunen, niet geleverd met die functionaliteit
standaard ingeschakeld, vanwege onbetrouwbare hardware.
Nu worden veel van diezelfde machines gebruikt voor OpenBSD.
a1822 20
<p>
Een andere optie die beschikbaar is voor vele platformen is een van de vele
producten die meerdere schijven zich als een enkele IDE of SCSI schijf laten
voordoen, en vervolgens in een standaard IDE of SCSI adapter gestoken worden.
Deze apparaten kunnen werken op bijna gelijk welk hardware platform dat ofwel
SCSI of IDE ondersteunt.

<p>
Enkele fabricanten van deze producten:
<ul>
<li><a href="http://www.arcoide.com/">Arco</a>
<li><a href="http://www.accusys.com.tw/">Accusys</a>
<li><a href="http://www.maxtronic.com/">Maxtronic</a>
<li><a href="http://www.infortrend.com/">Infortrend</a>
</ul>
(Opmerking: dit zijn gewoon producten waarvan OpenBSD gebruikers hun gebruik
gemeld hebben -- dit is helemaal geen steunbetuiging, noch een volledige
lijst.)


d1920 1
a1920 1
(CD-ROM, DVD media), FAT (MS-DOS en Windows), NFS, NTFS (Windows), AmigaDOS.
d1960 1
a1960 1
hw.disknames=cd0,cd1,wd0,fd0,cd2
d1994 1
d2002 2
a2003 6
rpm: 3600
interleave: 1
trackskew: 0
cylinderskew: 0
headswitch: 0           # microseconds
track-to-track seek: 0  # microseconds
d2008 14
a2021 14
  a:        408366      20338290  4.2BSD   2048 16384   16 # Cyl 20176*- 20581 
  b:       1638000      20746656    swap                   # Cyl 20582 - 22206 
  c:      78165360             0  unused      0     0      # Cyl     0 - 77544 
  d:       4194288      22384656  4.2BSD   2048 16384   16 # Cyl 22207 - 26367 
  e:        409248      26578944  4.2BSD   2048 16384   16 # Cyl 26368 - 26773 
  f:      10486224      26988192  4.2BSD   2048 16384   16 # Cyl 26774 - 37176 
  g:      12182499      37474416  4.2BSD   2048 16384   16 # Cyl 37177 - 49262*
  i:         64197            63 unknown                   # Cyl     0*-    63*
  j:      20274030         64260 unknown                   # Cyl    63*- 20176*
  k:       1975932      49656978   MSDOS                   # Cyl 49262*- 51223*
  l:       3919797      51632973 unknown                   # Cyl 51223*- 55111*
  m:       2939832      55552833  ext2fs                   # Cyl 55111*- 58028*
  n:       5879727      58492728  ext2fs                   # Cyl 58028*- 63861*
  o:      13783707      64372518  ext2fs                   # Cyl 63861*- 77535*
a2042 2
Sommige zijn echter niet ondersteund, bv. de NTFS ondersteuning is
experimenteel en daarom niet opgenomen in GENERIC.
d2171 1
a2171 1
sd0: 123MB, 123 cyl, 64 head, 32 sec, 512 bytes/sec, 251904 sec total
d2327 1
a2327 1
meestal sd0.
d2329 2
a2330 1
apparaten heeft, dan zal het een andere identificatie toegewezen krijgen,
d2360 1
a2360 1
Het is waarschijnlijk niet slim om aan te nemen dat de overstap naar
d2621 2
a2622 2
Originally [OpenBSD: faq14.html,v 1.199 ]<br>
$Translation: faq14.html,v 1.70 2010/03/08 18:21:29 maurice Exp $<br>
@


1.58
log
@Sync with Steelix CVS
@
text
@d2321 3
a2323 3
Aangezien de media lees- en schrijfbaar zijn van zowel USB als IDE-adapters,
kunt u een medium aanmaken voor booten in een IDE-adapter maar het beheren
in een USB-adapter op een andere machine (of omgekeerd).
d2326 1
a2326 1
OpenBSD behandelt een flash-schijf zoals iedere andere schijf dus men kan
d2567 2
a2568 2
Originally [OpenBSD: faq14.html,v 1.198 ]<br>
$Translation: faq14.html,v 1.69 2010/03/05 12:02:45 maurice Exp $<br>
@


1.57
log
@Sync with Steelix CVS
@
text
@d2381 2
d2567 2
a2568 2
Originally [OpenBSD: faq14.html,v 1.197 ]<br>
$Translation: faq14.html,v 1.68 2010/02/11 11:10:08 maurice Exp $<br>
@


1.56
log
@Sync with Steelix CVS
@
text
@d2430 2
a2431 2
<a href="../i386.html">i386</a> dan
<a href="../amd64.html">amd64</a> gebruiken.
d2566 1
a2566 1
$Translation: faq14.html,v 1.67 2010/01/18 07:15:03 maurice Exp $<br>
@


1.55
log
@Sync with Steelix CVS
@
text
@d2353 1
a2353 1
Merk op dat indien het type van de tweede partitie geschikt is gekozen, het
d2565 2
a2566 2
Originally [OpenBSD: faq14.html,v 1.196 ]<br>
$Translation: faq14.html,v 1.66 2009/12/24 13:39:18 maurice Exp $<br>
@


1.54
log
@Sync with Steelix CVS
@
text
@d57 7
d2100 1
d2361 90
d2565 2
a2566 2
Originally [OpenBSD: faq14.html,v 1.195 ]<br>
$Translation: faq14.html,v 1.65 2009/11/30 18:21:19 maurice Exp $<br>
@


1.53
log
@Sync with Steelix CVS
@
text
@a2374 1
<p>
d2467 2
a2468 2
Originally [OpenBSD: faq14.html,v 1.194 ]<br>
$Translation: faq14.html,v 1.64 2009/11/09 21:40:18 maurice Exp $<br>
@


1.52
log
@Sync with Steelix CVS
@
text
@d846 1
a846 1
    Using Drive 0, Partition 3;
a1856 1
Merk op dat FreeBSD's UFS2 bestandssysteem niet ondersteund wordt.
d2468 2
a2469 2
Originally [OpenBSD: faq14.html,v 1.192 ]<br>
$Translation: faq14.html,v 1.63 2009/11/03 08:26:24 maurice Exp $<br>
@


1.51
log
@Sync with Steelix CVS
@
text
@d2376 1
d2470 1
a2470 1
$Translation: faq14.html,v 1.62 2009/10/30 23:15:29 maurice Exp $<br>
@


1.50
log
@Sync with Steelix CVS
@
text
@d966 4
a969 4
platform, EN u antwoordt niet "Yes" op de "Use entire disk" vraag van het
<a href="faq4.html#Disks">installatieproces</a>, kan u komen te zitten met
een schijf zonder geldige MBR, en deze zal dus niet bootable zijn, ook al
heeft ze een geldige partitietabel.
d1706 6
a1711 11
OpenBSD bevat RAIDframe, een software RAID oplossing. Documentatie ervoor
kan op de volgende plaatsen gevonden worden:

<ul>
<li><a href="#Optraid">Schijfoptimalisatie, RAID</a>
<li><a href="http://www.pdl.cmu.edu/RAIDframe/">RAIDframe Homepagina</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&amp;sektion=8">man
     pagina voor raidctl(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">man
     pagina voor raid(4)</a>
</ul>
d1714 3
a1716 5
De root partitie kan direct
door OpenBSD gemirrored worden met de "Autoconfiguration" optie van RAIDframe.

<p>
OpenBSD 3.7-stable en later bevat ook mirroring als een functionaliteit van de
d1718 3
a1720 12
driver.
Dit systeem is ingebouwd in de GENERIC kernel en zit in de bsd.rd kernel van
enkele platformen (amd64, hppa, hppa64, i386),
dus het kan veel gemakkelijker te gebruiken zijn, hoewel het enkele beperkingen
heeft wat betreft het herbouwen van de array.
Zie:
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">ccd(4)
man pagina</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&amp;sektion=8">ccdconfig(8)
man pagina</a>
</ul>
d1730 9
d2366 2
a2367 2
OpenBSD heeft verscheidene mogelijkheden om de snelheid van uw
schijfoperaties te vergroten en om fouttolerantie te bieden.
a2370 2
<li><a href="#Optccd">CCD</a> - Concatenated Disk Driver.
<li><a href="#Optraid">RAID</a>
a2375 96
<a name="Optccd"></a>
<h3>14.18.1 - CCD</h3>

De eerste mogelijkheid is het gebruik van
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccd&amp;sektion=4">ccd(4)</a>,
de Concatenated Disk Driver.
Dit laat u toe om verscheidene partities samen te voegen tot één
virtuele schijf (en dus kan u verscheidene schijven er laten uitzien als
één schijf). Dit concept is gelijkaardig aan dat van LVM
(logical volume management), dat men in veel commerciële Unix varianten
vindt.

<p>
Als u GENERIC draait, is ccd reeds ingeschakeld (in
<tt>/usr/src/sys/conf/GENERIC</tt>).  Als u uw kernel hebt aangepast, moet
u het mogelijk opnieuw in uw kernelconfiguratie zetten.
Hoe dan ook, een lijn als deze moet in uw configuratiebestand staan:

<blockquote><pre>
<strong>pseudo-device   ccd     4       # concatenated disk devices</strong>
</pre></blockquote>

<p>
Het bovenstaande voorbeeld geeft u tot 4 ccd devices (virtuele schijven).
Nu moet u uitzoeken welke partities op uw werkelijke schijven u aan ccd wil
besteden. Gebruik disklabel om deze partities als type 'ccd' aan te duiden.
Op sommige architecturen kan het zijn dat disklabel u niet toelaat om dit
te doen. Duid ze in dat geval aan als 'ffs'.

<p>
Als u ccd gebruikt om aan prestatie te winnen door striping, merk dan op dat u
geen optimale prestatie zal krijgen tenzij u hetzelfde model van schijven
gebruikt met dezelfde disklabel instellingen.

<p>
Bewerk /etc/ccd.conf zodat het er ongeveer zo uitziet:
(kijk voor meer informatie over het configureren van ccd, naar
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ccdconfig&amp;sektion=8">ccdconfig(8)</a>)

<blockquote><pre>
# Configuration file for concatenated disk devices
#
# ccd   ileave  flags   component devices
ccd0   16      none    /dev/sd2e /dev/sd3e
</pre></blockquote>

<p>
Om uw wijzigingen door te voeren, draait u

<blockquote><pre>
# ccdconfig -C
</pre></blockquote>

<p>
Zolang /etc/ccd.conf bestaat, zal ccd zichzelf automatisch bij het opstarten
configureren.
Nu hebt u een nieuwe schijf, ccd0, een combinatie van /dev/sd2e en /dev/sd3e.
Gebruik hierop gewoon disklabel zoals u normaal zou doen om de partitie(s)
te maken die u wil gebruiken. Opnieuw, gebruik niet de 'c' partitie als
een eigenlijke partitie waarop u dingen wil zetten.
Zorg ervoor dat uw bruikbare partities ten minste één cilinder
van het begin van de schijf staan.

<p>
<a name="Optraid"></a>
<h3>14.18.2 - RAID</h3>

Een andere oplossing is <a href= "http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>,
dat u <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&amp;sektion=8">raidctl(8)</a>
zal laten gebruiken om uw raid devices te controleren.
OpenBSD's RAID is gebaseerd op Greg Oster's
<a href="http://www.cs.usask.ca/staff/oster/raid.html">NetBSD port</a>
van de CMU
<a href="http://www.pdl.cmu.edu/RAIDframe/">RAIDframe</a> software.
OpenBSD heeft ondersteuning voor RAID levels 0, 1, 4, en 5.

<p>
Voor raid moet, net zoals met ccd, ondersteuning in de KERNEL zitten.
In tegenstelling tot ccd, vindt u ondersteuning voor RAID niet in GENERIC,
dus het moet in uw kernel gecompileerd worden (RAID ondersteuning voegt
zo'n 500K toe aan de grootte van een i386 kernel).

<blockquote><pre>
<strong>pseudo-device   raid   4       # RAIDframe disk device</strong>
</pre></blockquote>

<p>
Lees de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raid&amp;sektion=4">raid(4)</a>
en
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=raidctl&amp;sektion=8">raidctl(8)</a>
man pagina's om alle details te verkrijgen. Er zijn vele opties en
mogelijke configuraties beschikbaar, en een gedetailleerde uitleg valt
buiten het bestek van dit document.

<p>
d2377 1
a2377 1
<h3>14.18.3 - Soft updates</h3>
d2379 1
a2379 1
Nog een tool die gebruikt kan worden om uw systeem te versnellen is
d2386 3
a2388 8
niet altijd up-to-date is. Zodoende zou een systeemcrash geen volledige
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
vereisen bij het opstarten, maar slechts een achtergrondversie van fsck die
wijzigingen aan de metainfo in RAM aanbrengt (&agrave; la softupdates).
Dit betekent dat een server rebooten veel sneller gaat, aangezien u niet
hoeft te wachten op fsck!
(OpenBSD heeft deze mogelijkheid nog niet.) U kan meer lezen over
softupdates in de <a href="#SoftUpdates">Softupdates FAQ</a> entry.
d2392 1
a2392 1
<h3>14.18.4 - Grootte van de namei() cache</h3>
d2468 2
a2469 2
Originally [OpenBSD: faq14.html,v 1.189 ]<br>
$Translation: faq14.html,v 1.59 2009/10/17 06:33:19 maurice Exp $<br>
@


1.49
log
@Sync with Steelix CVS
@
text
@d955 2
a956 2
OpenBSD 4.5 (GENERIC) #1749: Sat Feb 28 14:51:18 MST 2009
    deraadt@@i386.openbsd.org:/usr/src/sys/arch/i386/compile/GENERIC
d2578 2
a2579 2
Originally [OpenBSD: faq14.html,v 1.188 ]<br>
$Translation: faq14.html,v 1.58 2009/05/01 15:08:15 maurice Exp $<br>
@


1.48
log
@Sync with Steelix CVS -- we are back to normal operation!
@
text
@d955 1
a955 1
OpenBSD 4.4 (GENERIC) #1021: Tue Aug 12 17:16:55 MDT 2008
d2578 2
a2579 2
Originally [OpenBSD: faq14.html,v 1.187 ]<br>
$Translation: faq14.html,v 1.57 2009/04/07 19:28:32 maurice Exp $<br>
@


1.47
log
@Sync with Steelix CVS
@
text
@d629 13
d1034 1
a1034 1
<li><a href="http://www.ata-atapi.com/hiw.htm">http://www.ata-atapi.com/hiw.htm</a>
d2578 2
a2579 2
Originally [OpenBSD: faq14.html,v 1.185 ]<br>
$Translation: faq14.html,v 1.55 2009/03/12 20:36:51 maurice Exp $<br>
@


1.46
log
@Sync with Steelix CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2008 by OpenBSD.">
d33 1
a33 1
<li><a href="#SwapFile"   >14.4 - Hoe swappen naar een bestand</a>
d620 25
a644 1
<h2>14.4 - Hoe swappen naar een bestand</h2>
d647 24
d679 6
a684 5
Swappen naar een bestand vereist geen aangepaste kernel, hoewel dat nog
steeds gedaan kan worden, zal deze faq u tonen hoe u swapruimte toevoegt
op beide manieren.

<h3>Swappen naar een bestand.</h3>
d687 1
a687 2
Swappen naar een bestand is de gemakkelijkste en snelste manier om extra
swapruimte in te stellen. Het bestand mag niet op een bestandssysteem staan
d706 1
a706 1
niet veel gebruikt. Maar voor de bedoeling van dit document, zullen we doen
a755 62
<h3>Swappen via een vnode device</h3>

<p>
Dit is een meer permanente oplossing om meer swapruimte toe te voegen.
Om permanent naar een bestand te swappen, maakt u eerst een kernel met
vnd0c als swap. Als u wd0a als root bestandssysteem hebt, is wd0b de
vorige swap, gebruik deze lijn in het kernelconfiguratiebestand
(raadpleeg het compileren van een nieuwe kernel indien u twijfelt):

<blockquote><pre>
config          bsd     root on wd0a swap on wd0b and vnd0c dumps on wd0b
</pre></blockquote>

<p>
Nadat dit gebeurd is, moet het bestand dat zal gebruikt worden om te swappen,
aangemaakt worden. U doet dit best door hetzelfde commando te gebruiken als
in de bovenstaande voorbeelden.

<blockquote><pre>
$ <b>sudo dd if=/dev/zero of=/var/swap bs=1k count=32768</b>
32768+0 records in
32768+0 records out
33554432 bytes transferred in 20 secs (1677721 bytes/sec)
</pre></blockquote>

<p>
Nu uw bestand op zijn plaats staat, moet u het bestand toevoegen aan uw
<i>/etc/fstab</i>. Hier is een voorbeeldlijn om met dit device als swap te
starten bij het booten.

<blockquote><pre>
$ <b>cat /etc/fstab</b>
/dev/wd0a / ffs rw 1 1
/dev/vnd0c none swap sw 0 0 
</pre></blockquote>

<p>
Op dit punt moet uw computer herstart worden zodat de kernelveranderingen
kunnen plaatsvinden. Zodra dit gebeurd is, is het tijd om het device als
swap te configureren. Om dit te doen zal u
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vnconfig&amp;sektion=8">vnconfig(8)</a> gebruiken.

<blockquote><pre>
$ <b>sudo vnconfig -c -v vnd0 /var/swap</b>
vnd0: 33554432 bytes on /var/swap
</pre></blockquote>

<p>
En dan nu de laatste stap, het swappen naar dat device aanzetten. We zullen
dit gewoon doen zoals in de bovenstaande voorbeelden, met swapctl(8). Daarna
zullen we controleren om te zien of het juist werd toegevoegd aan onze lijst
van swap devices.

<blockquote><pre>
$ <b>sudo swapctl -a /dev/vnd0c</b>
$ <b>swapctl -l</b>
Device      512-blocks     Used    Avail Capacity  Priority
swap_device      65520        8    65512     0%    0
/dev/vnd0c       65536        0    65536     0%    0
Total           131056        8   131048     0%
</pre></blockquote>

d2565 2
a2566 2
Originally [OpenBSD: faq14.html,v 1.183 ]<br>
$Translation: faq14.html,v 1.54 2009/02/26 21:35:25 maurice Exp $<br>
@


1.45
log
@Sync with Steelix CVS
@
text
@d573 1
a573 1
# <b>newfs sd2a </b>
d588 1
a588 1
# <b>mount /dev/sd2a /u</b>
d596 1
a596 1
/dev/sd2a /u ffs rw 1 1
d604 1
a604 1
bestand om aan te geven dat de /usr/local partitie nu /dev/sd2a is (uw
d608 1
a608 1
<b>/dev/sd2a /usr/local ffs rw 1 1</b>
d2579 2
a2580 2
Originally [OpenBSD: faq14.html,v 1.182 ]<br>
$Translation: faq14.html,v 1.53 2009/02/06 19:01:32 maurice Exp $<br>
@


1.44
log
@Sync with Steelix CVS
@
text
@d2286 1
a2286 1
Het gebruik van <a href="faq8.html#softdep">soft updates</a> helpt aanzienlijk,
d2579 2
a2580 2
Originally [OpenBSD: faq14.html,v 1.181 ]<br>
$Translation: faq14.html,v 1.52 2008/12/23 18:38:30 maurice Exp $<br>
@


1.43
log
@Sync with Steelix CVS
@
text
@d361 2
d417 2
d497 1
a497 1

d540 1
a540 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bc&amp;sektion=1">bc(1))</a>.
d547 1
a547 1
grootte van elke partiite en de offset van elke partitie (Behalve de 'c'
d605 1
a605 1
vers geformatteerde partitie.) Voorbeeld:
d904 1
a904 1
>> OpenBSD/i386 BOOT 2.10
d946 1
a946 1
>> OpenBSD/i386 BOOT 2.10
d956 1
a956 1
OpenBSD 4.3 (GENERIC) #698: Wed Mar 12 11:07:05 MDT 2008
d1335 1
a1335 1
Tenslotte welke partitie te backup'en (/dev/rsd0a, etc)
d2102 1
d2139 1
a2139 1
<h3>Het toestel is nieuw/leeg en u wil het alleen met OpenBSD gebruiken</h3>
d2170 1
a2170 1
<h3>U kreeg het geheugentoestel van iemand met wie u gegevens wil uitwisselen</h3>
d2240 123
d2579 2
a2580 2
Originally [OpenBSD: faq14.html,v 1.173 ]<br>
$Translation: faq14.html,v 1.50 2008/06/21 08:32:52 smestdag Exp $<br>
@


1.42
log
@Sync with Steelix CVS
@
text
@d1145 3
a1147 3
Zodra men een 2TB bestandssysteem bereikt met standaard fragment- en
blokgroottes, zal fsck 1GB RAM vereisen om te draaien, wat de limiet is
voor applicaties onder OpenBSD.
d2451 2
a2452 2
Originally [OpenBSD: faq14.html,v 1.170 ]<br>
$Translation: faq14.html,v 1.49 2008/05/02 10:49:12 smestdag Exp $<br>
@


1.41
log
@Sync with Steelix CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2007 by OpenBSD.">
d560 2
a561 7
Daar kan u gewoon "96M" gebruiken om "96 megabytes" te specificeren. (Of, als
u een voldoende grote schijf hebt, 96G voor 96 gigs!) Jammer genoeg gebruikt
de -E modus de BIOS schijfgeometrie, niet de werkelijke schijfgeometrie, en vaak
zijn die twee niet hetzelfde. Om over deze beperking heen te geraken, typt u
'g d' voor 'geometry disk'. (Andere opties zijn 'g b' voor 'geometry bios'
en 'g u' voor 'geometry user', of gewoon wat het label zei voordat disklabel
veranderingen aanbracht.)
d867 1
a867 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=installboot&amp;sektion=8&amp;arch=i386">installboot</a>,
d950 1
a950 1
Copyright (c) 1995-2007 OpenBSD.  All rights reserved.  http://www.OpenBSD.org
d952 1
a952 1
OpenBSD 4.2 (GENERIC) #375: Tue Aug 28 10:38:44 MDT 2007
d1024 2
a1025 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=biosboot&amp;sektion=8">biosboot(8)
manual pagina</a>.

d1027 1
d1039 5
a1043 8
OpenBSD ondersteunt een individueel bestandssysteem van maximaal
2<sup>31</sup>-1, of 2,147,483,647 sectoren, en aangezien elke sector
512 bytes is, is dat een kleine hoeveelheid minder dan 1T.

<p>
Er is ook een 1T limiet op de grootte van de fysische schijf, hoewel dat
onder *sommige* omstandigheden geen problemen zal veroorzaken tot 2T,
dit is echter <b>niet</b> gegarandeerd.
d1049 2
a1050 1
standaarden) interfaces, en bij sommige heel oude SCSI adapters werden
d1071 1
a1071 1
moet binnen de eerste 128G vallen.
d1098 2
a1099 2
<tt>/boot</tt> in het geval van i386) en de kernel (<tt>/bsd</tt>) binnen
het door het BIOS ondersteunde bereik zitten, en binnen hun eigen
d1129 2
d1134 6
d1144 36
d2451 2
a2452 2
Originally [OpenBSD: faq14.html,v 1.167 ]<br>
$Translation: faq14.html,v 1.48 2007/11/18 13:46:40 smestdag Exp $<br>
@


1.40
log
@Sync with Steelix CVS
@
text
@d75 1
a75 1
Voor <a href="../../nl/i386.html">i386</a>,
d77 2
a78 2
<a href="../../nl/macppc.html">macppc</a>,
<a href="../../nl/zaurus.html">zaurus</a>,
d2415 1
a2415 1
$Translation: faq14.html,v 1.47 2007/11/16 20:49:49 smestdag Exp $<br>
@


1.39
log
@Sync with steelix translation CVS
@
text
@d79 1
a79 1
en <a href="../../nl/cats.html">cats</a>
d339 1
a339 1
fdisk(8) wordt op sommige platformen (i386, amd64, macppc, zaurus en cats)
d438 2
d957 1
a957 1
OpenBSD 4.1 (GENERIC) #1434: Thu Mar  8 22:56:57 MST 2007
d2414 2
a2415 2
Originally [OpenBSD: faq14.html,v 1.164 ]<br>
$Translation: faq14.html,v 1.46 2007/05/04 05:32:09 smestdag Exp $<br>
@


1.38
log
@sync with steelix translation CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2006 by OpenBSD.">
d953 1
a953 1
Copyright (c) 1995-2006 OpenBSD.  All rights reserved.  http://www.OpenBSD.org
d955 2
a956 1
OpenBSD 4.0 (GENERIC) #1107: Sat Sep 16 19:15:58 MDT 2006
d2412 2
a2413 2
Originally [OpenBSD: faq14.html,v 1.163 ]<br>
$Translation: faq14.html,v 1.45 2006/12/31 15:10:35 smestdag Exp $<br>
@


1.37
log
@sync with steelix translation CVS
@
text
@d1135 1
a1135 1
te fsck'en die werkelijk gealloceerd is aan gemounte partities.
d2411 2
a2412 2
Originally [OpenBSD: faq14.html,v 1.162 ]<br>
$Translation: faq14.html,v 1.44 2006/12/03 11:29:24 smestdag Exp $<br>
@


1.36
log
@sync with steelix translation CVS
@
text
@d38 1
a38 1
<li><a href="#InstBoot"   >14.8 - Installeren van Bootblocks - i386
d1053 1
a1053 1
Een nieuwe 250G harde schijf zal niet werken op oudere (pre >137G
d1131 2
d1134 5
a1138 1
naarmate het bestandssysteem uitbreidt.
d1142 1
a1142 1
<h2>14.8 - Installeren van Bootblocks - i386 specifiek</h2>
d1145 10
a1154 17
Oudere versies van MS-DOS kunnen enkel omgaan met schijfgeometrieën van
1024 cilinders of minder. Aangezien bijna alle moderne schijven meer dan
1024 cilinders hebben, hebben de meeste SCSI BIOS chips (die op een SCSI
controller kaart zitten) en IDE BIOS (dat onderdeel is van de rest van het
PC BIOS) een optie (soms standaard) om de werkelijke schijfgeometrie te
"vertalen" naar iets dat binnen de mogelijkheden van MS-DOS past. Niet alle
BIOS chips "vertalen" echter de geometrie op dezelfde wijze. Als u uw BIOS
verandert (met een nieuw moederbord of een nieuwe SCSI controller), en de
nieuwe gebruikt een verschillende "vertaalde" geometrie, dan zal u de
second-stage boot loader niet kunnen laden (en dus ook de kernel niet kunnen
laden).
(Dit is zo omdat de first-stage boot loader een lijst van de blokken bevat die
/boot uitmaken, in termen van de oorspronkelijke "vertaalde" geometrie).
Als u IDE schijven gebruikt, en u brengt veranderingen aan in uw BIOS
instellingen, kan u (zonder het te weten) ook de vertaling veranderen (de
meeste IDE BIOSen bieden 3 verschillende vertalingen). Om uw boot block
te herstellen zodat u normaal kan booten, steek dan eerst een bootdiskette
d1158 10
a1167 3
opstarten. U moet de first-stage boot loader updaten opdat die de nieuwe
geometrie zou zien (en de boot block overeenkomstig herschrijven).
<br>Ons voorbeeld zal veronderstellen dat uw boot schijf sd0 is (maar voor
d2411 2
a2412 2
Originally [OpenBSD: faq14.html,v 1.160 ]<br>
$Translation: faq14.html,v 1.43 2006/11/01 07:12:24 smestdag Exp $<br>
@


1.35
log
@sync with Steelix CVS
@
text
@d955 1
a955 1
OpenBSD 3.9 (GENERIC) #617: Thu Mar  2 02:26:48 MST 2006
d1738 2
a1739 2
beschikbare schijfruimte hebben, of meer dan 100% van een partitie in gebruik,
zoals getoond door
d1743 1
a1743 1
Wanneer een partitie gemaakt wordt met
d2405 2
a2406 2
Originally [OpenBSD: faq14.html,v 1.158 ]<br>
$Translation: faq14.html,v 1.42 2006/08/11 09:57:38 smestdag Exp $<br>
@


1.34
log
@sync with Steelix CVS
@
text
@a11 5
<style type="text/css">
  <!--
  pre { margin-left: 20px; }
  -->
</style>
d150 1
a150 1
<pre>
d181 1
a181 1
</pre>
d205 1
d210 1
a210 1
<pre>
d244 1
a244 1
</pre>
d363 3
a365 2
<pre># <b>fdisk sd0</b><br>
</pre>
d370 1
a370 1
<pre>
d380 1
a380 1
</pre>
d393 1
a393 1
<pre>
d413 1
a413 1
</pre>
d503 2
a504 1
<pre>
d506 2
a507 1
</pre>
d511 2
a512 1
<pre>
d526 1
a526 1
</pre>
d551 1
a551 1
<pre>
d553 1
a553 1
</pre>
d571 1
a571 1
<pre>
d573 1
a573 1
</pre>
d586 1
a586 1
<pre>
d588 1
a588 1
</pre>
d594 3
a596 1
<pre>/dev/sd2a /u ffs rw 1 1</pre>
d606 1
a606 1
<pre>
d608 1
a608 1
</pre>
d644 1
a644 1
<pre>
d648 1
a648 1
</pre>
d667 1
a667 1
<pre>
d672 1
a672 1
</pre>
d678 1
a678 1
<pre>
d681 1
a681 1
</pre>
d687 1
a687 1
<pre>
d693 1
a693 1
</pre>
d701 1
a701 1
<pre>
d705 1
a705 1
</pre>
d716 1
a716 1
<pre>
d718 1
a718 1
</pre>
d725 1
a725 1
<pre>
d730 1
a730 1
</pre>
d737 1
a737 1
<pre>
d741 1
a741 1
</pre>
d749 1
a749 1
<pre>
d752 1
a752 1
</pre>
d760 1
a760 1
<pre>
d767 1
a767 2
</pre>

d793 1
a793 1
<pre>
d795 1
a795 1
</pre>
d833 2
a834 1
<pre>
d836 2
a837 1
</pre>
d844 2
a845 1
<pre>
d847 2
a848 1
</pre>
d874 1
a874 1
<pre>
d876 1
a876 1
</pre>
d881 1
a881 1
<pre>
d883 1
a883 1
</pre>
d900 7
a906 6
<pre>
     probing: pc0 com0 com1 apm mem[636k 190M a20=on]
     disk: fd0 hd0+
     >> OpenBSD/i386 BOOT 2.10
     boot>
</pre>
d939 1
d974 3
a976 3
<pre>
    # <b>fdisk -u wd0</b>
</pre>
d979 3
a981 3
<pre>
    # <b>fdisk -u -f /usr/mdec/mbr wd0 </b>
</pre> 
d1164 1
a1164 1
<pre>
d1166 1
a1166 1
</pre>
d1172 1
a1172 1
<pre>
d1177 1
a1177 1
</pre>
d1220 1
a1220 1
<pre>
d1224 1
a1224 1
</pre>
d1234 1
a1234 1
<pre>
d1240 1
a1240 1
</pre>
d1252 1
a1252 1
<pre>
d1256 1
a1256 1
</pre>
d1262 1
a1262 1
<pre>
d1268 1
a1268 1
</pre>
d1298 1
a1298 1
<pre>
d1300 1
a1300 1
</pre>
d1320 1
a1320 1
<pre>
d1331 1
a1331 1
</pre>
d1366 1
a1366 1
<pre>
d1368 1
a1368 1
</pre>
d1379 1
a1379 1
<pre>
d1381 1
a1381 1
</pre>
d1423 1
a1423 1
<pre>
d1425 1
a1425 1
</pre>
d1436 1
a1436 1
<pre>
d1438 1
a1438 1
</pre>
d1448 1
a1448 1
<pre>
d1451 1
a1451 1
</pre>
d1457 1
a1457 1
<pre>
d1459 1
a1459 1
</pre>
d1466 1
a1466 1
<pre>
d1469 1
a1469 1
</pre>
d1476 1
a1476 1
<pre>
d1478 1
a1478 1
</pre>
d1485 1
a1485 1
<pre>
d1488 1
a1488 1
</pre>
d1498 1
a1498 1
<pre>
d1501 1
a1501 1
</pre>
d1508 1
a1508 1
<pre>
d1510 1
a1510 1
</pre>
d1524 1
a1524 1
<pre>
d1526 1
a1526 1
</pre>
d1533 2
a1534 2
<pre>
(eenvoudige mount-tabel)
d1537 1
a1537 1
(meer geavanceerde mount-tabel)
d1541 1
a1541 1
</pre>
d1565 1
a1565 4
<table border=0 width="650">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
d1568 1
a1568 4
</pre>
                </td>
        </tr>
</table>
d1579 1
a1579 4
<table border=0 width="650">
        <tr>
                <td nowrap bgcolor="#EEEEEE">
<pre>
d1582 1
a1582 4
</pre>
                </td>
        </tr>
</table>
d1610 1
a1610 1
<pre>
d1613 1
a1613 1
</pre>
d2405 2
a2406 2
Originally [OpenBSD: faq14.html,v 1.157 ]<br>
$Translation: faq14.html,v 1.40 2006/06/22 15:19:56 smestdag Exp $<br>
@


1.33
log
@3.9 release time.
@
text
@d466 1
a466 1
partition table resides.  -- not sure if this is true -->
d2410 2
a2411 2
Originally [OpenBSD: faq14.html,v 1.156 ]<br>
$Translation: faq14.html,v 1.39 2006/05/01 10:58:46 smestdag Exp $<br>
@


1.32
log
@sync with Steelix CVS
@
text
@d946 1
a946 1
Copyright (c) 1995-2005 OpenBSD.  All rights reserved.  http://www.OpenBSD.org
d948 1
a948 1
OpenBSD 3.8 (GENERIC) #138: Sat Sep 10 15:41:37 MDT 2005
d2410 2
a2411 2
Originally [OpenBSD: faq14.html,v 1.155 ]<br>
$Translation: faq14.html,v 1.38 2006/03/04 10:28:29 smestdag Exp $<br>
@


1.31
log
@sync with Steelix CVS
@
text
@d134 1
a134 1
<a href="faq4.html#SpaceNeeded">deze discussie</a> over partitioneren
d1110 1
a1110 1
Dit is nog een andere goede reden om <a href="faq4.html#SpaceNeeded">uw schijf
d1682 2
a1683 1
Dit systeem is ingebouwd in de GENERIC kernel en zit in de bsd.rd kernel,
d2410 2
a2411 2
Originally [OpenBSD: faq14.html,v 1.153 ]<br>
$Translation: faq14.html,v 1.37 2006/02/27 14:59:08 smestdag Exp $<br>
@


1.30
log
@sync with steelix translation CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2005 by OpenBSD.">
d62 2
d1666 1
a1666 1
<li><a href="faq11.html#raid">FAQ 11, RAID</a>
d2194 202
d2409 2
a2410 2
Originally [OpenBSD: faq14.html,v 1.150 ]<br>
$Translation: faq14.html,v 1.34 2005/12/29 12:16:25 smestdag Exp $<br>
@


1.29
log
@sync with Steelix CVS
@
text
@d321 9
a332 2


d336 1
a336 1
Bekijk zeker eerst de
d341 20
a360 12
Fdisk is een programma om te helpen bij het onderhoud van uw partities. Dit
programma wordt bij de installatie gebruikt om uw OpenBSD partitie (deze
partitie kan <u>verscheidene</u> labels bevatten, elk met
filesystems/swap/etc.) in te stellen. Het kan ruimte op uw schijven indelen en
er één partitie actief maken. Dit programma zal gewoonlijk
gebruikt worden in Single User Modus (boot -s). Fdisk stelt ook de MBR op
uw verschillende harde schijven in.

<p>
Voor installatiedoeleinden hebt u meestal slechts <b>EEN</b> OpenBSD
partitie nodig, en vervolgens gebruikt u disklabel om er een swap en een
bestandssysteem op te zetten.
d407 1
a415 5
<p>
Het is volkomen veilig om in fdisk te gaan en te verkennen, zorg er alleen
voor dat u <b>N</b> antwoordt op de vraag om de wijzigingen te bewaren en
gebruik *NIET* het <b>write</b> commando.

d424 3
d443 1
d459 31
a769 1

a780 8
Om Soft Updates te gebruiken, moet in uw kernel

<p>
<b>option FFS_SOFTUPDATES</b>
<p>
gecompileerd zijn, dit is reeds zo bij GENERIC.

<p>
d2205 2
a2206 2
Originally [OpenBSD: faq14.html,v 1.147 ]<br>
$Translation: faq14.html,v 1.32 2005/12/19 09:43:24 smestdag Exp $<br>
@


1.28
log
@sync with Steelix CVS
@
text
@d208 1
a208 1

d2169 1
a2169 1
$Translation: faq14.html,v 1.31 2005/12/18 17:31:47 smestdag Exp $<br>
@


1.27
log
@sync with steelix translation CVS
@
text
@d311 6
a316 5
bestandssysteem), zal OpenBSD een denkbeeldige "creëren", en die kan de
basis vormen voor een formele OpenBSD disklabel.
Als er echter een disklabel aangemaakt wordt en vervolgens een niet-OpenBSD
bestandssysteem wordt toegevoegd, dan zal de disklabel niet automatisch
geüpdatet worden.
d2168 2
a2169 2
Originally [OpenBSD: faq14.html,v 1.146 ]<br>
$Translation: faq14.html,v 1.30 2005/12/18 10:58:49 smestdag Exp $<br>
@


1.26
log
@sync with Steelix CVS
@
text
@a66 9
<h3>Inhoudsopgave</h3>

<ul>
<li><a href="#disklabel.1">Wat is disklabel(8)?</a>
<li><a href="#disklabel.2">disklabel(8) tijdens de OpenBSD installatie</a>
<li><a href="#disklabel.3">Veel voorkomende gebruiken van disklabel(8).</a>
</ul>

   
d76 28
a103 8
Disklabels worden aangemaakt om een efficiënte interface toe te laten
tussen uw schijf en de schijfdrivers vervat in de kernel. Labels bevatten
bepaalde informatie over uw schijf, zoals uw schijfgeometrie en informatie
over uw bestandssystemen. Dit wordt dan gebruikt door het bootstrap-programma
om de schijf te laden en om te weten waar de bestandssystemen op de schijf
staan. Labels worden ook gebruikt in combinatie met de bestandssystemen om
een meer efficiënte omgeving te maken. U kan meer gedetailleerde
informatie over disklabel vinden door de
d105 1
a105 1
man pagina te lezen.
d108 3
a110 4
Als bijkomende winst, helpt het gebruik van disklabel architectuurbeperkingen
i.v.m. schijfpartitionering overkomen. Op i386 bijvoorbeeld, kan u slechts
4 primaire partities hebben. (Partities die andere besturingssystemen zoals
Windows NT of DOS kunnen zien.) Met
d113 2
a114 2
partities (bv. 'swap', '/', '/usr' en '/var') in te bewaren.
En dan hebt u nog 3 partities over, beschikbaar voor andere besturingssystemen!
d121 19
a139 115
aanmaken van labels. Dit komt (voor i386 gebruikers) direct na het gebruik van
<a href="#fdisk">fdisk(1)</a>.
Tijdens de installatie gebruikt u disklabel om uw afzonderlijke labels aan te
maken, die uw afzonderlijke mount points zullen bevatten. Tijdens de
installatie kan u uw mount points instellen vanuit
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8),</a>
maar dit is niet volstrekt noodzakelijk aangezien u later gevraagd zal worden
om uw keuzes te bevestigen. Maar het laat uw installatie net iets vlotter
verlopen.

<p>
Aangezien dit tijdens de installatie is, zal u geen bestaande labels hebben,
en zullen ze moeten aangemaakt worden. Het eerste label dat u zal aanmaken is
het label 'a'. Dit label MOET zijn waar / gemount zal worden. U kan aanbevolen
partities zien die best aangemaakt zouden worden door
<a href="faq4.html#SpaceNeeded">FAQ 4, Benodigde Ruimte</a> te lezen. Voor
servers wordt het aanbevolen dat u ten minste deze labels afzonderlijk
aanmaakt. Voor desktop gebruikers zal het waarschijnlijk volstaan om
één mount point op / aan te maken. Wanneer u initieel uw root
partitie ('a' label) aanmaakt, hou dan in het achterhoofd dat u NOG WAT
ruimte over moet hebben voor uw swap label. Nu de beginselen zijn uitgelegd,
volgt hier een voorbeeld van het gebruik van disklabel tijdens een installatie.
In dit eerste voorbeeld wordt aangenomen dat OpenBSD het enige
besturingssysteem op deze computer zal zijn, en dat een volledige installatie
gedaan zal worden.

<pre>

If this disk is shared with other operating systems, those operating systems
should have a BIOS partition entry that spans the space they occupy completely.
For safety, also make sure all OpenBSD file systems are within the offset and
size specified in the 'A6' BIOS partition table.  (By default, the disklabel
editor will try to enforce this).  If you are unsure of how to use multiple
partitions properly (ie. separating /,  /usr, /tmp, /var, /usr/local, and other
things) just split the space into a root and swap partition for now.

# using MBR partition 3: type A6 off 63 (0x3f) size 4991553 (0x4c2a41) 

Treating sectors 63-16386300 as the OpenBSD portion of the disk.
You can use the 'b' command to change this.

Initial label editor (enter '?' for help at any prompt)
&gt; <b>d a</b>
&gt; <b>a a</b>
offset: [63] <b>&lt;Enter&gt;</b>
size: [16386237] <b>64M</b>
Rounding to nearest cylinder: 131040
FS type: [4.2BSD] <b>&lt;Enter&gt;</b>
mount point: [none] <b>/</b>
fragment size: [1024] <b>&lt;Enter&gt;</b>
block size: [8192] <b>&lt;Enter&gt;</b>
cpg: [16] <b>&lt;Enter&gt;</b>
&gt; <b>a b</b>
offset: [131103] <b>&lt;Enter&gt;</b>
size: [16255197] <b>64M</b>
Rounding to nearest cylinder: 131040
FS type: [swap] <b>&lt;Enter&gt;</b>
</pre>

<p>
Op dit punt hebben we een 64M root partitie aangemaakt, gemount op /, en een
64M swap partitie. Bemerk dat de offset begint op sector 63. Dit is wat u
wil. Wat de grootte betreft, zal disklabel uw grootte in sectoren weergeven,
u hoeft groottes echter niet in hetzelfde formaat in te geven.
Zoals in het bovenstaande voorbeeld kan u groottes ingeven op de volgende
manier: <i>64 Megabytes = 64M</i> en <i>2 Gigabytes = 2G</i>. Disklabel zal
dan afronden naar de meest nabije cilinder. In het voorbeeld hierboven zal u
ook opmerken dat disklabel veronderstelt dat label 'b' een swap zal zijn.
Dit is een juiste veronderstelling aangezien de GENERIC kernel ingesteld is
om naar swap te zoeken op label 'b', en u volgt best deze richtlijn door 'b'
als uw swapruimte te gebruiken.

<p>
Het volgende voorbeeld zal u meenemen doorheen het aanmaken van twee of meer
labels. Dit betekent dat het geen volledige installatie is, aangezien de
grootte van deze labels niet genoeg zal zijn om OpenBSD op zijn volledigst te
installeren. Door het aanmaken van al de partities nog eens te tonen, zouden
we in herhaling vallen.

<pre>
&gt; <b>a d</b>
offset: [262143] <b>&lt;Enter&gt;</b>
size: [16124157] <b>64M</b>
Rounding to nearest cylinder: 131040
FS type: [4.2BSD] <b>&lt;Enter&gt;</b>
mount point: [none] <b>/tmp</b>
fragment size: [1024] <b>&lt;Enter&gt;</b>
block size: [8192] <b>&lt;Enter&gt;</b>
cpg: [16] <b>&lt;Enter&gt;</b>
&gt; <b>a e</b>
offset: [393183] <b>&lt;Enter&gt;</b>
size: [15993117] <b>64M</b>
Rounding to nearest cylinder: 131040
FS type: [4.2BSD] <b>&lt;Enter&gt;</b>
mount point: [none] <b>/var</b>
fragment size: [1024] <b>&lt;Enter&gt;</b>
block size: [8192] <b>&lt;Enter&gt;</b>
cpg: [16] <b>&lt;Enter&gt;</b>
</pre>

<p>
In het bovenstaande voorbeeld zijn er twee dingen die u zou kunnen opmerken.
Eén ervan is dat de offset automatisch voor u berkend wordt zodat het
de volgende in volgorde is. Wanneer u deze soort van installatie doet, zal
u helemaal niet hoeven te knoeien met het veranderen van de offsets.
Een ander verschil dat u zou kunnen opmerken, zal zijn dat label 'c'
overgeslagen werd. Dit wordt gedaan om een reden, label 'c' is namelijk een
label dat de hele schijf voorstelt. Om deze reden gaat u beter op geen enkele
manier om met label 'c'.

<p>
Zodra al uw labels aangemaakt zijn, is al wat er nog te doen staat de
labels naar de schijf schrijven, en verder gaan met het installatieproces.
Om alles weg te schrijven en disklabel te verlaten (en verder te gaan met
de installatie), doet u:
a141 5
<pre>
&gt; <b>w</b>
&gt; <b>q</b>
</pre>

d145 1
a145 1
<h3>Veel voorkomende gebruiken van disklabel(8)</h3>
d148 4
a151 5
Zodra uw systeem geïnstalleerd is, zal u disklabel normaal niet zo vaak
nodig hebben. Maar soms zal u disklabel moeten gebruiken voor het toevoegen,
verwijderen of herstructureren van uw schijven. Eén van de eerste
dingen die u zal moeten doen is uw huidig disklabel bekijken. Om dit te doen
typt u gewoon:
d154 2
a155 3
# <b>disklabel wd0</b> &lt;----- Of welk schijf device u ook graag zou bekijken

# using MBR partition 3: type A6 off 64 (0x40) size 16777152 (0xffffc0)
d158 2
a159 2
disk:
label: TOSHIBA MK2720FC
d165 2
a166 2
cylinders: 2633
total sectors: 2654064
d171 2
a172 2
headswitch: 0           # milliseconds
track-to-track seek: 0  # milliseconds
d176 8
a183 5
#        size   offset    fstype   [fsize bsize   cpg]
  a:  2071440    65583    4.2BSD     1024  8192    16   # (Cyl.   65*- 2120)
  b:    65520       63      swap                        # (Cyl.    0*- 65)
  c:  2654064        0    unused        0     0         # (Cyl.    0 - 2632)
  j:   512001  2137023    4.2BSD     1024  8192    16   # (Cyl. 2120*- 2627*)
d187 24
a210 4
Het bovenstaande commando laat u eenvoudigweg toe om het bestaande disklabel
te bekijken, en het garandeert daarbij dat u niets om zeep helpt. (Wat we soms
allemaal nodig hebben.) Maar om veranderingen te kunnen maken moet u de -E
optie gebruiken bij disklabel, als volgt:
d214 59
a272 1
</pre>
d275 49
a323 10
Dit zal u naar een prompt brengen, dezelfde als degene die u gebruikte tijdens
de OpenBSD installatie. Waarschijnlijk is het belangrijkste commando op
deze prompt '?'. Dit zal u een lijst van mogelijke opties geven die te maken
hebben met disklabel. U kan zelfs de volledige
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
man pagina bekijken met het 'M' commando. Vanaf deze prompt zal u al het
toevoegen, verwijderen en veranderen van partities uitvoeren. Lees voor
bijkomende informatie de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=disklabel&amp;sektion=8">disklabel(8)</a>
man pagina.
d2167 2
a2168 2
Originally [OpenBSD: faq14.html,v 1.143 ]<br>
$Translation: faq14.html,v 1.29 2005/12/11 22:56:42 smestdag Exp $<br>
@


1.25
log
@sync with steelix translation CVS
@
text
@d1747 1
a1747 1
steven.mestdagh@@esat.kuleuven.be, and released under the BSD license -->
d1990 1
a1990 1
steven.mestdagh@@esat.kuleuven.be, and released under the BSD license -->
d2140 2
a2141 2
Originally [OpenBSD: faq14.html,v 1.142 ]<br>
$Translation: faq14.html,v 1.28 2005/12/05 22:25:54 smestdag Exp $<br>
@


1.24
log
@sync with Steelix CVS
@
text
@d1752 1
d2140 2
a2141 2
Originally [OpenBSD: faq14.html,v 1.141 ]<br>
$Translation: faq14.html,v 1.27 2005/11/26 23:24:43 smestdag Exp $<br>
@


1.23
log
@sync with Steelix CVS
@
text
@d1503 2
a1504 1
Merk op dat, aangezien deze image een CD image is, u als type <i>cd9660</i>
d2139 2
a2140 2
Originally [OpenBSD: faq14.html,v 1.140 ]<br>
$Translation: faq14.html,v 1.26 2005/11/24 06:01:04 smestdag Exp $<br>
@


1.22
log
@sync with steelix translation CVS
@
text
@d1121 1
a1121 1
<a href="faq8.html#Ports">ports</a> om meerdere servers naar één
d2138 2
a2139 2
Originally [OpenBSD: faq14.html,v 1.139 ]<br>
$Translation: faq14.html,v 1.25 2005/11/18 17:53:58 smestdag Exp $<br>
@


1.21
log
@sync with Steelix CVS
@
text
@d1811 1
a1811 1
reeds geinstalleerd is op de schijf, moet u ze nadien manueel toevoegen of
d1916 1
a1916 1
Als u ze wil gebruiken, moet u deze partities manueel toevoegen of wijzigen
d2139 1
a2139 1
$Translation: faq14.html,v 1.24 2005/11/10 08:59:46 smestdag Exp $<br>
@


1.20
log
@sync with steelix translation CVS
@
text
@d972 5
d2138 2
a2139 2
Originally [OpenBSD: faq14.html,v 1.138 ]<br>
$Translation: faq14.html,v 1.23 2005/11/04 15:50:37 smestdag Exp $<br>
@


1.19
log
@sync with steelix translation CVS
@
text
@d1909 1
a1909 1
zal niet automatisch geupdatet worden om de nieuwe vreemde
d2134 1
a2134 1
$Translation: faq14.html,v 1.22 2005/11/03 12:19:52 smestdag Exp $<br>
@


1.18
log
@sync with Steelix CVS
@
text
@d56 4
d1803 2
a1804 1
geinstalleerd die zowel de "native" als de vreemde bestandssystemen bevat.
d2133 2
a2134 2
Originally [OpenBSD: faq14.html,v 1.137 ]<br>
$Translation: faq14.html,v 1.21 2005/11/03 07:44:57 smestdag Exp $<br>
@


1.17
log
@sync with steelix translation CVS
@
text
@d877 1
a877 1
OpenBSD 3.8-current (GENERIC) #209: Tue Oct 25 17:42:53 MDT 2005
d1739 2
a1740 2
Ja. Andere ondersteunde bestandssystemen zijn: ext2 (Linux), ISO9660 (CD-ROM,
DVD media), FAT (MS-DOS en Windows), NFS, NTFS (Windows), AmigaDOS.
d1796 9
d1898 76
d2128 2
a2129 2
Originally [OpenBSD: faq14.html,v 1.135 ]<br>
$Translation: faq14.html,v 1.19 2005/11/01 13:57:55 smestdag Exp $<br>
@


1.16
log
@sync with Steelix CVS
@
text
@d28 1
d827 1
a827 1
     >> OpenBSD/i386 BOOT 2.06
d867 1
a867 1
>> OpenBSD/i386 BOOT 2.06
d875 1
a875 1
Copyright (c) 1995-2003 OpenBSD.  All rights reserved.  http://www.OpenBSD.org
d877 1
a877 1
OpenBSD 3.7 (GENERIC) #50: Sun Mar 20 00:01:57 MST 2005
a1604 2
Het wordt niet aangeraden dat men hiervoor 3.7-release gebruikt, er was een bug
die hersteld werd in 3.7-stable.
d1699 1
a1699 1
Sinds OpenBSD 3.6 wordt een kopie van het disklabel voor elke schijf bewaard
d2033 1
d2043 2
a2044 2
Originally [OpenBSD: faq14.html,v 1.134 ]<br>
$Translation: faq14.html,v 1.18 2005/10/19 03:30:39 smestdag Exp $<br>
@


1.15
log
@sync with Steelix CVS
@
text
@d1769 16
d2043 2
a2044 2
Originally [OpenBSD: faq14.html,v 1.133 ]<br>
$Translation: faq14.html,v 1.17 2005/09/26 15:20:13 jasper Exp $<br>
@


1.14
log
@sync with Steelix CVS
@
text
@d47 1
a47 1
<li><a href="#pciideErr"  >14.11 - Hulp! Ik krijg fouten met IDE DMA!</a>
d1518 1
a1518 1
<h2>14.11 - Hulp! Ik krijg fouten met IDE DMA!</h2>
d2028 1
a2028 1
$Translation: faq14.html,v 1.16 2005/08/13 20:24:29 smestdag Exp $<br>
@


1.13
log
@sync with Steelix CVS
@
text
@d56 1
a56 1
    met OpenBSD?
d2028 1
a2028 1
$Translation: faq14.html,v 1.15 2005/07/28 06:29:24 smestdag Exp $<br>
@


1.12
log
@sync with Steelix CVS
@
text
@d1109 2
a1110 1
Een meer geavanceerde backup utility, "Amanda" genoemd, is ook beschikbaar via
d1115 2
a1116 2
voldoende. Als u echter meerdere machines naar een tape moet backup'en, kan
het de moeite lonen om in de toekomst Amanda te bekijken.
d2027 2
a2028 2
Originally [OpenBSD: faq14.html,v 1.132 ]<br>
$Translation: faq14.html,v 1.14 2005/07/13 06:19:38 smestdag Exp $<br>
@


1.11
log
@sync with Steelix CVS
@
text
@a702 7
De mogelijkheid van een achtergrond-fsck(8), met gebruik van Soft Updates
is nog niet gerealiseerd in OpenBSD, dus
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fsck&amp;sektion=8">fsck(8)</a>
is nog steeds vereist na niet netjes af te sluiten.
Dit zou veranderd kunnen worden in toekomstige versies.

<p>
d2026 2
a2027 2
Originally [OpenBSD: faq14.html,v 1.131 ]<br>
$Translation: faq14.html,v 1.13 2005/07/01 14:52:31 smestdag Exp $<br>
@


1.10
log
@sync with Steelix CVS
@
text
@d32 1
a32 1
<h3>Inhoudstafel</h3>
d62 1
a62 1
<h3>Inhoudstafel</h3>
d2034 1
a2034 1
$Translation: faq14.html,v 1.12 2005/06/01 04:05:38 smestdag Exp $<br>
@


1.9
log
@sync with Steelix CVS
@
text
@d53 4
d1606 17
d1740 280
d2033 2
a2034 2
Originally [OpenBSD: faq14.html,v 1.127 ]<br>
$Translation: faq14.html,v 1.10 2005/05/30 09:29:04 smestdag Exp $<br>
@


1.8
log
@sync with steelix translation CVS
@
text
@d412 1
a412 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=fdisk&amp;&amp;sektion=8&amp;arch=i386">fdisk(8)</a>
d1732 2
a1733 2
Originally [OpenBSD: faq14.html,v 1.126 ]<br>
$Translation: faq14.html,v 1.9 2005/05/20 06:03:27 smestdag Exp $<br>
@


1.7
log
@sync with steelxi translation CVS
@
text
@d879 1
a879 1
OpenBSD 3.6 (GENERIC) #59: Fri Sep 17 12:32:57 MDT 2004
d1732 2
a1733 2
Originally [OpenBSD: faq14.html,v 1.125 ]<br>
$Translation: faq14.html,v 1.8 2005/05/18 05:56:34 smestdag Exp $<br>
@


1.6
log
@sync with Steelix CVS
@
text
@@


1.5
log
@huge sync from the translators
@
text
@d1732 2
a1733 2
Originally [OpenBSD: faq14.html,v 1.124 ]<br>
$Translation: faq14.html,v 1.7 2005/05/03 11:59:57 smestdag Exp $<br>
@


1.4
log
@sync with Steelix CVS
@
text
@d4 1
a4 1
<title>14 - Disk Setup</title>
d27 1
a27 1
<a href= "faq12.html">[Naar Sectie 12 - Platform-Specifieke Vragen]</a>
d51 2
d1267 1
a1267 1
gemount te zijn om ge-backupt te worden. Vergeet niet om root (/) r/w te
d1276 1
a1276 1
Nadat u voor het eerst uw bestandssystemen ge-backupt hebt, zou het een
d1497 1
a1497 1
ffs gebruiken bij het mounten van schijfimages.
d1600 1
a1600 1
door OpenBSD ge-mirrored worden met de "Autoconfiguration" optie van RAIDframe.
d1670 48
d1722 1
a1722 1
<a href= "faq12.html">[Naar Sectie 12 - Platform-Specifieke Vragen]</a>
d1732 2
a1733 2
Originally [OpenBSD: faq14.html,v 1.119 ]<br>
$Translation: faq14.html,v 1.4 2005/02/21 13:50:21 smestdag Exp $<br>
@


1.3
log
@Sync with Steelix CVS
@
text
@d1681 1
d1683 2
a1684 1
$Translation: faq14.html,v 1.3 2005/02/13 00:34:44 smestdag Exp $<br>
@


1.2
log
@Sync with Steelix CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2004 by OpenBSD.">
d1681 2
a1682 2
Originally [OpenBSD: faq14.html,v 1.118 ]<br>
$Translation: faq14.html,v 1.2 2005/01/21 19:54:59 smestdag Exp $<br>
@


1.1
log
@sync with Steelix CVS
@
text
@d74 1
a74 1
Disklabels worden aangemaakt om een effici&euml;nte interface toe te laten
d80 1
a80 1
een meer effici&euml;nte omgeving te maken. U kan meer gedetailleerde
d91 1
a91 1
gebruikt u &eacute;&eacute;n van deze 'primary' partities om *al* uw OpenBSD
d118 1
a118 1
&eacute;&eacute;n mount point op / aan te maken. Wanneer u initieel uw root
d202 1
a202 1
E&eacute;n ervan is dat de offset automatisch voor u berkend wordt zodat het
d228 1
a228 1
Zodra uw systeem ge&iuml;nstalleerd is, zal u disklabel normaal niet zo vaak
d230 1
a230 1
verwijderen of herstructureren van uw schijven. E&eacute;n van de eerste
d299 1
a299 1
er &eacute;&eacute;n partitie actief maken. Dit programma zal gewoonlijk
d383 1
a383 1
&eacute;&eacute;n entry kan bootable gemarkeerd worden. Als u van een
d409 1
a409 1
Zodra u uw schijf <b>JUIST</b> ge&iuml;nstalleerd krijgt, moet u
d458 1
a458 1
Of, als u gewoon &eacute;&eacute;n partitie op de schijf wil, stel dat u
d512 1
a512 1
/usr/local naar de /mnt directory te kopi&euml;ren. Bewerk het
d564 1
a564 1
&eacute;&eacute;n device, met name &quot;swap_device&quot;.
d718 1
a718 1
lijn die &eacute;&eacute;n partitie <i>sd0a</i> heeft die we graag zouden
d774 1
a774 1
indicator van de "nieuwe" OpenBSD MBR, ge&iuml;ntroduceerd in OpenBSD 3.5.
d793 1
a793 1
De PBR wordt ge&iuml;nstalleerd door
d839 1
a839 1
<li><b>com0, com1</b> - Twee seri&euml;le poorten
d910 1
a910 1
<li><b>Ongeldige <tt>/boot</tt> locatie ge&iuml;nstalleerd in PBR:</b>
d996 1
a996 1
en OpenBSD er op te laden als &eacute;&eacute;n grote partitie, en te denken
d1035 1
a1035 1
te partitioneren</a>, veeleer dan &eacute;&eacute;n grote partitie te
d1056 1
a1056 1
Oudere versies van MS-DOS kunnen enkel omgaan met schijfgeometrie&euml;n van
d1104 1
a1104 1
het geval &eacute;&eacute;n van uw vaste schijven het begeeft.
d1111 1
a1111 1
<a href="faq8.html#Ports">ports</a> om meerdere servers naar &eacute;&eacute;n
d1336 1
a1336 1
commando een primaire OpenBSD partitie op deze nieuw ge&iuml;nstalleerde
d1603 1
a1603 1
verschillende hardware RAID producten. De opties vari&euml;ren volgens
d1682 1
a1682 1
$Translation: faq14.html,v 1.1 2005/01/21 06:21:02 smestdag Exp $<br>
@

