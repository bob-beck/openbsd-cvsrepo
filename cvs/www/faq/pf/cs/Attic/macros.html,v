head	1.12;
access;
symbols;
locks; strict;
comment	@# @;


1.12
date	2014.04.01.17.14.10;	author nick;	state dead;
branches;
next	1.11;

1.11
date	2013.06.05.12.30.47;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2012.11.02.19.10.19;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2012.05.26.08.43.42;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2011.11.21.10.51.28;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2011.05.04.12.45.18;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.06.00.17.30;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.06.06.16.35.26;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2008.01.13.13.42.30;	author tobias;	state dead;
branches;
next	1.3;

1.3
date	2003.11.10.14.42.48;	author horacio;	state Exp;
branches;
next	1.2;

1.2
date	2003.11.10.13.22.18;	author horacio;	state Exp;
branches;
next	1.1;

1.1
date	2003.11.03.14.24.05;	author horacio;	state Exp;
branches;
next	;


desc
@@


1.12
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Seznamy a Makra</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, Nick Holland <nick@@openbsd.org>
Copyright (c) 2003, 2004, Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../cs/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="config.html">PÅ™edchozÃ­: ZaÄÃ­nÃ¡me</a>]
[<a href="index.html">Obsah</a>]
[<a href="tables.html">DalÅ¡Ã­: Tabulky</a>]

<h1><font color="#e00000">PF: Seznamy a Makra</font></h1>
<hr>

<h3>Obsah</h3>
<ul>
<li><a href="#lists">Seznamy</a>
<li><a href="#macros">Makra</a>
</ul>

<hr>

<a name="lists"></a>
<h2>Seznamy</h2>
Seznam umoÅ¾Åˆuje specifikaci nÄ›kolika podobnÃ½ch kritÃ©riÃ­ za pomoci jedinÃ©ho
pravidla. NapÅ™Ã­klad nÄ›kolik protokolÅ¯, ÄÃ­sel portÅ¯, adres, atp. TakÅ¾e mÃ­sto
psanÃ­ filtrovacÃ­ho pravidla pro kaÅ¾dou IP adresu, kterou je tÅ™eba blokovat
staÄÃ­ toto pravidlo napsat za pomocÃ­ specifikace IP adres v seznamu. Seznamy
jsou definovÃ¡ny pomocÃ­ specifikace poloÅ¾ek ve sloÅ¾enÃ½ch <tt>{ }</tt>
zÃ¡vorkÃ¡ch.

<p>
KdyÅ¾
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
>pfctl(8)</a> narazÃ­ na seznam bÄ›hem nahrÃ¡vÃ¡nÃ­ pravidel, tak vytvoÅ™Ã­
nÄ›kolikanÃ¡sobnÃ© pravidlo, jedno pro kaÅ¾dou poloÅ¾ku v seznamu. NapÅ™Ã­klad:
<blockquote>
<tt>
block out on fxp0 from { 192.168.0.1, 10.5.32.6 } to any
</tt>
</blockquote>

<p>
se rozÅ¡Ã­Å™Ã­ na:
<blockquote>
<tt>
block out on fxp0 from 192.168.0.1 to any<br>
block out on fxp0 from 10.5.32.6 to any
</tt>
</blockquote>

<p>
VÃ­cenÃ¡sobnÃ© seznamy mohou bÃ½t specifikovÃ¡ny uvnitÅ™ pravidla:
<blockquote>
<tt>
match in on fxp0 proto tcp to port { 22 80 } rdr-to 192.168.0.6<br>
block out on fxp0 proto { tcp udp } from { 192.168.0.1, \<br> 
&nbsp;&nbsp;&nbsp;10.5.32.6 } to any port { ssh telnet }
</tt>
</blockquote>

<p>
VÅ¡imnÄ›te si, Å¾e ÄÃ¡rky mezi poloÅ¾kama nejsou povinnÃ©.

<p>
Seznamy takÃ© mohou obsahovat vnoÅ™enÃ© seznamy:

<blockquote>
<tt>
trusted = "{ 192.168.1.2 192.168.5.36 }"<br>
pass in inet proto tcp from { 10.10.0.0/24 $trusted } to port 22
</tt>
</blockquote>

<p>

VyhnÄ›te se konstrukcÃ­m jako je ta nÃ¡sledujÃ­cÃ­, "negovanÃ© seznamy"
, kterÃ© jsou bÄ›Å¾nou chybou:
<blockquote>
<tt>
pass in on fxp0 from { 10.0.0.0/8, !10.1.2.3 }
</tt>
</blockquote>

<p>
ZamÃ½Å¡lenÃ½m vÃ½sledkem je obvykle tato aplikace
"jakÃ¡koliv adresa v rozsahu 10.0.0.0/8, mimo 10.1.2.3",
ale pravidlo se rozÅ¡Ã­Å™Ã­ na:
<blockquote>
<tt>
pass in on fxp0 from 10.0.0.0/8<br>
pass in on fxp0 from !10.1.2.3
</tt>
</blockquote>

<p>
kterÃ© je platnÃ© pro jakoukoliv adresu. Je tedy lÃ©pe pouÅ¾Ã­t
<a href="tables.html">tabulku</a> mÃ­sto vÃ½Å¡e uvedenÃ©ho.

<a name="macros"></a>
<h2>Makra</h2>
Makra jsou uÅ¾ivatelem definovanÃ© promÄ›nnÃ©, kterÃ© mohou obsahovat IP adresy,
ÄÃ­sla portÅ¯, jmÃ©na sÃ­Å¥ovÃ½ch rozhranÃ­, atp. Makra mohou snÃ­Å¾it komplexnost
PF pravidel a takÃ© umoÅ¾ÅˆujÃ­ mnohem lehÄÃ­ sprÃ¡vu pravidel.

<p>
JmÃ©na maker musÃ­ zaÄÃ­nat pÃ­smenem a mohou obsahovat pÃ­smena, ÄÃ­slice a
podtrÅ¾Ã­tko. JmÃ©na maker nemohou bÃ½t rezervovanÃ¡ slova jako <tt>pass</tt>, 
<tt>out</tt> nebo <tt>queue</tt>.
<blockquote>
<tt>
ext_if = "fxp0"<br>
<br>
block in on $ext_if from any to any<br>
</tt>
</blockquote>

<p>
Toto vytvoÅ™Ã­ makro pojmenovanÃ© <tt>ext_if</tt>. KdyÅ¾ se pak na makro
po jeho vytvoÅ™enÃ­ odkazuje, tak se pÅ™ed jeho jmÃ©no pÅ™idÃ¡ znak <tt>$</tt>.

<p>
Makra se takÃ© mohou rozÅ¡iÅ™ovat do seznamÅ¯, jako napÅ™.
<blockquote>
<tt>
friends = "{ 192.168.1.1, 10.0.2.5, 192.168.43.53 }"
</tt>
</blockquote>

<p>
Makra mohou bÃ½t definovanÃ¡ rekurzivnÄ›. ProtoÅ¾e makra nejsou v uvozovkÃ¡ch
expandovanÃ¡, tak musÃ­ bÃ½t pouÅ¾ita nÃ¡sledujÃ­cÃ­ syntaxe:
<blockquote>
<tt>
host1      = "192.168.1.1"<br>
host2      = "192.168.1.2"<br>
all_hosts  = "{" $host1 $host2 "}"<br>
</tt>
</blockquote>

<p>
Makro <tt>$all_hosts</tt> se nynÃ­ expanduje do 192.168.1.1, 192.168.1.2.

<p>
[<a href="config.html">PÅ™edchozÃ­: ZaÄÃ­nÃ¡me</a>]
[<a href="index.html">Obsah</a>]
[<a href="tables.html">DalÅ¡Ã­: Tabulky</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: macros.html,v 1.32 ]<br>
$Translation: macros.html,v 1.11 2013/06/05 09:28:16 bodie Exp $<br>
-->
$OpenBSD: macros.html,v 1.11 2013/06/05 12:30:47 ajacoutot Exp $
</small>

</body>
</html> 
@


1.11
log
@Sync with Steelix CVS
@
text
@d190 1
a190 1
$OpenBSD$
@


1.10
log
@Sync with Steelix CVS
@
text
@d65 1
a65 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.31 ]<br>
$Translation: macros.html,v 1.10 2012/11/02 13:42:09 bodie Exp $<br>
@


1.9
log
@Sync with Steelix CVS
@
text
@d65 1
a65 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.30 ]<br>
$Translation: macros.html,v 1.9 2012/05/24 08:06:37 bodie Exp $<br>
@


1.8
log
@Sync with Steelix CVS
@
text
@d65 1
a65 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.29 ]<br>
$Translation: macros.html,v 1.8 2011/11/19 19:25:08 bodie Exp $<br>
@


1.7
log
@Sync with Steelix CVS
@
text
@d65 1
a65 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.28 ]<br>
$Translation: macros.html,v 1.7 2011/05/04 12:31:17 bodie Exp $<br>
@


1.6
log
@Sync with Steelix CVS
@
text
@d65 1
a65 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.27 ]<br>
$Translation: macros.html,v 1.6 2010/11/04 15:26:12 bodie Exp $<br>
@


1.5
log
@Sync with Steelix CVS
@
text
@d65 1
a65 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7"
d187 2
a188 2
Originally [OpenBSD: macros.html,v 1.26 ]<br>
$Translation: macros.html,v 1.5 2010/06/05 11:13:22 bodie Exp $<br>
@


1.4
log
@Noone feels responsible for these files (or are not supposed to feel
responsible) anymore.

They are still in Steelix repository, but as long as they are not linked
in and out of date, remove them.

Discussed with saad@@ and wvdputte@@.
@
text
@d4 1
a4 1
<title>PF: Seznamy a makra</title>
d6 1
a6 1
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
a10 1
<meta name="copyright"     content="This document copyright 2002-2003 by OpenBSD.">
d13 18
d35 3
a37 1
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
d39 1
a39 1
[<a href="config.html">Pøedchozí: Konfigurace</a>]
d41 1
a41 1
[<a href="tables.html">Dále: Tabulky</a>]
d43 1
a43 1
<h1><font color="#e00000">PF: Seznamy a makra</font></h1>
d56 6
a61 6
Seznamy umo¾òují specifikovat vícenásobná podobná kriteria v jednom
pravidle. Napøíklad vícenásobné protokoly, èísla portù, adresy apod.
Tak¾e místo psaní zvlá¹tního pravidla pro ka¾dou IP adresu, která má bıt
blokována, mù¾e bıt napsáno jedno pravidlo specifikující IP adresy v
seznamu. Seznamy se definují vyjmenování polo¾ek mezi slo¾enımi závorkami
<tt>{ }</tt>.
d64 4
a67 4
Kdy¾
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
>pfctl(8)</a> narazí pøi zpracovávání sady pravidel na seznam, vytvoøí
více pravidel, jedno pro ka¾dou polo¾ku seznamu. Napøíklad:
d75 1
a75 1
je expandováno na:
d84 1
a84 2
Je mo¾né specifikovat více seznamù v jednom pravidle a jejich pou¾ití
není omezeno pouze na pravidla filtru:
d87 1
a87 2
rdr on fxp0 proto tcp from any to any port { 22 80 } -&gt; \<br>
&nbsp;&nbsp;&nbsp;192.168.0.6<br>
d94 36
a129 1
V¹imnìte si, ¾e èárky mezi polo¾kami seznamu jsou nepovinné.
d133 3
a135 3
makra jsou u¾ivatelsky definované promìnné, které mohou obsahovat IP
adresy, èísla portù, názvy rozhraná apod. Makra mohou sní¾it slo¾itost
sady pravidel a také velmi usnadnit jejich správu.
d138 3
a140 3
Makro musí zaèínat písmenem a mù¾e obsahovat písmena, èísla a
podtr¾ítka. Název makra nemù¾e bıt rezervované slovo jako <tt>pass</tt>,
<tt>out</tt>, nebo <tt>queue</tt>.
d150 2
a151 2
Tím je vytvoøeno makro pojmenované <tt>ext_if</tt>. Pøi odkazování se na
makro po jeho vytvoøení pøidáváme pøed jeho jméno znak <tt>$</tt>.
d154 1
a154 1
Makro mù¾e bıt také expandováno na seznam, jako tøeba:
d162 2
a163 2
Makra mohou bıt definována rekurzivnì. Proto¾e makra nejsou expandována
uvnitø uvozovek, musí bıt pou¾ita následující syntaxe:
d173 1
a173 1
Makro <tt>$all_hosts</tt> bude nyní expandováno na 192.168.1.1, 192.168.1.2.
d176 1
a176 1
[<a href="config.html">Pøedchozí: Konfigurace</a>]
d178 1
a178 1
[<a href="tables.html">Dále: Tabulky</a>]
d184 1
d186 5
a190 6
<br>
Originally [OpenBSD: macros.html,v 1.6 ]
<br>
$Translation: macros.html,v 1.3 2003/11/10 13:34:59 horacio Exp $
<br>
$OpenBSD: macros.html,v 1.3 2003/11/10 14:42:48 horacio Exp $
@


1.3
log
@Sync with Steelix CVS
@
text
@d138 1
a138 1
$OpenBSD: macros.html,v 1.6 2003/09/22 02:29:03 nick Exp $
@


1.2
log
@Sync with Steelix CVS
@
text
@d134 1
a134 1
Originally: [OpenBSD: macros.html,v 1.6 ]
d136 1
a136 1
$Translation: macros.html,v 1.2 2003/11/10 13:01:17 horacio Exp $
@


1.1
log
@Sync with Steelix CVS
@
text
@d134 1
a134 1
Originally: [OpenBSD: macros.html,v 1.6]
d136 1
a136 1
$Translation: macros.html,v 1.1 2003/11/02 21:53:47 certik Exp $
@

