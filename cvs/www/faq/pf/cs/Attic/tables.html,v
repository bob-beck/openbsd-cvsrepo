head	1.13;
access;
symbols;
locks; strict;
comment	@# @;


1.13
date	2014.04.01.17.14.10;	author nick;	state dead;
branches;
next	1.12;

1.12
date	2013.06.05.12.30.47;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2012.11.04.08.15.48;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2012.05.26.08.43.42;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2011.11.21.10.51.28;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2011.05.04.12.45.18;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.06.00.17.30;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.06.19.07.38.08;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.06.06.16.35.26;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2008.01.13.13.42.30;	author tobias;	state dead;
branches;
next	1.3;

1.3
date	2003.11.10.14.42.48;	author horacio;	state Exp;
branches;
next	1.2;

1.2
date	2003.11.10.13.22.18;	author horacio;	state Exp;
branches;
next	1.1;

1.1
date	2003.11.03.14.24.05;	author horacio;	state Exp;
branches;
next	;


desc
@@


1.13
log
@
Abandon translations, per deraadt@@ and ajacoutot@@.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Tabulky</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003, 2004 Joel Knight <enabled@@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../cs/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="macros.html">PÅ™edchozÃ­: Seznamy a Makra</a>]
[<a href="index.html">Obsah</a>]
[<a href="filter.html">DalÅ¡Ã­: FiltrovÃ¡nÃ­ paketÅ¯</a>]

<p>
<h1><font color="#e00000">PF: Tabulky</font></h1>

<hr>

<h3>Obsah</h3>
<ul>
<li><a href="#intro">Ãšvod</a>
<li><a href="#config">Konfigurace</a>
<li><a href="#manip">Manipulace pomocÃ­ <tt>pfctl</tt></a>
<li><a href="#addr">DefinovÃ¡nÃ­ adres</a>
<li><a href="#match">VyhledÃ¡nÃ­ adres</a>
</ul>

<hr>

<a name="intro"></a>
<h2>Ãšvod</h2>
Tabulka se pouÅ¾Ã­vÃ¡ k uloÅ¾enÃ­ skupiny IPv4 a/nebo IPv6 adres. VyhledÃ¡vÃ¡nÃ­
v tabulce jsou velmi rychlÃ¡ a spotÅ™ebujÃ­ mÃ©nÄ› pamÄ›ti a procesorovÃ©ho Äasu
neÅ¾ <a href="macros.html#lists">seznamy</a>. Z tÄ›chto dÅ¯vodÅ¯ je tabulka
ideÃ¡lnÃ­ pro udrÅ¾ovÃ¡nÃ­ velkÃ© skupiny adres, protoÅ¾e vyhledÃ¡vacÃ­ Äas v tabulce
s 50.000 adresami je jen nepatrnÄ› vÄ›tÅ¡Ã­ oproti tabulce s 50 adresami. Tabulky
mohou bÃ½t pouÅ¾ity nasledujÃ­cÃ­mi zpÅ¯soby:
<ul>
<li>zdrojovÃ© a/nebo cÃ­lovÃ© adresy v pravidlech.
<li>pÅ™eklÃ¡dacÃ­ a pÅ™esmÄ›rovÃ¡vacÃ­ adresy <tt>nat-to</tt> a <tt>rdr-to</tt>
pravidel.
<li>cÃ­lovÃ© adresy v <tt>route-to</tt>, <tt>reply-to</tt> a
<tt>dup-to</tt> pravidlech.
</ul>

<p>
Tabulky se vytvÃ¡Å™ejÃ­ buÄ v 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.3"
><tt>pf.conf</tt></a> nebo pouÅ¾itÃ­m
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
>pfctl(8)</a>.

<a name="config"></a>
<h2>Konfigurace</h2>
V <tt>pf.conf</tt> se tabulky vytvÃ¡Å™ejÃ­ pomocÃ­ <tt>table</tt>
direktivy. NasledujÃ­cÃ­ atributy mohou bÃ½t specifikovÃ¡ny pro kaÅ¾dou tabulku:
<ul>
<li><tt>const</tt> - obsah tabulky nemÅ¯Å¾e bÃ½t zmÄ›nÄ›n jakmile je vytvoÅ™ena.
KdyÅ¾ tento atribut nenÃ­ specifikovÃ¡n, tak 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
>pfctl(8)</a> mÅ¯Å¾e bÃ½t pouÅ¾it pro pÅ™Ã­dÃ¡nÃ­ nebo odebrÃ¡nÃ­ adres z tabulky
kdykoliv. Dokonce i kdyÅ¾ je
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7"
>securelevel(7)</a> nastaveno na 2 nebo vÃ­ce.
<li><tt>persist</tt> - pÅ™inutÃ­ jÃ¡dro udrÅ¾ovat tabulku v pamÄ›ti i kdyÅ¾
se na ni neodkazujÃ­ Å¾Ã¡dnÃ¡ pravidla. Bez tohoto atributu jÃ¡dro tabulku
automaticky odstranÃ­ jakmile se odstranÃ­ poslednÃ­ pravidlo, kterÃ© se
na tabulku odkazovalo.
</ul>

<p>
NapÅ™Ã­klad:
<blockquote>
<tt>
table &lt;goodguys&gt; { 192.0.2.0/24 }<br>
table &lt;rfc1918&gt; const { 192.168.0.0/16, 172.16.0.0/12, \<br>
&nbsp;&nbsp;&nbsp;10.0.0.0/8 }<br>
table &lt;spammers&gt; persist<br>
<br>
block in on fxp0 from { &lt;rfc1918&gt;, &lt;spammers&gt; } to any<br>
pass&nbsp; in on fxp0 from &lt;goodguys&gt; to any<br>
</tt>
</blockquote>

<p>
Addresses can also be specified using the negation (or "not") modifier 
such as:
<blockquote>
<tt>
table &lt;goodguys&gt; { 192.0.2.0/24, !192.0.2.5 }
</tt>
</blockquote>

<p>
Tabulka <tt>goodguys</tt> bude nynÃ­ platnÃ¡ pro vÅ¡echny adresy v
192.0.2.0/24 sitÃ­ kromÄ› 192.0.2.5.

<p>
VÅ¡imnÄ›te si, Å¾e jmÃ©na tabulek jsou vÅ¾dy uzavÅ™ena do &lt; &gt; 
Å¡piÄatÃ½ch zÃ¡vorek.
<p>
Tabulky mohou bÃ½t takÃ© vytvoÅ™eny z textovÃ½ch souborÅ¯ obsahujÃ­cÃ­ch
IP adresy a sÃ­tÄ›:
<blockquote>
<tt>
table &lt;spammers&gt; persist file "/etc/spammers"<br>
<br>
block in on fxp0 from &lt;spammers&gt; to any<br>
</tt>
</blockquote>

<p>
Soubor <tt>/etc/spammers</tt> mÅ¯Å¾e obsahovat seznam IP adres
a/nebo <a href="http://public.swbell.net/dedicated/cidr.html">CIDR</a> 
bloky sÃ­tÃ­, jeden na kaÅ¾dÃ½ Å™Ã¡dek. 
JakÃ½koliv Å™Ã¡dek zaÄÃ­najÃ­cÃ­ s <tt>#</tt> je povaÅ¾ovÃ¡n za komentÃ¡Å™ a 
ignorovÃ¡n. 

<a name="manip"></a>
<h2>Manipulace pomocÃ­ <tt>pfctl</tt></h2>
Tabulky je moÅ¾no spravovat za chodu pomocÃ­
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
>pfctl(8)</a>. NapÅ™Ã­klad pro pÅ™idÃ¡nÃ­ zÃ¡znamÅ¯ do 
&lt;spammers&gt; tabulky vytvoÅ™enÃ© v pÅ™edchozÃ­m kroku:
<blockquote>
<tt># pfctl -t spammers -T add 218.70.0.0/16</tt>
</blockquote>

<p>
TakÃ© to vytvoÅ™Ã­ &lt;spammers&gt; tabulku pokud jeÅ¡tÄ› neexistovala.
Pro vypsÃ¡nÃ­ adres v tabulce:
<blockquote>
<tt># pfctl -t spammers -T show</tt>
</blockquote>
PÅ™epÃ­naÄ <tt>-v</tt> mÅ¯Å¾e bÃ½t pouÅ¾it s <tt>-T show</tt> pro zobrazenÃ­
statistik pro kaÅ¾dÃ½ zÃ¡znam v tabulce. Pro odstranÄ›nÃ­ adres z tabulky:
<blockquote>
<tt>
# pfctl -t spammers -T delete 218.70.0.0/16
</tt>
</blockquote>

<p>
Pro vÃ­ce informacÃ­ o manipulaci tabulek s <tt>pfctl</tt> si prosÃ­m
pÅ™eÄtÄ›te
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.3"
>pfctl(8)</a> man strÃ¡nku.

<a name="addr"></a>
<h2>SpecifikovÃ¡nÃ­ adres</h2>
Mimo specifikovÃ¡nÃ­ pomocÃ­ IP adres mohou bÃ½t systÃ©my specifikovÃ¡ny
take pomocÃ­ jejich jmÃ©na. KdyÅ¾ je jmÃ©no pÅ™eloÅ¾eno na IP adresu, tak vÅ¡echny
vÃ½slednÃ© IPv4 a IPv6 adresy jsou uloÅ¾eny do tabulky. IP adresy mohou takÃ©
bÃ½t do tabulky zadÃ¡ny specifikovÃ¡nÃ­m platnÃ©ho jmÃ©na sÃ­Å¥ovÃ©ho rozhranÃ­, 
skupiny sÃ­Å¥ovÃ©ho rozhranÃ­ nebo klÃ­ÄovÃ©ho slova <tt>self</tt>. Tabulka potÃ©
bude obsahovat vÅ¡echny IP adresy pÅ™iÅ™azenÃ© pro dannÃ© rozhranÃ­ nebo skupinu
nebo systÃ©m (vÄetnÄ› lokÃ¡lnÃ­ho rozhranÃ­).<br>
<br>
JedinÃ½ limit pÅ™i specifikovÃ¡nÃ­ adres je, Å¾e <tt>0.0.0.0/0</tt> a
<tt>0/0</tt> nebudou v tabulkÃ¡ch fungovat.
Alternativou je zadat adresu na "tvrdo" nebo pouÅ¾Ã­t
<a href="macros.html#macros">makro</a>.

<a name="match"></a>
<h2>VyhledÃ¡nÃ­ adres</h2>
VyhledÃ¡nÃ­ adresy v tabulce vrÃ¡tÃ­ nejbliÅ¾Å¡Ã­ odpovÃ­dajÃ­cÃ­ zÃ¡znam. To umoÅ¾Åˆuje
vytvÃ¡Å™enÃ­ tabulek jako napÅ™.:
<blockquote>
<tt>
table &lt;goodguys&gt; { 172.16.0.0/16, !172.16.1.0/24, 172.16.1.100 }<br>
<br>
block in on dc0<br>
pass &nbsp;in on dc0 from &lt;goodguys&gt;<br>
</tt>
</blockquote>

<p>
JakÃ½koliv paket pÅ™ichÃ¡zejÃ­cÃ­ pÅ™es <tt>dc0</tt> bude mÃ­t jeho zdrojovou adresu
vyhledÃ¡nu v tabulce <tt>&lt;goodguys&gt;</tt>:
<ul>
<li>172.16.50.5 - nejbliÅ¾Å¡Ã­ zÃ¡znam je 172.16.0.0/16; paket odpovÃ­dÃ¡ tabulce
a bude propuÅ¡tÄ›n dÃ¡le
<li>172.16.1.25 - nejbliÅ¾Å¡Ã­ zÃ¡znam je !172.16.1.0/24; paket odpovÃ­dÃ¡ zÃ¡znamu
v tabulce, ale zÃ¡znam je negovanÃ½ (pouÅ¾Ã­vÃ¡ "!" modifikÃ¡tor); paket neodpovÃ­dÃ¡
tabulce a bude blokovÃ¡n
<li>172.16.1.100 - pÅ™esnÄ› odpovÃ­dÃ¡ 172.16.1.100; paket odpovÃ­dÃ¡ tabulce
a bude propuÅ¡tÄ›n dÃ¡le
<li>10.1.4.55 - neodpovÃ­dÃ¡ tabulce a bude blokovÃ¡n
</ul>

<p>
[<a href="macros.html">PÅ™edchozÃ­: Seznamy a Makra</a>]
[<a href="index.html">Obsah</a>]
[<a href="filter.html">DalÅ¡Ã­: FiltrovÃ¡nÃ­ paketÅ¯</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: tables.html,v 1.34 ]<br>
$Translation: tables.html,v 1.12 2013/06/05 09:28:16 bodie Exp $<br>
-->
$OpenBSD: tables.html,v 1.12 2013/06/05 12:30:47 ajacoutot Exp $
</small>

</body>
</html> 
@


1.12
log
@Sync with Steelix CVS
@
text
@d234 1
a234 1
$OpenBSD$
@


1.11
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.2"
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d88 1
a88 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d142 1
a142 1
a/nebo <a href="http://public.pacbell.net/dedicated/cidr.html">CIDR</a> 
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d174 1
a174 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.2"
d231 2
a232 2
Originally [OpenBSD: tables.html,v 1.32 ]<br>
$Translation: tables.html,v 1.11 2012/11/03 08:56:05 bodie Exp $<br>
@


1.10
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.1"
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d88 1
a88 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d174 1
a174 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.1"
d231 2
a232 2
Originally [OpenBSD: tables.html,v 1.31 ]<br>
$Translation: tables.html,v 1.10 2012/05/24 08:06:37 bodie Exp $<br>
@


1.9
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+5.0"
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d88 1
a88 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d174 1
a174 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+5.0"
d231 2
a232 2
Originally [OpenBSD: tables.html,v 1.30 ]<br>
$Translation: tables.html,v 1.9 2011/11/19 19:25:08 bodie Exp $<br>
@


1.8
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.9"
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d88 1
a88 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d174 1
a174 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.9"
d231 2
a232 2
Originally [OpenBSD: tables.html,v 1.29 ]<br>
$Translation: tables.html,v 1.8 2011/05/04 12:31:17 bodie Exp $<br>
@


1.7
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.8"
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8"
d88 1
a88 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8"
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8"
d174 1
a174 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.8"
d231 2
a232 2
Originally [OpenBSD: tables.html,v 1.28 ]<br>
$Translation: tables.html,v 1.7 2010/11/04 15:26:12 bodie Exp $<br>
@


1.6
log
@Sync with Steelix CVS
@
text
@d76 1
a76 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.7"
d78 1
a78 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7"
d88 1
a88 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7"
d150 1
a150 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7"
d174 1
a174 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+4.7"
d231 2
a232 2
Originally [OpenBSD: tables.html,v 1.27 ]<br>
$Translation: tables.html,v 1.6 2010/06/13 15:58:10 bodie Exp $<br>
@


1.5
log
@Sync with Steelix CVS
@
text
@d40 1
a40 1
[<a href="../filter.html">DalÅ¡Ã­: FiltrovÃ¡nÃ­ paketÅ¯</a>]
d222 1
a222 1
[<a href="../filter.html">DalÅ¡Ã­: FiltrovÃ¡nÃ­ paketÅ¯</a>]
d232 1
a232 1
$Translation: tables.html,v 1.5 2010/06/05 11:13:22 bodie Exp $<br>
@


1.4
log
@Noone feels responsible for these files (or are not supposed to feel
responsible) anymore.

They are still in Steelix repository, but as long as they are not linked
in and out of date, remove them.

Discussed with saad@@ and wvdputte@@.
@
text
@d6 1
a6 1
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
a10 1
<meta name="copyright"     content="This document copyright 2003 by OpenBSD.">
d13 17
d34 3
a36 1
<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
d38 1
a38 1
[<a href="macros.html">Pøedchozí: Seznamy a makra</a>]
d40 1
a40 1
[<a href="options.html">Dále: Options</a>]
d49 1
a49 1
<li><a href="#intro">Úvod</a>
d51 3
a53 3
<li><a href="#manip">Manipulace pomocí <tt>pfctl</tt></a>
<li><a href="#addr">Specifikování adres</a>
<li><a href="#match">Address Matching</a>
d59 21
a79 19
<h2>Introduction</h2>
Tabulky jsou pou¾ívány k ulo¾ení skupiny IPv4 a/nebo IPv6 adres.
Vyhledávání v tabulkách je velmi rychlé a potøebuje ménì pamìti a
procesorového èasu ne¾ <a href="macros.html#lists">seznamy</a>.
Z tohoto dùvodu je tabulka ideální pro ulo¾ení velké skupiny adres,
proto¾e vyhledání v tabulce obsahující 50.000 adres je jen o málo
pomalej¹í ne¾ v tabulce s 50 adresami. Tabulky mohou bıt pou¾ity namísto
zdrojovıch a cílovıch adres v pravidlech
<a href="filter.html">filter</a>, 
<a href="scrub.html"><tt>scrub</tt></a>,
<a href="nat.html"><tt>nat</tt></a>, 
a <a href="rdr.html">redirection</a>,
ale nemohou bıt pou¾ity jako cílové adresy v pravidlech <tt>nat</tt>
nebo v routovacích volbách (<tt>route-to</tt>, <tt>reply-to</tt>,
<tt>dup-to</tt>) filtrovacích pravidel. Tabulky se vytváøejí v souboru
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.3"
><tt>/etc/pf.conf</tt></a> nebo pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
><tt>pfctl(8)</tt></a>.
d83 2
a84 3
V souboru <tt>pf.conf</tt> se tabulky vytváøejí direktivou
<tt>table</tt>. Pro ka¾dou tabulku mohou bıt specifikovány následující
vlastnosti:
d86 11
a96 10
<li><tt>const</tt> - obsah této tabulky nemù¾e bıt zmìnìn poté, co je
vytvoøena. Pokud tento atribut není specifikován,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
><tt>pfctl(8)</tt></a> mù¾e bıt kdykoliv pou¾it k pøidání nebo odebrání
adresy z tabulky, i pøi bìhu v úrovni
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7&amp;manpath=OpenBSD+3.3"
>securelevel(7)</a> dva nebo vy¹¹í.
<li><tt>persist</tt> - zpùsobí, ¾e jádro ponechá tabulku v pamìti i kdy¾
ji nepou¾ívá ¾ádné pravidlo. Bez této volby jádro automaticky odstraní
tabulku pøi odstraòovaní posledního pravidla na ní odkazujícího.
d100 1
a100 1
Pøíklad:
d114 2
a115 2
Adresy mohou bıt také specifikovány pomocí negaèního modifikátoru (nebo
"not"), napø.:
d123 2
a124 2
Tabulka <tt>goodguys</tt> nyní odpovídá v¹em adresám v síti 192.0.2.0/24
s vıjimkou 192.0.2.5.
d127 2
a128 2
V¹imnìte si, ¾e názvy tabulek jsou v¾dy uzavøeny mezi &lt; &gt;.

d130 2
a131 2
Tabulky také mohou bıt naèteny z textového souboru obsahujícího seznam
IP adres a sítí:
d141 5
a145 3
Soubor <tt>/etc/spammers</tt> y obsahoval seznam IP adres, na ka¾dém
øádku jednu. Ka¾dá øádka zaèínající <tt>#</tt> je pova¾ována za komentáø
a je ignorována.
d148 5
a152 5
<h2>Manipulace pomocí <tt>pfctl</tt></h2>
Tabulky mohou bıt mìnìny za bìhu pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
><tt>pfctl(8)</tt></a>.
Napøíklad pøidání polo¾ky do tabulky &lt;spammers&gt; vytvoøené vı¹e:
d154 1
a154 1
<tt># pfctl -t spammers -Tadd 218.70.0.0/16</tt>
d158 2
a159 2
Tím bude také vytvoøena tabulka &lt;spammers&gt;, pokud je¹tì
neexistovala. Pro vypsání adres v tabulce:
d161 1
a161 1
<tt># pfctl -t spammers -Tshow</tt>
d163 2
a164 3
Volba <tt>-v</tt> mù¾e bıt také pou¾ita spolu s <tt>-Tshow</tt> k
vypsání statistik pro ka¾dou polo¾ku tabulky. Odstranìní adresy z
tabulky:
d167 1
a167 1
# pfctl -t spammers -Tdelete 218.70.0.0/16
d172 4
a175 4
Dal¹í informace o manipulování s tabulkami pomocí <tt>pfctl</tt>
naleznete v
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
><tt>pfctl(8)</tt></a>.
d178 13
a190 7
<h2>Specifikování adres</h2>
Kromì specifikování IP adresou mù¾e bıt poèítaè také urèen svım
hostname. kdy¾ je jméno pøevedeno na IP adresu, v¹echny vısledné IPv4 a
IPv6 adresy jsou pøidány do tabulky. IP adresy mohou bıt také zadány
urèením platného názvu rozhraní nebo klíèovım slovem <tt>self</tt>,
které zpùsobí pøidání v¹ech adres asociovanıch s rozhraním(i) do
tabulky.
d193 3
a195 3
<h2>Address Matching</h2>
Vyhledání adresy v tabulce vrátí nejpøesnìji odpovídající polo¾ku. To
umo¾òuje vutvoøení tabulky jako tøeba:
d200 2
a201 2
block in on dc0 all<br>
pass &nbsp;in on dc0 from &lt;goodguys&gt; to any<br>
d206 2
a207 2
Zdrojová adresa ka¾dého paketu procházejícího rozhraním dc0 bude
porovnána s tabulkou <tt>&lt;goodguys&gt;</tt>:
d209 8
a216 8
<li>172.16.50.5 - nejpøesnìjsí shoda je 172.16.0.0/16; paket odpovídí
tabulce a bude pu¹tìn
<li>172.16.1.25 - nejpøesnìj¹í shoda je !172.16.1.0/24; paket odpovídá
polo¾ce tabulku, ale tato polo¾ko je negovaná (pou¾ívá modifikátor "!");
paket neodpovídá tabulce a bude zablokován
<li>172.16.1.100 - pøesnì odpovídá 172.16.1.100; paket odpovídá tabulce
a bude pu¹tìn
<li>10.1.4.55 - neodpovídá tabulce a bude zablokován
d220 1
a220 1
[<a href="macros.html">Pøedchozí: Seznamy a makra</a>]
d222 1
a222 1
[<a href="options.html">Dále: Options</a>]
d228 1
d230 5
a234 6
<br>
Originally [OpenBSD: tables.html,v 1.6 ]
<br>
$Translation: tables.html,v 1.3 2003/11/10 13:34:59 horacio Exp $
<br>
$OpenBSD: tables.html,v 1.3 2003/11/10 14:42:48 horacio Exp $
@


1.3
log
@Sync with Steelix CVS
@
text
@d207 1
a207 1
$OpenBSD: tables.html,v 1.6 2003/09/22 02:29:03 nick Exp $
@


1.2
log
@Sync with Steelix CVS
@
text
@d203 1
a203 1
Originally: [OpenBSD: tables.html,v 1.6 ]
d205 1
a205 1
$Translation: tables.html,v 1.2 2003/11/10 13:01:17 horacio Exp $
@


1.1
log
@Sync with Steelix CVS
@
text
@d203 1
a203 1
Originally: [OpenBSD: tables.html,v 1.6]
d205 1
a205 1
$Translation: tables.html,v 1.1 2003/11/02 21:53:47 certik Exp $
@

