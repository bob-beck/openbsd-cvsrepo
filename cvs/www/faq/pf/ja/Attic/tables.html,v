head	1.12;
access;
symbols;
locks; strict;
comment	@# @;


1.12
date	2005.08.13.08.24.51;	author saad;	state dead;
branches;
next	1.11;

1.11
date	2004.05.09.09.58.22;	author saad;	state Exp;
branches;
next	1.10;

1.10
date	2004.01.04.22.47.55;	author horacio;	state Exp;
branches;
next	1.9;

1.9
date	2003.12.03.21.55.18;	author horacio;	state Exp;
branches;
next	1.8;

1.8
date	2003.11.10.21.40.53;	author horacio;	state Exp;
branches;
next	1.7;

1.7
date	2003.11.03.16.54.43;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2003.09.26.13.21.47;	author horacio;	state Exp;
branches;
next	1.5;

1.5
date	2003.09.19.16.44.18;	author horacio;	state Exp;
branches;
next	1.4;

1.4
date	2003.06.13.12.05.29;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2003.06.12.17.22.21;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2003.06.05.13.33.00;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2003.05.30.10.20.57;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.12
log
@remove unmaintained [ja] translation files.  requested by translator.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF: Tables</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-2022-JP">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
<meta name="copyright"     content="This document copyright 2003-2004 by OpenBSD.">
</head>

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<img alt="[OpenBSD]" height=30 width=141 src="../../../images/smalltitle.gif">
<p>
[<a href="macros.html">前に戻る: リストとマクロ</a>]
[<a href="index.html">目次</a>]
[<a href="filter.html">次に進む: パケットフィルタリング</a>]

<p>
<h1><font color="#e00000">PF: テーブル</font></h1>

<hr>

<h3>目次</h3>
<ul>
<li><a href="#intro">はじめに</a>
<li><a href="#config">誓瀋鹿畩
殊蘊釈鱚羹■轣鉗陟昭情聶鹿を使用した操作</a>
<li><a href="#addr">アドレスの指定</a>
<li><a href="#match">アドレスマッチング</a>
</ul>

<hr>

<a name="intro"></a>
<h2>はじめに</h2>
テーブルは、IPv4 および/または IPv6 アドレスのグループを保持するために使用されるものです。
テーブルに対する参照は、<a href="macros.html#lists">リスト</a>に比べて、
より少ないメモリと CPU 時間で、非常に高速に実行できます。このため、
テーブルは大規模なアドレスのグループを保持するのに理想的であり、
50,000 個のアドレスを保持するテーブルの参照時間は 50 個のアドレスを保持するものより
わずかに余計にかかるだ世韻任后董璽屮襪蓮焚爾里茲Δ癖，濃藩僂垢襪海箸任泙后
受貍
殊蘊釈鱚羹∽蛹鬯蔗迪⊂フィルタ</a>、<a href="scrub.html">スクラブ (scrub)</a>、
<a href="nat.html">ネットワークアドレス変換 (NAT)</a> および
<a href="rdr.html">リダ瀬ぅ譽轡腑鹿畩ぢルール中の
送信元および/または送信誓茱▲疋譽
殊蘊釈鱚羹癆譬ぢネットワークアドレス変換 (NAT)</a> ルール中の変換アドレス
<li><a href="rdr.html">リダ瀬ぅ譽轡腑鹿畩ぢルール中のリダ瀬ぅ譽轡腑鵐▲疋譽
殊蘊儒鳫絖鹿ぢ、<tt>reply-to</tt> および <tt>dup-to</tt>
フィルタルールオプションの中の送信誓茱▲疋譽
鹿
腫テーブルは、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.4"
><tt>pf.conf</tt></a> の中に記述するか、または
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4"
>pfctl(8)</a> を使用するかのいずれかで誓言成することができます。

<a name="config"></a>
<h2>誓瀋鹿莢儒鞴闔羲ぢの中で、テーブルは <tt>table</tt> ディレクティブを
使用して作誓靴泙后修譴召譴離董璽屮訝罎砲蓮焚爾梁粟性を指定できます。
<ul>
<li><tt>const</tt> - テーブルの内容は、テーブルが誓言成された後は変更できません。
この属誓慊蠅気譴討い覆ぞ豺腓砲蓮
釈鱚羹∵雕關緕碵筮闥膀竍薛砠遲轣隨竍蘓髟纈黼笊鱚跂讀瘢雹黼謾蜿扈窪瘢雹轣鉋癆莉緕帯朝凱刈
杖繝繻纐繻┠が 2 以上で運用されている場合でも、
アドレスをテーブルに追加したりテーブルから削除したりするのに、いつでも
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4"
>pfctl(8)</a> を使用することができます。
<li><tt>persist</tt> - 参照ルールがなくなっても、カーネルはテーブルを
メモリ中に保持します。この属誓了慊蠅覆ぞ豺腓砲蓮
このテーブルを参照する最後のルールがフラッシュされた場合に、
カーネルはテーブルをメモリから自動的に除去します。
</ul>

<p>
例:
<blockquote>
<tt>
table &lt;goodguys&gt; { 192.0.2.0/24 }<br>
table &lt;rfc1918&gt; const { 192.168.0.0/16, 172.16.0.0/12, \<br>
&nbsp;&nbsp;&nbsp;10.0.0.0/8 }<br>
table &lt;spammers&gt; persist<br>
<br>
block in on fxp0 from { &lt;rfc1918&gt;, &lt;spammers&gt; } to any<br>
pass&nbsp; in on fxp0 from &lt;goodguys&gt; to any<br>
</tt>
</blockquote>

<p>
アドレスは、以下のような否定 (あるいは "not") 修飾子を使用して
指定することができます。
<blockquote>
<tt>
table &lt;goodguys&gt; { 192.0.2.0/24, !192.0.2.5 }
</tt>
</blockquote>

<p>
この例では、<tt>goodguys</tt> テーブルは、192.0.2.5 を除く 192.0.2.0/24
ネットワークのすべてのアドレスにマッチするようになります。

<p>
テーブル名は常に &lt; &gt; で囲むということに注意してくだ世気ぁ

腫テーブルは IP アドレスやネットワークのリストを含む
テキストファイルに記述しておくこともできます。
<blockquote>
<tt>
table &lt;spammers&gt; persist file "/etc/spammers"<br>
<br>
block in on fxp0 from &lt;spammers&gt; to any<br>
</tt>
</blockquote>

<p>
この <tt>/etc/spammers</tt> ファイルは、IP アドレスのリストおよび/または
<a href="http://public.pacbell.net/dedicated/cidr.html">CIDR</a>
ネットワークブロックを一行にひとつ含んでいます。
た、<tt>#</tt> から始まるすべての行はコメント行と解釈され、無視されます。

<a name="manip"></a>
<h2><tt>pfctl</tt> を使用した操作</h2>
テーブルは
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4"
>pfctl(8)</a> を使用して、運用中に操作することができます。たとえば、
上記で作誓靴踉雌鞜迯纈鵙苳テーブルにエントリを追加するには、以下のようにします。
<blockquote>
<tt># pfctl -t spammers -Tadd 218.70.0.0/16</tt>
</blockquote>

<p>
このとき、&lt;spammers&gt; テーブルがまだ逝減澆靴討い覆ぞ豺腓砲蓮
これを誓言成します。テーブル中のアドレスのリストを取得世垢襪砲楼焚爾里茲Δ砲靴泙后
錫跫站髟阡緇
儒鞴笏鞜迯纈鼈阯鹿鹿碎閭鞫それぞれのテーブルのエントリの統計情報を表示するため、<tt>-Tshow</tt>
とともに、引数 <tt>-v</tt> を指定することができます。テーブルから
アドレスを除去するには以下のようにします。
<blockquote>
<tt>
# pfctl -t spammers -Tdelete 218.70.0.0/16
</tt>
</blockquote>

<p>
<tt>pfctl</tt> を使用したテーブルの操作についてのより詳しい情報は
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.4"
>pfctl(8)</a>
を参照してくだ世気ぁ

釈瘢綵≡粐鬆昭取仮アドレスの指定</h2>
IP アドレスを指定する以外にも、ホスト名を使用してホストの指定を
行うこともできます。ホスト名解決で IP アドレスに変換される際に、
その結果としてのすべての IPv4 および IPv6 アドレスがテーブルに
入ります。IP アドレスは、有効なインターフェイス名や <tt>self</tt>
キーワードを指定してテーブルに入れることもできますが、この場合、
インターフェイスに割り当てられているすべてのアドレスがテーブルに追加されます。

<a name="match"></a>
<h2>アドレスマッチング</h2>
テーブルに対するアドレス参照では、最も狭い範囲でマッチするエントリが返されます。
これにより、以下のようなテーブルの誓言成が許されることになります。
<blockquote>
<tt>
table &lt;goodguys&gt; { 172.16.0.0/16, !172.16.1.0/24, 172.16.1.100 }<br>
<br>
block in on dc0 all<br>
pass &nbsp;in on dc0 from &lt;goodguys&gt; to any<br>
</tt>
</blockquote>

<p>
<tt>dc0</tt> を通過して入ってくるすべてのパケットは、<tt>&lt;goodguys&gt;</tt>
テーブルにマッチする送信元アドレスを持っています。
<ul>
<li>172.16.50.5 - 最も狭いマッチは 172.16.0.0/16 です。
パケットはテーブルにマッチし、通過することができます。
<li>172.16.1.25 - 最も狭いマッチは !172.16.1.0/24 です。パケットは
テーブル中のエントリにマッチしますが、このエントリは、("!" 修飾子を使用して)
否定されています。ですので、パケットはテーブルにマッチせず、ブロックされます。
<li>172.16.1.100 - これは 172.16.1.100 に誓騎里縫泪奪舛靴討い泙后
パケットはテーブルにマッチし、通過することができます。
<li>10.1.4.55 - これはテーブルにはマッチせず、ブロックされます。
</ul>

<p>
[<a href="macros.html">前に戻る: リストとマクロ</a>]
[<a href="index.html">目次</a>]
[<a href="filter.html">次に進む: パケットフィルタリング</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br>
<small>
Originally [OpenBSD: tables.html,v 1.9 ]
<br>
$Translation: tables.html,v 1.11 2004/01/03 06:14:18 toshi Exp $
<br>
$OpenBSD: tables.html,v 1.11 2004/05/09 09:58:22 saad Exp $
</small>

</body>
</html> 
@


1.11
log
@sync with Steelix CVS
@
text
@d213 1
a213 1
$OpenBSD: tables.html,v 1.9 2004/01/01 04:16:17 nick Exp $
@


1.10
log
@Sync with Steelix CVS
@
text
@@


1.9
log
@Sync with Steelix CVS
@
text
@d11 1
a11 1
<meta name="copyright"     content="This document copyright 2003 by OpenBSD.">
d209 1
a209 1
Originally [OpenBSD: tables.html,v 1.8 ]
d211 1
a211 1
$Translation: tables.html,v 1.10 2003/12/03 04:48:37 toshi Exp $
d213 1
a213 1
$OpenBSD: tables.html,v 1.8 2003/11/27 15:08:25 nick Exp $
@


1.8
log
@Sync with Steelix CVS
@
text
@d22 1
a22 1
[<a href="options.html">次に進む: オプション</a>]
d47 14
a60 8
わずかに余計にかかるだ世韻任后董璽屮襪蓮釈鱚羹∽蛹鬯蔗迪⊂フィルタ</a>、 
<a href="scrub.html"><tt>スクラブ (scrub)</tt></a>、
<a href="nat.html"><tt>ネットワークアドレス変換 (NAT)</tt></a>、
および<a href="rdr.html">リダ瀬ぅ譽轡腑鹿畩ルールの中の
送信元アドレスや送信誓茱▲疋譽垢忙藩僂垢襪海箸任泙垢
儒ネットワークアドレス変換 (NAT)</tt> ルールの中のリダ瀬ぅ譽轡腑鵐▲疋譽垢箸靴討筺
フィルタルールのルーティングオプション (<tt>route-to</tt>、<tt>reply-to</tt>、
<tt>dup-to</tt>) として使用することはできません。テーブルは、
d62 1
a62 1
><tt>/etc/pf.conf</tt></a> の中に記述するか、または
d64 1
a64 1
><tt>pfctl(8)</tt></a> を使用するかのいずれかで誓言成することができます。
d77 1
a77 1
><tt>pfctl(8)</tt></a> を使用することができます。
d126 4
a129 3
この <tt>/etc/spammers</tt> ファイルは IP アドレスのリストを、
一行にひとつ含んでいます。また、<tt>#</tt> から始まるすべての行は
コメント行と解釈され、無視されます。
d135 1
a135 1
><tt>pfctl(8)</tt></a> を使用して、運用中に操作することができます。たとえば、
d159 1
a159 1
><tt>pfctl(8)</tt></a>
d185 1
a185 1
dc0 を通過して入ってくるすべてのパケットは、<tt>&lt;goodguys&gt;</tt>
d201 1
a201 1
[<a href="options.html">次に進む: オプション</a>]
d209 1
a209 1
Originally [OpenBSD: tables.html,v 1.7 ]
d211 1
a211 1
$Translation: tables.html,v 1.9 2003/11/10 14:53:17 toshi Exp $
d213 1
a213 1
$OpenBSD: tables.html,v 1.7 2003/11/09 23:29:02 nick Exp $
@


1.7
log
@sync with steelix translation CVS
@
text
@d55 1
a55 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.3"
d57 1
a57 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d67 1
a67 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7&amp;manpath=OpenBSD+3.3"
d70 1
a70 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d127 1
a127 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d151 1
a151 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3"
d202 1
a202 1
Originally [OpenBSD: tables.html,v 1.6 ]
d204 1
a204 1
$Translation: tables.html,v 1.8 2003/09/24 05:04:49 toshi Exp $
d206 1
a206 1
$OpenBSD: tables.html,v 1.6 2003/09/22 02:29:03 nick Exp $
@


1.6
log
@sync with steelix cvs
@
text
@@


1.5
log
@sync with steelix cvs
@
text
@d173 1
a173 1
pass  in on dc0 from &lt;goodguys&gt; to any<br>
d202 1
a202 1
Originally [OpenBSD: tables.html,v 1.5 ]
d204 1
a204 1
$Translation: tables.html,v 1.6 2003/09/18 14:09:44 toshi Exp $
d206 1
a206 1
$OpenBSD: tables.html,v 1.5 2003/09/16 01:23:49 nick Exp $
@


1.4
log
@sync with steelix translation CVS
@
text
@d202 1
a202 1
Originally [OpenBSD: tables.html,v 1.4 ]
d204 1
a204 1
$Translation: tables.html,v 1.5 2003/06/13 04:57:08 toshi Exp $
d206 1
a206 1
$OpenBSD: tables.html,v 1.4 2003/06/13 02:54:08 nick Exp $
@


1.3
log
@sync with steelix translation CVS
@
text
@d55 4
a58 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+3.3">
<tt>/etc/pf.conf</tt></a> の中に記述するか、または
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">
<tt>pfctl(8)</tt></a> を使用するかのいずれかで誓言成することができます。
d67 2
a68 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=securelevel&amp;sektion=7&amp;manpath=OpenBSD+3.3">
securelevel(7)</a> が 2 以上で運用されている場合でも、
d70 2
a71 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">
<tt>pfctl(8)</tt></a> を使用することができます。
d127 2
a128 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">
<tt>pfctl(8)</tt></a> を使用して、運用中に操作することができます。たとえば、
d151 2
a152 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&amp;sektion=8&amp;manpath=OpenBSD+3.3">
<tt>pfctl(8)</tt></a>
d202 1
a202 1
Originally [OpenBSD: tables.html,v 1.3 ]
d204 1
a204 1
$Translation: tables.html,v 1.4 2003/06/09 15:24:55 toshi Exp $
d206 1
a206 1
$OpenBSD: tables.html,v 1.3 2003/05/15 03:03:54 nick Exp $
@


1.2
log
@
sync with steelix translation CVS
@
text
@d50 1
a50 1
および<a href="../rdr.html">リダ瀬ぅ譽轡腑鹿畩ルールの中の
d204 1
a204 1
$Translation: tables.html,v 1.3 2003/06/05 12:20:41 toshi Exp $
@


1.1
log
@
sync with steelix translation CVS
@
text
@d47 3
a49 3
わずかに余計にかかるだ世韻任后董璽屮襪蓮釈鱚羹〓肅踉纈譬ぢフィルタ</a>、 
<a href="scrub.html"><tt>scrub</tt></a>、
<a href="../nat.html"><tt>ネットワークアドレス変換 (NAT)</tt></a>、
d204 1
a204 1
$Translation: tables.html,v 1.1 2003/05/29 12:35:12 toshi Exp $
@

