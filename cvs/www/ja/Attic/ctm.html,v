head	1.13;
access;
symbols;
locks; strict;
comment	@# @;


1.13
date	2008.03.31.20.01.45;	author tobias;	state dead;
branches;
next	1.12;

1.12
date	2006.12.27.16.17.15;	author saad;	state Exp;
branches;
next	1.11;

1.11
date	2005.08.15.20.46.06;	author saad;	state Exp;
branches;
next	1.10;

1.10
date	2005.01.20.19.41.28;	author jufi;	state Exp;
branches;
next	1.9;

1.9
date	2004.05.09.09.58.23;	author saad;	state Exp;
branches;
next	1.8;

1.8
date	2004.02.15.18.18.41;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2003.11.03.16.46.36;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2003.04.15.17.16.33;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2003.03.06.11.09.02;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2002.04.26.06.23.56;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2002.04.17.17.56.57;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2002.04.14.14.06.43;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2002.04.05.06.02.56;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Sync with Steelix CVS
@
text
@<!DOCTYPE HTML PUBLIC  "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>CTM</title>
<link rev="made" href="mailto:www@@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
<meta name="resource-type" content="document">
<meta name="description" content="the OpenBSD/CTM page">
<meta name="keywords" content="openbsd,ctm">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1996-2004 by OpenBSD.">
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#23238E">

<center>
<img alt="CTM for OpenBSD" src="../images/bsdctm.gif" width="401" height="126">
</center>

<h3><font color="#0000e0">CTM とは ?</font></h3>

<p>
CTM は、ソースツリーへの変更を定期的に電子メールで利用できるよう、
Poul-Henning Kamp により誓澤廚気譴織轡好謄爐任后
モデム誓楝海里茲Δ蔽戮ぅぅ鵐拭璽優奪叛接続を利用している場合、これは、
現在のソースツリーや CVS リポジトリを最新のものに保つ良い方法でしょう。

<p>
OpenBSD CTM は、OpenBSD の CVS リポジトリのすべてのモジュールを配布すること
ができます。また、チェックアウトされたバージョンの配布に使用することもできます。
CTM はツリーへの変更を配布するのに、非常に狭い帯域幅しか使用せず、さらに
それを <tt><b>gzip -9</b></tt> を使用して圧縮しているのです。
<a href="cvsup.html">CVSup</a> とは対照的に、CTM はプレーンな C 言生譴乃
されていますので、OpenBSD がサポートするすべてのプラットフォームで利用可能です。
他のすべての OpenBSD の CVS リポジトリにアクセスする方法がプルシステム
なのに対し、CTM はプッシュシステムと呼ばれる実装となっています。

<p>
CTM に関する<b>どんな</b>問題、示唆、報告、または質問でも、 CTM 保守担当の
<a href="mailto:hgw@@d1906.inka.de">Hans G&uuml;nter Weigand</a> に連絡を
取ってくだ世気ぁ
首轣跛嘗痴のサポートについては、他の OpenBSD の人たちには尋ねないようにしてくだ世気ぁ
なにしろ、彼らは他のことで手いっぱいなのですから。よろしくお願いします。)</small>

<h3><font color="#0000e0">どのように動くのでしょう ?</font></h3>

<p>
CTM についての基本的な考え方は、特殊な CVS モジュールやソースツリーのための
特別なメーリングリストを講読するということです。毎日、その間にツリーに
加えられたすべての変更が含まれた電子メールを、あなたは受け取ることになるでしょう。
そのような差分のセットは<b>デルタ</b>と呼ばれています。
実際には、CTM サーバは 12 時間ごとに新しいデルタを作誓靴討い泙后

腫ベースセットから始めますが、これに対して、後のデルタをパッチとして当てるのです。
CTM を使い始めるためには、最新のベースセットおよびその後に誓言成されたすべてのデルタを
ダ瀬Ε鵐蹇璽匹靴泙后０貪戞△修譴蕕鮟萢垢譴弌▲瓠璽螢鵐哀螢好箸藜閏茲襪修慮紊
デルタを処理できるようになります。ベースセットは、回誓靴匹覆討皀誓ウンロードが
容易になるよう、1400kB ずつに分割されています。

<p>
ベースセットは 50 個の相対デルタごとに誓言成されますので、追いかけるために 50 個以上の
相対デルタを落とす必要はありません。

<p>
現時点世任蓮種類のベースセットがあります。私たちはかなりの間、
<tt><b>tar.gz</b></tt> ファイルを手動で作誓靴討い燭里任垢
本当の CTM ベースデルタに戻しました。後者は、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&amp;sektion=1">md5(1)</a>
チェックサムを含み、これは自動誓言成されていますので、こちらの方が少しだ世碓汰瓦任靴腓Α
これら 2 種類のベースセットは、そのファイル名で区別できるはずです。
たとえば、<tt><b>tar.gz</b></tt> ファイルの場合なら、
<tt><b>OpenBSD-cvs.1450.tar.gz</b></tt> となるのに対して、CTM ベースデルタなら
<tt><b>OpenBSD-cvs.1500A.gz</b></tt> となります。
詳細な取り扱い誓睫誓は以下を参照してくだ世気ぁ

取馨惹闔竢跫鮟■旭旭絨⊂痴はどのくらいの帯域幅を使用するのでしょう ?</font></h3>

<p>
以下にリストされたサイトから、FTP でベースデルタおよび最近までの
すべての相対デルタを取得世靴泙后汽ぅ困楼焚爾里箸蠅任后

受貍
殊蘊緕帯牒笆の場合、およそ 215MB。
<li>OpenBSD-cvs-x11 の場合、およそ 40MB。
<li>OpenBSD-cvs-xf4 の場合、およそ 65MB。
<li>OpenBSD-src の場合、およそ 83MB。
<li>OpenBSD-src-x11 の場合、およそ 36MB。
<li>OpenBSD-ports の場合、およそ 4MB。
<br>これらが圧縮したサイズであることに注意してくだ世気ぁ
伸長したファイルはおよそ 5 倍ほどの大きさになります。
<li>相対デルタは 10kB から 500kB くらいまで、さらには時に数MB くらいまで
    変化することがあります。
<li>CTM は、自動的に再構誓気譴旭訛ぢのメイルのメッセージに、
    常にデルタを分割します。
<li>デルタが 5MB よりも大きい場合には、それはメイルでは送られません。
    その代わりに、FTP によってデルタを取得世垢襪燭瓩猟銘里鮗閏茲
ことでしょう。大きな CTM のアップデートは稀ですが、binutils、
    Perl、gcc、X などのようなもののメジャーなインポートや
    CVS リポジトリへのタグ付けの後だ世韻膨名錣狼誓るものです。
</ul>

<h3><font color="#0000e0">CTM はどのように使用するのでしょう ?</font></h3>

<ul>
<li>お望みのソースセットのための CTM メーリングリストの講読。
<p>
   CTM 関連のいくつかのメーリングリストがあります。CVS リポジトリの更新の
   ためのメーリングリスト、ソースツリーのためのメーリングリスト、X11
   部分の両方のためのメーリングリストと、そして ports ツリー、さらに
   CTM のデルタ誓言成の際のメッセージログのためのメーリングリストです。
   <p>
   以下のコマンドで、適誓擇淵瓠璽螢鵐哀螢好箸鮃崙匹任泙后
腫置リポジトリ用 (CVSROOT、ports、src および www モジュール、
ただ世掘惘と XF4 は含みません):
<pre>
	echo subscribe OpenBSD-cvs | mail majordomo@@OpenBSD.org
</pre>
X11 モジュールの CVS リポジトリ用:
<pre>
	echo subscribe OpenBSD-cvs-x11 | mail majordomo@@OpenBSD.org
</pre>
XF4 モジュールの CVS リポジトリ用:
<pre>
	echo subscribe OpenBSD-cvs-xf4 | mail majordomo@@OpenBSD.org
</pre>
ソースモジュールのチェックアウトされたコピー用:
<pre>
	echo subscribe OpenBSD-src | mail majordomo@@OpenBSD.org
</pre>
X11 モジュールのチェックアウトされたコピー用:
<pre>
	echo subscribe OpenBSD-src-x11 | mail majordomo@@OpenBSD.org
</pre>
ports モジュールのチェックアウトされたコピー用:
<pre>
	echo subscribe OpenBSD-ports-ctm | mail majordomo@@OpenBSD.org
</pre>
CTM のログ用:
<pre>
	echo subscribe ctm-log | mail majordomo@@OpenBSD.org
</pre>

<p>
<li>パッケージか ports コレクションから CTM プログラムをインストール
します。ports は
<tt><b>/usr/ports/devel/ctm</b></tt> にあります。

</ul>
<b>注:</b> 次の例は、OpenBSD-cvs を明棲里縫弌爾靴討い泙后
その他のソースセットも同様の方法で扱われています。

<p><ul>

<li>FTP サイトからベースセットをダ瀬Ε鵐蹇璽匹靴泙后修離汽屮妊譽肇蠅
儒錫鐘癈絲緕帯牒笆鷦昭ぢがあります。そのディレクトリの中のファイルを
すべてを取得世靴泙后０貪戞△修譴蕕垢戮討鮗萋誓すれば、ベースセットファイルを
誓言成でき、そして、取得世靴織侫．ぅ襪離織ぅ廚飽預犬靴泙垢焚爾離灰泪鵐匹
それらをアンパックできるでしょう。

<pre>
	cat split/OpenBSD-cvs.1500A.gz.* &gt; OpenBSD-cvs.1500A.gz
	cd target
	ctm -v -v -v .../OpenBSD-cvs.1500A.gz
</pre>
<p>
あるいは、

<pre>
	cat split/OpenBSD-cvs.1450.tar.gz.* &gt; OpenBSD-cvs.1450.tar.gz
	cd target
	tar -xzvf .../OpenBSD-cvs.1450.tar.gz
</pre>

<p>
ここで、<tt><b>split</b></tt> とは、ダ瀬Ε鵐蹇璽匹靴織侫．ぅ襪鮹屬い
ディレクトリのことであり、そして <tt><b>target</b></tt> とは、
ソースセットをアンパックする場所として選択したディレクトリのことです。

<p> もし、完全なツリーが得世蕕譴燭海箸稜Г任譴弌△海譴蕕離戞璽
セットファイルを保存しておく必要はありません。が、もちろん、ベースセット
ファイルをバックアップ目的で保存しておいても良いでしょう。いずれにしても、
作業を継続する前に、ベースセットの番号をちゃんと控えておいてくだ世気ぁ

腫殊蘊今、ベースセットから誓言成されたものとのデルタを取得世垢詆廚△蠅泙后
以下にリストされた FTP サーバのひとつのサブディレクトリ
<tt><b>OpenBSD-cvs</b></tt> から、使用するベースセットの番号よりも
<em>大きな</em>番号の各ファイルをダ瀬Ε鵐蹇璽匹靴討誓さい。そして、
それらのデルタを以下のようにして適用します。

<pre>
	cd target
	ctm -v -v -v deltas/OpenBSD-cvs.*
</pre>

<p>
ここで、<tt><b>target</b></tt> とは、ソースセットのツリーのディレクトリ
のことであり、そして <tt><b>deltas</b></tt> とは、デルタの置かれている
ディレクトリのことです。

<p>
<li>メーリングリストからの最初のデルタが到着するのを待ちます。
<p>
<li><tt><b>ctm_rmail</b></tt> を使用して、CTM デルタをアンパック、構誓掘僂靴泙后
腫
腫鱚	笏轜鴉瘟繻癇艱肬趙纈
鹿頏緇

腫ここで、<tt><b>folder</b></tt> とは、デルタのメールを含む
メールフォルダ世里海箸任后海離灰泪鵐匹痴デルタをデコードし、
それを <tt><b>deltas</b></tt> ディレクトリに保存するのです。デルタは、
<tt><b>OpenBSD-cvs.<var>XXXX</var>.gz</b></tt> という形態の
ファイルであり、ここで <var>XXXX</var> とは、デルタの番号のことです。
そして、そのデルタを、ベースセットをアンパックした
<tt><b>target</b></tt> の場所にあるディレクトリツリーに適用します。

<p>
メーリングリストからデルタを受け取るごとに、この最後のステップを
繰り返します。お好み次第で、procmail、maildrop、あるいは他の同様の
<a href="ports.html">ports コレクション</a> のプログラムを使用して、
このステップを自動化することも可能です。
</ul>

<p>
以下は、CTM デルタを取得晴椎修墅ぢサーバのリストです。

<ul>
<li>プライマリ FTP サーバ:
<p>
<a href="ftp://togetic.kd85.com:/pub/OpenBSD-ctm/">
     ftp://togetic.kd85.com:/pub/OpenBSD-ctm/
</a>
<p>
このサーバは、CTM デルタ誓言成プロセスによって、自動的にアップデートされています。
ベースセットは、
<tt><b>base</b></tt> ディレクトリの下のひとつの大きなファイルとして存在
しており、分割ファイルは <tt><b>base-split</b></tt> ディレクトリの下にあります。
</ul>

<ul>
<li><a href="ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/">
     ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/
</a>
<p>
このサーバは、メーリングリストからの CTM デルタによってアップデートされています。
このサーバは、<tt><b>base</b></tt> サブディレクトリの下に、
<a href="ftp://togetic.kd85.com:/pub/OpenBSD-ctm/">
     ftp://togetic.kd85.com:/pub/OpenBSD-ctm/
</a>
をミラーした、分割ベースデルタを付加的に持っています。
</ul>

<ul>
<li><a href="ftp://ctm.OpenBSD.org:/pub/OpenBSD-ctm/">
     ftp://ctm.OpenBSD.org:/pub/OpenBSD-ctm/
</a>
<p>
は、
<p>
<li><a href="ftp://ctm.ca.OpenBSD.org:/pub/OpenBSD-ctm/">
     ftp://ctm.ca.OpenBSD.org:/pub/OpenBSD-ctm/
</a>
<p>
と同じサーバであり、そして、
<a href="ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/">
     ftp://ctm.se.OpenBSD.org
</a>
のミラーとなっています。
</ul>

<p>
<b>注:</b> <a href="mailto:hgw@@d1906.inka.de">私</a>は
      これらのデルタをミラーしてくれる、誓こγ罎離汽ぅ箸
大変な関心を持って探しています。
<p>

<h3><font color="#0000e0">ソースツリーと CVS リポジトリ、どちらを選ぶべきでしょう ?</font></h3>

<p>
他の要素の中でも、これに関しては、あなたのディスクスペースに依存します。
CTM はローカルに変更されたファイルをほとんど反映することができないので、
より良い選択となるのは確実に <a href="anoncvs.html">CVS</a> リポジトリ
の方でしょう。自分の CVS リポジトリから、ソースツリーの作業用コピーを
チェックアウトもできますし、安定版のブランチを追いかけることもできますし、
自分のローカルな変更を自分のソースツリー中でキープすることもできるのです。
CVS は、あなたのローカルな変更をマージできるくらい良くできたものです。
さらに、あなたは、<tt><b>cvs commit</b></tt> や <tt><b>cvs tag</b></tt>
のようなコマンドを除いた、すべての範囲の CVS コマンドを利用可能でもあるのです。

<p>
しかしながら、欠点世箸靴討蓮△修譴廚箸垢襯妊好好據璽垢領未△襪任靴腓Α
チェックアウトされたソースツリーは約 370MB 程度を必要としますが、あなたは
自分自身の CVS リポジトリを持っているとして、そのために 1GB 以上も必要と
なり、<b>それに加えて</b> 370MB がチェックアウトしたツリー用に必要となります。
この中には、たとえば、ソースのコンパイルなどの、ビルド中に誓言成されるファイル
のために必要な (アーキテクチャに依存する) 100MB 以上の領域は含まれていないのです。

<p>
CVS リポジトリを入手したら、そこからソースツリーをチェックアウトするのに、
<tt><b>cvs checkout</b></tt> コマンドを使用することができます。
毎回、CTM での更新時に、ソースリポジトリを更新するのに、
<tt><b>cvs update</b></tt> コマンドを使用することができます。

<p>
初期状態の src リポジトリを得世襪砲蓮
腫鱚	邃	笆拵孀瀉嶝瀲登腕不碗竏繝謠齟鹿頏緇
腫として、それぞれの CTM の更新後、以下のコマンドを実行します。
<pre>
	cd /usr/src
	cvs -q update -Pd
</pre>

<h3><font color="#0000e0">OpenBSD の CTM はどの程度安定しているのでしょう ?</font></h3>

CTM は 5 年以上も OpenBSD で使用されてきており、また、FreeBSD では
さらに長い期間使用されてきました。CTM は非常に信頼誓△蝓堕蠅靴討い泙后

取馨惹闔竢跫鮟■旭旭絨⊂痴を維持するために何が行われているのでしょう ?</font></h3>

数々の (小さな) 変更と最適化が可能です。
それらの中で、

<ul>
<li> CTM は 5MB 以上のデルタを決してメールでは送信しません。これについては、
     二種類の変更が可能で、デルタの最大サイズを増加させることもできますし、
     または、決まった数のメールを毎日送信するためだ世韻離紂爾
ぢインストールすることもできます。たとえば、デルタが 6MB の大きさの
     場合、これは 96 個のメールメッセージに分割されます。そして、それらは、
     キューに入れられます。初日は最初の 50 個のメッセージを送信し、
     二日目には残りの 46 個に加えて、次のデルタの最初の 4 メッセージ
     を送信します。
<li> CTM ソフトウェアは書き換えたり、または、少なくとも、より良い方法で
     フィックスすることもできます。その C 言生譴亮汰蓮⇔匹ぅ廛蹈哀薀潺鵐
ぢの見本ではありません。しかし、また、それは、PGP による CTM デルタへの署名
     のような新機能を追加するための良い目的ともなるでしょう。
</ul>

あなたの御意見・御希望は、<a href="mailto:hgw@@d1906.inka.de">私</a>にメールしてくだ世気

取馨惹闔竢跫鮟■旭旭絨⊂さらなる情報</font></h3>

もし、CTM についてさらに知りたい場合には、それを始める良い場所として、
FreeBSD ハンドブックがあります。

<ul>
<li> <a href="http://www.FreeBSD.org/handbook/ctm.html">
         http://www.FreeBSD.org/handbook/ctm.html
     </a>
</ul>

また、すべての CTM ユーティリティのためのマニュアルページもあります。

<h3><font color="#0000e0">要約:</font></h3>

<p>
<ul>
<li> メーリングリスト:

   <ul>
   <li><tt>echo subscribe OpenBSD-cvs | mail majordomo@@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-cvs-x11 | mail majordomo@@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-cvs-xf4 | mail majordomo@@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-src | mail majordomo@@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-src-x11 | mail majordomo@@OpenBSD.org</tt>
   <li><tt>echo subscribe OpenBSD-ports-ctm | mail majordomo@@OpenBSD.org</tt>
   <li><tt>echo subscribe ctm-log | mail majordomo@@OpenBSD.org</tt>
   </ul>
<p>
<li> FTP (ベースセットとそれに関連するデルタ用):

   <ul>
   <li> <a href="ftp://togetic.kd85.com:/pub/OpenBSD-ctm/">
        ftp://togetic.kd85.com:/pub/OpenBSD-ctm/</a>
   <li> <a href="ftp://ctm.OpenBSD.org:/pub/OpenBSD-ctm/">
        ftp://ctm.OpenBSD.org:/pub/OpenBSD-ctm/</a>
   <li> <a href="ftp://ctm.ca.OpenBSD.org:/pub/OpenBSD-ctm/">
        ftp://ctm.ca.OpenBSD.org:/pub/OpenBSD-ctm/</a>
   <li> <a href="ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/">
        ftp://ctm.se.OpenBSD.org:/pub/OpenBSD-ctm/</a>
   </ul>
</ul>

<p>
CTM に関する重要な注意事項とアナウンスは、announce@@OpenBSD.org
メーリングリストに投稿されるでしょう。

<p>

<h3><font color="#0000e0">謝辞</font></h3>

<ul>
<li> Poul-Henning Kamp (phk@@FreeBSD.org) は、CTM を使用可能なものにし、
     デルタの誓言成できるようにするのを助けてくれました。

<li> Theo de Raadt (deraadt@@theos.com) は、OpenBSD を使用可能なものにし、
     (現在は別のところで誓言成されていますが) cvs.OpenBSD.org 上で CTM デルタ
     を誓言成するのに必要なリソースを最初に提供してくれ、そして、
     ネームサーバのマジックも提供してくれました。

<li> Todd C. Miller (millert@@OpenBSD.org) は、CTM メーリングリストを
     セットアップし、メンテナンスしてくれています。

<li> Bob Beck (beck@@OpenBSD.org)、Artur Grabowski (art@@OpenBSD.org)、
     Magnus Holmberg (mho@@OpenBSD.org) と
     Wolfram Schneider (wosch@@FreeBSD.org) は、ctm.*OpenBSD.org 上の
     ベースセットとデルタ用に ftp 用の領域をセットアップしてくれました。

<li> Thomas Graichen (graichen@@OpenBSD.org) は、OpenBSD のための CTM 
     をスタートし、それをずっとメンテナンスしてくれています。

<li> Wim Vandeputte (wvdputte@@OpenBSD.org) は、現在 CTM をホスティングしてくれています。

<li> ... そして、間誓榲亡麝燭靴討譴拭召里垢戮討凌諭
鹿

腫緕帯プロジェクトのための OpenBSD/CTM のロゴは、
   <a href="mailto:flipk@@openbsd.org">Phillip F Knaack</a> によってデザインされました。
<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../back.gif" border="0" alt="OpenBSD" /></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>

<br>
<small>
<!-- 
Originally [OpenBSD: ctm.html,v 1.29 ]
$Translation: ctm.html,v 1.11 2006/12/26 09:09:08 kimitake Exp $
-->
$OpenBSD: ctm.html,v 1.12 2006/12/27 16:17:15 saad Exp $
<br>
</small>

</body>
</html>
@


1.12
log
@sync with Steelix CVS
@
text
@d440 1
a440 1
$OpenBSD: ctm.html,v 1.10 2005/01/20 19:41:28 jufi Exp $
@


1.11
log
@sync with Steelix CVS
@
text
@a303 41
もし、ソースツリーを得世蕕譴燭覆蕁▲蹇璽襪癖儿垢鯣娠任垢詆廚△襪任靴腓Α
これを行うためのひとつの方法としては、<b>union</b> ファイルシステムがあります
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&amp;sektion=8">mount_union(8)</a>
を参照)。しかし、上層および下層の両方が、同じ物理的ファイルシステム上にある
場合、<b>union</b> ファイルシステムは不安定であるとのレポートも出されています。
もし、上層と下層を別々のファイルシステムに配置できるのであれば、特に問題は
ないでしょう。これについての例は次のとおりです。

<p>
CTM で更新されたツリーが <tt><b>/usr/src-ctm</b></tt> にあり、そして、
自分自身で変更を加え、そこでビルドされる実際のソースツリーが
<tt><b>/usr/src</b></tt> にあると仮定します。
<tt><b>/usr/src</b></tt> は初期状態では空のディレクトリであるべきです。
次のコマンドで、union マウントをセットアップできるでしょう。

<pre>
	mount -t union -o -b /usr/src-ctm /usr/src
</pre>

<p>
<tt><b>/usr/src</b></tt> 中のファイルに加えられた変更は、
<tt><b>src-ctm</b></tt> 中のファイルを隠して、<tt><b>/usr/src</b></tt> 中に
含まれるファイルになるでしょう。もし、<tt><b>src-ctm</b></tt> のツリー下の
ファイルに CTM 経由でこのような変更が加えられても、上層のファイルが下層を
隠すかのように、これらの変更が見える<b>わけではありません</b>。

<p>
定期的に union をアンマウントして、
ローカルから union ファイルシステムに移ったファイルをサーチすべきでしょう。

<pre>
	umount /usr/src
	find /usr/src -type f
</pre>

<p>
コマンド <tt><b>ls -W</b></tt> および <tt><b>rm -W</b></tt> も、
<tt><b>/usr/src</b></tt> の中の "whiteouts" という名前のオブジェクトが
<tt><b>src-ctm</b></tt> のファイルを隠すでしょうから、役に立つことでしょう。

<p>
d437 2
a438 2
Originally [OpenBSD: ctm.html,v 1.28 ]
$Translation: ctm.html,v 1.10 2005/08/15 08:51:00 tueda Exp $
@


1.10
log
@Sync with Steelix CVS
@
text
@d99 1
a99 1
    Perl、gcc、XFree86 などのようなもののメジャーなインポートや
d235 2
a236 2
<a href="ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/">
     ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/
d252 2
a253 2
<a href="ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/">
     ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/
d422 2
a423 2
   <li> <a href="ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/">
        ftp://openbsd.rug.ac.be:/pub/OpenBSD-ctm/</a>
d478 2
a479 2
Originally [OpenBSD: ctm.html,v 1.26 ]
$Translation: ctm.html,v 1.9 2005/01/20 04:32:48 toshi Exp $
d481 1
a481 1
$OpenBSD: ctm.html,v 1.26 2004/02/13 07:49:52 david Exp $
@


1.9
log
@sync with Steelix CVS
@
text
@d477 1
d479 2
a480 3
<br>
$Translation: ctm.html,v 1.8 2004/02/13 18:10:06 toshi Exp $
<br>
@


1.8
log
@*** empty log message ***
@
text
@@


1.7
log
@sync with steelix translation CVS
@
text
@d1 14
a14 7
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
   <META http-equiv="Content-Type" content="text/html; charset=iso-2022-jp">
   <TITLE>CTM</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#23238E">
d20 1
a20 1
<H3><font color="#0000e0">CTM とは ?</font></H3>
d22 1
a22 1
<P>
d28 1
a28 1
<P>
d45 1
a45 1
<H3><font color="#0000e0">どのように動くのでしょう ?</font></H3>
d47 1
a47 1
<P>
d54 1
a54 1
<P>
d61 1
a61 1
<P>
d65 1
a65 1
<P>
d77 1
a77 1
<H3><font color="#0000e0">CTM はどのくらいの帯域幅を使用するのでしょう ?</font></H3>
d79 1
a79 1
<P>
d103 1
a103 1
<H3><font color="#0000e0">CTM はどのように使用するのでしょう ?</font></H3>
d105 2
a106 2
<UL>
<LI>お望みのソースセットのための CTM メーリングリストの講読。
d204 1
a204 1
<LI>メーリングリストからの最初のデルタが到着するのを待ちます。
d206 1
a206 1
<LI><tt><b>ctm_rmail</b></tt> を使用して、CTM デルタをアンパック、構誓掘僂靴泙后
箍鹸
甓鹸
斜箜恭
甞恭
屡馨惹闔竢跫鮟■旭旭絨⊂緕帯の CTM はどの程度安定しているのでしょう ?</font></H3>
d390 1
a390 1
<H3><font color="#0000e0">さらなる情報</font></H3>
d439 1
a439 1
<H3><font color="#0000e0">謝辞</font></H3>
d477 1
a477 1
Originally [OpenBSD: ctm.html,v 1.23 ]
d479 1
a479 1
$Translation: ctm.html,v 1.6 2003/04/14 15:30:43 toshi Exp $
d481 1
a481 1
$OpenBSD: ctm.html,v 1.23 2003/03/04 23:00:55 naddy Exp $
@


1.6
log
@
sync with steelix translation CVS
@
text
@@


1.5
log
@
sync with steelix translation CVS
@
text
@d218 1
a218 1
<a href="../ports.html">ports コレクション</a> のプログラムを使用して、
d472 1
a472 1
$Translation: ctm.html,v 1.5 2003/03/05 03:19:55 toshi Exp $
@


1.4
log
@
sync with badlands translation CVS
@
text
@d17 1
a17 1
Poul-Henning Kamp により誓澤廚気譴織轡好謄爐誓。
d19 1
a19 1
現在のソースツリーや CVS リポジトリを最新のものに保つ良い方法だ世蹐Α
箍甓ができる。また、チェックアウトされたバージョンの配布に使うこともできる。
CTM はツリーへの変更を配布するのに、非常に狭い帯域幅しか使わず、さらに
それを <tt><b>gzip -9</b></tt> を使って圧縮している。
d27 1
a27 1
されているので、OpenBSD がサポートするすべてのプラットフォームで利用可能だ澄
箍甓なのに対して、CTM はプッシュシステムと呼ばれる実装となっている。
d34 3
a36 3
取って欲しい。
<small>(CTM のサポートについては、他の OpenBSD の人たちには尋ねないでね。
なにしろ、彼等は他のことで手いっぱいだ世蕁茲蹐靴轣跛箜甞屡馨惹闔竢跫鮟■旭旭絨⊂どのように動くのか ?</font></H3>
d42 4
a45 4
特別なメーリングリストを講読するということだ澄Ｋ萋△修隆屬縫張蝓爾
加えられたすべての変更を含んだ静纏劵瓠璽襪髻△△覆燭麓閏茲襪海箸砲覆蹐Α
そのような差分のセットは<b>デルタ</b>と呼ばれる。
実際には、CTM サーバは 12 時間ごとに新しいデルタを作っている。
d48 5
a52 5
ベースセットから始めるが、これに対して後のデルタをパッチとして当てる。 CTM を
使い始めるためには、最新のベースセットおよびその後に誓言成されたすべてのデルタを
ダ瀬Ε鵐蹇璽匹垢襦０貪戞△修譴蕕鮟萢垢譴弌▲瓠璽螢鵐哀螢好箸藜閏茲襪修慮
のデルタを処理できるようになる。ベースセットは、回誓靴匹覆討皀誓ウン
ロードが容易になるよう、1400kB ずつに分割されている。
d55 2
a56 2
ベースセットは 50 個の相対デルタごとに誓言成されるので、追いかけるために 50 個
以上の相対デルタを落としてくる必要はない。
d59 6
a64 6
現時点世任蓮種類のベースセットがある。我々はかなりの間、
<tt><b>tar.gz</b></tt> ファイルを手動で作誓靴討い燭里誓けれど、
本当の CTM ベースデルタに戻した。後者は、
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=md5&sektion=1">md5(1)</a>
チェックサムを含み、これは自動誓言成されているので、こちらの方が少しだ世碓汰瓦誓ね。
これら 2 種類のベースセットは、そのファイル名で区別できるだ世蹐Α
箒甼儒錫章鞳鄲喞軌袷昭ぢとなる。
詳細な取り扱い誓睫誓は以下を見て欲しい。
d70 1
a70 1
<H3><font color="#0000e0">CTM はどれくらいの帯域幅を使うのか ?</font></H3>
d74 1
a74 1
すべての相対デルタを取得世垢襦汽ぅ困麓，里箸筝畍錫鮠これらが圧縮したサイズであることを心に留めておいて欲しい。
    伸長したファイルはおよそ 5 倍ほどの大きさになる。
d86 1
a86 1
    変化することがある。
d88 2
a89 2
    常にデルタを分割する。
<li>デルタが 5MB よりも大きい場合には、それはメイルでは送られない。
d91 1
a91 1
    ことだ世蹐ΑＢ腓塒ぢのアップデートは稀だ世韻鼻砠銛踈、
d93 1
a93 1
    CVS リポジトリへのタグ付けの後だ世韻膨名錣狼誓るものだ澄
箙畊屡馨惹闔竢跫鮟■旭旭絨⊂痴はどのように使うのか ?</font></H3>
d101 1
a101 1
   CTM 関連のいくつかのメーリングリストがある。CVS リポジトリの更新の
d104 1
a104 1
   CTM のデルタ誓言成の際のメッセージログのためのメーリングリストだ澄
箟斡
甕斡
ぢ以下のコマンドで、適誓擇淵瓠璽螢鵐哀螢好箸鮃崙匹任箟宛
甕姐
置リポジトリ用 (CVSROOT, ports, src および www モジュール,
ただ世掘惘と XF4 は含まず):
d140 2
a141 2
しよう。ports は
<tt><b>/usr/ports/devel/ctm</b></tt> にある。
d144 2
a145 2
<b>注:</b> 次の例は、OpenBSD-cvs を明棲里縫弌爾靴討い襦
その他のソースセットも同様の方法で扱われている。
d149 5
a153 5
<li>FTP サイトからベースセットをダ瀬Ε鵐蹇璽匹垢襦修離汽屮妊譽肇蠅
儒錫鐘癈絲緕帯牒笆鷦昭ぢがある。そのディレクトリの中のファイルを
すべてを取得世垢襦０貪戞△修譴蕕垢戮討鮗萋誓したなら、ベースセットファイルを
誓言成でき、そして、取得世靴織侫．ぅ襪離織ぅ廚飽預犬垢襪焚爾離灰泪鵐匹
それらをアンパックできるだ世蹐Α
箟群
甕群
ソースセットをアンパックする場所として選んだ瀬妊譽肇蠅里海箸誓。
d175 3
a177 3
セットファイルを保存しておく必要はない。が、もちろん、ベースセット
ファイルをバックアップ目的で保存しておいても良い。いずれにしても、
作業を継続する前に、ベースセットの番号をちゃんと控えておくこと。
d180 1
a180 1
<li>今、ベースセットから誓言成されたものとのデルタを取得世垢詆廚△襦
箟験
甕鹸
弱躱大きな</em>番号の各ファイルをダ瀬Ε鵐蹇璽匹靴突澆靴ぁ修靴董
それらのデルタを以下のようにして適用しよう。
d194 1
a194 1
ディレクトリのことだ澄
箟昂
甕昂
写評メーリングリストからの最初のデルタが到着するのを待とう。
d199 1
a199 1
<LI><tt><b>ctm_rmail</b></tt> を使って、CTM デルタをアンパック、構誓靴董僂靴茲Α
箍扱
甓姐
ここで、<tt><b>folder</b></tt> とは、デルタのメールを含んだ
メールフォルダ世里海箸誓。このコマンドが、CTM デルタをデコードし、
それを <tt><b>deltas</b></tt> ディレクトリに保存するのだ澄妊襯燭蓮
箍臼
甓嘘
ファイルであり、ここで <var>XXXX</var> とは、デルタの番号のことだ澄
そうしたら、そのデルタを、ベースセットをアンパックした
<tt><b>target</b></tt> の場所にあるディレクトリツリーに適用しよう。
d217 3
a219 3
繰り返そう。お好み次第で、procmail、maildrop、あるいは他の同様の
<a href="../ports.html">ports コレクション</a> のプログラムを使って、
このステップを自動化することも可能だ澄
箍桶
甓桶
以下は、CTM デルタを取得晴椎修墅ぢサーバのリストだ澄
箍害
甓害
このサーバは、CTM デルタ誓言成プロセスによって、自動的にアップデートされている。
d235 1
a235 1
しており、分割ファイルは <tt><b>base-split</b></tt> ディレクトリの下にある。
d243 1
a243 1
このサーバは、メーリングリストからの CTM デルタによってアップデートされている。
d248 1
a248 1
をミラーした、分割ベースデルタを付加的に持っている。
d266 1
a266 1
のミラーとなっている。
d270 1
a270 1
<b>注:</b> <a href="mailto:hgw@@d1906.inka.de">私</a> は
d272 1
a272 1
      大変な関心を持って探している。
d275 1
a275 1
<h3><font color="#0000e0">ソースツリーと CVS リポジトリ、どちらを選ぶべき ?</font></h3>
d278 1
a278 1
他の要素の中でも、これに関しては、あなたのディスクスペースに依存する。
d281 4
a284 4
の方だ世蹐Α嶝ぢリポジトリから、ソースツリーの作業用コピーを
チェックアウトもできるし、安定版のブランチを追いかけることもできるし、
自分のローカルな変更を自分のソースツリー中でキープすることもできる。
CVS は、あなたのローカルな変更をマージできるくらい良くできたものだ澄
箍原
甓原
のようなコマンドを除いた、すべての範囲の CVS コマンドを利用可能でもある。
d289 2
a290 2
しかしながら、欠点世箸靴討蓮△修譴廚箸垢襯妊好好據璽垢領未△襪誓ろう。
チェックアウトされたソースツリーは約 370MB 程度を必要とするが、あなたは
d292 1
a292 1
なり、<b>それに加えて</b> 370MB がチェックアウトしたツリー用に必要となる。
d294 1
a294 1
のために必要な (アーキテクチャに依存する) 100MB 以上の領域は含まれていない。
d297 3
a299 3
もし、ソースツリーを得世蕕譴燭覆蕁▲蹇璽襪癖儿垢鯣娠任垢詆廚△蹐Α
これを行うためのひとつの方法としては、<b>union</b> ファイルシステムがある
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=mount_union&sektion=8">mount_union(8)</a>
d301 1
a301 1
場合、<b>union</b> ファイルシステムは不安定であるとのレポートも出されている。
d303 1
a303 1
ないだ世蹐Α海譴砲弔い討領磴麓，里箸箜宛
甞碓
儒錫少鬲齟禺昭ぢにあると仮定する。
<tt><b>/usr/src</b></tt> は初期状態では空のディレクトリであるべきだ澄
次のコマンドで、union マウントをセットアップできるだ世蹐Α
箜厩
甞厩
含まれるファイルになるだ世蹐Α發掘儒錫杖鱆鹿眈鹿のツリー下の
d321 1
a321 1
隠すかのように、これらの変更が見える<b>わけではない</b>。
d325 1
a325 1
ローカルから union ファイルシステムに移ったファイルをサーチすべきだ世蹐Α
箜概
甞概
儒錫杖鱆鹿眈鹿のファイルを隠すだ世蹐Δ蕁¬鬚卜弔海箸誓ろう。
d339 1
a339 1
<tt><b>cvs checkout</b></tt> コマンドを使用することができる。
d341 1
a341 1
<tt><b>cvs update</b></tt> コマンドを使用することができる。
d344 1
a344 1
初期状態の src リポジトリを得世襪砲箜軌
甞軌
そして、それぞれの CTM の更新後:
d356 1
a356 1
<H3><font color="#0000e0">OpenBSD の CTM はどの程度安定しているのか ?</font></H3>
d359 1
a359 1
さらに長い期間使用されてきた。CTM は非常に信頼誓△蝓堕蠅靴討い襦
箜怯
甞怯
取馨惹闔竢跫鮟■旭旭絨⊂痴を維持するために何が行われているのか ?</font></h3>
d363 2
a364 2
数々の (小さな) 変更と最適化が可能。
それらの中で:
d367 2
a368 2
<li> CTM は 5MB 以上のデルタを決してメールでは送信しない。これについては、
     二種類の変更が可能で、デルタの最大サイズを増加させることもできたし、
d370 3
a372 3
     インストールすることもできた。たとえば、デルタが 6MB の大きさの
     場合、これは 96 個のメールメッセージに分割される。そして、それらは、
     キューに入れられる。初日は最初の 50 個のメッセージを送信し、
d374 1
a374 1
     を送信する。
d376 3
a378 3
     フィックスすることもできる。その C 言生譴亮汰蓮⇔匹ぅ廛蹈哀薀潺鵐
ぢの見本ではない。しかし、また、それは、PGP による CTM デルタへの署名
     のような新機能を追加するための良い目的ともなるだ世蹐Α
箜険
甞険
あなたの御意見・御希望を、<a href="mailto:hgw@@d1906.inka.de">私</a>にメールして欲しい !
d385 2
a386 2
もし、CTM についてさらに知りたいなら、それを始める良い場所として、
FreeBSD ハンドブックがある。
d394 1
a394 1
また、すべての CTM ユーティリティのためのマニュアルページもある。
d428 1
a428 1
メーリングリストに投稿されるだ世蹐Α
箚涯
甦涯
ぢデルタの誓言成できるようにするのを助けてくれた。
d439 1
a439 1
     (現在は別のところで誓言成されているが) cvs.OpenBSD.org 上で CTM デルタ
d441 1
a441 1
     ネームサーバのマジックも提供してくれた。
d444 1
a444 1
     セットアップし、メンテナンスしてくれている。
d449 1
a449 1
     ベースセットとデルタ用に ftp 用の領域をセットアップしてくれた。
d452 1
a452 1
     をスタートし、それをずっとメンテナンスしてくれている。
d454 1
a454 1
<li> Wim Vandeputte (wvdputte@@OpenBSD.org) は、現在 CTM をホスティングしてくれている。
d462 1
a462 1
   <a href="mailto:flipk@@openbsd.org">Phillip F Knaack</a> によってデザインされた。
d470 1
a470 1
Originally [OpenBSD: ctm.html,v 1.22 ]
d472 1
a472 1
$Translation: ctm.html,v 1.4 2002/04/25 00:17:17 toshi Exp $
d474 1
a474 1
$OpenBSD: ctm.html,v 1.22 2002/04/17 07:21:06 miod Exp $
@


1.3
log
@
sync with badlands translation CVS
@
text
@d465 1
a465 1
<a href="index.html"><img height="24" width="24" src="back.gif" border="0" alt="OpenBSD" /></a>
d472 1
a472 1
$Translation: ctm.html,v 1.3 2002/04/17 09:08:41 toshi Exp $
@


1.2
log
@
links corrected
@
text
@a366 15
<li> CTM never sends a delta bigger than 5MB via mail.  This could be
     changed in two ways: The maximum delta size could be increased,
     or a queue could be installed, from which only a certain number
     of messages are mailed out daily.  E. g., if a delta is 6MB in
     size, it is split into 96 mail messages.  These are put into a
     queue.  On the first day, the first 50 messages are sent, on the
     second day the remaining 46, plus the first 4 messages of the
     following delta.
<li> The CTM software could be rewritten, or at least fixed in a
     better manner.  Its C implemtation is not an example of good
     programming.  That would also be a nice opportunity for adding
     new features, like signing CTM deltas with PGP.
</ul>

<ul>
d470 1
a470 1
Originally [OpenBSD: ctm.html,v 1.21 ]
d472 1
a472 1
$Translation: ctm.html,v 1.2 2002/04/14 13:50:31 toshi Exp $
d474 1
a474 1
$OpenBSD: ctm.html,v 1.21 2002/03/23 06:15:38 pvalchev Exp $
@


1.1
log
@
sync with badlands translation CVS
@
text
@d218 1
a218 1
<a href="ports.html">ports コレクション</a> のプログラムを使って、
d487 1
a487 1
$Translation: ctm.html,v 1.1 2002/04/01 14:29:44 toshi Exp $
@

